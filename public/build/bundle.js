<<<<<<< HEAD
var app=function(){"use strict";function e(){}const t=e=>e;function i(e,t){for(const i in t)e[i]=t[i];return e}function a(e){return e()}function s(){return Object.create(null)}function o(e){e.forEach(a)}function r(e){return"function"==typeof e}function n(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t,i,a){if(e){const s=u(e,t,i,a);return e[0](s)}}function u(e,t,a,s){return e[1]&&s?i(a.ctx.slice(),e[1](s(t))):a.ctx}function c(e,t,i,a,s,o,r){const n=function(e,t,i,a){if(e[2]&&a){const s=e[2](a(i));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],i=Math.max(t.dirty.length,s.length);for(let a=0;a<i;a+=1)e[a]=t.dirty[a]|s[a];return e}return t.dirty|s}return t.dirty}(t,a,s,o);if(n){const s=u(t,i,a,r);e.p(s,n)}}function g(e){const t={};for(const i in e)"$"!==i[0]&&(t[i]=e[i]);return t}function f(e){return null==e?"":e}function d(t){return t&&r(t.destroy)?t.destroy:e}const h="undefined"!=typeof window;let p=h?()=>window.performance.now():()=>Date.now(),m=h?e=>requestAnimationFrame(e):e;const y=new Set;function _(e){y.forEach(t=>{t.c(e)||(y.delete(t),t.f())}),0!==y.size&&m(_)}function b(e,t){e.appendChild(t)}function v(e,t,i){e.insertBefore(t,i||null)}function x(e){e.parentNode.removeChild(e)}function C(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function q(e){return document.createElement(e)}function U(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function w(e){return document.createTextNode(e)}function E(){return w(" ")}function B(){return w("")}function P(e,t,i,a){return e.addEventListener(t,i,a),()=>e.removeEventListener(t,i,a)}function M(e,t,i){null==i?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function T(e,t){const i=Object.getOwnPropertyDescriptors(e.__proto__);for(const a in t)null==t[a]?e.removeAttribute(a):"style"===a?e.style.cssText=t[a]:"__value"===a?e.value=e[a]=t[a]:i[a]&&i[a].set?e[a]=t[a]:M(e,a,t[a])}function A(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function S(e,t){e.value=null==t?"":t}function I(e,t,i,a){e.style.setProperty(t,i,a?"important":"")}function D(e,t){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,!1,!1,t),i}const z=new Set;let k,F=0;function L(e,t,i,a,s,o,r,n=0){const l=16.666/a;let u="{\n";for(let e=0;e<=1;e+=l){const a=t+(i-t)*o(e);u+=100*e+`%{${r(a,1-a)}}\n`}const c=u+`100% {${r(i,1-i)}}\n}`,g=`__svelte_${function(e){let t=5381,i=e.length;for(;i--;)t=(t<<5)-t^e.charCodeAt(i);return t>>>0}(c)}_${n}`,f=e.ownerDocument;z.add(f);const d=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(q("style")).sheet),h=f.__svelte_rules||(f.__svelte_rules={});h[g]||(h[g]=!0,d.insertRule(`@keyframes ${g} ${c}`,d.cssRules.length));const p=e.style.animation||"";return e.style.animation=`${p?p+", ":""}${g} ${a}ms linear ${s}ms 1 both`,F+=1,g}function O(e,t){const i=(e.style.animation||"").split(", "),a=i.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),s=i.length-a.length;s&&(e.style.animation=a.join(", "),F-=s,F||m(()=>{F||(z.forEach(e=>{const t=e.__svelte_stylesheet;let i=t.cssRules.length;for(;i--;)t.deleteRule(i);e.__svelte_rules={}}),z.clear())}))}function R(e){k=e}function N(){if(!k)throw new Error("Function called outside component initialization");return k}function $(e){N().$$.on_mount.push(e)}function G(e){N().$$.on_destroy.push(e)}function V(e,t){N().$$.context.set(e,t)}function Z(e){return N().$$.context.get(e)}function Q(e,t){const i=e.$$.callbacks[t.type];i&&i.slice().forEach(e=>e(t))}const j=[],H=[],X=[],W=[],K=Promise.resolve();let J=!1;function Y(e){X.push(e)}function ee(e){W.push(e)}let te=!1;const ie=new Set;function ae(){if(!te){te=!0;do{for(let e=0;e<j.length;e+=1){const t=j[e];R(t),se(t.$$)}for(R(null),j.length=0;H.length;)H.pop()();for(let e=0;e<X.length;e+=1){const t=X[e];ie.has(t)||(ie.add(t),t())}X.length=0}while(j.length);for(;W.length;)W.pop()();J=!1,te=!1,ie.clear()}}function se(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Y)}}let oe;function re(e,t,i){e.dispatchEvent(D(`${t?"intro":"outro"}${i}`))}const ne=new Set;let le;function ue(){le={r:0,c:[],p:le}}function ce(){le.r||o(le.c),le=le.p}function ge(e,t){e&&e.i&&(ne.delete(e),e.i(t))}function fe(e,t,i,a){if(e&&e.o){if(ne.has(e))return;ne.add(e),le.c.push(()=>{ne.delete(e),a&&(i&&e.d(1),a())}),e.o(t)}}const de={duration:0};function he(i,a,s,n){let l=a(i,s),u=n?0:1,c=null,g=null,f=null;function d(){f&&O(i,f)}function h(e,t){const i=e.b-u;return t*=Math.abs(i),{a:u,b:e.b,d:i,duration:t,start:e.start,end:e.start+t,group:e.group}}function b(a){const{delay:s=0,duration:r=300,easing:n=t,tick:b=e,css:v}=l||de,x={start:p()+s,b:a};a||(x.group=le,le.r+=1),c?g=x:(v&&(d(),f=L(i,u,a,r,s,n,v)),a&&b(0,1),c=h(x,r),Y(()=>re(i,a,"start")),function(e){let t;0===y.size&&m(_),new Promise(i=>{y.add(t={c:e,f:i})})}(e=>{if(g&&e>g.start&&(c=h(g,r),g=null,re(i,c.b,"start"),v&&(d(),f=L(i,u,c.b,c.duration,0,n,l.css))),c)if(e>=c.end)b(u=c.b,1-u),re(i,c.b,"end"),g||(c.b?d():--c.group.r||o(c.group.c)),c=null;else if(e>=c.start){const t=e-c.start;u=c.a+c.d*n(t/c.duration),b(u,1-u)}return!(!c&&!g)}))}return{run(e){r(l)?(oe||(oe=Promise.resolve(),oe.then(()=>{oe=null})),oe).then(()=>{l=l(),b(e)}):b(e)},end(){d(),c=g=null}}}function pe(e,t){const i={},a={},s={$$scope:1};let o=e.length;for(;o--;){const r=e[o],n=t[o];if(n){for(const e in r)e in n||(a[e]=1);for(const e in n)s[e]||(i[e]=n[e],s[e]=1);e[o]=n}else for(const e in r)s[e]=1}for(const e in a)e in i||(i[e]=void 0);return i}function me(e,t,i){const a=e.$$.props[t];void 0!==a&&(e.$$.bound[a]=i,i(e.$$.ctx[a]))}function ye(e){e&&e.c()}function _e(e,t,i){const{fragment:s,on_mount:n,on_destroy:l,after_update:u}=e.$$;s&&s.m(t,i),Y(()=>{const t=n.map(a).filter(r);l?l.push(...t):o(t),e.$$.on_mount=[]}),u.forEach(Y)}function be(e,t){const i=e.$$;null!==i.fragment&&(o(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function ve(e,t){-1===e.$$.dirty[0]&&(j.push(e),J||(J=!0,K.then(ae)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function xe(t,i,a,r,n,l,u=[-1]){const c=k;R(t);const g=i.props||{},f=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:n,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:s(),dirty:u,skip_bound:!1};let d=!1;if(f.ctx=a?a(t,g,(e,i,...a)=>{const s=a.length?a[0]:i;return f.ctx&&n(f.ctx[e],f.ctx[e]=s)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](s),d&&ve(t,e)),i}):[],f.update(),d=!0,o(f.before_update),f.fragment=!!r&&r(f.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);f.fragment&&f.fragment.l(e),e.forEach(x)}else f.fragment&&f.fragment.c();i.intro&&ge(t.$$.fragment),_e(t,i.target,i.anchor),ae()}R(c)}class Ce{$destroy(){be(this,1),this.$destroy=e}$on(e,t){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const qe=[];function Ue(t,i=e){let a;const s=[];function o(e){if(n(t,e)&&(t=e,a)){const e=!qe.length;for(let e=0;e<s.length;e+=1){const i=s[e];i[1](),qe.push(i,t)}if(e){for(let e=0;e<qe.length;e+=2)qe[e][0](qe[e+1]);qe.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(r,n=e){const l=[r,n];return s.push(l),1===s.length&&(a=i(o)||e),r(t),()=>{const e=s.indexOf(l);-1!==e&&s.splice(e,1),0===s.length&&(a(),a=null)}}}}const we=Ue(!1),Ee=Ue(!1),Be=Ue(null),Pe=Ue(null),Me=Ue(null),Te=Ue(null),Ae=Ue(null),Se=Ue(null),Ie=Ue(null),De={},ze=[{label:"Topogràfic",image:"https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/style/img/Terreny_hibrid_12228.jpg",url:"https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/style/styles/topo_infogeo.json"},{label:"Ortoimatge",image:"https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/style/img/Orto_hibrida_12228.jpg",url:"https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/style/styles/hibrid_infogeo.json"},{label:"Estructural (1:250 000)",image:"https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/style/img/estructural.jpg",url:"estructuralwms"}],ke=[{groupLabel:"Columnes estratigràfiques",groupId:"opt_columnes",items:[{label:"Neogen",value:"Neogen LINK,Neogen NO LINK"},{label:"Paleogen",value:"Paleogen LINK,Paleogen NO LINK"},{label:"Mesozoic",value:"Mesozoic NO LINK,Mesozoic LINK"},{label:"Paleozoic",value:"Paleozoic NO LINK,Paleozoic LINK"}]}],Fe=[{groupLabel:"Mesures d'estructures",groupId:"opt_mesures",items:[{label:"Estratificació",value:"Estratificació"},{label:"Foliació regional varisca",value:"Foliació regional varisca"},{label:"Lineació d'intersecció entre l'estratificació i la foliació regional varisca",value:"Lineació d'intersecció entre l'estratificació i la foliació regional varisca"},{label:"Sentit de paleocorrent",value:"Sentit de paleocorrent"}]},{groupLabel:"Talls Geològics",groupId:"opt_elements",items:[{label:"Traces de Talls Geològics",value:"Talls geològics,Talls geològics/label"}]},{groupLabel:"Terrenys Antròpics",groupId:"opt_antropics",items:[{label:"Terraplens en obres viàries",value:"Explanacions en obres viàries,Explanacions en obres viàries/label"},{label:"Terraplens d'infraestructura costanera",value:"Terraplens d'infraestructures costaneres,Terraplens d'infraestructures costaneres/label"},{label:"Valls i zones deprimides reblertes",value:"Valls i zones deprimides reblertes,Valls i zones deprimides reblertes/label"},{label:"Dipòsits d'abocadors de residus",value:"Dipòsits d'abocadors de residus,Dipòsits d'abocadors de residus/label"},{label:"Rebliments indiferenciats",value:"Rebliments indiferenciats,Rebliments indiferenciats/label"},{label:"Zones extractives a cel obert",value:"Zones extractives a cel obert,Zones extractives a cel obert/label"},{label:"Desmunts en obres viàries",value:"Desmunts en obres viàries,Desmunts en obres viàries/label"},{label:"Explanacions en obres viàries",value:"Terraplens en obres viàries,Terraplens en obres viàries/label"}]},{groupLabel:"Registre Geològic",groupId:"opt_registre",items:[{label:"Columnes estratigràfiques",value:"Paleozoic NO LINK,Paleozoic LINK,Mesozoic NO LINK,Mesozoic LINK,Columnes del Paleozoic,Columnes del Mesozoic,Paleogen LINK,Paleogen NO LINK,Neogen LINK,Neogen NO LINK"},{label:"Esquemes relacions estratigràfiques",value:"Esquemes de relacions estratigràfiques"}]},{groupLabel:"Dipòsits Quaternaris",groupId:"opt_quaternari",items:[{label:"Elements geomorfològics",value:"Elements geomorfològics"},{label:"Contactes",value:"Contactes del quaternari"},{label:"Unitats geològiques",value:"Unitats geològiques:1,Unitats geològiques:1/label"}]},{groupLabel:"Basament pre-Quaternari",groupId:"opt_basament",items:[{label:"Contactes",value:"Contactes del basament"},{label:"Falles i plecs",value:"gt125mv10sh0ffl1r010_202101,gt125mv10sh0ffl1r010_202101_5513"},{label:"Unitats geològiques",value:"Unitats geològiques:2,Unitats geològiques:2/label"}]}];"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Le(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Oe(e,t){return e(t={exports:{}},t.exports),t.exports}var Re=Oe((function(e,t){e.exports=function(){var e,t,i;function a(a,s){if(e)if(t){var o="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",r={};e(r),i=s(r),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=s;else e=s}return a(0,(function(e){function t(e,t){return e(t={exports:{}},t.exports),t.exports}var i=a;function a(e,t,i,a){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(a-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=a,this.p2x=i,this.p2y=a}a.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},a.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},a.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},a.prototype.solveCurveX=function(e,t){var i,a,s,o,r;for(void 0===t&&(t=1e-6),s=e,r=0;r<8;r++){if(o=this.sampleCurveX(s)-e,Math.abs(o)<t)return s;var n=this.sampleCurveDerivativeX(s);if(Math.abs(n)<1e-6)break;s-=o/n}if((s=e)<(i=0))return i;if(s>(a=1))return a;for(;i<a;){if(o=this.sampleCurveX(s),Math.abs(o-e)<t)return s;e>o?i=s:a=s,s=.5*(a-i)+i}return s},a.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var s=o;function o(e,t){this.x=e,this.y=t}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),a=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=a,this},_rotateAround:function(e,t){var i=Math.cos(e),a=Math.sin(e),s=t.y+a*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-a*(this.y-t.y),this.y=s,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(e){return e instanceof o?e:Array.isArray(e)?new o(e[0],e[1]):e};var r="undefined"!=typeof self?self:{};function n(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!n(e[i],t[i]))return!1;return!0}return e===t}const l=Math.pow(2,53)-1,u=Math.PI/180,c=180/Math.PI;function g(e){return e*u}function f(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,i=t*e;return 4*(e<.5?i:3*(e-t)+i-.75)}function d(e,t,a,s){const o=new i(e,t,a,s);return function(e){return o.solve(e)}}const h=d(.25,.1,.25,1);function p(e,t,i){return Math.min(i,Math.max(t,e))}function m(e,t,i){const a=i-t,s=((e-t)%a+a)%a+t;return s===t?i:s}function y(e){const t=[];for(const i in e)t.push(e[i]);return t}function _(e,...t){for(const i of t)for(const t in i)e[t]=i[t];return e}let b=1;function v(){return b++}function x(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function C(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function q(e,t){e.forEach(e=>{t[e]&&(t[e]=t[e].bind(t))})}function U(e,t){return-1!==e.indexOf(t,e.length-t.length)}function w(e,t,i){const a={};for(const s in e)a[s]=t.call(i||this,e[s],s,e);return a}function E(e,t,i){const a={};for(const s in e)t.call(i||this,e[s],s,e)&&(a[s]=e[s]);return a}function B(e){return Array.isArray(e)?e.map(B):"object"==typeof e&&e?w(e,B):e}const P={};function M(e){P[e]||("undefined"!=typeof console&&console.warn(e),P[e]=!0)}function T(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function A(e){let t=0;for(let i,a,s=0,o=e.length,r=o-1;s<o;r=s++)i=e[s],a=e[r],t+=(a.x-i.x)*(i.y+a.y);return t}function S(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function I(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(e,i,a,s)=>{const o=a||s;return t[i]=!o||o.toLowerCase(),""}),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let D=null;function z(e){if(null==D){const t=e.navigator?e.navigator.userAgent:null;D=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return D}function k(e){try{const t=r[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}const F=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),L=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,O=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;let R,N,$=!1;const G={now:F,setErrorState(){$=!0},setNow(e){G.now=()=>e},restoreNow(){G.now=F},frame(e){if($)return{cancel:()=>{}};const t=L(e);return{cancel:()=>O(t)}},getImageData(e,t=0){const i=r.document.createElement("canvas"),a=i.getContext("2d");if(!a)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,a.drawImage(e,0,0,e.width,e.height),a.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:e=>(R||(R=r.document.createElement("a")),R.href=e,R.href),get devicePixelRatio(){return r.devicePixelRatio},get prefersReducedMotion(){return!!r.matchMedia&&(null==N&&(N=r.matchMedia("(prefers-reduced-motion: reduce)")),N.matches)}},V={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},Z={supported:!1,testSupport:function(e){!H&&j&&(X?W(e):Q=e)}};let Q,j,H=!1,X=!1;function W(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,j),e.isContextLost())return;Z.supported=!0}catch(e){}e.deleteTexture(t),H=!0}r.document&&(j=r.document.createElement("img"),j.onload=function(){Q&&W(Q),Q=null,X=!0},j.onerror=function(){H=!0,Q=null},j.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const K="01";function J(e){return 0===e.indexOf("mapbox:")}const Y=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ee(e){return Y.test(e)}const te=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ie(e){const t=e.match(te);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function ae(e){const t=e.params.length?"?"+e.params.join("&"):"";return`${e.protocol}://${e.authority}${e.path}${t}`}function se(e){if(!e)return null;const t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(r.atob(t[1]).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(e){return null}}class oe{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const t=se(V.ACCESS_TOKEN);let i="";return i=t&&t.u?r.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(Number("0x"+t)))):V.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${i}`:"mapbox.eventData:"+i}fetchEventData(){const e=k("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{const e=r.localStorage.getItem(t);e&&(this.eventData=JSON.parse(e));const a=r.localStorage.getItem(i);a&&(this.anonId=a)}catch(e){M("Unable to read from LocalStorage")}}saveEventData(){const e=k("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{r.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&r.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){M("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,t,i,a){if(!V.EVENTS_URL)return;const s=ie(V.EVENTS_URL);s.params.push("access_token="+(a||V.ACCESS_TOKEN||""));const o={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.0.0",skuId:K,userId:this.anonId},r=t?_(o,t):o,n={url:ae(s),headers:{"Content-Type":"text/plain"},body:JSON.stringify([r])};this.pendingRequest=Ee(n,e=>{this.pendingRequest=null,i(e),this.saveEventData(),this.processRequests(a)})}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const re=new class extends oe{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){V.EVENTS_URL&&V.ACCESS_TOKEN&&Array.isArray(e)&&e.some(e=>J(e)||ee(e))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=se(V.ACCESS_TOKEN),i=t?t.u:V.ACCESS_TOKEN;let a=i!==this.eventData.tokenU;C(this.anonId)||(this.anonId=x(),a=!0);const s=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(s),i=(s-this.eventData.lastSuccess)/864e5;a=a||i>=1||i<-1||e.getDate()!==t.getDate()}else a=!0;if(!a)return this.processRequests();this.postEvent(s,{"enabled.telemetry":!1},e=>{e||(this.eventData.lastSuccess=s,this.eventData.tokenU=i)},e)}},ne=re.postTurnstileEvent.bind(re),le=new class extends oe{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,i,a){this.skuToken=t,this.errorCb=a,V.EVENTS_URL&&(i||V.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},i):this.errorCb(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:i}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),C(this.anonId)||(this.anonId=x()),this.postEvent(i,{skuToken:this.skuToken},e=>{e?this.errorCb(e):t&&(this.success[t]=!0)},e))}},ue=le.postMapLoadEvent.bind(le),ce=new class extends oe{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,i,a){if(!V.API_URL||!V.SESSION_PATH)return;const s=ie(V.API_URL+V.SESSION_PATH);s.params.push("sku="+(t||"")),s.params.push("access_token="+(a||V.ACCESS_TOKEN||""));const o={url:ae(s),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Be(o,e=>{this.pendingRequest=null,i(e),this.saveEventData(),this.processRequests(a)})}getSessionAPI(e,t,i,a){this.skuToken=t,this.errorCb=a,V.SESSION_PATH&&V.API_URL&&(i||V.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},i):this.errorCb(new Error("NO_ACCESS_TOKEN")))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:i}=this.queue.shift();t&&this.success[t]||this.getSession(i,this.skuToken,e=>{e?this.errorCb(e):t&&(this.success[t]=!0)},e)}},ge=ce.getSessionAPI.bind(ce);let fe,de,he=500,pe=50;function me(){r.caches&&!fe&&(fe=r.caches.open("mapbox-tiles"))}function ye(e){const t=e.indexOf("?");return t<0?e:e.slice(0,t)}let _e,be=1/0;function ve(){return null==_e&&(_e=r.OffscreenCanvas&&new r.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof r.createImageBitmap),_e}const xe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(xe);class Ce extends Error{constructor(e,t,i){401===t&&ee(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=i}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const qe=S()?()=>self.worker&&self.worker.referrer:()=>("blob:"===r.location.protocol?r.parent:r).location.href,Ue=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(qe())&&!/^\w+:/.test(i))){if(r.fetch&&r.Request&&r.AbortController&&r.Request.prototype.hasOwnProperty("signal"))return function(e,t){const i=new r.AbortController,a=new r.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:qe(),signal:i.signal});let s=!1,o=!1;const n=(l=a.url).indexOf("sku=")>0&&ee(l);var l;"json"===e.type&&a.headers.set("Accept","application/json");const u=(i,s,l)=>{if(o)return;if(i&&"SecurityError"!==i.message&&M(i),s&&l)return c(s);const u=Date.now();r.fetch(a).then(i=>{if(i.ok){const e=n?i.clone():null;return c(i,e,u)}return t(new Ce(i.statusText,i.status,e.url))}).catch(e=>{20!==e.code&&t(new Error(e.message))})},c=(i,n,l)=>{("arrayBuffer"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text()).then(e=>{o||(n&&l&&function(e,t,i){if(me(),!fe)return;const a={status:t.status,statusText:t.statusText,headers:new r.Headers};t.headers.forEach((e,t)=>a.headers.set(t,e));const s=I(t.headers.get("Cache-Control")||"");s["no-store"]||(s["max-age"]&&a.headers.set("Expires",new Date(i+1e3*s["max-age"]).toUTCString()),new Date(a.headers.get("Expires")).getTime()-i<42e4||function(e,t){if(void 0===de)try{new Response(new ReadableStream),de=!0}catch(e){de=!1}de?t(e.body):e.blob().then(t)}(t,t=>{const i=new r.Response(t,a);me(),fe&&fe.then(t=>t.put(ye(e.url),i)).catch(e=>M(e.message))}))}(a,n,l),s=!0,t(null,e,i.headers.get("Cache-Control"),i.headers.get("Expires")))}).catch(e=>{o||t(new Error(e.message))})};return n?function(e,t){if(me(),!fe)return t(null);const i=ye(e.url);fe.then(e=>{e.match(i).then(a=>{const s=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),i=I(e.headers.get("Cache-Control")||"");return t>Date.now()&&!i["no-cache"]}(a);e.delete(i),s&&e.put(i,a.clone()),t(null,a,s)}).catch(t)}).catch(t)}(a,u):u(null,null),{cancel:()=>{o=!0,s||i.abort()}}}(e,t);if(S()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(e,t){const i=new r.XMLHttpRequest;i.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(i.responseType="arraybuffer");for(const t in e.headers)i.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===e.credentials,i.onerror=()=>{t(new Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let a=i.response;if("json"===e.type)try{a=JSON.parse(i.response)}catch(e){return t(e)}t(null,a,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else t(new Ce(i.statusText,i.status,e.url))},i.send(e.body),{cancel:()=>i.abort()}}(e,t)},we=function(e,t){return Ue(_(e,{type:"arrayBuffer"}),t)},Ee=function(e,t){return Ue(_(e,{method:"POST"}),t)},Be=function(e,t){return Ue(_(e,{method:"GET"}),t)};function Pe(e){const t=r.document.createElement("a");return t.href=e,t.protocol===r.document.location.protocol&&t.host===r.document.location.host}const Me="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Te,Ae;Te=[],Ae=0;const Se=function(e,t){if(Z.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Ae>=V.MAX_PARALLEL_IMAGE_REQUESTS){const i={requestParameters:e,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return Te.push(i),i}Ae++;let i=!1;const a=()=>{if(!i)for(i=!0,Ae--;Te.length&&Ae<V.MAX_PARALLEL_IMAGE_REQUESTS;){const e=Te.shift(),{requestParameters:t,callback:i,cancelled:a}=e;a||(e.cancel=Se(t,i).cancel)}},s=we(e,(e,i,s,o)=>{a(),e?t(e):i&&(ve()?function(e,t){const i=new r.Blob([new Uint8Array(e)],{type:"image/png"});r.createImageBitmap(i).then(e=>{t(null,e)}).catch(e=>{t(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(i,t):function(e,t,i,a){const s=new r.Image,o=r.URL;s.onload=()=>{t(null,s),o.revokeObjectURL(s.src),s.onload=null,s.src=Me},s.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const n=new r.Blob([new Uint8Array(e)],{type:"image/png"});s.cacheControl=i,s.expires=a,s.src=e.byteLength?o.createObjectURL(n):Me}(i,t,s,o))});return{cancel:()=>{s.cancel(),a()}}};function Ie(e,t,i){i[e]&&-1!==i[e].indexOf(t)||(i[e]=i[e]||[],i[e].push(t))}function De(e,t,i){if(i&&i[e]){const a=i[e].indexOf(t);-1!==a&&i[e].splice(a,1)}}class ze{constructor(e,t={}){_(this,t),this.type=e}}class ke extends ze{constructor(e,t={}){super("error",_({error:e},t))}}class Fe{on(e,t){return this._listeners=this._listeners||{},Ie(e,t,this._listeners),this}off(e,t){return De(e,t,this._listeners),De(e,t,this._oneTimeListeners),this}once(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},Ie(e,t,this._oneTimeListeners),this}fire(e,t){"string"==typeof e&&(e=new ze(e,t||{}));const i=e.type;if(this.listens(i)){e.target=this;const t=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];for(const i of t)i.call(this,e);const a=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];for(const t of a)De(i,t,this._oneTimeListeners),t.call(this,e);const s=this._eventedParent;s&&(_(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(e))}else e instanceof ke&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var Le={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Oe{constructor(e,t,i,a){this.message=(e?e+": ":"")+i,a&&(this.identifier=a),null!=t&&t.__line__&&(this.line=t.__line__)}}function Re(e){const t=e.value;return t?[new Oe(e.key,t,"constants have been deprecated as of v8")]:[]}function Ne(e,...t){for(const i of t)for(const t in i)e[t]=i[t];return e}function $e(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ge(e){if(Array.isArray(e))return e.map(Ge);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const i in e)t[i]=Ge(e[i]);return t}return $e(e)}class Ve extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class Ze{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,i]of t)this.bindings[e]=i}concat(e){return new Ze(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Qe={kind:"null"},je={kind:"number"},He={kind:"string"},Xe={kind:"boolean"},We={kind:"color"},Ke={kind:"object"},Je={kind:"value"},Ye={kind:"collator"},et={kind:"formatted"},tt={kind:"resolvedImage"};function it(e,t){return{kind:"array",itemType:e,N:t}}function at(e){if("array"===e.kind){const t=at(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const st=[Qe,je,He,Xe,We,et,Ke,it(Je),tt];function ot(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!ot(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of st)if(!ot(e,t))return null}return`Expected ${at(e)} but found ${at(t)} instead.`}function rt(e,t){return t.some(t=>t.kind===e.kind)}function nt(e,t){return t.some(t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e)}var lt=t((function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function a(e){return(e=Math.round(e))<0?0:e>255?255:e}function s(e){return a("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function o(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function r(e,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}try{t.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in i)return i[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=n.indexOf("("),u=n.indexOf(")");if(-1!==l&&u+1===n.length){var c=n.substr(0,l),g=n.substr(l+1,u-(l+1)).split(","),f=1;switch(c){case"rgba":if(4!==g.length)return null;f=o(g.pop());case"rgb":return 3!==g.length?null:[s(g[0]),s(g[1]),s(g[2]),f];case"hsla":if(4!==g.length)return null;f=o(g.pop());case"hsl":if(3!==g.length)return null;var d=(parseFloat(g[0])%360+360)%360/360,h=o(g[1]),p=o(g[2]),m=p<=.5?p*(h+1):p+h-p*h,y=2*p-m;return[a(255*r(y,m,d+1/3)),a(255*r(y,m,d)),a(255*r(y,m,d-1/3)),f];default:return null}}return null}}catch(e){}})).parseCSSColor;class ut{constructor(e,t,i,a=1){this.r=e,this.g=t,this.b=i,this.a=a}static parse(e){if(!e)return;if(e instanceof ut)return e;if("string"!=typeof e)return;const t=lt(e);return t?new ut(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,i,a]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(i)},${a})`}toArray(){const{r:e,g:t,b:i,a:a}=this;return 0===a?[0,0,0,0]:[255*e/a,255*t/a,255*i/a,a]}}ut.black=new ut(0,0,0,1),ut.white=new ut(1,1,1,1),ut.transparent=new ut(0,0,0,0),ut.red=new ut(1,0,0,1),ut.blue=new ut(0,0,1,1);class ct{constructor(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class gt{constructor(e,t,i,a,s){this.text=e,this.image=t,this.scale=i,this.fontStack=a,this.textColor=s}}class ft{constructor(e){this.sections=e}static fromString(e){return new ft([new gt(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof ft?e:ft.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const i={};t.fontStack&&(i["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(i["font-scale"]=t.scale),t.textColor&&(i["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(i)}return e}}class dt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new dt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function ht(e,t,i,a){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===a||"number"==typeof a&&a>=0&&a<=1?null:`Invalid rgba value [${[e,t,i,a].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof a?[e,t,i,a]:[e,t,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function pt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof ut)return!0;if(e instanceof ct)return!0;if(e instanceof ft)return!0;if(e instanceof dt)return!0;if(Array.isArray(e)){for(const t of e)if(!pt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!pt(e[t]))return!1;return!0}return!1}function mt(e){if(null===e)return Qe;if("string"==typeof e)return He;if("boolean"==typeof e)return Xe;if("number"==typeof e)return je;if(e instanceof ut)return We;if(e instanceof ct)return Ye;if(e instanceof ft)return et;if(e instanceof dt)return tt;if(Array.isArray(e)){const t=e.length;let i;for(const t of e){const e=mt(t);if(i){if(i===e)continue;i=Je;break}i=e}return it(i||Je,t)}return Ke}function yt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof ut||e instanceof ft||e instanceof dt?e.toString():JSON.stringify(e)}class _t{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!pt(e[1]))return t.error("invalid value");const i=e[1];let a=mt(i);const s=t.expectedType;return"array"!==a.kind||0!==a.N||!s||"array"!==s.kind||"number"==typeof s.N&&0!==s.N||(a=s),new _t(a,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ut?["rgba"].concat(this.value.toArray()):this.value instanceof ft?this.value.serialize():this.value}}class bt{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const vt={string:He,number:je,boolean:Xe,object:Ke};class xt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i,a=1;const s=e[0];if("array"===s){let s,o;if(e.length>2){const i=e[1];if("string"!=typeof i||!(i in vt)||"object"===i)return t.error('The item type argument of "array" must be one of string, number, boolean',1);s=vt[i],a++}else s=Je;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],a++}i=it(s,o)}else i=vt[s];const o=[];for(;a<e.length;a++){const i=t.parse(e[a],a,Je);if(!i)return null;o.push(i)}return new xt(i,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(!ot(this.type,mt(i)))return i;if(t===this.args.length-1)throw new bt(`Expected value to be of type ${at(this.type)}, but found ${at(mt(i))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const i=e.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){t.push(i.kind);const a=e.N;("number"==typeof a||this.args.length>1)&&t.push(a)}}return t.concat(this.args.map(e=>e.serialize()))}}class Ct{constructor(e){this.type=et,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&"object"==typeof i)return t.error("First argument must be an image or text section.");const a=[];let s=!1;for(let i=1;i<=e.length-1;++i){const o=e[i];if(s&&"object"==typeof o&&!Array.isArray(o)){s=!1;let e=null;if(o["font-scale"]&&(e=t.parse(o["font-scale"],1,je),!e))return null;let i=null;if(o["text-font"]&&(i=t.parse(o["text-font"],1,it(He)),!i))return null;let r=null;if(o["text-color"]&&(r=t.parse(o["text-color"],1,We),!r))return null;const n=a[a.length-1];n.scale=e,n.font=i,n.textColor=r}else{const o=t.parse(e[i],1,Je);if(!o)return null;const r=o.type.kind;if("string"!==r&&"value"!==r&&"null"!==r&&"resolvedImage"!==r)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,a.push({content:o,scale:null,font:null,textColor:null})}}return new Ct(a)}evaluate(e){return new ft(this.sections.map(t=>{const i=t.content.evaluate(e);return mt(i)===tt?new gt("",i,null,null,null):new gt(yt(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const i={};t.scale&&(i["font-scale"]=t.scale.serialize()),t.font&&(i["text-font"]=t.font.serialize()),t.textColor&&(i["text-color"]=t.textColor.serialize()),e.push(i)}return e}}class qt{constructor(e){this.type=tt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const i=t.parse(e[1],1,He);return i?new qt(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=dt.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Ut={"to-boolean":Xe,"to-color":We,"to-number":je,"to-string":He};class wt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(("to-boolean"===i||"to-string"===i)&&2!==e.length)return t.error("Expected one argument.");const a=Ut[i],s=[];for(let i=1;i<e.length;i++){const a=t.parse(e[i],i,Je);if(!a)return null;s.push(a)}return new wt(a,s)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,i;for(const a of this.args){if(t=a.evaluate(e),i=null,t instanceof ut)return t;if("string"==typeof t){const i=e.parseColor(t);if(i)return i}else if(Array.isArray(t)&&(i=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:ht(t[0],t[1],t[2],t[3]),!i))return new ut(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new bt(i||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const i of this.args){if(t=i.evaluate(e),null===t)return 0;const a=Number(t);if(!isNaN(a))return a}throw new bt(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?ft.fromString(yt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?dt.fromString(yt(this.args[0].evaluate(e))):yt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Ct([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new qt(this.args[0]).serialize();const e=["to-"+this.type.kind];return this.eachChild(t=>{e.push(t.serialize())}),e}}const Et=["Unknown","Point","LineString","Polygon"];class Bt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Et[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=ut.parse(e)),t}}class Pt{constructor(e,t,i,a){this.name=e,this.type=t,this._evaluate=i,this.args=a}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const i=e[0],a=Pt.definitions[i];if(!a)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(a)?a[0]:a.type,o=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,r=o.filter(([t])=>!Array.isArray(t)||t.length===e.length-1);let n=null;for(const[a,o]of r){n=new Wt(t.registry,t.path,null,t.scope);const r=[];let l=!1;for(let t=1;t<e.length;t++){const i=e[t],s=Array.isArray(a)?a[t-1]:a.type,o=n.parse(i,1+r.length,s);if(!o){l=!0;break}r.push(o)}if(!l)if(Array.isArray(a)&&a.length!==r.length)n.error(`Expected ${a.length} arguments, but found ${r.length} instead.`);else{for(let e=0;e<r.length;e++){const t=Array.isArray(a)?a[e]:a.type,i=r[e];n.concat(e+1).checkSubtype(t,i.type)}if(0===n.errors.length)return new Pt(i,s,o,r)}}if(1===r.length)t.errors.push(...n.errors);else{const i=(r.length?r:o).map(([e])=>{return t=e,Array.isArray(t)?`(${t.map(at).join(", ")})`:`(${at(t.type)}...)`;var t}).join(" | "),a=[];for(let i=1;i<e.length;i++){const s=t.parse(e[i],1+a.length);if(!s)return null;a.push(at(s.type))}t.error(`Expected arguments of type ${i}, but found (${a.join(", ")}) instead.`)}return null}static register(e,t){Pt.definitions=t;for(const i in t)e[i]=Pt}}class Mt{constructor(e,t,i){this.type=Ye,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const i=e[1];if("object"!=typeof i||Array.isArray(i))return t.error("Collator options argument must be an object.");const a=t.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Xe);if(!a)return null;const s=t.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Xe);if(!s)return null;let o=null;return i.locale&&(o=t.parse(i.locale,1,He),!o)?null:new Mt(a,s,o)}evaluate(e){return new ct(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}function Tt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function At(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function St(e,t){const i=(180+e[0])/360,a=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,s=Math.pow(2,t.z);return[Math.round(i*s*8192),Math.round(a*s*8192)]}function It(e,t,i){const a=e[0]-t[0],s=e[1]-t[1],o=e[0]-i[0],r=e[1]-i[1];return a*r-o*s==0&&a*o<=0&&s*r<=0}function Dt(e,t){let i=!1;for(let r=0,n=t.length;r<n;r++){const n=t[r];for(let t=0,r=n.length;t<r-1;t++){if(It(e,n[t],n[t+1]))return!1;(s=n[t])[1]>(a=e)[1]!=(o=n[t+1])[1]>a[1]&&a[0]<(o[0]-s[0])*(a[1]-s[1])/(o[1]-s[1])+s[0]&&(i=!i)}}var a,s,o;return i}function zt(e,t){for(let i=0;i<t.length;i++)if(Dt(e,t[i]))return!0;return!1}function kt(e,t,i,a){const s=a[0]-i[0],o=a[1]-i[1],r=(e[0]-i[0])*o-s*(e[1]-i[1]),n=(t[0]-i[0])*o-s*(t[1]-i[1]);return r>0&&n<0||r<0&&n>0}function Ft(e,t,i){for(const u of i)for(let i=0;i<u.length-1;++i)if(0!=(n=[(r=u[i+1])[0]-(o=u[i])[0],r[1]-o[1]])[0]*(l=[(s=t)[0]-(a=e)[0],s[1]-a[1]])[1]-n[1]*l[0]&&kt(a,s,o,r)&&kt(o,r,a,s))return!0;var a,s,o,r,n,l;return!1}function Lt(e,t){for(let i=0;i<e.length;++i)if(!Dt(e[i],t))return!1;for(let i=0;i<e.length-1;++i)if(Ft(e[i],e[i+1],t))return!1;return!0}function Ot(e,t){for(let i=0;i<t.length;i++)if(Lt(e,t[i]))return!0;return!1}function Rt(e,t,i){const a=[];for(let s=0;s<e.length;s++){const o=[];for(let a=0;a<e[s].length;a++){const r=St(e[s][a],i);Tt(t,r),o.push(r)}a.push(o)}return a}function Nt(e,t,i){const a=[];for(let s=0;s<e.length;s++){const o=Rt(e[s],t,i);a.push(o)}return a}function $t(e,t,i,a){if(e[0]<i[0]||e[0]>i[2]){const t=.5*a;let s=e[0]-i[0]>t?-a:i[0]-e[0]>t?a:0;0===s&&(s=e[0]-i[2]>t?-a:i[2]-e[0]>t?a:0),e[0]+=s}Tt(t,e)}function Gt(e,t,i,a){const s=8192*Math.pow(2,a.z),o=[8192*a.x,8192*a.y],r=[];for(const a of e)for(const e of a){const a=[e.x+o[0],e.y+o[1]];$t(a,t,i,s),r.push(a)}return r}function Vt(e,t,i,a){const s=8192*Math.pow(2,a.z),o=[8192*a.x,8192*a.y],r=[];for(const i of e){const e=[];for(const a of i){const i=[a.x+o[0],a.y+o[1]];Tt(t,i),e.push(i)}r.push(e)}if(t[2]-t[0]<=s/2){(n=t)[0]=n[1]=1/0,n[2]=n[3]=-1/0;for(const e of r)for(const a of e)$t(a,t,i,s)}var n;return r}class Zt{constructor(e,t){this.type=Xe,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(pt(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const i=t.features[e].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new Zt(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new Zt(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new Zt(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const i=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],s=e.canonicalID();if("Polygon"===t.type){const o=Rt(t.coordinates,a,s),r=Gt(e.geometry(),i,a,s);if(!At(i,a))return!1;for(const e of r)if(!Dt(e,o))return!1}if("MultiPolygon"===t.type){const o=Nt(t.coordinates,a,s),r=Gt(e.geometry(),i,a,s);if(!At(i,a))return!1;for(const e of r)if(!zt(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const i=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],s=e.canonicalID();if("Polygon"===t.type){const o=Rt(t.coordinates,a,s),r=Vt(e.geometry(),i,a,s);if(!At(i,a))return!1;for(const e of r)if(!Lt(e,o))return!1}if("MultiPolygon"===t.type){const o=Nt(t.coordinates,a,s),r=Vt(e.geometry(),i,a,s);if(!At(i,a))return!1;for(const e of r)if(!Ot(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Qt(e){if(e instanceof Pt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Zt)return!1;let t=!0;return e.eachChild(e=>{t&&!Qt(e)&&(t=!1)}),t}function jt(e){if(e instanceof Pt&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild(e=>{t&&!jt(e)&&(t=!1)}),t}function Ht(e,t){if(e instanceof Pt&&t.indexOf(e.name)>=0)return!1;let i=!0;return e.eachChild(e=>{i&&!Ht(e,t)&&(i=!1)}),i}class Xt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new Xt(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Wt{constructor(e,t=[],i,a=new Ze,s=[]){this.registry=e,this.path=t,this.key=t.map(e=>`[${e}]`).join(""),this.scope=a,this.errors=s,this.expectedType=i}parse(e,t,i,a,s={}){return t?this.concat(t,i,a)._parse(e,s):this._parse(e,s)}_parse(e,t){function i(e,t,i){return"assert"===i?new xt(t,[e]):"coerce"===i?new wt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const a=e[0];if("string"!=typeof a)return this.error(`Expression name must be a string, but found ${typeof a} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[a];if(s){let a=s.parse(e,this);if(!a)return null;if(this.expectedType){const e=this.expectedType,s=a.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==s.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(e,s))return null}else a=i(a,e,t.typeAnnotation||"coerce");else a=i(a,e,t.typeAnnotation||"assert")}if(!(a instanceof _t)&&"resolvedImage"!==a.type.kind&&function e(t){if(t instanceof Xt)return e(t.boundExpression);if(t instanceof Pt&&"error"===t.name)return!1;if(t instanceof Mt)return!1;if(t instanceof Zt)return!1;const i=t instanceof wt||t instanceof xt;let a=!0;return t.eachChild(t=>{a=i?a&&e(t):a&&t instanceof _t}),!!a&&Qt(t)&&Ht(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}(a)){const t=new Bt;try{a=new _t(a.type,a.evaluate(t))}catch(e){return this.error(e.message),null}}return a}return this.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const a="number"==typeof e?this.path.concat(e):this.path,s=i?this.scope.concat(i):this.scope;return new Wt(this.registry,a,t||null,s,this.errors)}error(e,...t){const i=`${this.key}${t.map(e=>`[${e}]`).join("")}`;this.errors.push(new Ve(i,e))}checkSubtype(e,t){const i=ot(e,t);return i&&this.error(i),i}}function Kt(e,t){const i=e.length-1;let a,s,o=0,r=i,n=0;for(;o<=r;)if(n=Math.floor((o+r)/2),a=e[n],s=e[n+1],a<=t){if(n===i||t<s)return n;o=n+1}else{if(!(a>t))throw new bt("Input is not a number.");r=n-1}return 0}class Jt{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of i)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,je);if(!i)return null;const a=[];let s=null;t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let i=1;i<e.length;i+=2){const o=1===i?-1/0:e[i],r=e[i+1],n=i,l=i+1;if("number"!=typeof o)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(a.length&&a[a.length-1][0]>=o)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',n);const u=t.parse(r,l,s);if(!u)return null;s=s||u.type,a.push([o,u])}return new Jt(s,i,a)}evaluate(e){const t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);const a=this.input.evaluate(e);if(a<=t[0])return i[0].evaluate(e);const s=t.length;return a>=t[s-1]?i[s-1].evaluate(e):i[Kt(t,a)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}function Yt(e,t,i){return e*(1-i)+t*i}var ei=Object.freeze({__proto__:null,number:Yt,color:function(e,t,i){return new ut(Yt(e.r,t.r,i),Yt(e.g,t.g,i),Yt(e.b,t.b,i),Yt(e.a,t.a,i))},array:function(e,t,i){return e.map((e,a)=>Yt(e,t[a],i))}});const ti=6/29*3*(6/29),ii=Math.PI/180,ai=180/Math.PI;function si(e){return e>.008856451679035631?Math.pow(e,1/3):e/ti+4/29}function oi(e){return e>6/29?e*e*e:ti*(e-4/29)}function ri(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ni(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function li(e){const t=ni(e.r),i=ni(e.g),a=ni(e.b),s=si((.4124564*t+.3575761*i+.1804375*a)/.95047),o=si((.2126729*t+.7151522*i+.072175*a)/1);return{l:116*o-16,a:500*(s-o),b:200*(o-si((.0193339*t+.119192*i+.9503041*a)/1.08883)),alpha:e.a}}function ui(e){let t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,a=isNaN(e.b)?t:t-e.b/200;return t=1*oi(t),i=.95047*oi(i),a=1.08883*oi(a),new ut(ri(3.2404542*i-1.5371385*t-.4985314*a),ri(-.969266*i+1.8760108*t+.041556*a),ri(.0556434*i-.2040259*t+1.0572252*a),e.alpha)}function ci(e,t,i){const a=t-e;return e+i*(a>180||a<-180?a-360*Math.round(a/360):a)}const gi={forward:li,reverse:ui,interpolate:function(e,t,i){return{l:Yt(e.l,t.l,i),a:Yt(e.a,t.a,i),b:Yt(e.b,t.b,i),alpha:Yt(e.alpha,t.alpha,i)}}},fi={forward:function(e){const{l:t,a:i,b:a}=li(e),s=Math.atan2(a,i)*ai;return{h:s<0?s+360:s,c:Math.sqrt(i*i+a*a),l:t,alpha:e.a}},reverse:function(e){const t=e.h*ii,i=e.c;return ui({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:ci(e.h,t.h,i),c:Yt(e.c,t.c,i),l:Yt(e.l,t.l,i),alpha:Yt(e.alpha,t.alpha,i)}}};var di=Object.freeze({__proto__:null,lab:gi,hcl:fi});class hi{constructor(e,t,i,a,s){this.type=e,this.operator=t,this.interpolation=i,this.input=a,this.labels=[],this.outputs=[];for(const[e,t]of s)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,t,a,s){let o=0;if("exponential"===e.name)o=pi(t,e.base,a,s);else if("linear"===e.name)o=pi(t,1,a,s);else if("cubic-bezier"===e.name){const r=e.controlPoints;o=new i(r[0],r[1],r[2],r[3]).solve(pi(t,1,a,s))}return o}static parse(e,t){let[i,a,s,...o]=e;if(!Array.isArray(a)||0===a.length)return t.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){const e=a[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:e}}else{if("cubic-bezier"!==a[0])return t.error("Unknown interpolation type "+String(a[0]),1,0);{const e=a.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||e>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,je),!s)return null;const r=[];let n=null;"interpolate-hcl"===i||"interpolate-lab"===i?n=We:t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(let e=0;e<o.length;e+=2){const i=o[e],a=o[e+1],s=e+3,l=e+4;if("number"!=typeof i)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=i)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',s);const u=t.parse(a,l,n);if(!u)return null;n=n||u.type,r.push([i,u])}return"number"===n.kind||"color"===n.kind||"array"===n.kind&&"number"===n.itemType.kind&&"number"==typeof n.N?new hi(n,i,a,s,r):t.error(`Type ${at(n)} is not interpolatable.`)}evaluate(e){const t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);const a=this.input.evaluate(e);if(a<=t[0])return i[0].evaluate(e);const s=t.length;if(a>=t[s-1])return i[s-1].evaluate(e);const o=Kt(t,a),r=hi.interpolationFactor(this.interpolation,a,t[o],t[o+1]),n=i[o].evaluate(e),l=i[o+1].evaluate(e);return"interpolate"===this.operator?ei[this.type.kind.toLowerCase()](n,l,r):"interpolate-hcl"===this.operator?fi.reverse(fi.interpolate(fi.forward(n),fi.forward(l),r)):gi.reverse(gi.interpolate(gi.forward(n),gi.forward(l),r))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t}}function pi(e,t,i,a){const s=a-i,o=e-i;return 0===s?0:1===t?o/s:(Math.pow(t,o)-1)/(Math.pow(t,s)-1)}class mi{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let i=null;const a=t.expectedType;a&&"value"!==a.kind&&(i=a);const s=[];for(const a of e.slice(1)){const e=t.parse(a,1+s.length,i,void 0,{typeAnnotation:"omit"});if(!e)return null;i=i||e.type,s.push(e)}const o=a&&s.some(e=>ot(a,e.type));return new mi(o?Je:i,s)}evaluate(e){let t,i=null,a=0;for(const s of this.args)if(a++,i=s.evaluate(e),i&&i instanceof dt&&!i.available&&(t||(t=i.name),i=null,a===this.args.length&&(i=t)),null!==i)break;return i}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}class yi{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let a=1;a<e.length-1;a+=2){const s=e[a];if("string"!=typeof s)return t.error(`Expected string, but found ${typeof s} instead.`,a);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",a);const o=t.parse(e[a+1],a+1);if(!o)return null;i.push([s,o])}const a=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return a?new yi(i,a):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,i]of this.bindings)e.push(t,i.serialize());return e.push(this.result.serialize()),e}}class _i{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,je),a=t.parse(e[2],2,it(t.expectedType||Je));return i&&a?new _i(a.type.itemType,i,a):null}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new bt(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new bt(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new bt(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class bi{constructor(e,t){this.type=Xe,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Je),a=t.parse(e[2],2,Je);return i&&a?rt(i.type,[Xe,He,je,Qe,Je])?new bi(i,a):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${at(i.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!nt(t,["boolean","string","number","null"]))throw new bt(`Expected first argument to be of type boolean, string, number or null, but found ${at(mt(t))} instead.`);if(!nt(i,["string","array"]))throw new bt(`Expected second argument to be of type array or string, but found ${at(mt(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class vi{constructor(e,t,i){this.type=je,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Je),a=t.parse(e[2],2,Je);if(!i||!a)return null;if(!rt(i.type,[Xe,He,je,Qe,Je]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${at(i.type)} instead`);if(4===e.length){const s=t.parse(e[3],3,je);return s?new vi(i,a,s):null}return new vi(i,a)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!nt(t,["boolean","string","number","null"]))throw new bt(`Expected first argument to be of type boolean, string, number or null, but found ${at(mt(t))} instead.`);if(!nt(i,["string","array"]))throw new bt(`Expected second argument to be of type array or string, but found ${at(mt(i))} instead.`);if(this.fromIndex){const a=this.fromIndex.evaluate(e);return i.indexOf(t,a)}return i.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class xi{constructor(e,t,i,a,s,o){this.inputType=e,this.type=t,this.input=i,this.cases=a,this.outputs=s,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let i,a;t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType);const s={},o=[];for(let r=2;r<e.length-1;r+=2){let n=e[r];const l=e[r+1];Array.isArray(n)||(n=[n]);const u=t.concat(r);if(0===n.length)return u.error("Expected at least one branch label.");for(const e of n){if("number"!=typeof e&&"string"!=typeof e)return u.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return u.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return u.error("Numeric branch labels must be integer values.");if(i){if(u.checkSubtype(i,mt(e)))return null}else i=mt(e);if(void 0!==s[String(e)])return u.error("Branch labels must be unique.");s[String(e)]=o.length}const c=t.parse(l,r,a);if(!c)return null;a=a||c.type,o.push(c)}const r=t.parse(e[1],1,Je);if(!r)return null;const n=t.parse(e[e.length-1],e.length-1,a);return n?"value"!==r.type.kind&&t.concat(1).checkSubtype(i,r.type)?null:new xi(i,a,r,s,o,n):null}evaluate(e){const t=this.input.evaluate(e);return(mt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),i=[],a={};for(const e of t){const t=a[this.cases[e]];void 0===t?(a[this.cases[e]]=i.length,i.push([this.cases[e],[e]])):i[t][1].push(e)}const s=e=>"number"===this.inputType.kind?Number(e):e;for(const[t,a]of i)e.push(1===a.length?s(a[0]):a.map(s)),e.push(this.outputs[t].serialize());return e.push(this.otherwise.serialize()),e}}class Ci{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);const a=[];for(let s=1;s<e.length-1;s+=2){const o=t.parse(e[s],s,Xe);if(!o)return null;const r=t.parse(e[s+1],s+1,i);if(!r)return null;a.push([o,r]),i=i||r.type}const s=t.parse(e[e.length-1],e.length-1,i);return s?new Ci(i,a,s):null}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}class qi{constructor(e,t,i,a){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=a}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Je),a=t.parse(e[2],2,je);if(!i||!a)return null;if(!rt(i.type,[it(Je),He,Je]))return t.error(`Expected first argument to be of type array or string, but found ${at(i.type)} instead`);if(4===e.length){const s=t.parse(e[3],3,je);return s?new qi(i.type,i,a,s):null}return new qi(i.type,i,a)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!nt(t,["string","array"]))throw new bt(`Expected first argument to be of type array or string, but found ${at(mt(t))} instead.`);if(this.endIndex){const a=this.endIndex.evaluate(e);return t.slice(i,a)}return t.slice(i)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function Ui(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function wi(e,t,i,a){return 0===a.compare(t,i)}function Ei(e,t,i){const a="=="!==e&&"!="!==e;return class s{constructor(e,t,i){this.type=Xe,this.lhs=e,this.rhs=t,this.collator=i,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const i=e[0];let o=t.parse(e[1],1,Je);if(!o)return null;if(!Ui(i,o.type))return t.concat(1).error(`"${i}" comparisons are not supported for type '${at(o.type)}'.`);let r=t.parse(e[2],2,Je);if(!r)return null;if(!Ui(i,r.type))return t.concat(2).error(`"${i}" comparisons are not supported for type '${at(r.type)}'.`);if(o.type.kind!==r.type.kind&&"value"!==o.type.kind&&"value"!==r.type.kind)return t.error(`Cannot compare types '${at(o.type)}' and '${at(r.type)}'.`);a&&("value"===o.type.kind&&"value"!==r.type.kind?o=new xt(r.type,[o]):"value"!==o.type.kind&&"value"===r.type.kind&&(r=new xt(o.type,[r])));let n=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==r.type.kind&&"value"!==o.type.kind&&"value"!==r.type.kind)return t.error("Cannot use collator to compare non-string types.");if(n=t.parse(e[3],3,Ye),!n)return null}return new s(o,r,n)}evaluate(s){const o=this.lhs.evaluate(s),r=this.rhs.evaluate(s);if(a&&this.hasUntypedArgument){const t=mt(o),i=mt(r);if(t.kind!==i.kind||"string"!==t.kind&&"number"!==t.kind)throw new bt(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${i.kind}) instead.`)}if(this.collator&&!a&&this.hasUntypedArgument){const e=mt(o),i=mt(r);if("string"!==e.kind||"string"!==i.kind)return t(s,o,r)}return this.collator?i(s,o,r,this.collator.evaluate(s)):t(s,o,r)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild(e=>{t.push(e.serialize())}),t}}}const Bi=Ei("==",(function(e,t,i){return t===i}),wi),Pi=Ei("!=",(function(e,t,i){return t!==i}),(function(e,t,i,a){return!wi(0,t,i,a)})),Mi=Ei("<",(function(e,t,i){return t<i}),(function(e,t,i,a){return a.compare(t,i)<0})),Ti=Ei(">",(function(e,t,i){return t>i}),(function(e,t,i,a){return a.compare(t,i)>0})),Ai=Ei("<=",(function(e,t,i){return t<=i}),(function(e,t,i,a){return a.compare(t,i)<=0}));class Si{constructor(e,t,i,a,s){this.type=He,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=a,this.maxFractionDigits=s}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const i=t.parse(e[1],1,je);if(!i)return null;const a=e[2];if("object"!=typeof a||Array.isArray(a))return t.error("NumberFormat options argument must be an object.");let s=null;if(a.locale&&(s=t.parse(a.locale,1,He),!s))return null;let o=null;if(a.currency&&(o=t.parse(a.currency,1,He),!o))return null;let r=null;if(a["min-fraction-digits"]&&(r=t.parse(a["min-fraction-digits"],1,je),!r))return null;let n=null;return a["max-fraction-digits"]&&(n=t.parse(a["max-fraction-digits"],1,je),!n)?null:new Si(i,s,o,r,n)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Ii{constructor(e){this.type=je,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?t.error(`Expected argument of type string or array, but found ${at(i.type)} instead.`):new Ii(i):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new bt(`Expected value to be of type string or array, but found ${at(mt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}const Di={"==":Bi,"!=":Pi,">":Ti,"<":Mi,">=":Ei(">=",(function(e,t,i){return t>=i}),(function(e,t,i,a){return a.compare(t,i)>=0})),"<=":Ai,array:xt,at:_i,boolean:xt,case:Ci,coalesce:mi,collator:Mt,format:Ct,image:qt,in:bi,"index-of":vi,interpolate:hi,"interpolate-hcl":hi,"interpolate-lab":hi,length:Ii,let:yi,literal:_t,match:xi,number:xt,"number-format":Si,object:xt,slice:qi,step:Jt,string:xt,"to-boolean":wt,"to-color":wt,"to-number":wt,"to-string":wt,var:Xt,within:Zt};function zi(e,[t,i,a,s]){t=t.evaluate(e),i=i.evaluate(e),a=a.evaluate(e);const o=s?s.evaluate(e):1,r=ht(t,i,a,o);if(r)throw new bt(r);return new ut(t/255*o,i/255*o,a/255*o,o)}function ki(e,t){return e in t}function Fi(e,t){const i=t[e];return void 0===i?null:i}function Li(e){return{type:e}}function Oi(e){return{result:"success",value:e}}function Ri(e){return{result:"error",value:e}}function Ni(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function $i(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Gi(e){return!!e.expression&&e.expression.interpolated}function Vi(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Zi(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Qi(e){return e}function ji(e,t,i){return void 0!==e?e:void 0!==t?t:void 0!==i?i:void 0}function Hi(e,t,i,a,s){return ji(typeof i===s?a[i]:void 0,e.default,t.default)}function Xi(e,t,i){if("number"!==Vi(i))return ji(e.default,t.default);const a=e.stops.length;if(1===a)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[a-1][0])return e.stops[a-1][1];const s=Kt(e.stops.map(e=>e[0]),i);return e.stops[s][1]}function Wi(e,t,i){const a=void 0!==e.base?e.base:1;if("number"!==Vi(i))return ji(e.default,t.default);const s=e.stops.length;if(1===s)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[s-1][0])return e.stops[s-1][1];const o=Kt(e.stops.map(e=>e[0]),i),r=function(e,t,i,a){const s=a-i,o=e-i;return 0===s?0:1===t?o/s:(Math.pow(t,o)-1)/(Math.pow(t,s)-1)}(i,a,e.stops[o][0],e.stops[o+1][0]),n=e.stops[o][1],l=e.stops[o+1][1];let u=ei[t.type]||Qi;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=di[e.colorSpace];u=(e,i)=>t.reverse(t.interpolate(t.forward(e),t.forward(i),r))}return"function"==typeof n.evaluate?{evaluate(...e){const t=n.evaluate.apply(void 0,e),i=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==i)return u(t,i,r)}}:u(n,l,r)}function Ki(e,t,i){return"color"===t.type?i=ut.parse(i):"formatted"===t.type?i=ft.fromString(i.toString()):"resolvedImage"===t.type?i=dt.fromString(i.toString()):Vi(i)===t.type||"enum"===t.type&&t.values[i]||(i=void 0),ji(i,e.default,t.default)}Pt.register(Di,{error:[{kind:"error"},[He],(e,[t])=>{throw new bt(t.evaluate(e))}],typeof:[He,[Je],(e,[t])=>at(mt(t.evaluate(e)))],"to-rgba":[it(je,4),[We],(e,[t])=>t.evaluate(e).toArray()],rgb:[We,[je,je,je],zi],rgba:[We,[je,je,je,je],zi],has:{type:Xe,overloads:[[[He],(e,[t])=>ki(t.evaluate(e),e.properties())],[[He,Ke],(e,[t,i])=>ki(t.evaluate(e),i.evaluate(e))]]},get:{type:Je,overloads:[[[He],(e,[t])=>Fi(t.evaluate(e),e.properties())],[[He,Ke],(e,[t,i])=>Fi(t.evaluate(e),i.evaluate(e))]]},"feature-state":[Je,[He],(e,[t])=>Fi(t.evaluate(e),e.featureState||{})],properties:[Ke,[],e=>e.properties()],"geometry-type":[He,[],e=>e.geometryType()],id:[Je,[],e=>e.id()],zoom:[je,[],e=>e.globals.zoom],"heatmap-density":[je,[],e=>e.globals.heatmapDensity||0],"line-progress":[je,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[je,[],e=>e.globals.skyRadialProgress||0],accumulated:[Je,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[je,Li(je),(e,t)=>{let i=0;for(const a of t)i+=a.evaluate(e);return i}],"*":[je,Li(je),(e,t)=>{let i=1;for(const a of t)i*=a.evaluate(e);return i}],"-":{type:je,overloads:[[[je,je],(e,[t,i])=>t.evaluate(e)-i.evaluate(e)],[[je],(e,[t])=>-t.evaluate(e)]]},"/":[je,[je,je],(e,[t,i])=>t.evaluate(e)/i.evaluate(e)],"%":[je,[je,je],(e,[t,i])=>t.evaluate(e)%i.evaluate(e)],ln2:[je,[],()=>Math.LN2],pi:[je,[],()=>Math.PI],e:[je,[],()=>Math.E],"^":[je,[je,je],(e,[t,i])=>Math.pow(t.evaluate(e),i.evaluate(e))],sqrt:[je,[je],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[je,[je],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[je,[je],(e,[t])=>Math.log(t.evaluate(e))],log2:[je,[je],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[je,[je],(e,[t])=>Math.sin(t.evaluate(e))],cos:[je,[je],(e,[t])=>Math.cos(t.evaluate(e))],tan:[je,[je],(e,[t])=>Math.tan(t.evaluate(e))],asin:[je,[je],(e,[t])=>Math.asin(t.evaluate(e))],acos:[je,[je],(e,[t])=>Math.acos(t.evaluate(e))],atan:[je,[je],(e,[t])=>Math.atan(t.evaluate(e))],min:[je,Li(je),(e,t)=>Math.min(...t.map(t=>t.evaluate(e)))],max:[je,Li(je),(e,t)=>Math.max(...t.map(t=>t.evaluate(e)))],abs:[je,[je],(e,[t])=>Math.abs(t.evaluate(e))],round:[je,[je],(e,[t])=>{const i=t.evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[je,[je],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[je,[je],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Xe,[He,Je],(e,[t,i])=>e.properties()[t.value]===i.value],"filter-id-==":[Xe,[Je],(e,[t])=>e.id()===t.value],"filter-type-==":[Xe,[He],(e,[t])=>e.geometryType()===t.value],"filter-<":[Xe,[He,Je],(e,[t,i])=>{const a=e.properties()[t.value],s=i.value;return typeof a==typeof s&&a<s}],"filter-id-<":[Xe,[Je],(e,[t])=>{const i=e.id(),a=t.value;return typeof i==typeof a&&i<a}],"filter->":[Xe,[He,Je],(e,[t,i])=>{const a=e.properties()[t.value],s=i.value;return typeof a==typeof s&&a>s}],"filter-id->":[Xe,[Je],(e,[t])=>{const i=e.id(),a=t.value;return typeof i==typeof a&&i>a}],"filter-<=":[Xe,[He,Je],(e,[t,i])=>{const a=e.properties()[t.value],s=i.value;return typeof a==typeof s&&a<=s}],"filter-id-<=":[Xe,[Je],(e,[t])=>{const i=e.id(),a=t.value;return typeof i==typeof a&&i<=a}],"filter->=":[Xe,[He,Je],(e,[t,i])=>{const a=e.properties()[t.value],s=i.value;return typeof a==typeof s&&a>=s}],"filter-id->=":[Xe,[Je],(e,[t])=>{const i=e.id(),a=t.value;return typeof i==typeof a&&i>=a}],"filter-has":[Xe,[Je],(e,[t])=>t.value in e.properties()],"filter-has-id":[Xe,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[Xe,[it(He)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Xe,[it(Je)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Xe,[He,it(Je)],(e,[t,i])=>i.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Xe,[He,it(Je)],(e,[t,i])=>function(e,t,i,a){for(;i<=a;){const s=i+a>>1;if(t[s]===e)return!0;t[s]>e?a=s-1:i=s+1}return!1}(e.properties()[t.value],i.value,0,i.value.length-1)],all:{type:Xe,overloads:[[[Xe,Xe],(e,[t,i])=>t.evaluate(e)&&i.evaluate(e)],[Li(Xe),(e,t)=>{for(const i of t)if(!i.evaluate(e))return!1;return!0}]]},any:{type:Xe,overloads:[[[Xe,Xe],(e,[t,i])=>t.evaluate(e)||i.evaluate(e)],[Li(Xe),(e,t)=>{for(const i of t)if(i.evaluate(e))return!0;return!1}]]},"!":[Xe,[Xe],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Xe,[He],(e,[t])=>{const i=e.globals&&e.globals.isSupportedScript;return!i||i(t.evaluate(e))}],upcase:[He,[He],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[He,[He],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[He,Li(Je),(e,t)=>t.map(t=>yt(t.evaluate(e))).join("")],"resolved-locale":[He,[Ye],(e,[t])=>t.evaluate(e).resolvedLocale()]});class Ji{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Bt,this._defaultValue=t?function(e){return"color"===e.type&&Zi(e.default)?new ut(0,0,0,0):"color"===e.type?ut.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,i,a,s,o){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=a,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,a,s,o){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=a,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new bt(`Expected value to be one of ${Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function Yi(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Di}function ea(e,t){const i=new Wt(Di,[],t?function(e){const t={color:We,string:He,number:je,enum:He,boolean:Xe,formatted:et,resolvedImage:tt};return"array"===e.type?it(t[e.value]||Je,e.length):t[e.type]}(t):void 0),a=i.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return a?Oi(new Ji(a,t)):Ri(i.errors)}class ta{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!jt(t.expression)}evaluateWithoutErrorHandling(e,t,i,a,s,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,a,s,o)}evaluate(e,t,i,a,s,o){return this._styleExpression.evaluate(e,t,i,a,s,o)}}class ia{constructor(e,t,i,a){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent="camera"!==e&&!jt(t.expression),this.interpolationType=a}evaluateWithoutErrorHandling(e,t,i,a,s,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,a,s,o)}evaluate(e,t,i,a,s,o){return this._styleExpression.evaluate(e,t,i,a,s,o)}interpolationFactor(e,t,i){return this.interpolationType?hi.interpolationFactor(this.interpolationType,e,t,i):0}}function aa(e,t){if("error"===(e=ea(e,t)).result)return e;const i=e.value.expression,a=Qt(i);if(!a&&!Ni(t))return Ri([new Ve("","data expressions not supported")]);const s=Ht(i,["zoom"]);if(!s&&!$i(t))return Ri([new Ve("","zoom expressions not supported")]);const o=function e(t){let i=null;if(t instanceof yi)i=e(t.result);else if(t instanceof mi){for(const a of t.args)if(i=e(a),i)break}else(t instanceof Jt||t instanceof hi)&&t.input instanceof Pt&&"zoom"===t.input.name&&(i=t);return i instanceof Ve||t.eachChild(t=>{const a=e(t);a instanceof Ve?i=a:!i&&a?i=new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&a&&i!==a&&(i=new Ve("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}(i);return o||s?o instanceof Ve?Ri([o]):o instanceof hi&&!Gi(t)?Ri([new Ve("",'"interpolate" expressions cannot be used with this property')]):Oi(o?new ia(a?"camera":"composite",e.value,o.labels,o instanceof hi?o.interpolation:void 0):new ta(a?"constant":"source",e.value)):Ri([new Ve("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class sa{constructor(e,t){this._parameters=e,this._specification=t,Ne(this,function e(t,i){const a="color"===i.type,s=t.stops&&"object"==typeof t.stops[0][0],o=s||!(s||void 0!==t.property),r=t.type||(Gi(i)?"exponential":"interval");if(a&&((t=Ne({},t)).stops&&(t.stops=t.stops.map(e=>[e[0],ut.parse(e[1])])),t.default=ut.parse(t.default?t.default:i.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!di[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);let n,l,u;if("exponential"===r)n=Wi;else if("interval"===r)n=Xi;else if("categorical"===r){n=Hi,l=Object.create(null);for(const e of t.stops)l[e[0]]=e[1];u=typeof t.stops[0][0]}else{if("identity"!==r)throw new Error(`Unknown function type "${r}"`);n=Ki}if(s){const a={},s=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],o=i[0].zoom;void 0===a[o]&&(a[o]={zoom:o,type:t.type,property:t.property,default:t.default,stops:[]},s.push(o)),a[o].stops.push([i[0].value,i[1]])}const o=[];for(const t of s)o.push([a[t].zoom,e(a[t],i)]);const r={name:"linear"};return{kind:"composite",interpolationType:r,interpolationFactor:hi.interpolationFactor.bind(void 0,r),zoomStops:o.map(e=>e[0]),evaluate:({zoom:e},a)=>Wi({stops:o,base:t.base},i,e).evaluate(e,a)}}if(o){const e="exponential"===r?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:e,interpolationFactor:hi.interpolationFactor.bind(void 0,e),zoomStops:t.stops.map(e=>e[0]),evaluate:({zoom:e})=>n(t,i,e,l,u)}}return{kind:"source",evaluate(e,a){const s=a&&a.properties?a.properties[t.property]:void 0;return void 0===s?ji(t.default,i.default):n(t,i,s,l,u)}}}(this._parameters,this._specification))}static deserialize(e){return new sa(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function oa(e){const t=e.key,i=e.value,a=e.valueSpec||{},s=e.objectElementValidators||{},o=e.style,r=e.styleSpec;let n=[];const l=Vi(i);if("object"!==l)return[new Oe(t,i,`object expected, ${l} found`)];for(const e in i){const l=e.split(".")[0],u=a[l]||a["*"];let c;if(s[l])c=s[l];else if(a[l])c=Aa;else if(s["*"])c=s["*"];else{if(!a["*"]){n.push(new Oe(t,i[e],`unknown property "${e}"`));continue}c=Aa}n=n.concat(c({key:(t?t+".":t)+e,value:i[e],valueSpec:u,style:o,styleSpec:r,object:i,objectKey:e},i))}for(const e in a)s[e]||a[e].required&&void 0===a[e].default&&void 0===i[e]&&n.push(new Oe(t,i,`missing required property "${e}"`));return n}function ra(e){const t=e.value,i=e.valueSpec,a=e.style,s=e.styleSpec,o=e.key,r=e.arrayElementValidator||Aa;if("array"!==Vi(t))return[new Oe(o,t,`array expected, ${Vi(t)} found`)];if(i.length&&t.length!==i.length)return[new Oe(o,t,`array length ${i.length} expected, length ${t.length} found`)];if(i["min-length"]&&t.length<i["min-length"])return[new Oe(o,t,`array length at least ${i["min-length"]} expected, length ${t.length} found`)];let n={type:i.value,values:i.values};s.$version<7&&(n.function=i.function),"object"===Vi(i.value)&&(n=i.value);let l=[];for(let e=0;e<t.length;e++)l=l.concat(r({array:t,arrayIndex:e,value:t[e],valueSpec:n,style:a,styleSpec:s,key:`${o}[${e}]`}));return l}function na(e){const t=e.key,i=e.value,a=e.valueSpec;let s=Vi(i);return"number"===s&&i!=i&&(s="NaN"),"number"!==s?[new Oe(t,i,`number expected, ${s} found`)]:"minimum"in a&&i<a.minimum?[new Oe(t,i,`${i} is less than the minimum value ${a.minimum}`)]:"maximum"in a&&i>a.maximum?[new Oe(t,i,`${i} is greater than the maximum value ${a.maximum}`)]:[]}function la(e){const t=e.valueSpec,i=$e(e.value.type);let a,s,o,r={};const n="categorical"!==i&&void 0===e.value.property,l=!n,u="array"===Vi(e.value.stops)&&"array"===Vi(e.value.stops[0])&&"object"===Vi(e.value.stops[0][0]),c=oa({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===i)return[new Oe(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const a=e.value;return t=t.concat(ra({key:e.key,value:a,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:g})),"array"===Vi(a)&&0===a.length&&t.push(new Oe(e.key,a,"array must have at least one stop")),t},default:function(e){return Aa({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===i&&n&&c.push(new Oe(e.key,e.value,'missing required property "property"')),"identity"===i||e.value.stops||c.push(new Oe(e.key,e.value,'missing required property "stops"')),"exponential"===i&&e.valueSpec.expression&&!Gi(e.valueSpec)&&c.push(new Oe(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Ni(e.valueSpec)?c.push(new Oe(e.key,e.value,"property functions not supported")):n&&!$i(e.valueSpec)&&c.push(new Oe(e.key,e.value,"zoom functions not supported"))),"categorical"!==i&&!u||void 0!==e.value.property||c.push(new Oe(e.key,e.value,'"property" property is required')),c;function g(e){let i=[];const a=e.value,n=e.key;if("array"!==Vi(a))return[new Oe(n,a,`array expected, ${Vi(a)} found`)];if(2!==a.length)return[new Oe(n,a,`array length 2 expected, length ${a.length} found`)];if(u){if("object"!==Vi(a[0]))return[new Oe(n,a,`object expected, ${Vi(a[0])} found`)];if(void 0===a[0].zoom)return[new Oe(n,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new Oe(n,a,"object stop key must have value")];if(o&&o>$e(a[0].zoom))return[new Oe(n,a[0].zoom,"stop zoom values must appear in ascending order")];$e(a[0].zoom)!==o&&(o=$e(a[0].zoom),s=void 0,r={}),i=i.concat(oa({key:n+"[0]",value:a[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:na,value:f}}))}else i=i.concat(f({key:n+"[0]",value:a[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},a));return Yi(Ge(a[1]))?i.concat([new Oe(n+"[1]",a[1],"expressions are not allowed in function stops.")]):i.concat(Aa({key:n+"[1]",value:a[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function f(e,o){const n=Vi(e.value),l=$e(e.value),u=null!==e.value?e.value:o;if(a){if(n!==a)return[new Oe(e.key,u,`${n} stop domain type must match previous stop domain type ${a}`)]}else a=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new Oe(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==i){let a=`number expected, ${n} found`;return Ni(t)&&void 0===i&&(a+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Oe(e.key,u,a)]}return"categorical"!==i||"number"!==n||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===n&&void 0!==s&&l<s?[new Oe(e.key,u,"stop domain values must appear in ascending order")]:(s=l,"categorical"===i&&l in r?[new Oe(e.key,u,"stop domain values must be unique")]:(r[l]=!0,[])):[new Oe(e.key,u,"integer expected, found "+l)]}}function ua(e){const t=("property"===e.expressionContext?aa:ea)(Ge(e.value),e.valueSpec);if("error"===t.result)return t.value.map(t=>new Oe(`${e.key}${t.key}`,e.value,t.message));const i=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!i.outputDefined())return[new Oe(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!jt(i))return[new Oe(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!jt(i))return[new Oe(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Ht(i,["zoom","feature-state"]))return[new Oe(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Qt(i))return[new Oe(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ca(e){const t=e.key,i=e.value,a=e.valueSpec,s=[];return Array.isArray(a.values)?-1===a.values.indexOf($e(i))&&s.push(new Oe(t,i,`expected one of [${a.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(a.values).indexOf($e(i))&&s.push(new Oe(t,i,`expected one of [${Object.keys(a.values).join(", ")}], ${JSON.stringify(i)} found`)),s}function ga(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!ga(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const fa={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function da(e){if(null==e)return{filter:()=>!0,needGeometry:!1};ga(e)||(e=pa(e));const t=ea(e,fa);if("error"===t.result)throw new Error(t.value.map(e=>`${e.key}: ${e.message}`).join(", "));return{filter:(e,i,a)=>t.value.evaluate(e,i,{},a),needGeometry:function e(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let i=1;i<t.length;i++)if(e(t[i]))return!0;return!1}(e)}}function ha(e,t){return e<t?-1:e>t?1:0}function pa(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?ma(e[1],e[2],"=="):"!="===t?ba(ma(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?ma(e[1],e[2],t):"any"===t?(i=e.slice(1),["any"].concat(i.map(pa))):"all"===t?["all"].concat(e.slice(1).map(pa)):"none"===t?["all"].concat(e.slice(1).map(pa).map(ba)):"in"===t?ya(e[1],e.slice(2)):"!in"===t?ba(ya(e[1],e.slice(2))):"has"===t?_a(e[1]):"!has"===t?ba(_a(e[1])):"within"!==t||e;var i}function ma(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function ya(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",e,["literal",t.sort(ha)]]:["filter-in-small",e,["literal",t]]}}function _a(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function ba(e){return["!",e]}function va(e){return ga(Ge(e.value))?ua(Ne({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){const i=t.value,a=t.key;if("array"!==Vi(i))return[new Oe(a,i,`array expected, ${Vi(i)} found`)];const s=t.styleSpec;let o,r=[];if(i.length<1)return[new Oe(a,i,"filter array must have at least 1 element")];switch(r=r.concat(ca({key:a+"[0]",value:i[0],valueSpec:s.filter_operator,style:t.style,styleSpec:t.styleSpec})),$e(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===$e(i[1])&&r.push(new Oe(a,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":3!==i.length&&r.push(new Oe(a,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(o=Vi(i[1]),"string"!==o&&r.push(new Oe(a+"[1]",i[1],`string expected, ${o} found`)));for(let e=2;e<i.length;e++)o=Vi(i[e]),"$type"===$e(i[1])?r=r.concat(ca({key:`${a}[${e}]`,value:i[e],valueSpec:s.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&r.push(new Oe(`${a}[${e}]`,i[e],`string, number, or boolean expected, ${o} found`));break;case"any":case"all":case"none":for(let s=1;s<i.length;s++)r=r.concat(e({key:`${a}[${s}]`,value:i[s],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":o=Vi(i[1]),2!==i.length?r.push(new Oe(a,i,`filter array for "${i[0]}" operator must have 2 elements`)):"string"!==o&&r.push(new Oe(a+"[1]",i[1],`string expected, ${o} found`));break;case"within":o=Vi(i[1]),2!==i.length?r.push(new Oe(a,i,`filter array for "${i[0]}" operator must have 2 elements`)):"object"!==o&&r.push(new Oe(a+"[1]",i[1],`object expected, ${o} found`))}return r}(e)}function xa(e,t){const i=e.key,a=e.style,s=e.styleSpec,o=e.value,r=e.objectKey,n=s[`${t}_${e.layerType}`];if(!n)return[];const l=r.match(/^(.*)-transition$/);if("paint"===t&&l&&n[l[1]]&&n[l[1]].transition)return Aa({key:i,value:o,valueSpec:s.transition,style:a,styleSpec:s});const u=e.valueSpec||n[r];if(!u)return[new Oe(i,o,`unknown property "${r}"`)];let c;if("string"===Vi(o)&&Ni(u)&&!u.tokens&&(c=/^{([^}]+)}$/.exec(o)))return[new Oe(i,o,`"${r}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(c[1])} }\`.`)];const g=[];return"symbol"===e.layerType&&("text-field"===r&&a&&!a.glyphs&&g.push(new Oe(i,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===r&&Zi(Ge(o))&&"identity"===$e(o.type)&&g.push(new Oe(i,o,'"text-font" does not support identity functions'))),g.concat(Aa({key:e.key,value:o,valueSpec:u,style:a,styleSpec:s,expressionContext:"property",propertyType:t,propertyKey:r}))}function Ca(e){return xa(e,"paint")}function qa(e){return xa(e,"layout")}function Ua(e){let t=[];const i=e.value,a=e.key,s=e.style,o=e.styleSpec;i.type||i.ref||t.push(new Oe(a,i,'either "type" or "ref" is required'));let r=$e(i.type);const n=$e(i.ref);if(i.id){const o=$e(i.id);for(let r=0;r<e.arrayIndex;r++){const e=s.layers[r];$e(e.id)===o&&t.push(new Oe(a,i.id,`duplicate layer id "${i.id}", previously used at line ${e.id.__line__}`))}}if("ref"in i){let e;["type","source","source-layer","filter","layout"].forEach(e=>{e in i&&t.push(new Oe(a,i[e],`"${e}" is prohibited for ref layers`))}),s.layers.forEach(t=>{$e(t.id)===n&&(e=t)}),e?e.ref?t.push(new Oe(a,i.ref,"ref cannot reference another ref layer")):r=$e(e.type):t.push(new Oe(a,i.ref,`ref layer "${n}" not found`))}else if("background"!==r&&"sky"!==r)if(i.source){const e=s.sources&&s.sources[i.source],o=e&&$e(e.type);e?"vector"===o&&"raster"===r?t.push(new Oe(a,i.source,`layer "${i.id}" requires a raster source`)):"raster"===o&&"raster"!==r?t.push(new Oe(a,i.source,`layer "${i.id}" requires a vector source`)):"vector"!==o||i["source-layer"]?"raster-dem"===o&&"hillshade"!==r?t.push(new Oe(a,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==r||!i.paint||!i.paint["line-gradient"]||"geojson"===o&&e.lineMetrics||t.push(new Oe(a,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Oe(a,i,`layer "${i.id}" must specify a "source-layer"`)):t.push(new Oe(a,i.source,`source "${i.source}" not found`))}else t.push(new Oe(a,i,'missing required property "source"'));return t=t.concat(oa({key:a,value:i,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Aa({key:a+".type",value:i.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"}),filter:va,layout:e=>oa({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>qa(Ne({layerType:r},e))}}),paint:e=>oa({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Ca(Ne({layerType:r},e))}})}})),t}function wa(e){const t=e.value,i=e.key,a=Vi(t);return"string"!==a?[new Oe(i,t,`string expected, ${a} found`)]:[]}const Ea={promoteId:function({key:e,value:t}){if("string"===Vi(t))return wa({key:e,value:t});{const i=[];for(const a in t)i.push(...wa({key:`${e}.${a}`,value:t[a]}));return i}}};function Ba(e){const t=e.value,i=e.key,a=e.styleSpec,s=e.style;if(!t.type)return[new Oe(i,t,'"type" is required')];const o=$e(t.type);let r;switch(o){case"vector":case"raster":case"raster-dem":return r=oa({key:i,value:t,valueSpec:a["source_"+o.replace("-","_")],style:e.style,styleSpec:a,objectElementValidators:Ea}),r;case"geojson":if(r=oa({key:i,value:t,valueSpec:a.source_geojson,style:s,styleSpec:a,objectElementValidators:Ea}),t.cluster)for(const e in t.clusterProperties){const[a,s]=t.clusterProperties[e],o="string"==typeof a?[a,["accumulated"],["get",e]]:a;r.push(...ua({key:`${i}.${e}.map`,value:s,expressionContext:"cluster-map"})),r.push(...ua({key:`${i}.${e}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return r;case"video":return oa({key:i,value:t,valueSpec:a.source_video,style:s,styleSpec:a});case"image":return oa({key:i,value:t,valueSpec:a.source_image,style:s,styleSpec:a});case"canvas":return[new Oe(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ca({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:s,styleSpec:a})}}function Pa(e){const t=e.value,i=e.styleSpec,a=i.light,s=e.style;let o=[];const r=Vi(t);if(void 0===t)return o;if("object"!==r)return o=o.concat([new Oe("light",t,`object expected, ${r} found`)]),o;for(const e in t){const r=e.match(/^(.*)-transition$/);o=o.concat(r&&a[r[1]]&&a[r[1]].transition?Aa({key:e,value:t[e],valueSpec:i.transition,style:s,styleSpec:i}):a[e]?Aa({key:e,value:t[e],valueSpec:a[e],style:s,styleSpec:i}):[new Oe(e,t[e],`unknown property "${e}"`)])}return o}function Ma(e){const t=e.value,i=e.key,a=e.style,s=e.styleSpec,o=s.terrain;let r=[];const n=Vi(t);if(void 0===t)return r;if("object"!==n)return r=r.concat([new Oe("terrain",t,`object expected, ${n} found`)]),r;for(const e in t){const i=e.match(/^(.*)-transition$/);r=r.concat(i&&o[i[1]]&&o[i[1]].transition?Aa({key:e,value:t[e],valueSpec:s.transition,style:a,styleSpec:s}):o[e]?Aa({key:e,value:t[e],valueSpec:o[e],style:a,styleSpec:s}):[new Oe(e,t[e],`unknown property "${e}"`)])}if(t.source){const e=a.sources&&a.sources[t.source],s=e&&$e(e.type);e?"raster-dem"!==s&&r.push(new Oe(i,t.source,`terrain cannot be used with a source of type ${s}, it only be used with a "raster-dem" source type`)):r.push(new Oe(i,t.source,`source "${t.source}" not found`))}else r.push(new Oe(i,t,'terrain is missing required property "source"'));return r}const Ta={"*":()=>[],array:ra,boolean:function(e){const t=e.value,i=e.key,a=Vi(t);return"boolean"!==a?[new Oe(i,t,`boolean expected, ${a} found`)]:[]},number:na,color:function(e){const t=e.key,i=e.value,a=Vi(i);return"string"!==a?[new Oe(t,i,`color expected, ${a} found`)]:null===lt(i)?[new Oe(t,i,`color expected, "${i}" found`)]:[]},constants:Re,enum:ca,filter:va,function:la,layer:Ua,object:oa,source:Ba,light:Pa,terrain:Ma,string:wa,formatted:function(e){return 0===wa(e).length?[]:ua(e)},resolvedImage:function(e){return 0===wa(e).length?[]:ua(e)}};function Aa(e){const t=e.value,i=e.valueSpec,a=e.styleSpec;return i.expression&&Zi($e(t))?la(e):i.expression&&Yi(Ge(t))?ua(e):i.type&&Ta[i.type]?Ta[i.type](e):oa(Ne({},e,{valueSpec:i.type?a[i.type]:i}))}function Sa(e){const t=e.value,i=e.key,a=wa(e);return a.length||(-1===t.indexOf("{fontstack}")&&a.push(new Oe(i,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&a.push(new Oe(i,t,'"glyphs" url must include a "{range}" token'))),a}function Ia(e,t=Le){let i=[];return i=i.concat(Aa({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Sa,"*":()=>[]}})),e.constants&&(i=i.concat(Re({key:"constants",value:e.constants,style:e,styleSpec:t}))),Da(i)}function Da(e){return[].concat(e).sort((e,t)=>e.line-t.line)}function za(e){return function(...t){return Da(e.apply(this,t))}}Ia.source=za(Ba),Ia.light=za(Pa),Ia.terrain=za(Ma),Ia.layer=za(Ua),Ia.filter=za(va),Ia.paintProperty=za(Ca),Ia.layoutProperty=za(qa);const ka=Ia,Fa=ka.light,La=ka.paintProperty,Oa=ka.layoutProperty;function Ra(e,t){let i=!1;if(t&&t.length)for(const a of t)e.fire(new ke(new Error(a.message))),i=!0;return i}var Na=$a;function $a(e,t,i){var a=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var s=new Int32Array(this.arrayBuffer);e=s[0],this.d=(t=s[1])+2*(i=s[2]);for(var o=0;o<this.d*this.d;o++){var r=s[3+o],n=s[3+o+1];a.push(r===n?null:s.subarray(r,n))}var l=s[3+a.length+1];this.keys=s.subarray(s[3+a.length],l),this.bboxes=s.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var u=0;u<this.d*this.d;u++)a.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var c=i/t*e;this.min=-c,this.max=e+c}$a.prototype.insert=function(e,t,i,a,s){this._forEachCell(t,i,a,s,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(s)},$a.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},$a.prototype._insertCell=function(e,t,i,a,s,o){this.cells[s].push(o)},$a.prototype.query=function(e,t,i,a,s){var o=this.min,r=this.max;if(e<=o&&t<=o&&r<=i&&r<=a&&!s)return Array.prototype.slice.call(this.keys);var n=[];return this._forEachCell(e,t,i,a,this._queryCell,n,{},s),n},$a.prototype._queryCell=function(e,t,i,a,s,o,r,n){var l=this.cells[s];if(null!==l)for(var u=this.keys,c=this.bboxes,g=0;g<l.length;g++){var f=l[g];if(void 0===r[f]){var d=4*f;(n?n(c[d+0],c[d+1],c[d+2],c[d+3]):e<=c[d+2]&&t<=c[d+3]&&i>=c[d+0]&&a>=c[d+1])?(r[f]=!0,o.push(u[f])):r[f]=!1}}},$a.prototype._forEachCell=function(e,t,i,a,s,o,r,n){for(var l=this._convertToCellCoord(e),u=this._convertToCellCoord(t),c=this._convertToCellCoord(i),g=this._convertToCellCoord(a),f=l;f<=c;f++)for(var d=u;d<=g;d++){var h=this.d*d+f;if((!n||n(this._convertFromCellCoord(f),this._convertFromCellCoord(d),this._convertFromCellCoord(f+1),this._convertFromCellCoord(d+1)))&&s.call(this,e,t,i,a,h,o,r,n))return}},$a.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},$a.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},$a.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,a=0;a<this.cells.length;a++)i+=this.cells[a].length;var s=new Int32Array(t+i+this.keys.length+this.bboxes.length);s[0]=this.extent,s[1]=this.n,s[2]=this.padding;for(var o=t,r=0;r<e.length;r++){var n=e[r];s[3+r]=o,s.set(n,o),o+=n.length}return s[3+e.length]=o,s.set(this.keys,o),s[3+e.length+1]=o+=this.keys.length,s.set(this.bboxes,o),o+=this.bboxes.length,s.buffer};const{ImageData:Ga,ImageBitmap:Va}=r,Za={};function Qa(e,t,i={}){Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Za[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}Qa("Object",Object),Na.serialize=function(e,t){const i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},Na.deserialize=function(e){return new Na(e.buffer)},Qa("Grid",Na),Qa("Color",ut),Qa("Error",Error),Qa("ResolvedImage",dt),Qa("StylePropertyFunction",sa),Qa("StyleExpression",Ji,{omit:["_evaluator"]}),Qa("ZoomDependentExpression",ia),Qa("ZoomConstantExpression",ta),Qa("CompoundExpression",Pt,{omit:["_evaluate"]});for(const e in Di)Di[e]._classRegistryKey||Qa("Expression_"+e,Di[e]);function ja(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Ha(e){return Va&&e instanceof Va}function Xa(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(ja(e)||Ha(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){const i=e;return t&&t.push(i.buffer),i}if(e instanceof Ga)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const i=[];for(const a of e)i.push(Xa(a,t));return i}if("object"==typeof e){const i=e.constructor,a=i._classRegistryKey;if(!a)throw new Error("can't serialize object of unregistered class");const s=i.serialize?i.serialize(e,t):{};if(!i.serialize){for(const i in e){if(!e.hasOwnProperty(i))continue;if(Za[a].omit.indexOf(i)>=0)continue;const o=e[i];s[i]=Za[a].shallow.indexOf(i)>=0?o:Xa(o,t)}e instanceof Error&&(s.message=e.message)}if(s.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==a&&(s.$name=a),s}throw new Error("can't serialize object of type "+typeof e)}function Wa(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||ja(e)||Ha(e)||ArrayBuffer.isView(e)||e instanceof Ga)return e;if(Array.isArray(e))return e.map(Wa);if("object"==typeof e){const t=e.$name||"Object",{klass:i}=Za[t];if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);const a=Object.create(i.prototype);for(const i of Object.keys(e)){if("$name"===i)continue;const s=e[i];a[i]=Za[t].shallow.indexOf(i)>=0?s:Wa(s)}return a}throw new Error("can't deserialize object of type "+typeof e)}class Ka{constructor(){this.first=!0}update(e,t){const i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))}}const Ja={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function Ya(e){for(const t of e)if(is(t.charCodeAt(0)))return!0;return!1}function es(e){for(const t of e)if(!ts(t.charCodeAt(0)))return!1;return!0}function ts(e){return!(Ja.Arabic(e)||Ja["Arabic Supplement"](e)||Ja["Arabic Extended-A"](e)||Ja["Arabic Presentation Forms-A"](e)||Ja["Arabic Presentation Forms-B"](e))}function is(e){return!(746!==e&&747!==e&&(e<4352||!(Ja["Bopomofo Extended"](e)||Ja.Bopomofo(e)||Ja["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Ja["CJK Compatibility Ideographs"](e)||Ja["CJK Compatibility"](e)||Ja["CJK Radicals Supplement"](e)||Ja["CJK Strokes"](e)||!(!Ja["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Ja["CJK Unified Ideographs Extension A"](e)||Ja["CJK Unified Ideographs"](e)||Ja["Enclosed CJK Letters and Months"](e)||Ja["Hangul Compatibility Jamo"](e)||Ja["Hangul Jamo Extended-A"](e)||Ja["Hangul Jamo Extended-B"](e)||Ja["Hangul Jamo"](e)||Ja["Hangul Syllables"](e)||Ja.Hiragana(e)||Ja["Ideographic Description Characters"](e)||Ja.Kanbun(e)||Ja["Kangxi Radicals"](e)||Ja["Katakana Phonetic Extensions"](e)||Ja.Katakana(e)&&12540!==e||!(!Ja["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Ja["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Ja["Unified Canadian Aboriginal Syllabics"](e)||Ja["Unified Canadian Aboriginal Syllabics Extended"](e)||Ja["Vertical Forms"](e)||Ja["Yijing Hexagram Symbols"](e)||Ja["Yi Syllables"](e)||Ja["Yi Radicals"](e))))}function as(e){return!(is(e)||function(e){return!!(Ja["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Ja["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Ja["Letterlike Symbols"](e)||Ja["Number Forms"](e)||Ja["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Ja["Control Pictures"](e)&&9251!==e||Ja["Optical Character Recognition"](e)||Ja["Enclosed Alphanumerics"](e)||Ja["Geometric Shapes"](e)||Ja["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Ja["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Ja["CJK Symbols and Punctuation"](e)||Ja.Katakana(e)||Ja["Private Use Area"](e)||Ja["CJK Compatibility Forms"](e)||Ja["Small Form Variants"](e)||Ja["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function ss(e){return e>=1424&&e<=2303||Ja["Arabic Presentation Forms-A"](e)||Ja["Arabic Presentation Forms-B"](e)}function os(e,t){return!(!t&&ss(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Ja.Khmer(e))}function rs(e){for(const t of e)if(ss(t.charCodeAt(0)))return!0;return!1}let ns=null,ls="unavailable",us=null;const cs=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(ls="error"),ns&&ns(e)};function gs(){fs.fire(new ze("pluginStateChange",{pluginStatus:ls,pluginURL:us}))}const fs=new Fe,ds=function(){return ls},hs=function(){if("deferred"!==ls||!us)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ls="loading",gs(),us&&we({url:us},e=>{e?cs(e):(ls="loaded",gs())})},ps={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>"loaded"===ls||null!=ps.applyArabicShaping,isLoading:()=>"loading"===ls,setState(e){ls=e.pluginStatus,us=e.pluginURL},isParsed:()=>null!=ps.applyArabicShaping&&null!=ps.processBidirectionalText&&null!=ps.processStyledBidirectionalText,getPluginURL:()=>us};class ms{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ka,this.transition={})}isSupportedScript(e){return function(e,t){for(const i of e)if(!os(i.charCodeAt(0),t))return!1;return!0}(e,ps.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}}}class ys{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Zi(e))return new sa(e,t);if(Yi(e)){const i=aa(e,t);if("error"===i.result)throw new Error(i.value.map(e=>`${e.key}: ${e.message}`).join(", "));return i.value}{let i=e;return"string"==typeof e&&"color"===t.type&&(i=ut.parse(e)),{kind:"constant",evaluate:()=>i}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)}}class _s{constructor(e){this.property=e,this.value=new ys(e,void 0)}transitioned(e,t){return new vs(this.property,this.value,t,_({},e.transition,this.transition),e.now)}untransitioned(){return new vs(this.property,this.value,null,{},0)}}class bs{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return B(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new _s(this._values[e].property)),this._values[e].value=new ys(this._values[e].property,null===t?void 0:B(t))}getTransition(e){return B(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new _s(this._values[e].property)),this._values[e].transition=B(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const i=this.getValue(t);void 0!==i&&(e[t]=i);const a=this.getTransition(t);void 0!==a&&(e[t+"-transition"]=a)}return e}transitioned(e,t){const i=new xs(this._properties);for(const a of Object.keys(this._values))i._values[a]=this._values[a].transitioned(e,t._values[a]);return i}untransitioned(){const e=new xs(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class vs{constructor(e,t,i,a,s){this.property=e,this.value=t,this.begin=s+a.delay||0,this.end=this.begin+a.duration||0,e.specification.transition&&(a.delay||a.duration)&&(this.prior=i)}possiblyEvaluate(e,t,i){const a=e.now||0,s=this.value.possiblyEvaluate(e,t,i),o=this.prior;if(o){if(a>this.end)return this.prior=null,s;if(this.value.isDataDriven())return this.prior=null,s;if(a<this.begin)return o.possiblyEvaluate(e,t,i);{const r=(a-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,i),s,f(r))}}return s}}class xs{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,i){const a=new Us(this._properties);for(const s of Object.keys(this._values))a._values[s]=this._values[s].possiblyEvaluate(e,t,i);return a}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Cs{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return B(this._values[e].value)}setValue(e,t){this._values[e]=new ys(this._values[e].property,null===t?void 0:B(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const i=this.getValue(t);void 0!==i&&(e[t]=i)}return e}possiblyEvaluate(e,t,i){const a=new Us(this._properties);for(const s of Object.keys(this._values))a._values[s]=this._values[s].possiblyEvaluate(e,t,i);return a}}class qs{constructor(e,t,i){this.property=e,this.value=t,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,i,a){return this.property.evaluate(this.value,this.parameters,e,t,i,a)}}class Us{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class ws{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,i){const a=ei[this.specification.type];return a?a(e,t,i):e}}class Es{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,i,a){return new qs(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},i,a)}:e.expression,t)}interpolate(e,t,i){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new qs(this,{kind:"constant",value:void 0},e.parameters);const a=ei[this.specification.type];return a?new qs(this,{kind:"constant",value:a(e.value.value,t.value.value,i)},e.parameters):e}evaluate(e,t,i,a,s,o){return"constant"===e.kind?e.value:e.evaluate(t,i,a,s,o)}}class Bs extends Es{possiblyEvaluate(e,t,i,a){if(void 0===e.value)return new qs(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const s=e.expression.evaluate(t,null,{},i,a),o="resolvedImage"===e.property.specification.type&&"string"!=typeof s?s.name:s,r=this._calculate(o,o,o,t);return new qs(this,{kind:"constant",value:r},t)}if("camera"===e.expression.kind){const i=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new qs(this,{kind:"constant",value:i},t)}return new qs(this,e.expression,t)}evaluate(e,t,i,a,s,o){if("source"===e.kind){const r=e.evaluate(t,i,a,s,o);return this._calculate(r,r,r,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},i,a),e.evaluate({zoom:Math.floor(t.zoom)},i,a),e.evaluate({zoom:Math.floor(t.zoom)+1},i,a),t):e.value}_calculate(e,t,i,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}}interpolate(e){return e}}class Ps{constructor(e){this.specification=e}possiblyEvaluate(e,t,i,a){if(void 0!==e.value){if("constant"===e.expression.kind){const s=e.expression.evaluate(t,null,{},i,a);return this._calculate(s,s,s,t)}return this._calculate(e.expression.evaluate(new ms(Math.floor(t.zoom-1),t)),e.expression.evaluate(new ms(Math.floor(t.zoom),t)),e.expression.evaluate(new ms(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,i,a){return a.zoom>a.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}}interpolate(e){return e}}class Ms{constructor(e){this.specification=e}possiblyEvaluate(e,t,i,a){return!!e.expression.evaluate(t,null,{},i,a)}interpolate(){return!1}}class Ts{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const i=e[t];i.specification.overridable&&this.overridableProperties.push(t);const a=this.defaultPropertyValues[t]=new ys(i,void 0),s=this.defaultTransitionablePropertyValues[t]=new _s(i);this.defaultTransitioningPropertyValues[t]=s.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=a.possiblyEvaluate({})}}}function As(e,t){return 256*(e=p(Math.floor(e),0,255))+p(Math.floor(t),0,255)}Qa("DataDrivenProperty",Es),Qa("DataConstantProperty",ws),Qa("CrossFadedDataDrivenProperty",Bs),Qa("CrossFadedProperty",Ps),Qa("ColorRampProperty",Ms);const Ss={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Is{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ds{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function zs(e,t=1){let i=0,a=0;return{members:e.map(e=>{const s=Ss[e.type].BYTES_PER_ELEMENT,o=i=ks(i,Math.max(t,s)),r=e.components||1;return a=Math.max(a,s),i+=s*r,{name:e.name,type:e.type,components:r,offset:o}}),size:ks(i,Math.max(a,t)),alignment:t}}function ks(e,t){return Math.ceil(e/t)*t}class Fs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){const a=2*e;return this.int16[a+0]=t,this.int16[a+1]=i,e}}Fs.prototype.bytesPerElement=4,Qa("StructArrayLayout2i4",Fs);class Ls extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,i,a)}emplace(e,t,i,a,s){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=i,this.int16[o+2]=a,this.int16[o+3]=s,e}}Ls.prototype.bytesPerElement=8,Qa("StructArrayLayout4i8",Ls);class Os extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,a,s,o,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,a,s,o,r)}emplace(e,t,i,a,s,o,r,n){const l=6*e,u=12*e,c=3*e;return this.int16[l+0]=t,this.int16[l+1]=i,this.uint8[u+4]=a,this.uint8[u+5]=s,this.uint8[u+6]=o,this.uint8[u+7]=r,this.float32[c+2]=n,e}}Os.prototype.bytesPerElement=12,Qa("StructArrayLayout2i4ub1f12",Os);class Rs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){const a=2*e;return this.float32[a+0]=t,this.float32[a+1]=i,e}}Rs.prototype.bytesPerElement=8,Qa("StructArrayLayout2f8",Rs);class Ns extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,a,s,o,r,n,l,u){const c=this.length;return this.resize(c+1),this.emplace(c,e,t,i,a,s,o,r,n,l,u)}emplace(e,t,i,a,s,o,r,n,l,u,c){const g=10*e;return this.uint16[g+0]=t,this.uint16[g+1]=i,this.uint16[g+2]=a,this.uint16[g+3]=s,this.uint16[g+4]=o,this.uint16[g+5]=r,this.uint16[g+6]=n,this.uint16[g+7]=l,this.uint16[g+8]=u,this.uint16[g+9]=c,e}}Ns.prototype.bytesPerElement=20,Qa("StructArrayLayout10ui20",Ns);class $s extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,a,s,o,r,n,l,u,c,g){const f=this.length;return this.resize(f+1),this.emplace(f,e,t,i,a,s,o,r,n,l,u,c,g)}emplace(e,t,i,a,s,o,r,n,l,u,c,g,f){const d=12*e;return this.int16[d+0]=t,this.int16[d+1]=i,this.int16[d+2]=a,this.int16[d+3]=s,this.uint16[d+4]=o,this.uint16[d+5]=r,this.uint16[d+6]=n,this.uint16[d+7]=l,this.int16[d+8]=u,this.int16[d+9]=c,this.int16[d+10]=g,this.int16[d+11]=f,e}}$s.prototype.bytesPerElement=24,Qa("StructArrayLayout4i4ui4i24",$s);class Gs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,i)}emplace(e,t,i,a){const s=3*e;return this.float32[s+0]=t,this.float32[s+1]=i,this.float32[s+2]=a,e}}Gs.prototype.bytesPerElement=12,Qa("StructArrayLayout3f12",Gs);class Vs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}Vs.prototype.bytesPerElement=4,Qa("StructArrayLayout1ul4",Vs);class Zs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,a,s,o,r,n,l,u){const c=this.length;return this.resize(c+1),this.emplace(c,e,t,i,a,s,o,r,n,l,u)}emplace(e,t,i,a,s,o,r,n,l,u,c){const g=16*e,f=8*e;return this.int16[g+0]=t,this.int16[g+1]=i,this.float32[f+1]=a,this.float32[f+2]=s,this.float32[f+3]=o,this.float32[f+4]=r,this.int16[g+10]=n,this.uint32[f+6]=l,this.uint16[g+14]=u,this.uint16[g+15]=c,e}}Zs.prototype.bytesPerElement=32,Qa("StructArrayLayout2i4f1i1ul2ui32",Zs);class Qs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,a,s,o){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,i,a,s,o)}emplace(e,t,i,a,s,o,r){const n=6*e;return this.int16[n+0]=t,this.int16[n+1]=i,this.int16[n+2]=a,this.int16[n+3]=s,this.int16[n+4]=o,this.int16[n+5]=r,e}}Qs.prototype.bytesPerElement=12,Qa("StructArrayLayout2i2i2i12",Qs);class js extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,a,s){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,a,s)}emplace(e,t,i,a,s,o){const r=4*e,n=8*e;return this.float32[r+0]=t,this.float32[r+1]=i,this.float32[r+2]=a,this.int16[n+6]=s,this.int16[n+7]=o,e}}js.prototype.bytesPerElement=16,Qa("StructArrayLayout2f1f2i16",js);class Hs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,i,a)}emplace(e,t,i,a,s){const o=12*e,r=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=i,this.float32[r+1]=a,this.float32[r+2]=s,e}}Hs.prototype.bytesPerElement=12,Qa("StructArrayLayout2ub2f12",Hs);class Xs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,i)}emplace(e,t,i,a){const s=3*e;return this.uint16[s+0]=t,this.uint16[s+1]=i,this.uint16[s+2]=a,e}}Xs.prototype.bytesPerElement=6,Qa("StructArrayLayout3ui6",Xs);class Ws extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,a,s,o,r,n,l,u,c,g,f,d,h,p,m){const y=this.length;return this.resize(y+1),this.emplace(y,e,t,i,a,s,o,r,n,l,u,c,g,f,d,h,p,m)}emplace(e,t,i,a,s,o,r,n,l,u,c,g,f,d,h,p,m,y){const _=24*e,b=12*e,v=48*e;return this.int16[_+0]=t,this.int16[_+1]=i,this.uint16[_+2]=a,this.uint16[_+3]=s,this.uint32[b+2]=o,this.uint32[b+3]=r,this.uint32[b+4]=n,this.uint16[_+10]=l,this.uint16[_+11]=u,this.uint16[_+12]=c,this.float32[b+7]=g,this.float32[b+8]=f,this.uint8[v+36]=d,this.uint8[v+37]=h,this.uint8[v+38]=p,this.uint32[b+10]=m,this.int16[_+22]=y,e}}Ws.prototype.bytesPerElement=48,Qa("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ws);class Ks extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,a,s,o,r,n,l,u,c,g,f,d,h,p,m,y,_,b,v,x,C,q,U,w,E,B){const P=this.length;return this.resize(P+1),this.emplace(P,e,t,i,a,s,o,r,n,l,u,c,g,f,d,h,p,m,y,_,b,v,x,C,q,U,w,E,B)}emplace(e,t,i,a,s,o,r,n,l,u,c,g,f,d,h,p,m,y,_,b,v,x,C,q,U,w,E,B,P){const M=34*e,T=17*e;return this.int16[M+0]=t,this.int16[M+1]=i,this.int16[M+2]=a,this.int16[M+3]=s,this.int16[M+4]=o,this.int16[M+5]=r,this.int16[M+6]=n,this.int16[M+7]=l,this.uint16[M+8]=u,this.uint16[M+9]=c,this.uint16[M+10]=g,this.uint16[M+11]=f,this.uint16[M+12]=d,this.uint16[M+13]=h,this.uint16[M+14]=p,this.uint16[M+15]=m,this.uint16[M+16]=y,this.uint16[M+17]=_,this.uint16[M+18]=b,this.uint16[M+19]=v,this.uint16[M+20]=x,this.uint16[M+21]=C,this.uint16[M+22]=q,this.uint32[T+12]=U,this.float32[T+13]=w,this.float32[T+14]=E,this.float32[T+15]=B,this.float32[T+16]=P,e}}Ks.prototype.bytesPerElement=68,Qa("StructArrayLayout8i15ui1ul4f68",Ks);class Js extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Js.prototype.bytesPerElement=4,Qa("StructArrayLayout1f4",Js);class Ys extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,i)}emplace(e,t,i,a){const s=3*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.int16[s+2]=a,e}}Ys.prototype.bytesPerElement=6,Qa("StructArrayLayout3i6",Ys);class eo extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,i)}emplace(e,t,i,a){const s=4*e;return this.uint32[2*e+0]=t,this.uint16[s+2]=i,this.uint16[s+3]=a,e}}eo.prototype.bytesPerElement=8,Qa("StructArrayLayout1ul2ui8",eo);class to extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){const a=2*e;return this.uint16[a+0]=t,this.uint16[a+1]=i,e}}to.prototype.bytesPerElement=4,Qa("StructArrayLayout2ui4",to);class io extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}io.prototype.bytesPerElement=2,Qa("StructArrayLayout1ui2",io);class ao extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,i,a)}emplace(e,t,i,a,s){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=i,this.float32[o+2]=a,this.float32[o+3]=s,e}}ao.prototype.bytesPerElement=16,Qa("StructArrayLayout4f16",ao);class so extends Is{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.float32[this._pos4+1]}get y1(){return this._structArray.float32[this._pos4+2]}get x2(){return this._structArray.float32[this._pos4+3]}get y2(){return this._structArray.float32[this._pos4+4]}get padding(){return this._structArray.int16[this._pos2+10]}get featureIndex(){return this._structArray.uint32[this._pos4+6]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+14]}get bucketIndex(){return this._structArray.uint16[this._pos2+15]}get anchorPoint(){return new s(this.anchorPointX,this.anchorPointY)}}so.prototype.size=32;class oo extends Zs{get(e){return new so(this,e)}}Qa("CollisionBoxArray",oo);class ro extends Is{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ro.prototype.size=48;class no extends Ws{get(e){return new ro(this,e)}}Qa("PlacedSymbolArray",no);class lo extends Is{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}lo.prototype.size=68;class uo extends Ks{get(e){return new lo(this,e)}}Qa("SymbolInstanceArray",uo);class co extends Js{getoffsetX(e){return this.float32[1*e+0]}}Qa("GlyphOffsetArray",co);class go extends Ys{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Qa("SymbolLineVertexArray",go);class fo extends Is{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}fo.prototype.size=8;class ho extends eo{get(e){return new fo(this,e)}}Qa("FeatureIndexArray",ho);const po=zs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var mo=t((function(e){e.exports=function(e,t){var i,a,s,o,r,n,l,u;for(a=e.length-(i=3&e.length),s=t,r=3432918353,n=461845907,u=0;u<a;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,s=27492+(65535&(o=5*(65535&(s=(s^=l=(65535&(l=(l=(65535&l)*r+(((l>>>16)*r&65535)<<16)&4294967295)<<15|l>>>17))*n+(((l>>>16)*n&65535)<<16)&4294967295)<<13|s>>>19))+((5*(s>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:s^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*r+(((l>>>16)*r&65535)<<16)&4294967295)<<15|l>>>17))*n+(((l>>>16)*n&65535)<<16)&4294967295}return s^=e.length,s=2246822507*(65535&(s^=s>>>16))+((2246822507*(s>>>16)&65535)<<16)&4294967295,s=3266489909*(65535&(s^=s>>>13))+((3266489909*(s>>>16)&65535)<<16)&4294967295,(s^=s>>>16)>>>0}})),yo=t((function(e){e.exports=function(e,t){for(var i,a=e.length,s=t^a,o=0;a>=4;)i=1540483477*(65535&(i=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),s=1540483477*(65535&s)+((1540483477*(s>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),a-=4,++o;switch(a){case 3:s^=(255&e.charCodeAt(o+2))<<16;case 2:s^=(255&e.charCodeAt(o+1))<<8;case 1:s=1540483477*(65535&(s^=255&e.charCodeAt(o)))+((1540483477*(s>>>16)&65535)<<16)}return s=1540483477*(65535&(s^=s>>>13))+((1540483477*(s>>>16)&65535)<<16),(s^=s>>>15)>>>0}})),_o=mo,bo=yo;_o.murmur3=mo,_o.murmur2=bo;class vo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,i,a){this.ids.push(xo(e)),this.positions.push(t,i,a)}getPositions(e){const t=xo(e);let i=0,a=this.ids.length-1;for(;i<a;){const e=i+a>>1;this.ids[e]>=t?a=e:i=e+1}const s=[];for(;this.ids[i]===t;)s.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return s}static serialize(e,t){const i=new Float64Array(e.ids),a=new Uint32Array(e.positions);return function e(t,i,a,s){for(;a<s;){const o=t[a+s>>1];let r=a-1,n=s+1;for(;;){do{r++}while(t[r]<o);do{n--}while(t[n]>o);if(r>=n)break;Co(t,r,n),Co(i,3*r,3*n),Co(i,3*r+1,3*n+1),Co(i,3*r+2,3*n+2)}n-a<s-n?(e(t,i,a,n),a=n+1):(e(t,i,n+1,s),s=n)}}(i,a,0,i.length-1),t&&t.push(i.buffer,a.buffer),{ids:i,positions:a}}static deserialize(e){const t=new vo;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function xo(e){const t=+e;return!isNaN(t)&&t<=l?t:_o(String(e))}function Co(e,t,i){const a=e[t];e[t]=e[i],e[i]=a}Qa("FeaturePositionMap",vo);class qo{constructor(e,t){this.gl=e.gl,this.location=t}}class Uo extends qo{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class wo extends qo{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Eo extends qo{constructor(e,t){super(e,t),this.current=ut.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Bo=new Float32Array(16),Po=new Float32Array(9);function Mo(e){return[As(255*e.r,255*e.g),As(255*e.b,255*e.a)]}class To{constructor(e,t,i){this.value=e,this.uniformNames=t.map(e=>"u_"+e),this.type=i}setUniform(e,t,i){e.set(i.constantOr(this.value))}getBinding(e,t,i){return"color"===this.type?new Eo(e,t):new Uo(e,t)}}class Ao{constructor(e,t){this.uniformNames=t.map(e=>"u_"+e),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,i,a){const s="u_pattern_to"===a?this.patternTo:"u_pattern_from"===a?this.patternFrom:"u_pixel_ratio_to"===a?this.pixelRatioTo:"u_pixel_ratio_from"===a?this.pixelRatioFrom:null;s&&e.set(s)}getBinding(e,t,i){return"u_pattern"===i.substr(0,9)?new wo(e,t):new Uo(e,t)}}class So{constructor(e,t,i,a){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_"+e,type:"Float32",components:"color"===i?2:1,offset:0})),this.paintVertexArray=new a}populatePaintArray(e,t,i,a,s){const o=this.paintVertexArray.length,r=this.expression.evaluate(new ms(0),t,{},a,[],s);this.paintVertexArray.resize(e),this._setPaintValue(o,e,r)}updatePaintArray(e,t,i,a){const s=this.expression.evaluate({zoom:0},i,a);this._setPaintValue(e,t,s)}_setPaintValue(e,t,i){if("color"===this.type){const a=Mo(i);for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,a[0],a[1])}else{for(let a=e;a<t;a++)this.paintVertexArray.emplace(a,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Io{constructor(e,t,i,a,s,o){this.expression=e,this.uniformNames=t.map(e=>`u_${e}_t`),this.type=i,this.useIntegerZoom=a,this.zoom=s,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_"+e,type:"Float32",components:"color"===i?4:2,offset:0})),this.paintVertexArray=new o}populatePaintArray(e,t,i,a,s){const o=this.expression.evaluate(new ms(this.zoom),t,{},a,[],s),r=this.expression.evaluate(new ms(this.zoom+1),t,{},a,[],s),n=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(n,e,o,r)}updatePaintArray(e,t,i,a){const s=this.expression.evaluate({zoom:this.zoom},i,a),o=this.expression.evaluate({zoom:this.zoom+1},i,a);this._setPaintValue(e,t,s,o)}_setPaintValue(e,t,i,a){if("color"===this.type){const s=Mo(i),o=Mo(a);for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,s[0],s[1],o[0],o[1])}else{for(let s=e;s<t;s++)this.paintVertexArray.emplace(s,i,a);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(a))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,a=p(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(a)}getBinding(e,t,i){return new Uo(e,t)}}class Do{constructor(e,t,i,a,s,o){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=a,this.layerId=o,this.zoomInPaintVertexArray=new s,this.zoomOutPaintVertexArray=new s}populatePaintArray(e,t,i){const a=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(a,e,t.patterns&&t.patterns[this.layerId],i)}updatePaintArray(e,t,i,a,s){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],s)}_setPaintValues(e,t,i,a){if(!a||!i)return;const{min:s,mid:o,max:r}=i,n=a[s],l=a[o],u=a[r];if(n&&l&&u)for(let i=e;i<t;i++)this.zoomInPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],l.pixelRatio,n.pixelRatio),this.zoomOutPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],u.tl[0],u.tl[1],u.br[0],u.br[1],l.pixelRatio,u.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,po.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,po.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class zo{constructor(e,t,i=(()=>!0)){this.binders={},this._buffers=[];const a=[];for(const s in e.paint._values){if(!i(s))continue;const o=e.paint.get(s);if(!(o instanceof qs&&Ni(o.property.specification)))continue;const r=Fo(s,e.type),n=o.value,l=o.property.specification.type,u=o.property.useIntegerZoom,c=o.property.specification["property-type"],g="cross-faded"===c||"cross-faded-data-driven"===c;if("constant"===n.kind)this.binders[s]=g?new Ao(n.value,r):new To(n.value,r,l),a.push("/u_"+s);else if("source"===n.kind||g){const i=Lo(s,l,"source");this.binders[s]=g?new Do(n,l,u,t,i,e.id):new So(n,r,l,i),a.push("/a_"+s)}else{const e=Lo(s,l,"composite");this.binders[s]=new Io(n,r,l,u,t,e),a.push("/z_"+s)}}this.cacheKey=a.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof So||t instanceof Io?t.maxValue:0}populatePaintArrays(e,t,i,a,s){for(const o in this.binders){const r=this.binders[o];(r instanceof So||r instanceof Io||r instanceof Do)&&r.populatePaintArray(e,t,i,a,s)}}setConstantPatternPositions(e,t){for(const i in this.binders){const a=this.binders[i];a instanceof Ao&&a.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,i,a,s){let o=!1;for(const r in e){const n=t.getPositions(r);for(const t of n){const n=i.feature(t.index);for(const i in this.binders){const l=this.binders[i];if((l instanceof So||l instanceof Io||l instanceof Do)&&!0===l.expression.isStateDependent){const u=a.paint.get(i);l.expression=u.value,l.updatePaintArray(t.start,t.end,n,e[r],s),o=!0}}}}return o}defines(){const e=[];for(const t in this.binders){const i=this.binders[t];(i instanceof To||i instanceof Ao)&&e.push(...i.uniformNames.map(e=>"#define HAS_UNIFORM_"+e))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const i=this.binders[t];if(i instanceof So||i instanceof Io)for(let t=0;t<i.paintVertexAttributes.length;t++)e.push(i.paintVertexAttributes[t].name);else if(i instanceof Do)for(let t=0;t<po.members.length;t++)e.push(po.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const i=this.binders[t];if(i instanceof To||i instanceof Ao||i instanceof Io)for(const t of i.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const i=[];for(const a in this.binders){const s=this.binders[a];if(s instanceof To||s instanceof Ao||s instanceof Io)for(const o of s.uniformNames)if(t[o]){const r=s.getBinding(e,t[o],o);i.push({name:o,property:a,binding:r})}}return i}setUniforms(e,t,i,a){for(const{name:e,property:s,binding:o}of t)this.binders[s].setUniform(o,a,i.get(s),e)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const i=this.binders[t];if(e&&i instanceof Do){const t=2===e.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(i instanceof So||i instanceof Io)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(e){for(const t in this.binders){const i=this.binders[t];(i instanceof So||i instanceof Io||i instanceof Do)&&i.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof So||t instanceof Io||t instanceof Do)&&t.destroy()}}}class ko{constructor(e,t,i=(()=>!0)){this.programConfigurations={};for(const a of e)this.programConfigurations[a.id]=new zo(a,t,i);this.needsUpload=!1,this._featureMap=new vo,this._bufferOffset=0}populatePaintArrays(e,t,i,a,s,o){for(const i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(e,t,a,s,o);void 0!==t.id&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,i,a){for(const s of i)this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(e,this._featureMap,t,s,a)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function Fo(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Lo(e,t,i){const a={color:{source:Rs,composite:ao},number:{source:Js,composite:Rs}},s=function(e){return{"line-pattern":{source:Ns,composite:Ns},"fill-pattern":{source:Ns,composite:Ns},"fill-extrusion-pattern":{source:Ns,composite:Ns}}[e]}(e);return s&&s[i]||a[t][i]}Qa("ConstantBinder",To),Qa("CrossFadedConstantBinder",Ao),Qa("SourceExpressionBinder",So),Qa("CrossFadedCompositeBinder",Do),Qa("CompositeExpressionBinder",Io),Qa("ProgramConfiguration",zo,{omit:["_buffers"]}),Qa("ProgramConfigurationSet",ko);class Oo extends Fe{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Cs(t.layout)),t.paint)){this._transitionablePaint=new bs(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Us(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,i={}){null!=t&&this._validate(Oa,`layers.${this.id}.layout.${e}`,e,t,i)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return U(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,i={}){if(null!=t&&this._validate(La,`layers.${this.id}.paint.${e}`,e,t,i))return!1;if(U(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0),!1;{const i=this._transitionablePaint._values[e],a="cross-faded-data-driven"===i.property.specification["property-type"],s=i.value.isDataDriven(),o=i.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const r=this._transitionablePaint._values[e].value;return r.isDataDriven()||s||a||this._handleOverridablePaintPropertyUpdate(e,o,r)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,i){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),E(e,(e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length))}_validate(e,t,i,a,s={}){return(!s||!1!==s.validate)&&Ra(this,e.call(ka,{key:t,layerType:this.type,objectKey:i,value:a,styleSpec:Le,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof qs&&Ni(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const Ro=zs([{name:"a_pos",components:2,type:"Int16"}],4),{members:No}=Ro;class $o{constructor(e=[]){this.segments=e}prepareSegment(e,t,i,a){let s=this.segments[this.segments.length-1];return e>$o.MAX_VERTEX_ARRAY_LENGTH&&M(`Max vertices per segment is ${$o.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!s||s.vertexLength+e>$o.MAX_VERTEX_ARRAY_LENGTH||s.sortKey!==a)&&(s={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==a&&(s.sortKey=a),this.segments.push(s)),s}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,i,a){return new $o([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:a,vaos:{},sortKey:0}])}}$o.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Qa("SegmentVector",$o);const Go=Math.pow(2,14)-1,Vo=-Go-1;function Zo(e){const t=8192/e.extent,i=e.loadGeometry();for(let e=0;e<i.length;e++){const a=i[e];for(let e=0;e<a.length;e++){const i=a[e],s=Math.round(i.x*t),o=Math.round(i.y*t);i.x=p(s,Vo,Go),i.y=p(o,Vo,Go),(s<i.x||s>i.x+1||o<i.y||o>i.y+1)&&M("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function Qo(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Zo(e):[]}}function jo(e,t,i,a,s){e.emplaceBack(2*t+(a+1)/2,2*i+(s+1)/2)}class Ho{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Fs,this.indexArray=new Xs,this.segments=new $o,this.programConfigurations=new ko(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,i){const a=this.layers[0],s=[];let o=null;"circle"===a.type&&(o=a.layout.get("circle-sort-key"));for(const{feature:t,id:a,index:r,sourceLayerIndex:n}of e){const e=this.layers[0]._featureFilter.needGeometry,l=Qo(t,e);if(!this.layers[0]._featureFilter.filter(new ms(this.zoom),l,i))continue;const u=o?o.evaluate(l,{},i):void 0,c={id:a,properties:t.properties,type:t.type,sourceLayerIndex:n,index:r,geometry:e?l.geometry:Zo(t),patterns:{},sortKey:u};s.push(c)}o&&s.sort((e,t)=>e.sortKey-t.sortKey);for(const a of s){const{geometry:s,index:o,sourceLayerIndex:r}=a,n=e[o].feature;this.addFeature(a,s,o,i),t.featureIndex.insert(n,s,o,r,this.index)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,No),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,i,a){for(const i of t)for(const t of i){const i=t.x,a=t.y;if(i<0||i>=8192||a<0||a>=8192)continue;const s=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),o=s.vertexLength;jo(this.layoutVertexArray,i,a,-1,-1),jo(this.layoutVertexArray,i,a,1,-1),jo(this.layoutVertexArray,i,a,1,1),jo(this.layoutVertexArray,i,a,-1,1),this.indexArray.emplaceBack(o,o+1,o+2),this.indexArray.emplaceBack(o,o+3,o+2),s.vertexLength+=4,s.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},a)}}function Xo(e,t){for(let i=0;i<e.length;i++)if(sr(t,e[i]))return!0;for(let i=0;i<t.length;i++)if(sr(e,t[i]))return!0;return!!Yo(e,t)}function Wo(e,t,i){return!!sr(e,t)||!!tr(t,e,i)}function Ko(e,t){if(1===e.length)return ar(t,e[0]);for(let i=0;i<t.length;i++){const a=t[i];for(let t=0;t<a.length;t++)if(sr(e,a[t]))return!0}for(let i=0;i<e.length;i++)if(ar(t,e[i]))return!0;for(let i=0;i<t.length;i++)if(Yo(e,t[i]))return!0;return!1}function Jo(e,t,i){if(e.length>1){if(Yo(e,t))return!0;for(let a=0;a<t.length;a++)if(tr(t[a],e,i))return!0}for(let a=0;a<e.length;a++)if(tr(e[a],t,i))return!0;return!1}function Yo(e,t){if(0===e.length||0===t.length)return!1;for(let i=0;i<e.length-1;i++){const a=e[i],s=e[i+1];for(let e=0;e<t.length-1;e++)if(er(a,s,t[e],t[e+1]))return!0}return!1}function er(e,t,i,a){return T(e,i,a)!==T(t,i,a)&&T(e,t,i)!==T(e,t,a)}function tr(e,t,i){const a=i*i;if(1===t.length)return e.distSqr(t[0])<a;for(let i=1;i<t.length;i++)if(ir(e,t[i-1],t[i])<a)return!0;return!1}function ir(e,t,i){const a=t.distSqr(i);if(0===a)return e.distSqr(t);const s=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/a;return e.distSqr(s<0?t:s>1?i:i.sub(t)._mult(s)._add(t))}function ar(e,t){let i,a,s,o=!1;for(let r=0;r<e.length;r++){i=e[r];for(let e=0,r=i.length-1;e<i.length;r=e++)a=i[e],s=i[r],a.y>t.y!=s.y>t.y&&t.x<(s.x-a.x)*(t.y-a.y)/(s.y-a.y)+a.x&&(o=!o)}return o}function sr(e,t){let i=!1;for(let a=0,s=e.length-1;a<e.length;s=a++){const o=e[a],r=e[s];o.y>t.y!=r.y>t.y&&t.x<(r.x-o.x)*(t.y-o.y)/(r.y-o.y)+o.x&&(i=!i)}return i}function or(e,t,i,a,o){for(const s of e)if(t<=s.x&&i<=s.y&&a>=s.x&&o>=s.y)return!0;const r=[new s(t,i),new s(t,o),new s(a,o),new s(a,i)];if(e.length>2)for(const t of r)if(sr(e,t))return!0;for(let t=0;t<e.length-1;t++)if(rr(e[t],e[t+1],r))return!0;return!1}function rr(e,t,i){const a=i[0],s=i[2];if(e.x<a.x&&t.x<a.x||e.x>s.x&&t.x>s.x||e.y<a.y&&t.y<a.y||e.y>s.y&&t.y>s.y)return!1;const o=T(e,t,i[0]);return o!==T(e,t,i[1])||o!==T(e,t,i[2])||o!==T(e,t,i[3])}function nr(e,t,i){const a=t.paint.get(e).value;return"constant"===a.kind?a.value:i.programConfigurations.get(t.id).getMaxValue(e)}function lr(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ur(e,t,i,a,o){if(!t[0]&&!t[1])return e;const r=s.convert(t)._mult(o);"viewport"===i&&r._rotate(-a);const n=[];for(let t=0;t<e.length;t++)n.push(e[t].sub(r));return n}function cr(e,t,i,a){const o=s.convert(e)._mult(a);return"viewport"===t&&o._rotate(-i),o}Qa("CircleBucket",Ho,{omit:["layers"]});const gr=new Ts({"circle-sort-key":new Es(Le.layout_circle["circle-sort-key"])});var fr={paint:new Ts({"circle-radius":new Es(Le.paint_circle["circle-radius"]),"circle-color":new Es(Le.paint_circle["circle-color"]),"circle-blur":new Es(Le.paint_circle["circle-blur"]),"circle-opacity":new Es(Le.paint_circle["circle-opacity"]),"circle-translate":new ws(Le.paint_circle["circle-translate"]),"circle-translate-anchor":new ws(Le.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new ws(Le.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new ws(Le.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Es(Le.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Es(Le.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Es(Le.paint_circle["circle-stroke-opacity"])}),layout:gr},dr="undefined"!=typeof Float32Array?Float32Array:Array;function hr(){var e=new dr(9);return dr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function pr(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mr(e,t,i){var a=t[0],s=t[1],o=t[2],r=t[3],n=t[4],l=t[5],u=t[6],c=t[7],g=t[8],f=t[9],d=t[10],h=t[11],p=t[12],m=t[13],y=t[14],_=t[15],b=i[0],v=i[1],x=i[2],C=i[3];return e[0]=b*a+v*n+x*g+C*p,e[1]=b*s+v*l+x*f+C*m,e[2]=b*o+v*u+x*d+C*y,e[3]=b*r+v*c+x*h+C*_,e[4]=(b=i[4])*a+(v=i[5])*n+(x=i[6])*g+(C=i[7])*p,e[5]=b*s+v*l+x*f+C*m,e[6]=b*o+v*u+x*d+C*y,e[7]=b*r+v*c+x*h+C*_,e[8]=(b=i[8])*a+(v=i[9])*n+(x=i[10])*g+(C=i[11])*p,e[9]=b*s+v*l+x*f+C*m,e[10]=b*o+v*u+x*d+C*y,e[11]=b*r+v*c+x*h+C*_,e[12]=(b=i[12])*a+(v=i[13])*n+(x=i[14])*g+(C=i[15])*p,e[13]=b*s+v*l+x*f+C*m,e[14]=b*o+v*u+x*d+C*y,e[15]=b*r+v*c+x*h+C*_,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var yr=mr;function _r(){var e=new dr(3);return dr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function br(e){var t=new dr(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function vr(e){return Math.hypot(e[0],e[1],e[2])}function xr(e,t,i){var a=new dr(3);return a[0]=e,a[1]=t,a[2]=i,a}function Cr(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function qr(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function Ur(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function wr(e,t,i,a){return e[0]=t[0]+i[0]*a,e[1]=t[1]+i[1]*a,e[2]=t[2]+i[2]*a,e}function Er(e,t){var i=t[0],a=t[1],s=t[2],o=i*i+a*a+s*s;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Br(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Pr(e,t,i){var a=t[0],s=t[1],o=t[2],r=i[0],n=i[1],l=i[2];return e[0]=s*l-o*n,e[1]=o*r-a*l,e[2]=a*n-s*r,e}function Mr(e,t,i){var a=i[0],s=i[1],o=i[2],r=t[0],n=t[1],l=t[2],u=s*l-o*n,c=o*r-a*l,g=a*n-s*r,f=s*g-o*c,d=o*u-a*g,h=a*c-s*u,p=2*i[3];return c*=p,g*=p,d*=2,h*=2,e[0]=r+(u*=p)+(f*=2),e[1]=n+c+d,e[2]=l+g+h,e}var Tr,Ar=qr,Sr=vr;function Ir(e,t,i){var a=t[0],s=t[1],o=t[2],r=t[3];return e[0]=i[0]*a+i[4]*s+i[8]*o+i[12]*r,e[1]=i[1]*a+i[5]*s+i[9]*o+i[13]*r,e[2]=i[2]*a+i[6]*s+i[10]*o+i[14]*r,e[3]=i[3]*a+i[7]*s+i[11]*o+i[15]*r,e}function Dr(){var e=new dr(4);return dr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function zr(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function kr(e,t,i){i*=.5;var a=t[0],s=t[1],o=t[2],r=t[3],n=Math.sin(i),l=Math.cos(i);return e[0]=a*l+r*n,e[1]=s*l+o*n,e[2]=o*l-s*n,e[3]=r*l-a*n,e}_r(),Tr=new dr(4),dr!=Float32Array&&(Tr[0]=0,Tr[1]=0,Tr[2]=0,Tr[3]=0),_r(),xr(1,0,0),xr(0,1,0),Dr(),Dr(),hr();class Fr{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,i){const a=Math.pow(2,i),s=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(i=>{const s=Ir([],i,e),o=1/s[3]/t*a;return function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}(s,s,[o,o,1/s[3],o])}),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(e=>{const t=Er([],Pr([],Ar([],s[e[0]],s[e[1]]),Ar([],s[e[2]],s[e[1]]))),i=-Br(t,s[e[1]]);return t.concat(i)});return new Fr(s,o)}}class Lr{constructor(e,t){this.min=e,this.max=t,this.center=Ur([],Cr([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],i=br(this.min),a=br(this.max);for(let e=0;e<t.length;e++)i[e]=t[e]?this.min[e]:this.center[e],a[e]=t[e]?this.center[e]:this.max[e];return a[2]=this.max[2],new Lr(i,a)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}intersects(e){const t=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let i=!0;for(let o=0;o<e.planes.length;o++){const r=e.planes[o];let n=0;for(let e=0;e<t.length;e++)n+=(a=r)[0]*(s=t[e])[0]+a[1]*s[1]+a[2]*s[2]+a[3]*s[3]>=0;if(0===n)return 0;n!==t.length&&(i=!1)}var a,s;if(i)return 2;for(let t=0;t<3;t++){let i=Number.MAX_VALUE,a=-Number.MAX_VALUE;for(let s=0;s<e.points.length;s++){const o=e.points[s][t]-this.min[t];i=Math.min(i,o),a=Math.max(a,o)}if(a<0||i>this.max[t]-this.min[t])return 0}return 1}}function Or(e,t,i){const a=Ir([],[e.x,e.y,t,1],i);return new s(a[0]/a[3],a[1]/a[3])}const Rr=xr(0,0,0),Nr=xr(0,0,1);function $r(e,t){const i=_r();return Rr[2]=t,e.intersectsPlane(Rr,Nr,i),new s(i[0],i[1])}class Gr extends Ho{}function Vr(e,{width:t,height:i},a,s){if(s){if(s instanceof Uint8ClampedArray)s=new Uint8Array(s.buffer);else if(s.length!==t*i*a)throw new RangeError("mismatched image size")}else s=new Uint8Array(t*i*a);return e.width=t,e.height=i,e.data=s,e}function Zr(e,{width:t,height:i},a){if(t===e.width&&i===e.height)return;const s=Vr({},{width:t,height:i},a);Qr(e,s,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,i)},a),e.width=t,e.height=i,e.data=s.data}function Qr(e,t,i,a,s,o){if(0===s.width||0===s.height)return t;if(s.width>e.width||s.height>e.height||i.x>e.width-s.width||i.y>e.height-s.height)throw new RangeError("out of range source coordinates for image copy");if(s.width>t.width||s.height>t.height||a.x>t.width-s.width||a.y>t.height-s.height)throw new RangeError("out of range destination coordinates for image copy");const r=e.data,n=t.data;for(let l=0;l<s.height;l++){const u=((i.y+l)*e.width+i.x)*o,c=((a.y+l)*t.width+a.x)*o;for(let e=0;e<s.width*o;e++)n[c+e]=r[u+e]}return t}Qa("HeatmapBucket",Gr,{omit:["layers"]});class jr{constructor(e,t){Vr(this,e,1,t)}resize(e){Zr(this,e,1)}clone(){return new jr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,i,a,s){Qr(e,t,i,a,s,1)}}class Hr{constructor(e,t){Vr(this,e,4,t)}resize(e){Zr(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Hr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,i,a,s){Qr(e,t,i,a,s,4)}}Qa("AlphaImage",jr),Qa("RGBAImage",Hr);var Xr={paint:new Ts({"heatmap-radius":new Es(Le.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Es(Le.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new ws(Le.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ms(Le.paint_heatmap["heatmap-color"]),"heatmap-opacity":new ws(Le.paint_heatmap["heatmap-opacity"])})};function Wr(e){const t={},i=e.resolution||256,a=e.clips?e.clips.length:1,s=e.image||new Hr({width:i,height:a}),o=(i,a,o)=>{t[e.evaluationKey]=o;const r=e.expression.evaluate(t);s.data[i+a+0]=Math.floor(255*r.r/r.a),s.data[i+a+1]=Math.floor(255*r.g/r.a),s.data[i+a+2]=Math.floor(255*r.b/r.a),s.data[i+a+3]=Math.floor(255*r.a)};if(e.clips)for(let t=0,s=0;t<a;++t,s+=4*i)for(let a=0,r=0;a<i;a++,r+=4){const n=a/(i-1),{start:l,end:u}=e.clips[t];o(s,r,l*(1-n)+u*n)}else for(let e=0,t=0;e<i;e++,t+=4)o(0,t,e/(i-1));return s}var Kr={paint:new Ts({"hillshade-illumination-direction":new ws(Le.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new ws(Le.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new ws(Le.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new ws(Le.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new ws(Le.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new ws(Le.paint_hillshade["hillshade-accent-color"])})};const Jr=zs([{name:"a_pos",components:2,type:"Int16"}],4),{members:Yr}=Jr;var en=an,tn=an;function an(e,t,i){i=i||2;var a,s,o,r,n,l,u,c=t&&t.length,g=c?t[0]*i:e.length,f=sn(e,0,g,i,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=function(e,t,i,a){var s,o,r,n=[];for(s=0,o=t.length;s<o;s++)(r=sn(e,t[s]*a,s<o-1?t[s+1]*a:e.length,a,!1))===r.next&&(r.steiner=!0),n.push(pn(r));for(n.sort(gn),s=0;s<n.length;s++)fn(n[s],i),i=on(i,i.next);return i}(e,t,f,i)),e.length>80*i){a=o=e[0],s=r=e[1];for(var h=i;h<g;h+=i)(n=e[h])<a&&(a=n),(l=e[h+1])<s&&(s=l),n>o&&(o=n),l>r&&(r=l);u=0!==(u=Math.max(o-a,r-s))?1/u:0}return rn(f,d,i,a,s,u),d}function sn(e,t,i,a,s){var o,r;if(s===Pn(e,t,i,a)>0)for(o=t;o<i;o+=a)r=wn(o,e[o],e[o+1],r);else for(o=i-a;o>=t;o-=a)r=wn(o,e[o],e[o+1],r);return r&&bn(r,r.next)&&(En(r),r=r.next),r}function on(e,t){if(!e)return e;t||(t=e);var i,a=e;do{if(i=!1,a.steiner||!bn(a,a.next)&&0!==_n(a.prev,a,a.next))a=a.next;else{if(En(a),(a=t=a.prev)===a.next)break;i=!0}}while(i||a!==t);return t}function rn(e,t,i,a,s,o,r){if(e){!r&&o&&function(e,t,i,a){var s=e;do{null===s.z&&(s.z=hn(s.x,s.y,t,i,a)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,function(e){var t,i,a,s,o,r,n,l,u=1;do{for(i=e,e=null,o=null,r=0;i;){for(r++,a=i,n=0,t=0;t<u&&(n++,a=a.nextZ);t++);for(l=u;n>0||l>0&&a;)0!==n&&(0===l||!a||i.z<=a.z)?(s=i,i=i.nextZ,n--):(s=a,a=a.nextZ,l--),o?o.nextZ=s:e=s,s.prevZ=o,o=s;i=a}o.nextZ=null,u*=2}while(r>1)}(s)}(e,a,s,o);for(var n,l,u=e;e.prev!==e.next;)if(n=e.prev,l=e.next,o?ln(e,a,s,o):nn(e))t.push(n.i/i),t.push(e.i/i),t.push(l.i/i),En(e),e=l.next,u=l.next;else if((e=l)===u){r?1===r?rn(e=un(on(e),t,i),t,i,a,s,o,2):2===r&&cn(e,t,i,a,s,o):rn(on(e),t,i,a,s,o,1);break}}}function nn(e){var t=e.prev,i=e,a=e.next;if(_n(t,i,a)>=0)return!1;for(var s=e.next.next;s!==e.prev;){if(mn(t.x,t.y,i.x,i.y,a.x,a.y,s.x,s.y)&&_n(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function ln(e,t,i,a){var s=e.prev,o=e,r=e.next;if(_n(s,o,r)>=0)return!1;for(var n=s.x>o.x?s.x>r.x?s.x:r.x:o.x>r.x?o.x:r.x,l=s.y>o.y?s.y>r.y?s.y:r.y:o.y>r.y?o.y:r.y,u=hn(s.x<o.x?s.x<r.x?s.x:r.x:o.x<r.x?o.x:r.x,s.y<o.y?s.y<r.y?s.y:r.y:o.y<r.y?o.y:r.y,t,i,a),c=hn(n,l,t,i,a),g=e.prevZ,f=e.nextZ;g&&g.z>=u&&f&&f.z<=c;){if(g!==e.prev&&g!==e.next&&mn(s.x,s.y,o.x,o.y,r.x,r.y,g.x,g.y)&&_n(g.prev,g,g.next)>=0)return!1;if(g=g.prevZ,f!==e.prev&&f!==e.next&&mn(s.x,s.y,o.x,o.y,r.x,r.y,f.x,f.y)&&_n(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;g&&g.z>=u;){if(g!==e.prev&&g!==e.next&&mn(s.x,s.y,o.x,o.y,r.x,r.y,g.x,g.y)&&_n(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;f&&f.z<=c;){if(f!==e.prev&&f!==e.next&&mn(s.x,s.y,o.x,o.y,r.x,r.y,f.x,f.y)&&_n(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function un(e,t,i){var a=e;do{var s=a.prev,o=a.next.next;!bn(s,o)&&vn(s,a,a.next,o)&&qn(s,o)&&qn(o,s)&&(t.push(s.i/i),t.push(a.i/i),t.push(o.i/i),En(a),En(a.next),a=e=o),a=a.next}while(a!==e);return on(a)}function cn(e,t,i,a,s,o){var r=e;do{for(var n=r.next.next;n!==r.prev;){if(r.i!==n.i&&yn(r,n)){var l=Un(r,n);return r=on(r,r.next),l=on(l,l.next),rn(r,t,i,a,s,o),void rn(l,t,i,a,s,o)}n=n.next}r=r.next}while(r!==e)}function gn(e,t){return e.x-t.x}function fn(e,t){if(t=function(e,t){var i,a=t,s=e.x,o=e.y,r=-1/0;do{if(o<=a.y&&o>=a.next.y&&a.next.y!==a.y){var n=a.x+(o-a.y)*(a.next.x-a.x)/(a.next.y-a.y);if(n<=s&&n>r){if(r=n,n===s){if(o===a.y)return a;if(o===a.next.y)return a.next}i=a.x<a.next.x?a:a.next}}a=a.next}while(a!==t);if(!i)return null;if(s===r)return i;var l,u=i,c=i.x,g=i.y,f=1/0;a=i;do{s>=a.x&&a.x>=c&&s!==a.x&&mn(o<g?s:r,o,c,g,o<g?r:s,o,a.x,a.y)&&(l=Math.abs(o-a.y)/(s-a.x),qn(a,e)&&(l<f||l===f&&(a.x>i.x||a.x===i.x&&dn(i,a)))&&(i=a,f=l)),a=a.next}while(a!==u);return i}(e,t)){var i=Un(t,e);on(t,t.next),on(i,i.next)}}function dn(e,t){return _n(e.prev,e,t.prev)<0&&_n(t.next,e,e.next)<0}function hn(e,t,i,a,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*s)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-a)*s)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function pn(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function mn(e,t,i,a,s,o,r,n){return(s-r)*(t-n)-(e-r)*(o-n)>=0&&(e-r)*(a-n)-(i-r)*(t-n)>=0&&(i-r)*(o-n)-(s-r)*(a-n)>=0}function yn(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&vn(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(qn(e,t)&&qn(t,e)&&function(e,t){var i=e,a=!1,s=(e.x+t.x)/2,o=(e.y+t.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&s<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(a=!a),i=i.next}while(i!==e);return a}(e,t)&&(_n(e.prev,e,t.prev)||_n(e,t.prev,t))||bn(e,t)&&_n(e.prev,e,e.next)>0&&_n(t.prev,t,t.next)>0)}function _n(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function bn(e,t){return e.x===t.x&&e.y===t.y}function vn(e,t,i,a){var s=Cn(_n(e,t,i)),o=Cn(_n(e,t,a)),r=Cn(_n(i,a,e)),n=Cn(_n(i,a,t));return s!==o&&r!==n||!(0!==s||!xn(e,i,t))||!(0!==o||!xn(e,a,t))||!(0!==r||!xn(i,e,a))||!(0!==n||!xn(i,t,a))}function xn(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Cn(e){return e>0?1:e<0?-1:0}function qn(e,t){return _n(e.prev,e,e.next)<0?_n(e,t,e.next)>=0&&_n(e,e.prev,t)>=0:_n(e,t,e.prev)<0||_n(e,e.next,t)<0}function Un(e,t){var i=new Bn(e.i,e.x,e.y),a=new Bn(t.i,t.x,t.y),s=e.next,o=t.prev;return e.next=t,t.prev=e,i.next=s,s.prev=i,a.next=i,i.prev=a,o.next=a,a.prev=o,a}function wn(e,t,i,a){var s=new Bn(e,t,i);return a?(s.next=a.next,s.prev=a,a.next.prev=s,a.next=s):(s.prev=s,s.next=s),s}function En(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Bn(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Pn(e,t,i,a){for(var s=0,o=t,r=i-a;o<i;o+=a)s+=(e[r]-e[o])*(e[o+1]+e[r+1]),r=o;return s}function Mn(e,t,i,a,s){!function e(t,i,a,s,o){for(;s>a;){if(s-a>600){var r=s-a+1,n=i-a+1,l=Math.log(r),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(r-u)/r)*(n-r/2<0?-1:1);e(t,i,Math.max(a,Math.floor(i-n*u/r+c)),Math.min(s,Math.floor(i+(r-n)*u/r+c)),o)}var g=t[i],f=a,d=s;for(Tn(t,a,i),o(t[s],g)>0&&Tn(t,a,s);f<d;){for(Tn(t,f,d),f++,d--;o(t[f],g)<0;)f++;for(;o(t[d],g)>0;)d--}0===o(t[a],g)?Tn(t,a,d):Tn(t,++d,s),d<=i&&(a=d+1),i<=d&&(s=d-1)}}(e,t,i||0,a||e.length-1,s||An)}function Tn(e,t,i){var a=e[t];e[t]=e[i],e[i]=a}function An(e,t){return e<t?-1:e>t?1:0}function Sn(e,t){const i=e.length;if(i<=1)return[e];const a=[];let s,o;for(let t=0;t<i;t++){const i=A(e[t]);0!==i&&(e[t].area=Math.abs(i),void 0===o&&(o=i<0),o===i<0?(s&&a.push(s),s=[e[t]]):s.push(e[t]))}if(s&&a.push(s),t>1)for(let e=0;e<a.length;e++)a[e].length<=t||(Mn(a[e],t,1,a[e].length-1,In),a[e]=a[e].slice(0,t));return a}function In(e,t){return t.area-e.area}function Dn(e,t,i){const a=i.patternDependencies;let s=!1;for(const i of t){const t=i.paint.get(e+"-pattern");t.isConstant()||(s=!0);const o=t.constantOr(null);o&&(s=!0,a[o.to]=!0,a[o.from]=!0)}return s}function zn(e,t,i,a,s){const o=s.patternDependencies;for(const r of t){const t=r.paint.get(e+"-pattern").value;if("constant"!==t.kind){let e=t.evaluate({zoom:a-1},i,{},s.availableImages),n=t.evaluate({zoom:a},i,{},s.availableImages),l=t.evaluate({zoom:a+1},i,{},s.availableImages);e=e&&e.name?e.name:e,n=n&&n.name?n.name:n,l=l&&l.name?l.name:l,o[e]=!0,o[n]=!0,o[l]=!0,i.patterns[r.id]={min:e,mid:n,max:l}}}return i}an.deviation=function(e,t,i,a){var s=t&&t.length,o=Math.abs(Pn(e,0,s?t[0]*i:e.length,i));if(s)for(var r=0,n=t.length;r<n;r++)o-=Math.abs(Pn(e,t[r]*i,r<n-1?t[r+1]*i:e.length,i));var l=0;for(r=0;r<a.length;r+=3){var u=a[r]*i,c=a[r+1]*i,g=a[r+2]*i;l+=Math.abs((e[u]-e[g])*(e[c+1]-e[u+1])-(e[u]-e[c])*(e[g+1]-e[u+1]))}return 0===o&&0===l?0:Math.abs((l-o)/o)},an.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},a=0,s=0;s<e.length;s++){for(var o=0;o<e[s].length;o++)for(var r=0;r<t;r++)i.vertices.push(e[s][o][r]);s>0&&i.holes.push(a+=e[s-1].length)}return i},en.default=tn;class kn{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Fs,this.indexArray=new Xs,this.indexArray2=new to,this.programConfigurations=new ko(e.layers,e.zoom),this.segments=new $o,this.segments2=new $o,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,i){this.hasPattern=Dn("fill",this.layers,t);const a=this.layers[0].layout.get("fill-sort-key"),s=[];for(const{feature:o,id:r,index:n,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,u=Qo(o,e);if(!this.layers[0]._featureFilter.filter(new ms(this.zoom),u,i))continue;const c=a?a.evaluate(u,{},i,t.availableImages):void 0,g={id:r,properties:o.properties,type:o.type,sourceLayerIndex:l,index:n,geometry:e?u.geometry:Zo(o),patterns:{},sortKey:c};s.push(g)}a&&s.sort((e,t)=>e.sortKey-t.sortKey);for(const a of s){const{geometry:s,index:o,sourceLayerIndex:r}=a;if(this.hasPattern){const e=zn("fill",this.layers,a,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(a,s,o,i,{});t.featureIndex.insert(e[o].feature,s,o,r,this.index)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}addFeatures(e,t,i){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Yr),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,i,a,s){for(const e of Sn(t,500)){let t=0;for(const i of e)t+=i.length;const i=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),a=i.vertexLength,s=[],o=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&o.push(s.length/2);const i=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),a=i.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(a+t.length-1,a),s.push(t[0].x),s.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(a+e-1,a+e),s.push(t[e].x),s.push(t[e].y);i.vertexLength+=t.length,i.primitiveLength+=t.length}const r=en(s,o);for(let e=0;e<r.length;e+=3)this.indexArray.emplaceBack(a+r[e],a+r[e+1],a+r[e+2]);i.vertexLength+=t,i.primitiveLength+=r.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,s,a)}}Qa("FillBucket",kn,{omit:["layers","patternFeatures"]});const Fn=new Ts({"fill-sort-key":new Es(Le.layout_fill["fill-sort-key"])});var Ln={paint:new Ts({"fill-antialias":new ws(Le.paint_fill["fill-antialias"]),"fill-opacity":new Es(Le.paint_fill["fill-opacity"]),"fill-color":new Es(Le.paint_fill["fill-color"]),"fill-outline-color":new Es(Le.paint_fill["fill-outline-color"]),"fill-translate":new ws(Le.paint_fill["fill-translate"]),"fill-translate-anchor":new ws(Le.paint_fill["fill-translate-anchor"]),"fill-pattern":new Bs(Le.paint_fill["fill-pattern"])}),layout:Fn};const On=zs([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Rn=zs([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:Nn}=On;var $n=Gn;function Gn(e,t,i,a,s){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=a,this._values=s,e.readFields(Vn,this,t)}function Vn(e,t,i){1==e?t.id=i.readVarint():2==e?function(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var a=t._keys[e.readVarint()],s=t._values[e.readVarint()];t.properties[a]=s}}(i,t):3==e?t.type=i.readVarint():4==e&&(t._geometry=i.pos)}function Zn(e){for(var t,i,a=0,s=0,o=e.length,r=o-1;s<o;r=s++)a+=((i=e[r]).x-(t=e[s]).x)*(t.y+i.y);return a}Gn.types=["Unknown","Point","LineString","Polygon"],Gn.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,a=1,o=0,r=0,n=0,l=[];e.pos<i;){if(o<=0){var u=e.readVarint();a=7&u,o=u>>3}if(o--,1===a||2===a)r+=e.readSVarint(),n+=e.readSVarint(),1===a&&(t&&l.push(t),t=[]),t.push(new s(r,n));else{if(7!==a)throw new Error("unknown command "+a);t&&t.push(t[0].clone())}}return t&&l.push(t),l},Gn.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,a=0,s=0,o=0,r=1/0,n=-1/0,l=1/0,u=-1/0;e.pos<t;){if(a<=0){var c=e.readVarint();i=7&c,a=c>>3}if(a--,1===i||2===i)(s+=e.readSVarint())<r&&(r=s),s>n&&(n=s),(o+=e.readSVarint())<l&&(l=o),o>u&&(u=o);else if(7!==i)throw new Error("unknown command "+i)}return[r,l,n,u]},Gn.prototype.toGeoJSON=function(e,t,i){var a,s,o=this.extent*Math.pow(2,i),r=this.extent*e,n=this.extent*t,l=this.loadGeometry(),u=Gn.types[this.type];function c(e){for(var t=0;t<e.length;t++){var i=e[t];e[t]=[360*(i.x+r)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+n)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var g=[];for(a=0;a<l.length;a++)g[a]=l[a][0];c(l=g);break;case 2:for(a=0;a<l.length;a++)c(l[a]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var i,a,s=[],o=0;o<t;o++){var r=Zn(e[o]);0!==r&&(void 0===a&&(a=r<0),a===r<0?(i&&s.push(i),i=[e[o]]):i.push(e[o]))}return i&&s.push(i),s}(l),a=0;a<l.length;a++)for(s=0;s<l[a].length;s++)c(l[a][s])}1===l.length?l=l[0]:u="Multi"+u;var f={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f};var Qn=jn;function jn(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Hn,this,t),this.length=this._features.length}function Hn(e,t,i){15===e?t.version=i.readVarint():1===e?t.name=i.readString():5===e?t.extent=i.readVarint():2===e?t._features.push(i.pos):3===e?t._keys.push(i.readString()):4===e&&t._values.push(function(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var a=e.readVarint()>>3;t=1===a?e.readString():2===a?e.readFloat():3===a?e.readDouble():4===a?e.readVarint64():5===a?e.readVarint():6===a?e.readSVarint():7===a?e.readBoolean():null}return t}(i))}function Xn(e,t,i){if(3===e){var a=new Qn(i,i.readVarint()+i.pos);a.length&&(t[a.name]=a)}}jn.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new $n(this._pbf,t,this.extent,this._keys,this._values)};var Wn={VectorTile:function(e,t){this.layers=e.readFields(Xn,{},t)},VectorTileFeature:$n,VectorTileLayer:Qn};const Kn=Wn.VectorTileFeature.types,Jn=Math.pow(2,13);function Yn(e,t,i,a,s,o,r,n){e.emplaceBack((t<<1)+r,(i<<1)+o,(Math.floor(a*Jn)<<1)+s,Math.round(n))}class el{constructor(){this.acc=new s(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new s(e.x,e.y),this.max=new s(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);let i=!!this.borders;const a=this.min,s=this.max;e.x<a.x?(a.x=e.x,i=!0):e.x>s.x&&(s.x=e.x,i=!0),e.y<a.y?(a.y=e.y,i=!0):e.y>s.y&&(s.y=e.y,i=!0),((0===e.x||8192===e.x)&&e.x===t.x)!=((0===e.y||8192===e.y)&&e.y===t.y)&&this.processBorderOverlap(e,t),i&&this.checkBorderIntersection(e,t)}checkBorderIntersection(e,t){t.x<0!=e.x<0&&this.addBorderIntersection(0,Yt(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>8192!=e.x>8192&&this.addBorderIntersection(1,Yt(t.y,e.y,(8192-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Yt(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>8192!=e.y>8192&&this.addBorderIntersection(3,Yt(t.x,e.x,(8192-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const i=this.borders[e];t<i[0]&&(i[0]=t),t>i[1]&&(i[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const i=0===e.x?0:1;this.addBorderIntersection(i,t.y),this.addBorderIntersection(i,e.y)}else{const i=0===e.y?2:3;this.addBorderIntersection(i,t.x),this.addBorderIntersection(i,e.x)}}centroid(){const e=this.polyCount.reduce((e,t)=>e+t.edges,0);return 0!==e?this.acc.div(e)._round():new s(0,0)}span(){return new s(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,t)=>e+ +(t[0]!==Number.MAX_VALUE),0)}}class tl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Ls,this.centroidVertexArray=new to,this.indexArray=new Xs,this.programConfigurations=new ko(e.layers,e.zoom),this.segments=new $o,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.enableTerrain=e.enableTerrain}populate(e,t,i){this.features=[],this.hasPattern=Dn("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/8192/(1<<e.z)}(i);for(const{feature:a,id:s,index:o,sourceLayerIndex:r}of e){const e=this.layers[0]._featureFilter.needGeometry,n=Qo(a,e);if(!this.layers[0]._featureFilter.filter(new ms(this.zoom),n,i))continue;const l={id:s,sourceLayerIndex:r,index:o,geometry:e?n.geometry:Zo(a),properties:a.properties,type:a.type,patterns:{}};this.hasPattern?this.features.push(zn("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,l.geometry,o,i,{}),t.featureIndex.insert(a,l.geometry,o,r,this.index)}this.sortBorders()}addFeatures(e,t,i){for(const e of this.features){const{geometry:a}=e;this.addFeature(e,a,e.index,t,i)}this.sortBorders()}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Nn),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Rn.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,i,a,s){const o=this.enableTerrain&&e.properties&&e.properties.hasOwnProperty("type")&&e.properties.hasOwnProperty("height")&&"Polygon"===Kn[e.type]?new el:null;for(const i of Sn(t,500)){let t=0,a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===i.length||(r=i[0]).every(e=>e.x<=0)||r.every(e=>e.x>=8192)||r.every(e=>e.y<=0)||r.every(e=>e.y>=8192))continue;for(let e=0;e<i.length;e++){const s=i[e];if(0===s.length)continue;t+=s.length;let r=0;o&&o.startRing(s[0]);for(let e=0;e<s.length;e++){const t=s[e];if(e>=1){const i=s[e-1];if(!il(t,i)){o&&o.append(t,i),a.vertexLength+4>$o.MAX_VERTEX_ARRAY_LENGTH&&(a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=t.sub(i)._perp(),s=e.x/(Math.abs(e.x)+Math.abs(e.y)),n=e.y>0?1:0,l=i.dist(t);r+l>32768&&(r=0),Yn(this.layoutVertexArray,t.x,t.y,s,n,0,0,r),Yn(this.layoutVertexArray,t.x,t.y,s,n,0,1,r),r+=l,Yn(this.layoutVertexArray,i.x,i.y,s,n,0,0,r),Yn(this.layoutVertexArray,i.x,i.y,s,n,0,1,r);const u=a.vertexLength;this.indexArray.emplaceBack(u,u+2,u+1),this.indexArray.emplaceBack(u+1,u+2,u+3),a.vertexLength+=4,a.primitiveLength+=2}}}}if(a.vertexLength+t>$o.MAX_VERTEX_ARRAY_LENGTH&&(a=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray)),"Polygon"!==Kn[e.type])continue;const s=[],n=[],l=a.vertexLength;for(let e=0;e<i.length;e++){const t=i[e];if(0!==t.length){t!==i[0]&&n.push(s.length/2);for(let e=0;e<t.length;e++){const i=t[e];Yn(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),s.push(i.x),s.push(i.y),o&&o.currentPolyCount.top++}}}const u=en(s,n);for(let e=0;e<u.length;e+=3)this.indexArray.emplaceBack(l+u[e],l+u[e+2],l+u[e+1]);a.primitiveLength+=u.length/3,a.vertexLength+=t}var r;if(o&&o.polyCount.length>0){if(o.borders){o.vertexArrayOffset=this.centroidVertexArray.length;const e=o.borders,t=this.featuresOnBorder.push(o)-1;for(let i=0;i<4;i++)e[i][0]!==Number.MAX_VALUE&&this.borders[i].push(t)}this.encodeCentroid(o.borders?void 0:o.centroid(),o)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,s,a)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((t,i)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[i].borders[e][0])}encodeCentroid(e,t,i=!0){let a,s;if(e)if(0!==e.y){const i=t.span()._mult(this.tileToMeter);a=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(i.x/10)),s=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(i.y/10))}else a=Math.ceil(7.3*e.x),s=0;else a=0,s=+i;let o=i?this.centroidVertexArray.length:t.vertexArrayOffset;for(const e of t.polyCount){i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*e.edges+e.top);for(let t=0;t<2*e.edges;t++)this.centroidVertexArray.emplace(o++,0,s),this.centroidVertexArray.emplace(o++,a,s);for(let t=0;t<e.top;t++)this.centroidVertexArray.emplace(o++,a,s)}}}function il(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Qa("FillExtrusionBucket",tl,{omit:["layers","features"]}),Qa("PartMetadata",el);var al={paint:new Ts({"fill-extrusion-opacity":new ws(Le["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Es(Le["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new ws(Le["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new ws(Le["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Bs(Le["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Es(Le["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Es(Le["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new ws(Le["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function sl(e,t){return e.x*t.x+e.y*t.y}function ol(e,t){if(1===e.length){let i=0;const a=t[i++];let s;for(;!s||a.equals(s);)if(s=t[i++],!s)return 1/0;for(;i<t.length;i++){const o=t[i],r=e[0],n=s.sub(a),l=o.sub(a),u=r.sub(a),c=sl(n,n),g=sl(n,l),f=sl(l,l),d=sl(u,n),h=sl(u,l),p=c*f-g*g,m=(f*d-g*h)/p,y=(c*h-g*d)/p,_=a.z*(1-m-y)+s.z*m+o.z*y;if(isFinite(_))return _}return 1/0}{let e=1/0;for(const i of t)e=Math.min(e,i.z);return e}}const rl=zs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:nl}=rl,ll=zs([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:ul}=ll,cl=Wn.VectorTileFeature.types,gl=Math.cos(Math.PI/180*37.5);class fl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(e=>{this.gradients[e.id]={}}),this.layoutVertexArray=new Os,this.layoutVertexArray2=new Rs,this.indexArray=new Xs,this.programConfigurations=new ko(e.layers,e.zoom),this.segments=new $o,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,i){this.hasPattern=Dn("line",this.layers,t);const a=this.layers[0].layout.get("line-sort-key"),s=[];for(const{feature:t,id:o,index:r,sourceLayerIndex:n}of e){const e=this.layers[0]._featureFilter.needGeometry,l=Qo(t,e);if(!this.layers[0]._featureFilter.filter(new ms(this.zoom),l,i))continue;const u=a?a.evaluate(l,{},i):void 0,c={id:o,properties:t.properties,type:t.type,sourceLayerIndex:n,index:r,geometry:e?l.geometry:Zo(t),patterns:{},sortKey:u};s.push(c)}a&&s.sort((e,t)=>e.sortKey-t.sortKey);for(const a of s){const{geometry:s,index:o,sourceLayerIndex:r}=a;if(this.hasPattern){const e=zn("line",this.layers,a,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(a,s,o,i,{});t.featureIndex.insert(e[o].feature,s,o,r,this.index)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}addFeatures(e,t,i){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,ul)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,nl),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,i,a,s){const o=this.layers[0].layout,r=o.get("line-join").evaluate(e,{}),n=o.get("line-cap"),l=o.get("line-miter-limit"),u=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const i of t)this.addLine(i,e,r,n,l,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,s,a)}addLine(e,t,i,a,s,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const r="Polygon"===cl[t.type];let n=e.length;for(;n>=2&&e[n-1].equals(e[n-2]);)n--;let l=0;for(;l<n-1&&e[l].equals(e[l+1]);)l++;if(n<(r?3:2))return;"bevel"===i&&(s=1.05);const u=this.overscaling<=16?122880/(512*this.overscaling):0,c=this.segments.prepareSegment(10*n,this.layoutVertexArray,this.indexArray);let g,f=void 0,d=void 0,h=void 0,p=void 0;this.e1=this.e2=-1,r&&(g=e[n-2],p=e[l].sub(g)._unit()._perp());for(let t=l;t<n;t++){if(d=t===n-1?r?e[l+1]:void 0:e[t+1],d&&e[t].equals(d))continue;p&&(h=p),g&&(f=g),g=e[t],p=d?d.sub(g)._unit()._perp():h,h=h||p;let m=h.add(p);0===m.x&&0===m.y||m._unit();const y=h.x*p.x+h.y*p.y,_=m.x*p.x+m.y*p.y,b=0!==_?1/_:1/0,v=2*Math.sqrt(2-2*_),x=_<gl&&f&&d,C=h.x*p.y-h.y*p.x>0;if(x&&t>l){const e=g.dist(f);if(e>2*u){const t=g.sub(g.sub(f)._mult(u/e)._round());this.updateDistance(f,t),this.addCurrentVertex(t,h,0,0,c),f=t}}const q=f&&d;let U=q?i:r?"butt":a;if(q&&"round"===U&&(b<o?U="miter":b<=2&&(U="fakeround")),"miter"===U&&b>s&&(U="bevel"),"bevel"===U&&(b>2&&(U="flipbevel"),b<s&&(U="miter")),f&&this.updateDistance(f,g),"miter"===U)m._mult(b),this.addCurrentVertex(g,m,0,0,c);else if("flipbevel"===U){if(b>100)m=p.mult(-1);else{const e=b*h.add(p).mag()/h.sub(p).mag();m._perp()._mult(e*(C?-1:1))}this.addCurrentVertex(g,m,0,0,c),this.addCurrentVertex(g,m.mult(-1),0,0,c)}else if("bevel"===U||"fakeround"===U){const e=-Math.sqrt(b*b-1),t=C?e:0,i=C?0:e;if(f&&this.addCurrentVertex(g,h,t,i,c),"fakeround"===U){const e=Math.round(180*v/Math.PI/20);for(let t=1;t<e;t++){let i=t/e;if(.5!==i){const e=i-.5;i+=i*e*(i-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const a=p.sub(h)._mult(i)._add(h)._unit()._mult(C?-1:1);this.addHalfVertex(g,a.x,a.y,!1,C,0,c)}}d&&this.addCurrentVertex(g,p,-t,-i,c)}else if("butt"===U)this.addCurrentVertex(g,m,0,0,c);else if("square"===U){const e=f?1:-1;this.addCurrentVertex(g,m,e,e,c)}else"round"===U&&(f&&(this.addCurrentVertex(g,h,0,0,c),this.addCurrentVertex(g,h,1,1,c,!0)),d&&(this.addCurrentVertex(g,p,-1,-1,c,!0),this.addCurrentVertex(g,p,0,0,c)));if(x&&t<n-1){const e=g.dist(d);if(e>2*u){const t=g.add(d.sub(g)._mult(u/e)._round());this.updateDistance(g,t),this.addCurrentVertex(t,p,0,0,c),g=t}}}}addCurrentVertex(e,t,i,a,s,o=!1){const r=t.y*a-t.x,n=-t.y-t.x*a;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,o,!1,i,s),this.addHalfVertex(e,r,n,o,!0,-a,s)}addHalfVertex({x:e,y:t},i,a,s,o,r,n){this.layoutVertexArray.emplaceBack((e<<1)+(s?1:0),(t<<1)+(o?1:0),Math.round(63*i)+128,Math.round(63*a)+128,1+(0===r?0:r<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);const l=n.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),n.primitiveLength++),o?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}Qa("LineBucket",fl,{omit:["layers","patternFeatures"]});const dl=new Ts({"line-cap":new ws(Le.layout_line["line-cap"]),"line-join":new Es(Le.layout_line["line-join"]),"line-miter-limit":new ws(Le.layout_line["line-miter-limit"]),"line-round-limit":new ws(Le.layout_line["line-round-limit"]),"line-sort-key":new Es(Le.layout_line["line-sort-key"])});var hl={paint:new Ts({"line-opacity":new Es(Le.paint_line["line-opacity"]),"line-color":new Es(Le.paint_line["line-color"]),"line-translate":new ws(Le.paint_line["line-translate"]),"line-translate-anchor":new ws(Le.paint_line["line-translate-anchor"]),"line-width":new Es(Le.paint_line["line-width"]),"line-gap-width":new Es(Le.paint_line["line-gap-width"]),"line-offset":new Es(Le.paint_line["line-offset"]),"line-blur":new Es(Le.paint_line["line-blur"]),"line-dasharray":new Ps(Le.paint_line["line-dasharray"]),"line-pattern":new Bs(Le.paint_line["line-pattern"]),"line-gradient":new Ms(Le.paint_line["line-gradient"])}),layout:dl};const pl=new class extends Es{possiblyEvaluate(e,t){return t=new ms(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,i,a){return t=_({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,i,a)}}(hl.paint.properties["line-width"].specification);function ml(e,t){return t>0?t+2*e:e}pl.useIntegerZoom=!0;const yl=zs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_l=zs([{name:"a_projected_pos",components:3,type:"Float32"}],4),bl=(zs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),zs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),vl=zs([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]),xl=(zs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),zs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Cl=zs([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ql(e,t){const{expression:i}=t;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new ms(e+1))};if("source"===i.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:a}=i;let s=0;for(;s<t.length&&t[s]<=e;)s++;s=Math.max(0,s-1);let o=s;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const r=t[s],n=t[o];return"composite"===i.kind?{kind:"composite",minZoom:r,maxZoom:n,interpolationType:a}:{kind:"camera",minZoom:r,maxZoom:n,minSize:i.evaluate(new ms(r)),maxSize:i.evaluate(new ms(n)),interpolationType:a}}}function Ul(e,{uSize:t,uSizeT:i},{lowerSize:a,upperSize:s}){return"source"===e.kind?a/128:"composite"===e.kind?Yt(a/128,s/128,i):t}function wl(e,t){let i=0,a=0;if("constant"===e.kind)a=e.layoutSize;else if("source"!==e.kind){const{interpolationType:s,minZoom:o,maxZoom:r}=e,n=s?p(hi.interpolationFactor(s,t,o,r),0,1):0;"camera"===e.kind?a=Yt(e.minSize,e.maxSize,n):i=n}return{uSizeT:i,uSize:a}}zs([{name:"triangle",components:3,type:"Uint16"}]),zs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),zs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),zs([{type:"Float32",name:"offsetX"}]),zs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var El=Object.freeze({__proto__:null,getSizeData:ql,evaluateSizeForFeature:Ul,evaluateSizeForZoom:wl,SIZE_PACK_FACTOR:128});function Bl(e,t,i){return e.sections.forEach(e=>{e.text=function(e,t,i){const a=t.layout.get("text-transform").evaluate(i,{});return"uppercase"===a?e=e.toLocaleUpperCase():"lowercase"===a&&(e=e.toLocaleLowerCase()),ps.applyArabicShaping&&(e=ps.applyArabicShaping(e)),e}(e.text,t,i)}),e}const Pl={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Ml=function(e,t,i,a,s){var o,r,n=8*s-a-1,l=(1<<n)-1,u=l>>1,c=-7,g=i?s-1:0,f=i?-1:1,d=e[t+g];for(g+=f,o=d&(1<<-c)-1,d>>=-c,c+=n;c>0;o=256*o+e[t+g],g+=f,c-=8);for(r=o&(1<<-c)-1,o>>=-c,c+=a;c>0;r=256*r+e[t+g],g+=f,c-=8);if(0===o)o=1-u;else{if(o===l)return r?NaN:1/0*(d?-1:1);r+=Math.pow(2,a),o-=u}return(d?-1:1)*r*Math.pow(2,o-a)},Tl=function(e,t,i,a,s,o){var r,n,l,u=8*o-s-1,c=(1<<u)-1,g=c>>1,f=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,d=a?0:o-1,h=a?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(n=isNaN(t)?1:0,r=c):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),(t+=r+g>=1?f/l:f*Math.pow(2,1-g))*l>=2&&(r++,l/=2),r+g>=c?(n=0,r=c):r+g>=1?(n=(t*l-1)*Math.pow(2,s),r+=g):(n=t*Math.pow(2,g-1)*Math.pow(2,s),r=0));s>=8;e[i+d]=255&n,d+=h,n/=256,s-=8);for(r=r<<s|n,u+=s;u>0;e[i+d]=255&r,d+=h,r/=256,u-=8);e[i+d-h]|=128*p},Al=Sl;function Sl(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Sl.Varint=0,Sl.Fixed64=1,Sl.Bytes=2,Sl.Fixed32=5;var Il="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Dl(e){return e.type===Sl.Bytes?e.readVarint()+e.pos:e.pos+1}function zl(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function kl(e,t,i){var a=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(a);for(var s=i.pos-1;s>=e;s--)i.buf[s+a]=i.buf[s]}function Fl(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function Ll(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function Ol(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function Rl(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function Nl(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function $l(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function Gl(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function Vl(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function Zl(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Ql(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function jl(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function Hl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Xl(e,t,i){1===e&&i.readMessage(Wl,t)}function Wl(e,t,i){if(3===e){const{id:e,bitmap:a,width:s,height:o,left:r,top:n,advance:l}=i.readMessage(Kl,{});t.push({id:e,bitmap:new jr({width:s+6,height:o+6},a),metrics:{width:s,height:o,left:r,top:n,advance:l}})}}function Kl(e,t,i){1===e?t.id=i.readVarint():2===e?t.bitmap=i.readBytes():3===e?t.width=i.readVarint():4===e?t.height=i.readVarint():5===e?t.left=i.readSVarint():6===e?t.top=i.readSVarint():7===e&&(t.advance=i.readVarint())}function Jl(e){let t=0,i=0;for(const a of e)t+=a.w*a.h,i=Math.max(i,a.w);e.sort((e,t)=>t.h-e.h);const a=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}];let s=0,o=0;for(const t of e)for(let e=a.length-1;e>=0;e--){const i=a[e];if(!(t.w>i.w||t.h>i.h)){if(t.x=i.x,t.y=i.y,o=Math.max(o,t.y+t.h),s=Math.max(s,t.x+t.w),t.w===i.w&&t.h===i.h){const t=a.pop();e<a.length&&(a[e]=t)}else t.h===i.h?(i.x+=t.w,i.w-=t.w):t.w===i.w?(i.y+=t.h,i.h-=t.h):(a.push({x:i.x+t.w,y:i.y,w:i.w-t.w,h:t.h}),i.y+=t.h,i.h-=t.h);break}}return{w:s,h:o,fill:t/(s*o)||0}}Sl.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var a=this.readVarint(),s=a>>3,o=this.pos;this.type=7&a,e(s,t,this),this.pos===o&&this.skip(a)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Ql(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Hl(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Ql(this.buf,this.pos)+4294967296*Ql(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Ql(this.buf,this.pos)+4294967296*Hl(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Ml(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Ml(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,a=this.buf;return t=127&(i=a[this.pos++]),i<128?t:(t|=(127&(i=a[this.pos++]))<<7,i<128?t:(t|=(127&(i=a[this.pos++]))<<14,i<128?t:(t|=(127&(i=a[this.pos++]))<<21,i<128?t:function(e,t,i){var a,s,o=i.buf;if(a=(112&(s=o[i.pos++]))>>4,s<128)return zl(e,a,t);if(a|=(127&(s=o[i.pos++]))<<3,s<128)return zl(e,a,t);if(a|=(127&(s=o[i.pos++]))<<10,s<128)return zl(e,a,t);if(a|=(127&(s=o[i.pos++]))<<17,s<128)return zl(e,a,t);if(a|=(127&(s=o[i.pos++]))<<24,s<128)return zl(e,a,t);if(a|=(1&(s=o[i.pos++]))<<31,s<128)return zl(e,a,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=a[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Il?function(e,t,i){return Il.decode(e.subarray(t,i))}(this.buf,t,e):function(e,t,i){for(var a="",s=t;s<i;){var o,r,n,l=e[s],u=null,c=l>239?4:l>223?3:l>191?2:1;if(s+c>i)break;1===c?l<128&&(u=l):2===c?128==(192&(o=e[s+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(r=e[s+2],128==(192&(o=e[s+1]))&&128==(192&r)&&((u=(15&l)<<12|(63&o)<<6|63&r)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(r=e[s+2],n=e[s+3],128==(192&(o=e[s+1]))&&128==(192&r)&&128==(192&n)&&((u=(15&l)<<18|(63&o)<<12|(63&r)<<6|63&n)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,a+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),a+=String.fromCharCode(u),s+=c}return a}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Sl.Bytes)return e.push(this.readVarint(t));var i=Dl(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Sl.Bytes)return e.push(this.readSVarint());var t=Dl(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Sl.Bytes)return e.push(this.readBoolean());var t=Dl(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Sl.Bytes)return e.push(this.readFloat());var t=Dl(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Sl.Bytes)return e.push(this.readDouble());var t=Dl(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Sl.Bytes)return e.push(this.readFixed32());var t=Dl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Sl.Bytes)return e.push(this.readSFixed32());var t=Dl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Sl.Bytes)return e.push(this.readFixed64());var t=Dl(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Sl.Bytes)return e.push(this.readSFixed64());var t=Dl(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Sl.Varint)for(;this.buf[this.pos++]>127;);else if(t===Sl.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Sl.Fixed32)this.pos+=4;else{if(t!==Sl.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),jl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),jl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),jl(this.buf,-1&e,this.pos),jl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),jl(this.buf,-1&e,this.pos),jl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var i,a;if(e>=0?(i=e%4294967296|0,a=e/4294967296|0):(a=~(-e/4294967296),4294967295^(i=~(-e%4294967296))?i=i+1|0:(i=0,a=a+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,i){i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,i.buf[i.pos]=127&(e>>>=7)}(i,0,t),function(e,t){var i=(7&e)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(a,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,i){for(var a,s,o=0;o<t.length;o++){if((a=t.charCodeAt(o))>55295&&a<57344){if(!s){a>56319||o+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):s=a;continue}if(a<56320){e[i++]=239,e[i++]=191,e[i++]=189,s=a;continue}a=s-55296<<10|a-56320|65536,s=null}else s&&(e[i++]=239,e[i++]=191,e[i++]=189,s=null);a<128?e[i++]=a:(a<2048?e[i++]=a>>6|192:(a<65536?e[i++]=a>>12|224:(e[i++]=a>>18|240,e[i++]=a>>12&63|128),e[i++]=a>>6&63|128),e[i++]=63&a|128)}return i}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&kl(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),Tl(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Tl(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var a=this.pos-i;a>=128&&kl(i,a,this),this.pos=i-1,this.writeVarint(a),this.pos+=a},writeMessage:function(e,t,i){this.writeTag(e,Sl.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Fl,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Ll,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Nl,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Ol,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Rl,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,$l,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Gl,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Vl,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Zl,t)},writeBytesField:function(e,t){this.writeTag(e,Sl.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Sl.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Sl.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Sl.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Sl.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Sl.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Sl.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Sl.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Sl.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Sl.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};class Yl{constructor(e,{pixelRatio:t,version:i,stretchX:a,stretchY:s,content:o}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=a,this.stretchY=s,this.content=o,this.version=i}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class eu{constructor(e,t){const i={},a={};this.haveRenderCallbacks=[];const s=[];this.addImages(e,i,s),this.addImages(t,a,s);const{w:o,h:r}=Jl(s),n=new Hr({width:o||1,height:r||1});for(const t in e){const a=e[t],s=i[t].paddedRect;Hr.copy(a.data,n,{x:0,y:0},{x:s.x+1,y:s.y+1},a.data)}for(const e in t){const i=t[e],s=a[e].paddedRect,o=s.x+1,r=s.y+1,l=i.data.width,u=i.data.height;Hr.copy(i.data,n,{x:0,y:0},{x:o,y:r},i.data),Hr.copy(i.data,n,{x:0,y:u-1},{x:o,y:r-1},{width:l,height:1}),Hr.copy(i.data,n,{x:0,y:0},{x:o,y:r+u},{width:l,height:1}),Hr.copy(i.data,n,{x:l-1,y:0},{x:o-1,y:r},{width:1,height:u}),Hr.copy(i.data,n,{x:0,y:0},{x:o+l,y:r},{width:1,height:u})}this.image=n,this.iconPositions=i,this.patternPositions=a}addImages(e,t,i){for(const a in e){const s=e[a],o={x:0,y:0,w:s.data.width+2,h:s.data.height+2};i.push(o),t[a]=new Yl(o,s),s.hasRenderCallback&&this.haveRenderCallbacks.push(a)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const i in e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)}patchUpdatedImage(e,t,i){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[a,s]=e.tl;i.update(t.data,void 0,{x:a,y:s})}}Qa("ImagePosition",Yl),Qa("ImageAtlas",eu);const tu={horizontal:1,vertical:2,horizontalOnly:3};class iu{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const i=new iu;return i.scale=e||1,i.fontStack=t,i}static forImage(e){const t=new iu;return t.imageName=e,t}}class au{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const i=new au;for(let a=0;a<e.sections.length;a++){const s=e.sections[a];s.image?i.addImageSection(s):i.addTextSection(s,t)}return i}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let t="";for(let i=0;i<e.length;i++){const a=e.charCodeAt(i+1)||null,s=e.charCodeAt(i-1)||null;t+=a&&as(a)&&!Pl[e[i+1]]||s&&as(s)&&!Pl[e[i-1]]||!Pl[e[i]]?e[i]:Pl[e[i]]}return t}(this.text)}trim(){let e=0;for(let t=0;t<this.text.length&&ou[this.text.charCodeAt(t)];t++)e++;let t=this.text.length;for(let i=this.text.length-1;i>=0&&i>=e&&ou[this.text.charCodeAt(i)];i--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const i=new au;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,t)=>Math.max(e,this.sections[t].scale),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(iu.forText(e.scale,e.fontStack||t));const i=this.sections.length-1;for(let t=0;t<e.text.length;++t)this.sectionIndex.push(i)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void M("Can't add FormattedSection with an empty image.");const i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(iu.forImage(t)),this.sectionIndex.push(this.sections.length-1)):M("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function su(e,t,i,a,s,o,r,n,l,u,c,g,f,d,h,p){const m=au.fromFeature(e,s);let y;g===tu.vertical&&m.verticalizePunctuation();const{processBidirectionalText:_,processStyledBidirectionalText:b}=ps;if(_&&1===m.sections.length){y=[];const e=_(m.toString(),gu(m,u,o,t,a,d,h));for(const t of e){const e=new au;e.text=t,e.sections=m.sections;for(let i=0;i<t.length;i++)e.sectionIndex.push(0);y.push(e)}}else if(b){y=[];const e=b(m.text,m.sectionIndex,gu(m,u,o,t,a,d,h));for(const t of e){const e=new au;e.text=t[0],e.sectionIndex=t[1],e.sections=m.sections,y.push(e)}}else y=function(e,t){const i=[],a=e.text;let s=0;for(const a of t)i.push(e.substring(s,a)),s=a;return s<a.length&&i.push(e.substring(s,a.length)),i}(m,gu(m,u,o,t,a,d,h));const v=[],x={positionedLines:v,text:m.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:g,iconsInText:!1,verticalizable:!1};return function(e,t,i,a,s,o,r,n,l,u,c,g){let f=0,d=-17,h=0,p=0;const m="right"===n?1:"left"===n?0:.5;let y=0;for(const r of s){r.trim();const s=r.getMaxScale(),n=24*(s-1),b={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=b;const v=b.positionedGlyphs;let x=0;if(!r.length()){d+=o,++y;continue}for(let o=0;o<r.length();o++){const h=r.getSection(o),p=r.getSectionIndex(o),m=r.getCharCode(o);let y=0,b=null,C=null,q=null,U=24;const w=!(l===tu.horizontal||!c&&!is(m)||c&&(ou[m]||(_=m,Ja.Arabic(_)||Ja["Arabic Supplement"](_)||Ja["Arabic Extended-A"](_)||Ja["Arabic Presentation Forms-A"](_)||Ja["Arabic Presentation Forms-B"](_))));if(h.imageName){const t=a[h.imageName];if(!t)continue;q=h.imageName,e.iconsInText=e.iconsInText||!0,C=t.paddedRect;const i=t.displaySize;h.scale=24*h.scale/g,b={width:i[0],height:i[1],left:1,top:-3,advance:w?i[1]:i[0]},y=n+(24-i[1]*h.scale),U=b.advance;const o=w?i[0]*h.scale-24*s:i[1]*h.scale-24*s;o>0&&o>x&&(x=o)}else{const e=i[h.fontStack],a=e&&e[m];if(a&&a.rect)C=a.rect,b=a.metrics;else{const e=t[h.fontStack],i=e&&e[m];if(!i)continue;b=i.metrics}y=24*(s-h.scale)}w?(e.verticalizable=!0,v.push({glyph:m,imageName:q,x:f,y:d+y,vertical:w,scale:h.scale,fontStack:h.fontStack,sectionIndex:p,metrics:b,rect:C}),f+=U*h.scale+u):(v.push({glyph:m,imageName:q,x:f,y:d+y,vertical:w,scale:h.scale,fontStack:h.fontStack,sectionIndex:p,metrics:b,rect:C}),f+=b.advance*h.scale+u)}0!==v.length&&(h=Math.max(f-u,h),du(v,0,v.length-1,m,x)),f=0;const C=o*s+x;b.lineOffset=Math.max(x,n),d+=C,p=Math.max(C,p),++y}var _;const b=d- -17,{horizontalAlign:v,verticalAlign:x}=fu(r);(function(e,t,i,a,s,o,r,n,l){const u=(t-i)*s;let c=0;c=o!==r?-n*a- -17:(-a*l+.5)*r;for(const t of e)for(const e of t.positionedGlyphs)e.x+=u,e.y+=c})(e.positionedLines,m,v,x,h,p,o,b,s.length),e.top+=-x*b,e.bottom=e.top+b,e.left+=-v*h,e.right=e.left+h}(x,t,i,a,y,r,n,l,g,u,f,p),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(v)&&x}const ou={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ru={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function nu(e,t,i,a,s,o){if(t.imageName){const e=a[t.imageName];return e?e.displaySize[0]*t.scale*24/o+s:0}{const a=i[t.fontStack],o=a&&a[e];return o?o.metrics.advance*t.scale+s:0}}function lu(e,t,i,a){const s=Math.pow(e-t,2);return a?e<t?s/2:2*s:s+Math.abs(i)*i}function uu(e,t,i){let a=0;return 10===e&&(a-=1e4),i&&(a+=150),40!==e&&65288!==e||(a+=50),41!==t&&65289!==t||(a+=50),a}function cu(e,t,i,a,s,o){let r=null,n=lu(t,i,s,o);for(const e of a){const a=lu(t-e.x,i,s,o)+e.badness;a<=n&&(r=e,n=a)}return{index:e,x:t,priorBreak:r,badness:n}}function gu(e,t,i,a,s,o,r){if("point"!==o)return[];if(!e)return[];const n=[],l=function(e,t,i,a,s,o){let r=0;for(let i=0;i<e.length();i++){const n=e.getSection(i);r+=nu(e.getCharCode(i),n,a,s,t,o)}return r/Math.max(1,Math.ceil(r/i))}(e,t,i,a,s,r),u=e.text.indexOf("​")>=0;let c=0;for(let i=0;i<e.length();i++){const o=e.getSection(i),f=e.getCharCode(i);if(ou[f]||(c+=nu(f,o,a,s,t,r)),i<e.length()-1){const t=!((g=f)<11904||!(Ja["Bopomofo Extended"](g)||Ja.Bopomofo(g)||Ja["CJK Compatibility Forms"](g)||Ja["CJK Compatibility Ideographs"](g)||Ja["CJK Compatibility"](g)||Ja["CJK Radicals Supplement"](g)||Ja["CJK Strokes"](g)||Ja["CJK Symbols and Punctuation"](g)||Ja["CJK Unified Ideographs Extension A"](g)||Ja["CJK Unified Ideographs"](g)||Ja["Enclosed CJK Letters and Months"](g)||Ja["Halfwidth and Fullwidth Forms"](g)||Ja.Hiragana(g)||Ja["Ideographic Description Characters"](g)||Ja["Kangxi Radicals"](g)||Ja["Katakana Phonetic Extensions"](g)||Ja.Katakana(g)||Ja["Vertical Forms"](g)||Ja["Yi Radicals"](g)||Ja["Yi Syllables"](g)));(ru[f]||t||o.imageName)&&n.push(cu(i+1,c,l,n,uu(f,e.getCharCode(i+1),t&&u),!1))}}var g;return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(cu(e.length(),c,l,n,0,!0))}function fu(e){let t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function du(e,t,i,a,s){if(!a&&!s)return;const o=e[i],r=(e[i].x+o.metrics.advance*o.scale)*a;for(let a=t;a<=i;a++)e[a].x-=r,e[a].y+=s}function hu(e,t,i){const{horizontalAlign:a,verticalAlign:s}=fu(i),o=t[0]-e.displaySize[0]*a,r=t[1]-e.displaySize[1]*s;return{image:e,top:r,bottom:r+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function pu(e,t,i,a,s,o){const r=e.image;let n;if(r.content){const e=r.content,t=r.pixelRatio||1;n=[e[0]/t,e[1]/t,r.displaySize[0]-e[2]/t,r.displaySize[1]-e[3]/t]}const l=t.left*o,u=t.right*o;let c,g,f,d;"width"===i||"both"===i?(d=s[0]+l-a[3],g=s[0]+u+a[1]):(d=s[0]+(l+u-r.displaySize[0])/2,g=d+r.displaySize[0]);const h=t.top*o,p=t.bottom*o;return"height"===i||"both"===i?(c=s[1]+h-a[0],f=s[1]+p+a[2]):(c=s[1]+(h+p-r.displaySize[1])/2,f=c+r.displaySize[1]),{image:r,top:c,right:g,bottom:f,left:d,collisionPadding:n}}class mu extends s{constructor(e,t,i,a){super(e,t),this.angle=i,void 0!==a&&(this.segment=a)}clone(){return new mu(this.x,this.y,this.angle,this.segment)}}function yu(e,t,i,a,s){if(void 0===t.segment)return!0;let o=t,r=t.segment+1,n=0;for(;n>-i/2;){if(r--,r<0)return!1;n-=e[r].dist(o),o=e[r]}n+=e[r].dist(e[r+1]),r++;const l=[];let u=0;for(;n<i/2;){const t=e[r],i=e[r+1];if(!i)return!1;let o=e[r-1].angleTo(t)-t.angleTo(i);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:n,angleDelta:o}),u+=o;n-l[0].distance>a;)u-=l.shift().angleDelta;if(u>s)return!1;r++,n+=t.dist(i)}return!0}function _u(e){let t=0;for(let i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function bu(e,t,i){return e?.6*t*i:0}function vu(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function xu(e,t,i,a,s,o){const r=bu(i,s,o),n=vu(i,a)*o;let l=0;const u=_u(e)/2;for(let i=0;i<e.length-1;i++){const a=e[i],s=e[i+1],o=a.dist(s);if(l+o>u){const c=(u-l)/o,g=Yt(a.x,s.x,c),f=Yt(a.y,s.y,c),d=new mu(g,f,s.angleTo(a),i);return d._round(),!r||yu(e,d,n,r,t)?d:void 0}l+=o}}function Cu(e,t,i,a,s,o,r,n,l){const u=bu(a,o,r),c=vu(a,s),g=c*r,f=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-g<t/4&&(t=g+t/4),function e(t,i,a,s,o,r,n,l,u){const c=r/2,g=_u(t);let f=0,d=i-a,h=[];for(let e=0;e<t.length-1;e++){const i=t[e],n=t[e+1],l=i.dist(n),p=n.angleTo(i);for(;d+a<f+l;){d+=a;const m=(d-f)/l,y=Yt(i.x,n.x,m),_=Yt(i.y,n.y,m);if(y>=0&&y<u&&_>=0&&_<u&&d-c>=0&&d+c<=g){const i=new mu(y,_,p,e);i._round(),s&&!yu(t,i,r,s,o)||h.push(i)}}f+=l}return l||h.length||n||(h=e(t,f/2,a,s,o,r,n,!0,u)),h}(e,f?t/2*n%t:(c/2+2*o)*r*n%t,t,u,i,g,f,!1,l)}function qu(e,t,i,a,o){const r=[];for(let n=0;n<e.length;n++){const l=e[n];let u;for(let e=0;e<l.length-1;e++){let n=l[e],c=l[e+1];n.x<t&&c.x<t||(n.x<t?n=new s(t,n.y+(t-n.x)/(c.x-n.x)*(c.y-n.y))._round():c.x<t&&(c=new s(t,n.y+(t-n.x)/(c.x-n.x)*(c.y-n.y))._round()),n.y<i&&c.y<i||(n.y<i?n=new s(n.x+(i-n.y)/(c.y-n.y)*(c.x-n.x),i)._round():c.y<i&&(c=new s(n.x+(i-n.y)/(c.y-n.y)*(c.x-n.x),i)._round()),n.x>=a&&c.x>=a||(n.x>=a?n=new s(a,n.y+(a-n.x)/(c.x-n.x)*(c.y-n.y))._round():c.x>=a&&(c=new s(a,n.y+(a-n.x)/(c.x-n.x)*(c.y-n.y))._round()),n.y>=o&&c.y>=o||(n.y>=o?n=new s(n.x+(o-n.y)/(c.y-n.y)*(c.x-n.x),o)._round():c.y>=o&&(c=new s(n.x+(o-n.y)/(c.y-n.y)*(c.x-n.x),o)._round()),u&&n.equals(u[u.length-1])||(u=[n],r.push(u)),u.push(c)))))}}return r}function Uu(e,t,i,a){const o=[],r=e.image,n=r.pixelRatio,l=r.paddedRect.w-2,u=r.paddedRect.h-2,c=e.right-e.left,g=e.bottom-e.top,f=r.stretchX||[[0,l]],d=r.stretchY||[[0,u]],h=(e,t)=>e+t[1]-t[0],p=f.reduce(h,0),m=d.reduce(h,0),y=l-p,_=u-m;let b=0,v=p,x=0,C=m,q=0,U=y,w=0,E=_;if(r.content&&a){const e=r.content;b=wu(f,0,e[0]),x=wu(d,0,e[1]),v=wu(f,e[0],e[2]),C=wu(d,e[1],e[3]),q=e[0]-b,w=e[1]-x,U=e[2]-e[0]-v,E=e[3]-e[1]-C}const B=(a,o,l,u)=>{const f=Bu(a.stretch-b,v,c,e.left),d=Pu(a.fixed-q,U,a.stretch,p),h=Bu(o.stretch-x,C,g,e.top),y=Pu(o.fixed-w,E,o.stretch,m),_=Bu(l.stretch-b,v,c,e.left),B=Pu(l.fixed-q,U,l.stretch,p),P=Bu(u.stretch-x,C,g,e.top),M=Pu(u.fixed-w,E,u.stretch,m),T=new s(f,h),A=new s(_,h),S=new s(_,P),I=new s(f,P),D=new s(d/n,y/n),z=new s(B/n,M/n),k=t*Math.PI/180;if(k){const e=Math.sin(k),t=Math.cos(k),i=[t,-e,e,t];T._matMult(i),A._matMult(i),I._matMult(i),S._matMult(i)}const F=a.stretch+a.fixed,L=o.stretch+o.fixed;return{tl:T,tr:A,bl:I,br:S,tex:{x:r.paddedRect.x+1+F,y:r.paddedRect.y+1+L,w:l.stretch+l.fixed-F,h:u.stretch+u.fixed-L},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:z,minFontScaleX:U/n/c,minFontScaleY:E/n/g,isSDF:i}};if(a&&(r.stretchX||r.stretchY)){const e=Eu(f,y,p),t=Eu(d,_,m);for(let i=0;i<e.length-1;i++){const a=e[i],s=e[i+1];for(let e=0;e<t.length-1;e++)o.push(B(a,t[e],s,t[e+1]))}}else o.push(B({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:u+1}));return o}function wu(e,t,i){let a=0;for(const s of e)a+=Math.max(t,Math.min(i,s[1]))-Math.max(t,Math.min(i,s[0]));return a}function Eu(e,t,i){const a=[{fixed:-1,stretch:0}];for(const[t,i]of e){const e=a[a.length-1];a.push({fixed:t-e.stretch,stretch:e.stretch}),a.push({fixed:t-e.stretch,stretch:e.stretch+(i-t)})}return a.push({fixed:t+1,stretch:i}),a}function Bu(e,t,i,a){return e/t*i+a}function Pu(e,t,i,a){return e-t*i/a}Qa("Anchor",mu);class Mu{constructor(e=[],t=Tu){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,a=t[e];for(;e>0;){const s=e-1>>1,o=t[s];if(i(a,o)>=0)break;t[e]=o,e=s}t[e]=a}_down(e){const{data:t,compare:i}=this,a=this.length>>1,s=t[e];for(;e<a;){let a=1+(e<<1),o=t[a];const r=a+1;if(r<this.length&&i(t[r],o)<0&&(a=r,o=t[r]),i(o,s)>=0)break;t[e]=o,e=a}t[e]=s}}function Tu(e,t){return e<t?-1:e>t?1:0}function Au(e,t=1,i=!1){let a=1/0,o=1/0,r=-1/0,n=-1/0;const l=e[0];for(let e=0;e<l.length;e++){const t=l[e];(!e||t.x<a)&&(a=t.x),(!e||t.y<o)&&(o=t.y),(!e||t.x>r)&&(r=t.x),(!e||t.y>n)&&(n=t.y)}const u=Math.min(r-a,n-o);let c=u/2;const g=new Mu([],Su);if(0===u)return new s(a,o);for(let t=a;t<r;t+=u)for(let i=o;i<n;i+=u)g.push(new Iu(t+c,i+c,c,e));let f=function(e){let t=0,i=0,a=0;const s=e[0];for(let e=0,o=s.length,r=o-1;e<o;r=e++){const o=s[e],n=s[r],l=o.x*n.y-n.x*o.y;i+=(o.x+n.x)*l,a+=(o.y+n.y)*l,t+=3*l}return new Iu(i/t,a/t,0,e)}(e),d=g.length;for(;g.length;){const a=g.pop();(a.d>f.d||!f.d)&&(f=a,i&&console.log("found best %d after %d probes",Math.round(1e4*a.d)/1e4,d)),a.max-f.d<=t||(c=a.h/2,g.push(new Iu(a.p.x-c,a.p.y-c,c,e)),g.push(new Iu(a.p.x+c,a.p.y-c,c,e)),g.push(new Iu(a.p.x-c,a.p.y+c,c,e)),g.push(new Iu(a.p.x+c,a.p.y+c,c,e)),d+=4)}return i&&(console.log("num probes: "+d),console.log("best distance: "+f.d)),f.p}function Su(e,t){return t.max-e.max}function Iu(e,t,i,a){this.p=new s(e,t),this.h=i,this.d=function(e,t){let i=!1,a=1/0;for(let s=0;s<t.length;s++){const o=t[s];for(let t=0,s=o.length,r=s-1;t<s;r=t++){const s=o[t],n=o[r];s.y>e.y!=n.y>e.y&&e.x<(n.x-s.x)*(e.y-s.y)/(n.y-s.y)+s.x&&(i=!i),a=Math.min(a,ir(e,s,n))}}return(i?1:-1)*Math.sqrt(a)}(this.p,a),this.max=this.d+this.h*Math.SQRT2}const Du=Number.POSITIVE_INFINITY;function zu(e,t){return t[1]!==Du?function(e,t,i){let a=0,s=0;switch(t=Math.abs(t),i=Math.abs(i),e){case"top-right":case"top-left":case"top":s=i-7;break;case"bottom-right":case"bottom-left":case"bottom":s=7-i}switch(e){case"top-right":case"bottom-right":case"right":a=-t;break;case"top-left":case"bottom-left":case"left":a=t}return[a,s]}(e,t[0],t[1]):function(e,t){let i=0,a=0;t<0&&(t=0);const s=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":a=s-7;break;case"bottom-right":case"bottom-left":a=7-s;break;case"bottom":a=7-t;break;case"top":a=t-7}switch(e){case"top-right":case"bottom-right":i=-s;break;case"top-left":case"bottom-left":i=s;break;case"left":i=t;break;case"right":i=-t}return[i,a]}(e,t[0])}function ku(e,t,i,a,s,o,r,n){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const l=e.layers[0].layout,u=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:i}=e.textSizeData;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new ms(t),r),u["text-size"].possiblyEvaluate(new ms(i),r)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:i}=e.iconSizeData;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new ms(t),r),u["icon-size"].possiblyEvaluate(new ms(i),r)]}c.layoutTextSize=u["text-size"].possiblyEvaluate(new ms(n+1),r),c.layoutIconSize=u["icon-size"].possiblyEvaluate(new ms(n+1),r),c.textMaxSize=u["text-size"].possiblyEvaluate(new ms(18),r);const g=24*l.get("text-line-height"),f="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),d=l.get("text-keep-upright"),h=l.get("text-size");for(const o of e.features){const n=l.get("text-font").evaluate(o,{},r).join(","),u=h.evaluate(o,{},r),p=c.layoutTextSize.evaluate(o,{},r),m=(c.layoutIconSize.evaluate(o,{},r),{horizontal:{},vertical:void 0}),y=o.text;let _,b=[0,0];if(y){const a=y.toString(),c=24*l.get("text-letter-spacing").evaluate(o,{},r),h=es(a)?c:0,_=l.get("text-anchor").evaluate(o,{},r),v=l.get("text-variable-anchor");if(!v){const e=l.get("text-radial-offset").evaluate(o,{},r);b=e?zu(_,[24*e,Du]):l.get("text-offset").evaluate(o,{},r).map(e=>24*e)}let x=f?"center":l.get("text-justify").evaluate(o,{},r);const C=l.get("symbol-placement"),q="point"===C?24*l.get("text-max-width").evaluate(o,{},r):0,U=()=>{e.allowVerticalPlacement&&Ya(a)&&(m.vertical=su(y,t,i,s,n,q,g,_,"left",h,b,tu.vertical,!0,C,p,u))};if(!f&&v){const e="auto"===x?v.map(e=>Fu(e)):[x];let a=!1;for(let o=0;o<e.length;o++){const r=e[o];if(!m.horizontal[r])if(a)m.horizontal[r]=m.horizontal[0];else{const e=su(y,t,i,s,n,q,g,"center",r,h,b,tu.horizontal,!1,C,p,u);e&&(m.horizontal[r]=e,a=1===e.positionedLines.length)}}U()}else{"auto"===x&&(x=Fu(_));const e=su(y,t,i,s,n,q,g,_,x,h,b,tu.horizontal,!1,C,p,u);e&&(m.horizontal[x]=e),U(),Ya(a)&&f&&d&&(m.vertical=su(y,t,i,s,n,q,g,_,x,h,b,tu.vertical,!1,C,p,u))}}let v=!1;if(o.icon&&o.icon.name){const t=a[o.icon.name];t&&(_=hu(s[o.icon.name],l.get("icon-offset").evaluate(o,{},r),l.get("icon-anchor").evaluate(o,{},r)),v=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&M("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==l.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const x=Ru(m.horizontal)||m.vertical;e.iconsInText=!!x&&x.iconsInText,(x||_)&&Lu(e,o,m,_,a,c,p,0,b,v,r)}o&&e.generateCollisionDebugBuffers(n,e.collisionBoxArray)}function Fu(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Lu(e,t,i,a,s,o,r,n,l,u,c){let f=o.textMaxSize.evaluate(t,{},c);void 0===f&&(f=r);const d=e.layers[0].layout,h=d.get("icon-offset").evaluate(t,{},c),p=Ru(i.horizontal),m=r/24,y=e.tilePixelRatio*m,_=e.tilePixelRatio*f/24,b=e.tilePixelRatio*d.get("symbol-spacing"),v=d.get("text-padding")*e.tilePixelRatio,x=d.get("icon-padding")*e.tilePixelRatio,C=g(d.get("text-max-angle")),q="map"===d.get("text-rotation-alignment")&&"point"!==d.get("symbol-placement"),U="map"===d.get("icon-rotation-alignment")&&"point"!==d.get("symbol-placement"),w=d.get("symbol-placement"),E=b/2,B=d.get("icon-text-fit");let P;a&&"none"!==B&&(e.allowVerticalPlacement&&i.vertical&&(P=pu(a,i.vertical,B,d.get("icon-text-fit-padding"),h,m)),p&&(a=pu(a,p,B,d.get("icon-text-fit-padding"),h,m)));const T=(n,g)=>{g.x<0||g.x>=8192||g.y<0||g.y>=8192||function(e,t,i,a,s,o,r,n,l,u,c,g,f,d,h,p,m,y,_,b,v,x,C,q,U){const w=e.addToLineVertexArray(t,i);let E,B,P,T,A,S,I,D=0,z=0,k=0,F=0,L=-1,O=-1;const R={};let N=_o(""),$=0,G=0;if(void 0===n._unevaluatedLayout.getValue("text-radial-offset")?[$,G]=n.layout.get("text-offset").evaluate(v,{},q).map(e=>24*e):($=24*n.layout.get("text-radial-offset").evaluate(v,{},q),G=Du),e.allowVerticalPlacement&&a.vertical){const e=a.vertical;if(h)S=$u(e),r&&(I=$u(r));else{const i=n.layout.get("text-rotate").evaluate(v,{},q)+90;P=Nu(l,t,u,c,g,e,0,d,i),r&&(T=Nu(l,t,u,c,g,r,0,y,i))}}if(s){const i=n.layout.get("icon-rotate").evaluate(v,{},q),a="none"!==n.layout.get("icon-text-fit"),o=Uu(s,i,C,a),f=r?Uu(r,i,C,a):void 0;B=Nu(l,t,u,c,g,s,0,y,i),D=4*o.length;const d=e.iconSizeData;let h=null;"source"===d.kind?(h=[128*n.layout.get("icon-size").evaluate(v,{},q)],h[0]>32640&&M(e.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".')):"composite"===d.kind&&(h=[128*x.compositeIconSizes[0].evaluate(v,{},q),128*x.compositeIconSizes[1].evaluate(v,{},q)],(h[0]>32640||h[1]>32640)&&M(e.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".')),e.addSymbols(e.icon,o,h,b,_,v,!1,t,w.lineStartIndex,w.lineLength,-1,q),L=e.icon.placedSymbolArray.length-1,f&&(z=4*f.length,e.addSymbols(e.icon,f,h,b,_,v,tu.vertical,t,w.lineStartIndex,w.lineLength,-1,q),O=e.icon.placedSymbolArray.length-1)}for(const i in a.horizontal){const s=a.horizontal[i];E||(N=_o(s.text),h?A=$u(s):E=Nu(l,t,u,c,g,s,0,d,n.layout.get("text-rotate").evaluate(v,{},q)));const r=1===s.positionedLines.length;if(k+=Ou(e,t,s,o,n,h,v,p,w,a.vertical?tu.horizontal:tu.horizontalOnly,r?Object.keys(a.horizontal):[i],R,L,x,q),r)break}a.vertical&&(F+=Ou(e,t,a.vertical,o,n,h,v,p,w,tu.vertical,["vertical"],R,O,x,q));let V=-1;const Z=(e,t)=>e?Math.max(e,t):t;V=Z(A,V),V=Z(S,V),V=Z(I,V);const Q=V>-1?1:0;Q&&(V*=U/24),e.glyphOffsetArray.length>=Ku.MAX_GLYPHS&&M("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==v.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,v.sortKey),e.symbolInstances.emplaceBack(t.x,t.y,R.right>=0?R.right:-1,R.center>=0?R.center:-1,R.left>=0?R.left:-1,R.vertical||-1,L,O,N,void 0!==E?E:e.collisionBoxArray.length,void 0!==E?E+1:e.collisionBoxArray.length,void 0!==P?P:e.collisionBoxArray.length,void 0!==P?P+1:e.collisionBoxArray.length,void 0!==B?B:e.collisionBoxArray.length,void 0!==B?B+1:e.collisionBoxArray.length,T||e.collisionBoxArray.length,T?T+1:e.collisionBoxArray.length,u,k,F,D,z,Q,0,f,$,G,V)}(e,g,n,i,a,s,P,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,y,v,q,l,0,x,U,h,t,o,u,c,r)};if("line"===w)for(const s of qu(t.geometry,0,0,8192,8192)){const t=Cu(s,b,C,i.vertical||p,a,24,_,e.overscaling,8192);for(const i of t){const t=p;t&&Gu(e,t.text,E,i)||T(s,i)}}else if("line-center"===w){for(const e of t.geometry)if(e.length>1){const t=xu(e,C,i.vertical||p,a,24,_);t&&T(e,t)}}else if("Polygon"===t.type)for(const e of Sn(t.geometry,0)){const t=Au(e,16);T(e[0],new mu(t.x,t.y,0))}else if("LineString"===t.type)for(const e of t.geometry)T(e,new mu(e[0].x,e[0].y,0));else if("Point"===t.type)for(const e of t.geometry)for(const t of e)T([t],new mu(t.x,t.y,0))}function Ou(e,t,i,a,o,r,n,l,u,c,g,f,d,h,p){const m=function(e,t,i,a,o,r,n,l){const u=a.layout.get("text-rotate").evaluate(r,{})*Math.PI/180,c=[];for(const e of t.positionedLines)for(const a of e.positionedGlyphs){if(!a.rect)continue;const r=a.rect||{};let g=4,f=!0,d=1,h=0;const p=(o||l)&&a.vertical,m=a.metrics.advance*a.scale/2;if(l&&t.verticalizable){const t=24*(a.scale-1),i=(24-a.metrics.width*a.scale)/2;h=e.lineOffset/2-(a.imageName?-i:t)}if(a.imageName){const e=n[a.imageName];f=e.sdf,d=e.pixelRatio,g=1/d}const y=o?[a.x+m,a.y]:[0,0];let _=o?[0,0]:[a.x+m+i[0],a.y+i[1]-h],b=[0,0];p&&(b=_,_=[0,0]);const v=(a.metrics.left-g)*a.scale-m+_[0],x=(-a.metrics.top-g)*a.scale+_[1],C=v+r.w*a.scale/d,q=x+r.h*a.scale/d,U=new s(v,x),w=new s(C,x),E=new s(v,q),B=new s(C,q);if(p){const e=new s(-m,m- -17),t=-Math.PI/2,i=12-m,o=new s(22-i,-(a.imageName?i:0)),r=new s(...b);U._rotateAround(t,e)._add(o)._add(r),w._rotateAround(t,e)._add(o)._add(r),E._rotateAround(t,e)._add(o)._add(r),B._rotateAround(t,e)._add(o)._add(r)}if(u){const e=Math.sin(u),t=Math.cos(u),i=[t,-e,e,t];U._matMult(i),w._matMult(i),E._matMult(i),B._matMult(i)}const P=new s(0,0),M=new s(0,0);c.push({tl:U,tr:w,bl:E,br:B,tex:r,writingMode:t.writingMode,glyphOffset:y,sectionIndex:a.sectionIndex,isSDF:f,pixelOffsetTL:P,pixelOffsetBR:M,minFontScaleX:0,minFontScaleY:0})}return c}(0,i,l,o,r,n,a,e.allowVerticalPlacement),y=e.textSizeData;let _=null;"source"===y.kind?(_=[128*o.layout.get("text-size").evaluate(n,{},p)],_[0]>32640&&M(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".')):"composite"===y.kind&&(_=[128*h.compositeTextSizes[0].evaluate(n,{},p),128*h.compositeTextSizes[1].evaluate(n,{},p)],(_[0]>32640||_[1]>32640)&&M(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".')),e.addSymbols(e.text,m,_,l,r,n,c,t,u.lineStartIndex,u.lineLength,d,p);for(const t of g)f[t]=e.text.placedSymbolArray.length-1;return 4*m.length}function Ru(e){for(const t in e)return e[t];return null}function Nu(e,t,i,a,o,r,n,l,u){let c=r.top,f=r.bottom,d=r.left,h=r.right;const p=r.collisionPadding;if(p&&(d-=p[0],c-=p[1],h+=p[2],f+=p[3]),u){const e=new s(d,c),t=new s(h,c),i=new s(d,f),a=new s(h,f),o=g(u);e._rotate(o),t._rotate(o),i._rotate(o),a._rotate(o),d=Math.min(e.x,t.x,i.x,a.x),h=Math.max(e.x,t.x,i.x,a.x),c=Math.min(e.y,t.y,i.y,a.y),f=Math.max(e.y,t.y,i.y,a.y)}return e.emplaceBack(t.x,t.y,d,c,h,f,l,i,a,o),e.length-1}function $u(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Gu(e,t,i,a){const s=e.compareText;if(t in s){const e=s[t];for(let t=e.length-1;t>=0;t--)if(a.dist(e[t])<i)return!0}else s[t]=[];return s[t].push(a),!1}const Vu=Wn.VectorTileFeature.types,Zu=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Qu(e,t,i,a,s,o,r,n,l,u,c,g,f){const d=n?Math.min(32640,Math.round(n[0])):0,h=n?Math.min(32640,Math.round(n[1])):0;e.emplaceBack(t,i,Math.round(32*a),Math.round(32*s),o,r,(d<<1)+(l?1:0),h,16*u,16*c,256*g,256*f)}function ju(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function Hu(e){for(const t of e.sections)if(rs(t.text))return!0;return!1}class Xu{constructor(e){this.layoutVertexArray=new $s,this.indexArray=new Xs,this.programConfigurations=e,this.segments=new $o,this.dynamicLayoutVertexArray=new Gs,this.opacityVertexArray=new Vs,this.placedSymbolArray=new no}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,i,a){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,yl.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,_l.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,Zu,!0),this.opacityVertexBuffer.itemSize=1),(i||a)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Qa("SymbolBuffers",Xu);class Wu{constructor(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new $o,this.collisionVertexArray=new Hs,this.collisionVertexArrayExt=new Gs}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,bl.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,vl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Qa("CollisionBuffers",Wu);class Ku{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=pr([]),this.placementViewportMatrix=pr([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ql(this.zoom,t["text-size"]),this.iconSizeData=ql(this.zoom,t["icon-size"]);const i=this.layers[0].layout,a=i.get("symbol-sort-key"),s=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==s&&void 0!==a.constantOr(1),this.sortFeaturesByY=("viewport-y"===s||"auto"===s&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map(e=>tu[e])),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.sourceID=e.sourceID}createArrays(){this.text=new Xu(new ko(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Xu(new ko(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new co,this.lineVertexArray=new go,this.symbolInstances=new uo}calculateGlyphDependencies(e,t,i,a,s){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,(i||a)&&s){const i=Pl[e.charAt(o)];i&&(t[i.charCodeAt(0)]=!0)}}populate(e,t,i){const a=this.layers[0],s=a.layout,o=s.get("text-font"),r=s.get("text-field"),n=s.get("icon-image"),l=("constant"!==r.value.kind||r.value.value instanceof ft&&!r.value.value.isEmpty()||r.value.value.toString().length>0)&&("constant"!==o.value.kind||o.value.value.length>0),u="constant"!==n.value.kind||!!n.value.value||Object.keys(n.parameters).length>0,c=s.get("symbol-sort-key");if(this.features=[],!l&&!u)return;const g=t.iconDependencies,f=t.glyphDependencies,d=t.availableImages,h=new ms(this.zoom);for(const{feature:t,id:r,index:n,sourceLayerIndex:p}of e){const e=a._featureFilter.needGeometry,m=Qo(t,e);if(!a._featureFilter.filter(h,m,i))continue;let y,_;if(e||(m.geometry=Zo(t)),l){const e=a.getValueAndResolveTokens("text-field",m,i,d),t=ft.factory(e);Hu(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ds()||this.hasRTLText&&ps.isParsed())&&(y=Bl(t,a,m))}if(u){const e=a.getValueAndResolveTokens("icon-image",m,i,d);_=e instanceof dt?e:dt.fromString(e)}if(!y&&!_)continue;const b=this.sortFeaturesByKey?c.evaluate(m,{},i):void 0;if(this.features.push({id:r,text:y,icon:_,index:n,sourceLayerIndex:p,geometry:m.geometry,properties:t.properties,type:Vu[t.type],sortKey:b}),_&&(g[_.name]=!0),y){const e=o.evaluate(m,{},i).join(","),t="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(tu.vertical)>=0;for(const i of y.sections)if(i.image)g[i.image.name]=!0;else{const a=Ya(y.toString()),s=i.fontStack||e,o=f[s]=f[s]||{};this.calculateGlyphDependencies(i.text,o,t,this.allowVerticalPlacement,a)}}}"line"===s.get("symbol-placement")&&(this.features=function(e){const t={},i={},a=[];let s=0;function o(t){a.push(e[t]),s++}function r(e,t,s){const o=i[e];return delete i[e],i[t]=o,a[o].geometry[0].pop(),a[o].geometry[0]=a[o].geometry[0].concat(s[0]),o}function n(e,i,s){const o=t[i];return delete t[i],t[e]=o,a[o].geometry[0].shift(),a[o].geometry[0]=s[0].concat(a[o].geometry[0]),o}function l(e,t,i){const a=i?t[0][t[0].length-1]:t[0][0];return`${e}:${a.x}:${a.y}`}for(let u=0;u<e.length;u++){const c=e[u],g=c.geometry,f=c.text?c.text.toString():null;if(!f){o(u);continue}const d=l(f,g),h=l(f,g,!0);if(d in i&&h in t&&i[d]!==t[h]){const e=n(d,h,g),s=r(d,h,a[e].geometry);delete t[d],delete i[h],i[l(f,a[s].geometry,!0)]=s,a[e].geometry=null}else d in i?r(d,h,g):h in t?n(d,h,g):(o(u),t[d]=s-1,i[h]=s-1)}return a.filter(e=>e.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((e,t)=>e.sortKey-t.sortKey)}update(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const i=this.lineVertexArray.length;if(void 0!==e.segment){let i=e.dist(t[e.segment+1]),a=e.dist(t[e.segment]);const s={};for(let a=e.segment+1;a<t.length;a++)s[a]={x:t[a].x,y:t[a].y,tileUnitDistanceFromAnchor:i},a<t.length-1&&(i+=t[a+1].dist(t[a]));for(let i=e.segment||0;i>=0;i--)s[i]={x:t[i].x,y:t[i].y,tileUnitDistanceFromAnchor:a},i>0&&(a+=t[i-1].dist(t[i]));for(let e=0;e<t.length;e++){const t=s[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(e,t,i,a,s,o,r,n,l,u,c,g){const f=e.indexArray,d=e.layoutVertexArray,h=e.segments.prepareSegment(4*t.length,d,f,this.canOverlap?o.sortKey:void 0),p=this.glyphOffsetArray.length,m=h.vertexLength,y=this.allowVerticalPlacement&&r===tu.vertical?Math.PI/2:0,_=o.text&&o.text.sections;for(let a=0;a<t.length;a++){const{tl:s,tr:r,bl:l,br:u,tex:c,pixelOffsetTL:p,pixelOffsetBR:m,minFontScaleX:b,minFontScaleY:v,glyphOffset:x,isSDF:C,sectionIndex:q}=t[a],U=h.vertexLength,w=x[1];Qu(d,n.x,n.y,s.x,w+s.y,c.x,c.y,i,C,p.x,p.y,b,v),Qu(d,n.x,n.y,r.x,w+r.y,c.x+c.w,c.y,i,C,m.x,p.y,b,v),Qu(d,n.x,n.y,l.x,w+l.y,c.x,c.y+c.h,i,C,p.x,m.y,b,v),Qu(d,n.x,n.y,u.x,w+u.y,c.x+c.w,c.y+c.h,i,C,m.x,m.y,b,v),ju(e.dynamicLayoutVertexArray,n,y),f.emplaceBack(U,U+1,U+2),f.emplaceBack(U+1,U+2,U+3),h.vertexLength+=4,h.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x[0]),a!==t.length-1&&q===t[a+1].sectionIndex||e.programConfigurations.populatePaintArrays(d.length,o,o.index,{},g,_&&_[q])}e.placedSymbolArray.emplaceBack(n.x,n.y,p,this.glyphOffsetArray.length-p,m,l,u,n.segment,i?i[0]:0,i?i[1]:0,a[0],a[1],r,0,!1,0,c)}_commitLayoutVertex(e,t,i,a,s){e.emplaceBack(t.x,t.y,i,a,Math.round(s.x),Math.round(s.y))}_addCollisionDebugVertices(e,t,i,a,o){const r=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),n=r.vertexLength,l=o.anchorX,u=o.anchorY;for(let e=0;e<4;e++)i.collisionVertexArray.emplaceBack(0,0,0,0);i.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),i.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),i.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),i.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(i.layoutVertexArray,a,l,u,new s(e.x1,e.y1)),this._commitLayoutVertex(i.layoutVertexArray,a,l,u,new s(e.x2,e.y1)),this._commitLayoutVertex(i.layoutVertexArray,a,l,u,new s(e.x2,e.y2)),this._commitLayoutVertex(i.layoutVertexArray,a,l,u,new s(e.x1,e.y2)),r.vertexLength+=4;const c=i.indexArray;c.emplaceBack(n,n+1),c.emplaceBack(n+1,n+2),c.emplaceBack(n+2,n+3),c.emplaceBack(n+3,n),r.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,i,a,s,o){for(let r=a;r<s;r++){const a=i.get(r),s=this.getSymbolInstanceTextSize(e,o,t,r);this._addCollisionDebugVertices(a,s,this.textCollisionBox,a.anchorPoint,o)}}_addIconDebugCollisionBoxes(e,t,i,a,s,o){for(let r=a;r<s;r++){const a=i.get(r),s=this.getSymbolInstanceIconSize(e,t,r);this._addCollisionDebugVertices(a,s,this.iconCollisionBox,a.anchorPoint,o)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Wu(Qs,xl.members,to),this.iconCollisionBox=new Wu(Qs,xl.members,to);const i=wl(this.iconSizeData,e),a=wl(this.textSizeData,e);for(let s=0;s<this.symbolInstances.length;s++){const o=this.symbolInstances.get(s);this._addTextDebugCollisionBoxes(a,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(a,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(i,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(i,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(e,t,i,a){const s=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:a),o=Ul(this.textSizeData,e,s)/24;return this.tilePixelRatio*o}getSymbolInstanceIconSize(e,t,i){const a=this.icon.placedSymbolArray.get(i),s=Ul(this.iconSizeData,e,a);return this.tilePixelRatio*s}_commitDebugCollisionVertexUpdate(e,t,i){e.emplaceBack(t,-i,-i),e.emplaceBack(t,i,-i),e.emplaceBack(t,i,i),e.emplaceBack(t,-i,i)}_updateTextDebugCollisionBoxes(e,t,i,a,s,o){for(let r=a;r<s;r++){const a=i.get(r),s=this.getSymbolInstanceTextSize(e,o,t,r);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,s,a.padding)}}_updateIconDebugCollisionBoxes(e,t,i,a,s){for(let o=a;o<s;o++){const a=i.get(o),s=this.getSymbolInstanceIconSize(e,t,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,s,a.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const i=wl(this.iconSizeData,e),a=wl(this.textSizeData,e);for(let s=0;s<this.symbolInstances.length;s++){const o=this.symbolInstances.get(s);this._updateTextDebugCollisionBoxes(a,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(a,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(i,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(i,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,i,a,s,o,r,n,l){const u={};for(let a=t;a<i;a++){const t=e.get(a);u.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,padding:t.padding,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},u.textFeatureIndex=t.featureIndex;break}for(let t=a;t<s;t++){const i=e.get(t);u.verticalTextBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,padding:i.padding,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},u.verticalTextFeatureIndex=i.featureIndex;break}for(let t=o;t<r;t++){const i=e.get(t);u.iconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,padding:i.padding,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},u.iconFeatureIndex=i.featureIndex;break}for(let t=n;t<l;t++){const i=e.get(t);u.verticalIconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,padding:i.padding,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},u.verticalIconFeatureIndex=i.featureIndex;break}return u}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const i=e.placedSymbolArray.get(t),a=i.vertexStartIndex+4*i.numGlyphs;for(let t=i.vertexStartIndex;t<a;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),i=Math.cos(e),a=[],s=[],o=[];for(let e=0;e<this.symbolInstances.length;++e){o.push(e);const r=this.symbolInstances.get(e);a.push(0|Math.round(t*r.anchorX+i*r.anchorY)),s.push(r.featureIndex)}return o.sort((e,t)=>a[e]-a[t]||s[t]-s[e]),o}addToSortKeyRanges(e,t){const i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach((e,t,i)=>{e>=0&&i.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)}),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Qa("SymbolBucket",Ku,{omit:["layers","collisionBoxArray","features","compareText"]}),Ku.MAX_GLYPHS=65535,Ku.addDynamicAttributes=ju;const Ju=new Ts({"symbol-placement":new ws(Le.layout_symbol["symbol-placement"]),"symbol-spacing":new ws(Le.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new ws(Le.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Es(Le.layout_symbol["symbol-sort-key"]),"symbol-z-order":new ws(Le.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new ws(Le.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new ws(Le.layout_symbol["icon-ignore-placement"]),"icon-optional":new ws(Le.layout_symbol["icon-optional"]),"icon-rotation-alignment":new ws(Le.layout_symbol["icon-rotation-alignment"]),"icon-size":new Es(Le.layout_symbol["icon-size"]),"icon-text-fit":new ws(Le.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new ws(Le.layout_symbol["icon-text-fit-padding"]),"icon-image":new Es(Le.layout_symbol["icon-image"]),"icon-rotate":new Es(Le.layout_symbol["icon-rotate"]),"icon-padding":new ws(Le.layout_symbol["icon-padding"]),"icon-keep-upright":new ws(Le.layout_symbol["icon-keep-upright"]),"icon-offset":new Es(Le.layout_symbol["icon-offset"]),"icon-anchor":new Es(Le.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new ws(Le.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new ws(Le.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new ws(Le.layout_symbol["text-rotation-alignment"]),"text-field":new Es(Le.layout_symbol["text-field"]),"text-font":new Es(Le.layout_symbol["text-font"]),"text-size":new Es(Le.layout_symbol["text-size"]),"text-max-width":new Es(Le.layout_symbol["text-max-width"]),"text-line-height":new ws(Le.layout_symbol["text-line-height"]),"text-letter-spacing":new Es(Le.layout_symbol["text-letter-spacing"]),"text-justify":new Es(Le.layout_symbol["text-justify"]),"text-radial-offset":new Es(Le.layout_symbol["text-radial-offset"]),"text-variable-anchor":new ws(Le.layout_symbol["text-variable-anchor"]),"text-anchor":new Es(Le.layout_symbol["text-anchor"]),"text-max-angle":new ws(Le.layout_symbol["text-max-angle"]),"text-writing-mode":new ws(Le.layout_symbol["text-writing-mode"]),"text-rotate":new Es(Le.layout_symbol["text-rotate"]),"text-padding":new ws(Le.layout_symbol["text-padding"]),"text-keep-upright":new ws(Le.layout_symbol["text-keep-upright"]),"text-transform":new Es(Le.layout_symbol["text-transform"]),"text-offset":new Es(Le.layout_symbol["text-offset"]),"text-allow-overlap":new ws(Le.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new ws(Le.layout_symbol["text-ignore-placement"]),"text-optional":new ws(Le.layout_symbol["text-optional"])});var Yu={paint:new Ts({"icon-opacity":new Es(Le.paint_symbol["icon-opacity"]),"icon-color":new Es(Le.paint_symbol["icon-color"]),"icon-halo-color":new Es(Le.paint_symbol["icon-halo-color"]),"icon-halo-width":new Es(Le.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Es(Le.paint_symbol["icon-halo-blur"]),"icon-translate":new ws(Le.paint_symbol["icon-translate"]),"icon-translate-anchor":new ws(Le.paint_symbol["icon-translate-anchor"]),"text-opacity":new Es(Le.paint_symbol["text-opacity"]),"text-color":new Es(Le.paint_symbol["text-color"],{runtimeType:We,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Es(Le.paint_symbol["text-halo-color"]),"text-halo-width":new Es(Le.paint_symbol["text-halo-width"]),"text-halo-blur":new Es(Le.paint_symbol["text-halo-blur"]),"text-translate":new ws(Le.paint_symbol["text-translate"]),"text-translate-anchor":new ws(Le.paint_symbol["text-translate-anchor"])}),layout:Ju};class ec{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Qe,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Qa("FormatSectionOverride",ec,{omit:["defaultValue"]});class tc extends Oo{constructor(e){super(e,Yu)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const i of e)t.indexOf(i)<0&&t.push(i);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,i,a){const s=this.layout.get(e).evaluate(t,{},i,a),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||Yi(o.value)||!s?s:function(e,t){return t.replace(/{([^{}]+)}/g,(t,i)=>i in e?String(e[i]):"")}(t.properties,s)}createBucket(e){return new Ku(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of Yu.paint.overridableProperties){if(!tc.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),i=new ec(t),a=new Ji(i,t.property.specification);let s=null;s="constant"===t.value.kind||"source"===t.value.kind?new ta("source",a):new ia("composite",a,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new qs(t.property,s,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,i){return!(!this.layout||t.isDataDriven()||i.isDataDriven())&&tc.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const i=e.get("text-field"),a=Yu.paint.properties[t];let s=!1;const o=e=>{for(const t of e)if(a.overrides&&a.overrides.hasOverride(t))return void(s=!0)};if("constant"===i.value.kind&&i.value.value instanceof ft)o(i.value.value.sections);else if("source"===i.value.kind){const e=t=>{s||(t instanceof _t&&mt(t.value)===et?o(t.value.sections):t instanceof Ct?o(t.sections):t.eachChild(e))},t=i.value;t._styleExpression&&e(t._styleExpression.expression)}return s}getProgramConfiguration(e){return new zo(this,e)}}var ic={paint:new Ts({"background-color":new ws(Le.paint_background["background-color"]),"background-pattern":new Ps(Le.paint_background["background-pattern"]),"background-opacity":new ws(Le.paint_background["background-opacity"])})},ac={paint:new Ts({"raster-opacity":new ws(Le.paint_raster["raster-opacity"]),"raster-hue-rotate":new ws(Le.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new ws(Le.paint_raster["raster-brightness-min"]),"raster-brightness-max":new ws(Le.paint_raster["raster-brightness-max"]),"raster-saturation":new ws(Le.paint_raster["raster-saturation"]),"raster-contrast":new ws(Le.paint_raster["raster-contrast"]),"raster-resampling":new ws(Le.paint_raster["raster-resampling"]),"raster-fade-duration":new ws(Le.paint_raster["raster-fade-duration"])})};class sc extends Oo{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var oc={paint:new Ts({"sky-type":new ws(Le.paint_sky["sky-type"]),"sky-atmosphere-sun":new ws(Le.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new ws(Le.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new ws(Le.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new ws(Le.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ms(Le.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new ws(Le.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new ws(Le.paint_sky["sky-atmosphere-color"]),"sky-opacity":new ws(Le.paint_sky["sky-opacity"])})};function rc(e,t,i){const a=xr(0,0,1),s=zr(Dr());return function(e,t,i){i*=.5;var a=t[0],s=t[1],o=t[2],r=t[3],n=Math.sin(i),l=Math.cos(i);e[0]=a*l-o*n,e[1]=s*l+r*n,e[2]=o*l+a*n,e[3]=r*l-s*n}(s,s,i?-g(e)+Math.PI:g(e)),kr(s,s,-g(t)),Mr(a,a,s),Er(a,a)}const nc={circle:class extends Oo{constructor(e){super(e,fr)}createBucket(e){return new Ho(e)}queryRadius(e){const t=e;return nr("circle-radius",this,t)+nr("circle-stroke-width",this,t)+lr(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,i,a,s,o,r,n){const l="map"===this.paint.get("circle-pitch-alignment");if(l&&e.queryGeometry.isAboveHorizon)return!1;const u=cr(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,i)+this.paint.get("circle-stroke-width").evaluate(t,i),g=l?c*e.pixelToTileUnitsFactor:c;for(const t of a)for(const i of t){const t=i.add(u),a=n&&o.elevation?o.elevation.exaggeration()*n.getElevationAt(t.x,t.y,!0):0,s=l?t:Or(t,a,r),c=l?e.tilespaceRays.map(e=>$r(e,a)):e.queryGeometry.screenGeometry;let f=g;const d=Ir([],[i.x,i.y,a,1],r);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?f*=d[3]/o.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(f*=o.cameraToCenterDistance/d[3]),Wo(c,s,f))return!0}return!1}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new zo(this,e)}},heatmap:class extends Oo{createBucket(e){return new Gr(e)}constructor(e){super(e,Xr),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Wr({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new zo(this,e)}},hillshade:class extends Oo{constructor(e){super(e,Kr)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(e){return new zo(this,e)}},fill:class extends Oo{constructor(e){super(e,Ln)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),i=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&i.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),i}getProgramConfiguration(e){return new zo(this,e)}recalculate(e,t){super.recalculate(e,t);const i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new kn(e)}queryRadius(){return lr(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,i,a,s,o){return!e.queryGeometry.isAboveHorizon&&Ko(ur(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),a)}isTileClipped(){return!0}},"fill-extrusion":class extends Oo{constructor(e){super(e,al)}createBucket(e){return new tl(e)}queryRadius(){return lr(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new zo(this,e)}queryIntersectsFeature(e,t,i,a,o,r,n){const l=cr(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),r.angle,e.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(t,i),c=this.paint.get("fill-extrusion-base").evaluate(t,i),g=e.queryGeometry.screenGeometry,f=function(e,t,i,a,o){const r=[],n=[],l=o[8]*t,u=o[9]*t,c=o[10]*t,g=o[11]*t,f=o[8]*i,d=o[9]*i,h=o[10]*i,p=o[11]*i;for(const t of e){const e=[],i=[];for(const r of t){const t=r.x+a.x,n=r.y+a.y,m=o[0]*t+o[4]*n+o[12],y=o[1]*t+o[5]*n+o[13],_=o[2]*t+o[6]*n+o[14],b=o[3]*t+o[7]*n+o[15],v=_+c,x=b+g,C=m+f,q=y+d,U=_+h,w=b+p,E=new s((m+l)/x,(y+u)/x);E.z=v/x,e.push(E);const B=new s(C/w,q/w);B.z=U/w,i.push(B)}r.push(e),n.push(i)}return[r,n]}(a,c,u,l,n);return function(e,t,i){let a=1/0;Ko(i,t)&&(a=ol(i,t[0]));for(let s=0;s<t.length;s++){const o=t[s],r=e[s];for(let e=0;e<o.length-1;e++){const t=o[e],s=[t,o[e+1],r[e+1],r[e],t];Xo(i,s)&&(a=Math.min(a,ol(i,s)))}}return a!==1/0&&a}(f[0],f[1],g)}},line:class extends Oo{constructor(e){super(e,hl),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Jt,this.gradientVersion=(this.gradientVersion+1)%l)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=pl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new fl(e)}getProgramIds(){const e=this.paint.get("line-dasharray"),t=this.paint.get("line-pattern").constantOr(1),i=this.paint.get("line-gradient");return[t?"linePattern":e?"lineSDF":i?"lineGradient":"line"]}getProgramConfiguration(e){return new zo(this,e)}queryRadius(e){const t=e,i=ml(nr("line-width",this,t),nr("line-gap-width",this,t)),a=nr("line-offset",this,t);return i/2+Math.abs(a)+lr(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,i,a,o,r){if(e.queryGeometry.isAboveHorizon)return!1;const n=ur(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),r.angle,e.pixelToTileUnitsFactor),l=e.pixelToTileUnitsFactor/2*ml(this.paint.get("line-width").evaluate(t,i),this.paint.get("line-gap-width").evaluate(t,i)),u=this.paint.get("line-offset").evaluate(t,i);return u&&(a=function(e,t){const i=[],a=new s(0,0);for(let s=0;s<e.length;s++){const o=e[s],r=[];for(let e=0;e<o.length;e++){const i=o[e-1],s=o[e],n=o[e+1],l=0===e?a:s.sub(i)._unit()._perp(),u=e===o.length-1?a:n.sub(s)._unit()._perp(),c=l._add(u)._unit();c._mult(1/(c.x*u.x+c.y*u.y)),r.push(c._mult(t)._add(s))}i.push(r)}return i}(a,u*e.pixelToTileUnitsFactor)),function(e,t,i){for(let a=0;a<t.length;a++){const s=t[a];if(e.length>=3)for(let t=0;t<s.length;t++)if(sr(e,s[t]))return!0;if(Jo(e,s,i))return!0}return!1}(n,a,l)}isTileClipped(){return!0}},symbol:tc,background:class extends Oo{constructor(e){super(e,ic)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Oo{constructor(e){super(e,ac)}getProgramIds(){return["raster"]}},sky:class extends Oo{constructor(e){super(e,oc),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Wr({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}}getCenter(e,t){const i=this.paint.get("sky-type");if("atmosphere"===i){const i=this.paint.get("sky-atmosphere-sun"),a=!i,s=e.style.light,o=s.properties.get("position");return a&&"viewport"===s.properties.get("anchor")&&M("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),a?rc(o.azimuthal,90-o.polar,t):rc(i[0],90-i[1],t)}if("gradient"===i){const e=this.paint.get("sky-gradient-center");return rc(e[0],90-e[1],t)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}},{HTMLImageElement:lc,HTMLCanvasElement:uc,HTMLVideoElement:cc,ImageData:gc,ImageBitmap:fc}=r;class dc{constructor(e,t,i,a){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,a)}update(e,t,i){const{width:a,height:s}=e,o=!(this.size&&this.size[0]===a&&this.size[1]===s||i),{context:r}=this,{gl:n}=r;if(this.useMipmap=Boolean(t&&t.useMipmap),n.bindTexture(n.TEXTURE_2D,this.texture),r.pixelStoreUnpackFlipY.set(!1),r.pixelStoreUnpack.set(1),r.pixelStoreUnpackPremultiplyAlpha.set(this.format===n.RGBA&&(!t||!1!==t.premultiply)),o)this.size=[a,s],e instanceof lc||e instanceof uc||e instanceof cc||e instanceof gc||fc&&e instanceof fc?n.texImage2D(n.TEXTURE_2D,0,this.format,this.format,n.UNSIGNED_BYTE,e):n.texImage2D(n.TEXTURE_2D,0,this.format,a,s,0,this.format,n.UNSIGNED_BYTE,e.data);else{const{x:t,y:o}=i||{x:0,y:0};e instanceof lc||e instanceof uc||e instanceof cc||e instanceof gc||fc&&e instanceof fc?n.texSubImage2D(n.TEXTURE_2D,0,t,o,n.RGBA,n.UNSIGNED_BYTE,e):n.texSubImage2D(n.TEXTURE_2D,0,t,o,a,s,n.RGBA,n.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&n.generateMipmap(n.TEXTURE_2D)}bind(e,t,i){const{context:a}=this,{gl:s}=a;s.bindTexture(s.TEXTURE_2D,this.texture),i!==s.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=s.LINEAR),e!==this.filter&&(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,e),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,t),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class hc{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const pc=r.performance;class mc{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},pc.mark(this._marks.start)}finish(){pc.mark(this._marks.end);let e=pc.getEntriesByName(this._marks.measure);return 0===e.length&&(pc.measure(this._marks.measure,this._marks.start,this._marks.end),e=pc.getEntriesByName(this._marks.measure),pc.clearMarks(this._marks.start),pc.clearMarks(this._marks.end),pc.clearMeasures(this._marks.measure)),e}}class yc{constructor(){this.tasks={},this.taskQueue=[],q(["process"],this),this.invoker=new hc(this.process),this.nextId=0}add(e,t){const i=this.nextId++;return this.tasks[i]={fn:e,metadata:t,priority:_c(t),id:i},this.taskQueue.push(i),this.invoker.trigger(),{cancel:()=>{delete this.tasks[i]}}}process(){S();try{if(this.taskQueue=this.taskQueue.filter(e=>!!this.tasks[e]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let i=0;i<this.taskQueue.length;i++){const a=this.tasks[this.taskQueue[i]];a.priority<t&&(t=a.priority,e=i)}if(null===e)return null;const i=this.taskQueue[e];return this.taskQueue.splice(e,1),i}remove(){this.invoker.remove()}}function _c({type:e,isSymbolTile:t,zoom:i}){return i=i||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-i:"maybePrepare"===e&&t?400-i:500:200-i:100-i}class bc{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof vc?new vc(e.lng,e.lat):vc.convert(e),this}setSouthWest(e){return this._sw=e instanceof vc?new vc(e.lng,e.lat):vc.convert(e),this}extend(e){const t=this._sw,i=this._ne;let a,s;if(e instanceof vc)a=e,s=e;else{if(!(e instanceof bc))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(bc.convert(e)):this.extend(vc.convert(e)):this;if(a=e._sw,s=e._ne,!a||!s)return this}return t||i?(t.lng=Math.min(a.lng,t.lng),t.lat=Math.min(a.lat,t.lat),i.lng=Math.max(s.lng,i.lng),i.lat=Math.max(s.lat,i.lat)):(this._sw=new vc(a.lng,a.lat),this._ne=new vc(s.lng,s.lat)),this}getCenter(){return new vc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new vc(this.getWest(),this.getNorth())}getSouthEast(){return new vc(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:i}=vc.convert(e);let a=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(a=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&a}static convert(e){return!e||e instanceof bc?e:new bc(e)}}class vc{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new vc(m(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,i=this.lat*t,a=e.lat*t,s=Math.sin(i)*Math.sin(a)+Math.cos(i)*Math.cos(a)*Math.cos((e.lng-this.lng)*t);return 6371008.8*Math.acos(Math.min(s,1))}toBounds(e=0){const t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new bc(new vc(this.lng-i,this.lat-t),new vc(this.lng+i,this.lat+t))}static convert(e){if(e instanceof vc)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new vc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new vc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const xc=2*Math.PI*6371008.8;function Cc(e){return xc*Math.cos(e*Math.PI/180)}function qc(e){return(180+e)/360}function Uc(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function wc(e,t){return e/Cc(t)}function Ec(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Bc(e,t){return e*Cc(Ec(t))}class Pc{constructor(e,t,i=0){this.x=+e,this.y=+t,this.z=+i}static fromLngLat(e,t=0){const i=vc.convert(e);return new Pc(qc(i.lng),Uc(i.lat),wc(t,i.lat))}toLngLat(){return new vc(360*this.x-180,Ec(this.y))}toAltitude(){return Bc(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/xc*(e=Ec(this.y),1/Math.cos(e*Math.PI/180));var e}}function Mc(e,t,i){var a=2*Math.PI*6378137/256/Math.pow(2,i);return[e*a-2*Math.PI*6378137/2,t*a-2*Math.PI*6378137/2]}class Tc{constructor(e,t,i){this.z=e,this.x=t,this.y=i,this.key=Ic(0,e,e,t,i)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const i=(s=this.y,o=this.z,r=Mc(256*(a=this.x),256*(s=Math.pow(2,o)-s-1),o),n=Mc(256*(a+1),256*(s+1),o),r[0]+","+r[1]+","+n[0]+","+n[1]);var a,s,o,r,n;const l=function(e,t,i){let a,s="";for(let o=e;o>0;o--)a=1<<o-1,s+=(t&a?1:0)+(i&a?2:0);return s}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",i)}getTilePoint(e){const t=Math.pow(2,this.z);return new s(8192*(e.x*t-this.x),8192*(e.y*t-this.y))}getTileVec3(e){const t=Math.pow(2,this.z);return xr(8192*(e.x*t-this.x),8192*(e.y*t-this.y),Bc(e.z,e.y))}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ac{constructor(e,t){this.wrap=e,this.canonical=t,this.key=Ic(e,t.z,t.z,t.x,t.y)}}class Sc{constructor(e,t,i,a,s){this.overscaledZ=e,this.wrap=t,this.canonical=new Tc(i,+a,+s),this.key=0===t&&e===i?this.canonical.key:Ic(t,e,i,a,s)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new Sc(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Sc(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return Ic(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const i=this.canonical.z-e;return Ic(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new Sc(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,i=2*this.canonical.x,a=2*this.canonical.y;return[new Sc(t,this.wrap,t,i,a),new Sc(t,this.wrap,t,i+1,a),new Sc(t,this.wrap,t,i,a+1),new Sc(t,this.wrap,t,i+1,a+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Sc(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Sc(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ac(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Pc(e.x-this.wrap,e.y))}getTileVec3(e){return this.canonical.getTileVec3(new Pc(e.x-this.wrap,e.y,e.z))}}function Ic(e,t,i,a,s){const o=1<<Math.min(i,22);let r=o*(s%o)+a%o;return e&&i<22&&(r+=o*o*((e<0?-2*e-1:2*e)%(1<<2*(22-i)))),16*(32*r+i)+(t-i)}Qa("CanonicalTileID",Tc),Qa("OverscaledTileID",Sc,{omit:["posMatrix"]});class Dc{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}class zc{constructor(e,t,i,a,s){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=a,this.properties=e.properties,this.id=s}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}var kc=zs([{name:"a_pos",type:"Int16",components:2}]);class Fc{constructor(e,t,i){this.tileID=e,this.uid=v(),this.uses=0,this.tileSize=t,this.tileZoom=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const t=e+this.timeAdded;t<G.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const i={};if(!t)return i;for(const a of e){const e=a.layerIds.map(e=>t.getLayer(e)).filter(Boolean);if(0!==e.length){a.layers=e,a.stateDependentLayerIds&&(a.stateDependentLayers=a.stateDependentLayerIds.map(t=>e.filter(e=>e.id===t)[0]));for(const t of e)i[t.id]=a}}return i}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Ku){if(this.hasSymbolBuckets=!0,!i)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Ku&&t.hasRTLText){this.hasRTLText=!0,ps.isLoading()||ps.isLoaded()||"deferred"!==ds()||hs();break}}this.queryPadding=0;for(const e in this.buckets){const i=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(i))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new oo}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const i=this.buckets[t];i.uploadPending()&&i.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new dc(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new dc(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,i,a,s,o,r,n){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:a,pixelPosMatrix:r,transform:o,params:s},e,t,i):{}}querySourceFeatures(e,t){const i=this.latestFeatureIndex;if(!i||!i.rawTileData)return;const a=i.loadVTLayers(),s=t?t.sourceLayer:"",o=a._geojsonTileLayer||a[s];if(!o)return;const r=da(t&&t.filter),{z:n,x:l,y:u}=this.tileID.canonical,c={z:n,x:l,y:u};for(let t=0;t<o.length;t++){const a=o.feature(t);if(r.needGeometry){const e=Qo(a,!0);if(!r.filter(new ms(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!r.filter(new ms(this.tileID.overscaledZ),a))continue;const g=i.getId(a,s),f=new zc(a,n,l,u,g);f.tile=c,e.push(f)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=I(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let i=!1;if(this.expirationTime>e)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{const a=this.expirationTime-t;a?this.expirationTime=e+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const i=this.latestFeatureIndex.loadVTLayers();for(const a in this.buckets){if(!t.style.hasLayer(a))continue;const s=this.buckets[a],o=s.layers[0].sourceLayer||"_geojsonTileLayer",r=i[o],n=e[o];if(!r||!n||0===Object.keys(n).length)continue;s.update(n,r,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=t&&t.style&&t.style.getLayer(a);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(s)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<G.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=G.now()+e}setDependencies(e,t){const i={};for(const e of t)i[e]=!0;this.dependencies[e]=i}hasDependency(e,t){for(const i of e){const e=this.dependencies[i];if(e)for(const i of t)if(e[i])return!0}return!1}clearQueryDebugViz(){}}class Lc{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,i){const a=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][a]=this.stateChanges[e][a]||{},_(this.stateChanges[e][a],i),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==a&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][a]){this.deletedStates[e][a]={};for(const t in this.state[e][a])i[t]||(this.deletedStates[e][a][t]=null)}else for(const t in i)this.deletedStates[e]&&this.deletedStates[e][a]&&null===this.deletedStates[e][a][t]&&delete this.deletedStates[e][a][t]}removeFeatureState(e,t,i){if(null===this.deletedStates[e])return;const a=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&void 0!==t)null!==this.deletedStates[e][a]&&(this.deletedStates[e][a]=this.deletedStates[e][a]||{},this.deletedStates[e][a][i]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][a])for(i in this.deletedStates[e][a]={},this.stateChanges[e][a])this.deletedStates[e][a][i]=null;else this.deletedStates[e][a]=null;else this.deletedStates[e]=null}getState(e,t){const i=String(t),a=_({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const i=this.deletedStates[e][t];if(null===i)return{};for(const e in i)delete a[e]}return a}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const i={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const t={};for(const i in this.stateChanges[e])this.state[e][i]||(this.state[e][i]={}),_(this.state[e][i],this.stateChanges[e][i]),t[i]=this.state[e][i];i[e]=t}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const t={};if(null===this.deletedStates[e])for(const i in this.state[e])t[i]={},this.state[e][i]={};else for(const i in this.deletedStates[e]){if(null===this.deletedStates[e][i])this.state[e][i]={};else for(const t of Object.keys(this.deletedStates[e][i]))delete this.state[e][i][t];t[i]=this.state[e][i]}i[e]=i[e]||{},_(i[e],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(const a in e)e[a].setFeatureState(i,t)}}class Oc{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const i=this.toIdx(e,t);return{min:this.minimums[i],max:this.maximums[i]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function Rc(e,t,i,a){let s=0,o=Number.MAX_VALUE;for(let r=0;r<3;r++)if(Math.abs(a[r])<1e-15){if(i[r]<e[r]||i[r]>t[r])return null}else{const n=1/a[r];let l=(e[r]-i[r])*n,u=(t[r]-i[r])*n;if(l>u){const e=l;l=u,u=e}if(l>s&&(s=l),u<o&&(o=u),s>o)return null}return s}function Nc(e,t,i,a,s,o,r,n,l,u,c){const g=a-e,f=s-t,d=o-i,h=r-e,p=n-t,m=l-i,y=c[1]*m-c[2]*p,_=c[2]*h-c[0]*m,b=c[0]*p-c[1]*h,v=g*y+f*_+d*b;if(Math.abs(v)<1e-15)return null;const x=1/v,C=u[0]-e,q=u[1]-t,U=u[2]-i,w=(C*y+q*_+U*b)*x;if(w<0||w>1)return null;const E=q*d-U*f,B=U*g-C*d,P=C*f-q*g,M=(c[0]*E+c[1]*B+c[2]*P)*x;return M<0||w+M>1?null:(h*E+p*B+m*P)*x}function $c(e,t,i){return(e-t)/(i-t)}function Gc(e,t,i,a,s,o,r,n,l){const u=1<<i,c=o-a,g=r-s,f=(e+1)/u*c+a,d=(t+0)/u*g+s,h=(t+1)/u*g+s;n[0]=(e+0)/u*c+a,n[1]=d,l[0]=f,l[1]=h}class Vc{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),i=[];let a=Math.ceil(Math.pow(2,t));const s=1/a,o=(e,t,i,a,s)=>{const o=a?1:0,r=(e+1)*i-o,n=t*i,l=(t+1)*i-o;s[0]=e*i,s[1]=n,s[2]=r,s[3]=l};let r=new Oc(a);const n=[];for(let t=0;t<a*a;t++){o(t%a,Math.floor(t/a),s,!1,n);const i=Qc(n[0],n[1],e),l=Qc(n[2],n[1],e),u=Qc(n[2],n[3],e),c=Qc(n[0],n[3],e);r.minimums.push(Math.min(i,l,u,c)),r.maximums.push(Math.max(i,l,u,c)),r.leaves.push(1)}for(i.push(r),a/=2;a>=1;a/=2){const e=i[i.length-1];r=new Oc(a);for(let t=0;t<a*a;t++){o(t%a,Math.floor(t/a),2,!0,n);const i=e.getElevation(n[0],n[1]),s=e.getElevation(n[2],n[1]),l=e.getElevation(n[2],n[3]),u=e.getElevation(n[0],n[3]),c=e.isLeaf(n[0],n[1]),g=e.isLeaf(n[2],n[1]),f=e.isLeaf(n[2],n[3]),d=e.isLeaf(n[0],n[3]),h=Math.min(i.min,s.min,l.min,u.min),p=Math.max(i.max,s.max,l.max,u.max),m=c&&g&&f&&d;r.maximums.push(p),r.minimums.push(h),r.leaves.push(p-h<=5&&m?1:0)}i.push(r)}return i}(this.dem),i=t.length-1,a=t[i];this._addNode(a.minimums[0],a.maximums[0],a.leaves[0]),this._construct(t,0,0,i,0)}raycastRoot(e,t,i,a,s,o,r=1){return Rc([e,t,-100],[i,a,this.maximums[0]*r],s,o)}raycast(e,t,i,a,s,o,r=1){if(!this.nodeCount)return null;const n=this.raycastRoot(e,t,i,a,s,o,r);if(null==n)return null;const l=[],u=[],c=[],g=[],f=[{idx:0,t:n,nodex:0,nodey:0,depth:0}];for(;f.length>0;){const{idx:n,t:d,nodex:h,nodey:p,depth:m}=f.pop();if(this.leaves[n]){Gc(h,p,m,e,t,i,a,c,g);const n=1<<m,l=(h+0)/n,u=(h+1)/n,f=(p+0)/n,y=(p+1)/n,_=Qc(l,f,this.dem)*r,b=Qc(u,f,this.dem)*r,v=Qc(u,y,this.dem)*r,x=Qc(l,y,this.dem)*r,C=Nc(c[0],c[1],_,g[0],c[1],b,g[0],g[1],v,s,o),q=Nc(g[0],g[1],v,c[0],g[1],x,c[0],c[1],_,s,o),U=Math.min(null!==C?C:Number.MAX_VALUE,null!==q?q:Number.MAX_VALUE);if(U!==Number.MAX_VALUE)return U;{const e=wr([],s,o,d);if(Zc(_,b,x,v,$c(e[0],c[0],g[0]),$c(e[1],c[1],g[1]))>=e[2])return d}continue}let y=0;for(let f=0;f<this._siblingOffset.length;f++){Gc((h<<1)+this._siblingOffset[f][0],(p<<1)+this._siblingOffset[f][1],m+1,e,t,i,a,c,g),c[2]=-100,g[2]=this.maximums[this.childOffsets[n]+f]*r;const d=Rc(c,g,s,o);if(null!=d){const e=d;l[f]=e;let t=!1;for(let i=0;i<y&&!t;i++)e>=l[u[i]]&&(u.splice(i,0,f),t=!0);t||(u[y]=f),y++}}for(let e=0;e<y;e++){const t=u[e];f.push({idx:this.childOffsets[n]+t,t:l[t],nodex:(h<<1)+this._siblingOffset[t][0],nodey:(p<<1)+this._siblingOffset[t][1],depth:m+1})}}return null}_addNode(e,t,i){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(i),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,i,a,s){if(1===e[a].isLeaf(t,i))return;this.childOffsets[s]||(this.childOffsets[s]=this.nodeCount);const o=a-1,r=e[o];let n,l=0;for(let e=0;e<this._siblingOffset.length;e++){const a=2*t+this._siblingOffset[e][0],s=2*i+this._siblingOffset[e][1],o=r.getElevation(a,s),u=r.isLeaf(a,s),c=this._addNode(o.min,o.max,u);u&&(l|=1<<e),n||(n=c)}for(let a=0;a<this._siblingOffset.length;a++)l&1<<a||this._construct(e,2*t+this._siblingOffset[a][0],2*i+this._siblingOffset[a][1],o,n+a)}}function Zc(e,t,i,a,s,o){return Yt(Yt(e,i,o),Yt(t,a,o),s)}function Qc(e,t,i){const a=i.dim,s=p(e*a-.5,0,a-1),o=p(t*a-.5,0,a-1),r=Math.floor(s),n=Math.floor(o),l=Math.min(r+1,a-1),u=Math.min(n+1,a-1);return Zc(i.get(r,n),i.get(l,n),i.get(r,u),i.get(l,u),s-r,o-n)}const jc={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Hc{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,i,a=!1,s=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return M(`"${i}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const o=this.dim=t.height-2;if(this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox",this.borderReady=a,!a){for(let e=0;e<o;e++)this.data[this._idx(-1,e)]=this.data[this._idx(0,e)],this.data[this._idx(o,e)]=this.data[this._idx(o-1,e)],this.data[this._idx(e,-1)]=this.data[this._idx(e,0)],this.data[this._idx(e,o)]=this.data[this._idx(e,o-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(o,-1)]=this.data[this._idx(o-1,0)],this.data[this._idx(-1,o)]=this.data[this._idx(0,o-1)],this.data[this._idx(o,o)]=this.data[this._idx(o-1,o-1)],s&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Vc(this)}get(e,t){const i=new Uint8Array(this.data.buffer),a=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[a],i[a+1],i[a+2])}static getUnpackVector(e){return jc[e]}get unpackVector(){return jc[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}_unpackMapbox(e,t,i){return(256*e*256+256*t+i)/10-1e4}_unpackTerrarium(e,t,i){return 256*e+t+i/256-32768}static pack(e,t){const i=[0,0,0,0],a=Hc.getUnpackVector(t);let s=Math.floor((e+a[3])/a[2]);return i[2]=s%256,s=Math.floor(s/256),i[1]=s%256,s=Math.floor(s/256),i[0]=s,i}getPixels(){return new Hr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let a=t*this.dim,s=t*this.dim+this.dim,o=i*this.dim,r=i*this.dim+this.dim;switch(t){case-1:a=s-1;break;case 1:s=a+1}switch(i){case-1:o=r-1;break;case 1:r=o+1}const n=-t*this.dim,l=-i*this.dim;for(let t=o;t<r;t++)for(let i=a;i<s;i++)this.data[this._idx(i,t)]=e.data[this._idx(i+n,t+l)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}Qa("DEMData",Hc),Qa("DemMinMaxQuadTree",Vc,{omit:["dem"]});class Xc{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,i){const a=e.wrapped().key;void 0===this.data[a]&&(this.data[a]=[]);const s={value:t,timeout:void 0};if(void 0!==i&&(s.timeout=setTimeout(()=>{this.remove(e,s)},i)),this.data[a].push(s),this.order.push(a),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const i=e.wrapped().key,a=void 0===t?0:this.data[i].indexOf(t),s=this.data[i][a];return this.data[i].splice(a,1),s.timeout&&clearTimeout(s.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(s.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const i in this.data)for(const a of this.data[i])e(a.value)||t.push(a);for(const e of t)this.remove(e.value.tileID,e)}}class Wc{constructor(e,t,i){this.context=e;const a=e.gl;this.buffer=a.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Kc={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Jc{constructor(e,t,i,a){this.length=t.length,this.attributes=i,this.itemSize=t.bytesPerElement,this.dynamicDraw=a,this.context=e;const s=e.gl;this.buffer=s.createBuffer(),e.bindVertexBuffer.set(this.buffer),s.bufferData(s.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?s.DYNAMIC_DRAW:s.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let i=0;i<this.attributes.length;i++){const a=t.attributes[this.attributes[i].name];void 0!==a&&e.enableVertexAttribArray(a)}}setVertexAttribPointers(e,t,i){for(let a=0;a<this.attributes.length;a++){const s=this.attributes[a],o=t.attributes[s.name];void 0!==o&&e.vertexAttribPointer(o,s.components,e[Kc[s.type]],!1,this.itemSize,s.offset+this.itemSize*(i||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Yc{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class eg extends Yc{getDefault(){return ut.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class tg extends Yc{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class ig extends Yc{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class ag extends Yc{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class sg extends Yc{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class og extends Yc{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class rg extends Yc{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class ng extends Yc{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class lg extends Yc{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class ug extends Yc{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class cg extends Yc{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class gg extends Yc{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class fg extends Yc{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class dg extends Yc{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class hg extends Yc{getDefault(){return ut.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class pg extends Yc{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class mg extends Yc{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class yg extends Yc{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class _g extends Yc{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class bg extends Yc{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class vg extends Yc{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class xg extends Yc{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Cg extends Yc{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class qg extends Yc{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Ug extends Yc{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class wg extends Yc{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Eg extends Yc{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Bg extends Yc{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class Pg extends Yc{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Mg extends Yc{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Tg extends Yc{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Ag extends Yc{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class Sg extends Ag{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Ig extends Ag{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Dg{constructor(e,t,i,a){this.context=e,this.width=t,this.height=i;const s=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new Sg(e,s),a&&(this.depthAttachment=new Ig(e,s))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class zg{constructor(e,t,i){this.func=e,this.mask=t,this.range=i}}zg.ReadOnly=!1,zg.ReadWrite=!0,zg.disabled=new zg(519,zg.ReadOnly,[0,1]);class kg{constructor(e,t,i,a,s,o){this.test=e,this.ref=t,this.mask=i,this.fail=a,this.depthFail=s,this.pass=o}}kg.disabled=new kg({func:519,mask:0},0,0,7680,7680,7680);class Fg{constructor(e,t,i){this.blendFunction=e,this.blendColor=t,this.mask=i}}Fg.Replace=[1,0],Fg.disabled=new Fg(Fg.Replace,ut.transparent,[!1,!1,!1,!1]),Fg.unblended=new Fg(Fg.Replace,ut.transparent,[!0,!0,!0,!0]),Fg.alphaBlended=new Fg([1,771],ut.transparent,[!0,!0,!0,!0]);class Lg{constructor(e,t,i){this.enable=e,this.mode=t,this.frontFace=i}}Lg.disabled=new Lg(!1,1029,2305),Lg.backCCW=new Lg(!0,1029,2305),Lg.backCW=new Lg(!0,1029,2304),Lg.frontCW=new Lg(!0,1028,2304),Lg.frontCCW=new Lg(!0,1028,2305);class Og extends Fe{constructor(e,t,i){super(),this.id=e,this._onlySymbols=i,t.on("data",e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),t.on("error",()=>{this._sourceErrored=!0}),this._source=t,this._tiles={},this._cache=new Xc(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Lc}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const i=this._tiles[t];i.upload(e),i.prepare(this.map.style.imageManager)}}getIds(){return y(this._tiles).map(e=>e.tileID).sort(Rg).map(e=>e.key)}getRenderableIds(e){const t=[];for(const i in this._tiles)this._isIdRenderable(+i,e)&&t.push(this._tiles[i]);return e?t.sort((e,t)=>{const i=e.tileID,a=t.tileID,o=new s(i.canonical.x,i.canonical.y)._rotate(this.transform.angle),r=new s(a.canonical.x,a.canonical.y)._rotate(this.transform.angle);return i.overscaledZ-a.overscaledZ||r.y-o.y||r.x-o.x}).map(e=>e.tileID.key):t.map(e=>e.tileID).sort(Rg).map(e=>e.key)}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const i=this._tiles[e];i&&("loading"!==i.state&&(i.state=t),this._loadTile(i,this._tileLoaded.bind(this,i,e,t)))}_tileLoaded(e,t,i,a){if(a)return e.state="errored",void(404!==a.status?this._source.fire(new ke(a,{tile:e})):this.update(this.transform));e.timeAdded=G.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new ze("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let a=0;a<t.length;a++){const s=t[a];if(e.neighboringTiles&&e.neighboringTiles[s]){const t=this.getTileByID(s);i(e,t),i(t,e)}}function i(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let i=t.tileID.canonical.x-e.tileID.canonical.x;const a=t.tileID.canonical.y-e.tileID.canonical.y,s=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===i&&0===a||Math.abs(a)>1||(Math.abs(i)>1&&(1===Math.abs(i+s)?i+=s:1===Math.abs(i-s)&&(i-=s)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,i,a),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,i,a){for(const s in this._tiles){let o=this._tiles[s];if(a[s]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>i)continue;let r=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(r=e)}let n=r;for(;n.overscaledZ>t;)if(n=n.scaledTo(n.overscaledZ-1),e[n.key]){a[r.key]=r;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const i=this._loadedParentTiles[e.key];return i&&i.tileID.overscaledZ>=t?i:null}for(let i=e.overscaledZ-1;i>=t;i--){const t=e.scaledTo(i),a=this._getLoadedTile(t);if(a)return a}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const i=Math.ceil(e.width/t)+1,a=Math.ceil(e.height/t)+1,s=Math.floor(i*a*5),o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,s):s;this._cache.setMaxSize(o)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const i in this._tiles){const a=this._tiles[i];a.tileID=a.tileID.unwrapTo(a.tileID.wrap+t),e[a.tileID.key]=a}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(e,t,i){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!i)return;let a;this.updateCacheSize(e,t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(e=>new Sc(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)):(a=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!i,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!!this.transform.elevation&&!this.usedForTerrain}),this._source.hasTile&&(a=a.filter(e=>this._source.hasTile(e)))):a=[];const s=this._updateRetainedTiles(a);if(Ng(this._source.type)&&0!==a.length){const e={},t={},i=Object.keys(s);for(const a of i){const i=s[a],o=this._tiles[a];if(!o||o.fadeEndTime&&o.fadeEndTime<=G.now())continue;const r=this.findLoadedParent(i,Math.max(i.overscaledZ-Og.maxOverzooming,this._source.minzoom));r&&(this._addTile(r.tileID),e[r.tileID.key]=r.tileID),t[a]=i}const o=a[a.length-1].overscaledZ;for(const e in this._tiles){const i=this._tiles[e];if(s[e]||!i.hasData())continue;let a=i.tileID;for(;a.overscaledZ>o;){a=a.scaledTo(a.overscaledZ-1);const o=this._tiles[a.key];if(o&&o.hasData()&&t[a.key]){s[e]=i.tileID;break}}}for(const t in e)s[t]||(this._coveredTiles[t]=!0,s[t]=e[t])}for(const e in s)this._tiles[e].clearFadeHold();const o=function(e,t){const i=[];for(const a in e)a in t||i.push(a);return i}(this._tiles,s);for(const e of o){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+e)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const i={},a=e[e.length-1].overscaledZ,s=e[0].overscaledZ,o=Math.max(s-Og.maxOverzooming,this._source.minzoom),r=Math.max(s+Og.maxUnderzooming,this._source.minzoom),n={};for(const i of e){const e=this._addTile(i);t[i.key]=i,e.hasData()||a<this._source.maxzoom&&(n[i.key]=i)}this._retainLoadedChildren(n,a,r,t);for(const a of e){let e=this._tiles[a.key];if(e.hasData())continue;if(a.canonical.z>=this._source.maxzoom){const e=a.children(this._source.maxzoom)[0],i=this.getTile(e);if(i&&i.hasData()){t[e.key]=e;continue}}else{const e=a.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let s=e.wasRequested();for(let r=a.overscaledZ-1;r>=o;--r){const o=a.scaledTo(r);if(i[o.key])break;if(i[o.key]=!0,e=this.getTile(o),!e&&s&&(e=this._addTile(o)),e&&(t[o.key]=o,s=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let i,a=this._tiles[e].tileID;for(;a.overscaledZ>0;){if(a.key in this._loadedParentTiles){i=this._loadedParentTiles[a.key];break}t.push(a.key);const e=a.scaledTo(a.overscaledZ-1);if(i=this._getLoadedTile(e),i)break;a=e}for(const e of t)this._loadedParentTiles[e]=i}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const i=Boolean(t);return i||(t=new Fc(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t?(t.uses++,this._tiles[e.key]=t,i||this._source.fire(new ze("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const i=t.getExpiryTimeout();i&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},i))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._cache.reset()}tilesIn(e,t,i){const a=[],s=this.transform;if(!s)return a;for(const o in this._tiles){const r=this._tiles[o];if(i&&r.clearQueryDebugViz(),r.holdingForFade())continue;const n=e.containsTile(r,s,t);n&&a.push(n)}return a}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map(e=>this._tiles[e].tileID);for(const e of t)e.posMatrix=this.transform.calculatePosMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(Ng(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=G.now())return!0}return!1}setFeatureState(e,t,i){this._state.updateState(e=e||"_geojsonTileLayer",t,i)}removeFeatureState(e,t,i){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,i)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,i){const a=this._tiles[e];a&&a.setDependencies(t,i)}reloadTilesForDependencies(e,t){for(const i in this._tiles)this._tiles[i].hasDependency(e,t)&&this._reloadTile(+i,"reloading");this._cache.filter(i=>!i.hasDependency(e,t))}}function Rg(e,t){const i=Math.abs(2*e.wrap)-+(e.wrap<0),a=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||a-i||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Ng(e){return"raster"===e||"image"===e||"video"===e}Og.maxOverzooming=10,Og.maxUnderzooming=3;class $g{constructor(e,t,i){this._dem=e,this._scale=t,this._offset=i}static create(e,t,i){const a=i||e.findDEMTileFor(t);if(!a||!a.dem)return;const s=a.dem,o=a.tileID,r=1<<t.canonical.z-o.canonical.z;return new $g(s,a.tileSize/8192/r,[(t.canonical.x/r-o.canonical.x)*s.dim,(t.canonical.y/r-o.canonical.y)*s.dim])}getElevationAt(e,t,i){const a=e*this._scale+this._offset[0],s=t*this._scale+this._offset[1],o=Math.floor(a),r=Math.floor(s),n=this._dem;return i?Yt(Yt(n.get(o,r),n.get(o,r+1),s-r),Yt(n.get(o+1,r),n.get(o+1,r+1),s-r),a-o):n.get(o,r)}}class Gg{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Na(8192,16,0),this.featureIndexArray=new ho,this.promoteId=t}insert(e,t,i,a,s){const o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,a,s);const r=this.grid;for(let e=0;e<t.length;e++){const i=t[e],a=[1/0,1/0,-1/0,-1/0];for(let e=0;e<i.length;e++){const t=i[e];a[0]=Math.min(a[0],t.x),a[1]=Math.min(a[1],t.y),a[2]=Math.max(a[2],t.x),a[3]=Math.max(a[3],t.y)}a[0]<8192&&a[1]<8192&&a[2]>=0&&a[3]>=0&&r.insert(o,a[0],a[1],a[2],a[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Wn.VectorTile(new Al(this.rawTileData)).layers,this.sourceLayerCoder=new Dc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,i,a){this.loadVTLayers();const s=e.params||{},o=da(s.filter),r=e.tileResult,n=e.transform,l=r.bufferedTilespaceBounds,u=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,(e,t,i,a)=>or(r.bufferedTilespaceGeometry,e,t,i,a));u.sort(Zg);let c=null;n.elevation&&u.length>0&&(c=$g.create(n.elevation,this.tileID));const g={};let f;for(let n=0;n<u.length;n++){const l=u[n];if(l===f)continue;f=l;const d=this.featureIndexArray.get(l);let h=null;this.loadMatchingFeature(g,d.bucketIndex,d.sourceLayerIndex,d.featureIndex,o,s.layers,s.availableImages,t,i,a,(t,i,a)=>(h||(h=Zo(t)),i.queryIntersectsFeature(r,t,a,h,this.z,e.transform,e.pixelPosMatrix,c)))}return g}loadMatchingFeature(e,t,i,a,s,o,r,n,l,u,c){const g=this.bucketLayerIDs[t];if(o&&!function(e,t){for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>=0)return!0;return!1}(o,g))return;const f=this.sourceLayerCoder.decode(i),d=this.vtLayers[f].feature(a);if(s.needGeometry){const e=Qo(d,!0);if(!s.filter(new ms(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!s.filter(new ms(this.tileID.overscaledZ),d))return;const h=this.getId(d,f);for(let t=0;t<g.length;t++){const i=g[t];if(o&&o.indexOf(i)<0)continue;const s=n[i];if(!s)continue;let f={};void 0!==h&&u&&(f=u.getState(s.sourceLayer||"_geojsonTileLayer",h));const p=_({},l[i]);p.paint=Vg(p.paint,s.paint,d,f,r),p.layout=Vg(p.layout,s.layout,d,f,r);const m=!c||c(d,s,f);if(!m)continue;const y=new zc(d,this.z,this.x,this.y,h);y.layer=p;let b=e[i];void 0===b&&(b=e[i]=[]),b.push({featureIndex:a,feature:y,intersectionZ:m})}}lookupSymbolFeatures(e,t,i,a,s,o,r,n){const l={};this.loadVTLayers();const u=da(s);for(const s of e)this.loadMatchingFeature(l,i,a,s,u,o,r,n,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const i of t)if(e===i)return!0;return!1}getId(e,t){let i=e.id;return this.promoteId&&(i=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof i&&(i=Number(i))),i}}function Vg(e,t,i,a,s){return w(e,(e,o)=>{const r=t instanceof Us?t.get(o):null;return r&&r.evaluate?r.evaluate(i,a,s):r})}function Zg(e,t){return t-e}Qa("FeatureIndex",Gg,{omit:["rawTileData","sourceLayerCoder"]});class Qg{constructor(e){const t={},i=[];for(const a in e){const s=e[a],o=t[a]={};for(const e in s){const t=s[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const a={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};i.push(a),o[e]={rect:a,metrics:t.metrics}}}const{w:a,h:s}=Jl(i),o=new jr({width:a||1,height:s||1});for(const i in e){const a=e[i];for(const e in a){const s=a[+e];if(!s||0===s.bitmap.width||0===s.bitmap.height)continue;const r=t[i][e].rect;jr.copy(s.bitmap,o,{x:0,y:0},{x:r.x+1,y:r.y+1},s.bitmap)}}this.image=o,this.positions=t}}Qa("GlyphAtlas",Qg);class jg{constructor(e){this.tileID=new Sc(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile}parse(e,t,i,a,s){this.status="parsing",this.data=e,this.collisionBoxArray=new oo;const o=new Dc(Object.keys(e.layers).sort()),r=new Gg(this.tileID,this.promoteId);r.bucketLayerIDs=[];const n={},l={featureIndex:r,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},u=t.familiesBySource[this.source];for(const t in u){const a=e.layers[t];if(!a)continue;let s=!1,c=!1;for(const e of u[t])"symbol"===e[0].type?s=!0:c=!0;if(!0===this.isSymbolTile&&!s)continue;if(!1===this.isSymbolTile&&!c)continue;1===a.version&&M(`Vector tile source "${this.source}" layer "${t}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const g=o.encode(t),f=[];for(let e=0;e<a.length;e++){const i=a.feature(e),s=r.getId(i,t);f.push({feature:i,id:s,index:e,sourceLayerIndex:g})}for(const e of u[t]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(Hg(e,this.zoom,i),(n[t.id]=t.createBucket({index:r.bucketLayerIDs.length,layers:e,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:g,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(f,l,this.tileID.canonical),r.bucketLayerIDs.push(e.map(e=>e.id)))}}let c,g,f,d;const h={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},p=w(l.glyphDependencies,e=>Object.keys(e).map(Number));Object.keys(p).length?a.send("getGlyphs",{uid:this.uid,stacks:p},(e,t)=>{c||(c=e,g=t,b.call(this))},void 0,void 0,h):g={};const m=Object.keys(l.iconDependencies);m.length?a.send("getImages",{icons:m,source:this.source,tileID:this.tileID,type:"icons"},(e,t)=>{c||(c=e,f=t,b.call(this))},void 0,void 0,h):f={};const _=Object.keys(l.patternDependencies);function b(){if(c)return s(c);if(g&&f&&d){const e=new Qg(g),t=new eu(f,d);for(const a in n){const s=n[a];s instanceof Ku?(Hg(s.layers,this.zoom,i),ku(s,g,e.positions,f,t.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):s.hasPattern&&(s instanceof fl||s instanceof kn||s instanceof tl)&&(Hg(s.layers,this.zoom,i),s.addFeatures(l,this.tileID.canonical,t.patternPositions))}this.status="done",s(null,{buckets:y(n).filter(e=>!e.isEmpty()),featureIndex:r,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:t,glyphMap:this.returnDependencies?g:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?e.positions:null})}}_.length?a.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},(e,t)=>{c||(c=e,d=t,b.call(this))},void 0,void 0,h):d={},b.call(this)}}function Hg(e,t,i){const a=new ms(t);for(const t of e)t.recalculate(a,i)}class Xg{constructor(e){this.entries={},this.scheduler=e}request(e,t,i,a){const s=this.entries[e]=this.entries[e]||{callbacks:[]};if(s.result){const[e,i]=s.result;return this.scheduler?this.scheduler.add(()=>{a(e,i)},t):a(e,i),()=>{}}return s.callbacks.push(a),s.cancel||(s.cancel=i((i,a)=>{s.result=[i,a];for(const e of s.callbacks)this.scheduler?this.scheduler.add(()=>{e(i,a)},t):e(i,a);setTimeout(()=>delete this.entries[e],3e3)})),()=>{s.result||(s.callbacks=s.callbacks.filter(e=>e!==a),s.callbacks.length||(s.cancel(),delete this.entries[e]))}}}function Wg(e,t,i){const a=JSON.stringify(e.request);return e.data&&(this.deduped.entries[a]={result:[null,e.data]}),this.deduped.request(a,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},t=>{const a=we(e.request,(e,a,s,o)=>{e?t(e):a&&t(null,{vectorTile:i?void 0:new Wn.VectorTile(new Al(a)),rawData:a,cacheControl:s,expires:o})});return()=>{a.cancel(),t()}},t)}e.AUTH_ERR_MSG="NO_ACCESS_TOKEN",e.Aabb=Lr,e.Actor=class{constructor(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.cancelCallbacks={},q(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=S()?e:r,this.scheduler=new yc}send(e,t,i,a,s=!1,o){const r=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(i.metadata=o,this.callbacks[r]=i);const n=z(this.globalScope)?void 0:[];return this.target.postMessage({id:r,type:e,hasCallback:!!i,targetMapId:a,mustQueue:s,sourceMapId:this.mapId,data:Xa(t,n)},n),{cancel:()=>{i&&delete this.callbacks[r],this.target.postMessage({id:r,type:"<cancel>",targetMapId:a,sourceMapId:this.mapId})}}}receive(e){const t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[i];delete this.cancelCallbacks[i],e&&e.cancel()}else if(S()||t.mustQueue){const e=this.callbacks[i];this.cancelCallbacks[i]=this.scheduler.add(()=>this.processTask(i,t),e&&e.metadata||{type:"message"})}else this.processTask(i,t)}processTask(e,t){if("<response>"===t.type){const i=this.callbacks[e];delete this.callbacks[e],i&&(t.error?i(Wa(t.error)):i(null,Wa(t.data)))}else{const i=z(this.globalScope)?void 0:[],a=t.hasCallback?(t,a)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Xa(t):null,data:Xa(a,i)},i)}:e=>{},s=Wa(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,s,a);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],s.source)[e[1]](s,a)}else a(new Error("Could not find function "+t.type))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.AlphaImage=jr,e.CanonicalTileID=Tc,e.Color=ut,e.ColorMode=Fg,e.Context=class{constructor(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new eg(this),this.clearDepth=new tg(this),this.clearStencil=new ig(this),this.colorMask=new ag(this),this.depthMask=new sg(this),this.stencilMask=new og(this),this.stencilFunc=new rg(this),this.stencilOp=new ng(this),this.stencilTest=new lg(this),this.depthRange=new ug(this),this.depthTest=new cg(this),this.depthFunc=new gg(this),this.blend=new fg(this),this.blendFunc=new dg(this),this.blendColor=new hg(this),this.blendEquation=new pg(this),this.cullFace=new mg(this),this.cullFaceSide=new yg(this),this.frontFace=new _g(this),this.program=new bg(this),this.activeTexture=new vg(this),this.viewport=new xg(this),this.bindFramebuffer=new Cg(this),this.bindRenderbuffer=new qg(this),this.bindTexture=new Ug(this),this.bindVertexBuffer=new wg(this),this.bindElementBuffer=new Eg(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Bg(this),this.pixelStoreUnpack=new Pg(this),this.pixelStoreUnpackPremultiplyAlpha=new Mg(this),this.pixelStoreUnpackFlipY=new Tg(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new Wc(this,e,t)}createVertexBuffer(e,t,i){return new Jc(this,e,t,i)}createRenderbuffer(e,t,i){const a=this.gl,s=a.createRenderbuffer();return this.bindRenderbuffer.set(s),a.renderbufferStorage(a.RENDERBUFFER,e,t,i),this.bindRenderbuffer.set(null),s}createFramebuffer(e,t,i){return new Dg(this,e,t,i)}clear({color:e,depth:t,stencil:i}){const a=this.gl;let s=0;e&&(s|=a.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(s|=a.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==i&&(s|=a.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),a.clear(s)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){n(e.blendFunction,Fg.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}},e.CullFaceMode=Lg,e.DEMData=Hc,e.DataConstantProperty=ws,e.DedupedRequest=Xg,e.DepthMode=zg,e.DepthStencilAttachment=class extends Ig{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}},e.EXTENT=8192,e.Elevation=class{getAtPoint(e,t=0){const i=this._source();if(!i)return t;if(e.y<0||e.y>1)return t;const a=i.getSource().maxzoom,s=1<<a,o=Math.floor(e.x),r=e.x-o,n=new Sc(a,o,a,Math.floor(r*s),Math.floor(e.y*s)),l=this.findDEMTileFor(n);if(!l||!l.dem)return t;const u=l.dem,c=1<<l.tileID.canonical.z,g=(r*c-l.tileID.canonical.x)*u.dim,f=(e.y*c-l.tileID.canonical.y)*u.dim,d=Math.floor(g),h=Math.floor(f);return this.exaggeration()*Yt(Yt(u.get(d,h),u.get(d,h+1),f-h),Yt(u.get(d+1,h),u.get(d+1,h+1),f-h),g-d)}getAtTileOffset(e,t,i){const a=1<<e.canonical.z;return this.getAtPoint(new Pc(e.wrap+(e.canonical.x+t/8192)/a,(e.canonical.y+i/8192)/a))}getForTilePoints(e,t,i,a){const s=$g.create(this,e,a);return!!s&&(t.forEach(e=>{e[2]=this.exaggeration()*s.getElevationAt(e[0],e[1],i)}),!0)}getMinMaxForTile(e){const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const i=t.dem.tree,a=t.tileID,s=1<<e.canonical.z-a.canonical.z;let o=e.canonical.x/s-a.canonical.x,r=e.canonical.y/s-a.canonical.y,n=0;for(let t=0;t<e.canonical.z-a.canonical.z&&!i.leaves[n];t++){o*=2,r*=2;const e=2*Math.floor(r)+Math.floor(o);n=i.childOffsets[n]+e,o%=1,r%=1}return{min:this.exaggeration()*i.minimums[n],max:this.exaggeration()*i.maximums[n]}}raycast(e,t,i){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=ke,e.EvaluationParameters=ms,e.Event=ze,e.Evented=Fe,e.Frustum=Fr,e.ImagePosition=Yl,e.LngLat=vc,e.LngLatBounds=bc,e.MAX_SAFE_INTEGER=l,e.MercatorCoordinate=Pc,e.ONE_EM=24,e.OverscaledTileID=Sc,e.Point=s,e.Point$1=s,e.Properties=Ts,e.RGBAImage=Hr,e.Ray=class{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,i){const a=Br(t,this.dir);if(Math.abs(a)<1e-6)return!1;const s=Br(Ar(_r(),e,this.pos),t)/a;return function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2]}(i,wr(_r(),this.pos,this.dir,s)),!0}},e.RequestManager=class{constructor(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",K,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!J(e))return e;const i=ie(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!J(e))return e;const i=ie(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)}normalizeSourceURL(e,t){if(!J(e))return e;const i=ie(e);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)}normalizeSpriteURL(e,t,i,a){const s=ie(e);return J(e)?(s.path=`/styles/v1${s.path}/sprite${t}${i}`,this._makeAPIURL(s,this._customAccessToken||a)):(s.path+=`${t}${i}`,ae(s))}normalizeTileURL(e,t,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!J(e))return e;const a=ie(e);a.path=a.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||i&&"raster"!==a.authority&&512===i?"@2x":""}${Z.supported?".webp":"$1"}`),"raster"===a.authority?a.path=`/${V.RASTER_URL_PREFIX}${a.path}`:(a.path=a.path.replace(/^.+\/v4\//,"/"),a.path=`/${V.TILE_URL_VERSION}${a.path}`);const s=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(a.params)||V.ACCESS_TOKEN;return V.REQUIRE_ACCESS_TOKEN&&s&&this._skuToken&&a.params.push("sku="+this._skuToken),this._makeAPIURL(a,s)}canonicalizeTileURL(e,t){const i=ie(e);if(!i.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!i.path.match(/\.[\w]+$/))return e;let a="mapbox://";i.path.match(/^\/raster\/v1\//)?a+="raster/"+i.path.replace(`/${V.RASTER_URL_PREFIX}/`,""):a+="tiles/"+i.path.replace(`/${V.TILE_URL_VERSION}/`,"");let s=i.params;return t&&(s=s.filter(e=>!e.match(/^access_token=/))),s.length&&(a+="?"+s.join("&")),a}canonicalizeTileset(e,t){const i=!!t&&J(t),a=[];for(const t of e.tiles||[])ee(t)?a.push(this.canonicalizeTileURL(t,i)):a.push(t);return a}_makeAPIURL(e,t){const i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",a=ie(V.API_URL);if(e.protocol=a.protocol,e.authority=a.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==a.path&&(e.path=`${a.path}${e.path}`),!V.REQUIRE_ACCESS_TOKEN)return ae(e);if(!(t=t||V.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(e=>-1===e.indexOf("access_token")),e.params.push("access_token="+t),ae(e)}},e.RequestPerformance=mc,e.ResourceType=xe,e.SegmentVector=$o,e.SourceCache=Og,e.StencilMode=kg,e.StructArrayLayout1ui2=io,e.StructArrayLayout2f1f2i16=js,e.StructArrayLayout2i4=Fs,e.StructArrayLayout3f12=Gs,e.StructArrayLayout3ui6=Xs,e.StructArrayLayout4i8=Ls,e.Texture=dc,e.Tile=Fc,e.Transitionable=bs,e.Uniform1f=Uo,e.Uniform1i=class extends qo{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.Uniform2f=class extends qo{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.Uniform3f=class extends qo{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.Uniform4f=wo,e.UniformColor=Eo,e.UniformMatrix3f=class extends qo{constructor(e,t){super(e,t),this.current=Po}set(e){for(let t=0;t<9;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix3fv(this.location,!1,e);break}}},e.UniformMatrix4f=class extends qo{constructor(e,t){super(e,t),this.current=Bo}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.UnwrappedTileID=Ac,e.ValidationError=Oe,e.VectorTileWorkerSource=class{constructor(e,t,i,a){this.actor=e,this.layerIndex=t,this.availableImages=i,this.loadVectorData=a||Wg,this.loading={},this.loaded={},this.deduped=new Xg(e.scheduler)}loadTile(e,t){const i=e.uid,a=!!(e&&e.request&&e.request.collectResourceTiming)&&new mc(e.request),s=this.loading[i]=new jg(e);s.abort=this.loadVectorData(e,(e,o)=>{const r=!this.loading[i];if(delete this.loading[i],r||e||!o)return s.status="done",r||(this.loaded[i]=s),t(e);const n=o.rawData,l={};o.expires&&(l.expires=o.expires),o.cacheControl&&(l.cacheControl=o.cacheControl);const u={};if(a){const e=a.finish();e&&(u.resourceTiming=JSON.parse(JSON.stringify(e)))}s.vectorTile=o.vectorTile||new Wn.VectorTile(new Al(n)),s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,(e,i)=>{if(e||!i)return t(e);t(null,_({rawTileData:n.slice(0)},i,l,u))}),this.loaded=this.loaded||{},this.loaded[i]=s})}reloadTile(e,t){const i=this.loaded,a=e.uid,s=this;if(i&&i[a]){const o=i[a];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain;const r=(e,i)=>{const a=o.reloadCallback;a&&(delete o.reloadCallback,o.parse(o.vectorTile,s.layerIndex,this.availableImages,s.actor,a)),t(e,i)};"parsing"===o.status?o.reloadCallback=r:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,r):r())}}abortTile(e,t){const i=e.uid,a=this.loading[i];a&&(a.abort&&a.abort(),delete this.loading[i]),t()}removeTile(e,t){const i=this.loaded,a=e.uid;i&&i[a]&&delete i[a],t()}},e.WritingMode=tu,e.ZoomHistory=Ka,e.add=Cr,e.addDynamicAttributes=ju,e.altitudeFromMercatorZ=Bc,e.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);let a=e.length;const s=new Array(e.length);let o=null;e.forEach((e,r)=>{t(e,(e,t)=>{e&&(o=e),s[r]=t,0==--a&&i(o,s)})})},e.bezier=d,e.bindAll=q,e.browser=G,e.bufferConvexPolygon=function(e,t){const i=[];for(let a=0;a<e.length;a++){const s=m(a-1,-1,e.length-1),o=m(a+1,-1,e.length-1),r=e[a],n=e[o],l=e[s].sub(r).unit(),u=n.sub(r).unit(),c=u.angleWithSep(l.x,l.y),g=l.add(u).unit().mult(-1*t/Math.sin(c/2));i.push(r.add(g))}return i},e.cacheEntryPossiblyAdded=function(e){be++,be>pe&&(e.getActor().send("enforceCacheSizeLimit",he),be=0)},e.clamp=p,e.clearTileCache=function(e){const t=r.caches.delete("mapbox-tiles");e&&t.catch(e).then(()=>e())},e.clipLine=qu,e.clone=function(e){var t=new dr(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=B,e.collisionCircleLayout=Cl,e.config=V,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new dr(16);return dr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=hr,e.create$2=function(){var e=new dr(4);return dr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},e.createCommonjsModule=t,e.createExpression=ea,e.createLayout=zs,e.createStyleLayer=function(e){return"custom"===e.type?new sc(e):new nc[e.type](e)},e.cross=Pr,e.deepEqual=n,e.degToRad=g,e.div=function(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e},e.dot=Br,e.ease=h,e.easeCubicInOut=f,e.emitValidationErrors=Ra,e.endsWith=U,e.enforceCacheSizeLimit=function(e){me(),fe&&fe.then(t=>{t.keys().then(i=>{for(let a=0;a<i.length-e;a++)t.delete(i[a])})})},e.evaluateSizeForFeature=Ul,e.evaluateSizeForZoom=wl,e.evaluateVariableOffset=zu,e.evented=fs,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.extend=_,e.featureFilter=da,e.filterObject=E,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var i=t[0],a=t[1],s=t[2],o=t[3],r=i+i,n=a+a,l=s+s,u=i*r,c=a*r,g=a*n,f=s*r,d=s*n,h=s*l,p=o*r,m=o*n,y=o*l;return e[0]=1-g-h,e[1]=c+y,e[2]=f-m,e[3]=0,e[4]=c-y,e[5]=1-u-h,e[6]=d+p,e[7]=0,e[8]=f+m,e[9]=d-p,e[10]=1-u-g,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var i=Math.sin(t),a=Math.cos(t);return e[0]=a,e[1]=i,e[2]=0,e[3]=-i,e[4]=a,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.getAnchorAlignment=fu,e.getAnchorJustification=Fu,e.getArrayBuffer=we,e.getBounds=function(e){let t=1/0,i=1/0,a=-1/0,o=-1/0;for(const s of e)t=Math.min(t,s.x),i=Math.min(i,s.y),a=Math.max(a,s.x),o=Math.max(o,s.y);return{min:new s(t,i),max:new s(a,o)}},e.getImage=Se,e.getJSON=function(e,t){return Ue(_(e,{type:"json"}),t)},e.getMapSessionAPI=ge,e.getRTLTextPluginStatus=ds,e.getReferrer=qe,e.getVideo=function(e,t){const i=r.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(let t=0;t<e.length;t++){const a=r.document.createElement("source");Pe(e[t])||(i.crossOrigin="Anonymous"),a.src=e[t],i.appendChild(a)}return{cancel:()=>{}}},e.identity=pr,e.identity$1=zr,e.invert=function(e,t){var i=t[0],a=t[1],s=t[2],o=t[3],r=t[4],n=t[5],l=t[6],u=t[7],c=t[8],g=t[9],f=t[10],d=t[11],h=t[12],p=t[13],m=t[14],y=t[15],_=i*n-a*r,b=i*l-s*r,v=i*u-o*r,x=a*l-s*n,C=a*u-o*n,q=s*u-o*l,U=c*p-g*h,w=c*m-f*h,E=c*y-d*h,B=g*m-f*p,P=g*y-d*p,M=f*y-d*m,T=_*M-b*P+v*B+x*E-C*w+q*U;return T?(e[0]=(n*M-l*P+u*B)*(T=1/T),e[1]=(s*P-a*M-o*B)*T,e[2]=(p*q-m*C+y*x)*T,e[3]=(f*C-g*q-d*x)*T,e[4]=(l*E-r*M-u*w)*T,e[5]=(i*M-s*E+o*w)*T,e[6]=(m*v-h*q-y*b)*T,e[7]=(c*q-f*v+d*b)*T,e[8]=(r*P-n*E+u*U)*T,e[9]=(a*E-i*P-o*U)*T,e[10]=(h*C-p*v+y*_)*T,e[11]=(g*v-c*C-d*_)*T,e[12]=(n*w-r*B-l*U)*T,e[13]=(i*B-a*w+s*U)*T,e[14]=(p*b-h*x-m*_)*T,e[15]=(c*x-g*b+f*_)*T,e):null},e.isChar=Ja,e.isMapboxURL=J,e.latFromMercatorY=Ec,e.len=Sr,e.length=vr,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.loadVectorTile=Wg,e.makeRequest=Ue,e.mercatorXfromLng=qc,e.mercatorYfromLat=Uc,e.mercatorZfromAltitude=wc,e.mul=yr,e.mul$1=function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e},e.multiply=mr,e.mvt=Wn,e.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.normalize=Er,e.normalize$1=function(e,t){var i=t[0],a=t[1],s=t[2],o=t[3],r=i*i+a*a+s*s+o*o;return r>0&&(r=1/Math.sqrt(r)),e[0]=i*r,e[1]=a*r,e[2]=s*r,e[3]=o*r,e},e.number=Yt,e.offscreenCanvasSupported=ve,e.ortho=function(e,t,i,a,s,o,r){var n=1/(t-i),l=1/(a-s),u=1/(o-r);return e[0]=-2*n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+i)*n,e[13]=(s+a)*l,e[14]=(r+o)*u,e[15]=1,e},e.parseGlyphPBF=function(e){return new Al(e).readFields(Xl,[])},e.pbf=Al,e.perspective=function(e,t,i,a,s){var o,r=1/Math.tan(t/2);return e[0]=r/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=s&&s!==1/0?(e[10]=(s+a)*(o=1/(a-s)),e[14]=2*s*a*o):(e[10]=-1,e[14]=-2*a),e},e.pick=function(e,t){const i={};for(let a=0;a<t.length;a++){const s=t[a];s in e&&(i[s]=e[s])}return i},e.plugin=ps,e.polygonIntersectsBox=or,e.polygonIntersectsPolygon=Xo,e.polygonizeBounds=function(e,t,i=0){const a=new s(i,i),o=e.sub(a),r=t.add(a);return[o,new s(r.x,o.y),r,new s(o.x,r.y),o]},e.posAttributes=kc,e.postMapLoadEvent=ue,e.postTurnstileEvent=ne,e.potpack=Jl,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=function(e){return e*c},e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:ls,pluginURL:us}),fs.on("pluginStateChange",e),e},e.renderColorRamp=Wr,e.rotate=function(e,t,i){var a=t[0],s=t[1],o=t[2],r=t[3],n=Math.sin(i),l=Math.cos(i);return e[0]=a*l+o*n,e[1]=s*l+r*n,e[2]=a*-n+o*l,e[3]=s*-n+r*l,e},e.rotateX=function(e,t,i){var a=Math.sin(i),s=Math.cos(i),o=t[4],r=t[5],n=t[6],l=t[7],u=t[8],c=t[9],g=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*s+u*a,e[5]=r*s+c*a,e[6]=n*s+g*a,e[7]=l*s+f*a,e[8]=u*s-o*a,e[9]=c*s-r*a,e[10]=g*s-n*a,e[11]=f*s-l*a,e},e.rotateX$1=kr,e.rotateY=function(e,t,i){var a=Math.sin(i),s=Math.cos(i),o=t[0],r=t[1],n=t[2],l=t[3],u=t[8],c=t[9],g=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s-u*a,e[1]=r*s-c*a,e[2]=n*s-g*a,e[3]=l*s-f*a,e[8]=o*a+u*s,e[9]=r*a+c*s,e[10]=n*a+g*s,e[11]=l*a+f*s,e},e.rotateZ=function(e,t,i){var a=Math.sin(i),s=Math.cos(i),o=t[0],r=t[1],n=t[2],l=t[3],u=t[4],c=t[5],g=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*s+u*a,e[1]=r*s+c*a,e[2]=n*s+g*a,e[3]=l*s+f*a,e[4]=u*s-o*a,e[5]=c*s-r*a,e[6]=g*s-n*a,e[7]=f*s-l*a,e},e.rotateZ$1=function(e,t,i){i*=.5;var a=t[0],s=t[1],o=t[2],r=t[3],n=Math.sin(i),l=Math.cos(i);return e[0]=a*l+s*n,e[1]=s*l-a*n,e[2]=o*l+r*n,e[3]=r*l-o*n,e},e.scale=function(e,t,i){var a=i[0],s=i[1],o=i[2];return e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e[3]=t[3]*a,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},e.scale$2=Ur,e.scaleAndAdd=wr,e.setCacheLimits=function(e,t){he=e,pe=t},e.setRTLTextPlugin=function(e,t,i=!1){if("deferred"===ls||"loading"===ls||"loaded"===ls)throw new Error("setRTLTextPlugin cannot be called multiple times.");us=G.resolveURL(e),ls="deferred",ns=t,gs(),i||hs()},e.styleSpec=Le,e.sub=Ar,e.subtract=qr,e.symbolSize=El,e.transformMat3=function(e,t,i){var a=t[0],s=t[1],o=t[2];return e[0]=a*i[0]+s*i[3]+o*i[6],e[1]=a*i[1]+s*i[4]+o*i[7],e[2]=a*i[2]+s*i[5]+o*i[8],e},e.transformMat4=Ir,e.transformQuat=Mr,e.translate=function(e,t,i){var a,s,o,r,n,l,u,c,g,f,d,h,p=i[0],m=i[1],y=i[2];return t===e?(e[12]=t[0]*p+t[4]*m+t[8]*y+t[12],e[13]=t[1]*p+t[5]*m+t[9]*y+t[13],e[14]=t[2]*p+t[6]*m+t[10]*y+t[14],e[15]=t[3]*p+t[7]*m+t[11]*y+t[15]):(s=t[1],o=t[2],r=t[3],n=t[4],l=t[5],u=t[6],c=t[7],g=t[8],f=t[9],d=t[10],h=t[11],e[0]=a=t[0],e[1]=s,e[2]=o,e[3]=r,e[4]=n,e[5]=l,e[6]=u,e[7]=c,e[8]=g,e[9]=f,e[10]=d,e[11]=h,e[12]=a*p+n*m+g*y+t[12],e[13]=s*p+l*m+f*y+t[13],e[14]=o*p+u*m+d*y+t[14],e[15]=r*p+c*m+h*y+t[15]),e},e.triggerPluginCompletionEvent=cs,e.uniqueId=v,e.validateCustomStyleLayer=function(e){const t=[],i=e.id;return void 0===i&&t.push({message:`layers.${i}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${i}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateLight=Fa,e.validateStyle=ka,e.values=y,e.vectorTile=Wn,e.version="2.0.0",e.warnOnce=M,e.webpSupported=Z,e.window=r,e.wrap=m})),a(0,(function(e){function t(e){const i=typeof e;if("number"===i||"boolean"===i||"string"===i||null==e)return JSON.stringify(e);if(Array.isArray(e)){let i="[";for(const a of e)i+=t(a)+",";return i+"]"}const a=Object.keys(e).sort();let s="{";for(let i=0;i<a.length;i++)s+=`${JSON.stringify(a[i])}:${t(e[a[i]])},`;return s+"}"}function i(i){let a="";for(const s of e.refProperties)a+="/"+t(i[s]);return a}class a{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,a){for(const i of t){this._layerConfigs[i.id]=i;const t=this._layers[i.id]=e.createStyleLayer(i);t._featureFilter=e.featureFilter(t.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(const e of a)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const s=function(e,t){const a={};for(let s=0;s<e.length;s++){const o=t&&t[e[s].id]||i(e[s]);t&&(t[e[s].id]=o);let r=a[o];r||(r=a[o]=[]),r.push(e[s])}const s=[];for(const e in a)s.push(a[e]);return s}(e.values(this._layerConfigs),this.keyCache);for(const e of s){const t=e.map(e=>this._layers[e.id]),i=t[0];if("none"===i.visibility)continue;const a=i.source||"";let s=this.familiesBySource[a];s||(s=this.familiesBySource[a]={});const o=i.sourceLayer||"_geojsonTileLayer";let r=s[o];r||(r=s[o]=[]),r.push(t)}}}const{ImageBitmap:s}=e.window;class o{loadTile(t,i){const{uid:a,encoding:o,rawImageData:r,padding:n,buildQuadTree:l}=t,u=s&&r instanceof s?this.getImageData(r,n):r;i(null,new e.DEMData(a,u,o,n<1,l))}getImageData(t,i){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);const a=this.offscreenCanvasContext.getImageData(-i,-i,t.width+2*i,t.height+2*i);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:a.width,height:a.height},a.data)}}function r(e,t){if(0!==e.length){n(e[0],t);for(var i=1;i<e.length;i++)n(e[i],!t)}}function n(e,t){for(var i=0,a=0,s=e.length,o=s-1;a<s;o=a++)i+=(e[a][0]-e[o][0])*(e[o][1]+e[a][1]);i>=0!=!!t&&e.reverse()}const l=e.vectorTile.VectorTileFeature.prototype.toGeoJSON;class u{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const i of this._feature.geometry)t.push([new e.Point$1(i[0],i[1])]);return t}{const t=[];for(const i of this._feature.geometry){const a=[];for(const t of i)a.push(new e.Point$1(t[0],t[1]));t.push(a)}return t}}toGeoJSON(e,t,i){return l.call(this,e,t,i)}}class c{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(e){return new u(this._features[e])}}var g=e.vectorTile.VectorTileFeature,f=d;function d(e,t){this.options=t||{},this.features=e,this.length=e.length}function h(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}d.prototype.feature=function(e){return new h(this.features[e],this.options.extent)},h.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var i=0;i<t.length;i++){for(var a=t[i],s=[],o=0;o<a.length;o++)s.push(new e.Point$1(a[o][0],a[o][1]));this.geometry.push(s)}return this.geometry},h.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,i=-1/0,a=1/0,s=-1/0,o=0;o<e.length;o++)for(var r=e[o],n=0;n<r.length;n++){var l=r[n];t=Math.min(t,l.x),i=Math.max(i,l.x),a=Math.min(a,l.y),s=Math.max(s,l.y)}return[t,a,i,s]},h.prototype.toGeoJSON=g.prototype.toGeoJSON;var p=y,m=f;function y(t){var i=new e.pbf;return function(e,t){for(var i in e.layers)t.writeMessage(3,_,e.layers[i])}(t,i),i.finish()}function _(e,t){var i;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var a={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<e.length;i++)a.feature=e.feature(i),t.writeMessage(2,b,a);var s=a.keys;for(i=0;i<s.length;i++)t.writeStringField(3,s[i]);var o=a.values;for(i=0;i<o.length;i++)t.writeMessage(4,U,o[i])}function b(e,t){var i=e.feature;void 0!==i.id&&t.writeVarintField(1,i.id),t.writeMessage(2,v,e),t.writeVarintField(3,i.type),t.writeMessage(4,q,i)}function v(e,t){var i=e.feature,a=e.keys,s=e.values,o=e.keycache,r=e.valuecache;for(var n in i.properties){var l=o[n];void 0===l&&(a.push(n),o[n]=l=a.length-1),t.writeVarint(l);var u=i.properties[n],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var g=c+":"+u,f=r[g];void 0===f&&(s.push(u),r[g]=f=s.length-1),t.writeVarint(f)}}function x(e,t){return(t<<3)+(7&e)}function C(e){return e<<1^e>>31}function q(e,t){for(var i=e.loadGeometry(),a=e.type,s=0,o=0,r=i.length,n=0;n<r;n++){var l=i[n],u=1;1===a&&(u=l.length),t.writeVarint(x(1,u));for(var c=3===a?l.length-1:l.length,g=0;g<c;g++){1===g&&1!==a&&t.writeVarint(x(2,c-1));var f=l[g].x-s,d=l[g].y-o;t.writeVarint(C(f)),t.writeVarint(C(d)),s+=f,o+=d}3===a&&t.writeVarint(x(7,1))}}function U(e,t){var i=typeof e;"string"===i?t.writeStringField(1,e):"boolean"===i?t.writeBooleanField(7,e):"number"===i&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function w(e,t,i,a){E(e,i,a),E(t,2*i,2*a),E(t,2*i+1,2*a+1)}function E(e,t,i){const a=e[t];e[t]=e[i],e[i]=a}function B(e,t,i,a){const s=e-i,o=t-a;return s*s+o*o}p.fromVectorTileJs=y,p.fromGeojsonVt=function(e,t){t=t||{};var i={};for(var a in e)i[a]=new f(e[a].features,t),i[a].name=a,i[a].version=t.version,i[a].extent=t.extent;return y({layers:i})},p.GeoJSONWrapper=m;const P=e=>e[0],M=e=>e[1];class T{constructor(e,t=P,i=M,a=64,s=Float64Array){this.nodeSize=a,this.points=e;const o=e.length<65536?Uint16Array:Uint32Array,r=this.ids=new o(e.length),n=this.coords=new s(2*e.length);for(let a=0;a<e.length;a++)r[a]=a,n[2*a]=t(e[a]),n[2*a+1]=i(e[a]);!function e(t,i,a,s,o,r){if(o-s<=a)return;const n=s+o>>1;!function e(t,i,a,s,o,r){for(;o>s;){if(o-s>600){const n=o-s+1,l=a-s+1,u=Math.log(n),c=.5*Math.exp(2*u/3),g=.5*Math.sqrt(u*c*(n-c)/n)*(l-n/2<0?-1:1);e(t,i,a,Math.max(s,Math.floor(a-l*c/n+g)),Math.min(o,Math.floor(a+(n-l)*c/n+g)),r)}const n=i[2*a+r];let l=s,u=o;for(w(t,i,s,a),i[2*o+r]>n&&w(t,i,s,o);l<u;){for(w(t,i,l,u),l++,u--;i[2*l+r]<n;)l++;for(;i[2*u+r]>n;)u--}i[2*s+r]===n?w(t,i,s,u):(u++,w(t,i,u,o)),u<=a&&(s=u+1),a<=u&&(o=u-1)}}(t,i,n,s,o,r%2),e(t,i,a,s,n-1,r+1),e(t,i,a,n+1,o,r+1)}(r,n,a,0,r.length-1,0)}range(e,t,i,a){return function(e,t,i,a,s,o,r){const n=[0,e.length-1,0],l=[];let u,c;for(;n.length;){const g=n.pop(),f=n.pop(),d=n.pop();if(f-d<=r){for(let r=d;r<=f;r++)u=t[2*r],c=t[2*r+1],u>=i&&u<=s&&c>=a&&c<=o&&l.push(e[r]);continue}const h=Math.floor((d+f)/2);u=t[2*h],c=t[2*h+1],u>=i&&u<=s&&c>=a&&c<=o&&l.push(e[h]);const p=(g+1)%2;(0===g?i<=u:a<=c)&&(n.push(d),n.push(h-1),n.push(p)),(0===g?s>=u:o>=c)&&(n.push(h+1),n.push(f),n.push(p))}return l}(this.ids,this.coords,e,t,i,a,this.nodeSize)}within(e,t,i){return function(e,t,i,a,s,o){const r=[0,e.length-1,0],n=[],l=s*s;for(;r.length;){const u=r.pop(),c=r.pop(),g=r.pop();if(c-g<=o){for(let s=g;s<=c;s++)B(t[2*s],t[2*s+1],i,a)<=l&&n.push(e[s]);continue}const f=Math.floor((g+c)/2),d=t[2*f],h=t[2*f+1];B(d,h,i,a)<=l&&n.push(e[f]);const p=(u+1)%2;(0===u?i-s<=d:a-s<=h)&&(r.push(g),r.push(f-1),r.push(p)),(0===u?i+s>=d:a+s>=h)&&(r.push(f+1),r.push(c),r.push(p))}return n}(this.ids,this.coords,e,t,i,this.nodeSize)}}const A={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e};class S{constructor(e){this.options=R(Object.create(A),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:i,maxZoom:a,nodeSize:s}=this.options;t&&console.time("total time");const o=`prepare ${e.length} points`;t&&console.time(o),this.points=e;let r=[];for(let t=0;t<e.length;t++)e[t].geometry&&r.push(D(e[t],t));this.trees[a+1]=new T(r,N,$,s,Float32Array),t&&console.timeEnd(o);for(let e=a;e>=i;e--){const i=+Date.now();r=this._cluster(r,e),this.trees[e]=new T(r,N,$,s,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,r.length,+Date.now()-i)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let i=((e[0]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,e[1]));let s=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)i=-180,s=180;else if(i>s){const e=this.getClusters([i,a,180,o],t),r=this.getClusters([-180,a,s,o],t);return e.concat(r)}const r=this.trees[this._limitZoom(t)],n=r.range(F(i),L(o),F(s),L(a)),l=[];for(const e of n){const t=r.points[e];l.push(t.numPoints?z(t):this.points[t.index])}return l}getChildren(e){const t=this._getOriginId(e),i=this._getOriginZoom(e),a="No cluster with the specified id.",s=this.trees[i];if(!s)throw new Error(a);const o=s.points[t];if(!o)throw new Error(a);const r=this.options.radius/(this.options.extent*Math.pow(2,i-1)),n=s.within(o.x,o.y,r),l=[];for(const t of n){const i=s.points[t];i.parentId===e&&l.push(i.numPoints?z(i):this.points[i.index])}if(0===l.length)throw new Error(a);return l}getLeaves(e,t,i){const a=[];return this._appendLeaves(a,e,t=t||10,i=i||0,0),a}getTile(e,t,i){const a=this.trees[this._limitZoom(e)],s=Math.pow(2,e),{extent:o,radius:r}=this.options,n=r/o,l=(i-n)/s,u=(i+1+n)/s,c={features:[]};return this._addTileFeatures(a.range((t-n)/s,l,(t+1+n)/s,u),a.points,t,i,s,c),0===t&&this._addTileFeatures(a.range(1-n/s,l,1,u),a.points,s,i,s,c),t===s-1&&this._addTileFeatures(a.range(0,l,n/s,u),a.points,-1,i,s,c),c.features.length?c:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const i=this.getChildren(e);if(t++,1!==i.length)break;e=i[0].properties.cluster_id}return t}_appendLeaves(e,t,i,a,s){const o=this.getChildren(t);for(const t of o){const o=t.properties;if(o&&o.cluster?s+o.point_count<=a?s+=o.point_count:s=this._appendLeaves(e,o.cluster_id,i,a,s):s<a?s++:e.push(t),e.length===i)break}return s}_addTileFeatures(e,t,i,a,s,o){for(const r of e){const e=t[r],n=e.numPoints,l={type:1,geometry:[[Math.round(this.options.extent*(e.x*s-i)),Math.round(this.options.extent*(e.y*s-a))]],tags:n?k(e):this.points[e.index].properties};let u;n?u=e.id:this.options.generateId?u=e.index:this.points[e.index].id&&(u=this.points[e.index].id),void 0!==u&&(l.id=u),o.features.push(l)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}_cluster(e,t){const i=[],{radius:a,extent:s,reduce:o,minPoints:r}=this.options,n=a/(s*Math.pow(2,t));for(let a=0;a<e.length;a++){const s=e[a];if(s.zoom<=t)continue;s.zoom=t;const l=this.trees[t+1],u=l.within(s.x,s.y,n),c=s.numPoints||1;let g=c;for(const e of u){const i=l.points[e];i.zoom>t&&(g+=i.numPoints||1)}if(g>=r){let e=s.x*c,r=s.y*c,n=o&&c>1?this._map(s,!0):null;const f=(a<<5)+(t+1)+this.points.length;for(const i of u){const a=l.points[i];if(a.zoom<=t)continue;a.zoom=t;const u=a.numPoints||1;e+=a.x*u,r+=a.y*u,a.parentId=f,o&&(n||(n=this._map(s,!0)),o(n,this._map(a)))}s.parentId=f,i.push(I(e/g,r/g,f,g,n))}else if(i.push(s),g>1)for(const e of u){const a=l.points[e];a.zoom<=t||(a.zoom=t,i.push(a))}}return i}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?R({},e.properties):e.properties;const i=this.points[e.index].properties,a=this.options.map(i);return t&&a===i?R({},a):a}}function I(e,t,i,a,s){return{x:e,y:t,zoom:1/0,id:i,parentId:-1,numPoints:a,properties:s}}function D(e,t){const[i,a]=e.geometry.coordinates;return{x:F(i),y:L(a),zoom:1/0,index:t,parentId:-1}}function z(e){return{type:"Feature",id:e.id,properties:k(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),O(e.y)]}};var t}function k(e){const t=e.numPoints,i=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return R(R({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:i})}function F(e){return e/360+.5}function L(e){const t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function O(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function R(e,t){for(const i in t)e[i]=t[i];return e}function N(e){return e.x}function $(e){return e.y}function G(e,t,i,a,s,o){var r=s-i,n=o-a;if(0!==r||0!==n){var l=((e-i)*r+(t-a)*n)/(r*r+n*n);l>1?(i=s,a=o):l>0&&(i+=r*l,a+=n*l)}return(r=e-i)*r+(n=t-a)*n}function V(e,t,i,a){var s={id:void 0===e?null:e,type:t,geometry:i,tags:a,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,i=e.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)Z(e,t);else if("Polygon"===i||"MultiLineString"===i)for(var a=0;a<t.length;a++)Z(e,t[a]);else if("MultiPolygon"===i)for(a=0;a<t.length;a++)for(var s=0;s<t[a].length;s++)Z(e,t[a][s])}(s),s}function Z(e,t){for(var i=0;i<t.length;i+=3)e.minX=Math.min(e.minX,t[i]),e.minY=Math.min(e.minY,t[i+1]),e.maxX=Math.max(e.maxX,t[i]),e.maxY=Math.max(e.maxY,t[i+1])}function Q(e,t,i,a){if(t.geometry){var s=t.geometry.coordinates,o=t.geometry.type,r=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),n=[],l=t.id;if(i.promoteId?l=t.properties[i.promoteId]:i.generateId&&(l=a||0),"Point"===o)j(s,n);else if("MultiPoint"===o)for(var u=0;u<s.length;u++)j(s[u],n);else if("LineString"===o)H(s,n,r,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(u=0;u<s.length;u++)H(s[u],n=[],r,!1),e.push(V(l,"LineString",n,t.properties));return}X(s,n,r,!1)}else if("Polygon"===o)X(s,n,r,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(u=0;u<t.geometry.geometries.length;u++)Q(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},i,a);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<s.length;u++){var c=[];X(s[u],c,r,!0),n.push(c)}}e.push(V(l,o,n,t.properties))}}function j(e,t){t.push(W(e[0])),t.push(K(e[1])),t.push(0)}function H(e,t,i,a){for(var s,o,r=0,n=0;n<e.length;n++){var l=W(e[n][0]),u=K(e[n][1]);t.push(l),t.push(u),t.push(0),n>0&&(r+=a?(s*u-l*o)/2:Math.sqrt(Math.pow(l-s,2)+Math.pow(u-o,2))),s=l,o=u}var c=t.length-3;t[2]=1,function e(t,i,a,s){for(var o,r=s,n=a-i>>1,l=a-i,u=t[i],c=t[i+1],g=t[a],f=t[a+1],d=i+3;d<a;d+=3){var h=G(t[d],t[d+1],u,c,g,f);if(h>r)o=d,r=h;else if(h===r){var p=Math.abs(d-n);p<l&&(o=d,l=p)}}r>s&&(o-i>3&&e(t,i,o,s),t[o+2]=r,a-o>3&&e(t,o,a,s))}(t,0,c,i),t[c+2]=1,t.size=Math.abs(r),t.start=0,t.end=t.size}function X(e,t,i,a){for(var s=0;s<e.length;s++){var o=[];H(e[s],o,i,a),t.push(o)}}function W(e){return e/360+.5}function K(e){var t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function J(e,t,i,a,s,o,r,n){if(a/=t,o>=(i/=t)&&r<a)return e;if(r<i||o>=a)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],g=c.geometry,f=c.type,d=0===s?c.minX:c.minY,h=0===s?c.maxX:c.maxY;if(d>=i&&h<a)l.push(c);else if(!(h<i||d>=a)){var p=[];if("Point"===f||"MultiPoint"===f)Y(g,p,i,a,s);else if("LineString"===f)ee(g,p,i,a,s,!1,n.lineMetrics);else if("MultiLineString"===f)ie(g,p,i,a,s,!1);else if("Polygon"===f)ie(g,p,i,a,s,!0);else if("MultiPolygon"===f)for(var m=0;m<g.length;m++){var y=[];ie(g[m],y,i,a,s,!0),y.length&&p.push(y)}if(p.length){if(n.lineMetrics&&"LineString"===f){for(m=0;m<p.length;m++)l.push(V(c.id,f,p[m],c.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===p.length?(f="LineString",p=p[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===p.length?"Point":"MultiPoint"),l.push(V(c.id,f,p,c.tags))}}}return l.length?l:null}function Y(e,t,i,a,s){for(var o=0;o<e.length;o+=3){var r=e[o+s];r>=i&&r<=a&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function ee(e,t,i,a,s,o,r){for(var n,l,u=te(e),c=0===s?se:oe,g=e.start,f=0;f<e.length-3;f+=3){var d=e[f],h=e[f+1],p=e[f+2],m=e[f+3],y=e[f+4],_=0===s?d:h,b=0===s?m:y,v=!1;r&&(n=Math.sqrt(Math.pow(d-m,2)+Math.pow(h-y,2))),_<i?b>i&&(l=c(u,d,h,m,y,i),r&&(u.start=g+n*l)):_>a?b<a&&(l=c(u,d,h,m,y,a),r&&(u.start=g+n*l)):ae(u,d,h,p),b<i&&_>=i&&(l=c(u,d,h,m,y,i),v=!0),b>a&&_<=a&&(l=c(u,d,h,m,y,a),v=!0),!o&&v&&(r&&(u.end=g+n*l),t.push(u),u=te(e)),r&&(g+=n)}var x=e.length-3;d=e[x],h=e[x+1],p=e[x+2],(_=0===s?d:h)>=i&&_<=a&&ae(u,d,h,p),x=u.length-3,o&&x>=3&&(u[x]!==u[0]||u[x+1]!==u[1])&&ae(u,u[0],u[1],u[2]),u.length&&t.push(u)}function te(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ie(e,t,i,a,s,o){for(var r=0;r<e.length;r++)ee(e[r],t,i,a,s,o,!1)}function ae(e,t,i,a){e.push(t),e.push(i),e.push(a)}function se(e,t,i,a,s,o){var r=(o-t)/(a-t);return e.push(o),e.push(i+(s-i)*r),e.push(1),r}function oe(e,t,i,a,s,o){var r=(o-i)/(s-i);return e.push(t+(a-t)*r),e.push(o),e.push(1),r}function re(e,t){for(var i=[],a=0;a<e.length;a++){var s,o=e[a],r=o.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)s=ne(o.geometry,t);else if("MultiLineString"===r||"Polygon"===r){s=[];for(var n=0;n<o.geometry.length;n++)s.push(ne(o.geometry[n],t))}else if("MultiPolygon"===r)for(s=[],n=0;n<o.geometry.length;n++){for(var l=[],u=0;u<o.geometry[n].length;u++)l.push(ne(o.geometry[n][u],t));s.push(l)}i.push(V(o.id,r,s,o.tags))}return i}function ne(e,t){var i=[];i.size=e.size,void 0!==e.start&&(i.start=e.start,i.end=e.end);for(var a=0;a<e.length;a+=3)i.push(e[a]+t,e[a+1],e[a+2]);return i}function le(e,t){if(e.transformed)return e;var i,a,s,o=1<<e.z,r=e.x,n=e.y;for(i=0;i<e.features.length;i++){var l=e.features[i],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(a=0;a<u.length;a+=2)l.geometry.push(ue(u[a],u[a+1],t,o,r,n));else for(a=0;a<u.length;a++){var g=[];for(s=0;s<u[a].length;s+=2)g.push(ue(u[a][s],u[a][s+1],t,o,r,n));l.geometry.push(g)}}return e.transformed=!0,e}function ue(e,t,i,a,s,o){return[Math.round(i*(e*a-s)),Math.round(i*(t*a-o))]}function ce(e,t,i,a,s){for(var o=t===s.maxZoom?0:s.tolerance/((1<<t)*s.extent),r={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:a,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},n=0;n<e.length;n++){r.numFeatures++,ge(r,e[n],o,s);var l=e[n].minX,u=e[n].minY,c=e[n].maxX,g=e[n].maxY;l<r.minX&&(r.minX=l),u<r.minY&&(r.minY=u),c>r.maxX&&(r.maxX=c),g>r.maxY&&(r.maxY=g)}return r}function ge(e,t,i,a){var s=t.geometry,o=t.type,r=[];if("Point"===o||"MultiPoint"===o)for(var n=0;n<s.length;n+=3)r.push(s[n]),r.push(s[n+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)fe(r,s,e,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(n=0;n<s.length;n++)fe(r,s[n],e,i,"Polygon"===o,0===n);else if("MultiPolygon"===o)for(var l=0;l<s.length;l++){var u=s[l];for(n=0;n<u.length;n++)fe(r,u[n],e,i,!0,0===n)}if(r.length){var c=t.tags||null;if("LineString"===o&&a.lineMetrics){for(var g in c={},t.tags)c[g]=t.tags[g];c.mapbox_clip_start=s.start/s.size,c.mapbox_clip_end=s.end/s.size}var f={geometry:r,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:c};null!==t.id&&(f.id=t.id),e.features.push(f)}}function fe(e,t,i,a,s,o){var r=a*a;if(a>0&&t.size<(s?r:a))i.numPoints+=t.length/3;else{for(var n=[],l=0;l<t.length;l+=3)(0===a||t[l+2]>r)&&(i.numSimplified++,n.push(t[l]),n.push(t[l+1])),i.numPoints++;s&&function(e,t){for(var i=0,a=0,s=e.length,o=s-2;a<s;o=a,a+=2)i+=(e[a]-e[o])*(e[a+1]+e[o+1]);if(i>0===t)for(a=0,s=e.length;a<s/2;a+=2){var r=e[a],n=e[a+1];e[a]=e[s-2-a],e[a+1]=e[s-1-a],e[s-2-a]=r,e[s-1-a]=n}}(n,o),e.push(n)}}function de(e,t){var i=(t=this.options=function(e,t){for(var i in t)e[i]=t[i];return e}(Object.create(this.options),t)).debug;if(i&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var a=function(e,t){var i=[];if("FeatureCollection"===e.type)for(var a=0;a<e.features.length;a++)Q(i,e.features[a],t,a);else Q(i,"Feature"===e.type?e:{geometry:e},t);return i}(e,t);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(a=function(e,t){var i=t.buffer/t.extent,a=e,s=J(e,1,-1-i,i,0,-1,2,t),o=J(e,1,1-i,2+i,0,-1,2,t);return(s||o)&&(a=J(e,1,-i,1+i,0,-1,2,t)||[],s&&(a=re(s,1).concat(a)),o&&(a=a.concat(re(o,-1)))),a}(a,t)).length&&this.splitTile(a,0,0,0),i&&(a.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function he(e,t,i){return 32*((1<<e)*i+t)+e}function pe(e,t){const i=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);const a=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!a)return t(null,null);const s=new c(a.features);let o=p(s);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:s,rawData:o.buffer})}de.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},de.prototype.splitTile=function(e,t,i,a,s,o,r){for(var n=[e,t,i,a],l=this.options,u=l.debug;n.length;){a=n.pop(),i=n.pop(),t=n.pop(),e=n.pop();var c=1<<t,g=he(t,i,a),f=this.tiles[g];if(!f&&(u>1&&console.time("creation"),f=this.tiles[g]=ce(e,t,i,a,l),this.tileCoords.push({z:t,x:i,y:a}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,i,a,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var d="z"+t;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(f.source=e,s){if(t===l.maxZoom||t===s)continue;var h=1<<s-t;if(i!==Math.floor(o/h)||a!==Math.floor(r/h))continue}else if(t===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue;if(f.source=null,0!==e.length){u>1&&console.time("clipping");var p,m,y,_,b,v,x=.5*l.buffer/l.extent,C=.5-x,q=.5+x,U=1+x;p=m=y=_=null,b=J(e,c,i-x,i+q,0,f.minX,f.maxX,l),v=J(e,c,i+C,i+U,0,f.minX,f.maxX,l),e=null,b&&(p=J(b,c,a-x,a+q,1,f.minY,f.maxY,l),m=J(b,c,a+C,a+U,1,f.minY,f.maxY,l),b=null),v&&(y=J(v,c,a-x,a+q,1,f.minY,f.maxY,l),_=J(v,c,a+C,a+U,1,f.minY,f.maxY,l),v=null),u>1&&console.timeEnd("clipping"),n.push(p||[],t+1,2*i,2*a),n.push(m||[],t+1,2*i,2*a+1),n.push(y||[],t+1,2*i+1,2*a),n.push(_||[],t+1,2*i+1,2*a+1)}}},de.prototype.getTile=function(e,t,i){var a=this.options,s=a.extent,o=a.debug;if(e<0||e>24)return null;var r=1<<e,n=he(e,t=(t%r+r)%r,i);if(this.tiles[n])return le(this.tiles[n],s);o>1&&console.log("drilling down to z%d-%d-%d",e,t,i);for(var l,u=e,c=t,g=i;!l&&u>0;)u--,c=Math.floor(c/2),g=Math.floor(g/2),l=this.tiles[he(u,c,g)];return l&&l.source?(o>1&&console.log("found parent tile z%d-%d-%d",u,c,g),o>1&&console.time("drilling down"),this.splitTile(l.source,u,c,g,e,t,i),o>1&&console.timeEnd("drilling down"),this.tiles[n]?le(this.tiles[n],s):null):null};class me extends e.VectorTileWorkerSource{constructor(e,t,i,a){super(e,t,i,pe),a&&(this.loadGeoJSON=a)}loadData(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const t=this._pendingCallback,i=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const a=!!(i&&i.request&&i.request.collectResourceTiming)&&new e.RequestPerformance(i.request);this.loadGeoJSON(i,(s,o)=>{if(s||!o)return t(s);if("object"!=typeof o)return t(new Error(`Input data given to '${i.source}' is not a valid GeoJSON object.`));{!function e(t,i){var a,s=t&&t.type;if("FeatureCollection"===s)for(a=0;a<t.features.length;a++)e(t.features[a],i);else if("GeometryCollection"===s)for(a=0;a<t.geometries.length;a++)e(t.geometries[a],i);else if("Feature"===s)e(t.geometry,i);else if("Polygon"===s)r(t.coordinates,i);else if("MultiPolygon"===s)for(a=0;a<t.coordinates.length;a++)r(t.coordinates[a],i);return t}(o,!0);try{if(i.filter){const t=e.createExpression(i.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===t.result)throw new Error(t.value.map(e=>`${e.key}: ${e.message}`).join(", "));const a=o.features.filter(e=>t.value.evaluate({zoom:0},e));o={type:"FeatureCollection",features:a}}this._geoJSONIndex=i.cluster?new S(function({superclusterOptions:t,clusterProperties:i}){if(!i||!t)return t;const a={},s={},o={accumulated:null,zoom:0},r={properties:null},n=Object.keys(i);for(const t of n){const[o,r]=i[t],n=e.createExpression(r),l=e.createExpression("string"==typeof o?[o,["accumulated"],["get",t]]:o);a[t]=n.value,s[t]=l.value}return t.map=e=>{r.properties=e;const t={};for(const e of n)t[e]=a[e].evaluate(o,r);return t},t.reduce=(e,t)=>{r.properties=t;for(const t of n)o.accumulated=e[t],e[t]=s[t].evaluate(o,r)},t}(i)).load(o.features):function(e,t){return new de(e,t)}(o,i.geojsonVtOptions)}catch(s){return t(s)}this.loaded={};const n={};if(a){const e=a.finish();e&&(n.resourceTiming={},n.resourceTiming[i.source]=JSON.parse(JSON.stringify(e)))}t(null,n)}})}coalesce(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())}reloadTile(e,t){const i=this.loaded;return i&&i[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,i){if(t.request)e.getJSON(t.request,i);else{if("string"!=typeof t.data)return i(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return i(null,JSON.parse(t.data))}catch(e){return i(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}removeSource(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class ye{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:me},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}checkIfReady(e,t,i){i()}setReferrer(e,t){this.referrer=t}setImages(e,t,i){this.availableImages[e]=t;for(const i in this.workerSources[e]){const a=this.workerSources[e][i];for(const e in a)a[e].availableImages=t}i()}enableTerrain(e,t,i){this.terrain=t,i()}setLayers(e,t,i){this.getLayerIndex(e).replace(t),i()}updateLayers(e,t,i){this.getLayerIndex(e).update(t.layers,t.removedIds),i()}loadTile(t,i,a){const s=this.enableTerrain?e.extend({enableTerrain:this.terrain},i):i;this.getWorkerSource(t,i.type,i.source).loadTile(s,a)}loadDEMTile(t,i,a){const s=this.enableTerrain?e.extend({buildQuadTree:this.terrain},i):i;this.getDEMWorkerSource(t,i.source).loadTile(s,a)}reloadTile(t,i,a){const s=this.enableTerrain?e.extend({enableTerrain:this.terrain},i):i;this.getWorkerSource(t,i.type,i.source).reloadTile(s,a)}abortTile(e,t,i){this.getWorkerSource(e,t.type,t.source).abortTile(t,i)}removeTile(e,t,i){this.getWorkerSource(e,t.type,t.source).removeTile(t,i)}removeSource(e,t,i){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const a=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==a.removeSource?a.removeSource(t,i):i()}loadWorkerSource(e,t,i){try{this.self.importScripts(t.url),i()}catch(e){i(e.toString())}}syncRTLPluginState(t,i,a){try{e.plugin.setState(i);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const i=e.plugin.isParsed();a(i?void 0:new Error("RTL Text Plugin failed to import scripts from "+t),i)}}catch(e){a(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new a),t}getWorkerSource(e,t,i){return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][i]||(this.workerSources[e][t][i]=new this.workerSourceTypes[t]({send:(t,i,a,s,o,r)=>{this.actor.send(t,i,a,e,s,r)},scheduler:this.actor.scheduler},this.getLayerIndex(e),this.getAvailableImages(e))),this.workerSources[e][t][i]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new o),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,i){e.enforceCacheSizeLimit(i)}getWorkerPerformanceMetrics(e,t,i){i(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new ye(self)),ye})),a(0,(function(e){var t=e.createCommonjsModule((function(e){function t(e){return!i(e)}function i(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,i=new Blob([""],{type:"text/javascript"}),a=URL.createObjectURL(i);try{t=new Worker(a),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(a),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){const e=document.createElement("canvas");e.width=e.height=1;const t=e.getContext("2d");if(!t)return!1;const i=t.getImageData(0,0,1,1);return i&&i.width===e.width}()?(void 0===a[i=e&&e.failIfMajorPerformanceCaveat]&&(a[i]=function(e){const i=function(e){var i=document.createElement("canvas"),a=Object.create(t.webGLContextAttributes);return a.failIfMajorPerformanceCaveat=e,i.probablySupportsContext?i.probablySupportsContext("webgl",a)||i.probablySupportsContext("experimental-webgl",a):i.supportsContext?i.supportsContext("webgl",a)||i.supportsContext("experimental-webgl",a):i.getContext("webgl",a)||i.getContext("experimental-webgl",a)}(e);if(!i)return!1;const a=i.createShader(i.VERTEX_SHADER);return!(!a||i.isContextLost())&&(i.shaderSource(a,"void main() {}"),i.compileShader(a),!0===i.getShaderParameter(a,i.COMPILE_STATUS))}(i)),a[i]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}e.exports?e.exports=t:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=t,window.mapboxgl.notSupportedReason=i);var a={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}));const i={create:function(t,i,a){const s=e.window.document.createElement(t);return void 0!==i&&(s.className=i),a&&a.appendChild(s),s},createNS:function(t,i){return e.window.document.createElementNS(t,i)}},a=e.window.document&&e.window.document.documentElement.style;function s(e){if(!a)return e[0];for(let t=0;t<e.length;t++)if(e[t]in a)return e[t];return e[0]}const o=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);let r;i.disableDrag=function(){a&&o&&(r=a[o],a[o]="none")},i.enableDrag=function(){a&&o&&(a[o]=r)};const n=s(["transform","WebkitTransform"]);i.setTransform=function(e,t){e.style[n]=t};let l=!1;try{const t=Object.defineProperty({},"passive",{get(){l=!0}});e.window.addEventListener("test",t,t),e.window.removeEventListener("test",t,t)}catch(e){l=!1}i.addEventListener=function(e,t,i,a={}){e.addEventListener(t,i,"passive"in a&&l?a:a.capture)},i.removeEventListener=function(e,t,i,a={}){e.removeEventListener(t,i,"passive"in a&&l?a:a.capture)};const u=function(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",u,!0)};function c(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}i.suppressClick=function(){e.window.addEventListener("click",u,!0),e.window.setTimeout(()=>{e.window.removeEventListener("click",u,!0)},0)},i.mousePos=function(t,i){const a=t.getBoundingClientRect();return new e.Point(i.clientX-a.left-t.clientLeft,i.clientY-a.top-t.clientTop)},i.touchPos=function(t,i){const a=t.getBoundingClientRect(),s=[];for(let o=0;o<i.length;o++)s.push(new e.Point(i[o].clientX-a.left-t.clientLeft,i[o].clientY-a.top-t.clientTop));return s},i.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},i.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};class g extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,i){let a=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),a=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),a=!1),this._validateContent(i.content,i)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),a=!1),a}_validateStretch(e,t){if(!e)return!0;let i=0;for(const a of e){if(a[0]<i||a[1]<a[0]||t<a[1])return!1;i=a[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let i=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(i=!1);this.isLoaded()||i?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,i){const a={};for(const i of t){this.images[i]||this.fire(new e.Event("styleimagemissing",{id:i}));const t=this.images[i];t?a[i]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}i(null,a)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const i=this.patterns[t],a=this.getImage(t);if(!a)return null;if(i&&i.position.version===a.version)return i.position;if(i)i.position.version=a.version;else{const i={w:a.data.width+2,h:a.data.height+2,x:0,y:0},s=new e.ImagePosition(i,a);this.patterns[t]={bin:i,position:s}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const i=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:i,h:a}=e.potpack(t),s=this.atlasImage;s.resize({width:i||1,height:a||1});for(const t in this.patterns){const{bin:i}=this.patterns[t],a=i.x+1,o=i.y+1,r=this.images[t].data,n=r.width,l=r.height;e.RGBAImage.copy(r,s,{x:0,y:0},{x:a,y:o},{width:n,height:l}),e.RGBAImage.copy(r,s,{x:0,y:l-1},{x:a,y:o-1},{width:n,height:1}),e.RGBAImage.copy(r,s,{x:0,y:0},{x:a,y:o+l},{width:n,height:1}),e.RGBAImage.copy(r,s,{x:n-1,y:0},{x:a-1,y:o},{width:1,height:l}),e.RGBAImage.copy(r,s,{x:0,y:0},{x:a+n,y:o},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];c(e)&&this.updateImage(t,e)}}}var f=p,d=p,h=1e20;function p(e,t,i,a,s,o){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=a||.25,this.fontFamily=s||"sans-serif",this.fontWeight=o||"normal",this.radius=i||8;var r=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=r,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(r*r),this.gridInner=new Float64Array(r*r),this.f=new Float64Array(r),this.d=new Float64Array(r),this.z=new Float64Array(r+1),this.v=new Int16Array(r),this.middle=Math.round(r/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function m(e,t,i,a,s,o,r){for(var n=0;n<t;n++){for(var l=0;l<i;l++)a[l]=e[l*t+n];for(y(a,s,o,r,i),l=0;l<i;l++)e[l*t+n]=s[l]}for(l=0;l<i;l++){for(n=0;n<t;n++)a[n]=e[l*t+n];for(y(a,s,o,r,t),n=0;n<t;n++)e[l*t+n]=Math.sqrt(s[n])}}function y(e,t,i,a,s){i[0]=0,a[0]=-h,a[1]=+h;for(var o=1,r=0;o<s;o++){for(var n=(e[o]+o*o-(e[i[r]]+i[r]*i[r]))/(2*o-2*i[r]);n<=a[r];)r--,n=(e[o]+o*o-(e[i[r]]+i[r]*i[r]))/(2*o-2*i[r]);i[++r]=o,a[r]=n,a[r+1]=+h}for(o=0,r=0;o<s;o++){for(;a[r+1]<o;)r++;t[o]=(o-i[r])*(o-i[r])+e[i[r]]}}p.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),a=0;a<this.size*this.size;a++){var s=t.data[4*a+3]/255;this.gridOuter[a]=1===s?0:0===s?h:Math.pow(Math.max(0,.5-s),2),this.gridInner[a]=1===s?h:0===s?0:Math.pow(Math.max(0,s-.5),2)}for(m(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),m(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),a=0;a<this.size*this.size;a++)i[a]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[a]-this.gridInner[a])/this.radius+this.cutoff))));return i},f.default=d;class _{constructor(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}setURL(e){this.url=e}getGlyphs(t,i){const a=[];for(const e in t)for(const i of t[e])a.push({stack:e,id:i});e.asyncAll(a,({stack:e,id:t},i)=>{let a=this.entries[e];a||(a=this.entries[e]={glyphs:{},requests:{},ranges:{}});let s=a.glyphs[t];if(void 0!==s)return void i(null,{stack:e,id:t,glyph:s});if(s=this._tinySDF(a,e,t),s)return a.glyphs[t]=s,void i(null,{stack:e,id:t,glyph:s});const o=Math.floor(t/256);if(256*o>65535)return void i(new Error("glyphs > 65535 not supported"));if(a.ranges[o])return void i(null,{stack:e,id:t,glyph:s});let r=a.requests[o];r||(r=a.requests[o]=[],_.loadGlyphRange(e,o,this.url,this.requestManager,(e,t)=>{if(t){for(const e in t)this._doesCharSupportLocalGlyph(+e)||(a.glyphs[+e]=t[+e]);a.ranges[o]=!0}for(const i of r)i(e,t);delete a.requests[o]})),r.push((a,s)=>{a?i(a):s&&i(null,{stack:e,id:t,glyph:s[t]||null})})},(e,t)=>{if(e)i(e);else if(t){const e={};for(const{stack:i,id:a,glyph:s}of t)(e[i]||(e[i]={}))[a]=s&&{id:s.id,bitmap:s.bitmap.clone(),metrics:s.metrics};i(null,e)}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](t)||e.isChar["Hangul Syllables"](t)||e.isChar.Hiragana(t)||e.isChar.Katakana(t))}_tinySDF(t,i,a){const s=this.localIdeographFontFamily;if(!s)return;if(!this._doesCharSupportLocalGlyph(a))return;let o=t.tinySDF;if(!o){let e="400";/bold/i.test(i)?e="900":/medium/i.test(i)?e="500":/light/i.test(i)&&(e="200"),o=t.tinySDF=new _.TinySDF(24,3,8,.25,s,e)}return{id:a,bitmap:new e.AlphaImage({width:30,height:30},o.draw(String.fromCharCode(a))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}}_.loadGlyphRange=function(t,i,a,s,o){const r=256*i,n=r+255,l=s.transformRequest(s.normalizeGlyphsURL(a).replace("{fontstack}",t).replace("{range}",`${r}-${n}`),e.ResourceType.Glyphs);e.getArrayBuffer(l,(t,i)=>{if(t)o(t);else if(i){const t={};for(const a of e.parseGlyphPBF(i))t[a.id]=a;o(null,t)}})},_.TinySDF=f;const b=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new class{constructor(){this.specification=e.styleSpec.light.position}possiblyEvaluate(t,i){return function([t,i,a]){const s=e.degToRad(i+90),o=e.degToRad(a);return{x:t*Math.cos(s)*Math.sin(o),y:t*Math.sin(s)*Math.sin(o),z:t*Math.cos(o),azimuthal:i,polar:a}}(t.expression.evaluate(i))}interpolate(t,i,a){return{x:e.number(t.x,i.x,a),y:e.number(t.y,i.y,a),z:e.number(t.z,i.z,a),azimuthal:e.number(t.azimuthal,i.azimuthal,a),polar:e.number(t.polar,i.polar,a)}}},color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)});class v extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(b),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,i={}){if(!this._validate(e.validateLight,t,i))for(const i in t){const a=t[i];e.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),a):this._transitionable.setValue(i,a)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,i,a){return(!a||!1!==a.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))}}const x=new e.Properties({source:new e.DataConstantProperty(e.styleSpec.terrain.source),exaggeration:new e.DataConstantProperty(e.styleSpec.terrain.exaggeration)});class C extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(x),this.set(t),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(t){for(const i in t){const a=t[i];e.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),a):this._transitionable.setValue(i,a)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}}class q{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const i=e.join(",")+String(t);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(e,t)),this.dashEntry[i]}getDashRanges(e,t,i){const a=[];let s=e.length%2==1?-e[e.length-1]*i:0,o=e[0]*i,r=!0;a.push({left:s,right:o,isDash:r,zeroLength:0===e[0]});let n=e[0];for(let t=1;t<e.length;t++){r=!r;const l=e[t];s=n*i,n+=l,o=n*i,a.push({left:s,right:o,isDash:r,zeroLength:0===l})}return a}addRoundDash(e,t,i){const a=t/2;for(let t=-i;t<=i;t++){const s=this.width*(this.nextRow+i+t);let o=0,r=e[o];for(let n=0;n<this.width;n++){n/r.right>1&&(r=e[++o]);const l=Math.abs(n-r.left),u=Math.abs(n-r.right),c=Math.min(l,u);let g;const f=t/i*(a+1);if(r.isDash){const e=a-Math.abs(f);g=Math.sqrt(c*c+e*e)}else g=a-Math.sqrt(c*c+f*f);this.data[s+n]=Math.max(0,Math.min(255,g+128))}}}addRegularDash(e){for(let t=e.length-1;t>=0;--t){const i=e[t],a=e[t+1];i.zeroLength?e.splice(t,1):a&&a.isDash===i.isDash&&(a.left=i.left,e.splice(t,1))}const t=e[0],i=e[e.length-1];t.isDash===i.isDash&&(t.left=i.left-this.width,i.right=t.right+this.width);const a=this.width*this.nextRow;let s=0,o=e[s];for(let t=0;t<this.width;t++){t/o.right>1&&(o=e[++s]);const i=Math.abs(t-o.left),r=Math.abs(t-o.right),n=Math.min(i,r);this.data[a+t]=Math.max(0,Math.min(255,(o.isDash?n:-n)+128))}}addDash(t,i){const a=i?7:0,s=2*a+1;if(this.nextRow+s>this.height)return e.warnOnce("LineAtlas out of space"),null;0===t.length&&t.push(1);let o=0;for(let i=0;i<t.length;i++)t[i]<0&&(e.warnOnce("Negative value is found in line dasharray, replacing values with 0"),t[i]=0),o+=t[i];if(0!==o){const e=this.width/o,s=this.getDashRanges(t,this.width,e);i?this.addRoundDash(s,e,a):this.addRegularDash(s)}const r={y:(this.nextRow+a+.5)/this.height,height:2*a/this.height,width:o};return this.nextRow+=s,this.dirty=!0,r}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}class U{constructor(t,i){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const a=this.workerPool.acquire(this.id);for(let e=0;e<a.length;e++){const t=new U.Actor(a[e],i,this.id);t.name="Worker "+e,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(t,i,a){e.asyncAll(this.actors,(e,a)=>{e.send(t,i,a)},a=a||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(e=>{e.remove()}),this.actors=[],this.workerPool.release(this.id)}}function w(t,i,a){return i*(e.EXTENT/(t.tileSize*Math.pow(2,a-t.tileID.overscaledZ)))}U.Actor=e.Actor;class E{constructor(e,t,i,a){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=i,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map(e=>a.pointCoordinate3D(e)),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(t,i){let a,s;if(t instanceof e.Point||"number"==typeof t[0]){const o=e.Point.convert(t);a=[e.Point.convert(t)],s=i.isPointAboveHorizon(o)}else{const o=e.Point.convert(t[0]),r=e.Point.convert(t[1]);a=[o,r],s=e.polygonizeBounds(o,r).every(e=>i.isPointAboveHorizon(e))}return new E(a,i.getCameraPoint(),s,i)}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const i=[this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,0)):this.screenBounds[1],this.cameraPoint];return e.bufferConvexPolygon(i,t)}containsTile(t,i,a){const s=t.queryPadding+1,o=a?this._bufferedCameraMercator(s,i).map(e=>t.tileID.getTilePoint(e)):this._bufferedScreenMercator(s,i).map(e=>t.tileID.getTilePoint(e)),r=this.screenGeometryMercator.map(e=>t.tileID.getTileVec3(e)),n=r.map(t=>new e.Point(t[0],t[1])),l=i.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),u=t.tileID.getTileVec3(l),c=r.map(t=>{const i=e.sub(t,t,u);return e.normalize(i,i),new e.Ray(u,i)}),g=w(t,1,i.zoom);if(e.polygonIntersectsBox(o,0,0,e.EXTENT,e.EXTENT))return{queryGeometry:this,tilespaceGeometry:n,tilespaceRays:c,bufferedTilespaceGeometry:o,bufferedTilespaceBounds:(f=e.getBounds(o),f.min.x=e.clamp(f.min.x,0,e.EXTENT),f.min.y=e.clamp(f.min.y,0,e.EXTENT),f.max.x=e.clamp(f.max.x,0,e.EXTENT),f.max.y=e.clamp(f.max.y,0,e.EXTENT),f),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:g};var f}_bufferedScreenMercator(e,t){const i=B(e);if(this._screenRaycastCache[i])return this._screenRaycastCache[i];{const a=this.bufferedScreenGeometry(e).map(e=>t.pointCoordinate3D(e));return this._screenRaycastCache[i]=a,a}}_bufferedCameraMercator(e,t){const i=B(e);if(this._cameraRaycastCache[i])return this._cameraRaycastCache[i];{const a=this.bufferedCameraGeometry(e).map(e=>t.pointCoordinate3D(e));return this._cameraRaycastCache[i]=a,a}}}function B(e){return 100*e|0}function P(t,i,a){const s=function(s,o){if(s)return a(s);if(o){const s=e.pick(e.extend(o,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);o.vector_layers&&(s.vectorLayers=o.vector_layers,s.vectorLayerIds=s.vectorLayers.map(e=>e.id)),s.tiles=i.canonicalizeTileset(s,t.url),a(null,s)}};return t.url?e.getJSON(i.transformRequest(i.normalizeSourceURL(t.url),e.ResourceType.Source),s):e.browser.frame(()=>s(null,t))}class M{constructor(t,i,a){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=i||0,this.maxzoom=a||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const i=Math.pow(2,t.z),a=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*i),s=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*i),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*i),r=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*i);return t.x>=a&&t.x<o&&t.y>=s&&t.y<r}}class T extends e.Evented{constructor(t,i,a,s){super(),this.id=t,this.dispatcher=a,this.setEventedParent(s),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},i),e.extend(this,e.pick(i,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=P(this._options,this.map._requestManager,(t,i)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):i&&(e.extend(this,i),i.bounds&&(this.tileBounds=new M(i.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(i.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,i){const a=e.browser.devicePixelRatio>=2,s=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),a,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(s,e.ResourceType.Tile),(a,s)=>{if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(a)t.state="errored",i(a);else if(s){this.map._refreshExpiredTiles&&t.setExpiryData(s),delete s.cacheControl,delete s.expires;const a=this.map.painter.context,o=a.gl;t.texture=this.map.painter.getTileTexture(s.width),t.texture?t.texture.update(s,{useMipmap:!0}):(t.texture=new e.Texture(a,s,o.RGBA,{useMipmap:!0}),t.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),i(null)}})}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}}var A=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class S extends e.Evented{constructor(e,t,i,a){super(),this.id=e,this.dispatcher=i,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(a),this.options=t}load(t,i){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(a,s)=>{this._loaded=!0,a?this.fire(new e.ErrorEvent(a)):s&&(this.image=s,t&&(this.coordinates=t),i&&i(),this._finishLoading())})}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}setCoordinates(t){this.coordinates=t;const i=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){let i=1/0,a=1/0,s=-1/0,o=-1/0;for(const e of t)i=Math.min(i,e.x),a=Math.min(a,e.y),s=Math.max(s,e.x),o=Math.max(o,e.y);const r=Math.max(s-i,o-a),n=Math.max(0,Math.floor(-Math.log(r)/Math.LN2)),l=Math.pow(2,n);return new e.CanonicalTileID(n,Math.floor((i+s)/2*l),Math.floor((a+o)/2*l))}(i),this.minzoom=this.maxzoom=this.tileID.z;const a=i.map(e=>this.tileID.getTilePoint(e)._round());return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(a[0].x,a[0].y,0,0),this._boundsArray.emplaceBack(a[1].x,a[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(a[3].x,a[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(a[2].x,a[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,i=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(t,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const I={vector:class extends e.Evented{constructor(t,i,a,s){if(super(),this.id=t,this.dispatcher=a,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(i,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(s),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=P(this._options,this.map._requestManager,(t,i)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):i&&(e.extend(this,i),i.bounds&&(this.tileBounds=new M(i.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(i.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e();const t=this.map.style._getSourceCaches(this.id);for(const e of t)e.clearTiles();this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}loadTile(t,i){const a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),s={request:this.map._requestManager.transformRequest(a,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(s.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=i:t.request=t.actor.send("reloadTile",s,o.bind(this));else if(t.actor=this._tileWorkers[a]=this._tileWorkers[a]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",s,o.bind(this));else{const i=e.loadVectorTile.call({deduped:this._deduped},s,(e,i)=>{e||!i?o.call(this,e):(s.data={cacheControl:i.cacheControl,expires:i.expires,rawData:i.rawData.slice(0)},t.actor&&t.actor.send("loadTile",s,o.bind(this)))},!0);t.request={cancel:i}}function o(a,s){return delete t.request,t.aborted?i(null):a&&404!==a.status?i(a):(s&&s.resourceTiming&&(t.resourceTiming=s.resourceTiming),this.map._refreshExpiredTiles&&s&&t.setExpiryData(s),t.loadVectorData(s,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:T,"raster-dem":class extends T{constructor(t,i,a,s){super(t,i,a,s),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(t,i){const a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function s(e,a){e&&(t.state="errored",i(e)),a&&(t.dem=a,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",i(null))}t.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),function(a,o){if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(a)t.state="errored",i(a);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData(o),delete o.cacheControl,delete o.expires;const i=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),a=1-(o.width-e.prevPowerOfTwo(o.width))/2;a<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const r=i?o:e.browser.getImageData(o,a),n={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:r,encoding:this.encoding,padding:a};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",n,s.bind(this)))}}.bind(this))}_getNeighboringTiles(t){const i=t.canonical,a=Math.pow(2,i.z),s=(i.x-1+a)%a,o=0===i.x?t.wrap-1:t.wrap,r=(i.x+1+a)%a,n=i.x+1===a?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,o,i.z,s,i.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,n,i.z,r,i.y).key]={backfilled:!1},i.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,o,i.z,s,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,n,i.z,r,i.y-1).key]={backfilled:!1}),i.y+1<a&&(l[new e.OverscaledTileID(t.overscaledZ,o,i.z,s,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,n,i.z,r,i.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,i,a,s){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=a.getActor(),this.setEventedParent(s),this._data=i.data,this._options=e.extend({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*o,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.EXTENT,radius:(i.clusterRadius||50)*o,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}load(){this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(t=>{if(t)return void this.fire(new e.ErrorEvent(t));const i={dataType:"source",sourceDataType:"metadata"};this._collectResourceTiming&&this._resourceTiming&&this._resourceTiming.length>0&&(i.resourceTiming=this._resourceTiming,this._resourceTiming=[]),this.fire(new e.Event("data",i))})}onAdd(e){this.map=e,this.load()}setData(t){return this._data=t,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(t=>{if(t)return void this.fire(new e.ErrorEvent(t));const i={dataType:"source",sourceDataType:"content"};this._collectResourceTiming&&this._resourceTiming&&this._resourceTiming.length>0&&(i.resourceTiming=this._resourceTiming,this._resourceTiming=[]),this.fire(new e.Event("data",i))}),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,i,a){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:i},a),this}_updateWorkerData(t){this._loaded=!1;const i=e.extend({},this.workerOptions),a=this._data;"string"==typeof a?(i.request=this.map._requestManager.transformRequest(e.browser.resolveURL(a),e.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(a),this.actor.send(this.type+".loadData",i,(e,a)=>{this._removed||a&&a.abandoned||(this._loaded=!0,a&&a.resourceTiming&&a.resourceTiming[this.id]&&(this._resourceTiming=a.resourceTiming[this.id].slice(0)),this.actor.send(this.type+".coalesce",{source:i.source},null),t(e))})}loaded(){return this._loaded}loadTile(t,i){const a=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(a,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(e,s)=>(delete t.request,t.unloadVectorData(),t.aborted?i(null):e?i(e):(t.loadVectorData(s,this.map.painter,"reloadTile"===a),i(null))))}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends S{constructor(e,t,i,a){super(e,t,i,a),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const i of t.urls)this.urls.push(this.map._requestManager.transformRequest(i,e.ResourceType.Source).url);e.getVideo(this.urls,(t,i)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):i&&(this.video=i,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const i=this.video.seekable;t<i.start(0)||t>i.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,i=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:S,canvas:class extends S{constructor(t,i,a,s){super(t,i,a,s),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(e=>!Array.isArray(e)||2!==e.length||e.some(e=>"number"!=typeof e))||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context,a=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(i,this.canvas,a.RGBA,{premultiply:!0});for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}},D=function(t,i,a,s){const o=new I[i.type](t,i,a,s);if(o.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${o.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],o),o};function z(t,i){const a=e.identity([]);return e.scale(a,a,[.5*t.width,.5*-t.height,1]),e.translate(a,a,[1,-1,0]),e.multiply(a,a,t.calculatePosMatrix(i.toUnwrapped()))}function k(e,t,i,a,s,o,r,n=!1){const l=e.tilesIn(a,r,n);l.sort(L);const u=[];for(const a of l)u.push({wrappedTileID:a.tile.tileID.wrapped().key,queryResults:a.tile.queryRenderedFeatures(t,i,e._state,a,s,o,z(e.transform,a.tile.tileID),n)});const c=function(e){const t={},i={};for(const a of e){const e=a.queryResults,s=a.wrappedTileID,o=i[s]=i[s]||{};for(const i in e){const a=e[i],s=o[i]=o[i]||{},r=t[i]=t[i]||[];for(const e of a)s[e.featureIndex]||(s[e.featureIndex]=!0,r.push(e))}}return t}(u);for(const t in c)c[t].forEach(t=>{const i=t.feature,a=e.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=a});return c}function F(e,t){const i=e.getRenderableIds().map(t=>e.getTileByID(t)),a=[],s={};for(let e=0;e<i.length;e++){const o=i[e],r=o.tileID.canonical.key;s[r]||(s[r]=!0,o.querySourceFeatures(a,t))}return a}function L(e,t){const i=e.tileID,a=t.tileID;return i.overscaledZ-a.overscaledZ||i.canonical.y-a.canonical.y||i.wrap-a.wrap||i.canonical.x-a.canonical.x}function O(){return new e.window.Worker(Cs.workerUrl)}const R="mapboxgl_preloaded_worker_pool";class N{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<N.workerCount;)this.workers.push(new O);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach(e=>{e.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[R]}numActive(){return Object.keys(this.active).length}}let $;function G(){return $||($=new N),$}function V(t,i){const a={};for(const e in t)"ref"!==e&&(a[e]=t[e]);return e.refProperties.forEach(e=>{e in i&&(a[e]=i[e])}),a}function Z(e){e=e.slice();const t=Object.create(null);for(let i=0;i<e.length;i++)t[e[i].id]=e[i];for(let i=0;i<e.length;i++)"ref"in e[i]&&(e[i]=V(e[i],t[e[i].ref]));return e}N.workerCount=2;const Q={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain"};function j(e,t,i){i.push({command:Q.addSource,args:[e,t[e]]})}function H(e,t,i){t.push({command:Q.removeSource,args:[e]}),i[e]=!0}function X(e,t,i,a){H(e,i,a),j(e,t,i)}function W(t,i,a){let s;for(s in t[a])if(t[a].hasOwnProperty(s)&&"data"!==s&&!e.deepEqual(t[a][s],i[a][s]))return!1;for(s in i[a])if(i[a].hasOwnProperty(s)&&"data"!==s&&!e.deepEqual(t[a][s],i[a][s]))return!1;return!0}function K(t,i,a,s,o,r){let n;for(n in i=i||{},t=t||{})t.hasOwnProperty(n)&&(e.deepEqual(t[n],i[n])||a.push({command:r,args:[s,n,i[n],o]}));for(n in i)i.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(e.deepEqual(t[n],i[n])||a.push({command:r,args:[s,n,i[n],o]}))}function J(e){return e.id}function Y(e,t){return e[t.id]=t,e}class ee{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let i=1,a=this._distances[i];const s=t*this.paddedLength+this.padding;for(;a<s&&i<this._distances.length;)a=this._distances[++i];const o=i-1,r=this._distances[o],n=a-r,l=n>0?(s-r)/n:0;return this.points[o].mult(1-l).add(this.points[i].mult(l))}}class te{constructor(e,t,i){const a=this.boxCells=[],s=this.circleCells=[];this.xCellCount=Math.ceil(e/i),this.yCellCount=Math.ceil(t/i);for(let e=0;e<this.xCellCount*this.yCellCount;e++)a.push([]),s.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,i,a,s){this._forEachCell(t,i,a,s,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(a),this.bboxes.push(s)}insertCircle(e,t,i,a){this._forEachCell(t-a,i-a,t+a,i+a,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(i),this.circles.push(a)}_insertBoxCell(e,t,i,a,s,o){this.boxCells[s].push(o)}_insertCircleCell(e,t,i,a,s,o){this.circleCells[s].push(o)}_query(e,t,i,a,s,o){if(i<0||e>this.width||a<0||t>this.height)return!s&&[];const r=[];if(e<=0&&t<=0&&this.width<=i&&this.height<=a){if(s)return!0;for(let e=0;e<this.boxKeys.length;e++)r.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],i=this.circles[3*e+1],a=this.circles[3*e+2];r.push({key:this.circleKeys[e],x1:t-a,y1:i-a,x2:t+a,y2:i+a})}return o?r.filter(o):r}return this._forEachCell(e,t,i,a,this._queryCell,r,{hitTest:s,seenUids:{box:{},circle:{}}},o),s?r.length>0:r}_queryCircle(e,t,i,a,s){const o=e-i,r=e+i,n=t-i,l=t+i;if(r<0||o>this.width||l<0||n>this.height)return!a&&[];const u=[];return this._forEachCell(o,n,r,l,this._queryCellCircle,u,{hitTest:a,circle:{x:e,y:t,radius:i},seenUids:{box:{},circle:{}}},s),a?u.length>0:u}query(e,t,i,a,s){return this._query(e,t,i,a,!1,s)}hitTest(e,t,i,a,s){return this._query(e,t,i,a,!0,s)}hitTestCircle(e,t,i,a){return this._queryCircle(e,t,i,!0,a)}_queryCell(e,t,i,a,s,o,r,n){const l=r.seenUids,u=this.boxCells[s];if(null!==u){const s=this.bboxes;for(const c of u)if(!l.box[c]){l.box[c]=!0;const u=4*c;if(e<=s[u+2]&&t<=s[u+3]&&i>=s[u+0]&&a>=s[u+1]&&(!n||n(this.boxKeys[c]))){if(r.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[c],x1:s[u],y1:s[u+1],x2:s[u+2],y2:s[u+3]})}}}const c=this.circleCells[s];if(null!==c){const s=this.circles;for(const u of c)if(!l.circle[u]){l.circle[u]=!0;const c=3*u;if(this._circleAndRectCollide(s[c],s[c+1],s[c+2],e,t,i,a)&&(!n||n(this.circleKeys[u]))){if(r.hitTest)return o.push(!0),!0;{const e=s[c],t=s[c+1],i=s[c+2];o.push({key:this.circleKeys[u],x1:e-i,y1:t-i,x2:e+i,y2:t+i})}}}}}_queryCellCircle(e,t,i,a,s,o,r,n){const l=r.circle,u=r.seenUids,c=this.boxCells[s];if(null!==c){const e=this.bboxes;for(const t of c)if(!u.box[t]){u.box[t]=!0;const i=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[i+0],e[i+1],e[i+2],e[i+3])&&(!n||n(this.boxKeys[t])))return o.push(!0),!0}}const g=this.circleCells[s];if(null!==g){const e=this.circles;for(const t of g)if(!u.circle[t]){u.circle[t]=!0;const i=3*t;if(this._circlesCollide(e[i],e[i+1],e[i+2],l.x,l.y,l.radius)&&(!n||n(this.circleKeys[t])))return o.push(!0),!0}}}_forEachCell(e,t,i,a,s,o,r,n){const l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(i),g=this._convertToYCellCoord(a);for(let f=l;f<=c;f++)for(let l=u;l<=g;l++)if(s.call(this,e,t,i,a,this.xCellCount*l+f,o,r,n))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,i,a,s,o){const r=a-e,n=s-t,l=i+o;return l*l>r*r+n*n}_circleAndRectCollide(e,t,i,a,s,o,r){const n=(o-a)/2,l=Math.abs(e-(a+n));if(l>n+i)return!1;const u=(r-s)/2,c=Math.abs(t-(s+u));if(c>u+i)return!1;if(l<=n||c<=u)return!0;const g=l-n,f=c-u;return g*g+f*f<=i*i}}function ie(t,i,a,s,o){const r=e.create();return i?(e.scale(r,r,[1/o,1/o,1]),a||e.rotateZ(r,r,s.angle)):e.multiply(r,s.labelPlaneMatrix,t),r}function ae(t,i,a,s,o){if(i){const i=e.clone(t);return e.scale(i,i,[o,o,1]),a||e.rotateZ(i,i,-s.angle),i}return s.glCoordMatrix}function se(t,i,a=0){const s=[t.x,t.y,a,1];a?e.transformMat4(s,s,i):pe(s,s,i);const o=s[3];return{point:new e.Point(s[0]/o,s[1]/o),signedDistanceFromCamera:o}}function oe(e,t){return Math.min(.5+e/t*.5,1.5)}function re(e,t){const i=e[0]/e[3],a=e[1]/e[3];return i>=-t[0]&&i<=t[0]&&a>=-t[1]&&a<=t[1]}function ne(t,i,a,s,o,r,n,l,u){const c=s?t.textSizeData:t.iconSizeData,g=e.evaluateSizeForZoom(c,a.transform.zoom),f=[256/a.width*2+1,256/a.height*2+1],d=s?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;d.clear();const h=t.lineVertexArray,p=s?t.text.placedSymbolArray:t.icon.placedSymbolArray,m=a.transform.width/a.transform.height;let y=!1;for(let s=0;s<p.length;s++){const _=p.get(s);if(_.hidden||_.writingMode===e.WritingMode.vertical&&!y){he(_.numGlyphs,d);continue}y=!1;const b=u?u({x:_.anchorX,y:_.anchorY}):0,v=[_.anchorX,_.anchorY,b,1];if(e.transformMat4(v,v,i),!re(v,f)){he(_.numGlyphs,d);continue}const x=oe(a.transform.cameraToCenterDistance,v[3]),C=e.evaluateSizeForFeature(c,g,_),q=n?C/x:C*x,U=new e.Point(_.anchorX,_.anchorY),w=se(U,o,b);if(w.signedDistanceFromCamera<=0){he(_.numGlyphs,d);continue}const E=w.point;let B={};const P=n?null:u,M=ce(_,q,!1,l,i,o,r,t.glyphOffsetArray,h,d,E,U,B,m,P);y=M.useVertical,P&&M.needsFlipping&&(B={}),(M.notEnoughRoom||y||M.needsFlipping&&ce(_,q,!0,l,i,o,r,t.glyphOffsetArray,h,d,E,U,B,m,P).notEnoughRoom)&&he(_.numGlyphs,d)}s?t.text.dynamicLayoutVertexBuffer.updateData(d):t.icon.dynamicLayoutVertexBuffer.updateData(d)}function le(e,t,i,a,s,o,r,n,l,u,c,g,f){const d=n.glyphStartIndex+n.numGlyphs,h=n.lineStartIndex,p=n.lineStartIndex+n.lineLength,m=t.getoffsetX(n.glyphStartIndex),y=t.getoffsetX(d-1),_=fe(e*m,i,a,s,o,r,n.segment,h,p,l,u,c,g,f,!0);if(!_)return null;const b=fe(e*y,i,a,s,o,r,n.segment,h,p,l,u,c,g,f,!0);return b?{first:_,last:b}:null}function ue(t,i,a,s){return t===e.WritingMode.horizontal&&Math.abs(a.y-i.y)>Math.abs(a.x-i.x)*s?{useVertical:!0}:(t===e.WritingMode.vertical?i.y<a.y:i.x>a.x)?{needsFlipping:!0}:null}function ce(t,i,a,s,o,r,n,l,u,c,g,f,d,h,p){const m=i/24,y=t.lineOffsetX*m,_=t.lineOffsetY*m;let b;if(t.numGlyphs>1){const e=t.glyphStartIndex+t.numGlyphs,i=t.lineStartIndex,o=t.lineStartIndex+t.lineLength,c=le(m,l,y,_,a,g,f,t,u,r,d,p);if(!c)return{notEnoughRoom:!0};const v=se(c.first.point,n).point,x=se(c.last.point,n).point;if(s&&!a){const e=ue(t.writingMode,v,x,h);if(e)return e}b=[c.first];for(let s=t.glyphStartIndex+1;s<e-1;s++)b.push(fe(m*l.getoffsetX(s),y,_,a,g,f,t.segment,i,o,u,r,d,p));b.push(c.last)}else{if(s&&!a){const i=se(f,o).point,a=t.lineStartIndex+t.segment+1,s=new e.Point(u.getx(a),u.gety(a)),r=se(s,o),n=r.signedDistanceFromCamera>0?r.point:ge(f,s,i,1,o),l=ue(t.writingMode,i,n,h);if(l)return l}const i=fe(m*l.getoffsetX(t.glyphStartIndex),y,_,a,g,f,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,u,r,d,p);if(!i)return{notEnoughRoom:!0};b=[i]}for(const t of b)e.addDynamicAttributes(c,t.point,t.angle);return{}}function ge(e,t,i,a,s,o){const r=e.add(e.sub(t)._unit()),n=se(r,s,o?o(r):0).point,l=i.sub(n);return i.add(l._mult(a/l.mag()))}function fe(t,i,a,s,o,r,n,l,u,c,g,f,d,h,p){const m=s?t-i:t+i;let y=m>0?1:-1,_=0;s&&(y*=-1,_=Math.PI),y<0&&(_+=Math.PI);let b=y>0?l+n:l+n+1,v=o,x=o,C=0,q=0;const U=Math.abs(m),w=[],E=[];let B=r;const P=()=>{const t=b-y;return 0===C?r:new e.Point(c.getx(t),c.gety(t))},M=()=>ge(P(),B,x,U-C+1,g,d);for(;C+q<=U;){if(b+=y,b<l||b>=u)return null;if(x=v,w.push(v),h&&E.push(B||P()),v=f[b],void 0===v){B=new e.Point(c.getx(b),c.gety(b));const t=se(B,g,d?d(B):0);v=t.signedDistanceFromCamera>0?f[b]=t.point:M()}else B=null;C+=q,q=x.dist(v)}p&&d&&(B=B||new e.Point(c.getx(b),c.gety(b)),f[b]=v=void 0===f[b]?v:M(),q=x.dist(v));const T=(U-C)/q,A=v.sub(x),S=A.mult(T)._add(x);a&&S._add(A._unit()._perp()._mult(a*y));const I=_+Math.atan2(v.y-x.y,v.x-x.x);return w.push(S),h&&(B=B||new e.Point(c.getx(b),c.gety(b)),E.push(function(t,i,a){const s=1-a;return new e.Point(t.x*s+i.x*a,t.y*s+i.y*a)}(E.length>0?E[E.length-1]:B,B,T))),{point:S,angle:I,path:w,tilePath:E}}const de=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function he(e,t){for(let i=0;i<e;i++){const e=t.length;t.resize(e+4),t.float32.set(de,3*e)}}function pe(e,t,i){const a=t[0],s=t[1];return e[0]=i[0]*a+i[4]*s+i[12],e[1]=i[1]*a+i[5]*s+i[13],e[3]=i[3]*a+i[7]*s+i[15],e}class me{constructor(e,t=new te(e.width+200,e.height+200,25),i=new te(e.width+200,e.height+200,25)){this.transform=e,this.grid=t,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200}placeCollisionBox(e,t,i,a,s,o,r){const n=this.projectAndGetPerspectiveRatio(o,t.anchorPointX,t.anchorPointY,t.elevation),l=s*n.perspectiveRatio,u=(t.x1*e+i.x-t.padding)*l+n.point.x,c=(t.y1*e+i.y-t.padding)*l+n.point.y,g=(t.x2*e+i.x+t.padding)*l+n.point.x,f=(t.y2*e+i.y+t.padding)*l+n.point.y,d=n.perspectiveRatio<=.55;return!this.isInsideGrid(u,c,g,f)||!a&&this.grid.hitTest(u,c,g,f,r)||d?{box:[],offscreen:!1}:{box:[u,c,g,f],offscreen:this.isOffscreen(u,c,g,f)}}placeCollisionCircles(t,i,a,s,o,r,n,l,u,c,g,f,d,h){const p=[],m=this.transform.elevation,y=m?e=>m.getAtTileOffset(h,e.x,e.y):e=>0,_=new e.Point(i.anchorX,i.anchorY),b=y(_),v=se(_,r,b),x=oe(this.transform.cameraToCenterDistance,v.signedDistanceFromCamera),C=(c?o/x:o*x)/e.ONE_EM,q=se(_,n,b).point,U=v.signedDistanceFromCamera>0?le(C,s,i.lineOffsetX*C,i.lineOffsetY*C,!1,q,_,i,a,n,{},m&&!c?y:null,c&&!!m):null;let w=!1,E=!1,B=!0;if(U){const i=.5*f*x+d,a=new e.Point(-100,-100),s=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),o=new ee,r=U.first,n=U.last;let c=[];for(let e=r.path.length-1;e>=1;e--)c.push(r.path[e]);for(let e=1;e<n.path.length;e++)c.push(n.path[e]);const h=2.5*i;if(l){const e=c.map(m?(e,t)=>{const i=y(t<r.path.length-1?r.tilePath[r.path.length-1-t]:n.tilePath[t-r.path.length+2]);return se(e,l,i)}:e=>se(e,l));c=e.some(e=>e.signedDistanceFromCamera<=0)?[]:e.map(e=>e.point)}let _=[];if(c.length>0){const t=c[0].clone(),i=c[0].clone();for(let e=1;e<c.length;e++)t.x=Math.min(t.x,c[e].x),t.y=Math.min(t.y,c[e].y),i.x=Math.max(i.x,c[e].x),i.y=Math.max(i.y,c[e].y);_=t.x>=a.x&&i.x<=s.x&&t.y>=a.y&&i.y<=s.y?[c]:i.x<a.x||t.x>s.x||i.y<a.y||t.y>s.y?[]:e.clipLine([c],a.x,a.y,s.x,s.y)}for(const e of _){o.reset(e,.25*i);let a=0;a=o.length<=.5*i?1:Math.ceil(o.paddedLength/h)+1;for(let e=0;e<a;e++){const s=e/Math.max(a-1,1),r=o.lerp(s),n=r.x+100,l=r.y+100;p.push(n,l,i,0);const c=n-i,f=l-i,d=n+i,h=l+i;if(B=B&&this.isOffscreen(c,f,d,h),E=E||this.isInsideGrid(c,f,d,h),!t&&this.grid.hitTestCircle(n,l,i,g)&&(w=!0,!u))return{circles:[],offscreen:!1,collisionDetected:w}}}}return{circles:!u&&w||!E?[]:p,offscreen:B,collisionDetected:w}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const i=[];let a=1/0,s=1/0,o=-1/0,r=-1/0;for(const n of t){const t=new e.Point(n.x+100,n.y+100);a=Math.min(a,t.x),s=Math.min(s,t.y),o=Math.max(o,t.x),r=Math.max(r,t.y),i.push(t)}const n=this.grid.query(a,s,o,r).concat(this.ignoredGrid.query(a,s,o,r)),l={},u={};for(const t of n){const a=t.key;if(void 0===l[a.bucketInstanceId]&&(l[a.bucketInstanceId]={}),l[a.bucketInstanceId][a.featureIndex])continue;const s=[new e.Point(t.x1,t.y1),new e.Point(t.x2,t.y1),new e.Point(t.x2,t.y2),new e.Point(t.x1,t.y2)];e.polygonIntersectsPolygon(i,s)&&(l[a.bucketInstanceId][a.featureIndex]=!0,void 0===u[a.bucketInstanceId]&&(u[a.bucketInstanceId]=[]),u[a.bucketInstanceId].push(a.featureIndex))}return u}insertCollisionBox(e,t,i,a,s){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:a,collisionGroupID:s},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,i,a,s){const o=t?this.ignoredGrid:this.grid,r={bucketInstanceId:i,featureIndex:a,collisionGroupID:s};for(let t=0;t<e.length;t+=4)o.insertCircle(r,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(t,i,a,s){const o=[i,a,0,1];return s?(o[2]=s,e.transformMat4(o,o,t)):pe(o,o,t),{point:new e.Point((o[0]/o[3]+1)/2*this.transform.width+100,(-o[1]/o[3]+1)/2*this.transform.height+100),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/o[3]*.5,1.5)}}isOffscreen(e,t,i,a){return i<100||e>=this.screenRightBoundary||a<100||t>this.screenBottomBoundary}isInsideGrid(e,t,i,a){return i>=0&&e<this.gridRightBoundary&&a>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}class ye{constructor(e,t,i,a){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):a&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class _e{constructor(e,t,i,a,s){this.text=new ye(e?e.text:null,t,i,s),this.icon=new ye(e?e.icon:null,t,a,s)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class be{constructor(e,t,i){this.text=e,this.icon=t,this.skipFade=i}}class ve{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class xe{constructor(e,t,i,a,s){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=i,this.bucketIndex=a,this.tileID=s}}class Ce{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function qe(t,i,a,s,o){const{horizontalAlign:r,verticalAlign:n}=e.getAnchorAlignment(t),l=-(r-.5)*i,u=-(n-.5)*a,c=e.evaluateVariableOffset(t,s);return new e.Point(l+c[0]*o,u+c[1]*o)}function Ue(t,i,a,s,o){const r=new e.Point(t,i);return a&&r._rotate(s?o:-o),r}class we{constructor(e,t,i,a){this.transform=e.clone(),this.collisionIndex=new me(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new Ce(i),this.collisionCircleArrays={},this.prevPlacement=a,a&&(a.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,i,a,s){const o=a.getBucket(i),r=a.latestFeatureIndex;if(!o||!r||i.id!==o.layerIds[0])return;const n=a.collisionBoxArray,l=o.layers[0].layout,u=Math.pow(2,this.transform.zoom-a.tileID.overscaledZ),c=a.tileSize/e.EXTENT,g=this.transform.calculatePosMatrix(a.tileID.toUnwrapped()),f="map"===l.get("text-pitch-alignment"),d="map"===l.get("text-rotation-alignment"),h=w(a,1,this.transform.zoom),p=ie(g,f,d,this.transform,h);let m=null;if(f){const t=ae(g,f,d,this.transform,h);m=e.multiply([],this.transform.labelPlaneMatrix,t)}this.retainedQueryData[o.bucketInstanceId]=new xe(o.bucketInstanceId,r,o.sourceLayerIndex,o.index,a.tileID);const y={bucket:o,layout:l,posMatrix:g,textLabelPlaneMatrix:p,labelToScreenMatrix:m,scale:u,textPixelRatio:c,holdingForFade:a.holdingForFade(),collisionBoxArray:n,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(s)for(const e of o.sortKeyRanges){const{sortKey:i,symbolInstanceStart:a,symbolInstanceEnd:s}=e;t.push({sortKey:i,symbolInstanceStart:a,symbolInstanceEnd:s,parameters:y})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:y})}attemptAnchorPlacement(e,t,i,a,s,o,r,n,l,u,c,g,f,d,h,p,m,y){const _=[g.textOffset0,g.textOffset1],b=d.getSymbolInstanceTextSize(m,g,this.transform.zoom,f),v=qe(e,i,a,_,s),x=this.collisionIndex.placeCollisionBox(b,t,Ue(v.x,v.y,o,r,this.transform.angle),c,n,l,u.predicate);if((!p||0!==this.collisionIndex.placeCollisionBox(d.getSymbolInstanceIconSize(y,this.transform.zoom,f),p,Ue(v.x,v.y,o,r,this.transform.angle),c,n,l,u.predicate).box.length)&&x.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[g.crossTileID]&&this.prevPlacement.placements[g.crossTileID]&&this.prevPlacement.placements[g.crossTileID].text&&(t=this.prevPlacement.variableOffsets[g.crossTileID].anchor),this.variableOffsets[g.crossTileID]={textOffset:_,width:i,height:a,anchor:e,textBoxScale:s,prevAnchor:t},this.markUsedJustification(d,e,g,h),d.allowVerticalPlacement&&(this.markUsedOrientation(d,h,g),this.placedOrientations[g.crossTileID]=h),{shift:v,placedGlyphBoxes:x}}}placeLayerBucketPart(t,i,a){const{bucket:s,layout:o,posMatrix:r,textLabelPlaneMatrix:n,labelToScreenMatrix:l,textPixelRatio:u,holdingForFade:c,collisionBoxArray:g,partiallyEvaluatedTextSize:f,partiallyEvaluatedIconSize:d,collisionGroup:h}=t.parameters,p=o.get("text-optional"),m=o.get("icon-optional"),y=o.get("text-allow-overlap"),_=o.get("icon-allow-overlap"),b="map"===o.get("text-rotation-alignment"),v="map"===o.get("text-pitch-alignment"),x="none"!==o.get("icon-text-fit"),C="viewport-y"===o.get("symbol-z-order"),q=y&&(_||!s.hasIconData()||m),U=_&&(y||!s.hasTextData()||p);!s.collisionArrays&&g&&s.deserializeCollisionBoxes(g),a&&s.updateCollisionDebugBuffers(this.transform.zoom,g);const w=(t,g,C)=>{if(i[t.crossTileID])return;if(c)return void(this.placements[t.crossTileID]=new be(!1,!1,!1));let w=!1,E=!1,B=!0,P=null,M={box:null,offscreen:null},T={box:null,offscreen:null},A=null,S=null,I=null,D=0,z=0,k=0;C.textFeatureIndex?D=C.textFeatureIndex:t.useRuntimeCollisionCircles&&(D=t.featureIndex),C.verticalTextFeatureIndex&&(z=C.verticalTextFeatureIndex);const F=e=>{(this.transform.elevation||e.elevation)&&(e.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[s.bucketInstanceId].tileID,e.anchorPointX,e.anchorPointY):0)},L=C.textBox;if(L){F(L);const i=i=>{let a=e.WritingMode.horizontal;if(s.allowVerticalPlacement&&!i&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[t.crossTileID];e&&(this.placedOrientations[t.crossTileID]=e,a=e,this.markUsedOrientation(s,a,t))}return a},a=(i,a)=>{if(s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&C.verticalTextBox){for(const t of s.writingModes)if(t===e.WritingMode.vertical?(M=a(),T=M):M=i(),M&&M.box&&M.box.length)break}else M=i()};if(o.get("text-variable-anchor")){let n=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[t.crossTileID]){const e=this.prevPlacement.variableOffsets[t.crossTileID];n.indexOf(e.anchor)>0&&(n=n.filter(t=>t!==e.anchor),n.unshift(e.anchor))}const l=(e,i,a)=>{const o=t.textBoxScale,l=(e.x2-e.x1)*o+2*e.padding,c=(e.y2-e.y1)*o+2*e.padding,p=x&&!_?i:null;p&&F(p);let m={box:[],offscreen:!1};const C=y?2*n.length:n.length;for(let i=0;i<C;++i){const y=this.attemptAnchorPlacement(n[i%n.length],e,l,c,o,b,v,u,r,h,i>=n.length,t,g,s,a,p,f,d);if(y&&(m=y.placedGlyphBoxes,m&&m.box&&m.box.length)){w=!0,P=y.shift;break}}return m};a(()=>l(L,C.iconBox,e.WritingMode.horizontal),()=>{const i=C.verticalTextBox;return i&&F(i),s.allowVerticalPlacement&&!(M&&M.box&&M.box.length)&&t.numVerticalGlyphVertices>0&&i?l(i,C.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),M&&(w=M.box,B=M.offscreen);const c=i(M&&M.box);if(!w&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[t.crossTileID];e&&(this.variableOffsets[t.crossTileID]=e,this.markUsedJustification(s,e.anchor,t,c))}}else{const o=(i,a)=>{const o=s.getSymbolInstanceTextSize(f,t,this.transform.zoom,g),n=this.collisionIndex.placeCollisionBox(o,i,new e.Point(0,0),y,u,r,h.predicate);return n&&n.box&&n.box.length&&(this.markUsedOrientation(s,a,t),this.placedOrientations[t.crossTileID]=a),n};a(()=>o(L,e.WritingMode.horizontal),()=>{const i=C.verticalTextBox;return s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&i?(F(i),o(i,e.WritingMode.vertical)):{box:null,offscreen:null}}),i(M&&M.box&&M.box.length)}}if(A=M,w=A&&A.box&&A.box.length>0,B=A&&A.offscreen,t.useRuntimeCollisionCircles){const i=s.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),u=e.evaluateSizeForFeature(s.textSizeData,f,i),c=o.get("text-padding");S=this.collisionIndex.placeCollisionCircles(y,i,s.lineVertexArray,s.glyphOffsetArray,u,r,n,l,a,v,h.predicate,t.collisionCircleDiameter,c,this.retainedQueryData[s.bucketInstanceId].tileID),w=y||S.circles.length>0&&!S.collisionDetected,B=B&&S.offscreen}if(C.iconFeatureIndex&&(k=C.iconFeatureIndex),C.iconBox){const t=t=>{F(t);const i=x&&P?Ue(P.x,P.y,b,v,this.transform.angle):new e.Point(0,0),a=s.getSymbolInstanceIconSize(d,this.transform.zoom,g);return this.collisionIndex.placeCollisionBox(a,t,i,_,u,r,h.predicate)};T&&T.box&&T.box.length&&C.verticalIconBox?(I=t(C.verticalIconBox),E=I.box.length>0):(I=t(C.iconBox),E=I.box.length>0),B=B&&I.offscreen}const O=p||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,R=m||0===t.numIconVertices;if(O||R?R?O||(E=E&&w):w=E&&w:E=w=E&&w,w&&A&&A.box&&this.collisionIndex.insertCollisionBox(A.box,o.get("text-ignore-placement"),s.bucketInstanceId,T&&T.box&&z?z:D,h.ID),E&&I&&this.collisionIndex.insertCollisionBox(I.box,o.get("icon-ignore-placement"),s.bucketInstanceId,k,h.ID),S&&(w&&this.collisionIndex.insertCollisionCircles(S.circles,o.get("text-ignore-placement"),s.bucketInstanceId,D,h.ID),a)){const e=s.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new ve);for(let e=0;e<S.circles.length;e+=4)t.circles.push(S.circles[e+0]),t.circles.push(S.circles[e+1]),t.circles.push(S.circles[e+2]),t.circles.push(S.collisionDetected?1:0)}this.placements[t.crossTileID]=new be(w||q,E||U,B||s.justReloaded),i[t.crossTileID]=!0};if(C){const e=s.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const i=e[t];w(s.symbolInstances.get(i),i,s.collisionArrays[i])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)w(s.symbolInstances.get(e),e,s.collisionArrays[e]);if(a&&s.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[s.bucketInstanceId];e.invert(t.invProjMatrix,r),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}markUsedJustification(t,i,a,s){let o;o=s===e.WritingMode.vertical?a.verticalPlacedTextSymbolIndex:{left:a.leftJustifiedTextSymbolIndex,center:a.centerJustifiedTextSymbolIndex,right:a.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(i)];const r=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex,a.verticalPlacedTextSymbolIndex];for(const e of r)e>=0&&(t.text.placedSymbolArray.get(e).crossTileID=o>=0&&e!==o?0:a.crossTileID)}markUsedOrientation(t,i,a){const s=i===e.WritingMode.horizontal||i===e.WritingMode.horizontalOnly?i:0,o=i===e.WritingMode.vertical?i:0,r=[a.leftJustifiedTextSymbolIndex,a.centerJustifiedTextSymbolIndex,a.rightJustifiedTextSymbolIndex];for(const e of r)t.text.placedSymbolArray.get(e).placedOrientation=s;a.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(a.verticalPlacedTextSymbolIndex).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let i=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const a=t?t.symbolFadeChange(e):1,s=t?t.opacities:{},o=t?t.variableOffsets:{},r=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],o=s[e];o?(this.opacities[e]=new _e(o,a,t.text,t.icon),i=i||t.text!==o.text.placed||t.icon!==o.icon.placed):(this.opacities[e]=new _e(null,a,t.text,t.icon,t.skipFade),i=i||t.text||t.icon)}for(const e in s){const t=s[e];if(!this.opacities[e]){const s=new _e(t,a,!1,!1);s.isHidden()||(this.opacities[e]=s,i=i||t.text.placed||t.icon.placed)}}for(const e in o)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=o[e]);for(const e in r)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=r[e]);i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const i={};for(const a of t){const t=a.getBucket(e);t&&a.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,i,a.collisionBoxArray)}}updateBucketOpacities(t,i,a){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const s=t.layers[0].layout,o=new _e(null,0,!1,!1,!0),r=s.get("text-allow-overlap"),n=s.get("icon-allow-overlap"),l=s.get("text-variable-anchor"),u="map"===s.get("text-rotation-alignment"),c="map"===s.get("text-pitch-alignment"),g="none"!==s.get("icon-text-fit"),f=new _e(null,0,r&&(n||!t.hasIconData()||s.get("icon-optional")),n&&(r||!t.hasTextData()||s.get("text-optional")),!0);!t.collisionArrays&&a&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(a);const d=(e,t,i)=>{for(let a=0;a<t/4;a++)e.opacityVertexArray.emplaceBack(i)};for(let a=0;a<t.symbolInstances.length;a++){const s=t.symbolInstances.get(a),{numHorizontalGlyphVertices:r,numVerticalGlyphVertices:n,crossTileID:h}=s;let p=this.opacities[h];i[h]?p=o:p||(p=f,this.opacities[h]=p),i[h]=!0;const m=s.numIconVertices>0,y=this.placedOrientations[s.crossTileID],_=y===e.WritingMode.vertical,b=y===e.WritingMode.horizontal||y===e.WritingMode.horizontalOnly;if(r>0||n>0){const e=De(p.text);d(t.text,r,_?ze:e),d(t.text,n,b?ze:e);const i=p.text.isHidden();[s.rightJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.leftJustifiedTextSymbolIndex].forEach(e=>{e>=0&&(t.text.placedSymbolArray.get(e).hidden=i||_?1:0)}),s.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(s.verticalPlacedTextSymbolIndex).hidden=i||b?1:0);const a=this.variableOffsets[s.crossTileID];a&&this.markUsedJustification(t,a.anchor,s,y);const o=this.placedOrientations[s.crossTileID];o&&(this.markUsedJustification(t,"left",s,o),this.markUsedOrientation(t,o,s))}if(m){const e=De(p.icon),i=!(g&&s.verticalPlacedIconSymbolIndex&&_);s.placedIconSymbolIndex>=0&&(d(t.icon,s.numIconVertices,i?e:ze),t.icon.placedSymbolArray.get(s.placedIconSymbolIndex).hidden=p.icon.isHidden()),s.verticalPlacedIconSymbolIndex>=0&&(d(t.icon,s.numVerticalIconVertices,i?ze:e),t.icon.placedSymbolArray.get(s.verticalPlacedIconSymbolIndex).hidden=p.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const i=t.collisionArrays[a];if(i){let a=new e.Point(0,0);if(i.textBox||i.verticalTextBox){let e=!0;if(l){const t=this.variableOffsets[h];t?(a=qe(t.anchor,t.width,t.height,t.textOffset,t.textBoxScale),u&&a._rotate(c?this.transform.angle:-this.transform.angle)):e=!1}i.textBox&&Ee(t.textCollisionBox.collisionVertexArray,p.text.placed,!e||_,a.x,a.y),i.verticalTextBox&&Ee(t.textCollisionBox.collisionVertexArray,p.text.placed,!e||b,a.x,a.y)}const s=Boolean(!b&&i.verticalIconBox);i.iconBox&&Ee(t.iconCollisionBox.collisionVertexArray,p.icon.placed,s,g?a.x:0,g?a.y:0),i.verticalIconBox&&Ee(t.iconCollisionBox.collisionVertexArray,p.icon.placed,!s,g?a.x:0,g?a.y:0)}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const i=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*i>e}setStale(){this.stale=!0}}function Ee(e,t,i,a,s){e.emplaceBack(t?1:0,i?1:0,a||0,s||0),e.emplaceBack(t?1:0,i?1:0,a||0,s||0),e.emplaceBack(t?1:0,i?1:0,a||0,s||0),e.emplaceBack(t?1:0,i?1:0,a||0,s||0)}const Be=Math.pow(2,25),Pe=Math.pow(2,24),Me=Math.pow(2,17),Te=Math.pow(2,16),Ae=Math.pow(2,9),Se=Math.pow(2,8),Ie=Math.pow(2,1);function De(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,i=Math.floor(127*e.opacity);return i*Be+t*Pe+i*Me+t*Te+i*Ae+t*Se+i*Ie+t}const ze=0;class ke{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,i,a,s){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,a,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,s())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort((e,t)=>e.sortKey-t.sortKey));this._currentPartIndex<o.length;)if(t.placeLayerBucketPart(o[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,s())return!0;return!1}}class Fe{constructor(e,t,i,a,s,o,r){this.placement=new we(e,s,o,r),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=a,this._done=!1}isDone(){return this._done}continuePlacement(t,i,a){const s=e.browser.now(),o=()=>{const t=e.browser.now()-s;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=i[t[this._currentPlacementIndex]],s=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=s)&&(!e.maxzoom||e.maxzoom>s)){if(this._inProgressLayer||(this._inProgressLayer=new ke(e)),this._inProgressLayer.continuePlacement(a[e.source],this.placement,this._showCollisionBoxes,e,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Le=512/e.EXTENT/2;class Oe{constructor(e,t,i){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(let i=0;i<t.length;i++){const a=t.get(i),s=a.key;this.indexedSymbolInstances[s]||(this.indexedSymbolInstances[s]=[]),this.indexedSymbolInstances[s].push({crossTileID:a.crossTileID,coord:this.getScaledCoordinates(a,e)})}}getScaledCoordinates(t,i){const a=Le/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*e.EXTENT+t.anchorX)*a),y:Math.floor((i.canonical.y*e.EXTENT+t.anchorY)*a)}}findMatches(e,t,i){const a=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let s=0;s<e.length;s++){const o=e.get(s);if(o.crossTileID)continue;const r=this.indexedSymbolInstances[o.key];if(!r)continue;const n=this.getScaledCoordinates(o,t);for(const e of r)if(Math.abs(e.coord.x-n.x)<=a&&Math.abs(e.coord.y-n.y)<=a&&!i[e.crossTileID]){i[e.crossTileID]=!0,o.crossTileID=e.crossTileID;break}}}}class Re{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ne{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const i=this.indexes[e],a={};for(const e in i){const s=i[e];s.tileID=s.tileID.unwrapTo(s.tileID.wrap+t),a[s.tileID.key]=s}this.indexes[e]=a}this.lng=e}addBucket(e,t,i){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const a=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const s=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in s){const o=s[i];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,a)}else{const o=s[e.scaledTo(Number(i)).key];o&&o.findMatches(t.symbolInstances,e,a)}}for(let e=0;e<t.symbolInstances.length;e++){const s=t.symbolInstances.get(e);s.crossTileID||(s.crossTileID=i.generate(),a[s.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Oe(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const i in t.indexedSymbolInstances)for(const a of t.indexedSymbolInstances[i])delete this.usedCrossTileIDs[e][a.crossTileID]}removeStaleBuckets(e){let t=!1;for(const i in this.indexes){const a=this.indexes[i];for(const s in a)e[a[s].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,a[s]),delete a[s],t=!0)}return t}}class $e{constructor(){this.layerIndexes={},this.crossTileIDs=new Re,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,i){let a=this.layerIndexes[e.id];void 0===a&&(a=this.layerIndexes[e.id]=new Ne);let s=!1;const o={};a.handleWrapJump(i);for(const i of t){const t=i.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),a.addBucket(i.tileID,t,this.crossTileIDs)&&(s=!0),o[t.bucketInstanceId]=!0)}return a.removeStaleBuckets(o)&&(s=!0),s}pruneUnusedLayers(e){const t={};e.forEach(e=>{t[e]=!0});for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}const Ge=(t,i)=>e.emitValidationErrors(t,i&&i.filter(e=>"source.canvas"!==e.identifier)),Ve=e.pick(Q,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain"]),Ze=e.pick(Q,["setCenter","setZoom","setBearing","setPitch"]),Qe=function(){const t={},i=e.styleSpec.$version;for(const a in e.styleSpec.$root){const s=e.styleSpec.$root[a];if(s.required){let e=null;e="version"===a?i:"array"===s.type?[]:{},null!=e&&(t[a]=e)}}return t}();class je extends e.Evented{constructor(t,i={}){super(),this.map=t,this.dispatcher=new U(G(),this),this.imageManager=new g,this.imageManager.setEventedParent(this),this.glyphManager=new _(t._requestManager,i.localIdeographFontFamily),this.lineAtlas=new q(256,512),this.crossTileSymbolIndex=new $e,this._layers={},this._num3DLayers=0,this._serializedLayers={},this._order=[],this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const a=this;this._rtlTextPluginCallback=je.registerForPluginStateChange(t=>{a.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(t,i)=>{if(e.triggerPluginCompletionEvent(t),i&&i.every(e=>e))for(const e in a._sourceCaches){const t=a._sourceCaches[e],i=t.getSource().type;"vector"!==i&&"geojson"!==i||t.reload()}})}),this.on("data",e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const e in this._layers){const i=this._layers[e];i.source===t.id&&this._validateLayer(i)}})}loadURL(t,i={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const a="boolean"==typeof i.validate?i.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,i.accessToken);const s=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(s,(t,i)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):i&&this._load(i,a)})}loadJSON(t,i={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(()=>{this._request=null,this._load(t,!1!==i.validate)})}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Qe,!1)}_load(t,i){if(i&&Ge(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=t;for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);const a=Z(this.stylesheet.layers);this._order=a.map(e=>e.id),this._layers={},this._serializedLayers={};for(let t of a)t=e.createStyleLayer(t),t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize(),t.is3D()&&this._num3DLayers++;this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new v(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}_loadSprite(t){this._spriteRequest=function(t,i,a){let s,o,r;const n=e.browser.devicePixelRatio>1?"@2x":"";let l=e.getJSON(i.transformRequest(i.normalizeSpriteURL(t,n,".json"),e.ResourceType.SpriteJSON),(e,t)=>{l=null,r||(r=e,s=t,c())}),u=e.getImage(i.transformRequest(i.normalizeSpriteURL(t,n,".png"),e.ResourceType.SpriteImage),(e,t)=>{u=null,r||(r=e,o=t,c())});function c(){if(r)a(r);else if(s&&o){const t=e.browser.getImageData(o),i={};for(const a in s){const{width:o,height:r,x:n,y:l,sdf:u,pixelRatio:c,stretchX:g,stretchY:f,content:d}=s[a],h=new e.RGBAImage({width:o,height:r});e.RGBAImage.copy(t,h,{x:n,y:l},{x:0,y:0},{width:o,height:r}),i[a]={data:h,pixelRatio:c,sdf:u,stretchX:g,stretchY:f,content:d}}a(null,i)}}return{cancel(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(t,this.map._requestManager,(t,i)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(i)for(const e in i)this.imageManager.addImage(e,i[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))})}_validateLayer(t){const i=this.getSource(t.source);if(!i)return;const a=t.sourceLayer;a&&("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(a))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${a}" does not exist on source "${i.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const i of e){const e=this._layers[i];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const i=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(e.length||i.length)&&this._updateWorkerLayers(e,i);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}const a={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];a[e]=t.used,t.used=!1}for(const e of this._order){const i=this._layers[e];if(i.recalculate(t,this._availableImages),!i.isHidden(t.zoom)){const e=this._getLayerSourceCache(i);e&&(e.used=!0)}const a=this.map.painter;if(a){const e=i.getProgramIds();if(!e)continue;const s=i.getProgramConfiguration(t.zoom);for(const t of e)a.useProgram(t,s)}}for(const t in a){const i=this._sourceCaches[t];a[t]!==i.used&&i.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:i.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.z=t.zoom,i&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(t){if(this._checkLoaded(),Ge(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=Z(t.layers);const i=function(t,i){if(!t)return[{command:Q.setStyle,args:[i]}];let a=[];try{if(!e.deepEqual(t.version,i.version))return[{command:Q.setStyle,args:[i]}];e.deepEqual(t.center,i.center)||a.push({command:Q.setCenter,args:[i.center]}),e.deepEqual(t.zoom,i.zoom)||a.push({command:Q.setZoom,args:[i.zoom]}),e.deepEqual(t.bearing,i.bearing)||a.push({command:Q.setBearing,args:[i.bearing]}),e.deepEqual(t.pitch,i.pitch)||a.push({command:Q.setPitch,args:[i.pitch]}),e.deepEqual(t.sprite,i.sprite)||a.push({command:Q.setSprite,args:[i.sprite]}),e.deepEqual(t.glyphs,i.glyphs)||a.push({command:Q.setGlyphs,args:[i.glyphs]}),e.deepEqual(t.transition,i.transition)||a.push({command:Q.setTransition,args:[i.transition]}),e.deepEqual(t.light,i.light)||a.push({command:Q.setLight,args:[i.light]}),e.deepEqual(t.terrain,i.terrain)||a.push({command:Q.setTerrain,args:[i.terrain]});const s={},o=[];!function(t,i,a,s){let o;for(o in i=i||{},t=t||{})t.hasOwnProperty(o)&&(i.hasOwnProperty(o)||H(o,a,s));for(o in i)i.hasOwnProperty(o)&&(t.hasOwnProperty(o)?e.deepEqual(t[o],i[o])||("geojson"===t[o].type&&"geojson"===i[o].type&&W(t,i,o)?a.push({command:Q.setGeoJSONSourceData,args:[o,i[o].data]}):X(o,i,a,s)):j(o,i,a))}(t.sources,i.sources,o,s);const r=[];t.layers&&t.layers.forEach(e=>{s[e.source]?a.push({command:Q.removeLayer,args:[e.id]}):r.push(e)}),a=a.concat(o),function(t,i,a){i=i||[];const s=(t=t||[]).map(J),o=i.map(J),r=t.reduce(Y,{}),n=i.reduce(Y,{}),l=s.slice(),u=Object.create(null);let c,g,f,d,h,p,m;for(c=0,g=0;c<s.length;c++)f=s[c],n.hasOwnProperty(f)?g++:(a.push({command:Q.removeLayer,args:[f]}),l.splice(l.indexOf(f,g),1));for(c=0,g=0;c<o.length;c++)f=o[o.length-1-c],l[l.length-1-c]!==f&&(r.hasOwnProperty(f)?(a.push({command:Q.removeLayer,args:[f]}),l.splice(l.lastIndexOf(f,l.length-g),1)):g++,p=l[l.length-c],a.push({command:Q.addLayer,args:[n[f],p]}),l.splice(l.length-c,0,f),u[f]=!0);for(c=0;c<o.length;c++)if(f=o[c],d=r[f],h=n[f],!u[f]&&!e.deepEqual(d,h))if(e.deepEqual(d.source,h.source)&&e.deepEqual(d["source-layer"],h["source-layer"])&&e.deepEqual(d.type,h.type)){for(m in K(d.layout,h.layout,a,f,null,Q.setLayoutProperty),K(d.paint,h.paint,a,f,null,Q.setPaintProperty),e.deepEqual(d.filter,h.filter)||a.push({command:Q.setFilter,args:[f,h.filter]}),e.deepEqual(d.minzoom,h.minzoom)&&e.deepEqual(d.maxzoom,h.maxzoom)||a.push({command:Q.setLayerZoomRange,args:[f,h.minzoom,h.maxzoom]}),d)d.hasOwnProperty(m)&&"layout"!==m&&"paint"!==m&&"filter"!==m&&"metadata"!==m&&"minzoom"!==m&&"maxzoom"!==m&&(0===m.indexOf("paint.")?K(d[m],h[m],a,f,m.slice(6),Q.setPaintProperty):e.deepEqual(d[m],h[m])||a.push({command:Q.setLayerProperty,args:[f,m,h[m]]}));for(m in h)h.hasOwnProperty(m)&&!d.hasOwnProperty(m)&&"layout"!==m&&"paint"!==m&&"filter"!==m&&"metadata"!==m&&"minzoom"!==m&&"maxzoom"!==m&&(0===m.indexOf("paint.")?K(d[m],h[m],a,f,m.slice(6),Q.setPaintProperty):e.deepEqual(d[m],h[m])||a.push({command:Q.setLayerProperty,args:[f,m,h[m]]}))}else a.push({command:Q.removeLayer,args:[f]}),p=l[l.lastIndexOf(f)+1],a.push({command:Q.addLayer,args:[h,p]})}(r,i.layers,a)}catch(e){console.warn("Unable to compute style diff:",e),a=[{command:Q.setStyle,args:[i]}]}return a}(this.serialize(),t).filter(e=>!(e.command in Ze));if(0===i.length)return!1;const a=i.filter(e=>!(e.command in Ve));if(a.length>0)throw new Error(`Unimplemented: ${a.map(e=>e.command).join(", ")}.`);return i.forEach(e=>{"setTransition"!==e.command&&this[e.command].apply(this,e.args)}),this.stylesheet=t,!0}addImage(t,i){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,i),this._afterImageUpdated(t)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,i,a={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(e.validateStyle.source,"sources."+t,i,null,a))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const s=D(t,i,this.dispatcher,this);s.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:s.serialize(),sourceId:t}));const o=i=>{const a=(i?"symbol:":"other:")+t,o=this._sourceCaches[a]=new e.SourceCache(a,s,i);(i?this._symbolSourceCaches:this._otherSourceCaches)[t]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==i.type&&"geojson"!==i.type||o(!0),s.onAdd&&s.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const i=this.getSource(t);if(void 0===i)throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${i}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const a=this._getSourceCaches(t);for(const t of a)delete this._sourceCaches[t.id],delete this._updatedSources[t.id],t.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t.getSource().id})),t.setEventedParent(null),t.clearTiles();delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],i.setEventedParent(null),i.onRemove&&i.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}addLayer(t,i,a={}){this._checkLoaded();const s=t.id;if(this.getLayer(s))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${s}" already exists on this map`)));let o;if("custom"===t.type){if(Ge(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(s,t.source),t=e.clone$1(t),t=e.extend(t,{source:s})),this._validate(e.validateStyle.layer,"layers."+s,t,{arrayIndex:-1},a))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:s}}),this._serializedLayers[o.id]=o.serialize(),o.is3D()&&this._num3DLayers++}const r=i?this._order.indexOf(i):this._order.length;if(i&&-1===r)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" does not exist on this map.`)));this._order.splice(r,0,s),this._layerOrderChanged=!0,this._layers[s]=o;const n=this._getLayerSourceCache(o);if(this._removedLayers[s]&&o.source&&n&&"custom"!==o.type){const e=this._removedLayers[s];delete this._removedLayers[s],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",n.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map)}moveLayer(t,i){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===i)return;const a=this._order.indexOf(t);this._order.splice(a,1);const s=i?this._order.indexOf(i):this._order.length;i&&-1===s?this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" does not exist on this map.`))):(this._order.splice(s,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const i=this._layers[t];if(!i)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));i.setEventedParent(null),i.is3D()&&this._num3DLayers--;const a=this._order.indexOf(t);this._order.splice(a,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=i,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],i.onRemove&&i.onRemove(this.map)}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}setLayerZoomRange(t,i,a){this._checkLoaded();const s=this.getLayer(t);s?s.minzoom===i&&s.maxzoom===a||(null!=i&&(s.minzoom=i),null!=a&&(s.maxzoom=a),this._updateLayer(s)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(t,i,a={}){this._checkLoaded();const s=this.getLayer(t);if(s){if(!e.deepEqual(s.filter,i))return null==i?(s.filter=void 0,void this._updateLayer(s)):void(this._validate(e.validateStyle.filter,`layers.${s.id}.filter`,i,null,a)||(s.filter=e.clone$1(i),this._updateLayer(s)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){return e.clone$1(this.getLayer(t).filter)}setLayoutProperty(t,i,a,s={}){this._checkLoaded();const o=this.getLayer(t);o?e.deepEqual(o.getLayoutProperty(i),a)||(o.setLayoutProperty(i,a,s),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,i){const a=this.getLayer(t);if(a)return a.getLayoutProperty(i);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(t,i,a,s={}){this._checkLoaded();const o=this.getLayer(t);o?e.deepEqual(o.getPaintProperty(i),a)||(o.setPaintProperty(i,a,s)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(t,i){this._checkLoaded();const a=t.source,s=t.sourceLayer,o=this.getSource(a);if(void 0===o)return void this.fire(new e.ErrorEvent(new Error(`The source '${a}' does not exist in the map's style.`)));const r=o.type;if("geojson"===r&&s)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===r&&!s)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const n=this._getSourceCaches(a);for(const e of n)e.setFeatureState(s,t.id,i)}removeFeatureState(t,i){this._checkLoaded();const a=t.source,s=this.getSource(a);if(void 0===s)return void this.fire(new e.ErrorEvent(new Error(`The source '${a}' does not exist in the map's style.`)));const o=s.type,r="vector"===o?t.sourceLayer:void 0;if("vector"===o&&!r)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(i&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const n=this._getSourceCaches(a);for(const e of n)e.removeFeatureState(r,t.id,i)}getFeatureState(t){this._checkLoaded();const i=t.source,a=t.sourceLayer,s=this.getSource(i);if(void 0!==s){if("vector"!==s.type||a)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(i)[0].getFeatureState(a,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const i=this._sourceCaches[e].getSource();t[i.id]||(t[i.id]=i.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t,layers:this._serializeLayers(this._order)},e=>void 0!==e)}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,i={},a=[];for(let s=this._order.length-1;s>=0;s--){const o=this._order[s];if(t(o)){i[o]=s;for(const t of e){const e=t[o];if(e)for(const t of e)a.push(t)}}}a.sort((e,t)=>t.intersectionZ-e.intersectionZ);const s=[];for(let o=this._order.length-1;o>=0;o--){const r=this._order[o];if(t(r))for(let e=a.length-1;e>=0;e--){const t=a[e].feature;if(i[t.layer.id]<o)break;s.push(t),a.pop()}else for(const t of e){const e=t[r];if(e)for(const t of e)s.push(t.feature)}}return s}queryRenderedFeatures(t,i,a){i&&i.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);const s={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of i.layers){const i=this._layers[t];if(!i)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];s[i.source]=!0}}const o=[];i.availableImages=this._availableImages;const r=i&&i.layers?i.layers.some(e=>{const t=this.getLayer(e);return t&&t.is3D()}):this.has3DLayers(),n=E.createFromScreenPoints(t,a);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;i.layers&&!s[t]||o.push(k(this._sourceCaches[e],this._layers,this._serializedLayers,n,i,a,r,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(e,t,i,a,s,o,r){const n={},l=o.queryRenderedSymbols(a),u=[];for(const e of Object.keys(l).map(Number))u.push(r[e]);u.sort(L);for(const i of u){const a=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],t,i.bucketIndex,i.sourceLayerIndex,s.filter,s.layers,s.availableImages,e);for(const e in a){const t=n[e]=n[e]||[],s=a[e];s.sort((e,t)=>{const a=i.featureSortOrder;if(a){const i=a.indexOf(e.featureIndex);return a.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex});for(const e of s)t.push(e)}}for(const t in n)n[t].forEach(a=>{const s=a.feature,o=i(e[t]).getFeatureState(s.layer["source-layer"],s.id);s.source=s.layer.source,s.layer["source-layer"]&&(s.sourceLayer=s.layer["source-layer"]),s.state=o});return n}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),n.screenGeometry,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,i){i&&i.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);const a=this._getSourceCaches(t);let s=[];for(const e of a)s=s.concat(F(e,i));return s}addSourceType(e,t,i){return je.getSourceType(e)?i(new Error(`A source type called "${e}" already exists.`)):(je.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},i):i(null,null))}getLight(){return this.light.getLight()}setLight(t,i={}){this._checkLoaded();const a=this.light.getLight();let s=!1;for(const i in t)if(!e.deepEqual(t[i],a[i])){s=!0;break}if(!s)return;const o={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,i),this.light.updateTransitions(o)}setTerrain(t){if(this._checkLoaded(),!t)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),void this._force3DLayerUpdate();if("object"==typeof t.source){const i="terrain-dem-src";this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})}if(!this._validate(e.validateStyle.terrain,"terrain",t))if(this.terrain){const i=this.terrain,a=i.get();for(const s in t)if(!e.deepEqual(t[s],a[s])){i.set(t),this.stylesheet.terrain=t;const a={now:e.browser.now(),transition:e.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(a);break}}else this._createTerrain(t)}_createTerrain(t){const i=this.terrain=new C(t);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const a={now:e.browser.now(),transition:e.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(a)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_validate(t,i,a,s,o={}){return(!o||!1!==o.validate)&&Ge(this,t.call(e.validateStyle,e.extend({key:i,style:this.serialize(),value:a,styleSpec:e.styleSpec},s)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const e of t)e.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const e of t)e.resume(),e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,i,a,s,o=!1){let r=!1,n=!1;const l={};for(const e of this._order){const i=this._layers[e];if("symbol"!==i.type)continue;if(!l[i.source]){const e=this._getLayerSourceCache(i);if(!e)continue;l[i.source]=e.getRenderableIds(!0).map(t=>e.getTileByID(t)).sort((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1))}const a=this.crossTileSymbolIndex.addLayer(i,l[i.source],t.center.lng);r=r||a}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((o=o||this._layerOrderChanged||0===a)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),t.zoom))&&(this.pauseablePlacement=new Fe(t,this._order,o,i,a,s,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),n=!0),r&&this.pauseablePlacement.placement.setStale()),n||r)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,i){this.imageManager.getImages(t.icons,i),this._updateTilesForChangedImages();const a=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};a(this._otherSourceCaches[t.source]),a(this._symbolSourceCaches[t.source])}getGlyphs(e,t,i){this.glyphManager.getGlyphs(t.stacks,i)}getResource(t,i,a){return e.makeRequest(i,a)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}has3DLayers(){return this._num3DLayers>0}}je.getSourceType=function(e){return I[e]},je.setSourceType=function(e,t){I[e]=t},je.registerForPluginStateChange=e.registerForPluginStateChange;var He="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let Xe={};Xe=Bt("","#ifdef TERRAIN\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}float prevElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*word/7.3;}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0);const We=Bt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nconst float PI=3.141592653589793;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const float PI=3.141592653589793;const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Ke=Bt("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Je=Bt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ye=Bt("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),et=Bt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),tt=Bt("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}"),it=Bt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),at=Bt("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),st=Bt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),ot=Bt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),rt=Bt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),nt=Bt("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),lt=Bt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ut=Bt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ct=Bt("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,t > 0.0 ? height : base,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),gt=Bt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,z,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),ft=Bt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),dt=Bt("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),ht=Bt("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),pt=Bt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),mt=Bt("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),yt=Bt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),_t=Bt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),bt=Bt("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),vt=Bt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),xt=Bt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),Ct=Bt("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;const float skirtOffset=24575.0;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);}"),qt=Bt("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),Ut=Bt("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",He),wt=Bt("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform lowp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5))*u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",He),Et=Bt("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}");function Bt(e,t,i){const a=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,s=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),o=e.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g),r=t.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g);let n=r?r.concat(o):o;i||(n=Xe.staticUniforms.concat(n));const l={};return{fragmentSource:e=e.replace(a,(e,t,i,a,s)=>(l[s]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${s}\nvarying ${i} ${a} ${s};\n#else\nuniform ${i} ${a} u_${s};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${s}\n    ${i} ${a} ${s} = u_${s};\n#endif\n`)),vertexSource:t=t.replace(a,(e,t,i,a,s)=>{const o="float"===a?"vec2":"vec4",r=s.match(/color/)?"color":o;return l[s]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${s}\nuniform lowp float u_${s}_t;\nattribute ${i} ${o} a_${s};\nvarying ${i} ${a} ${s};\n#else\nuniform ${i} ${a} u_${s};\n#endif\n`:"vec4"===r?`\n#ifndef HAS_UNIFORM_u_${s}\n    ${s} = a_${s};\n#else\n    ${i} ${a} ${s} = u_${s};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${s}\n    ${s} = unpack_mix_${r}(a_${s}, u_${s}_t);\n#else\n    ${i} ${a} ${s} = u_${s};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${s}\nuniform lowp float u_${s}_t;\nattribute ${i} ${o} a_${s};\n#else\nuniform ${i} ${a} u_${s};\n#endif\n`:"vec4"===r?`\n#ifndef HAS_UNIFORM_u_${s}\n    ${i} ${a} ${s} = a_${s};\n#else\n    ${i} ${a} ${s} = u_${s};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${s}\n    ${i} ${a} ${s} = unpack_mix_${r}(a_${s}, u_${s}_t);\n#else\n    ${i} ${a} ${s} = u_${s};\n#endif\n`}),staticAttributes:s,staticUniforms:n}}var Pt=Object.freeze({__proto__:null,get preludeTerrain(){return Xe},prelude:We,background:Ke,backgroundPattern:Je,circle:Ye,clippingMask:et,heatmap:tt,heatmapTexture:it,collisionBox:at,collisionCircle:st,debug:ot,fill:rt,fillOutline:nt,fillOutlinePattern:lt,fillPattern:ut,fillExtrusion:ct,fillExtrusionPattern:gt,hillshadePrepare:ft,hillshade:dt,line:ht,lineGradient:pt,linePattern:mt,lineSDF:yt,raster:_t,symbolIcon:bt,symbolSDF:vt,symbolTextAndIcon:xt,terrainRaster:Ct,terrainDepth:qt,skybox:Ut,skyboxGradient:wt,skyboxCapture:Et});class Mt{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,i,a,s,o,r,n){this.context=e;let l=this.boundPaintVertexBuffers.length!==a.length;for(let e=0;!l&&e<a.length;e++)this.boundPaintVertexBuffers[e]!==a[e]&&(l=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===s&&this.boundVertexOffset===o&&this.boundDynamicVertexBuffer===r&&this.boundDynamicVertexBuffer2===n?(e.bindVertexArrayOES.set(this.vao),r&&r.bind(),s&&s.dynamicDraw&&s.bind(),n&&n.bind()):this.freshBind(t,i,a,s,o,r,n)}freshBind(e,t,i,a,s,o,r){let n;const l=e.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),n=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=a,this.boundVertexOffset=s,this.boundDynamicVertexBuffer=o,this.boundDynamicVertexBuffer2=r;else{n=u.currentNumAttributes||0;for(let e=l;e<n;e++)c.disableVertexAttribArray(e)}t.enableAttributes(c,e);for(const t of i)t.enableAttributes(c,e);o&&o.enableAttributes(c,e),r&&r.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,s);for(const t of i)t.bind(),t.setVertexAttribPointers(c,e,s);o&&(o.bind(),o.setVertexAttribPointers(c,e,s)),a&&a.bind(),r&&(r.bind(),r.setVertexAttribPointers(c,e,s)),u.currentNumAttributes=l}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Tt(t,i){const a=Math.pow(2,i.canonical.z),s=i.canonical.y;return[new e.MercatorCoordinate(0,s/a).toLngLat().lat,new e.MercatorCoordinate(0,(s+1)/a).toLngLat().lat]}function At(t,i,a,s,o,r,n){const l=t.context,u=l.gl,c=a.fbo;if(!c)return;t.prepareDrawTile(i);const g=t.useProgram("hillshade");l.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());const f=((e,t,i,a)=>{const s=i.paint.get("hillshade-shadow-color"),o=i.paint.get("hillshade-highlight-color"),r=i.paint.get("hillshade-accent-color");let n=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(n-=e.transform.angle);const l=!e.options.moving;return{u_matrix:a||e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:Tt(0,t.tileID),u_light:[i.paint.get("hillshade-exaggeration"),n],u_shadow:s,u_highlight:o,u_accent:r}})(t,a,s,t.terrain?i.posMatrix:null);g.draw(l,u.TRIANGLES,o,r,n,e.CullFaceMode.disabled,f,s.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}function St(t,i,a){if(!i.needsDEMTextureUpload)return;const s=t.context,o=s.gl;s.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||t.getTileTexture(a.stride);const r=a.getPixels();i.demTexture?i.demTexture.update(r,{premultiply:!1}):i.demTexture=new e.Texture(s,r,o.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function It(t,i,a,s,o,r){const n=t.context,l=n.gl;if(!i.dem)return;const u=i.dem;if(n.activeTexture.set(l.TEXTURE1),St(t,i,u),!i.demTexture)return;i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const c=u.dim;n.activeTexture.set(l.TEXTURE0);let g=i.fbo;if(!g){const t=new e.Texture(n,{width:c,height:c,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),g=i.fbo=n.createFramebuffer(c,c,!0),g.colorAttachment.set(t.texture)}n.bindFramebuffer.set(g.framebuffer),n.viewport.set([0,0,c,c]),t.useProgram("hillshadePrepare").draw(n,l.TRIANGLES,s,o,r,e.CullFaceMode.disabled,((t,i)=>{const a=i.stride,s=e.create();return e.ortho(s,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(s,s,[0,-e.EXTENT,0]),{u_matrix:s,u_image:1,u_dimension:[a,a],u_zoom:t.overscaledZ,u_unpack:i.unpackVector}})(i.tileID,u),a.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),i.needsHillshadePrepare=!1}const Dt=(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image0:new e.Uniform1i(t,i.u_image0),u_skirt_height:new e.Uniform1f(t,i.u_skirt_height)}),zt=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),kt=new class{constructor(){this.operations={}}newMorphing(e,t,i,a,s){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==i.tileID.key&&(t.queued=i)}else this.operations[e]={startTime:a,phase:0,duration:s,from:t,to:i,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const i=this.operations[t];for(i.phase=(e-i.startTime)/i.duration;i.phase>=1||!this._validOp(i);)if(!this._nextOp(i,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},Ft={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Lt(t,i,a,s,o){const r=t.context,n=r.gl;let l=t.useProgram("terrainRaster"),u=0;const c=t.colorModeForRenderPass(),g=new e.DepthMode(n.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);kt.update(o);const f=t.transform,d=6*Math.pow(1.5,22-f.zoom)*i.exaggeration();var h,p,m;for(const y of s){const s=a.getTile(y),_=e.StencilMode.disabled,b=i.prevTerrainTileForTile[y.key],v=i.terrainTileForTile[y.key];m=v,null!=(p=b)&&null!=m&&p.hasData()&&m.hasData()&&null!=p.demTexture&&null!=m.demTexture&&p.tileID.key!==m.tileID.key&&kt.newMorphing(y.key,b,v,o,250),r.activeTexture.set(n.TEXTURE0),s.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE,n.LINEAR_MIPMAP_NEAREST);const x=kt.getMorphValuesForProxy(y.key),C=x?1:0;let q;x&&(q={morphing:{srcDemTile:x.from,dstDemTile:x.to,phase:e.easeCubicInOut(x.phase)}});const U=zt(y.posMatrix,Ot(y.canonical,f.renderWorldCopies)?d/10:d);u!==(h=C)&&(l=t.useProgram("terrainRaster",null,Ft[h]),u=h),i.setupElevationDraw(s,l,q),l.draw(r,n.TRIANGLES,g,_,c,e.CullFaceMode.backCCW,U,"terrain_raster",i.gridBuffer,i.gridIndexBuffer,i.gridSegments)}}function Ot(e,t){const i=1<<e.z;return!t&&(0===e.x||e.x===i-1)||0===e.y||e.y===i-1}const Rt=e=>({u_matrix:e});function Nt(t,i,a,s,o){if(o>0){const r=e.browser.now(),n=(r-t.timeAdded)/o,l=i?(r-i.timeAdded)/o:-1,u=a.getSource(),c=s.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),g=!i||Math.abs(i.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),f=g&&t.refreshedUponExpiration?1:e.clamp(g?n:1-l,0,1);return t.refreshedUponExpiration&&n>=1&&(t.refreshedUponExpiration=!1),i?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}const $t={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Gt extends e.SourceCache{constructor(e){const t=D("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new U(G(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,i,a){if(t.freezeTileCoverage)return;this.transform=t;const s=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!0}).reduce((i,a)=>{if(i[a.key]="",!this._tiles[a.key]){const i=new e.Tile(a,this._source.tileSize*a.overscaleFactor(),t.tileZoom);i.state="loaded",this._tiles[a.key]=i}return i},{});for(const e in this._tiles)e in s||(this.freeFBO(e),this._tiles[e].state="unloaded",delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];void 0!==t&&(this.renderCachePool.push(t),delete this.proxyCachedFBO[e])}deallocRenderCache(){this.renderCache.forEach(e=>e.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Vt extends e.OverscaledTileID{constructor(e,t,i){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.posMatrix=i}}class Zt extends e.Elevation{constructor(t,i){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[a,s,o]=function(t){const i=new e.StructArrayLayout4i8,a=new e.StructArrayLayout3ui6;i.reserve(17161),a.reserve(33800);const s=e.EXTENT/128,o=e.EXTENT+s/2,r=o+s;for(let t=-s;t<r;t+=s)for(let a=-s;a<r;a+=s){const s=a<0||a>o||t<0||t>o?24575:0,r=e.clamp(Math.round(a),0,e.EXTENT),n=e.clamp(Math.round(t),0,e.EXTENT);i.emplaceBack(r+s,n,r,n)}const n=(e,t)=>{const i=131*t+e;a.emplaceBack(i+1,i,i+131),a.emplaceBack(i+131,i+131+1,i+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)n(t,e);return[0,129].forEach(e=>{for(let t=0;t<130;t++)n(t,e),n(e,t)}),[i,a,32768]}(),r=t.context;this.gridBuffer=r.createVertexBuffer(a,A.members),this.gridIndexBuffer=r.createIndexBuffer(s),this.gridSegments=e.SegmentVector.simpleSegment(0,0,a.length,s.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,a.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._sourceTilesOverlap={},this.proxySourceCache=new Gt(i.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,0,e.EXTENT,0,e.EXTENT,0,1);const n=r.gl;this._overlapStencilMode=new e.StencilMode({func:n.GEQUAL,mask:255},0,255,n.KEEP,n.KEEP,n.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=i,i.on("data",this._onStyleDataEvent.bind(this))}update(t,i,a){if(t&&t.terrain){this.style!==t&&(t.on("data",this._onStyleDataEvent.bind(this)),this.style=t),this.enabled=!0;const s=t.terrain.properties;this.sourceCache=t._getSourceCache(s.get("source")),this._exaggeration=s.get("exaggeration");const o=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.sourceCache.getSource().tileSize/128,a=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(i,t*a,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),i.updateElevation(!a),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(i),this._depthDone=!1,this._emptyDEMTextureDirty=!0}else this._disable()}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this.proxySourceCache.deallocRenderCache(),this.painter.style))for(const e in this.painter.style._sourceCaches)this.painter.style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(e=>e.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const i=this.proxySourceCache,a=this.painter.transform;this._initializing&&(this._initializing=0===a._centerAltitude&&-1===this.getAtPoint(e.MercatorCoordinate.fromLngLat(a.center),-1),this._emptyDEMTextureDirty=!this._initializing);const s=this.painter.options;this.drapeFirst=(s.zooming||s.moving||s.rotating||!!this.forceDrapeFirst)&&!this._invalidateRenderCache,this._invalidateRenderCache=!1;const o=this.proxyCoords=i.getIds().map(e=>{const t=i.getTileByID(e).tileID;return t.posMatrix=a.calculatePosMatrix(t.toUnwrapped()),t});!function(t,i){const a=i.transform.pointCoordinate(i.transform.getCameraPoint()),s=new e.Point(a.x,a.y);t.sort((t,i)=>{if(i.overscaledZ-t.overscaledZ)return i.overscaledZ-t.overscaledZ;const a=new e.Point(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),o=new e.Point(i.canonical.x+(1<<i.canonical.z)*i.wrap,i.canonical.y),r=s.mult(1<<t.canonical.z);return r.x-=.5,r.y-=.5,r.distSqr(a)-r.distSqr(o)})}(o,this.painter),this._previousZoom=a.zoom;const r=this.proxyToSource||{};this.proxyToSource={},o.forEach(e=>{this.proxyToSource[e.key]={}}),this.terrainTileForTile={};const n=this.painter.style._sourceCaches;for(const e in n){const i=n[e];if(!i.used)continue;if(i!==this.sourceCache&&(this._findCoveringTileCache[i.id]={}),this._setupProxiedCoordsForOrtho(i,t[e],r),i.usedForTerrain)continue;const a=t[e];i.getSource().reparseOverscaled&&this._assignTerrainTiles(a)}this.proxiedCoords[i.id]=o.map(e=>new Vt(e,e.key,this.orthoMatrix)),this._assignTerrainTiles(o),this._prepareDEMTextures(),this._setupRenderCache(r),this.drapeFirstPending=this.drapeFirst,this.renderingToTexture=!1,this._initFBOPool(),this._updateTimestamp=e.browser.now();const l={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const i=t.tileID.key;i in l||(this._visibleDemTiles.push(t),l[i]=i)}}_assignTerrainTiles(e){this._initializing||e.forEach(e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)})}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const i in this.terrainTileForTile){const a=this.terrainTileForTile[i],s=a.dem;!s||a.demTexture&&!a.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),St(this.painter,a,s))}}_prepareDemTileUniforms(e,t,i,a){if(!t||null==t.demTexture)return!1;const s=e.tileID.canonical,o=Math.pow(2,t.tileID.canonical.z-s.z),r=a||"";return i["u_dem_tl"+r]=[s.x*o%1,s.y*o%1],i["u_dem_scale"+r]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce((t,i)=>{if(!i.dem)return t;const a=i.dem.tree.minimums[0];return a>0&&e++,t+a},0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,i=t.gl;t.activeTexture.set(i.TEXTURE2);const a=this._getLoadedAreaMinimum(),s={width:1,height:1,data:new Uint8Array(e.DEMData.pack(a,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(s,{premultiply:!1}):o=this._emptyDEMTexture=new e.Texture(t,s,i.RGBA,{premultiply:!1}),o}setupElevationDraw(t,i,a){const s=this.painter.context,o=s.gl,r=(n=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(n),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var n;r.u_dem_size=this.sourceCache.getSource().tileSize,r.u_exaggeration=this.exaggeration();let l=null,u=null,c=1;if(a&&a.morphing){const e=a.morphing.srcDemTile,i=a.morphing.dstDemTile;c=a.morphing.phase,e&&i&&(this._prepareDemTileUniforms(t,e,r,"_prev")&&(u=e),this._prepareDemTileUniforms(t,i,r)&&(l=i))}if(u&&l?(s.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),s.activeTexture.set(o.TEXTURE4),u.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),r.u_dem_lerp=c):(l=this.terrainTileForTile[t.tileID.key],s.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,l,r)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST)),a&&a.useDepthForOcclusion&&(s.activeTexture.set(o.TEXTURE3),this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),r.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),a&&a.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;r.u_meter_to_dem=t}a&&a.labelPlaneMatrixInv&&(r.u_label_plane_matrix_inv=a.labelPlaneMatrixInv),i.setTerrainUniformValues(s,r)}renderLayer(e,t){return"translucent"!==this.painter.renderPass?(this._depthDone||"symbol"!==e.type&&"circle"!==e.type||this.drawDepth(),!0):this.drapeFirst&&this.drapeFirstPending?(this.render(),this.drapeFirstPending=!1,!0):!!this._isLayerDrapedOverTerrain(e)&&(this.drapeFirst&&!this.renderingToTexture||this.render(),!0)}render(){this.renderingToTexture=!0;const t=this.painter,i=this.painter.context,a=this.proxySourceCache,s=this.proxiedCoords[a.id],o=()=>{i.bindFramebuffer.set(null),i.viewport.set([0,0,t.width,t.height]),this.renderingToTexture=!1},r=t.currentLayer;let n=r,l=[];const u=t.style._order;let c=0;for(let g=0;g<s.length;g++){const f=s[g],d=a.getTileByID(f.proxyTileKey),h=a.proxyCachedFBO[f.key],p=this.currentFBO=void 0!==h?a.renderCache[h]:this.pool[c++];if(d.texture=p.tex,void 0!==h&&!p.dirty){l.push(d.tileID);continue}let m;for(i.bindFramebuffer.set(p.fb.framebuffer),this.renderedToTile=!1,p.dirty&&(i.clear({color:e.Color.transparent}),p.dirty=!1),t.currentLayer=r;t.currentLayer<u.length;t.currentLayer++){const e=t.style._layers[u[t.currentLayer]],a=e.isHidden(t.transform.zoom),s=this._isLayerDrapedOverTerrain(e);if(this.drapeFirst&&!s)continue;if(t.currentLayer>n){if(!a&&!s)break;n++}if(a)continue;const o=this.painter.style._getLayerSourceCache(e),r=o?this.proxyToSource[f.key][o.id]:[f];if(!r)continue;const l=r;i.viewport.set([0,0,p.fb.width,p.fb.height]),m!==(o?o.id:null)&&(this._setupStencil(r,e,o),m=o?o.id:null),t.renderLayer(t,o,e,l)}p.dirty=this.renderedToTile,this.renderedToTile&&l.push(d.tileID),5===c&&(c=0,l.length>0&&(o(),Lt(t,this,a,l,this._updateTimestamp),this.renderingToTexture=!0,l=[]))}o(),l.length>0&&Lt(t,this,a,l,this._updateTimestamp),t.currentLayer=this.drapeFirst?-1:n}raycast(e,t,i){if(!this._visibleDemTiles)return null;const a=this._visibleDemTiles.filter(e=>e.dem).map(a=>{const s=a.tileID,o=Math.pow(2,s.overscaledZ),{x:r,y:n}=s.canonical,l=r/o,u=(r+1)/o,c=n/o,g=(n+1)/o;return{minx:l,miny:c,maxx:u,maxy:g,t:a.dem.tree.raycastRoot(l,c,u,g,e,t,i),tile:a}});a.sort((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE));for(const s of a){if(null==s.t)return null;const a=s.tile.dem.tree.raycast(s.minx,s.miny,s.maxx,s.maxy,e,t,i);if(null!=a)return a}return null}_createFBO(){const t=this.painter.context,i=t.gl,a=this.drapeBufferSize;t.activeTexture.set(i.TEXTURE0);const s=new e.Texture(t,{width:a[0],height:a[1],data:null},i.RGBA);s.bind(i.LINEAR,i.CLAMP_TO_EDGE);const o=t.createFramebuffer(a[0],a[1],!1);return o.colorAttachment.set(s.texture),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&i.texParameterf(i.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:o,tex:s,dirty:!1,ref:1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){return!this.drapeFirst||this.painter.style._order.some(e=>{const t=this.painter.style._layers[e],i=!t.isHidden(this.painter.transform.zoom),a=t.getCrossfadeParameters();return"custom"!==t.type&&!i&&!!a&&1!==a.t})}_clearRasterFadeFromRenderCache(){for(const e in this.painter.style._sourceCaches)if(!(this.painter.style._sourceCaches[e]._source instanceof T))return;for(let e=0;e<this.painter.style._order.length;++e){const t=this.painter.style._layers[this.painter.style._order[e]],i=t.isHidden(this.painter.transform.zoom),a=this.painter.style._getLayerSourceCache(t);if("raster"!==t.type||i||!a)continue;const s=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][a.id];if(t)for(const e of t){const t=Nt(a.getTile(e),a.findLoadedParent(e,0),a,this.painter.transform,s);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(a.id,e)}}}}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()){if(t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={},t.renderCachePool=t.renderCachePool.concat(e)}return}this._clearRasterFadeFromRenderCache();const i=this.proxyCoords,a=this._tilesDirty;for(let s=i.length-1;s>=0;s--){const o=i[s];if(t.getTileByID(o.key),void 0!==t.proxyCachedFBO[o.key]){const i=e[o.key],s=this.proxyToSource[o.key];let r=0;for(const e in s){const t=s[e],o=i[e];if(!o||o.length!==t.length||t.some((t,i)=>t!==o[i]||a[e]&&a[e].hasOwnProperty(t.key))){r=-1;break}++r}t.renderCache[t.proxyCachedFBO[o.key]].dirty=r<0||r!==Object.values(i).length}else{let e=t.renderCachePool.pop();void 0===e&&t.renderCache.length<50&&(e=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==e&&(t.proxyCachedFBO[o.key]=e,t.renderCache[e].dirty=!0)}}this._tilesDirty={}}_setupStencil(t,i,a){if(!a||!this._sourceTilesOverlap[a.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const s=this.painter.context,o=s.gl;if(t.length<=1)return void(this._overlapStencilType=!1);const r=this.currentFBO,n=r.fb;let l;if(i.isTileClipped())l=t.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);l=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}if(!n.depthAttachment){const t=s.createRenderbuffer(s.gl.DEPTH_STENCIL,n.width,n.height);n.depthAttachment=new e.DepthStencilAttachment(s,n.framebuffer),n.depthAttachment.set(t),s.clear({stencil:0})}r.ref+l>255&&(s.clear({stencil:0}),r.ref=0),r.ref+=l,this._overlapStencilMode.ref=r.ref,i.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,i){const a=this.painter,s=this.painter.context,o=s.gl;a._tileClippingMaskIDs={},s.setColorMode(e.ColorMode.disabled),s.setDepthMode(e.DepthMode.disabled);const r=a.useProgram("clippingMask");for(const n of t){const t=a._tileClippingMaskIDs[n.key]=--i;r.draw(s,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},t,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Rt(n.posMatrix),"$clipping",a.tileExtentBuffer,a.quadTriangleIndexBuffer,a.tileExtentSegments)}}pointCoordinate(t){const i=this.painter.transform;if(t.x<0||t.x>i.width||t.y<0||t.y>i.height)return null;const a=[t.x,t.y,1,1];e.transformMat4(a,a,i.pixelMatrixInverse),e.scale$1(a,a,1/a[3]),a[0]/=i.worldSize,a[1]/=i.worldSize;const s=i._camera.position,o=e.mercatorZfromAltitude(1,i.center.lat),r=[s[0],s[1],s[2]/o,0],n=e.subtract([],a.slice(0,3),r);e.normalize(n,n);const l=this.raycast(r,n,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(r,r,n,l),r[3]=r[2],r[2]*=o,r):null}drawDepth(){const t=this.painter,i=t.context,a=this.proxySourceCache,s=Math.ceil(t.width),o=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===s&&this._depthFBO.height===o||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const t=i.gl,a=i.createFramebuffer(s,o,!0);i.activeTexture.set(t.TEXTURE0);const r=new e.Texture(i,{width:s,height:o,data:null},t.RGBA);r.bind(t.NEAREST,t.CLAMP_TO_EDGE),a.colorAttachment.set(r.texture);const n=i.createRenderbuffer(i.gl.DEPTH_COMPONENT16,s,o);a.depthAttachment.set(n),this._depthFBO=a,this._depthTexture=r}i.bindFramebuffer.set(this._depthFBO.framebuffer),i.viewport.set([0,0,s,o]),function(t,i,a,s){const o=t.context,r=o.gl;o.clear({depth:1});const n=t.useProgram("terrainDepth"),l=new e.DepthMode(r.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const t of s){const s=a.getTile(t),u=zt(t.posMatrix,0);i.setupElevationDraw(s,n),n.draw(o,r.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,u,"terrain_depth",i.gridBuffer,i.gridIndexBuffer,i.gridNoSkirtSegments)}}(t,this,a,this.proxyCoords),i.bindFramebuffer.set(null),i.viewport.set([0,0,t.width,t.height]),this._depthDone=!0}_isLayerDrapedOverTerrain(e){return!!this.enabled&&$t.hasOwnProperty(e.type)}_setupProxiedCoordsForOrtho(e,t,i){if(e.getSource()instanceof S)return this._setupProxiedCoordsForImageSource(e,t,i);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const a=this.proxiedCoords[e.id]=[],s=this.proxyCoords;for(let t=0;t<s.length;t++){const o=s[t],r=this._findTileCoveringTileID(o,e);if(r){const t=this._createProxiedId(o,r,i[o.key]&&i[o.key][e.id]);a.push(t),this.proxyToSource[o.key][e.id]=[t]}}let o=!1;for(let s=0;s<t.length;s++){const r=e.getTile(t[s]);if(!r||!r.hasData())continue;const n=this._findTileCoveringTileID(r.tileID,this.proxySourceCache);if(n&&n.tileID.canonical.z!==r.tileID.canonical.z){const t=this.proxyToSource[n.tileID.key][e.id],s=this._createProxiedId(n.tileID,r,i[n.tileID.key]&&i[n.tileID.key][e.id]);t?t.splice(t.length-1,0,s):this.proxyToSource[n.tileID.key][e.id]=[s],a.push(s),o=!0}}this._sourceTilesOverlap[e.id]=o}_setupProxiedCoordsForImageSource(t,i,a){if(!t.getSource().loaded())return;const s=this.proxiedCoords[t.id]=[],o=this.proxyCoords,r=t.getSource(),n=new e.Point(r.tileID.x,r.tileID.y)._div(1<<r.tileID.z),l=r.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce((e,t)=>(e.min.x=Math.min(e.min.x,t.x-n.x),e.min.y=Math.min(e.min.y,t.y-n.y),e.max.x=Math.max(e.max.x,t.x-n.x),e.max.y=Math.max(e.max.y,t.y-n.y),e),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),u=(t,i)=>{const a=t.wrap+t.canonical.x/(1<<t.canonical.z),s=t.canonical.y/(1<<t.canonical.z),o=e.EXTENT/(1<<t.canonical.z),r=i.wrap+i.canonical.x/(1<<i.canonical.z),n=i.canonical.y/(1<<i.canonical.z);return a+o<r+l.min.x||a>r+l.max.x||s+o<n+l.min.y||s>n+l.max.y};for(let e=0;e<o.length;e++){const r=o[e];for(let e=0;e<i.length;e++){const o=t.getTile(i[e]);if(!o||!o.hasData())continue;if(u(r,o.tileID))continue;const n=this._createProxiedId(r,o,a[r.key]&&a[r.key][t.id]),l=this.proxyToSource[r.key][t.id];l?l.push(n):this.proxyToSource[r.key][t.id]=[n],s.push(n)}}}_createProxiedId(t,i,a){let s=this.orthoMatrix;if(a){const e=a.find(e=>e.key===i.tileID.key);if(e)return e}if(i.tileID.key!==t.key){const a=t.canonical.z-i.tileID.canonical.z;let o,r,n;s=e.create();const l=i.tileID.wrap-t.wrap<<t.overscaledZ;a>0?(o=e.EXTENT>>a,r=o*((i.tileID.canonical.x<<a)-t.canonical.x+l),n=o*((i.tileID.canonical.y<<a)-t.canonical.y)):(o=e.EXTENT<<-a,r=e.EXTENT*(i.tileID.canonical.x-(t.canonical.x+l<<-a)),n=e.EXTENT*(i.tileID.canonical.y-(t.canonical.y<<-a))),e.ortho(s,0,o,0,o,0,1),e.translate(s,s,[r,n,0])}return new Vt(i.tileID,t.key,s)}_findTileCoveringTileID(t,i){let a=i.getTile(t);if(a&&a.hasData())return a;const s=this._findCoveringTileCache[i.id],o=s[t.key];if(a=o?i.getTileByID(o):null,a&&a.hasData()||null===o)return a;let r=a?a.tileID:t,n=r.overscaledZ;const l=i.getSource().minzoom,u=[];if(!o){const s=i.getSource().maxzoom;if(t.canonical.z>=s){const a=t.canonical.z-s;i.getSource().reparseOverscaled?(n=Math.max(t.canonical.z+2,i.transform.tileZoom),r=new e.OverscaledTileID(n,t.wrap,s,t.canonical.x>>a,t.canonical.y>>a)):0!==a&&(n=s,r=new e.OverscaledTileID(n,t.wrap,s,t.canonical.x>>a,t.canonical.y>>a))}r.key!==t.key&&(u.push(r.key),a=i.getTile(r))}const c=e=>{u.forEach(t=>{s[t]=e}),u.length=0};for(n-=1;n>=l&&(!a||!a.hasData());n--){a&&c(a.tileID.key);const e=r.calculateScaledKey(n);if(a=i.getTileByID(e),a&&a.hasData())break;const t=s[e];if(null===t)break;void 0===t?u.push(e):a=i.getTileByID(t)}return c(a?a.tileID.key:null),a&&a.hasData()?a:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(e){this.renderedToTile||(this.renderedToTile=!0)}_clearRenderCacheForTile(e,t){let i=this._tilesDirty[e];i||(i=this._tilesDirty[e]={}),i[t.key]=!0}}function Qt(e){const t=[];for(let i=0;i<e.length;i++){if(null===e[i])continue;const a=e[i].split(" ");t.push(a.pop())}return t}class jt{static cacheKey(e,t,i){let a=`${e}${i?i.cacheKey:""}`;for(const e of t)a+="/"+e;return a}constructor(t,i,a,s,o,r){const n=t.gl;this.program=n.createProgram();const l=Qt(a.staticAttributes),u=s?s.getBinderAttributes():[],c=l.concat(u),g=a.staticUniforms?Qt(a.staticUniforms):[],f=s?s.getBinderUniforms():[],d=g.concat(f),h=[];for(const e of d)h.indexOf(e)<0&&h.push(e);let p=s?s.defines():[];p=p.concat(r.map(e=>"#define "+e));const m=p.concat(We.fragmentSource,a.fragmentSource).join("\n"),y=p.concat(We.vertexSource,Xe.vertexSource,a.vertexSource).join("\n"),_=n.createShader(n.FRAGMENT_SHADER);if(n.isContextLost())return void(this.failedToCreate=!0);n.shaderSource(_,m),n.compileShader(_),n.attachShader(this.program,_);const b=n.createShader(n.VERTEX_SHADER);if(n.isContextLost())return void(this.failedToCreate=!0);n.shaderSource(b,y),n.compileShader(b),n.attachShader(this.program,b),this.attributes={};const v={};this.numAttributes=c.length;for(let e=0;e<this.numAttributes;e++)c[e]&&(n.bindAttribLocation(this.program,e,c[e]),this.attributes[c[e]]=e);n.linkProgram(this.program),n.deleteShader(b),n.deleteShader(_);for(let e=0;e<h.length;e++){const t=h[e];if(t&&!v[t]){const e=n.getUniformLocation(this.program,t);e&&(v[t]=e)}}this.fixedUniforms=o(t,v),this.binderUniforms=s?s.getUniforms(t,v):[],-1!==r.indexOf("TERRAIN")&&(this.terrainUniforms=((t,i)=>({u_dem:new e.Uniform1i(t,i.u_dem),u_dem_prev:new e.Uniform1i(t,i.u_dem_prev),u_dem_unpack:new e.Uniform4f(t,i.u_dem_unpack),u_dem_tl:new e.Uniform2f(t,i.u_dem_tl),u_dem_scale:new e.Uniform1f(t,i.u_dem_scale),u_dem_tl_prev:new e.Uniform2f(t,i.u_dem_tl_prev),u_dem_scale_prev:new e.Uniform1f(t,i.u_dem_scale_prev),u_dem_size:new e.Uniform1f(t,i.u_dem_size),u_dem_lerp:new e.Uniform1f(t,i.u_dem_lerp),u_exaggeration:new e.Uniform1f(t,i.u_exaggeration),u_depth:new e.Uniform1i(t,i.u_depth),u_depth_size_inv:new e.Uniform2f(t,i.u_depth_size_inv),u_meter_to_dem:new e.Uniform1f(t,i.u_meter_to_dem),u_label_plane_matrix_inv:new e.UniformMatrix4f(t,i.u_label_plane_matrix_inv)}))(t,v))}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const i=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)i[e].set(t[e])}}draw(e,t,i,a,s,o,r,n,l,u,c,g,f,d,h,p){const m=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(i),e.setStencilMode(a),e.setColorMode(s),e.setCullFace(o);for(const e in this.fixedUniforms)this.fixedUniforms[e].set(r[e]);d&&d.setUniforms(e,this.binderUniforms,g,{zoom:f});const y={[m.LINES]:2,[m.TRIANGLES]:3,[m.LINE_STRIP]:1}[t];for(const i of c.get()){const a=i.vaos||(i.vaos={});(a[n]||(a[n]=new Mt)).bind(e,this,l,d?d.getPaintVertexBuffers():[],u,i.vertexOffset,h,p),m.drawElements(t,i.primitiveLength*y,m.UNSIGNED_SHORT,i.primitiveOffset*y*2)}}}function Ht(e,t,i){const a=1/w(i,1,t.transform.tileZoom),s=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,t.transform.tileZoom)/s,r=o*(i.tileID.canonical.x+i.tileID.wrap*s),n=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[a,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[r>>16,n>>16],u_pixel_coord_lower:[65535&r,65535&n]}}const Xt=(t,i,a,s)=>{const o=i.style.light,r=o.properties.get("position"),n=[r.x,r.y,r.z],l=e.create$1();"viewport"===o.properties.get("anchor")&&(e.fromRotation(l,-i.transform.angle),e.transformMat3(n,n,l));const u=o.properties.get("color");return{u_matrix:t,u_lightpos:n,u_lightintensity:o.properties.get("intensity"),u_lightcolor:[u.r,u.g,u.b],u_vertical_gradient:+a,u_opacity:s}},Wt=(t,i,a,s,o,r,n)=>e.extend(Xt(t,i,a,s),Ht(r,i,n),{u_height_factor:-Math.pow(2,o.overscaledZ)/n.tileSize/8}),Kt=e=>({u_matrix:e}),Jt=(t,i,a,s)=>e.extend(Kt(t),Ht(a,i,s)),Yt=(e,t)=>({u_matrix:e,u_world:t}),ei=(t,i,a,s,o)=>e.extend(Jt(t,i,a,s),{u_world:o}),ti=(t,i,a,s)=>{const o=t.transform;let r;if("map"===s.paint.get("circle-pitch-alignment")){const e=w(a,1,o.zoom);r=[e,e]}else r=o.pixelsToGLUnits;return{u_camera_to_center_distance:o.cameraToCenterDistance,u_matrix:t.translatePosMatrix(i.posMatrix,a,s.paint.get("circle-translate"),s.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:r}},ii=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},ai=(t,i,a)=>{const s=e.EXTENT/a.tileSize;return{u_matrix:t,u_camera_to_center_distance:i.cameraToCenterDistance,u_extrude_scale:[i.pixelsToGLUnits[0]/s,i.pixelsToGLUnits[1]/s]}},si=(e,t,i=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:i}),oi=(e,t,i,a)=>({u_matrix:e,u_extrude_scale:w(t,1,i),u_intensity:a}),ri=(t,i,a,s)=>{const o=t.transform;return{u_matrix:gi(t,i,a,s),u_ratio:1/w(i,1,o.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]]}},ni=(t,i,a,s,o)=>e.extend(ri(t,i,a,s),{u_image:0,u_image_height:o}),li=(t,i,a,s,o)=>{const r=t.transform,n=ci(i,r);return{u_matrix:gi(t,i,a,o),u_texsize:i.imageAtlasTexture.size,u_ratio:1/w(i,1,r.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[n,s.fromScale,s.toScale],u_fade:s.t,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},ui=(t,i,a,s,o,r)=>{const n=t.lineAtlas,l=ci(i,t.transform),u="round"===a.layout.get("line-cap"),c=n.getDash(s.from,u),g=n.getDash(s.to,u),f=c.width*o.fromScale,d=g.width*o.toScale;return e.extend(ri(t,i,a,r),{u_patternscale_a:[l/f,-c.height/2],u_patternscale_b:[l/d,-g.height/2],u_sdfgamma:n.width/(256*Math.min(f,d)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:c.y,u_tex_y_b:g.y,u_mix:o.t})};function ci(e,t){return 1/w(e,1,t.tileZoom)}function gi(e,t,i,a){return e.translatePosMatrix(a||t.tileID.posMatrix,t,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const fi=(e,t,i,a,s)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:i,u_buffer_scale:1,u_fade_t:a.mix,u_opacity:a.opacity*s.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:s.paint.get("raster-brightness-min"),u_brightness_high:s.paint.get("raster-brightness-max"),u_saturation_factor:(r=s.paint.get("raster-saturation"),r>0?1-1/(1.001-r):-r),u_contrast_factor:(o=s.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:di(s.paint.get("raster-hue-rotate"))};var o,r};function di(e){e*=Math.PI/180;const t=Math.sin(e),i=Math.cos(e);return[(2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3]}const hi=(e,t,i,a,s,o,r,n,l,u)=>{const c=s.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:c.cameraToCenterDistance,u_pitch:c.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:c.width/c.height,u_fade_change:s.options.fadeDuration?s.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:r,u_coord_matrix:n,u_is_text:+l,u_pitch_with_map:+a,u_texsize:u,u_texture:0}},pi=(t,i,a,s,o,r,n,l,u,c,g)=>{const f=o.transform;return e.extend(hi(t,i,a,s,o,r,n,l,u,c),{u_gamma_scale:s?Math.cos(f._pitch)*f.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+g})},mi=(t,i,a,s,o,r,n,l,u,c)=>e.extend(pi(t,i,a,s,o,r,n,l,!0,u,!0),{u_texsize_icon:c,u_texture_icon:1}),yi=(e,t,i)=>({u_matrix:e,u_opacity:t,u_color:i}),_i=(t,i,a,s,o,r)=>e.extend(function(e,t,i,a){const s=i.imageManager.getPattern(e.from.toString()),o=i.imageManager.getPattern(e.to.toString()),{width:r,height:n}=i.imageManager.getPixelSize(),l=Math.pow(2,a.tileID.overscaledZ),u=a.tileSize*Math.pow(2,i.transform.tileZoom)/l,c=u*(a.tileID.canonical.x+a.tileID.wrap*l),g=u*a.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:s.tl,u_pattern_br_a:s.br,u_pattern_tl_b:o.tl,u_pattern_br_b:o.br,u_texsize:[r,n],u_mix:t.t,u_pattern_size_a:s.displaySize,u_pattern_size_b:o.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/w(a,1,i.transform.tileZoom),u_pixel_coord_upper:[c>>16,g>>16],u_pixel_coord_lower:[65535&c,65535&g]}}(s,r,a,o),{u_matrix:t,u_opacity:i}),bi={fillExtrusion:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_opacity:new e.Uniform1f(t,i.u_opacity)}),fillExtrusionPattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,i.u_height_factor),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade),u_opacity:new e.Uniform1f(t,i.u_opacity)}),fill:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}),fillPattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}),fillOutline:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world)}),fillOutlinePattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}),circle:(t,i)=>({u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,i.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}),collisionBox:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,i.u_extrude_scale)}),collisionCircle:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,i.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,i.u_viewport_size)}),debug:(t,i)=>({u_color:new e.UniformColor(t,i.u_color),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_overlay:new e.Uniform1i(t,i.u_overlay),u_overlay_scale:new e.Uniform1f(t,i.u_overlay_scale)}),clippingMask:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}),heatmap:(t,i)=>({u_extrude_scale:new e.Uniform1f(t,i.u_extrude_scale),u_intensity:new e.Uniform1f(t,i.u_intensity),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}),heatmapTexture:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world),u_image:new e.Uniform1i(t,i.u_image),u_color_ramp:new e.Uniform1i(t,i.u_color_ramp),u_opacity:new e.Uniform1f(t,i.u_opacity)}),hillshade:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_latrange:new e.Uniform2f(t,i.u_latrange),u_light:new e.Uniform2f(t,i.u_light),u_shadow:new e.UniformColor(t,i.u_shadow),u_highlight:new e.UniformColor(t,i.u_highlight),u_accent:new e.UniformColor(t,i.u_accent)}),hillshadePrepare:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_dimension:new e.Uniform2f(t,i.u_dimension),u_zoom:new e.Uniform1f(t,i.u_zoom),u_unpack:new e.Uniform4f(t,i.u_unpack)}),line:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels)}),lineGradient:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_image:new e.Uniform1i(t,i.u_image),u_image_height:new e.Uniform1f(t,i.u_image_height)}),linePattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_texsize:new e.Uniform2f(t,i.u_texsize),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_image:new e.Uniform1i(t,i.u_image),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}),lineSDF:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,i.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,i.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,i.u_sdfgamma),u_image:new e.Uniform1i(t,i.u_image),u_tex_y_a:new e.Uniform1f(t,i.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,i.u_tex_y_b),u_mix:new e.Uniform1f(t,i.u_mix)}),raster:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_tl_parent:new e.Uniform2f(t,i.u_tl_parent),u_scale_parent:new e.Uniform1f(t,i.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,i.u_buffer_scale),u_fade_t:new e.Uniform1f(t,i.u_fade_t),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image0:new e.Uniform1i(t,i.u_image0),u_image1:new e.Uniform1i(t,i.u_image1),u_brightness_low:new e.Uniform1f(t,i.u_brightness_low),u_brightness_high:new e.Uniform1f(t,i.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,i.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,i.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,i.u_spin_weights)}),symbolIcon:(t,i)=>({u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texture:new e.Uniform1i(t,i.u_texture)}),symbolSDF:(t,i)=>({u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texture:new e.Uniform1i(t,i.u_texture),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}),symbolTextAndIcon:(t,i)=>({u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texsize_icon:new e.Uniform2f(t,i.u_texsize_icon),u_texture:new e.Uniform1i(t,i.u_texture),u_texture_icon:new e.Uniform1i(t,i.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}),background:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_color:new e.UniformColor(t,i.u_color)}),backgroundPattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image:new e.Uniform1i(t,i.u_image),u_pattern_tl_a:new e.Uniform2f(t,i.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,i.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,i.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,i.u_pattern_br_b),u_texsize:new e.Uniform2f(t,i.u_texsize),u_mix:new e.Uniform1f(t,i.u_mix),u_pattern_size_a:new e.Uniform2f(t,i.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,i.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,i.u_scale_a),u_scale_b:new e.Uniform1f(t,i.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,i.u_tile_units_to_pixels)}),terrainRaster:Dt,terrainDepth:Dt,skybox:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_sun_direction:new e.Uniform3f(t,i.u_sun_direction),u_cubemap:new e.Uniform1i(t,i.u_cubemap),u_opacity:new e.Uniform1f(t,i.u_opacity),u_temporal_offset:new e.Uniform1f(t,i.u_temporal_offset)}),skyboxGradient:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_color_ramp:new e.Uniform1i(t,i.u_color_ramp),u_center_direction:new e.Uniform3f(t,i.u_center_direction),u_radius:new e.Uniform1f(t,i.u_radius),u_opacity:new e.Uniform1f(t,i.u_opacity),u_temporal_offset:new e.Uniform1f(t,i.u_temporal_offset)}),skyboxCapture:(t,i)=>({u_matrix_3f:new e.UniformMatrix3f(t,i.u_matrix_3f),u_sun_direction:new e.Uniform3f(t,i.u_sun_direction),u_sun_intensity:new e.Uniform1f(t,i.u_sun_intensity),u_color_tint_r:new e.Uniform4f(t,i.u_color_tint_r),u_color_tint_m:new e.Uniform4f(t,i.u_color_tint_m),u_luminance:new e.Uniform1f(t,i.u_luminance)})};let vi;function xi(t,i,a,s,o,r,n){const l=t.context,u=l.gl,c=t.useProgram("collisionBox"),g=[];let f=0,d=0;for(let h=0;h<s.length;h++){const p=s[h],m=i.getTile(p),y=m.getBucket(a);if(!y)continue;let _=p.posMatrix;0===o[0]&&0===o[1]||(_=t.translatePosMatrix(p.posMatrix,m,o,r));const b=n?y.textCollisionBox:y.iconCollisionBox,v=y.collisionCircleArray;if(v.length>0){const i=e.create(),a=_;e.mul(i,y.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(i,i,y.placementViewportMatrix),g.push({circleArray:v,circleOffset:d,transform:a,invTransform:i}),f+=v.length/4,d=f}b&&(t.terrain&&t.terrain.setupElevationDraw(m,c),c.draw(l,u.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,ai(_,t.transform,m),a.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,t.transform.zoom,null,b.collisionVertexBuffer,b.collisionVertexBufferExt))}if(!n||!g.length)return;const h=t.useProgram("collisionCircle"),p=new e.StructArrayLayout2f1f2i16;p.resize(4*f),p._trim();let m=0;for(const e of g)for(let t=0;t<e.circleArray.length/4;t++){const i=4*t,a=e.circleArray[i+0],s=e.circleArray[i+1],o=e.circleArray[i+2],r=e.circleArray[i+3];p.emplace(m++,a,s,o,r,0),p.emplace(m++,a,s,o,r,1),p.emplace(m++,a,s,o,r,2),p.emplace(m++,a,s,o,r,3)}(!vi||vi.length<2*f)&&(vi=function(t){const i=2*t,a=new e.StructArrayLayout3ui6;a.resize(i),a._trim();for(let e=0;e<i;e++){const t=6*e;a.uint16[t+0]=4*e+0,a.uint16[t+1]=4*e+1,a.uint16[t+2]=4*e+2,a.uint16[t+3]=4*e+2,a.uint16[t+4]=4*e+3,a.uint16[t+5]=4*e+0}return a}(f));const y=l.createIndexBuffer(vi,!0),_=l.createVertexBuffer(p,e.collisionCircleLayout.members,!0);for(const i of g){const s={u_matrix:i.transform,u_inv_matrix:i.invTransform,u_camera_to_center_distance:(b=t.transform).cameraToCenterDistance,u_viewport_size:[b.width,b.height]};h.draw(l,u.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,s,a.id,_,y,e.SegmentVector.simpleSegment(0,2*i.circleOffset,i.circleArray.length,i.circleArray.length/2),null,t.transform.zoom,null,null,null)}var b;_.destroy(),y.destroy()}const Ci=e.identity(new Float32Array(16));function qi(t,i,a,s,o,r){const{horizontalAlign:n,verticalAlign:l}=e.getAnchorAlignment(t),u=-(n-.5)*i,c=-(l-.5)*a,g=e.evaluateVariableOffset(t,s);return new e.Point((u/o+g[0])*r,(c/o+g[1])*r)}function Ui(t,i,a,s,o,r,n,l,u,c,g,f){const d=t.text.placedSymbolArray,h=t.text.dynamicLayoutVertexArray,p=t.icon.dynamicLayoutVertexArray,m={};h.clear();for(let p=0;p<d.length;p++){const y=d.get(p),_=t.allowVerticalPlacement&&!y.placedOrientation,b=y.hidden||!y.crossTileID||_?null:s[y.crossTileID];if(b){const s=new e.Point(y.anchorX,y.anchorY),d=f(s),p=se(s,a?l:n,d),_=oe(r.cameraToCenterDistance,p.signedDistanceFromCamera);let v=o.evaluateSizeForFeature(t.textSizeData,c,y)*_/e.ONE_EM;a&&(v*=t.tilePixelRatio/u);const{width:x,height:C,anchor:q,textOffset:U,textBoxScale:w}=b,E=qi(q,x,C,U,w,v),B=a?se(s.add(E),n,d).point:p.point.add(i?E.rotate(-r.angle):E),P=t.allowVerticalPlacement&&y.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<y.numGlyphs;t++)e.addDynamicAttributes(h,B,P);g&&y.associatedIconIndex>=0&&(m[y.associatedIconIndex]={shiftedAnchor:B,angle:P})}else he(y.numGlyphs,h)}if(g){p.clear();const i=t.icon.placedSymbolArray;for(let t=0;t<i.length;t++){const a=i.get(t);if(a.hidden)he(a.numGlyphs,p);else{const i=m[t];if(i)for(let t=0;t<a.numGlyphs;t++)e.addDynamicAttributes(p,i.shiftedAnchor,i.angle);else he(a.numGlyphs,p)}}t.icon.dynamicLayoutVertexBuffer.updateData(p)}t.text.dynamicLayoutVertexBuffer.updateData(h)}function wi(e,t,i){return i.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Ei(t,i,a,s,o,r,n,l,u,c,g,f){const d=t.context,h=d.gl,p=t.transform,m="map"===l,y="map"===u,_=m&&"point"!==a.layout.get("symbol-placement"),b=m&&!y&&!_,v=void 0!==a.layout.get("symbol-sort-key").constantOr(1);let x=!1;const C=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),q=a.layout.get("text-variable-anchor"),U=[],E=t.terrain&&y?["PITCH_WITH_MAP_TERRAIN"]:null;for(const l of s){const s=i.getTile(l),u=s.getBucket(a);if(!u)continue;const g=o?u.text:u.icon;if(!g||!g.segments.get().length)continue;const f=g.programConfigurations.get(a.id),d=o||u.sdfIcons,C=o?u.textSizeData:u.iconSizeData,B=y||0!==p.pitch,P=t.useProgram(wi(d,o,u),f,E),M=e.evaluateSizeForZoom(C,p.zoom);let T,A,S,I,D=[0,0],z=null;if(o){if(A=s.glyphAtlasTexture,S=h.LINEAR,T=s.glyphAtlasTexture.size,u.iconsInText){D=s.imageAtlasTexture.size,z=s.imageAtlasTexture;const e="composite"===C.kind||"camera"===C.kind;I=B||t.options.rotating||t.options.zooming||e?h.LINEAR:h.NEAREST}}else{const e=1!==a.layout.get("icon-size").constantOr(0)||u.iconsNeedLinear;A=s.imageAtlasTexture,S=d||t.options.rotating||t.options.zooming||e||B?h.LINEAR:h.NEAREST,T=s.imageAtlasTexture.size}const k=w(s,1,t.transform.zoom),F=ie(l.posMatrix,y,m,t.transform,k),L=t.terrain&&y&&_?e.invert(new Float32Array(16),F):Ci,O=ae(l.posMatrix,y,m,t.transform,k),R=q&&u.hasTextData(),N="none"!==a.layout.get("icon-text-fit")&&R&&u.hasIconData();if(_){const e=p.elevation;ne(u,l.posMatrix,t,o,F,O,y,c,e?t=>e.getAtTileOffset(l,t.x,t.y):null)}const $=t.translatePosMatrix(l.posMatrix,s,r,n),G=_||o&&q||N?Ci:F,V=t.translatePosMatrix(O,s,r,n,!0),Z=d&&0!==a.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let Q;Q=d?u.iconsInText?mi(C.kind,M,b,y,t,$,G,V,T,D):pi(C.kind,M,b,y,t,$,G,V,o,T,!0):hi(C.kind,M,b,y,t,$,G,V,o,T);const j={program:P,buffers:g,uniformValues:Q,atlasTexture:A,atlasTextureIcon:z,atlasInterpolation:S,atlasInterpolationIcon:I,isSDF:d,hasHalo:Z,tile:s,labelPlaneMatrixInv:L};if(v&&u.canOverlap){x=!0;const t=g.segments.get();for(const i of t)U.push({segments:new e.SegmentVector([i]),sortKey:i.sortKey,state:j})}else U.push({segments:g.segments,sortKey:0,state:j})}x&&U.sort((e,t)=>e.sortKey-t.sortKey);for(const e of U){const i=e.state;if(t.terrain&&t.terrain.setupElevationDraw(i.tile,i.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:i.labelPlaneMatrixInv}),d.activeTexture.set(h.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,h.CLAMP_TO_EDGE),i.atlasTextureIcon&&(d.activeTexture.set(h.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,h.CLAMP_TO_EDGE)),i.isSDF){const s=i.uniformValues;i.hasHalo&&(s.u_is_halo=1,Bi(i.buffers,e.segments,a,t,i.program,C,g,f,s)),s.u_is_halo=0}Bi(i.buffers,e.segments,a,t,i.program,C,g,f,i.uniformValues)}}function Bi(t,i,a,s,o,r,n,l,u){const c=s.context;o.draw(c,c.gl.TRIANGLES,r,n,l,e.CullFaceMode.disabled,u,a.id,t.layoutVertexBuffer,t.indexBuffer,i,a.paint,s.transform.zoom,t.programConfigurations.get(a.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Pi(t,i,a,s,o,r,n){const l=t.context.gl,u=a.paint.get("fill-pattern"),c=u&&u.constantOr(1),g=a.getCrossfadeParameters();let f,d,h,p,m;n?(d=c&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",f=l.LINES):(d=c?"fillPattern":"fill",f=l.TRIANGLES);for(const y of s){const s=i.getTile(y);if(c&&!s.patternsLoaded())continue;const _=s.getBucket(a);if(!_)continue;t.prepareDrawTile(y);const b=_.programConfigurations.get(a.id),v=t.useProgram(d,b);c&&(t.context.activeTexture.set(l.TEXTURE0),s.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),b.updatePaintBuffers(g));const x=u.constantOr(null);if(x&&s.imageAtlas){const e=s.imageAtlas,t=e.patternPositions[x.to.toString()],i=e.patternPositions[x.from.toString()];t&&i&&b.setConstantPatternPositions(t,i)}const C=t.translatePosMatrix(y.posMatrix,s,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));if(n){p=_.indexBuffer2,m=_.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];h="fillOutlinePattern"===d&&c?ei(C,t,g,s,e):Yt(C,e)}else p=_.indexBuffer,m=_.segments,h=c?Jt(C,t,g,s):Kt(C);v.draw(t.context,f,o,t.stencilModeForClipping(y),r,e.CullFaceMode.disabled,h,a.id,_.layoutVertexBuffer,p,m,a.paint,t.transform.zoom,b)}}function Mi(t,i,a,s,o,r,n){const l=t.context,u=l.gl,c=a.paint.get("fill-extrusion-pattern"),g=c.constantOr(1),f=a.getCrossfadeParameters(),d=a.paint.get("fill-extrusion-opacity");for(const h of s){const s=i.getTile(h),p=s.getBucket(a);if(!p)continue;const m=p.programConfigurations.get(a.id),y=t.useProgram(g?"fillExtrusionPattern":"fillExtrusion",m);if(t.terrain){const e=t.terrain;if(!p.enableTerrain)continue;if(e.setupElevationDraw(s,y,{useMeterToDem:!0}),Ti(l,i,h,p,a,e),!p.centroidVertexBuffer){const e=y.attributes.a_centroid_pos;void 0!==e&&u.vertexAttrib2f(e,0,0)}}g&&(t.context.activeTexture.set(u.TEXTURE0),s.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),m.updatePaintBuffers(f));const _=c.constantOr(null);if(_&&s.imageAtlas){const e=s.imageAtlas,t=e.patternPositions[_.to.toString()],i=e.patternPositions[_.from.toString()];t&&i&&m.setConstantPatternPositions(t,i)}const b=t.translatePosMatrix(h.posMatrix,s,a.paint.get("fill-extrusion-translate"),a.paint.get("fill-extrusion-translate-anchor")),v=a.paint.get("fill-extrusion-vertical-gradient"),x=g?Wt(b,t,v,d,h,f,s):Xt(b,t,v,d);y.draw(l,l.gl.TRIANGLES,o,r,n,e.CullFaceMode.backCCW,x,a.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,a.paint,t.transform.zoom,m,t.terrain?p.centroidVertexBuffer:null)}}function Ti(t,i,a,s,o,r){const n=[t=>{let i=t.canonical.x-1,a=t.wrap;return i<0&&(i=(1<<t.canonical.z)-1,a--),new e.OverscaledTileID(t.overscaledZ,a,t.canonical.z,i,t.canonical.y)},t=>{let i=t.canonical.x+1,a=t.wrap;return i===1<<t.canonical.z&&(i=0,a++),new e.OverscaledTileID(t.overscaledZ,a,t.canonical.z,i,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=i.getSource().maxzoom;for(const a of[0,-1,1]){if(e.overscaledZ+a<t)continue;if(a>0&&e.overscaledZ<t)continue;const s=i.getTileByID(e.calculateScaledKey(e.overscaledZ+a));if(s&&s.hasData()){const e=s.getBucket(o);if(e)return e}}},u=[0,0,0],c=(t,i)=>(u[0]=Math.min(t.min.y,i.min.y),u[1]=Math.max(t.max.y,i.max.y),u[2]=e.EXTENT-i.min.x>t.max.x?i.min.x-e.EXTENT:t.max.x,u),g=(t,i)=>(u[0]=Math.min(t.min.x,i.min.x),u[1]=Math.max(t.max.x,i.max.x),u[2]=e.EXTENT-i.min.y>t.max.y?i.min.y-e.EXTENT:t.max.y,u),f=[(e,t)=>c(e,t),(e,t)=>c(t,e),(e,t)=>g(e,t),(e,t)=>g(t,e)],d=new e.Point(0,0);let h,p,m;const y=(t,i,s,o,n)=>{const l=[[o?s:t,o?t:s,0],[o?s:i,o?i:s,0]],u=n<0?e.EXTENT+n:n,c=[o?u:(t+i)/2,o?(t+i)/2:u,0];return 0===s&&n<0||0!==s&&n>0?r.getForTilePoints(m,[c],!0,p):l.push(c),r.getForTilePoints(a,l,!0,h),Math.max(l[0][2],l[1][2],c[2])/r.exaggeration()};for(let t=0;t<4;t++){const i=s.borders[t];if(0===i.length&&(s.borderDone[t]=!0),s.borderDone[t])continue;const o=m=n[t](a),u=l(o);if(!u||!u.enableTerrain)continue;if(p=r.findDEMTileFor(o),!p||!p.dem)continue;if(!h){const e=r.findDEMTileFor(a);if(!e||!e.dem)return;h=e}const c=(t<2?1:5)-t,g=u.borders[c];let _=0;for(let a=0;a<i.length;a++){const o=s.featuresOnBorder[i[a]],r=o.borders[t];let n;for(;_<g.length&&(n=u.featuresOnBorder[g[_]],!(n.borders[c][1]>r[0]+3));)u.borderDone[c]||u.encodeCentroid(void 0,n,!1),_++;if(n&&_<g.length){const i=_;let a=0;for(;!(n.borders[c][0]>r[1]-3)&&(a++,++_!==g.length);)n=u.featuresOnBorder[g[_]];if(n=u.featuresOnBorder[g[i]],o.intersectsCount()>1||n.intersectsCount()>1||1!==a){1!==a&&(_=i),s.encodeCentroid(void 0,o,!1),u.borderDone[c]||u.encodeCentroid(void 0,n,!1);continue}const l=f[t](o,n),h=t%2?e.EXTENT-1:0;d.x=y(l[0],Math.min(e.EXTENT-1,l[1]),h,t<2,l[2]),d.y=0,s.encodeCentroid(d,o,!1),u.borderDone[c]||u.encodeCentroid(d,n,!1)}else s.encodeCentroid(void 0,o,!1)}s.borderDone[t]=s.needsCentroidUpdate=!0,u.borderDone[c]||(u.borderDone[c]=u.needsCentroidUpdate=!0)}(s.needsCentroidUpdate||!s.centroidVertexBuffer&&0!==s.centroidVertexArray.length)&&s.uploadCentroid(t)}const Ai=new e.Color(1,0,0,1),Si=new e.Color(0,1,0,1),Ii=new e.Color(0,0,1,1),Di=new e.Color(1,0,1,1),zi=new e.Color(0,1,1,1);function ki(e,t,i,a){Li(e,0,t+i/2,e.transform.width,i,a)}function Fi(e,t,i,a){Li(e,t-i/2,0,i,e.transform.height,a)}function Li(t,i,a,s,o,r){const n=t.context,l=n.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*e.browser.devicePixelRatio,a*e.browser.devicePixelRatio,s*e.browser.devicePixelRatio,o*e.browser.devicePixelRatio),n.clear({color:r}),l.disable(l.SCISSOR_TEST)}function Oi(t,i,a){const s=t.context,o=s.gl,r=a.posMatrix,n=t.useProgram("debug"),l=i.getTileByID(a.key);t.terrain&&t.terrain.setupElevationDraw(l,n);const u=e.DepthMode.disabled,c=e.StencilMode.disabled,g=t.colorModeForRenderPass();s.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),n.draw(s,o.LINE_STRIP,u,c,g,e.CullFaceMode.disabled,si(r,e.Color.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);const f=l.latestRawTileData,d=Math.floor((f&&f.byteLength||0)/1024),h=i.getTile(a).tileSize,p=512/Math.min(h,512)*(a.overscaledZ/t.transform.zoom)*.5;let m=a.canonical.toString();a.overscaledZ!==a.canonical.z&&(m+=" => "+a.overscaledZ),function(e,t){e.initDebugOverlayCanvas();const i=e.debugOverlayCanvas,a=e.context.gl,s=e.debugOverlayCanvas.getContext("2d");s.clearRect(0,0,i.width,i.height),s.shadowColor="white",s.shadowBlur=2,s.lineWidth=1.5,s.strokeStyle="white",s.textBaseline="top",s.font="bold 36px Open Sans, sans-serif",s.fillText(t,5,5),s.strokeText(t,5,5),e.debugOverlayTexture.update(i),e.debugOverlayTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE)}(t,`${m} ${d}kb`),n.draw(s,o.TRIANGLES,u,c,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,si(r,e.Color.transparent,p),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}const Ri=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ni}=Ri;function $i(e,t,i,a){e.emplaceBack(t,i,a)}class Gi{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,$i(this.vertexArray,-1,-1,1),$i(this.vertexArray,1,-1,1),$i(this.vertexArray,-1,1,1),$i(this.vertexArray,1,1,1),$i(this.vertexArray,-1,-1,-1),$i(this.vertexArray,1,-1,-1),$i(this.vertexArray,-1,1,-1),$i(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Ni),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function Vi(t,i,a,s,o,r){const n=t.gl,l=i.paint.get("sky-atmosphere-color"),u=i.paint.get("sky-atmosphere-halo-color"),c=i.paint.get("sky-atmosphere-sun-intensity"),g=((e,t,i,a,s)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:i,u_color_tint_r:[a.r,a.g,a.b,a.a],u_color_tint_m:[s.r,s.g,s.b,s.a],u_luminance:5e-5}))(e.fromMat4([],s),o,c,l,u);n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+r,i.skyboxTexture,0),a.draw(t,n.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,g,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const Zi={symbol:function(t,i,a,s,o){if("translucent"!==t.renderPass)return;const r=e.StencilMode.disabled,n=t.colorModeForRenderPass();a.layout.get("text-variable-anchor")&&function(t,i,a,s,o,r,n){const l=i.transform,u="map"===o,c="map"===r;for(const o of t){const t=s.getTile(o),r=t.getBucket(a);if(!r||!r.text||!r.text.segments.get().length)continue;const g=e.evaluateSizeForZoom(r.textSizeData,l.zoom),f=w(t,1,i.transform.zoom),d=ie(o.posMatrix,c,u,i.transform,f),h="none"!==a.layout.get("icon-text-fit")&&r.hasIconData();if(g){const i=Math.pow(2,l.zoom-t.tileID.overscaledZ),a=l.elevation;Ui(r,u,c,n,e.symbolSize,l,d,o.posMatrix,i,g,h,a?e=>a.getAtTileOffset(o,e.x,e.y):e=>0)}}}(s,t,a,i,a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),o),0!==a.paint.get("icon-opacity").constantOr(1)&&Ei(t,i,a,s,!1,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),a.layout.get("icon-rotation-alignment"),a.layout.get("icon-pitch-alignment"),a.layout.get("icon-keep-upright"),r,n),0!==a.paint.get("text-opacity").constantOr(1)&&Ei(t,i,a,s,!0,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),a.layout.get("text-rotation-alignment"),a.layout.get("text-pitch-alignment"),a.layout.get("text-keep-upright"),r,n),i.map.showCollisionBoxes&&(xi(t,i,a,s,a.paint.get("text-translate"),a.paint.get("text-translate-anchor"),!0),xi(t,i,a,s,a.paint.get("icon-translate"),a.paint.get("icon-translate-anchor"),!1))},circle:function(t,i,a,s){if("translucent"!==t.renderPass)return;const o=a.paint.get("circle-opacity"),r=a.paint.get("circle-stroke-width"),n=a.paint.get("circle-stroke-opacity"),l=void 0!==a.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===r.constantOr(1)||0===n.constantOr(1)))return;const u=t.context,c=u.gl,g=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),f=e.StencilMode.disabled,d=t.colorModeForRenderPass(),h=[];for(let o=0;o<s.length;o++){const r=s[o],n=i.getTile(r),u=n.getBucket(a);if(!u)continue;const c=u.programConfigurations.get(a.id),g=ii(a),f={programConfiguration:c,program:t.useProgram("circle",c,g),layoutVertexBuffer:u.layoutVertexBuffer,indexBuffer:u.indexBuffer,uniformValues:ti(t,r,n,a),tile:n};if(l){const t=u.segments.get();for(const i of t)h.push({segments:new e.SegmentVector([i]),sortKey:i.sortKey,state:f})}else h.push({segments:u.segments,sortKey:0,state:f})}l&&h.sort((e,t)=>e.sortKey-t.sortKey);for(const i of h){const{programConfiguration:s,program:o,layoutVertexBuffer:r,indexBuffer:n,uniformValues:l,tile:h}=i.state,p=i.segments;t.terrain&&t.terrain.setupElevationDraw(h,o,{useDepthForOcclusion:!0}),o.draw(u,c.TRIANGLES,g,f,d,e.CullFaceMode.disabled,l,a.id,r,n,p,a.paint,t.transform.zoom,s)}},heatmap:function(t,i,a,s){if(0!==a.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,r=o.gl,n=e.StencilMode.disabled,l=new e.ColorMode([r.ONE,r.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,i){const a=e.gl;e.activeTexture.set(a.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);let s=i.heatmapFbo;if(s)a.bindTexture(a.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer);else{const o=a.createTexture();a.bindTexture(a.TEXTURE_2D,o),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),s=i.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,i,a){const s=e.gl;s.texImage2D(s.TEXTURE_2D,0,s.RGBA,t.width/4,t.height/4,0,s.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:s.UNSIGNED_BYTE,null),a.colorAttachment.set(i)}(e,t,o,s)}}(o,t,a),o.clear({color:e.Color.transparent});for(let u=0;u<s.length;u++){const c=s[u];if(i.hasRenderableParent(c))continue;const g=i.getTile(c),f=g.getBucket(a);if(!f)continue;const d=f.programConfigurations.get(a.id),h=t.useProgram("heatmap",d),{zoom:p}=t.transform;t.terrain&&t.terrain.setupElevationDraw(g,h),h.draw(o,r.TRIANGLES,e.DepthMode.disabled,n,l,e.CullFaceMode.disabled,oi(c.posMatrix,g,p,a.paint.get("heatmap-intensity")),a.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,a.paint,t.transform.zoom,d)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,i){const a=t.context,s=a.gl,o=i.heatmapFbo;if(!o)return;a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,o.colorAttachment.get()),a.activeTexture.set(s.TEXTURE1);let r=i.colorRampTexture;r||(r=i.colorRampTexture=new e.Texture(a,i.colorRamp,s.RGBA)),r.bind(s.LINEAR,s.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(a,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((t,i,a,s)=>{const o=e.create();e.ortho(o,0,t.width,t.height,0,0,1);const r=t.context.gl;return{u_matrix:o,u_world:[r.drawingBufferWidth,r.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}})(t,i),i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,i.paint,t.transform.zoom)}(t,a))},line:function(t,i,a,s){if("translucent"!==t.renderPass)return;const o=a.paint.get("line-opacity"),r=a.paint.get("line-width");if(0===o.constantOr(1)||0===r.constantOr(1))return;const n=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),u=a.paint.get("line-dasharray"),c=a.paint.get("line-pattern"),g=c.constantOr(1),f=a.paint.get("line-gradient"),d=a.getCrossfadeParameters(),h=g?"linePattern":u?"lineSDF":f?"lineGradient":"line",p=t.context,m=p.gl;let y=!0;for(const o of s){const s=i.getTile(o);if(g&&!s.patternsLoaded())continue;const r=s.getBucket(a);if(!r)continue;t.prepareDrawTile(o);const _=r.programConfigurations.get(a.id),b=t.context.program.get(),v=t.useProgram(h,_),x=y||v.program!==b,C=c.constantOr(null);if(C&&s.imageAtlas){const e=s.imageAtlas,t=e.patternPositions[C.to.toString()],i=e.patternPositions[C.from.toString()];t&&i&&_.setConstantPatternPositions(t,i)}const q=t.terrain?o.posMatrix:null,U=g?li(t,s,a,d,q):u?ui(t,s,a,u,d,q):f?ni(t,s,a,q,r.lineClipsArray.length):ri(t,s,a,q);if(g)p.activeTexture.set(m.TEXTURE0),s.imageAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),_.updatePaintBuffers(d);else if(u&&(x||t.lineAtlas.dirty))p.activeTexture.set(m.TEXTURE0),t.lineAtlas.bind(p);else if(f){const s=r.gradients[a.id];let n=s.texture;if(a.gradientVersion!==s.version){let l=256;if(a.stepInterpolant){const a=i.getSource().maxzoom,s=o.canonical.z===a?Math.ceil(1<<t.transform.maxZoom-o.canonical.z):1;l=e.clamp(e.nextPowerOfTwo(r.maxLineLength/e.EXTENT*1024*s),256,p.maxTextureSize)}s.gradient=e.renderColorRamp({expression:a.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:s.gradient||void 0,clips:r.lineClipsArray}),s.texture?s.texture.update(s.gradient):s.texture=new e.Texture(p,s.gradient,m.RGBA),s.version=a.gradientVersion,n=s.texture}p.activeTexture.set(m.TEXTURE0),n.bind(a.stepInterpolant?m.NEAREST:m.LINEAR,m.CLAMP_TO_EDGE)}v.draw(p,m.TRIANGLES,n,t.stencilModeForClipping(o),l,e.CullFaceMode.disabled,U,a.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,a.paint,t.transform.zoom,_,r.layoutVertexBuffer2),y=!1}},fill:function(t,i,a,s){const o=a.paint.get("fill-color"),r=a.paint.get("fill-opacity");if(0===r.constantOr(1))return;const n=t.colorModeForRenderPass(),l=a.paint.get("fill-pattern"),u=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===r.constantOr(0)?"opaque":"translucent";if(t.renderPass===u){const o=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);Pi(t,i,a,s,o,n,!1)}if("translucent"===t.renderPass&&a.paint.get("fill-antialias")){const o=t.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);Pi(t,i,a,s,o,n,!0)}},"fill-extrusion":function(t,i,a,s){const o=a.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===t.renderPass){const r=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==o||a.paint.get("fill-extrusion-pattern").constantOr(1))Mi(t,i,a,s,r,e.StencilMode.disabled,e.ColorMode.disabled),Mi(t,i,a,s,r,t.stencilModeFor3D(),t.colorModeForRenderPass());else{const o=t.colorModeForRenderPass();Mi(t,i,a,s,r,e.StencilMode.disabled,o)}}},hillshade:function(t,i,a,s){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const o=t.context,r=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),n=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[u,c]="translucent"!==t.renderPass||l?[{},s]:t.stencilConfigForOverlap(s);for(const s of c){const o=i.getTile(s);if(o.needsHillshadePrepare&&"offscreen"===t.renderPass)It(t,o,a,r,e.StencilMode.disabled,n);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(s):u[s.overscaledZ];At(t,s,o,a,r,e,n)}}o.viewport.set([0,0,t.width,t.height])},raster:function(t,i,a,s,o,r){if("translucent"!==t.renderPass)return;if(0===a.paint.get("raster-opacity"))return;if(!s.length)return;const n=t.context,l=n.gl,u=i.getSource(),c=t.useProgram("raster"),g=t.colorModeForRenderPass(),f=t.terrain&&t.terrain.renderingToTexture,[d,h]=u instanceof S||f?[{},s]:t.stencilConfigForOverlap(s),p=h[h.length-1].overscaledZ,m=!t.options.moving;for(const s of h){const o=f?e.DepthMode.disabled:t.depthModeForSublayer(s.overscaledZ-p,1===a.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),h=i.getTile(s);if(f&&(!h||!h.hasData()))continue;const y=f?s.posMatrix:t.transform.calculatePosMatrix(s.toUnwrapped(),m),_=t.terrain&&f?t.terrain.stencilModeForRTTOverlap(s):d[s.overscaledZ],b=r?0:a.paint.get("raster-fade-duration");h.registerFadeDuration(b);const v=i.findLoadedParent(s,0),x=Nt(h,v,i,t.transform,b);let C,q;t.terrain&&t.terrain.prepareDrawTile(s);const U="nearest"===a.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;n.activeTexture.set(l.TEXTURE0),h.texture.bind(U,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(l.TEXTURE1),v?(v.texture.bind(U,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),C=Math.pow(2,v.tileID.overscaledZ-h.tileID.overscaledZ),q=[h.tileID.canonical.x*C%1,h.tileID.canonical.y*C%1]):h.texture.bind(U,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);const w=fi(y,q||[0,0],C||1,x,a);u instanceof S?c.draw(n,l.TRIANGLES,o,e.StencilMode.disabled,g,e.CullFaceMode.disabled,w,a.id,u.boundsBuffer,t.quadTriangleIndexBuffer,u.boundsSegments):c.draw(n,l.TRIANGLES,o,_,g,e.CullFaceMode.disabled,w,a.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,i,a,s){const o=a.paint.get("background-color"),r=a.paint.get("background-opacity");if(0===r)return;const n=t.context,l=n.gl,u=t.transform,c=u.tileSize,g=a.paint.get("background-pattern");if(t.isPatternMissing(g))return;const f=!g&&1===o.a&&1===r&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==f)return;const d=e.StencilMode.disabled,h=t.depthModeForSublayer(0,"opaque"===f?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),p=t.colorModeForRenderPass(),m=t.useProgram(g?"backgroundPattern":"background"),y=s||u.coveringTiles({tileSize:c});g&&(n.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));const _=a.getCrossfadeParameters();for(const i of y){const u=s?i.posMatrix:t.transform.calculatePosMatrix(i.toUnwrapped());t.prepareDrawTile(i);const f=g?_i(u,r,t,g,{tileID:i,tileSize:c},_):yi(u,r,o);m.draw(n,l.TRIANGLES,h,d,p,e.CullFaceMode.disabled,f,a.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}},sky:function(t,i,a){const s=a.paint.get("sky-opacity");if(0===s)return;const o=t.context,r=a.paint.get("sky-type"),n=new e.DepthMode(o.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),l=t.frameCounter/1e3%1;"atmosphere"===r?"offscreen"===t.renderPass?a.needsSkyboxCapture(t)&&(function(t,i,a,s){const o=t.context,r=o.gl;let n=i.skyboxFbo;if(!n){n=i.skyboxFbo=o.createFramebuffer(32,32,!1),i.skyboxGeometry=new Gi(o),i.skyboxTexture=o.gl.createTexture(),r.bindTexture(r.TEXTURE_CUBE_MAP,i.skyboxTexture),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR);for(let e=0;e<6;++e)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,r.RGBA,32,32,0,r.RGBA,r.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(n.framebuffer),o.viewport.set([0,0,32,32]);const l=i.getCenter(t,!0),u=t.useProgram("skyboxCapture"),c=new Float64Array(16);e.identity(c),e.rotateY(c,c,.5*-Math.PI),Vi(o,i,u,c,l,0),e.identity(c),e.rotateY(c,c,.5*Math.PI),Vi(o,i,u,c,l,1),e.identity(c),e.rotateX(c,c,.5*-Math.PI),Vi(o,i,u,c,l,2),e.identity(c),e.rotateX(c,c,.5*Math.PI),Vi(o,i,u,c,l,3),e.identity(c),Vi(o,i,u,c,l,4),e.identity(c),e.rotateY(c,c,Math.PI),Vi(o,i,u,c,l,5),o.viewport.set([0,0,t.width,t.height])}(t,a),a.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,i,a,s,o){const r=t.context,n=r.gl,l=t.transform,u=t.useProgram("skybox");r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_CUBE_MAP,i.skyboxTexture);const c=((e,t,i,a,s)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:a,u_temporal_offset:s}))(l.skyboxMatrix,i.getCenter(t,!1),0,s,o);u.draw(r,n.TRIANGLES,a,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,c,"skybox",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(t,a,n,s,l):"gradient"===r&&"sky"===t.renderPass&&function(t,i,a,s,o){const r=t.context,n=r.gl,l=t.transform,u=t.useProgram("skyboxGradient");i.skyboxGeometry||(i.skyboxGeometry=new Gi(r)),r.activeTexture.set(n.TEXTURE0);let c=i.colorRampTexture;c||(c=i.colorRampTexture=new e.Texture(r,i.colorRamp,n.RGBA)),c.bind(n.LINEAR,n.CLAMP_TO_EDGE);const g=((t,i,a,s,o)=>({u_matrix:t,u_color_ramp:0,u_center_direction:i,u_radius:e.degToRad(a),u_opacity:s,u_temporal_offset:o}))(l.skyboxMatrix,i.getCenter(t,!1),i.paint.get("sky-gradient-radius"),s,o);u.draw(r,n.TRIANGLES,a,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,g,"skyboxGradient",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(t,a,n,s,l)},debug:function(e,t,i){for(let a=0;a<i.length;a++)Oi(e,t,i[a])},custom:function(t,i,a){const s=t.context,o=a.implementation;if("offscreen"===t.renderPass){const e=o.prerender;e&&(t.setCustomLayerDefaults(),s.setColorMode(t.colorModeForRenderPass()),e.call(o,s.gl,t.transform.customLayerMatrix()),s.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),s.setColorMode(t.colorModeForRenderPass()),s.setStencilMode(e.StencilMode.disabled);const i="3d"===o.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);s.setDepthMode(i),o.render(s.gl,t.transform.customLayerMatrix()),s.setDirty(),t.setBaseState(),s.bindFramebuffer.set(null)}}};class Qi{constructor(t,i){this.context=new e.Context(t),this.transform=i,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $e,this.gpuTimers={},this.frameCounter=0}updateTerrain(e,t){const i=!!e&&!!e.terrain;if(!(i||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Zt(this,e));const a=this._terrain;this.transform.elevation=i?a:null,a.update(e,this.transform,t)}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,i){if(this.width=t*e.browser.devicePixelRatio,this.height=i*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style._order)this.style._layers[e].resize()}setup(){const t=this.context,i=new e.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(e.EXTENT,0),i.emplaceBack(0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(e.EXTENT,0),a.emplaceBack(0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(a,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const s=new e.StructArrayLayout4i8;s.emplaceBack(0,0,0,0),s.emplaceBack(e.EXTENT,0,e.EXTENT,0),s.emplaceBack(0,e.EXTENT,0,e.EXTENT),s.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(s,A.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(o,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const r=new e.StructArrayLayout1ui2;r.emplaceBack(0),r.emplaceBack(1),r.emplaceBack(3),r.emplaceBack(2),r.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(r);const n=new e.StructArrayLayout3ui6;n.emplaceBack(0,1,2),n.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(n),this.emptyTexture=new e.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now())}clearStencil(){const t=this.context,i=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const a=e.create();e.ortho(a,0,this.width,this.height,0,0,1),e.scale(a,a,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,i.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Rt(a),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,i,a){if(!(i&&this.currentStencilSource!==i.id&&t.isTileClipped()&&a&&a.length))return;this.currentStencilSource=i.id;const s=this.context,o=s.gl;this.nextStencilID+a.length>256&&this.clearStencil(),s.setColorMode(e.ColorMode.disabled),s.setDepthMode(e.DepthMode.disabled);const r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of a){const i=this._tileClippingMaskIDs[t.key]=this.nextStencilID++;r.draw(s,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},i,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Rt(t.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,i=this.context.gl;return new e.StencilMode({func:i.NOTEQUAL,mask:255},t,255,i.KEEP,i.KEEP,i.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const i=this.context.gl;return new e.StencilMode({func:i.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,i.KEEP,i.KEEP,i.REPLACE)}stencilConfigForOverlap(t){const i=this.context.gl,a=t.sort((e,t)=>t.overscaledZ-e.overscaledZ),s=a[a.length-1].overscaledZ,o=a[0].overscaledZ-s+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const t={};for(let a=0;a<o;a++)t[a+s]=new e.StencilMode({func:i.GEQUAL,mask:255},a+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=o,[t,a]}return[{[s]:e.StencilMode.disabled},a]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,i,a){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const s=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(a||this.context.gl.LEQUAL,i,[s,s])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,i){this.style=t,this.options=i,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();const a=this.style._order,s=this.style._sourceCaches;for(const e in s){const t=s[e];t.used&&t.prepare(this.context)}const o={},r={},n={};for(const e in s){const t=s[e];o[e]=t.getVisibleCoordinates(),r[e]=o[e].slice().reverse(),n[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<a.length;e++)if(this.style._layers[a[e]].is3D()){this.opaquePassCutoff=e;break}this.terrain&&(this.terrain.updateTileBinding(n),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const e of a){const i=this.style._layers[e],a=t._getLayerSourceCache(i);if(!i.hasOffscreenPass()||i.isHidden(this.transform.zoom))continue;const s=a?r[a.id]:void 0;("custom"===i.type||i.isSky()||s&&s.length)&&this.renderLayer(this,a,i,s)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=a.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[a[this.currentLayer]],i=t._getLayerSourceCache(e);if(this.terrain&&this.terrain.renderLayer(e,i)||e.isSky())continue;const s=i?r[i.id]:void 0;this._renderTileClippingMasks(e,i,s),this.renderLayer(this,i,e,s)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<a.length;this.currentLayer++){const e=this.style._layers[a[this.currentLayer]],i=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,i,e,i?r[i.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<a.length;this.currentLayer++){const e=this.style._layers[a[this.currentLayer]],i=t._getLayerSourceCache(e);if(this.terrain&&this.terrain.renderLayer(e,i)||e.isSky())continue;const s=i?("symbol"===e.type?n:r)[i.id]:void 0;this._renderTileClippingMasks(e,i,i?o[i.id]:void 0),this.renderLayer(this,i,e,s)}if(this.options.showTileBoundaries||this.options.showQueryGeometry){let i=null;e.values(this.style._layers).forEach(e=>{const a=t._getLayerSourceCache(e);a&&!e.isHidden(this.transform.zoom)&&(!i||i.getSource().maxzoom<a.getSource().maxzoom)&&(i=a)}),i&&this.options.showTileBoundaries&&Zi.debug(this,i,i.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;ki(e,e.transform.height-(t.top||0),3,Ai),ki(e,t.bottom||0,3,Si),Fi(e,t.left||0,3,Ii),Fi(e,e.transform.width-(t.right||0),3,Di);const i=e.transform.centerPoint;!function(e,t,i,a){Li(e,t-1,i-10,2,20,a),Li(e,t-10,i-1,20,2,a)}(e,i.x,e.transform.height-i.y,zi)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%e.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,i,a){i.isHidden(this.transform.zoom)||("background"===i.type||"sky"===i.type||"custom"===i.type||a&&a.length)&&(this.id=i.id,this.gpuTimingStart(i),Zi[i.type](e,t,i,a,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let i=this.gpuTimers[e.id];i||(i=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),i.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,i.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}queryGpuTimers(e){const t={};for(const i in e){const a=e[i],s=this.context.extTimerQuery,o=s.getQueryObjectEXT(a.query,s.QUERY_RESULT_EXT)/1e6;s.deleteQueryEXT(a.query),t[i]=o}return t}translatePosMatrix(t,i,a,s,o){if(!a[0]&&!a[1])return t;const r=o?"map"===s?this.transform.angle:0:"viewport"===s?-this.transform.angle:0;if(r){const e=Math.sin(r),t=Math.cos(r);a=[a[0]*t-a[1]*e,a[0]*e+a[1]*t]}const n=[o?a[0]:w(i,a[0],this.transform.zoom),o?a[1]:w(i,a[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,n),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),i=this.imageManager.getPattern(e.to.toString());return!t||!i}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=[];return this.terrain&&!this.terrain.renderingToTexture&&t.push("TERRAIN"),e&&t.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&t.push("OVERDRAW_INSPECTOR"),t}useProgram(e,t,i){this.cache=this.cache||{};const a=i||[],s=this.currentGlobalDefines().concat(a),o=jt.cacheKey(e,s,t);return this.cache[o]||(this.cache[o]=new jt(this.context,e,Pt[e],t,bi[e],s)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(e){this.terrain&&this.terrain.prepareDrawTile(e)}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}}class ji{constructor(e=0,t=0,i=0,a=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(i)||i<0||isNaN(a)||a<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=i,this.right=a}interpolate(t,i,a){return null!=i.top&&null!=t.top&&(this.top=e.number(t.top,i.top,a)),null!=i.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,i.bottom,a)),null!=i.left&&null!=t.left&&(this.left=e.number(t.left,i.left,a)),null!=i.right&&null!=t.right&&(this.right=e.number(t.right,i.right,a)),this}getCenter(t,i){const a=e.clamp((this.left+t-this.right)/2,0,t),s=e.clamp((this.top+i-this.bottom)/2,0,i);return new e.Point(a,s)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new ji(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Hi(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}function Xi(e,t,i){e[4*t+0]=i[0],e[4*t+1]=i[1],e[4*t+2]=i[2],e[4*t+3]=i[3]}function Wi(t,i){const a=Hi(t,3);e.fromQuat(t,i),Xi(t,3,a)}function Ki(e,t){Xi(e,3,[t[0],t[1],t[2],1])}function Ji(t,i){const a=e.identity$1([]);return e.rotateZ$1(a,a,-i),e.rotateX$1(a,a,-t),a}function Yi(t,i){const a=[t[0],t[1],0],s=[i[0],i[1],0];if(e.length(a)>=1e-15){const t=e.normalize([],a);e.scale$2(s,t,e.dot(s,t)),i[0]=s[0],i[1]=s[1]}const o=e.cross([],i,t);if(e.len(o)<1e-15)return null;const r=Math.atan2(-o[1],o[0]);return Ji(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),r)}class ea{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){this._position=this._renderWorldCopies?function(t){if(!t)return;const i=Array.isArray(t)?new e.MercatorCoordinate(t[0],t[1],t[2]):t;return i.x=e.wrap(i.x,0,1),i}(t):t}lookAtPoint(t,i){if(this.orientation=null,!this.position)return;const a=this._elevation?this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(t)):0,s=this.position,o=e.MercatorCoordinate.fromLngLat(t,a),r=[o.x-s.x,o.y-s.y,o.z-s.z];i||(i=[0,0,1]),i[2]=Math.abs(i[2]),this.orientation=Yi(r,i)}setPitchBearing(t,i){this.orientation=Ji(e.degToRad(t),e.degToRad(-i))}}class ta{constructor(t,i){this._transform=e.identity([]),this._orientation=e.identity$1([]),i&&(this._orientation=i,Wi(this._transform,this._orientation)),t&&Ki(this._transform,t)}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const e=Hi(this._transform,3);return[e[0],e[1],e[2]]}set position(e){Ki(this._transform,e)}get orientation(){return this._orientation}set orientation(e){this._orientation=e,Wi(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Ji(e,t),Wi(this._transform,this._orientation)}forward(){const e=Hi(this._transform,2);return[-e[0],-e[1],-e[2]]}up(){const e=Hi(this._transform,1);return[-e[0],-e[1],-e[2]]}right(){const e=Hi(this._transform,0);return[e[0],e[1],e[2]]}getCameraToWorld(t,i){const a=new Float64Array(16);return e.invert(a,this.getWorldToCamera(t,i)),a}getWorldToCamera(t,i){const a=new Float64Array(16),s=new Float64Array(4),o=this.position;return e.conjugate(s,this._orientation),e.scale$2(o,o,-t),e.fromQuat(a,s),e.translate(a,a,o),a[1]*=-1,a[5]*=-1,a[9]*=-1,a[13]*=-1,a[8]*=i,a[9]*=i,a[10]*=i,a[11]*=i,a}getCameraToClipPerspective(t,i,a,s){const o=new Float64Array(16);return e.perspective(o,t,i,a,s),o}clone(){return new ta([...this.position],[...this.orientation])}}class ia{constructor(t,i,a,s,o){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=i||22,this._minPitch=null==a?0:a,this._maxPitch=null==s?60:s,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ji,this._posMatrixCache={},this._alignedPosMatrixCache={},this._camera=new ta,this._centerAltitude=0,this.cameraElevationReference="ground"}clone(){const e=new ia(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._cameraZoom=this._cameraZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,e?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(e){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),e&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const i=-e.wrap(t,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const i=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const t=this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(this.center),-1);return-1===t?(this._cameraZoom=null,!1):(this._centerAltitude=t,!0)}_updateCameraOnTerrain(){const t=this.cameraToCenterDistance/this.worldSize,i=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(i+t)}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const t=this._cameraZoom,i=this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(this.center)),a=e.mercatorZfromAltitude(i,this.center.lat),s=this._mercatorZfromZoom(t),o=this._mercatorZfromZoom(this._maxZoom),r=Math.max(s-a,o);this._setZoom(this._zoomFromMercatorZ(r))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const i=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let a;a=t.z<this._camera.position[2]?[i.x,i.y,i.z]:[t.x,t.y,t.z];const s=e.length(e.sub([],this._camera.position,a));return e.clamp(this._zoomFromMercatorZ(s),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let i=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(i=this._setCameraOrientation(t.orientation)),t.position){const a=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(a,this._camera.position)||(this._setCameraPosition(a),i=!0)}i&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,i=new ea;return i.position=new e.MercatorCoordinate(t[0],t[1],t[2]),i.orientation=this._camera.orientation,i._elevation=this.elevation,i._renderWorldCopies=this._renderWorldCopies,i}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const i=e.transformQuat([],[0,0,-1],t),a=e.transformQuat([],[0,-1,0],t);if(a[2]<0)return!1;const s=Yi(i,a);return!!s&&(this._camera.orientation=s,!0)}_setCameraPosition(t){const i=this.zoomScale(this.minZoom)*this.tileSize,a=this.zoomScale(this.maxZoom)*this.tileSize,s=this.cameraToCenterDistance;t[2]=e.clamp(t[2],s/a,s/i),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,i){this._unmodified=!1,this._edgeInsets.interpolate(e,t,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const i=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies){const a=this.pointCoordinate(new e.Point(0,0)),s=this.pointCoordinate(new e.Point(this.width,0)),o=this.pointCoordinate(new e.Point(this.width,this.height)),r=this.pointCoordinate(new e.Point(0,this.height)),n=Math.floor(Math.min(a.x,s.x,o.x,r.x)),l=Math.floor(Math.max(a.x,s.x,o.x,r.x)),u=1;for(let a=n-u;a<=l+u;a++)0!==a&&i.push(new e.UnwrappedTileID(a,t))}return i}coveringTiles(t){let i=this.coveringZoomLevel(t);const a=i,s=!!t.useElevationData;if(void 0!==t.minzoom&&i<t.minzoom)return[];void 0!==t.maxzoom&&i>t.maxzoom&&(i=t.maxzoom);const o=e.MercatorCoordinate.fromLngLat(this.center),r=1<<i,n=[r*o.x,r*o.y,0],l=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),u=this.pointCoordinate(this.getCameraPoint()),c=r*e.mercatorZfromAltitude(1,this.center.lat),g=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),f=[r*u.x,r*u.y,g],d=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),h=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?i:0,p=this.elevation?1e4*this.elevation.exaggeration():0,m=t=>({aabb:new e.Aabb([t*r,0,-p],[(t+1)*r,r,p]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),y=[],_=[],b=i,v=t.reparseOverscaled?a:i,x=(e,t)=>{if(!this._elevation)return;const i=this._elevation.getMinMaxForTile(t);i&&(e.min[2]=i.min,e.max[2]=i.max,e.center[2]=(e.min[2]+e.max[2])/2)},C=e=>e*e,q=C((g-this._centerAltitude)*c),U=(e,t)=>{if(t*C(.707)<e)return 1;const i=Math.sqrt(t/e);return i/(1/.707+(Math.pow(1.1,i-1/.707+1)-1)/(1.1-1)-1)};if(this._renderWorldCopies)for(let e=1;e<=3;e++)y.push(m(-e)),y.push(m(e));for(y.push(m(0));y.length>0;){const a=y.pop(),o=a.x,r=a.y;let u=a.fullyVisible;if(!u){const e=a.aabb.intersects(l);if(0===e)continue;u=2===e}let g=!0;if(h<=a.zoom&&a.zoom<b){const e=a.aabb.distanceX(f),t=a.aabb.distanceY(f);let i=q;s&&(i=C(a.aabb.distanceZ(f)*c));const o=e*e+t*t+i;g=o<C((1<<b-a.zoom)*d*U(Math.max(i,q),o))}if(a.zoom!==b&&g)for(let t=0;t<4;t++){const i=(o<<1)+t%2,n=(r<<1)+(t>>1),l=a.aabb.quadrant(t);let c=null;s&&a.zoom>b-6&&(c=new e.OverscaledTileID(a.zoom+1===b?v:a.zoom+1,a.wrap,a.zoom+1,i,n),x(l,c)),y.push({aabb:l,zoom:a.zoom+1,x:i,y:n,wrap:a.wrap,fullyVisible:u,tileID:c})}else{const s=a.zoom===b?v:a.zoom;if(t.minzoom&&t.minzoom>s)continue;const l=n[0]-(.5+o+(a.wrap<<a.zoom))*(1<<i-a.zoom),u=n[1]-.5-r,c=a.tileID?a.tileID:new e.OverscaledTileID(s,a.wrap,a.zoom,o,r);_.push({tileID:c,distanceSq:l*l+u*u})}}return _.sort((e,t)=>e.distanceSq-t.distanceSq).map(e=>e.tileID)}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const i=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(i)*this.worldSize)}unproject(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(t,i){const a=this.pointCoordinate(i),s=this.pointCoordinate(this.centerPoint),o=this.locationCoordinate(t),r=new e.MercatorCoordinate(o.x-(a.x-s.x),o.y-(a.y-s.y));this.center=this.coordinateLocation(r),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(e){this.center=this.coordinateLocation(e),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e){return this._coordinatePoint(this.locationCoordinate(e),!1)}locationPoint3D(e){return this._coordinatePoint(this.locationCoordinate(e),!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t){return e.MercatorCoordinate.fromLngLat(t)}coordinateLocation(e){return e.toLngLat()}pointRayIntersection(t,i){const a=null!=i?i:this._centerAltitude,s=[t.x,t.y,0,1],o=[t.x,t.y,1,1];e.transformMat4(s,s,this.pixelMatrixInverse),e.transformMat4(o,o,this.pixelMatrixInverse);const r=o[3];e.scale$1(s,s,1/s[3]),e.scale$1(o,o,1/r);const n=s[2],l=o[2];return{p0:s,p1:o,t:n===l?0:(a-n)/(l-n)}}screenPointToMercatorRay(t){const i=[t.x,t.y,0,1],a=[t.x,t.y,1,1];return e.transformMat4(i,i,this.pixelMatrixInverse),e.transformMat4(a,a,this.pixelMatrixInverse),e.scale$1(i,i,1/i[3]),e.scale$1(a,a,1/a[3]),i[2]=e.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,a[2]=e.mercatorZfromAltitude(a[2],this._center.lat)*this.worldSize,e.scale$1(i,i,1/this.worldSize),e.scale$1(a,a,1/this.worldSize),new e.Ray([i[0],i[1],i[2]],e.normalize([],e.sub([],a,i)))}rayIntersectionCoordinate(t){const{p0:i,p1:a,t:s}=t,o=e.mercatorZfromAltitude(i[2],this._center.lat),r=e.mercatorZfromAltitude(a[2],this._center.lat);return new e.MercatorCoordinate(e.number(i[0],a[0],s)/this.worldSize,e.number(i[1],a[1],s)/this.worldSize,e.number(o,r,s))}pointCoordinate(t){const i=this.horizonLineFromTop(),a=i>t.y?new e.Point(t.x,i):t;return this.rayIntersectionCoordinate(this.pointRayIntersection(a))}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);const i=this.elevation;let a=this.elevation.pointCoordinate(t);if(a)return new e.MercatorCoordinate(a[0],a[1],a[2]);let s=0,o=this.horizonLineFromTop();if(t.y>o)return this.pointCoordinate(t);const r=.02*o,n=t.clone();for(let t=0;t<10&&o-s>r;t++){n.y=e.number(s,o,.66);const t=i.pointCoordinate(n);t?(o=n.y,a=t):s=n.y}return a?new e.MercatorCoordinate(a[0],a[1],a[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){if(this.elevation)return!this.elevation.pointCoordinate(e);{const t=this.horizonLineFromTop();return e.y<t}}_coordinatePoint(t,i){const a=i&&this.elevation?this.elevation.getAtPoint(t,this._centerAltitude):this._centerAltitude,s=[t.x*this.worldSize,t.y*this.worldSize,a+t.toAltitude(),1];return e.transformMat4(s,s,this.pixelMatrix),s[3]>0?new e.Point(s[0]/s[3],s[1]/s[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}getBounds(){return this._terrainEnabled()?this._getBounds3D():(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))}_getBounds3D(){const t=this.elevation,i=t.visibleDemTiles.reduce((e,t)=>{if(t.dem){const i=t.dem.tree;e.min=Math.min(e.min,i.minimums[0]),e.max=Math.max(e.max,i.maximums[0])}return e},{min:Number.MAX_VALUE,max:0});i.min*=t.exaggeration(),i.max*=t.exaggeration();const a=this.horizonLineFromTop();return[new e.Point(0,a),new e.Point(this.width,a),new e.Point(this.width,this.height),new e.Point(0,this.height)].reduce((e,t)=>e.extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(t,i.min)))).extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(t,i.max)))),new e.LngLatBounds)}horizonLineFromTop(){const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y;return Math.max(0,this.height/2-.97*e)}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(t,i=!1){const a=t.key,s=i?this._alignedPosMatrixCache:this._posMatrixCache;if(s[a])return s[a];const o=t.canonical,r=this.worldSize/this.zoomScale(o.z),n=o.x+Math.pow(2,o.z)*t.wrap,l=e.identity(new Float64Array(16));return e.translate(l,l,[n*r,o.y*r,0]),e.scale(l,l,[r/e.EXTENT,r/e.EXTENT,1]),e.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),s[a]=new Float32Array(l),s[a]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const i=this._camera.position,a=this._camera.forward();if(i.z<=0||a[2]>=0)return;const s=e.mercatorZfromAltitude(1,this._center.lat);i[2]/=s,a[2]/=s,e.normalize(a,a);const o=t.raycast(i,a,t.exaggeration());if(o){const t=e.scaleAndAdd([],i,a,o),s=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),r=this._camera.position,n=s.z+e.length([s.x-r[0],s.y-r[1],s.z-r[2]]);this._cameraZoom=this._zoomFromMercatorZ(n),this._centerAltitude=s.toAltitude(),this._center=s.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const i=t.getAtPoint(this._camera.mercatorPosition),a=this._minimumHeightOverTerrain()*Math.cos(e.degToRad(this._maxPitch)),s=e.mercatorZfromAltitude(i,this._center.lat),o=this._camera.position[2]-s;if(o<a){const t=e.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),i=this._camera.mercatorPosition,s=[t.x-i.x,t.y-i.y,t.z-i.z],r=e.length(s);s[2]-=a-o;const n=e.length(s);if(0===n)return;e.scale$2(s,s,r/n),this._camera.position=[t.x-s[0],t.y-s[1],t.z-s[2]],this._camera.orientation=Yi(s,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t,i,a,s,o=-90,r=90,n=-180,l=180;const u=this.size,c=this._unmodified;if(this.latRange){const i=this.latRange;o=e.mercatorYfromLat(i[1])*this.worldSize,r=e.mercatorYfromLat(i[0])*this.worldSize,t=r-o<u.y?u.y/(r-o):0}if(this.lngRange){const t=this.lngRange;n=e.mercatorXfromLng(t[0])*this.worldSize,l=e.mercatorXfromLng(t[1])*this.worldSize,i=l-n<u.x?u.x/(l-n):0}const g=this.point,f=Math.max(i||0,t||0);if(f)return this.center=this.unproject(new e.Point(i?(l+n)/2:g.x,t?(r+o)/2:g.y)),this.zoom+=this.scaleZoom(f),this._unmodified=c,void(this._constraining=!1);if(this.latRange){const e=g.y,t=u.y/2;e-t<o&&(s=o+t),e+t>r&&(s=r-t)}if(this.lngRange){const e=g.x,t=u.x/2;e-t<n&&(a=n+t),e+t>l&&(a=l-t)}void 0===a&&void 0===s||(this.center=this.unproject(new e.Point(void 0!==a?a:g.x,void 0!==s?s:g.y))),this._constrainCameraAltitude(),this._unmodified=c,this._constraining=!1}_minZoomForBounds(){const t=(e,t)=>Math.log2(e/(this.tileSize*Math.abs(t[1]-t[0])));let i=0;if(this.latRange){const a=this.latRange;i=t(this.height,[e.mercatorYfromLat(a[0]),e.mercatorYfromLat(a[1])])}let a=0;if(this.lngRange){const i=this.lngRange;a=t(this.width,[e.mercatorXfromLng(i[0]),e.mercatorXfromLng(i[1])])}return Math.max(i,a)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const i=e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;this._updateCameraState();const a=Math.PI/2+this._pitch,s=this.fovAboveCenter,o=this._camera.position[2]*this.worldSize/Math.cos(this._pitch),r=Math.sin(s)*o/Math.sin(e.clamp(Math.PI-a-s,.01,Math.PI-.01)),n=this.point,l=n.x,u=n.y,c=1.01*(Math.cos(Math.PI/2-this._pitch)*r+o),g=this.height/50,f=this._camera.getWorldToCamera(this.worldSize,i),d=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,g,c);d[8]=2*-t.x/this.width,d[9]=2*t.y/this.height;let h=e.mul([],d,f);this.mercatorMatrix=e.scale([],h,[this.worldSize,this.worldSize,this.worldSize/i]),this.projMatrix=h,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const p=new Float32Array(16);e.identity(p),e.scale(p,p,[1,-1,1]),e.rotateX(p,p,this._pitch),e.rotateZ(p,p,this.angle);const m=e.perspective(new Float32Array(16),this._fov,this.width/this.height,g,c);this.skyboxMatrix=e.multiply(p,m,p);const y=this.width%2/2,_=this.height%2/2,b=Math.cos(this.angle),v=Math.sin(this.angle),x=l-Math.round(l)+b*y+v*_,C=u-Math.round(u)+b*_+v*y,q=new Float64Array(h);if(e.translate(q,q,[x>.5?x-1:x,C>.5?C-1:C,0]),this.alignedProjMatrix=q,h=e.create(),e.scale(h,h,[this.width/2,-this.height/2,1]),e.translate(h,h,[1,-1,0]),this.labelPlaneMatrix=h,h=e.create(),e.scale(h,h,[1,-1,1]),e.translate(h,h,[-1,-1,0]),e.scale(h,h,[2/this.width,2/this.height,1]),this.glCoordMatrix=h,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),h=e.invert(new Float64Array(16),this.pixelMatrix),!h)throw new Error("failed to invert matrix");this.pixelMatrixInverse=h,this._posMatrixCache={},this._alignedPosMatrixCache={}}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const t=this._camera.forward(),i=this.cameraToCenterDistance,a=this.point,s=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-e.mercatorZfromAltitude(this._centerAltitude,this.center.lat),o=this.cameraToCenterDistance/s;this._camera.position=[a.x/this.worldSize-t[0]*i/o,a.y/this.worldSize-t[1]*i/o,e.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-t[2]*i/o]}_translateCameraConstrained(t){const i=this._maxCameraBoundsDistance()*Math.cos(this._pitch),a=t[2];let s=1;a>0&&(s=Math.min((i-this._camera.position[2])/a,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,s),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,i=this._camera.forward(),{pitch:a,bearing:s}=this._camera.getPitchBearing(),o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat),r=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),n=Math.max((t[2]-o)/Math.cos(a),r),l=this._zoomFromMercatorZ(n);e.scaleAndAdd(t,t,i,n),this._pitch=e.clamp(a,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(s,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new e.MercatorCoordinate(t[0],t[1],t[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}_terrainEnabled(){return!!this._elevation}isHorizonVisibleForPoints(t,i){const a=Math.min(t.x,i.x),s=Math.max(t.x,i.x),o=Math.min(t.y,i.y),r=Math.max(t.y,i.y),n=[new e.Point(a,o),new e.Point(s,r),new e.Point(a,r),new e.Point(s,o)],l=this._renderWorldCopies?-3:0,u=this._renderWorldCopies?4:1;for(const e of n){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const i=this.rayIntersectionCoordinate(t);if(i.x<l||i.y<0||i.x>u||i.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new e.Point(0,0),new e.Point(this.width,this.height))}zoomDeltaToMovement(t,i){const a=e.length(e.sub([],this._camera.position,t)),s=this._zoomFromMercatorZ(a)+i;return a-this._mercatorZfromZoom(s)}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))}}class aa{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(e,t){let i=!1,a=null;const s=()=>{a=null,i&&(e(),a=setTimeout(s,300),i=!1)};return()=>(i=!0,a||s(),a)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const i=this._map.getCenter(),a=Math.round(100*this._map.getZoom())/100,s=Math.ceil((a*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,s),r=Math.round(i.lng*o)/o,n=Math.round(i.lat*o)/o,l=this._map.getBearing(),u=this._map.getPitch();let c="";if(c+=t?`/${r}/${n}/${a}`:`${a}/${n}/${r}`,(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+="/"+Math.round(u)),this._hashName){const t=this._hashName;let i=!1;const a=e.window.location.hash.slice(1).split("&").map(e=>{const a=e.split("=")[0];return a===t?(i=!0,`${a}=${c}`):e}).filter(e=>e);return i||a.push(`${t}=${c}`),"#"+a.join("&")}return"#"+c}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map(e=>e.split("=")).forEach(t=>{t[0]===this._hashName&&(e=t)}),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._getCurrentHash();if(e.length>=3&&!e.some(e=>isNaN(e))){const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());try{e.window.history.replaceState(e.window.history.state,null,t)}catch(e){}}}const sa={linearity:.3,easing:e.bezier(0,0,.3,1)},oa=e.extend({deceleration:2500,maxSpeed:1400},sa),ra=e.extend({deceleration:20,maxSpeed:1400},sa),na=e.extend({deceleration:1e3,maxSpeed:360},sa),la=e.extend({deceleration:1e3,maxSpeed:90},sa);class ua{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,i=e.browser.now();for(;t.length>0&&i-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)i.zoom+=e.zoomDelta||0,i.bearing+=e.bearingDelta||0,i.pitch+=e.pitchDelta||0,e.panDelta&&i.pan._add(e.panDelta),e.around&&(i.around=e.around),e.pinchAround&&(i.pinchAround=e.pinchAround);const a=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(i.pan.mag()){const o=ga(i.pan.mag(),a,e.extend({},oa,t||{}));s.offset=i.pan.mult(o.amount/i.pan.mag()),s.center=this._map.transform.center,ca(s,o)}if(i.zoom){const e=ga(i.zoom,a,ra);s.zoom=this._map.transform.zoom+e.amount,ca(s,e)}if(i.bearing){const t=ga(i.bearing,a,na);s.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),ca(s,t)}if(i.pitch){const e=ga(i.pitch,a,la);s.pitch=this._map.transform.pitch+e.amount,ca(s,e)}if(s.zoom||s.bearing){const e=void 0===i.pinchAround?i.around:i.pinchAround;s.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),e.extend(s,{noMoveStart:!0})}}function ca(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function ga(t,i,a){const{maxSpeed:s,linearity:o,deceleration:r}=a,n=e.clamp(t*o/(i/1e3),-s,s),l=Math.abs(n)/(r*o);return{easing:a.easing,duration:1e3*l,amount:n*(l/2)}}class fa extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,a,s,o={}){const r=i.mousePos(a.getCanvasContainer(),s),n=a.unproject(r);super(t,e.extend({point:r,lngLat:n,originalEvent:s},o)),this._defaultPrevented=!1,this.target=a}}class da extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,a,s){const o="touchend"===t?s.changedTouches:s.touches,r=i.touchPos(a.getCanvasContainer(),o),n=r.map(e=>a.unproject(e)),l=r.reduce((e,t,i,a)=>e.add(t.div(a.length)),new e.Point(0,0));super(t,{points:r,point:l,lngLats:n,lngLat:a.unproject(l),originalEvent:s}),this._defaultPrevented=!1}}class ha extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,i){super(e,{originalEvent:i}),this._defaultPrevented=!1}}class pa{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new ha(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new fa(e.type,this._map,e))}mouseup(e){this._map.fire(new fa(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new fa(e.type,this._map,e))}dblclick(e){return this._firePreventable(new fa(e.type,this._map,e))}mouseover(e){this._map.fire(new fa(e.type,this._map,e))}mouseout(e){this._map.fire(new fa(e.type,this._map,e))}touchstart(e){return this._firePreventable(new da(e.type,this._map,e))}touchmove(e){this._map.fire(new da(e.type,this._map,e))}touchend(e){this._map.fire(new da(e.type,this._map,e))}touchcancel(e){this._map.fire(new da(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ma{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(e){this._map.fire(new fa(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new fa("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new fa(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ya{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(i.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const a=t;if(this._lastPos.equals(a)||!this._box&&a.dist(this._startPos)<this._clickTolerance)return;const s=this._startPos;this._lastPos=a,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const o=Math.min(s.x,a.x),r=Math.max(s.x,a.x),n=Math.min(s.y,a.y),l=Math.max(s.y,a.y);i.setTransform(this._box,`translate(${o}px,${n}px)`),this._box.style.width=r-o+"px",this._box.style.height=l-n+"px"}mouseupWindow(t,a){if(!this._active)return;if(0!==t.button)return;const s=this._startPos,o=a;if(this.reset(),i.suppressClick(),s.x!==o.x||s.y!==o.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(s,o,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,i){return this._map.fire(new e.Event(t,{originalEvent:i}))}}function _a(e,t){const i={};for(let a=0;a<e.length;a++)i[e[a].identifier]=t[a];return i}class ba{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,i,a){(this.centroid||a.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),a.length===this.numTouches&&(this.centroid=function(t){const i=new e.Point(0,0);for(const e of t)i._add(e);return i.div(t.length)}(i),this.touches=_a(a,i)))}touchmove(e,t,i){if(this.aborted||!this.centroid)return;const a=_a(i,t);for(const e in this.touches){const t=this.touches[e],i=a[e];(!i||i.dist(t)>30)&&(this.aborted=!0)}}touchend(e,t,i){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class va{constructor(e){this.singleTap=new ba(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,i){this.singleTap.touchstart(e,t,i)}touchmove(e,t,i){this.singleTap.touchmove(e,t,i)}touchend(e,t,i){const a=this.singleTap.touchend(e,t,i);if(a){const t=e.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(a)<30;if(t&&i||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=a,this.count===this.numTaps)return this.reset(),a}}}class xa{constructor(){this._zoomIn=new va({numTouches:1,numTaps:2}),this._zoomOut=new va({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,i){this._zoomIn.touchstart(e,t,i),this._zoomOut.touchstart(e,t,i)}touchmove(e,t,i){this._zoomIn.touchmove(e,t,i),this._zoomOut.touchmove(e,t,i)}touchend(e,t,i){const a=this._zoomIn.touchend(e,t,i),s=this._zoomOut.touchend(e,t,i);return a?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(a)},{originalEvent:e})}):s?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(s)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Ca={0:1,2:2};class qa{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const a=i.mouseButton(e);this._correctButton(e,a)&&(this._lastPoint=t,this._eventButton=a)}mousemoveWindow(e,t){const i=this._lastPoint;if(i)if(e.preventDefault(),function(e,t){const i=Ca[t];return void 0===e.buttons||(e.buttons&i)!==i}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(i,t)}mouseupWindow(e){this._lastPoint&&i.mouseButton(e)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ua extends qa{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class wa extends qa{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const i=.8*(t.x-e.x);if(i)return this._active=!0,{bearingDelta:i}}contextmenu(e){e.preventDefault()}}class Ea extends qa{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const i=-.5*(t.y-e.y);if(i)return this._active=!0,{pitchDelta:i}}contextmenu(e){e.preventDefault()}}class Ba{constructor(e){this._minTouches=1,this._clickTolerance=e.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)}touchstart(e,t,i){return this._calculateTransform(e,t,i)}touchmove(e,t,i){if(this._active&&!(i.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,i)}touchend(e,t,i){this._calculateTransform(e,t,i),this._active&&i.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,i,a){a.length>0&&(this._active=!0);const s=_a(a,i),o=new e.Point(0,0),r=new e.Point(0,0);let n=0;for(const e in s){const t=s[e],i=this._touches[e];i&&(o._add(t),r._add(t.sub(i)),n++,s[e]=t)}if(this._touches=s,n<this._minTouches||!r.mag())return;const l=r.div(n);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(n),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Pa{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(e){}_move(e,t,i){return{}}touchstart(e,t,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,i){if(!this._firstTwoTouches)return;e.preventDefault();const[a,s]=this._firstTwoTouches,o=Ma(i,t,a),r=Ma(i,t,s);if(!o||!r)return;const n=this._aroundCenter?null:o.add(r).div(2);return this._move([o,r],n,e)}touchend(e,t,a){if(!this._firstTwoTouches)return;const[s,o]=this._firstTwoTouches,r=Ma(a,t,s),n=Ma(a,t,o);r&&n||(this._active&&i.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ma(e,t,i){for(let a=0;a<e.length;a++)if(e[a].identifier===i)return t[a]}function Ta(e,t){return Math.log(e/t)/Math.LN2}class Aa extends Pa{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const i=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Ta(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ta(this._distance,i),pinchAround:t}}}function Sa(e,t){return 180*e.angleWith(t)/Math.PI}class Ia extends Pa{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const i=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Sa(this._vector,i),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,i=Sa(e,this._startVector);return Math.abs(i)<t}}function Da(e){return Math.abs(e.y)>Math.abs(e.x)}class za extends Pa{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(e){this._lastPoints=e,Da(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,i){const a=e[0].sub(this._lastPoints[0]),s=e[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(a,s,i.timeStamp),this._valid)return this._lastPoints=e,this._active=!0,{pitchDelta:(a.y+s.y)/2*-.5}}gestureBeginsVertically(e,t,i){if(void 0!==this._valid)return this._valid;const a=e.mag()>=2,s=t.mag()>=2;if(!a&&!s)return;if(!a||!s)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return Da(e)&&Da(t)&&o}}const ka={panStep:100,bearingStep:15,pitchStep:10};class Fa{constructor(){const e=ka;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,i=0,a=0,s=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?i=-1:(e.preventDefault(),s=-1);break;case 39:e.shiftKey?i=1:(e.preventDefault(),s=1);break;case 38:e.shiftKey?a=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?a=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(i=0,a=0),{cameraAnimation:r=>{const n=r.getZoom();r.easeTo({duration:300,easeId:"keyboardHandler",easing:La,zoom:t?Math.round(n)+t*(e.shiftKey?2:1):n,bearing:r.getBearing()+i*this._bearingStep,pitch:r.getPitch()+a*this._pitchStep,offset:[-s*this._panStep,-o*this._panStep],center:r.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function La(e){return e*(2-e)}class Oa{constructor(t,i){this._map=t,this._el=t.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onTimeout"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled())return;let i=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const a=e.browser.now(),s=a-(this._lastWheelEventTime||0);this._lastWheelEventTime=a,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":s>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(s*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),t.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=t,this._delta-=i,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=i.mousePos(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform,i=()=>t._terrainEnabled()?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate;let a=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==a&&(a=1/a);const s=i(),o=Math.pow(2,s),r="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(r*a))),"wheel"===this._type&&(this._startZoom=i(),this._easing=this._smoothOutEasing(200)),this._delta=0}const a="number"==typeof this._targetZoom?this._targetZoom:i(),s=this._startZoom,o=this._easing;let r,n=!1;if("wheel"===this._type&&s&&o){const t=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),i=o(t);r=e.number(s,a,i),t<1?this._frameId||(this._frameId=!0):n=!0}else r=a,n=!0;return this._active=!0,n&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!n,zoomDelta:r-i(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let i=e.ease;if(this._prevEase){const t=this._prevEase,a=(e.browser.now()-t.start)/t.duration,s=t.easing(a+.01)-t.easing(a),o=.27/Math.sqrt(s*s+1e-4)*.01,r=Math.sqrt(.0729-o*o);i=e.bezier(o,r,.25,1)}return this._prevEase={start:e.browser.now(),duration:t,easing:i},i}reset(){this._active=!1}}class Ra{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Na{constructor(){this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:i.getZoom()+(e.shiftKey?-1:1),around:i.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $a{constructor(){this._tap=new va({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(e,t,i){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=t[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(e,t,i))}touchmove(e,t,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const a=t[0],s=a.y-this._swipePoint.y;return this._swipePoint=a,e.preventDefault(),this._active=!0,{zoomDelta:s/128}}}else this._tap.touchmove(e,t,i)}touchend(e,t,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(e,t,i)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ga{constructor(e,t,i){this._el=e,this._mousePan=t,this._touchPan=i}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Va{constructor(e,t,i){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Za{constructor(e,t,i,a){this._el=e,this._touchZoom=t,this._touchRotate=i,this._tapDragZoom=a,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Qa=e=>e.zoom||e.drag||e.pitch||e.rotate;class ja extends e.Event{}class Ha{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,i){const a=e.sub([],i,t);this.radius=e.length(a[2]<0?e.div([],a,this.constants):[a[0],a[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const i=e.scale$2([],t,this.radius);if(i[2]>0){const t=e.scale$2([],[0,0,1],e.dot(i,[0,0,1])),a=e.scale$2([],e.normalize([],[i[0],i[1],0]),this.radius),s=e.add([],i,e.scale$2([],e.sub([],e.add([],a,t),i),2));i[0]=s[0],i[1]=s[1]}return i}}function Xa(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Wa{constructor(t,a){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ua(t),this._bearingSnap=a.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Ha,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(a),e.bindAll(["handleEvent","handleWindowEvent"],this);const s=this._el;this._listeners=[[s,"touchstart",{passive:!0}],[s,"touchmove",{passive:!1}],[s,"touchend",void 0],[s,"touchcancel",void 0],[s,"mousedown",void 0],[s,"mousemove",void 0],[s,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[s,"mouseover",void 0],[s,"mouseout",void 0],[s,"dblclick",void 0],[s,"click",void 0],[s,"keydown",{capture:!1}],[s,"keyup",void 0],[s,"wheel",{passive:!1}],[s,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[t,a,s]of this._listeners)i.addEventListener(t,a,t===e.window.document?this.handleWindowEvent:this.handleEvent,s)}destroy(){for(const[t,a,s]of this._listeners)i.removeEventListener(t,a,t===e.window.document?this.handleWindowEvent:this.handleEvent,s)}_addDefaultHandlers(e){const t=this._map,i=t.getCanvasContainer();this._add("mapEvent",new pa(t,e));const a=t.boxZoom=new ya(t,e);this._add("boxZoom",a);const s=new xa,o=new Na;t.doubleClickZoom=new Ra(o,s),this._add("tapZoom",s),this._add("clickZoom",o);const r=new $a;this._add("tapDragZoom",r);const n=t.touchPitch=new za;this._add("touchPitch",n);const l=new wa(e),u=new Ea(e);t.dragRotate=new Va(e,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);const c=new Ua(e),g=new Ba(e);t.dragPan=new Ga(i,c,g),this._add("mousePan",c),this._add("touchPan",g,["touchZoom","touchRotate"]);const f=new Ia,d=new Aa;t.touchZoomRotate=new Za(i,d,f,r),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]);const h=t.scrollZoom=new Oa(t,this);this._add("scrollZoom",h,["mousePan"]);const p=t.keyboard=new Fa;this._add("keyboard",p),this._add("blockableMapEvent",new ma(t));for(const i of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[i]&&t[i].enable(e[i])}_add(e,t,i){this._handlers.push({handlerName:e,handler:t,allowed:i}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Qa(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,i){for(const a in e)if(a!==i&&(!t||t.indexOf(a)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,e.type+"Window")}_getMapTouches(e){const t=[];for(const i of e)this._el.contains(i.target)&&t.push(i);return t}handleEvent(e,t){if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const a="renderFrame"===e.type?void 0:e,s={needsRenderFrame:!1},o={},r={},n=e.touches?this._getMapTouches(e.touches):void 0,l=n?i.touchPos(this._el,n):i.mousePos(this._el,e);for(const{handlerName:i,handler:u,allowed:c}of this._handlers){if(!u.isEnabled())continue;let g;this._blockedByActive(r,c,i)?u.reset():u[t||e.type]&&(g=u[t||e.type](e,l,n),this.mergeHandlerResult(s,o,g,i,a),g&&g.needsRenderFrame&&this._triggerRenderFrame()),(g||u.isActive())&&(r[i]=u)}const u={};for(const e in this._previousActiveHandlers)r[e]||(u[e]=a);this._previousActiveHandlers=r,(Object.keys(u).length||Xa(s))&&(this._changes.push([s,o,u]),this._triggerRenderFrame()),(Object.keys(r).length||Xa(s))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:c}=s;c&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],c(this._map))}mergeHandlerResult(t,i,a,s,o){if(!a)return;e.extend(t,a);const r={handlerName:s,originalEvent:a.originalEvent||o};void 0!==a.zoomDelta&&(i.zoom=r),void 0!==a.panDelta&&(i.drag=r),void 0!==a.pitchDelta&&(i.pitch=r),void 0!==a.bearingDelta&&(i.rotate=r)}_applyChanges(){const t={},i={},a={};for(const[s,o,r]of this._changes)s.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(t.around=s.around),void 0!==s.aroundCoord&&(t.aroundCoord=s.aroundCoord),void 0!==s.pinchAround&&(t.pinchAround=s.pinchAround),s.noInertia&&(t.noInertia=s.noInertia),e.extend(i,o),e.extend(a,r);this._updateMapTransform(t,i,a),this._changes=[]}_updateMapTransform(t,i,a){const s=this._map,o=s.transform,r=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!Xa(t)){const e=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",e!==o.zoom&&this._map._update(!0)}if(!Xa(t))return this._fireEvents(i,a,!0);let{panDelta:n,zoomDelta:l,bearingDelta:u,pitchDelta:c,around:g,aroundCoord:f,pinchAround:d}=t;void 0!==d&&(g=d),(e=>i.drag&&!this._eventsInProgress.drag)()&&g&&(this._dragOrigin=r(o.pointCoordinate3D(g)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",s._stop(!0),g=g||s.transform.centerPoint,u&&(o.bearing+=u),c&&(o.pitch+=c),o._updateCameraState();const h=[0,0,0];if(n){const e=o.screenPointToMercatorRay(g),t=o.screenPointToMercatorRay(g.sub(n)),i=this._trackingEllipsoid.projectRay(e.dir),a=this._trackingEllipsoid.projectRay(t.dir);h[0]=a[0]-i[0],h[1]=a[1]-i[1]}const p=o.zoom,m=[0,0,0];if(l){const t=r(f||o.pointCoordinate3D(g)),i={dir:e.normalize([],e.sub([],t,o._camera.position))},a=o.screenPointToMercatorRay(o.centerPoint);if(i.dir[2]<0){const s=e.altitudeFromMercatorZ(t[2],t[1]),n=o.rayIntersectionCoordinate(o.pointRayIntersection(o.centerPoint,s)),u=o.zoomDeltaToMovement(r(n),l)*(a.dir[2]/i.dir[2]);e.scale$2(m,i.dir,u)}else if(o._terrainEnabled()){const a=o.zoomDeltaToMovement(t,l);e.scale$2(m,i.dir,a)}}const y=e.add(h,h,m);o._translateCameraConstrained(y),l&&Math.abs(o.zoom-p)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(i,a,!0)}_fireEvents(t,i,a){const s=Qa(this._eventsInProgress),o=Qa(t),r={};for(const e in t){const{originalEvent:i}=t[e];this._eventsInProgress[e]||(r[e+"start"]=i),this._eventsInProgress[e]=t[e]}!s&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in r)this._fireEvent(e,r[e]);o&&this._fireEvent("move",o.originalEvent);for(const e in t){const{originalEvent:i}=t[e];this._fireEvent(e,i)}const n={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:a}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=i[t]||a,n[e+"end"]=l)}for(const e in n)this._fireEvent(e,n[e]);const u=Qa(this._eventsInProgress);if(a&&(s||o)&&!u){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(i(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),i(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,i){this._map.fire(new e.Event(t,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new ja("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Ka extends e.Evented{constructor(t,i){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=i.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,i,a){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},i),a)}panTo(t,i,a){return this.easeTo(e.extend({center:t},i),a)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,i,a){return this.easeTo(e.extend({zoom:t},i),a)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,i,a){return this.easeTo(e.extend({bearing:t},i),a)}resetNorth(t,i){return this.rotateTo(0,e.extend({duration:1e3},t),i),this}resetNorthPitch(t,i){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),i),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,i){t=e.LngLatBounds.convert(t);const a=i&&i.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),a,i)}_extendCameraOptions(t){const i={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(i,t.padding),t}_cameraForBoxAndBearing(t,i,a,s){const o=this._extendCameraOptions(s),r=this.transform,n=r.padding,l=r.project(e.LngLat.convert(t)),u=r.project(e.LngLat.convert(i)),c=l.rotate(-e.degToRad(a)),g=u.rotate(-e.degToRad(a)),f=new e.Point(Math.max(c.x,g.x),Math.max(c.y,g.y)),d=new e.Point(Math.min(c.x,g.x),Math.min(c.y,g.y)),h=f.sub(d),p=(r.width-(n.left+n.right+o.padding.left+o.padding.right))/h.x,m=(r.height-(n.top+n.bottom+o.padding.top+o.padding.bottom))/h.y;if(m<0||p<0)return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const y=Math.min(r.scaleZoom(r.scale*Math.min(p,m)),o.maxZoom),_="number"==typeof o.offset.x?new e.Point(o.offset.x,o.offset.y):e.Point.convert(o.offset),b=new e.Point((o.padding.left-o.padding.right)/2,(o.padding.top-o.padding.bottom)/2).rotate(a*Math.PI/180),v=_.add(b).mult(r.scale/r.zoomScale(y));return{center:r.unproject(l.add(u).div(2).sub(v)),zoom:y,bearing:a}}_cameraForBox(t,i,a,s,o){const r=this._extendCameraOptions(o);a=a||0,s=s||0,t=e.LngLat.convert(t),i=e.LngLat.convert(i);const n=this.transform.clone();n.padding=r.padding;const l=this.getFreeCameraOptions(),u=new e.LngLat(.5*(t.lng+i.lng),.5*(t.lat+i.lat)),c=.5*(a+s);if(n._camera.position[2]<e.mercatorZfromAltitude(c,u.lat))return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(u),n.setFreeCameraOptions(l);const g=e.MercatorCoordinate.fromLngLat(t),f=e.MercatorCoordinate.fromLngLat(i),d=n.pointRayIntersection(n.centerPoint,c),h=[(p=n.rayIntersectionCoordinate(d)).x,p.y,p.z];var p;const m=n.screenPointToMercatorRay(n.centerPoint);let y,_=0;do{const i=Math.floor(n.zoom),o=1<<i,r=Math.min(o*g.x,o*f.x),l=Math.min(o*g.y,o*f.y),u=Math.max(o*g.x,o*f.x),c=Math.max(o*g.y,o*f.y),d=new e.Aabb([r,l,a],[u,c,s]),p=e.Frustum.fromInvProjectionMatrix(n.invProjMatrix,n.worldSize,i);if(2!==d.intersects(p)){y&&(n._camera.position=e.scaleAndAdd([],n._camera.position,m.dir,-y),n._updateStateFromCamera());break}const _=e.sub([],n._camera.position,h);y=.5*e.length(_),n._camera.position=e.scaleAndAdd([],n._camera.position,m.dir,y);try{n._updateStateFromCamera()}catch(t){return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++_<10);return{center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}}fitBounds(e,t,i){return this._fitInternal(this.cameraForBounds(e,t),t,i)}_raycastElevationBox(t,i){const a=this.transform.elevation;if(!a)return;const s=new e.Point(t.x,i.y),o=new e.Point(i.x,t.y),r=a.pointCoordinate(t);if(!r)return;const n=a.pointCoordinate(i);if(!n)return;const l=a.pointCoordinate(s);if(!l)return;const u=a.pointCoordinate(o);if(!u)return;const c=new e.MercatorCoordinate(r[0],r[1]).toLngLat(),g=new e.MercatorCoordinate(n[0],n[1]).toLngLat(),f=new e.MercatorCoordinate(l[0],l[1]).toLngLat(),d=new e.MercatorCoordinate(u[0],u[1]).toLngLat(),h=Math.min(c.lng,Math.min(g.lng,Math.min(f.lng,d.lng))),p=Math.min(c.lat,Math.min(g.lat,Math.min(f.lat,d.lat))),m=Math.max(c.lng,Math.max(g.lng,Math.max(f.lng,d.lng))),y=Math.max(c.lat,Math.max(g.lat,Math.max(f.lat,d.lat))),_=Math.min(r[3],Math.min(n[3],Math.min(l[3],u[3]))),b=Math.max(r[3],Math.max(n[3],Math.max(l[3],u[3])));return{minLngLat:new e.LngLat(h,p),maxLngLat:new e.LngLat(m,y),minAltitude:_,maxAltitude:b}}fitScreenCoordinates(t,i,a,s,o){let r,n,l,u;const c=e.Point.convert(t),g=e.Point.convert(i),f=this._raycastElevationBox(c,g);if(f)r=f.minLngLat,n=f.maxLngLat,l=f.minAltitude,u=f.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(c,g))return this;r=this.transform.pointLocation(c),n=this.transform.pointLocation(g)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(t)),this.transform.pointLocation(e.Point.convert(i)),a,s):this._cameraForBox(r,n,l,u,s),s,o)}_fitInternal(t,i,a){return t?(delete(i=e.extend(t,i)).padding,i.linear?this.easeTo(i,a):this.flyTo(i,a)):this}jumpTo(t,i){this.stop();const a=this.transform;let s=!1,o=!1,r=!1;return"zoom"in t&&a.zoom!==+t.zoom&&(s=!0,a.zoom=+t.zoom),void 0!==t.center&&(a.center=e.LngLat.convert(t.center)),"bearing"in t&&a.bearing!==+t.bearing&&(o=!0,a.bearing=+t.bearing),"pitch"in t&&a.pitch!==+t.pitch&&(r=!0,a.pitch=+t.pitch),null==t.padding||a.isPaddingEqual(t.padding)||(a.padding=t.padding),this.fire(new e.Event("movestart",i)).fire(new e.Event("move",i)),s&&this.fire(new e.Event("zoomstart",i)).fire(new e.Event("zoom",i)).fire(new e.Event("zoomend",i)),o&&this.fire(new e.Event("rotatestart",i)).fire(new e.Event("rotate",i)).fire(new e.Event("rotateend",i)),r&&this.fire(new e.Event("pitchstart",i)).fire(new e.Event("pitch",i)).fire(new e.Event("pitchend",i)),this.fire(new e.Event("moveend",i))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,i){this.stop();const a=this.transform,s=a.zoom,o=a.pitch,r=a.bearing;a.setFreeCameraOptions(t);const n=s!==a.zoom,l=o!==a.pitch,u=r!==a.bearing;return this.fire(new e.Event("movestart",i)).fire(new e.Event("move",i)),n&&this.fire(new e.Event("zoomstart",i)).fire(new e.Event("zoom",i)).fire(new e.Event("zoomend",i)),u&&this.fire(new e.Event("rotatestart",i)).fire(new e.Event("rotate",i)).fire(new e.Event("rotateend",i)),l&&this.fire(new e.Event("pitchstart",i)).fire(new e.Event("pitch",i)).fire(new e.Event("pitchend",i)),this.fire(new e.Event("moveend",i)),this}easeTo(t,i){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.browser.prefersReducedMotion)&&(t.duration=0);const a=this.transform,s=this.getZoom(),o=this.getBearing(),r=this.getPitch(),n=this.getPadding(),l="zoom"in t?+t.zoom:s,u="bearing"in t?this._normalizeBearing(t.bearing,o):o,c="pitch"in t?+t.pitch:r,g="padding"in t?t.padding:a.padding,f=e.Point.convert(t.offset);let d=a.centerPoint.add(f);const h=a.pointLocation(d),p=e.LngLat.convert(t.center||h);this._normalizeCenter(p);const m=a.project(h),y=a.project(p).sub(m),_=a.zoomScale(l-s);let b,v;t.around&&(b=e.LngLat.convert(t.around),v=a.locationPoint(b));const x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==s,this._rotating=this._rotating||o!==u,this._pitching=this._pitching||c!==r,this._padding=!a.isPaddingEqual(g),this._easeId=t.easeId,this._prepareEase(i,t.noMoveStart,x),this._ease(t=>{if(this._zooming&&(a.zoom=e.number(s,l,t)),this._rotating&&(a.bearing=e.number(o,u,t)),this._pitching&&(a.pitch=e.number(r,c,t)),this._padding&&(a.interpolatePadding(n,g,t),d=a.centerPoint.add(f)),b)a.setLocationAtPoint(b,v);else{const e=a.zoomScale(a.zoom-s),i=l>s?Math.min(2,_):Math.max(.5,_),o=Math.pow(i,1-t),r=a.unproject(m.add(y.mult(t*o)).mult(e));a.setLocationAtPoint(a.renderWorldCopies?r.wrap():r,d)}this._fireMoveEvents(i)},e=>{a.recenterOnTerrain(),this._afterEase(i,e)},t),this}_prepareEase(t,i,a={}){this._moving=!0,this.transform.cameraElevationReference="sea",i||a.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!a.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!a.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!a.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,i){if(this._easeId&&i&&this._easeId===i)return;delete this._easeId,this.transform.cameraElevationReference="ground";const a=this._zooming,s=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,a&&this.fire(new e.Event("zoomend",t)),s&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,i){if(!t.essential&&e.browser.prefersReducedMotion){const a=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(a,i)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const a=this.transform,s=this.getZoom(),o=this.getBearing(),r=this.getPitch(),n=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,a.minZoom,a.maxZoom):s,u="bearing"in t?this._normalizeBearing(t.bearing,o):o,c="pitch"in t?+t.pitch:r,g="padding"in t?t.padding:a.padding,f=a.zoomScale(l-s),d=e.Point.convert(t.offset);let h=a.centerPoint.add(d);const p=a.pointLocation(h),m=e.LngLat.convert(t.center||p);this._normalizeCenter(m);const y=a.project(p),_=a.project(m).sub(y);let b=t.curve;const v=Math.max(a.width,a.height),x=v/f,C=_.mag();if("minZoom"in t){const i=e.clamp(Math.min(t.minZoom,s,l),a.minZoom,a.maxZoom),o=v/a.zoomScale(i-s);b=Math.sqrt(o/C*2)}const q=b*b;function U(e){const t=(x*x-v*v+(e?-1:1)*q*q*C*C)/(2*(e?x:v)*q*C);return Math.log(Math.sqrt(t*t+1)-t)}function w(e){return(Math.exp(e)-Math.exp(-e))/2}function E(e){return(Math.exp(e)+Math.exp(-e))/2}const B=U(0);let P=function(e){return E(B)/E(B+b*e)},M=function(e){return v*((E(B)*(w(t=B+b*e)/E(t))-w(B))/q)/C;var t},T=(U(1)-B)/b;if(Math.abs(C)<1e-6||!isFinite(T)){if(Math.abs(v-x)<1e-6)return this.easeTo(t,i);const e=x<v?-1:1;T=Math.abs(Math.log(x/v))/b,M=function(){return 0},P=function(t){return Math.exp(e*b*t)}}return t.duration="duration"in t?+t.duration:1e3*T/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=o!==u,this._pitching=c!==r,this._padding=!a.isPaddingEqual(g),this._prepareEase(i,!1),this._ease(t=>{const f=t*T,p=1/P(f);a.zoom=1===t?l:s+a.scaleZoom(p),this._rotating&&(a.bearing=e.number(o,u,t)),this._pitching&&(a.pitch=e.number(r,c,t)),this._padding&&(a.interpolatePadding(n,g,t),h=a.centerPoint.add(d));const b=1===t?m:a.unproject(y.add(_.mult(M(f))).mult(p));a.setLocationAtPoint(a.renderWorldCopies?b.wrap():b,h),a._updateCenterElevation(),this._fireMoveEvents(i)},()=>this._afterEase(i),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,i,a){!1===a.animate||0===a.duration?(t(1),i()):(this._easeStart=e.browser.now(),this._easeOptions=a,this._onEaseFrame=t,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,i){t=e.wrap(t,-180,180);const a=Math.abs(t-i);return Math.abs(t-360-i)<a&&(t-=360),Math.abs(t+360-i)<a&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.lngRange)return;const i=e.lng-t.center.lng;e.lng+=i>180?-360:i<-180?360:0}}class Ja{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=i.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const i=this._map._getUIString("AttributionControl."+t);e.title=i,e.setAttribute("aria-label",i)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const a=i.reduce((e,t,a)=>(t.value&&(e+=`${t.key}=${t.value}${a<i.length-1?"&":""}`),e),"?");t.href=`${e.config.FEEDBACK_URL}/${a}${this._map._hash?this._map._hash.getHashString(!0):""}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(e=>"string"!=typeof e?"":e)):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const i in t){const a=t[i];if(a.used){const t=a.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort((e,t)=>e.length-t.length),e=e.filter((t,i)=>{for(let a=i+1;a<e.length;a++)if(e[a].indexOf(t)>=0)return!1;return!0});const i=e.join(" | ");i!==this._attribHTML&&(this._attribHTML=i,e.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Ya{constructor(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)}onAdd(e){this._map=e,this._container=i.create("div","mapboxgl-ctrl");const t=i.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const i=e[t].getSource();if(i.hasOwnProperty("mapbox_logo")&&!i.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class es{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,i=t?this._queue.concat(t):this._queue;for(const t of i)if(t.id===e)return void(t.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const i of t)if(!i.cancelled&&(i.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const ts={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:is,HTMLElement:as,ImageBitmap:ss}=e.window,os={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function rs(e){e.parentNode&&e.parentNode.removeChild(e)}const ns={showCompass:!0,showZoom:!0,visualizePitch:!1};class ls{constructor(t,a,s=!1){this._clickTolerance=10,this.element=a,this.mouseRotate=new wa({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,s&&(this.mousePitch=new Ea({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(a,"mousedown",this.mousedown),i.addEventListener(a,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(a,"touchmove",this.touchmove),i.addEventListener(a,"touchend",this.touchend),i.addEventListener(a,"touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),i.disableDrag()}move(e,t){const i=this.map,a=this.mouseRotate.mousemoveWindow(e,t);if(a&&a.bearingDelta&&i.setBearing(i.getBearing()+a.bearingDelta),this.mousePitch){const a=this.mousePitch.mousemoveWindow(e,t);a&&a.pitchDelta&&i.setPitch(i.getPitch()+a.pitchDelta)}}off(){const e=this.element;i.removeEventListener(e,"mousedown",this.mousedown),i.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(e,"touchmove",this.touchmove),i.removeEventListener(e,"touchend",this.touchend),i.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){i.enableDrag(),i.removeEventListener(e.window,"mousemove",this.mousemove),i.removeEventListener(e.window,"mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),i.mousePos(this.element,t)),i.addEventListener(e.window,"mousemove",this.mousemove),i.addEventListener(e.window,"mouseup",this.mouseup)}mousemove(e){this.move(e,i.mousePos(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function us(t,i,a){if(t=new e.LngLat(t.lng,t.lat),i){const s=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),r=360*Math.ceil(Math.abs(t.lng-a.center.lng)/360),n=a.locationPoint(t).distSqr(i),l=i.x<0||i.y<0||i.x>a.width||i.y>a.height;a.locationPoint(s).distSqr(i)<n&&(l||Math.abs(s.lng-a.center.lng)<r)?t=s:a.locationPoint(o).distSqr(i)<n&&(l||Math.abs(o.lng-a.center.lng)<r)&&(t=o)}for(;Math.abs(t.lng-a.center.lng)>180;){const e=a.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=a.width&&e.y<=a.height)break;t.lng>a.center.lng?t.lng-=360:t.lng+=360}return t}const cs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function gs(e,t,i){const a=e.classList;for(const e in cs)a.remove(`mapboxgl-${i}-anchor-${e}`);a.add(`mapboxgl-${i}-anchor-${t}`)}class fs extends e.Evented{constructor(t,a){if(super(),(t instanceof e.window.HTMLElement||a)&&(t=e.extend({element:t},a)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=e.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");const a=i.createNS("http://www.w3.org/2000/svg","svg"),s=41,o=27;a.setAttributeNS(null,"display","block"),a.setAttributeNS(null,"height",s+"px"),a.setAttributeNS(null,"width",o+"px"),a.setAttributeNS(null,"viewBox",`0 0 ${o} ${s}`);const r=i.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");const n=i.createNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"fill-rule","nonzero");const l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of u){const t=i.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const c=i.createNS("http://www.w3.org/2000/svg","g");c.setAttributeNS(null,"fill",this._color);const g=i.createNS("http://www.w3.org/2000/svg","path");g.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),c.appendChild(g);const f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"opacity","0.25"),f.setAttributeNS(null,"fill","#000000");const d=i.createNS("http://www.w3.org/2000/svg","path");d.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),f.appendChild(d);const h=i.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"transform","translate(6.0, 7.0)"),h.setAttributeNS(null,"fill","#FFFFFF");const p=i.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"transform","translate(8.0, 8.0)");const m=i.createNS("http://www.w3.org/2000/svg","circle");m.setAttributeNS(null,"fill","#000000"),m.setAttributeNS(null,"opacity","0.25"),m.setAttributeNS(null,"cx","5.5"),m.setAttributeNS(null,"cy","5.5"),m.setAttributeNS(null,"r","5.4999962");const y=i.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#FFFFFF"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962"),p.appendChild(m),p.appendChild(y),n.appendChild(l),n.appendChild(c),n.appendChild(f),n.appendChild(h),n.appendChild(p),a.appendChild(n),a.setAttributeNS(null,"height",s*this._scale+"px"),a.setAttributeNS(null,"width",o*this._scale+"px"),this._element.appendChild(a),this._offset=e.Point.convert(t&&t.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",e=>{e.preventDefault()}),this._element.addEventListener("mousedown",e=>{e.preventDefault()}),gs(this._element,this._anchor,"marker"),this._popup=null}addTo(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,i=13.5,a=Math.sqrt(Math.pow(i,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[a,-1*(t-i+a)],"bottom-right":[-a,-1*(t-i+a)],left:[i,-1*(t-i)],right:[-i,-1*(t-i)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(e){const t=e.code,i=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==i&&13!==i||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this}_updateOcclusion(){this._occlusionTimer||(this._occlusionTimer=setTimeout(this._onOcclusionTimer.bind(this),60))}_onOcclusionTimer(){const e=this._map.transform,t=this._pos?this._pos.sub(this._transformedOffset()):null;if(t&&t.x>=0&&t.x<e.width&&t.y>=0&&t.y<e.height){const e=this._map.unproject(t),i=this._map.getFreeCameraOptions();if(i.position){const t=i.position.toLngLat(),a=t.distanceTo(e),s=t.distanceTo(this._lngLat);this._element.classList.toggle("mapboxgl-marker-occluded",a<.9*s)}}this._occlusionTimer=null}_update(e){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=us(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset()),this._map.transform.elevation&&this._updateOcclusion();let t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(t=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let a="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?a="rotateX(0deg)":"map"===this._pitchAlignment&&(a=`rotateX(${this._map.getPitch()}deg)`),e&&"moveend"!==e.type||(this._pos=this._pos.round()),i.setTransform(this._element,`${cs[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${a} ${t}`)}_transformedOffset(){if(!this._defaultMarker)return this._offset;const e=this._map.transform,t=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&t._rotate(e.angle),"map"===this._pitchAlignment&&(t.y*=Math.cos(e._pitch)),t}getOffset(){return this._offset}setOffset(t){return this._offset=e.Point.convert(t),this._update(),this}_onMove(t){if(!this._isDragging){const e=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const ds={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let hs,ps=0,ms=!1;const ys={maxWidth:100,unit:"metric"};function _s(e,t,i){const a=i&&i.maxWidth||100,s=e._container.clientHeight/2,o=e.unproject([0,s]),r=e.unproject([a,s]),n=o.distanceTo(r);if(i&&"imperial"===i.unit){const i=3.2808*n;i>5280?bs(t,a,i/5280,e._getUIString("ScaleControl.Miles")):bs(t,a,i,e._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?bs(t,a,n/1852,e._getUIString("ScaleControl.NauticalMiles")):n>=1e3?bs(t,a,n/1e3,e._getUIString("ScaleControl.Kilometers")):bs(t,a,n,e._getUIString("ScaleControl.Meters"))}function bs(e,t,i,a){const s=function(e){const t=Math.pow(10,(""+Math.floor(e)).length-1);let i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(i),t*i}(i);e.style.width=t*(s/i)+"px",e.innerHTML=`${s}&nbsp;${a}`}const vs={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},xs=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Cs={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Ka{constructor(t){if(null!=(t=e.extend({},os,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ia(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new es,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},ts,t.locale),this._clickTolerance=t.clickTolerance,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken),"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof as))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Wa(this,t),this._hash=t.hash&&new aa("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new Ja({customAttribution:t.customAttribution})),this._logoControl=new Ya,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",t=>{this._update("style"===t.dataType),this.fire(new e.Event(t.dataType+"data",t))}),this.on("dataloading",t=>{this.fire(new e.Event(t.dataType+"dataloading",t))})}_getMapId(){return this._mapId}addControl(t,i){if(void 0===i&&(i=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const a=t.onAdd(this);this._controls.push(t);const s=this._controlPositions[i];return-1!==i.indexOf("bottom")?s.insertBefore(a,s.firstChild):s.appendChild(a),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(t);return i>-1&&this._controls.splice(i,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}resize(t){const i=this._containerDimensions(),a=i[0],s=i[1];this._resizeCanvas(a,s),this.transform.resize(a,s),this.painter.resize(a,s);const o=!this._moving;return o&&(this.stop(),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t))),this.fire(new e.Event("resize",t)),o&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.Point.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(e,t,i){if("mouseenter"===e||"mouseover"===e){let a=!1;const s=s=>{const o=this.getLayer(t)?this.queryRenderedFeatures(s.point,{layers:[t]}):[];o.length?a||(a=!0,i.call(this,new fa(e,this,s.originalEvent,{features:o}))):a=!1};return{layer:t,listener:i,delegates:{mousemove:s,mouseout:()=>{a=!1}}}}if("mouseleave"===e||"mouseout"===e){let a=!1;const s=s=>{(this.getLayer(t)?this.queryRenderedFeatures(s.point,{layers:[t]}):[]).length?a=!0:a&&(a=!1,i.call(this,new fa(e,this,s.originalEvent)))},o=t=>{a&&(a=!1,i.call(this,new fa(e,this,t.originalEvent)))};return{layer:t,listener:i,delegates:{mousemove:s,mouseout:o}}}{const a=e=>{const a=this.getLayer(t)?this.queryRenderedFeatures(e.point,{layers:[t]}):[];a.length&&(e.features=a,i.call(this,e),delete e.features)};return{layer:t,listener:i,delegates:{[e]:a}}}}on(e,t,i){if(void 0===i)return super.on(e,t);const a=this._createDelegatedListener(e,t,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(a);for(const e in a.delegates)this.on(e,a.delegates[e]);return this}once(e,t,i){if(void 0===i)return super.once(e,t);const a=this._createDelegatedListener(e,t,i);for(const e in a.delegates)this.once(e,a.delegates[e]);return this}off(e,t,i){return void 0===i?super.off(e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&(a=>{const s=this._delegatedListeners[e];for(let e=0;e<s.length;e++){const a=s[e];if(a.layer===t&&a.listener===i){for(const e in a.delegates)this.off(e,a.delegates[e]);return s.splice(e,1),this}}})(),this)}queryRenderedFeatures(t,i){return this.style?(void 0!==i||void 0===t||t instanceof e.Point||Array.isArray(t)||(i=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(t,i){return!1!==(i=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(t,i))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),e&&(this.style=new je(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new je(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,i){if("string"==typeof t){const a=this._requestManager.normalizeStyleURL(t),s=this._requestManager.transformRequest(a,e.ResourceType.Style);e.getJSON(s,(t,a)=>{t?this.fire(new e.ErrorEvent(t)):a&&this._updateDiff(a,i)})}else"object"==typeof t&&this._updateDiff(t,i)}_updateDiff(t,i){try{this.style.setState(t)&&(this._update(!0),this._updateTerrain())}catch(a){e.warnOnce(`Unable to perform style diff: ${a.message||a.error||a}.  Rebuilding the style from scratch.`),this._updateStyle(t,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(t){const i=this.style&&this.style._getSourceCaches(t);if(0!==i.length)return i.every(e=>e.loaded());this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`)))}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const i=e[t]._tiles;for(const e in i){const t=i[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,i)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,i,{pixelRatio:a=1,sdf:s=!1,stretchX:o,stretchY:r,content:n}={}){if(this._lazyInitEmptyStyle(),i instanceof is||ss&&i instanceof ss){const{width:l,height:u,data:c}=e.browser.getImageData(i);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:u},c),pixelRatio:a,stretchX:o,stretchY:r,content:n,sdf:s,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:u,data:c}=i,g=i;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:u},new Uint8Array(c)),pixelRatio:a,stretchX:o,stretchY:r,content:n,sdf:s,version:0,userImage:g}),g.onAdd&&g.onAdd(this,t)}}}updateImage(t,i){const a=this.style.getImage(t);if(!a)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const s=i instanceof is||ss&&i instanceof ss?e.browser.getImageData(i):i,{width:o,height:r,data:n}=s;return void 0===o||void 0===r?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):o!==a.data.width||r!==a.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(a.data.replace(n,!(i instanceof is||ss&&i instanceof ss)),void this.style.updateImage(t,a))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,i){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,i){return this.style.setLayerZoomRange(e,t,i),this._update(!0)}setFilter(e,t,i={}){return this.style.setFilter(e,t,i),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,i,a={}){return this.style.setPaintProperty(e,t,i,a),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,i,a={}){return this.style.setLayoutProperty(e,t,i,a),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),this.style.setTerrain(e),this._update(!0)}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=i.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const a=this._containerDimensions();this._resizeCanvas(a[0],a[1]);const s=this._controlContainer=i.create("div","mapboxgl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(e=>{o[e]=i.create("div","mapboxgl-ctrl-"+e,s)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,i){const a=e.browser.devicePixelRatio||1;this._canvas.width=a*t,this._canvas.height=a*i,this._canvas.style.width=t+"px",this._canvas.style.height=i+"px"}_setupPainter(){const i=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),a=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);a?(this.painter=new Qi(a,this.transform),this.on("data",e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)}),e.webpSupported.testSupport(a)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(t){let i,a=0;const s=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=s.createQueryEXT(),s.beginQueryEXT(s.TIME_ELAPSED_EXT,i),a=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._removed)return;let o=!1;const r=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,i=e.browser.now();this.style.zoomHistory.update(t,i);const a=new e.EvaluationParameters(t,{now:i,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),s=a.crossFadingFactor();1===s&&s===this._crossFadingFactor||(o=!0,this._crossFadingFactor=s),this.style.update(a)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const t=e.browser.now()-a;s.endQueryEXT(s.TIME_ELAPSED_EXT,i),setTimeout(()=>{const a=s.getQueryObjectEXT(i,s.QUERY_RESULT_EXT)/1e6;s.deleteQueryEXT(i),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:a}))},50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout(()=>{const i=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:i}))},50)}const n=this._sourcesDirty||this._styleDirty||this._placementDirty;if(n||this._repaint)this.triggerRepaint();else if(this._triggerFrame(!1),!this.isMoving()&&this.loaded()&&(this.fire(new e.Event("idle")),this._isInitialLoad&&this._authenticate(),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}return!this._loaded||this._fullyLoaded||n||(this._fullyLoaded=!0),this}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){console.error("Error: A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/"),e.browser.setErrorState();const t=this.painter.context.gl;this._logoControl instanceof Ya&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}}),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const i=this.painter.context.gl,a=i.createFramebuffer();function s(e){i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0);const t=new Uint8Array(i.drawingBufferWidth*i.drawingBufferHeight*4);return i.readPixels(0,0,i.drawingBufferWidth,i.drawingBufferHeight,i.RGBA,i.UNSIGNED_BYTE,t),t}return i.bindFramebuffer(i.FRAMEBUFFER,a),this._canvasPixelComparison(s(e),t.canvasCopies.map(s),t.timeStamps)}_canvasPixelComparison(e,t,i){let a=i[1]-i[0];const s=e.length/4;for(let o=0;o<t.length;o++){const r=t[o];let n=0;for(let t=0;t<r.length;t+=4)r[t]===e[t]&&r[t+1]===e[t+1]&&r[t+2]===e[t+2]&&r[t+3]===e[t+3]&&(n+=1);a+=(i[o+2]-i[o+1])*(1-n/s)}return a}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),rs(this._canvasContainer),rs(this._controlContainer),rs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.browser.frame(e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)}))}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}_setCacheLimits(t,i){e.setCacheLimits(t,i)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},ns,t),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),i=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}_rotateCompassArrow(){const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ls(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const a=i.create("button",e,this._container);return a.type="button",a.addEventListener("click",t),a}_setButtonTitle(e,t){const i=this._map._getUIString("NavigationControl."+t);e.title=i,e.setAttribute("aria-label",i)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({},ds,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(t){var a;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),a=this._setupUI,void 0!==hs?a(hs):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(e=>{hs="denied"!==e.state,a(hs)}):(hs=!!e.window.navigator.geolocation,a(hs)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ps=0,ms=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),i=e.coords;return t&&(i.longitude<t.getWest()||i.longitude>t.getEast()||i.latitude<t.getSouth()||i.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const i=new e.LngLat(t.coords.longitude,t.coords.latitude),a=t.coords.accuracy,s=this._map.getBearing(),o=e.extend({bearing:s},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(a),o,{geolocateSource:!0})}_updateMarker(t){if(t){const i=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),i=this._map.unproject([1,e]),a=t.distanceTo(i),s=Math.ceil(2*this._accuracy/a);this._circleElement.style.width=s+"px",this._circleElement.style.height=s+"px"}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&ms)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new fs(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new fs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ps--,ms=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ps++,ps>1?(t={maximumAge:6e5,timeout:0},ms=!0):(t=this.options.positionOptions,ms=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Ja,ScaleControl:class{constructor(t){this.options=e.extend({},ys,t),e.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){_s(this._map,this._container,this.options)}onAdd(e){return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(e){this.options.unit=e,_s(this._map,this._container,this.options)}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){i.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(vs),t),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const i=e.window.document.createDocumentFragment(),a=e.window.document.createElement("body");let s;for(a.innerHTML=t;s=a.firstChild,s;)i.appendChild(s);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=i.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){this._container&&this._container.classList.add(e)}removeClassName(e){this._container&&this._container.classList.remove(e)}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}_createCloseButton(){this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(e){this._update(e.point)}_onMouseMove(e){this._update(e.point)}_onDrag(e){this._update(e.point)}_update(t){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(e=>this._container.classList.add(e)),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=us(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!t)return;const a=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);let s=this.options.anchor;const o=function t(i){if(i){if("number"==typeof i){const t=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new e.Point(0,0),top:new e.Point(0,i),"top-left":new e.Point(t,t),"top-right":new e.Point(-t,t),bottom:new e.Point(0,-i),"bottom-left":new e.Point(t,-t),"bottom-right":new e.Point(-t,-t),left:new e.Point(i,0),right:new e.Point(-i,0)}}if(i instanceof e.Point||Array.isArray(i)){const t=e.Point.convert(i);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:e.Point.convert(i.center||[0,0]),top:e.Point.convert(i.top||[0,0]),"top-left":e.Point.convert(i["top-left"]||[0,0]),"top-right":e.Point.convert(i["top-right"]||[0,0]),bottom:e.Point.convert(i.bottom||[0,0]),"bottom-left":e.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(i["bottom-right"]||[0,0]),left:e.Point.convert(i.left||[0,0]),right:e.Point.convert(i.right||[0,0])}}return t(new e.Point(0,0))}(this.options.offset);if(!s){const e=this._container.offsetWidth,t=this._container.offsetHeight;let i;i=a.y+o.bottom.y<t?["top"]:a.y>this._map.transform.height-t?["bottom"]:[],a.x<e/2?i.push("left"):a.x>this._map.transform.width-e/2&&i.push("right"),s=0===i.length?"bottom":i.join("-")}const r=a.add(o[s]).round();i.setTransform(this._container,`${cs[s]} translate(${r.x}px,${r.y}px)`),gs(this._container,s,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(xs);e&&e.focus()}_onClose(){this.remove()}},Marker:fs,Style:je,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:ea,Evented:e.Evented,config:e.config,prewarm:function(){G().acquire(R)},clearPrewarmedResources:function(){const e=$;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(R),$=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return N.workerCount},set workerCount(e){N.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:""};return Cs})),i}()}));Re.accessToken="pk.eyJ1IjoiaW5mb2dlb2dlb3N0YXJ0IiwiYSI6ImNrdHNnOGJkeTFmdnQydW1wZmp1amxzNDIifQ.SNA6XHEPjyxynwsHbZCDNw";const Ne=parseFloat;function $e(e,t=";"){let i;if(Array.isArray(e))i=e.filter(e=>e);else{i=[];for(const t in e)e[t]&&i.push(`${t}:${e[t]}`)}return i.join(t)}function Ge(e){let t,i,a,s,o,r,n;function l(e,t){return"string"==typeof e[7][4]?Ze:Ve}let u=l(e),c=u(e);return{c(){t=U("svg"),i=U("g"),a=U("g"),c.c(),M(a,"transform",e[10]),M(i,"transform",s=`translate(${e[7][0]/2} ${e[7][1]/2})`),M(i,"transform-origin",o=e[7][0]/4+" 0"),M(t,"id",e[0]),M(t,"class",r=f(e[8])+" svelte-1cj2gr0"),M(t,"style",e[9]),M(t,"viewBox",n=`0 0 ${e[7][0]} ${e[7][1]}`),M(t,"aria-hidden","true"),M(t,"role","img"),M(t,"xmlns","http://www.w3.org/2000/svg")},m(e,s){v(e,t,s),b(t,i),b(i,a),c.m(a,null)},p(e,g){u===(u=l(e))&&c?c.p(e,g):(c.d(1),c=u(e),c&&(c.c(),c.m(a,null))),1024&g&&M(a,"transform",e[10]),128&g&&s!==(s=`translate(${e[7][0]/2} ${e[7][1]/2})`)&&M(i,"transform",s),128&g&&o!==(o=e[7][0]/4+" 0")&&M(i,"transform-origin",o),1&g&&M(t,"id",e[0]),256&g&&r!==(r=f(e[8])+" svelte-1cj2gr0")&&M(t,"class",r),512&g&&M(t,"style",e[9]),128&g&&n!==(n=`0 0 ${e[7][0]} ${e[7][1]}`)&&M(t,"viewBox",n)},d(e){e&&x(t),c.d()}}}function Ve(e){let t,i,a,s,o,r,n,l,u,c;return{c(){t=U("path"),r=U("path"),M(t,"d",i=e[7][4][0]),M(t,"fill",a=e[3]||e[1]||"currentColor"),M(t,"fill-opacity",s=0!=e[6]?e[4]:e[5]),M(t,"transform",o=`translate(${e[7][0]/-2} ${e[7][1]/-2})`),M(r,"d",n=e[7][4][1]),M(r,"fill",l=e[2]||e[1]||"currentColor"),M(r,"fill-opacity",u=0!=e[6]?e[5]:e[4]),M(r,"transform",c=`translate(${e[7][0]/-2} ${e[7][1]/-2})`)},m(e,i){v(e,t,i),v(e,r,i)},p(e,g){128&g&&i!==(i=e[7][4][0])&&M(t,"d",i),10&g&&a!==(a=e[3]||e[1]||"currentColor")&&M(t,"fill",a),112&g&&s!==(s=0!=e[6]?e[4]:e[5])&&M(t,"fill-opacity",s),128&g&&o!==(o=`translate(${e[7][0]/-2} ${e[7][1]/-2})`)&&M(t,"transform",o),128&g&&n!==(n=e[7][4][1])&&M(r,"d",n),6&g&&l!==(l=e[2]||e[1]||"currentColor")&&M(r,"fill",l),112&g&&u!==(u=0!=e[6]?e[5]:e[4])&&M(r,"fill-opacity",u),128&g&&c!==(c=`translate(${e[7][0]/-2} ${e[7][1]/-2})`)&&M(r,"transform",c)},d(e){e&&x(t),e&&x(r)}}}function Ze(e){let t,i,a,s;return{c(){t=U("path"),M(t,"d",i=e[7][4]),M(t,"fill",a=e[1]||e[2]||"currentColor"),M(t,"transform",s=`translate(${e[7][0]/-2} ${e[7][1]/-2})`)},m(e,i){v(e,t,i)},p(e,o){128&o&&i!==(i=e[7][4])&&M(t,"d",i),6&o&&a!==(a=e[1]||e[2]||"currentColor")&&M(t,"fill",a),128&o&&s!==(s=`translate(${e[7][0]/-2} ${e[7][1]/-2})`)&&M(t,"transform",s)},d(e){e&&x(t)}}}function Qe(t){let i,a=t[7][4]&&Ge(t);return{c(){a&&a.c(),i=B()},m(e,t){a&&a.m(e,t),v(e,i,t)},p(e,[t]){e[7][4]?a?a.p(e,t):(a=Ge(e),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i:e,o:e,d(e){a&&a.d(e),e&&x(i)}}}function je(e,t,i){let a,s,o,r,{class:n=""}=t,{id:l=""}=t,{style:u=""}=t,{icon:c}=t,{size:g=""}=t,{color:f=""}=t,{fw:d=!1}=t,{pull:h=""}=t,{scale:p=1}=t,{translateX:m=0}=t,{translateY:y=0}=t,{rotate:_=""}=t,{flip:b=!1}=t,{spin:v=!1}=t,{pulse:x=!1}=t,{primaryColor:C=""}=t,{secondaryColor:q=""}=t,{primaryOpacity:U=1}=t,{secondaryOpacity:w=.4}=t,{swapOpacity:E=!1}=t;return e.$$set=e=>{"class"in e&&i(11,n=e.class),"id"in e&&i(0,l=e.id),"style"in e&&i(12,u=e.style),"icon"in e&&i(13,c=e.icon),"size"in e&&i(14,g=e.size),"color"in e&&i(1,f=e.color),"fw"in e&&i(15,d=e.fw),"pull"in e&&i(16,h=e.pull),"scale"in e&&i(17,p=e.scale),"translateX"in e&&i(18,m=e.translateX),"translateY"in e&&i(19,y=e.translateY),"rotate"in e&&i(20,_=e.rotate),"flip"in e&&i(21,b=e.flip),"spin"in e&&i(22,v=e.spin),"pulse"in e&&i(23,x=e.pulse),"primaryColor"in e&&i(2,C=e.primaryColor),"secondaryColor"in e&&i(3,q=e.secondaryColor),"primaryOpacity"in e&&i(4,U=e.primaryOpacity),"secondaryOpacity"in e&&i(5,w=e.secondaryOpacity),"swapOpacity"in e&&i(6,E=e.swapOpacity)},e.$$.update=()=>{8192&e.$$.dirty&&i(7,a=c&&c.icon||[0,0,"",[],""]),12584960&e.$$.dirty&&i(8,s=$e([n,"fa",v&&"spin",x&&"pulse"]," ")),118784&e.$$.dirty&&i(9,o=function(e,t,i,a){let s,o,r,n,l,u="-.125em";return a&&(l="center",o="1.25em"),i&&(s=i),t&&("lg"==t?(n="1.33333em",r=".75em",u="-.225em"):n="xs"==t?".75em":"sm"==t?".875em":t.replace("x","em")),$e([$e({float:s,width:o,height:"1em","line-height":r,"font-size":n,"text-align":l,"vertical-align":u,"transform-origin":"center",overflow:"visible"}),e])}(u,g,h,d)),4063232&e.$$.dirty&&i(10,r=function(e,t,i,a,s,o=1,r="",n=""){let l=1,u=1;return s&&("horizontal"==s?l=-1:"vertical"==s?u=-1:l=u=-1),$e([`translate(${Ne(t)*o}${r},${Ne(i)*o}${r})`,`scale(${l*Ne(e)},${u*Ne(e)})`,a&&`rotate(${a}${n})`]," ")}(p,m,y,_,b,512))},[l,f,C,q,U,w,E,a,s,o,r,n,u,c,g,d,h,p,m,y,_,b,v,x]}class He extends Ce{constructor(e){super(),xe(this,e,je,Qe,n,{class:11,id:0,style:12,icon:13,size:14,color:1,fw:15,pull:16,scale:17,translateX:18,translateY:19,rotate:20,flip:21,spin:22,pulse:23,primaryColor:2,secondaryColor:3,primaryOpacity:4,secondaryOpacity:5,swapOpacity:6})}}
/*!
   * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
   * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
   */var Xe={prefix:"fas",iconName:"cube",icon:[512,512,[],"f1b2","M239.1 6.3l-208 78c-18.7 7-31.1 25-31.1 45v225.1c0 18.2 10.3 34.8 26.5 42.9l208 104c13.5 6.8 29.4 6.8 42.9 0l208-104c16.3-8.1 26.5-24.8 26.5-42.9V129.3c0-20-12.4-37.9-31.1-44.9l-208-78C262 2.2 250 2.2 239.1 6.3zM256 68.4l192 72v1.1l-192 78-192-78v-1.1l192-72zm32 356V275.5l160-65v133.9l-160 80z"]},We=function(e,t){return(We=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};
=======
var app=function(){"use strict";function e(){}const t=e=>e;function i(e,t){for(const i in t)e[i]=t[i];return e}function o(e){return e()}function s(){return Object.create(null)}function a(e){e.forEach(o)}function r(e){return"function"==typeof e}function n(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(e,t,i,o){if(e){const s=c(e,t,i,o);return e[0](s)}}function c(e,t,o,s){return e[1]&&s?i(o.ctx.slice(),e[1](s(t))):o.ctx}function u(e,t,i,o,s,a,r){const n=function(e,t,i,o){if(e[2]&&o){const s=e[2](o(i));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],i=Math.max(t.dirty.length,s.length);for(let o=0;o<i;o+=1)e[o]=t.dirty[o]|s[o];return e}return t.dirty|s}return t.dirty}(t,o,s,a);if(n){const s=c(t,i,o,r);e.p(s,n)}}function h(e){const t={};for(const i in e)"$"!==i[0]&&(t[i]=e[i]);return t}function p(t){return t&&r(t.destroy)?t.destroy:e}const m="undefined"!=typeof window;let d=m?()=>window.performance.now():()=>Date.now(),f=m?e=>requestAnimationFrame(e):e;const y=new Set;function g(e){y.forEach(t=>{t.c(e)||(y.delete(t),t.f())}),0!==y.size&&f(g)}function _(e,t){e.appendChild(t)}function b(e,t,i){e.insertBefore(t,i||null)}function v(e){e.parentNode.removeChild(e)}function x(e,t){for(let i=0;i<e.length;i+=1)e[i]&&e[i].d(t)}function L(e){return document.createElement(e)}function I(e){return document.createTextNode(e)}function w(){return I(" ")}function q(){return I("")}function F(e,t,i,o){return e.addEventListener(t,i,o),()=>e.removeEventListener(t,i,o)}function E(e,t,i){null==i?e.removeAttribute(t):e.getAttribute(t)!==i&&e.setAttribute(t,i)}function T(e,t){const i=Object.getOwnPropertyDescriptors(e.__proto__);for(const o in t)null==t[o]?e.removeAttribute(o):"style"===o?e.style.cssText=t[o]:"__value"===o?e.value=e[o]=t[o]:i[o]&&i[o].set?e[o]=t[o]:E(e,o,t[o])}function C(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function z(e,t){e.value=null==t?"":t}function A(e,t,i,o){e.style.setProperty(t,i,o?"important":"")}function P(e,t){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,!1,!1,t),i}const B=new Set;let M,D=0;function S(e,t,i,o,s,a,r,n=0){const l=16.666/o;let c="{\n";for(let e=0;e<=1;e+=l){const o=t+(i-t)*a(e);c+=100*e+`%{${r(o,1-o)}}\n`}const u=c+`100% {${r(i,1-i)}}\n}`,h=`__svelte_${function(e){let t=5381,i=e.length;for(;i--;)t=(t<<5)-t^e.charCodeAt(i);return t>>>0}(u)}_${n}`,p=e.ownerDocument;B.add(p);const m=p.__svelte_stylesheet||(p.__svelte_stylesheet=p.head.appendChild(L("style")).sheet),d=p.__svelte_rules||(p.__svelte_rules={});d[h]||(d[h]=!0,m.insertRule(`@keyframes ${h} ${u}`,m.cssRules.length));const f=e.style.animation||"";return e.style.animation=`${f?f+", ":""}${h} ${o}ms linear ${s}ms 1 both`,D+=1,h}function k(e,t){const i=(e.style.animation||"").split(", "),o=i.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),s=i.length-o.length;s&&(e.style.animation=o.join(", "),D-=s,D||f(()=>{D||(B.forEach(e=>{const t=e.__svelte_stylesheet;let i=t.cssRules.length;for(;i--;)t.deleteRule(i);e.__svelte_rules={}}),B.clear())}))}function U(e){M=e}function R(){if(!M)throw new Error("Function called outside component initialization");return M}function O(e){R().$$.on_mount.push(e)}function N(e){R().$$.on_destroy.push(e)}function $(e,t){R().$$.context.set(e,t)}function V(e){return R().$$.context.get(e)}function G(e,t){const i=e.$$.callbacks[t.type];i&&i.slice().forEach(e=>e(t))}const j=[],Z=[],H=[],X=[],Q=Promise.resolve();let W=!1;function K(e){H.push(e)}function J(e){X.push(e)}let Y=!1;const ee=new Set;function te(){if(!Y){Y=!0;do{for(let e=0;e<j.length;e+=1){const t=j[e];U(t),ie(t.$$)}for(U(null),j.length=0;Z.length;)Z.pop()();for(let e=0;e<H.length;e+=1){const t=H[e];ee.has(t)||(ee.add(t),t())}H.length=0}while(j.length);for(;X.length;)X.pop()();W=!1,Y=!1,ee.clear()}}function ie(e){if(null!==e.fragment){e.update(),a(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(K)}}let oe;function se(e,t,i){e.dispatchEvent(P(`${t?"intro":"outro"}${i}`))}const ae=new Set;let re;function ne(){re={r:0,c:[],p:re}}function le(){re.r||a(re.c),re=re.p}function ce(e,t){e&&e.i&&(ae.delete(e),e.i(t))}function ue(e,t,i,o){if(e&&e.o){if(ae.has(e))return;ae.add(e),re.c.push(()=>{ae.delete(e),o&&(i&&e.d(1),o())}),e.o(t)}}const he={duration:0};function pe(i,o,s,n){let l=o(i,s),c=n?0:1,u=null,h=null,p=null;function m(){p&&k(i,p)}function _(e,t){const i=e.b-c;return t*=Math.abs(i),{a:c,b:e.b,d:i,duration:t,start:e.start,end:e.start+t,group:e.group}}function b(o){const{delay:s=0,duration:r=300,easing:n=t,tick:b=e,css:v}=l||he,x={start:d()+s,b:o};o||(x.group=re,re.r+=1),u?h=x:(v&&(m(),p=S(i,c,o,r,s,n,v)),o&&b(0,1),u=_(x,r),K(()=>se(i,o,"start")),function(e){let t;0===y.size&&f(g),new Promise(i=>{y.add(t={c:e,f:i})})}(e=>{if(h&&e>h.start&&(u=_(h,r),h=null,se(i,u.b,"start"),v&&(m(),p=S(i,c,u.b,u.duration,0,n,l.css))),u)if(e>=u.end)b(c=u.b,1-c),se(i,u.b,"end"),h||(u.b?m():--u.group.r||a(u.group.c)),u=null;else if(e>=u.start){const t=e-u.start;c=u.a+u.d*n(t/u.duration),b(c,1-c)}return!(!u&&!h)}))}return{run(e){r(l)?(oe||(oe=Promise.resolve(),oe.then(()=>{oe=null})),oe).then(()=>{l=l(),b(e)}):b(e)},end(){m(),u=h=null}}}function me(e,t){const i={},o={},s={$$scope:1};let a=e.length;for(;a--;){const r=e[a],n=t[a];if(n){for(const e in r)e in n||(o[e]=1);for(const e in n)s[e]||(i[e]=n[e],s[e]=1);e[a]=n}else for(const e in r)s[e]=1}for(const e in o)e in i||(i[e]=void 0);return i}function de(e,t,i){const o=e.$$.props[t];void 0!==o&&(e.$$.bound[o]=i,i(e.$$.ctx[o]))}function fe(e){e&&e.c()}function ye(e,t,i){const{fragment:s,on_mount:n,on_destroy:l,after_update:c}=e.$$;s&&s.m(t,i),K(()=>{const t=n.map(o).filter(r);l?l.push(...t):a(t),e.$$.on_mount=[]}),c.forEach(K)}function ge(e,t){const i=e.$$;null!==i.fragment&&(a(i.on_destroy),i.fragment&&i.fragment.d(t),i.on_destroy=i.fragment=null,i.ctx=[])}function _e(e,t){-1===e.$$.dirty[0]&&(j.push(e),W||(W=!0,Q.then(te)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function be(t,i,o,r,n,l,c=[-1]){const u=M;U(t);const h=i.props||{},p=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:n,bound:s(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:s(),dirty:c,skip_bound:!1};let m=!1;if(p.ctx=o?o(t,h,(e,i,...o)=>{const s=o.length?o[0]:i;return p.ctx&&n(p.ctx[e],p.ctx[e]=s)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](s),m&&_e(t,e)),i}):[],p.update(),m=!0,a(p.before_update),p.fragment=!!r&&r(p.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);p.fragment&&p.fragment.l(e),e.forEach(v)}else p.fragment&&p.fragment.c();i.intro&&ce(t.$$.fragment),ye(t,i.target,i.anchor),te()}U(u)}class ve{$destroy(){ge(this,1),this.$destroy=e}$on(e,t){const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xe=[];function Le(t,i=e){let o;const s=[];function a(e){if(n(t,e)&&(t=e,o)){const e=!xe.length;for(let e=0;e<s.length;e+=1){const i=s[e];i[1](),xe.push(i,t)}if(e){for(let e=0;e<xe.length;e+=2)xe[e][0](xe[e+1]);xe.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(r,n=e){const l=[r,n];return s.push(l),1===s.length&&(o=i(a)||e),r(t),()=>{const e=s.indexOf(l);-1!==e&&s.splice(e,1),0===s.length&&(o(),o=null)}}}}const Ie=Le(!1),we=Le(!1),qe=Le(null),Fe=Le(null),Ee=Le(null),Te=Le(null),Ce=Le(null),ze=Le(null),Ae=Le(null),Pe={},Be=[{label:"Topogràfic",image:"https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/style/img/Terreny_hibrid_12228.jpg",url:"https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/style/styles/topo_infogeo2.json"},{label:"Ortoimatge",image:"https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/style/img/Orto_hibrida_12228.jpg",url:"https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/style/styles/hibrid_infogeo.json"}],Me=[{groupLabel:"Columnes estratigràfiques",groupId:"opt_columnes",items:[{label:"Neogen",value:"Neogen LINK,Neogen NO LINK"},{label:"Paleogen",value:"Paleogen LINK,Paleogen NO LINK"},{label:"Mesozoic",value:"Mesozoic NO LINK,Mesozoic LINK"},{label:"Paleozoic",value:"Paleozoic NO LINK,Paleozoic LINK"}]}],De=[{groupLabel:"Dipòsits quaternaris",groupId:"opt_quaternari",items:[{label:"Elements geomorfològics",value:"Elements geomorfològics"},{label:"Contactes",value:"Contactes del quaternari"},{label:"Unitats geològiques",value:"FILLq,PATT1q,LABELq/label"}]},{groupLabel:"Basament prequaternari",groupId:"opt_basament",items:[{label:"Contactes",value:"Contactes del basament"},{label:"Falles i plecs",value:"gt125mv10sh0ffl1r010_202101,gt125mv10sh0ffl1r010_202101_5513"},{label:"Unitats geològiques",value:"FILL,PATT1,PATT2,PATT3,PATT4,LABEL/label"}]},{groupLabel:"Terrenys antropitzats",groupId:"opt_antropics",items:[{label:"Terrenys modificats",value:"Terrenys modificats,Terrenys modificats/label"},{label:"Terrenys rebaixats",value:"Terrenys rebaixats,Terrenys rebaixats/label"},{label:"Terrenys terraplenats",value:"Terrenys terraplenats,Terrenys terraplenats/label"}]},{groupLabel:"Mesures d'estructures",groupId:"opt_mesures",items:[{label:"Estratificació",value:"Estratificació"},{label:"Foliació regional varisca",value:"Foliació regional varisca"},{label:"Lineació d'intersecció entre l'estratificació i la foliació regional varisca",value:"Lineació d'intersecció entre l'estratificació i la foliació regional varisca"},{label:"Sentit de paleocorrent",value:"Sentit de paleocorrent"}]},{groupLabel:"Talls geològics",groupId:"opt_elements",items:[{label:"Traces de talls geològics",value:"Traces de talls geològics"}]},{groupLabel:"Registre geològic",groupId:"opt_registre",items:[{label:"Esquemes relacions estratigràfiques",value:"Esquemes de relacions estratigràfiques,Esquemes de relacions estratigràfiques/label"},{label:"Columnes estratigràfiques",value:"Paleozoic NO LINK,Paleozoic LINK,Mesozoic NO LINK,Mesozoic LINK,Columnes del Paleozoic,Columnes del Mesozoic,Paleogen LINK,Paleogen NO LINK,Neogen LINK,Neogen NO LINK"}]}];"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Se(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ke(e,t){return e(t={exports:{}},t.exports),t.exports}var Ue=ke((function(e,t){e.exports=function(){var e,t,i;function o(o,s){if(e)if(t){var a="var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk);",r={};e(r),i=s(r),"undefined"!=typeof window&&(i.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else t=s;else e=s}return o(0,(function(e){function t(e,t){return e(t={exports:{}},t.exports),t.exports}var i=o;function o(e,t,i,o){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(o-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=o,this.p2x=i,this.p2y=o}o.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},o.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},o.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},o.prototype.solveCurveX=function(e,t){var i,o,s,a,r;for(void 0===t&&(t=1e-6),s=e,r=0;r<8;r++){if(a=this.sampleCurveX(s)-e,Math.abs(a)<t)return s;var n=this.sampleCurveDerivativeX(s);if(Math.abs(n)<1e-6)break;s-=a/n}if((s=e)<(i=0))return i;if(s>(o=1))return o;for(;i<o;){if(a=this.sampleCurveX(s),Math.abs(a-e)<t)return s;e>a?i=s:o=s,s=.5*(o-i)+i}return s},o.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))};var s=a;function a(e,t){this.x=e,this.y=t}a.prototype={clone:function(){return new a(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),o=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=o,this},_rotateAround:function(e,t){var i=Math.cos(e),o=Math.sin(e),s=t.y+o*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-o*(this.y-t.y),this.y=s,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},a.convert=function(e){return e instanceof a?e:Array.isArray(e)?new a(e[0],e[1]):e};var r="undefined"!=typeof self?self:{};function n(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!n(e[i],t[i]))return!1;return!0}return e===t}const l=Math.pow(2,53)-1,c=Math.PI/180,u=180/Math.PI;function h(e){return e*c}function p(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,i=t*e;return 4*(e<.5?i:3*(e-t)+i-.75)}function m(e,t,o,s){const a=new i(e,t,o,s);return function(e){return a.solve(e)}}const d=m(.25,.1,.25,1);function f(e,t,i){return Math.min(i,Math.max(t,e))}function y(e,t,i){const o=i-t,s=((e-t)%o+o)%o+t;return s===t?i:s}function g(e){const t=[];for(const i in e)t.push(e[i]);return t}function _(e,...t){for(const i of t)for(const t in i)e[t]=i[t];return e}let b=1;function v(){return b++}function x(){return function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function L(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function I(e,t){e.forEach(e=>{t[e]&&(t[e]=t[e].bind(t))})}function w(e,t){return-1!==e.indexOf(t,e.length-t.length)}function q(e,t,i){const o={};for(const s in e)o[s]=t.call(i||this,e[s],s,e);return o}function F(e,t,i){const o={};for(const s in e)t.call(i||this,e[s],s,e)&&(o[s]=e[s]);return o}function E(e){return Array.isArray(e)?e.map(E):"object"==typeof e&&e?q(e,E):e}const T={};function C(e){T[e]||("undefined"!=typeof console&&console.warn(e),T[e]=!0)}function z(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function A(e){let t=0;for(let i,o,s=0,a=e.length,r=a-1;s<a;r=s++)i=e[s],o=e[r],t+=(o.x-i.x)*(i.y+o.y);return t}function P(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function B(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(e,i,o,s)=>{const a=o||s;return t[i]=!a||a.toLowerCase(),""}),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let M=null;function D(e){if(null==M){const t=e.navigator?e.navigator.userAgent:null;M=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return M}function S(e){try{const t=r[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}const k=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),U=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,R=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;let O,N,$=!1;const V={now:k,setErrorState(){$=!0},setNow(e){V.now=()=>e},restoreNow(){V.now=k},frame(e){if($)return{cancel:()=>{}};const t=U(e);return{cancel:()=>R(t)}},getImageData(e,t=0){const i=r.document.createElement("canvas"),o=i.getContext("2d");if(!o)throw new Error("failed to create canvas 2d context");return i.width=e.width,i.height=e.height,o.drawImage(e,0,0,e.width,e.height),o.getImageData(-t,-t,e.width+2*t,e.height+2*t)},resolveURL:e=>(O||(O=r.document.createElement("a")),O.href=e,O.href),get devicePixelRatio(){return r.devicePixelRatio},get prefersReducedMotion(){return!!r.matchMedia&&(null==N&&(N=r.matchMedia("(prefers-reduced-motion: reduce)")),N.matches)}},G={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},j={supported:!1,testSupport:function(e){!X&&H&&(Q?W(e):Z=e)}};let Z,H,X=!1,Q=!1;function W(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,H),e.isContextLost())return;j.supported=!0}catch(e){}e.deleteTexture(t),X=!0}r.document&&(H=r.document.createElement("img"),H.onload=function(){Z&&W(Z),Z=null,Q=!0},H.onerror=function(){X=!0,Z=null},H.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const K="01";function J(e){return 0===e.indexOf("mapbox:")}const Y=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function ee(e){return Y.test(e)}const te=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function ie(e){const t=e.match(te);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function oe(e){const t=e.params.length?"?"+e.params.join("&"):"";return`${e.protocol}://${e.authority}${e.path}${t}`}function se(e){if(!e)return null;const t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(r.atob(t[1]).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(e){return null}}class ae{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const t=se(G.ACCESS_TOKEN);let i="";return i=t&&t.u?r.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(Number("0x"+t)))):G.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${i}`:"mapbox.eventData:"+i}fetchEventData(){const e=S("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{const e=r.localStorage.getItem(t);e&&(this.eventData=JSON.parse(e));const o=r.localStorage.getItem(i);o&&(this.anonId=o)}catch(e){C("Unable to read from LocalStorage")}}saveEventData(){const e=S("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{r.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&r.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){C("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,t,i,o){if(!G.EVENTS_URL)return;const s=ie(G.EVENTS_URL);s.params.push("access_token="+(o||G.ACCESS_TOKEN||""));const a={event:this.type,created:new Date(e).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"2.0.0",skuId:K,userId:this.anonId},r=t?_(a,t):a,n={url:oe(s),headers:{"Content-Type":"text/plain"},body:JSON.stringify([r])};this.pendingRequest=Fe(n,e=>{this.pendingRequest=null,i(e),this.saveEventData(),this.processRequests(o)})}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const re=new class extends ae{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){G.EVENTS_URL&&G.ACCESS_TOKEN&&Array.isArray(e)&&e.some(e=>J(e)||ee(e))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=se(G.ACCESS_TOKEN),i=t?t.u:G.ACCESS_TOKEN;let o=i!==this.eventData.tokenU;L(this.anonId)||(this.anonId=x(),o=!0);const s=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(s),i=(s-this.eventData.lastSuccess)/864e5;o=o||i>=1||i<-1||e.getDate()!==t.getDate()}else o=!0;if(!o)return this.processRequests();this.postEvent(s,{"enabled.telemetry":!1},e=>{e||(this.eventData.lastSuccess=s,this.eventData.tokenU=i)},e)}},ne=re.postTurnstileEvent.bind(re),le=new class extends ae{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,i,o){this.skuToken=t,this.errorCb=o,G.EVENTS_URL&&(i||G.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},i):this.errorCb(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:i}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=x()),this.postEvent(i,{skuToken:this.skuToken},e=>{e?this.errorCb(e):t&&(this.success[t]=!0)},e))}},ce=le.postMapLoadEvent.bind(le),ue=new class extends ae{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,i,o){if(!G.API_URL||!G.SESSION_PATH)return;const s=ie(G.API_URL+G.SESSION_PATH);s.params.push("sku="+(t||"")),s.params.push("access_token="+(o||G.ACCESS_TOKEN||""));const a={url:oe(s),headers:{"Content-Type":"text/plain"}};this.pendingRequest=Ee(a,e=>{this.pendingRequest=null,i(e),this.saveEventData(),this.processRequests(o)})}getSessionAPI(e,t,i,o){this.skuToken=t,this.errorCb=o,G.SESSION_PATH&&G.API_URL&&(i||G.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},i):this.errorCb(new Error("NO_ACCESS_TOKEN")))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:i}=this.queue.shift();t&&this.success[t]||this.getSession(i,this.skuToken,e=>{e?this.errorCb(e):t&&(this.success[t]=!0)},e)}},he=ue.getSessionAPI.bind(ue);let pe,me,de=500,fe=50;function ye(){r.caches&&!pe&&(pe=r.caches.open("mapbox-tiles"))}function ge(e){const t=e.indexOf("?");return t<0?e:e.slice(0,t)}let _e,be=1/0;function ve(){return null==_e&&(_e=r.OffscreenCanvas&&new r.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof r.createImageBitmap),_e}const xe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(xe);class Le extends Error{constructor(e,t,i){401===t&&ee(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=i}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Ie=P()?()=>self.worker&&self.worker.referrer:()=>("blob:"===r.location.protocol?r.parent:r).location.href,we=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(Ie())&&!/^\w+:/.test(i))){if(r.fetch&&r.Request&&r.AbortController&&r.Request.prototype.hasOwnProperty("signal"))return function(e,t){const i=new r.AbortController,o=new r.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:Ie(),signal:i.signal});let s=!1,a=!1;const n=(l=o.url).indexOf("sku=")>0&&ee(l);var l;"json"===e.type&&o.headers.set("Accept","application/json");const c=(i,s,l)=>{if(a)return;if(i&&"SecurityError"!==i.message&&C(i),s&&l)return u(s);const c=Date.now();r.fetch(o).then(i=>{if(i.ok){const e=n?i.clone():null;return u(i,e,c)}return t(new Le(i.statusText,i.status,e.url))}).catch(e=>{20!==e.code&&t(new Error(e.message))})},u=(i,n,l)=>{("arrayBuffer"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text()).then(e=>{a||(n&&l&&function(e,t,i){if(ye(),!pe)return;const o={status:t.status,statusText:t.statusText,headers:new r.Headers};t.headers.forEach((e,t)=>o.headers.set(t,e));const s=B(t.headers.get("Cache-Control")||"");s["no-store"]||(s["max-age"]&&o.headers.set("Expires",new Date(i+1e3*s["max-age"]).toUTCString()),new Date(o.headers.get("Expires")).getTime()-i<42e4||function(e,t){if(void 0===me)try{new Response(new ReadableStream),me=!0}catch(e){me=!1}me?t(e.body):e.blob().then(t)}(t,t=>{const i=new r.Response(t,o);ye(),pe&&pe.then(t=>t.put(ge(e.url),i)).catch(e=>C(e.message))}))}(o,n,l),s=!0,t(null,e,i.headers.get("Cache-Control"),i.headers.get("Expires")))}).catch(e=>{a||t(new Error(e.message))})};return n?function(e,t){if(ye(),!pe)return t(null);const i=ge(e.url);pe.then(e=>{e.match(i).then(o=>{const s=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),i=B(e.headers.get("Cache-Control")||"");return t>Date.now()&&!i["no-cache"]}(o);e.delete(i),s&&e.put(i,o.clone()),t(null,o,s)}).catch(t)}).catch(t)}(o,c):c(null,null),{cancel:()=>{a=!0,s||i.abort()}}}(e,t);if(P()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(e,t){const i=new r.XMLHttpRequest;i.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(i.responseType="arraybuffer");for(const t in e.headers)i.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===e.credentials,i.onerror=()=>{t(new Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let o=i.response;if("json"===e.type)try{o=JSON.parse(i.response)}catch(e){return t(e)}t(null,o,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else t(new Le(i.statusText,i.status,e.url))},i.send(e.body),{cancel:()=>i.abort()}}(e,t)},qe=function(e,t){return we(_(e,{type:"arrayBuffer"}),t)},Fe=function(e,t){return we(_(e,{method:"POST"}),t)},Ee=function(e,t){return we(_(e,{method:"GET"}),t)};function Te(e){const t=r.document.createElement("a");return t.href=e,t.protocol===r.document.location.protocol&&t.host===r.document.location.host}const Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ze,Ae;ze=[],Ae=0;const Pe=function(e,t){if(j.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Ae>=G.MAX_PARALLEL_IMAGE_REQUESTS){const i={requestParameters:e,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return ze.push(i),i}Ae++;let i=!1;const o=()=>{if(!i)for(i=!0,Ae--;ze.length&&Ae<G.MAX_PARALLEL_IMAGE_REQUESTS;){const e=ze.shift(),{requestParameters:t,callback:i,cancelled:o}=e;o||(e.cancel=Pe(t,i).cancel)}},s=qe(e,(e,i,s,a)=>{o(),e?t(e):i&&(ve()?function(e,t){const i=new r.Blob([new Uint8Array(e)],{type:"image/png"});r.createImageBitmap(i).then(e=>{t(null,e)}).catch(e=>{t(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(i,t):function(e,t,i,o){const s=new r.Image,a=r.URL;s.onload=()=>{t(null,s),a.revokeObjectURL(s.src),s.onload=null,s.src=Ce},s.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const n=new r.Blob([new Uint8Array(e)],{type:"image/png"});s.cacheControl=i,s.expires=o,s.src=e.byteLength?a.createObjectURL(n):Ce}(i,t,s,a))});return{cancel:()=>{s.cancel(),o()}}};function Be(e,t,i){i[e]&&-1!==i[e].indexOf(t)||(i[e]=i[e]||[],i[e].push(t))}function Me(e,t,i){if(i&&i[e]){const o=i[e].indexOf(t);-1!==o&&i[e].splice(o,1)}}class De{constructor(e,t={}){_(this,t),this.type=e}}class Se extends De{constructor(e,t={}){super("error",_({error:e},t))}}class ke{on(e,t){return this._listeners=this._listeners||{},Be(e,t,this._listeners),this}off(e,t){return Me(e,t,this._listeners),Me(e,t,this._oneTimeListeners),this}once(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},Be(e,t,this._oneTimeListeners),this}fire(e,t){"string"==typeof e&&(e=new De(e,t||{}));const i=e.type;if(this.listens(i)){e.target=this;const t=this._listeners&&this._listeners[i]?this._listeners[i].slice():[];for(const i of t)i.call(this,e);const o=this._oneTimeListeners&&this._oneTimeListeners[i]?this._oneTimeListeners[i].slice():[];for(const t of o)Me(i,t,this._oneTimeListeners),t.call(this,e);const s=this._eventedParent;s&&(_(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),s.fire(e))}else e instanceof Se&&console.error(e.error);return this}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var Ue={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Re{constructor(e,t,i,o){this.message=(e?e+": ":"")+i,o&&(this.identifier=o),null!=t&&t.__line__&&(this.line=t.__line__)}}function Oe(e){const t=e.value;return t?[new Re(e.key,t,"constants have been deprecated as of v8")]:[]}function Ne(e,...t){for(const i of t)for(const t in i)e[t]=i[t];return e}function $e(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ve(e){if(Array.isArray(e))return e.map(Ve);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const i in e)t[i]=Ve(e[i]);return t}return $e(e)}class Ge extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class je{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,i]of t)this.bindings[e]=i}concat(e){return new je(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const Ze={kind:"null"},He={kind:"number"},Xe={kind:"string"},Qe={kind:"boolean"},We={kind:"color"},Ke={kind:"object"},Je={kind:"value"},Ye={kind:"collator"},et={kind:"formatted"},tt={kind:"resolvedImage"};function it(e,t){return{kind:"array",itemType:e,N:t}}function ot(e){if("array"===e.kind){const t=ot(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const st=[Ze,He,Xe,Qe,We,et,Ke,it(Je),tt];function at(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!at(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of st)if(!at(e,t))return null}return`Expected ${ot(e)} but found ${ot(t)} instead.`}function rt(e,t){return t.some(t=>t.kind===e.kind)}function nt(e,t){return t.some(t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e)}var lt=t((function(e,t){var i={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(e){return(e=Math.round(e))<0?0:e>255?255:e}function s(e){return o("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function a(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function r(e,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}try{t.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in i)return i[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var l=n.indexOf("("),c=n.indexOf(")");if(-1!==l&&c+1===n.length){var u=n.substr(0,l),h=n.substr(l+1,c-(l+1)).split(","),p=1;switch(u){case"rgba":if(4!==h.length)return null;p=a(h.pop());case"rgb":return 3!==h.length?null:[s(h[0]),s(h[1]),s(h[2]),p];case"hsla":if(4!==h.length)return null;p=a(h.pop());case"hsl":if(3!==h.length)return null;var m=(parseFloat(h[0])%360+360)%360/360,d=a(h[1]),f=a(h[2]),y=f<=.5?f*(d+1):f+d-f*d,g=2*f-y;return[o(255*r(g,y,m+1/3)),o(255*r(g,y,m)),o(255*r(g,y,m-1/3)),p];default:return null}}return null}}catch(e){}})).parseCSSColor;class ct{constructor(e,t,i,o=1){this.r=e,this.g=t,this.b=i,this.a=o}static parse(e){if(!e)return;if(e instanceof ct)return e;if("string"!=typeof e)return;const t=lt(e);return t?new ct(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,i,o]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(i)},${o})`}toArray(){const{r:e,g:t,b:i,a:o}=this;return 0===o?[0,0,0,0]:[255*e/o,255*t/o,255*i/o,o]}}ct.black=new ct(0,0,0,1),ct.white=new ct(1,1,1,1),ct.transparent=new ct(0,0,0,0),ct.red=new ct(1,0,0,1),ct.blue=new ct(0,0,1,1);class ut{constructor(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ht{constructor(e,t,i,o,s){this.text=e,this.image=t,this.scale=i,this.fontStack=o,this.textColor=s}}class pt{constructor(e){this.sections=e}static fromString(e){return new pt([new ht(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof pt?e:pt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const i={};t.fontStack&&(i["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(i["font-scale"]=t.scale),t.textColor&&(i["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(i)}return e}}class mt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new mt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function dt(e,t,i,o){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===o||"number"==typeof o&&o>=0&&o<=1?null:`Invalid rgba value [${[e,t,i,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof o?[e,t,i,o]:[e,t,i]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ft(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof ct)return!0;if(e instanceof ut)return!0;if(e instanceof pt)return!0;if(e instanceof mt)return!0;if(Array.isArray(e)){for(const t of e)if(!ft(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!ft(e[t]))return!1;return!0}return!1}function yt(e){if(null===e)return Ze;if("string"==typeof e)return Xe;if("boolean"==typeof e)return Qe;if("number"==typeof e)return He;if(e instanceof ct)return We;if(e instanceof ut)return Ye;if(e instanceof pt)return et;if(e instanceof mt)return tt;if(Array.isArray(e)){const t=e.length;let i;for(const t of e){const e=yt(t);if(i){if(i===e)continue;i=Je;break}i=e}return it(i||Je,t)}return Ke}function gt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof ct||e instanceof pt||e instanceof mt?e.toString():JSON.stringify(e)}class _t{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!ft(e[1]))return t.error("invalid value");const i=e[1];let o=yt(i);const s=t.expectedType;return"array"!==o.kind||0!==o.N||!s||"array"!==s.kind||"number"==typeof s.N&&0!==s.N||(o=s),new _t(o,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof ct?["rgba"].concat(this.value.toArray()):this.value instanceof pt?this.value.serialize():this.value}}class bt{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const vt={string:Xe,number:He,boolean:Qe,object:Ke};class xt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i,o=1;const s=e[0];if("array"===s){let s,a;if(e.length>2){const i=e[1];if("string"!=typeof i||!(i in vt)||"object"===i)return t.error('The item type argument of "array" must be one of string, number, boolean',1);s=vt[i],o++}else s=Je;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=e[2],o++}i=it(s,a)}else i=vt[s];const a=[];for(;o<e.length;o++){const i=t.parse(e[o],o,Je);if(!i)return null;a.push(i)}return new xt(i,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(!at(this.type,yt(i)))return i;if(t===this.args.length-1)throw new bt(`Expected value to be of type ${ot(this.type)}, but found ${ot(yt(i))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const i=e.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){t.push(i.kind);const o=e.N;("number"==typeof o||this.args.length>1)&&t.push(o)}}return t.concat(this.args.map(e=>e.serialize()))}}class Lt{constructor(e){this.type=et,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&"object"==typeof i)return t.error("First argument must be an image or text section.");const o=[];let s=!1;for(let i=1;i<=e.length-1;++i){const a=e[i];if(s&&"object"==typeof a&&!Array.isArray(a)){s=!1;let e=null;if(a["font-scale"]&&(e=t.parse(a["font-scale"],1,He),!e))return null;let i=null;if(a["text-font"]&&(i=t.parse(a["text-font"],1,it(Xe)),!i))return null;let r=null;if(a["text-color"]&&(r=t.parse(a["text-color"],1,We),!r))return null;const n=o[o.length-1];n.scale=e,n.font=i,n.textColor=r}else{const a=t.parse(e[i],1,Je);if(!a)return null;const r=a.type.kind;if("string"!==r&&"value"!==r&&"null"!==r&&"resolvedImage"!==r)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,o.push({content:a,scale:null,font:null,textColor:null})}}return new Lt(o)}evaluate(e){return new pt(this.sections.map(t=>{const i=t.content.evaluate(e);return yt(i)===tt?new ht("",i,null,null,null):new ht(gt(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const i={};t.scale&&(i["font-scale"]=t.scale.serialize()),t.font&&(i["text-font"]=t.font.serialize()),t.textColor&&(i["text-color"]=t.textColor.serialize()),e.push(i)}return e}}class It{constructor(e){this.type=tt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const i=t.parse(e[1],1,Xe);return i?new It(i):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),i=mt.fromString(t);return i&&e.availableImages&&(i.available=e.availableImages.indexOf(t)>-1),i}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const wt={"to-boolean":Qe,"to-color":We,"to-number":He,"to-string":Xe};class qt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0];if(("to-boolean"===i||"to-string"===i)&&2!==e.length)return t.error("Expected one argument.");const o=wt[i],s=[];for(let i=1;i<e.length;i++){const o=t.parse(e[i],i,Je);if(!o)return null;s.push(o)}return new qt(o,s)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,i;for(const o of this.args){if(t=o.evaluate(e),i=null,t instanceof ct)return t;if("string"==typeof t){const i=e.parseColor(t);if(i)return i}else if(Array.isArray(t)&&(i=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:dt(t[0],t[1],t[2],t[3]),!i))return new ct(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new bt(i||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const i of this.args){if(t=i.evaluate(e),null===t)return 0;const o=Number(t);if(!isNaN(o))return o}throw new bt(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?pt.fromString(gt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?mt.fromString(gt(this.args[0].evaluate(e))):gt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Lt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new It(this.args[0]).serialize();const e=["to-"+this.type.kind];return this.eachChild(t=>{e.push(t.serialize())}),e}}const Ft=["Unknown","Point","LineString","Polygon"];class Et{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ft[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=ct.parse(e)),t}}class Tt{constructor(e,t,i,o){this.name=e,this.type=t,this._evaluate=i,this.args=o}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const i=e[0],o=Tt.definitions[i];if(!o)return t.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(o)?o[0]:o.type,a=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,r=a.filter(([t])=>!Array.isArray(t)||t.length===e.length-1);let n=null;for(const[o,a]of r){n=new Wt(t.registry,t.path,null,t.scope);const r=[];let l=!1;for(let t=1;t<e.length;t++){const i=e[t],s=Array.isArray(o)?o[t-1]:o.type,a=n.parse(i,1+r.length,s);if(!a){l=!0;break}r.push(a)}if(!l)if(Array.isArray(o)&&o.length!==r.length)n.error(`Expected ${o.length} arguments, but found ${r.length} instead.`);else{for(let e=0;e<r.length;e++){const t=Array.isArray(o)?o[e]:o.type,i=r[e];n.concat(e+1).checkSubtype(t,i.type)}if(0===n.errors.length)return new Tt(i,s,a,r)}}if(1===r.length)t.errors.push(...n.errors);else{const i=(r.length?r:a).map(([e])=>{return t=e,Array.isArray(t)?`(${t.map(ot).join(", ")})`:`(${ot(t.type)}...)`;var t}).join(" | "),o=[];for(let i=1;i<e.length;i++){const s=t.parse(e[i],1+o.length);if(!s)return null;o.push(ot(s.type))}t.error(`Expected arguments of type ${i}, but found (${o.join(", ")}) instead.`)}return null}static register(e,t){Tt.definitions=t;for(const i in t)e[i]=Tt}}class Ct{constructor(e,t,i){this.type=Ye,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const i=e[1];if("object"!=typeof i||Array.isArray(i))return t.error("Collator options argument must be an object.");const o=t.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,Qe);if(!o)return null;const s=t.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,Qe);if(!s)return null;let a=null;return i.locale&&(a=t.parse(i.locale,1,Xe),!a)?null:new Ct(o,s,a)}evaluate(e){return new ut(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}function zt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function At(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function Pt(e,t){const i=(180+e[0])/360,o=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,s=Math.pow(2,t.z);return[Math.round(i*s*8192),Math.round(o*s*8192)]}function Bt(e,t,i){const o=e[0]-t[0],s=e[1]-t[1],a=e[0]-i[0],r=e[1]-i[1];return o*r-a*s==0&&o*a<=0&&s*r<=0}function Mt(e,t){let i=!1;for(let r=0,n=t.length;r<n;r++){const n=t[r];for(let t=0,r=n.length;t<r-1;t++){if(Bt(e,n[t],n[t+1]))return!1;(s=n[t])[1]>(o=e)[1]!=(a=n[t+1])[1]>o[1]&&o[0]<(a[0]-s[0])*(o[1]-s[1])/(a[1]-s[1])+s[0]&&(i=!i)}}var o,s,a;return i}function Dt(e,t){for(let i=0;i<t.length;i++)if(Mt(e,t[i]))return!0;return!1}function St(e,t,i,o){const s=o[0]-i[0],a=o[1]-i[1],r=(e[0]-i[0])*a-s*(e[1]-i[1]),n=(t[0]-i[0])*a-s*(t[1]-i[1]);return r>0&&n<0||r<0&&n>0}function kt(e,t,i){for(const c of i)for(let i=0;i<c.length-1;++i)if(0!=(n=[(r=c[i+1])[0]-(a=c[i])[0],r[1]-a[1]])[0]*(l=[(s=t)[0]-(o=e)[0],s[1]-o[1]])[1]-n[1]*l[0]&&St(o,s,a,r)&&St(a,r,o,s))return!0;var o,s,a,r,n,l;return!1}function Ut(e,t){for(let i=0;i<e.length;++i)if(!Mt(e[i],t))return!1;for(let i=0;i<e.length-1;++i)if(kt(e[i],e[i+1],t))return!1;return!0}function Rt(e,t){for(let i=0;i<t.length;i++)if(Ut(e,t[i]))return!0;return!1}function Ot(e,t,i){const o=[];for(let s=0;s<e.length;s++){const a=[];for(let o=0;o<e[s].length;o++){const r=Pt(e[s][o],i);zt(t,r),a.push(r)}o.push(a)}return o}function Nt(e,t,i){const o=[];for(let s=0;s<e.length;s++){const a=Ot(e[s],t,i);o.push(a)}return o}function $t(e,t,i,o){if(e[0]<i[0]||e[0]>i[2]){const t=.5*o;let s=e[0]-i[0]>t?-o:i[0]-e[0]>t?o:0;0===s&&(s=e[0]-i[2]>t?-o:i[2]-e[0]>t?o:0),e[0]+=s}zt(t,e)}function Vt(e,t,i,o){const s=8192*Math.pow(2,o.z),a=[8192*o.x,8192*o.y],r=[];for(const o of e)for(const e of o){const o=[e.x+a[0],e.y+a[1]];$t(o,t,i,s),r.push(o)}return r}function Gt(e,t,i,o){const s=8192*Math.pow(2,o.z),a=[8192*o.x,8192*o.y],r=[];for(const i of e){const e=[];for(const o of i){const i=[o.x+a[0],o.y+a[1]];zt(t,i),e.push(i)}r.push(e)}if(t[2]-t[0]<=s/2){(n=t)[0]=n[1]=1/0,n[2]=n[3]=-1/0;for(const e of r)for(const o of e)$t(o,t,i,s)}var n;return r}class jt{constructor(e,t){this.type=Qe,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(ft(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const i=t.features[e].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new jt(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new jt(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new jt(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const i=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],s=e.canonicalID();if("Polygon"===t.type){const a=Ot(t.coordinates,o,s),r=Vt(e.geometry(),i,o,s);if(!At(i,o))return!1;for(const e of r)if(!Mt(e,a))return!1}if("MultiPolygon"===t.type){const a=Nt(t.coordinates,o,s),r=Vt(e.geometry(),i,o,s);if(!At(i,o))return!1;for(const e of r)if(!Dt(e,a))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const i=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],s=e.canonicalID();if("Polygon"===t.type){const a=Ot(t.coordinates,o,s),r=Gt(e.geometry(),i,o,s);if(!At(i,o))return!1;for(const e of r)if(!Ut(e,a))return!1}if("MultiPolygon"===t.type){const a=Nt(t.coordinates,o,s),r=Gt(e.geometry(),i,o,s);if(!At(i,o))return!1;for(const e of r)if(!Rt(e,a))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}function Zt(e){if(e instanceof Tt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof jt)return!1;let t=!0;return e.eachChild(e=>{t&&!Zt(e)&&(t=!1)}),t}function Ht(e){if(e instanceof Tt&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild(e=>{t&&!Ht(e)&&(t=!1)}),t}function Xt(e,t){if(e instanceof Tt&&t.indexOf(e.name)>=0)return!1;let i=!0;return e.eachChild(e=>{i&&!Xt(e,t)&&(i=!1)}),i}class Qt{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new Qt(i,t.scope.get(i)):t.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Wt{constructor(e,t=[],i,o=new je,s=[]){this.registry=e,this.path=t,this.key=t.map(e=>`[${e}]`).join(""),this.scope=o,this.errors=s,this.expectedType=i}parse(e,t,i,o,s={}){return t?this.concat(t,i,o)._parse(e,s):this._parse(e,s)}_parse(e,t){function i(e,t,i){return"assert"===i?new xt(t,[e]):"coerce"===i?new qt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const o=e[0];if("string"!=typeof o)return this.error(`Expression name must be a string, but found ${typeof o} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[o];if(s){let o=s.parse(e,this);if(!o)return null;if(this.expectedType){const e=this.expectedType,s=o.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==s.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(e,s))return null}else o=i(o,e,t.typeAnnotation||"coerce");else o=i(o,e,t.typeAnnotation||"assert")}if(!(o instanceof _t)&&"resolvedImage"!==o.type.kind&&function e(t){if(t instanceof Qt)return e(t.boundExpression);if(t instanceof Tt&&"error"===t.name)return!1;if(t instanceof Ct)return!1;if(t instanceof jt)return!1;const i=t instanceof qt||t instanceof xt;let o=!0;return t.eachChild(t=>{o=i?o&&e(t):o&&t instanceof _t}),!!o&&Zt(t)&&Xt(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script"])}(o)){const t=new Et;try{o=new _t(o.type,o.evaluate(t))}catch(e){return this.error(e.message),null}}return o}return this.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,i){const o="number"==typeof e?this.path.concat(e):this.path,s=i?this.scope.concat(i):this.scope;return new Wt(this.registry,o,t||null,s,this.errors)}error(e,...t){const i=`${this.key}${t.map(e=>`[${e}]`).join("")}`;this.errors.push(new Ge(i,e))}checkSubtype(e,t){const i=at(e,t);return i&&this.error(i),i}}function Kt(e,t){const i=e.length-1;let o,s,a=0,r=i,n=0;for(;a<=r;)if(n=Math.floor((a+r)/2),o=e[n],s=e[n+1],o<=t){if(n===i||t<s)return n;a=n+1}else{if(!(o>t))throw new bt("Input is not a number.");r=n-1}return 0}class Jt{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of i)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,He);if(!i)return null;const o=[];let s=null;t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let i=1;i<e.length;i+=2){const a=1===i?-1/0:e[i],r=e[i+1],n=i,l=i+1;if("number"!=typeof a)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',n);if(o.length&&o[o.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',n);const c=t.parse(r,l,s);if(!c)return null;s=s||c.type,o.push([a,c])}return new Jt(s,i,o)}evaluate(e){const t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);const o=this.input.evaluate(e);if(o<=t[0])return i[0].evaluate(e);const s=t.length;return o>=t[s-1]?i[s-1].evaluate(e):i[Kt(t,o)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}function Yt(e,t,i){return e*(1-i)+t*i}var ei=Object.freeze({__proto__:null,number:Yt,color:function(e,t,i){return new ct(Yt(e.r,t.r,i),Yt(e.g,t.g,i),Yt(e.b,t.b,i),Yt(e.a,t.a,i))},array:function(e,t,i){return e.map((e,o)=>Yt(e,t[o],i))}});const ti=6/29*3*(6/29),ii=Math.PI/180,oi=180/Math.PI;function si(e){return e>.008856451679035631?Math.pow(e,1/3):e/ti+4/29}function ai(e){return e>6/29?e*e*e:ti*(e-4/29)}function ri(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ni(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function li(e){const t=ni(e.r),i=ni(e.g),o=ni(e.b),s=si((.4124564*t+.3575761*i+.1804375*o)/.95047),a=si((.2126729*t+.7151522*i+.072175*o)/1);return{l:116*a-16,a:500*(s-a),b:200*(a-si((.0193339*t+.119192*i+.9503041*o)/1.08883)),alpha:e.a}}function ci(e){let t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,o=isNaN(e.b)?t:t-e.b/200;return t=1*ai(t),i=.95047*ai(i),o=1.08883*ai(o),new ct(ri(3.2404542*i-1.5371385*t-.4985314*o),ri(-.969266*i+1.8760108*t+.041556*o),ri(.0556434*i-.2040259*t+1.0572252*o),e.alpha)}function ui(e,t,i){const o=t-e;return e+i*(o>180||o<-180?o-360*Math.round(o/360):o)}const hi={forward:li,reverse:ci,interpolate:function(e,t,i){return{l:Yt(e.l,t.l,i),a:Yt(e.a,t.a,i),b:Yt(e.b,t.b,i),alpha:Yt(e.alpha,t.alpha,i)}}},pi={forward:function(e){const{l:t,a:i,b:o}=li(e),s=Math.atan2(o,i)*oi;return{h:s<0?s+360:s,c:Math.sqrt(i*i+o*o),l:t,alpha:e.a}},reverse:function(e){const t=e.h*ii,i=e.c;return ci({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:ui(e.h,t.h,i),c:Yt(e.c,t.c,i),l:Yt(e.l,t.l,i),alpha:Yt(e.alpha,t.alpha,i)}}};var mi=Object.freeze({__proto__:null,lab:hi,hcl:pi});class di{constructor(e,t,i,o,s){this.type=e,this.operator=t,this.interpolation=i,this.input=o,this.labels=[],this.outputs=[];for(const[e,t]of s)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,t,o,s){let a=0;if("exponential"===e.name)a=fi(t,e.base,o,s);else if("linear"===e.name)a=fi(t,1,o,s);else if("cubic-bezier"===e.name){const r=e.controlPoints;a=new i(r[0],r[1],r[2],r[3]).solve(fi(t,1,o,s))}return a}static parse(e,t){let[i,o,s,...a]=e;if(!Array.isArray(o)||0===o.length)return t.error("Expected an interpolation type expression.",1);if("linear"===o[0])o={name:"linear"};else if("exponential"===o[0]){const e=o[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);o={name:"exponential",base:e}}else{if("cubic-bezier"!==o[0])return t.error("Unknown interpolation type "+String(o[0]),1,0);{const e=o.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||e>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);o={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,He),!s)return null;const r=[];let n=null;"interpolate-hcl"===i||"interpolate-lab"===i?n=We:t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(let e=0;e<a.length;e+=2){const i=a[e],o=a[e+1],s=e+3,l=e+4;if("number"!=typeof i)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=i)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(o,l,n);if(!c)return null;n=n||c.type,r.push([i,c])}return"number"===n.kind||"color"===n.kind||"array"===n.kind&&"number"===n.itemType.kind&&"number"==typeof n.N?new di(n,i,o,s,r):t.error(`Type ${ot(n)} is not interpolatable.`)}evaluate(e){const t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);const o=this.input.evaluate(e);if(o<=t[0])return i[0].evaluate(e);const s=t.length;if(o>=t[s-1])return i[s-1].evaluate(e);const a=Kt(t,o),r=di.interpolationFactor(this.interpolation,o,t[a],t[a+1]),n=i[a].evaluate(e),l=i[a+1].evaluate(e);return"interpolate"===this.operator?ei[this.type.kind.toLowerCase()](n,l,r):"interpolate-hcl"===this.operator?pi.reverse(pi.interpolate(pi.forward(n),pi.forward(l),r)):hi.reverse(hi.interpolate(hi.forward(n),hi.forward(l),r))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t}}function fi(e,t,i,o){const s=o-i,a=e-i;return 0===s?0:1===t?a/s:(Math.pow(t,a)-1)/(Math.pow(t,s)-1)}class yi{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let i=null;const o=t.expectedType;o&&"value"!==o.kind&&(i=o);const s=[];for(const o of e.slice(1)){const e=t.parse(o,1+s.length,i,void 0,{typeAnnotation:"omit"});if(!e)return null;i=i||e.type,s.push(e)}const a=o&&s.some(e=>at(o,e.type));return new yi(a?Je:i,s)}evaluate(e){let t,i=null,o=0;for(const s of this.args)if(o++,i=s.evaluate(e),i&&i instanceof mt&&!i.available&&(t||(t=i.name),i=null,o===this.args.length&&(i=t)),null!==i)break;return i}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}class gi{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const i=[];for(let o=1;o<e.length-1;o+=2){const s=e[o];if("string"!=typeof s)return t.error(`Expected string, but found ${typeof s} instead.`,o);if(/[^a-zA-Z0-9_]/.test(s))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);const a=t.parse(e[o+1],o+1);if(!a)return null;i.push([s,a])}const o=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return o?new gi(i,o):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,i]of this.bindings)e.push(t,i.serialize());return e.push(this.result.serialize()),e}}class _i{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,He),o=t.parse(e[2],2,it(t.expectedType||Je));return i&&o?new _i(o.type.itemType,i,o):null}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new bt(`Array index out of bounds: ${t} < 0.`);if(t>=i.length)throw new bt(`Array index out of bounds: ${t} > ${i.length-1}.`);if(t!==Math.floor(t))throw new bt(`Array index must be an integer, but found ${t} instead.`);return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class bi{constructor(e,t){this.type=Qe,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Je),o=t.parse(e[2],2,Je);return i&&o?rt(i.type,[Qe,Xe,He,Ze,Je])?new bi(i,o):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${ot(i.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!i)return!1;if(!nt(t,["boolean","string","number","null"]))throw new bt(`Expected first argument to be of type boolean, string, number or null, but found ${ot(yt(t))} instead.`);if(!nt(i,["string","array"]))throw new bt(`Expected second argument to be of type array or string, but found ${ot(yt(i))} instead.`);return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class vi{constructor(e,t,i){this.type=He,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Je),o=t.parse(e[2],2,Je);if(!i||!o)return null;if(!rt(i.type,[Qe,Xe,He,Ze,Je]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${ot(i.type)} instead`);if(4===e.length){const s=t.parse(e[3],3,He);return s?new vi(i,o,s):null}return new vi(i,o)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!nt(t,["boolean","string","number","null"]))throw new bt(`Expected first argument to be of type boolean, string, number or null, but found ${ot(yt(t))} instead.`);if(!nt(i,["string","array"]))throw new bt(`Expected second argument to be of type array or string, but found ${ot(yt(i))} instead.`);if(this.fromIndex){const o=this.fromIndex.evaluate(e);return i.indexOf(t,o)}return i.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class xi{constructor(e,t,i,o,s,a){this.inputType=e,this.type=t,this.input=i,this.cases=o,this.outputs=s,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let i,o;t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType);const s={},a=[];for(let r=2;r<e.length-1;r+=2){let n=e[r];const l=e[r+1];Array.isArray(n)||(n=[n]);const c=t.concat(r);if(0===n.length)return c.error("Expected at least one branch label.");for(const e of n){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,yt(e)))return null}else i=yt(e);if(void 0!==s[String(e)])return c.error("Branch labels must be unique.");s[String(e)]=a.length}const u=t.parse(l,r,o);if(!u)return null;o=o||u.type,a.push(u)}const r=t.parse(e[1],1,Je);if(!r)return null;const n=t.parse(e[e.length-1],e.length-1,o);return n?"value"!==r.type.kind&&t.concat(1).checkSubtype(i,r.type)?null:new xi(i,o,r,s,a,n):null}evaluate(e){const t=this.input.evaluate(e);return(yt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),i=[],o={};for(const e of t){const t=o[this.cases[e]];void 0===t?(o[this.cases[e]]=i.length,i.push([this.cases[e],[e]])):i[t][1].push(e)}const s=e=>"number"===this.inputType.kind?Number(e):e;for(const[t,o]of i)e.push(1===o.length?s(o[0]):o.map(s)),e.push(this.outputs[t].serialize());return e.push(this.otherwise.serialize()),e}}class Li{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);const o=[];for(let s=1;s<e.length-1;s+=2){const a=t.parse(e[s],s,Qe);if(!a)return null;const r=t.parse(e[s+1],s+1,i);if(!r)return null;o.push([a,r]),i=i||r.type}const s=t.parse(e[e.length-1],e.length-1,i);return s?new Li(i,o,s):null}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}class Ii{constructor(e,t,i,o){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=o}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const i=t.parse(e[1],1,Je),o=t.parse(e[2],2,He);if(!i||!o)return null;if(!rt(i.type,[it(Je),Xe,Je]))return t.error(`Expected first argument to be of type array or string, but found ${ot(i.type)} instead`);if(4===e.length){const s=t.parse(e[3],3,He);return s?new Ii(i.type,i,o,s):null}return new Ii(i.type,i,o)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!nt(t,["string","array"]))throw new bt(`Expected first argument to be of type array or string, but found ${ot(yt(t))} instead.`);if(this.endIndex){const o=this.endIndex.evaluate(e);return t.slice(i,o)}return t.slice(i)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function wi(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function qi(e,t,i,o){return 0===o.compare(t,i)}function Fi(e,t,i){const o="=="!==e&&"!="!==e;return class s{constructor(e,t,i){this.type=Qe,this.lhs=e,this.rhs=t,this.collator=i,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const i=e[0];let a=t.parse(e[1],1,Je);if(!a)return null;if(!wi(i,a.type))return t.concat(1).error(`"${i}" comparisons are not supported for type '${ot(a.type)}'.`);let r=t.parse(e[2],2,Je);if(!r)return null;if(!wi(i,r.type))return t.concat(2).error(`"${i}" comparisons are not supported for type '${ot(r.type)}'.`);if(a.type.kind!==r.type.kind&&"value"!==a.type.kind&&"value"!==r.type.kind)return t.error(`Cannot compare types '${ot(a.type)}' and '${ot(r.type)}'.`);o&&("value"===a.type.kind&&"value"!==r.type.kind?a=new xt(r.type,[a]):"value"!==a.type.kind&&"value"===r.type.kind&&(r=new xt(a.type,[r])));let n=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==r.type.kind&&"value"!==a.type.kind&&"value"!==r.type.kind)return t.error("Cannot use collator to compare non-string types.");if(n=t.parse(e[3],3,Ye),!n)return null}return new s(a,r,n)}evaluate(s){const a=this.lhs.evaluate(s),r=this.rhs.evaluate(s);if(o&&this.hasUntypedArgument){const t=yt(a),i=yt(r);if(t.kind!==i.kind||"string"!==t.kind&&"number"!==t.kind)throw new bt(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${i.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const e=yt(a),i=yt(r);if("string"!==e.kind||"string"!==i.kind)return t(s,a,r)}return this.collator?i(s,a,r,this.collator.evaluate(s)):t(s,a,r)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild(e=>{t.push(e.serialize())}),t}}}const Ei=Fi("==",(function(e,t,i){return t===i}),qi),Ti=Fi("!=",(function(e,t,i){return t!==i}),(function(e,t,i,o){return!qi(0,t,i,o)})),Ci=Fi("<",(function(e,t,i){return t<i}),(function(e,t,i,o){return o.compare(t,i)<0})),zi=Fi(">",(function(e,t,i){return t>i}),(function(e,t,i,o){return o.compare(t,i)>0})),Ai=Fi("<=",(function(e,t,i){return t<=i}),(function(e,t,i,o){return o.compare(t,i)<=0}));class Pi{constructor(e,t,i,o,s){this.type=Xe,this.number=e,this.locale=t,this.currency=i,this.minFractionDigits=o,this.maxFractionDigits=s}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const i=t.parse(e[1],1,He);if(!i)return null;const o=e[2];if("object"!=typeof o||Array.isArray(o))return t.error("NumberFormat options argument must be an object.");let s=null;if(o.locale&&(s=t.parse(o.locale,1,Xe),!s))return null;let a=null;if(o.currency&&(a=t.parse(o.currency,1,Xe),!a))return null;let r=null;if(o["min-fraction-digits"]&&(r=t.parse(o["min-fraction-digits"],1,He),!r))return null;let n=null;return o["max-fraction-digits"]&&(n=t.parse(o["max-fraction-digits"],1,He),!n)?null:new Pi(i,s,a,r,n)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Bi{constructor(e){this.type=He,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const i=t.parse(e[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?t.error(`Expected argument of type string or array, but found ${ot(i.type)} instead.`):new Bi(i):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new bt(`Expected value to be of type string or array, but found ${ot(yt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}const Mi={"==":Ei,"!=":Ti,">":zi,"<":Ci,">=":Fi(">=",(function(e,t,i){return t>=i}),(function(e,t,i,o){return o.compare(t,i)>=0})),"<=":Ai,array:xt,at:_i,boolean:xt,case:Li,coalesce:yi,collator:Ct,format:Lt,image:It,in:bi,"index-of":vi,interpolate:di,"interpolate-hcl":di,"interpolate-lab":di,length:Bi,let:gi,literal:_t,match:xi,number:xt,"number-format":Pi,object:xt,slice:Ii,step:Jt,string:xt,"to-boolean":qt,"to-color":qt,"to-number":qt,"to-string":qt,var:Qt,within:jt};function Di(e,[t,i,o,s]){t=t.evaluate(e),i=i.evaluate(e),o=o.evaluate(e);const a=s?s.evaluate(e):1,r=dt(t,i,o,a);if(r)throw new bt(r);return new ct(t/255*a,i/255*a,o/255*a,a)}function Si(e,t){return e in t}function ki(e,t){const i=t[e];return void 0===i?null:i}function Ui(e){return{type:e}}function Ri(e){return{result:"success",value:e}}function Oi(e){return{result:"error",value:e}}function Ni(e){return"data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]}function $i(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Vi(e){return!!e.expression&&e.expression.interpolated}function Gi(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function ji(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Zi(e){return e}function Hi(e,t,i){return void 0!==e?e:void 0!==t?t:void 0!==i?i:void 0}function Xi(e,t,i,o,s){return Hi(typeof i===s?o[i]:void 0,e.default,t.default)}function Qi(e,t,i){if("number"!==Gi(i))return Hi(e.default,t.default);const o=e.stops.length;if(1===o)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[o-1][0])return e.stops[o-1][1];const s=Kt(e.stops.map(e=>e[0]),i);return e.stops[s][1]}function Wi(e,t,i){const o=void 0!==e.base?e.base:1;if("number"!==Gi(i))return Hi(e.default,t.default);const s=e.stops.length;if(1===s)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[s-1][0])return e.stops[s-1][1];const a=Kt(e.stops.map(e=>e[0]),i),r=function(e,t,i,o){const s=o-i,a=e-i;return 0===s?0:1===t?a/s:(Math.pow(t,a)-1)/(Math.pow(t,s)-1)}(i,o,e.stops[a][0],e.stops[a+1][0]),n=e.stops[a][1],l=e.stops[a+1][1];let c=ei[t.type]||Zi;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=mi[e.colorSpace];c=(e,i)=>t.reverse(t.interpolate(t.forward(e),t.forward(i),r))}return"function"==typeof n.evaluate?{evaluate(...e){const t=n.evaluate.apply(void 0,e),i=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==i)return c(t,i,r)}}:c(n,l,r)}function Ki(e,t,i){return"color"===t.type?i=ct.parse(i):"formatted"===t.type?i=pt.fromString(i.toString()):"resolvedImage"===t.type?i=mt.fromString(i.toString()):Gi(i)===t.type||"enum"===t.type&&t.values[i]||(i=void 0),Hi(i,e.default,t.default)}Tt.register(Mi,{error:[{kind:"error"},[Xe],(e,[t])=>{throw new bt(t.evaluate(e))}],typeof:[Xe,[Je],(e,[t])=>ot(yt(t.evaluate(e)))],"to-rgba":[it(He,4),[We],(e,[t])=>t.evaluate(e).toArray()],rgb:[We,[He,He,He],Di],rgba:[We,[He,He,He,He],Di],has:{type:Qe,overloads:[[[Xe],(e,[t])=>Si(t.evaluate(e),e.properties())],[[Xe,Ke],(e,[t,i])=>Si(t.evaluate(e),i.evaluate(e))]]},get:{type:Je,overloads:[[[Xe],(e,[t])=>ki(t.evaluate(e),e.properties())],[[Xe,Ke],(e,[t,i])=>ki(t.evaluate(e),i.evaluate(e))]]},"feature-state":[Je,[Xe],(e,[t])=>ki(t.evaluate(e),e.featureState||{})],properties:[Ke,[],e=>e.properties()],"geometry-type":[Xe,[],e=>e.geometryType()],id:[Je,[],e=>e.id()],zoom:[He,[],e=>e.globals.zoom],"heatmap-density":[He,[],e=>e.globals.heatmapDensity||0],"line-progress":[He,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[He,[],e=>e.globals.skyRadialProgress||0],accumulated:[Je,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[He,Ui(He),(e,t)=>{let i=0;for(const o of t)i+=o.evaluate(e);return i}],"*":[He,Ui(He),(e,t)=>{let i=1;for(const o of t)i*=o.evaluate(e);return i}],"-":{type:He,overloads:[[[He,He],(e,[t,i])=>t.evaluate(e)-i.evaluate(e)],[[He],(e,[t])=>-t.evaluate(e)]]},"/":[He,[He,He],(e,[t,i])=>t.evaluate(e)/i.evaluate(e)],"%":[He,[He,He],(e,[t,i])=>t.evaluate(e)%i.evaluate(e)],ln2:[He,[],()=>Math.LN2],pi:[He,[],()=>Math.PI],e:[He,[],()=>Math.E],"^":[He,[He,He],(e,[t,i])=>Math.pow(t.evaluate(e),i.evaluate(e))],sqrt:[He,[He],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[He,[He],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[He,[He],(e,[t])=>Math.log(t.evaluate(e))],log2:[He,[He],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[He,[He],(e,[t])=>Math.sin(t.evaluate(e))],cos:[He,[He],(e,[t])=>Math.cos(t.evaluate(e))],tan:[He,[He],(e,[t])=>Math.tan(t.evaluate(e))],asin:[He,[He],(e,[t])=>Math.asin(t.evaluate(e))],acos:[He,[He],(e,[t])=>Math.acos(t.evaluate(e))],atan:[He,[He],(e,[t])=>Math.atan(t.evaluate(e))],min:[He,Ui(He),(e,t)=>Math.min(...t.map(t=>t.evaluate(e)))],max:[He,Ui(He),(e,t)=>Math.max(...t.map(t=>t.evaluate(e)))],abs:[He,[He],(e,[t])=>Math.abs(t.evaluate(e))],round:[He,[He],(e,[t])=>{const i=t.evaluate(e);return i<0?-Math.round(-i):Math.round(i)}],floor:[He,[He],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[He,[He],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Qe,[Xe,Je],(e,[t,i])=>e.properties()[t.value]===i.value],"filter-id-==":[Qe,[Je],(e,[t])=>e.id()===t.value],"filter-type-==":[Qe,[Xe],(e,[t])=>e.geometryType()===t.value],"filter-<":[Qe,[Xe,Je],(e,[t,i])=>{const o=e.properties()[t.value],s=i.value;return typeof o==typeof s&&o<s}],"filter-id-<":[Qe,[Je],(e,[t])=>{const i=e.id(),o=t.value;return typeof i==typeof o&&i<o}],"filter->":[Qe,[Xe,Je],(e,[t,i])=>{const o=e.properties()[t.value],s=i.value;return typeof o==typeof s&&o>s}],"filter-id->":[Qe,[Je],(e,[t])=>{const i=e.id(),o=t.value;return typeof i==typeof o&&i>o}],"filter-<=":[Qe,[Xe,Je],(e,[t,i])=>{const o=e.properties()[t.value],s=i.value;return typeof o==typeof s&&o<=s}],"filter-id-<=":[Qe,[Je],(e,[t])=>{const i=e.id(),o=t.value;return typeof i==typeof o&&i<=o}],"filter->=":[Qe,[Xe,Je],(e,[t,i])=>{const o=e.properties()[t.value],s=i.value;return typeof o==typeof s&&o>=s}],"filter-id->=":[Qe,[Je],(e,[t])=>{const i=e.id(),o=t.value;return typeof i==typeof o&&i>=o}],"filter-has":[Qe,[Je],(e,[t])=>t.value in e.properties()],"filter-has-id":[Qe,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[Qe,[it(Xe)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Qe,[it(Je)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Qe,[Xe,it(Je)],(e,[t,i])=>i.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Qe,[Xe,it(Je)],(e,[t,i])=>function(e,t,i,o){for(;i<=o;){const s=i+o>>1;if(t[s]===e)return!0;t[s]>e?o=s-1:i=s+1}return!1}(e.properties()[t.value],i.value,0,i.value.length-1)],all:{type:Qe,overloads:[[[Qe,Qe],(e,[t,i])=>t.evaluate(e)&&i.evaluate(e)],[Ui(Qe),(e,t)=>{for(const i of t)if(!i.evaluate(e))return!1;return!0}]]},any:{type:Qe,overloads:[[[Qe,Qe],(e,[t,i])=>t.evaluate(e)||i.evaluate(e)],[Ui(Qe),(e,t)=>{for(const i of t)if(i.evaluate(e))return!0;return!1}]]},"!":[Qe,[Qe],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Qe,[Xe],(e,[t])=>{const i=e.globals&&e.globals.isSupportedScript;return!i||i(t.evaluate(e))}],upcase:[Xe,[Xe],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[Xe,[Xe],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[Xe,Ui(Je),(e,t)=>t.map(t=>gt(t.evaluate(e))).join("")],"resolved-locale":[Xe,[Ye],(e,[t])=>t.evaluate(e).resolvedLocale()]});class Ji{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Et,this._defaultValue=t?function(e){return"color"===e.type&&ji(e.default)?new ct(0,0,0,0):"color"===e.type?ct.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,i,o,s,a){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=o,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,o,s,a){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=o,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=a||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new bt(`Expected value to be one of ${Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function Yi(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Mi}function eo(e,t){const i=new Wt(Mi,[],t?function(e){const t={color:We,string:Xe,number:He,enum:Xe,boolean:Qe,formatted:et,resolvedImage:tt};return"array"===e.type?it(t[e.value]||Je,e.length):t[e.type]}(t):void 0),o=i.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return o?Ri(new Ji(o,t)):Oi(i.errors)}class to{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!Ht(t.expression)}evaluateWithoutErrorHandling(e,t,i,o,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,o,s,a)}evaluate(e,t,i,o,s,a){return this._styleExpression.evaluate(e,t,i,o,s,a)}}class io{constructor(e,t,i,o){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent="camera"!==e&&!Ht(t.expression),this.interpolationType=o}evaluateWithoutErrorHandling(e,t,i,o,s,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,o,s,a)}evaluate(e,t,i,o,s,a){return this._styleExpression.evaluate(e,t,i,o,s,a)}interpolationFactor(e,t,i){return this.interpolationType?di.interpolationFactor(this.interpolationType,e,t,i):0}}function oo(e,t){if("error"===(e=eo(e,t)).result)return e;const i=e.value.expression,o=Zt(i);if(!o&&!Ni(t))return Oi([new Ge("","data expressions not supported")]);const s=Xt(i,["zoom"]);if(!s&&!$i(t))return Oi([new Ge("","zoom expressions not supported")]);const a=function e(t){let i=null;if(t instanceof gi)i=e(t.result);else if(t instanceof yi){for(const o of t.args)if(i=e(o),i)break}else(t instanceof Jt||t instanceof di)&&t.input instanceof Tt&&"zoom"===t.input.name&&(i=t);return i instanceof Ge||t.eachChild(t=>{const o=e(t);o instanceof Ge?i=o:!i&&o?i=new Ge("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&o&&i!==o&&(i=new Ge("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}(i);return a||s?a instanceof Ge?Oi([a]):a instanceof di&&!Vi(t)?Oi([new Ge("",'"interpolate" expressions cannot be used with this property')]):Ri(a?new io(o?"camera":"composite",e.value,a.labels,a instanceof di?a.interpolation:void 0):new to(o?"constant":"source",e.value)):Oi([new Ge("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class so{constructor(e,t){this._parameters=e,this._specification=t,Ne(this,function e(t,i){const o="color"===i.type,s=t.stops&&"object"==typeof t.stops[0][0],a=s||!(s||void 0!==t.property),r=t.type||(Vi(i)?"exponential":"interval");if(o&&((t=Ne({},t)).stops&&(t.stops=t.stops.map(e=>[e[0],ct.parse(e[1])])),t.default=ct.parse(t.default?t.default:i.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!mi[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);let n,l,c;if("exponential"===r)n=Wi;else if("interval"===r)n=Qi;else if("categorical"===r){n=Xi,l=Object.create(null);for(const e of t.stops)l[e[0]]=e[1];c=typeof t.stops[0][0]}else{if("identity"!==r)throw new Error(`Unknown function type "${r}"`);n=Ki}if(s){const o={},s=[];for(let e=0;e<t.stops.length;e++){const i=t.stops[e],a=i[0].zoom;void 0===o[a]&&(o[a]={zoom:a,type:t.type,property:t.property,default:t.default,stops:[]},s.push(a)),o[a].stops.push([i[0].value,i[1]])}const a=[];for(const t of s)a.push([o[t].zoom,e(o[t],i)]);const r={name:"linear"};return{kind:"composite",interpolationType:r,interpolationFactor:di.interpolationFactor.bind(void 0,r),zoomStops:a.map(e=>e[0]),evaluate:({zoom:e},o)=>Wi({stops:a,base:t.base},i,e).evaluate(e,o)}}if(a){const e="exponential"===r?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:e,interpolationFactor:di.interpolationFactor.bind(void 0,e),zoomStops:t.stops.map(e=>e[0]),evaluate:({zoom:e})=>n(t,i,e,l,c)}}return{kind:"source",evaluate(e,o){const s=o&&o.properties?o.properties[t.property]:void 0;return void 0===s?Hi(t.default,i.default):n(t,i,s,l,c)}}}(this._parameters,this._specification))}static deserialize(e){return new so(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function ao(e){const t=e.key,i=e.value,o=e.valueSpec||{},s=e.objectElementValidators||{},a=e.style,r=e.styleSpec;let n=[];const l=Gi(i);if("object"!==l)return[new Re(t,i,`object expected, ${l} found`)];for(const e in i){const l=e.split(".")[0],c=o[l]||o["*"];let u;if(s[l])u=s[l];else if(o[l])u=Po;else if(s["*"])u=s["*"];else{if(!o["*"]){n.push(new Re(t,i[e],`unknown property "${e}"`));continue}u=Po}n=n.concat(u({key:(t?t+".":t)+e,value:i[e],valueSpec:c,style:a,styleSpec:r,object:i,objectKey:e},i))}for(const e in o)s[e]||o[e].required&&void 0===o[e].default&&void 0===i[e]&&n.push(new Re(t,i,`missing required property "${e}"`));return n}function ro(e){const t=e.value,i=e.valueSpec,o=e.style,s=e.styleSpec,a=e.key,r=e.arrayElementValidator||Po;if("array"!==Gi(t))return[new Re(a,t,`array expected, ${Gi(t)} found`)];if(i.length&&t.length!==i.length)return[new Re(a,t,`array length ${i.length} expected, length ${t.length} found`)];if(i["min-length"]&&t.length<i["min-length"])return[new Re(a,t,`array length at least ${i["min-length"]} expected, length ${t.length} found`)];let n={type:i.value,values:i.values};s.$version<7&&(n.function=i.function),"object"===Gi(i.value)&&(n=i.value);let l=[];for(let e=0;e<t.length;e++)l=l.concat(r({array:t,arrayIndex:e,value:t[e],valueSpec:n,style:o,styleSpec:s,key:`${a}[${e}]`}));return l}function no(e){const t=e.key,i=e.value,o=e.valueSpec;let s=Gi(i);return"number"===s&&i!=i&&(s="NaN"),"number"!==s?[new Re(t,i,`number expected, ${s} found`)]:"minimum"in o&&i<o.minimum?[new Re(t,i,`${i} is less than the minimum value ${o.minimum}`)]:"maximum"in o&&i>o.maximum?[new Re(t,i,`${i} is greater than the maximum value ${o.maximum}`)]:[]}function lo(e){const t=e.valueSpec,i=$e(e.value.type);let o,s,a,r={};const n="categorical"!==i&&void 0===e.value.property,l=!n,c="array"===Gi(e.value.stops)&&"array"===Gi(e.value.stops[0])&&"object"===Gi(e.value.stops[0][0]),u=ao({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===i)return[new Re(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const o=e.value;return t=t.concat(ro({key:e.key,value:o,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Gi(o)&&0===o.length&&t.push(new Re(e.key,o,"array must have at least one stop")),t},default:function(e){return Po({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===i&&n&&u.push(new Re(e.key,e.value,'missing required property "property"')),"identity"===i||e.value.stops||u.push(new Re(e.key,e.value,'missing required property "stops"')),"exponential"===i&&e.valueSpec.expression&&!Vi(e.valueSpec)&&u.push(new Re(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Ni(e.valueSpec)?u.push(new Re(e.key,e.value,"property functions not supported")):n&&!$i(e.valueSpec)&&u.push(new Re(e.key,e.value,"zoom functions not supported"))),"categorical"!==i&&!c||void 0!==e.value.property||u.push(new Re(e.key,e.value,'"property" property is required')),u;function h(e){let i=[];const o=e.value,n=e.key;if("array"!==Gi(o))return[new Re(n,o,`array expected, ${Gi(o)} found`)];if(2!==o.length)return[new Re(n,o,`array length 2 expected, length ${o.length} found`)];if(c){if("object"!==Gi(o[0]))return[new Re(n,o,`object expected, ${Gi(o[0])} found`)];if(void 0===o[0].zoom)return[new Re(n,o,"object stop key must have zoom")];if(void 0===o[0].value)return[new Re(n,o,"object stop key must have value")];if(a&&a>$e(o[0].zoom))return[new Re(n,o[0].zoom,"stop zoom values must appear in ascending order")];$e(o[0].zoom)!==a&&(a=$e(o[0].zoom),s=void 0,r={}),i=i.concat(ao({key:n+"[0]",value:o[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:no,value:p}}))}else i=i.concat(p({key:n+"[0]",value:o[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},o));return Yi(Ve(o[1]))?i.concat([new Re(n+"[1]",o[1],"expressions are not allowed in function stops.")]):i.concat(Po({key:n+"[1]",value:o[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function p(e,a){const n=Gi(e.value),l=$e(e.value),c=null!==e.value?e.value:a;if(o){if(n!==o)return[new Re(e.key,c,`${n} stop domain type must match previous stop domain type ${o}`)]}else o=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new Re(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==i){let o=`number expected, ${n} found`;return Ni(t)&&void 0===i&&(o+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Re(e.key,c,o)]}return"categorical"!==i||"number"!==n||isFinite(l)&&Math.floor(l)===l?"categorical"!==i&&"number"===n&&void 0!==s&&l<s?[new Re(e.key,c,"stop domain values must appear in ascending order")]:(s=l,"categorical"===i&&l in r?[new Re(e.key,c,"stop domain values must be unique")]:(r[l]=!0,[])):[new Re(e.key,c,"integer expected, found "+l)]}}function co(e){const t=("property"===e.expressionContext?oo:eo)(Ve(e.value),e.valueSpec);if("error"===t.result)return t.value.map(t=>new Re(`${e.key}${t.key}`,e.value,t.message));const i=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!i.outputDefined())return[new Re(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!Ht(i))return[new Re(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!Ht(i))return[new Re(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!Xt(i,["zoom","feature-state"]))return[new Re(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Zt(i))return[new Re(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function uo(e){const t=e.key,i=e.value,o=e.valueSpec,s=[];return Array.isArray(o.values)?-1===o.values.indexOf($e(i))&&s.push(new Re(t,i,`expected one of [${o.values.join(", ")}], ${JSON.stringify(i)} found`)):-1===Object.keys(o.values).indexOf($e(i))&&s.push(new Re(t,i,`expected one of [${Object.keys(o.values).join(", ")}], ${JSON.stringify(i)} found`)),s}function ho(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!ho(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}const po={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function mo(e){if(null==e)return{filter:()=>!0,needGeometry:!1};ho(e)||(e=yo(e));const t=eo(e,po);if("error"===t.result)throw new Error(t.value.map(e=>`${e.key}: ${e.message}`).join(", "));return{filter:(e,i,o)=>t.value.evaluate(e,i,{},o),needGeometry:function e(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(let i=1;i<t.length;i++)if(e(t[i]))return!0;return!1}(e)}}function fo(e,t){return e<t?-1:e>t?1:0}function yo(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?go(e[1],e[2],"=="):"!="===t?vo(go(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?go(e[1],e[2],t):"any"===t?(i=e.slice(1),["any"].concat(i.map(yo))):"all"===t?["all"].concat(e.slice(1).map(yo)):"none"===t?["all"].concat(e.slice(1).map(yo).map(vo)):"in"===t?_o(e[1],e.slice(2)):"!in"===t?vo(_o(e[1],e.slice(2))):"has"===t?bo(e[1]):"!has"===t?vo(bo(e[1])):"within"!==t||e;var i}function go(e,t,i){switch(e){case"$type":return["filter-type-"+i,t];case"$id":return["filter-id-"+i,t];default:return["filter-"+i,e,t]}}function _o(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",e,["literal",t.sort(fo)]]:["filter-in-small",e,["literal",t]]}}function bo(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function vo(e){return["!",e]}function xo(e){return ho(Ve(e.value))?co(Ne({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function e(t){const i=t.value,o=t.key;if("array"!==Gi(i))return[new Re(o,i,`array expected, ${Gi(i)} found`)];const s=t.styleSpec;let a,r=[];if(i.length<1)return[new Re(o,i,"filter array must have at least 1 element")];switch(r=r.concat(uo({key:o+"[0]",value:i[0],valueSpec:s.filter_operator,style:t.style,styleSpec:t.styleSpec})),$e(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===$e(i[1])&&r.push(new Re(o,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":3!==i.length&&r.push(new Re(o,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(a=Gi(i[1]),"string"!==a&&r.push(new Re(o+"[1]",i[1],`string expected, ${a} found`)));for(let e=2;e<i.length;e++)a=Gi(i[e]),"$type"===$e(i[1])?r=r.concat(uo({key:`${o}[${e}]`,value:i[e],valueSpec:s.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&r.push(new Re(`${o}[${e}]`,i[e],`string, number, or boolean expected, ${a} found`));break;case"any":case"all":case"none":for(let s=1;s<i.length;s++)r=r.concat(e({key:`${o}[${s}]`,value:i[s],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":a=Gi(i[1]),2!==i.length?r.push(new Re(o,i,`filter array for "${i[0]}" operator must have 2 elements`)):"string"!==a&&r.push(new Re(o+"[1]",i[1],`string expected, ${a} found`));break;case"within":a=Gi(i[1]),2!==i.length?r.push(new Re(o,i,`filter array for "${i[0]}" operator must have 2 elements`)):"object"!==a&&r.push(new Re(o+"[1]",i[1],`object expected, ${a} found`))}return r}(e)}function Lo(e,t){const i=e.key,o=e.style,s=e.styleSpec,a=e.value,r=e.objectKey,n=s[`${t}_${e.layerType}`];if(!n)return[];const l=r.match(/^(.*)-transition$/);if("paint"===t&&l&&n[l[1]]&&n[l[1]].transition)return Po({key:i,value:a,valueSpec:s.transition,style:o,styleSpec:s});const c=e.valueSpec||n[r];if(!c)return[new Re(i,a,`unknown property "${r}"`)];let u;if("string"===Gi(a)&&Ni(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a)))return[new Re(i,a,`"${r}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(u[1])} }\`.`)];const h=[];return"symbol"===e.layerType&&("text-field"===r&&o&&!o.glyphs&&h.push(new Re(i,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===r&&ji(Ve(a))&&"identity"===$e(a.type)&&h.push(new Re(i,a,'"text-font" does not support identity functions'))),h.concat(Po({key:e.key,value:a,valueSpec:c,style:o,styleSpec:s,expressionContext:"property",propertyType:t,propertyKey:r}))}function Io(e){return Lo(e,"paint")}function wo(e){return Lo(e,"layout")}function qo(e){let t=[];const i=e.value,o=e.key,s=e.style,a=e.styleSpec;i.type||i.ref||t.push(new Re(o,i,'either "type" or "ref" is required'));let r=$e(i.type);const n=$e(i.ref);if(i.id){const a=$e(i.id);for(let r=0;r<e.arrayIndex;r++){const e=s.layers[r];$e(e.id)===a&&t.push(new Re(o,i.id,`duplicate layer id "${i.id}", previously used at line ${e.id.__line__}`))}}if("ref"in i){let e;["type","source","source-layer","filter","layout"].forEach(e=>{e in i&&t.push(new Re(o,i[e],`"${e}" is prohibited for ref layers`))}),s.layers.forEach(t=>{$e(t.id)===n&&(e=t)}),e?e.ref?t.push(new Re(o,i.ref,"ref cannot reference another ref layer")):r=$e(e.type):t.push(new Re(o,i.ref,`ref layer "${n}" not found`))}else if("background"!==r&&"sky"!==r)if(i.source){const e=s.sources&&s.sources[i.source],a=e&&$e(e.type);e?"vector"===a&&"raster"===r?t.push(new Re(o,i.source,`layer "${i.id}" requires a raster source`)):"raster"===a&&"raster"!==r?t.push(new Re(o,i.source,`layer "${i.id}" requires a vector source`)):"vector"!==a||i["source-layer"]?"raster-dem"===a&&"hillshade"!==r?t.push(new Re(o,i.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==r||!i.paint||!i.paint["line-gradient"]||"geojson"===a&&e.lineMetrics||t.push(new Re(o,i,`layer "${i.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Re(o,i,`layer "${i.id}" must specify a "source-layer"`)):t.push(new Re(o,i.source,`source "${i.source}" not found`))}else t.push(new Re(o,i,'missing required property "source"'));return t=t.concat(ao({key:o,value:i,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Po({key:o+".type",value:i.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:i,objectKey:"type"}),filter:xo,layout:e=>ao({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>wo(Ne({layerType:r},e))}}),paint:e=>ao({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>Io(Ne({layerType:r},e))}})}})),t}function Fo(e){const t=e.value,i=e.key,o=Gi(t);return"string"!==o?[new Re(i,t,`string expected, ${o} found`)]:[]}const Eo={promoteId:function({key:e,value:t}){if("string"===Gi(t))return Fo({key:e,value:t});{const i=[];for(const o in t)i.push(...Fo({key:`${e}.${o}`,value:t[o]}));return i}}};function To(e){const t=e.value,i=e.key,o=e.styleSpec,s=e.style;if(!t.type)return[new Re(i,t,'"type" is required')];const a=$e(t.type);let r;switch(a){case"vector":case"raster":case"raster-dem":return r=ao({key:i,value:t,valueSpec:o["source_"+a.replace("-","_")],style:e.style,styleSpec:o,objectElementValidators:Eo}),r;case"geojson":if(r=ao({key:i,value:t,valueSpec:o.source_geojson,style:s,styleSpec:o,objectElementValidators:Eo}),t.cluster)for(const e in t.clusterProperties){const[o,s]=t.clusterProperties[e],a="string"==typeof o?[o,["accumulated"],["get",e]]:o;r.push(...co({key:`${i}.${e}.map`,value:s,expressionContext:"cluster-map"})),r.push(...co({key:`${i}.${e}.reduce`,value:a,expressionContext:"cluster-reduce"}))}return r;case"video":return ao({key:i,value:t,valueSpec:o.source_video,style:s,styleSpec:o});case"image":return ao({key:i,value:t,valueSpec:o.source_image,style:s,styleSpec:o});case"canvas":return[new Re(i,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return uo({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:s,styleSpec:o})}}function Co(e){const t=e.value,i=e.styleSpec,o=i.light,s=e.style;let a=[];const r=Gi(t);if(void 0===t)return a;if("object"!==r)return a=a.concat([new Re("light",t,`object expected, ${r} found`)]),a;for(const e in t){const r=e.match(/^(.*)-transition$/);a=a.concat(r&&o[r[1]]&&o[r[1]].transition?Po({key:e,value:t[e],valueSpec:i.transition,style:s,styleSpec:i}):o[e]?Po({key:e,value:t[e],valueSpec:o[e],style:s,styleSpec:i}):[new Re(e,t[e],`unknown property "${e}"`)])}return a}function zo(e){const t=e.value,i=e.key,o=e.style,s=e.styleSpec,a=s.terrain;let r=[];const n=Gi(t);if(void 0===t)return r;if("object"!==n)return r=r.concat([new Re("terrain",t,`object expected, ${n} found`)]),r;for(const e in t){const i=e.match(/^(.*)-transition$/);r=r.concat(i&&a[i[1]]&&a[i[1]].transition?Po({key:e,value:t[e],valueSpec:s.transition,style:o,styleSpec:s}):a[e]?Po({key:e,value:t[e],valueSpec:a[e],style:o,styleSpec:s}):[new Re(e,t[e],`unknown property "${e}"`)])}if(t.source){const e=o.sources&&o.sources[t.source],s=e&&$e(e.type);e?"raster-dem"!==s&&r.push(new Re(i,t.source,`terrain cannot be used with a source of type ${s}, it only be used with a "raster-dem" source type`)):r.push(new Re(i,t.source,`source "${t.source}" not found`))}else r.push(new Re(i,t,'terrain is missing required property "source"'));return r}const Ao={"*":()=>[],array:ro,boolean:function(e){const t=e.value,i=e.key,o=Gi(t);return"boolean"!==o?[new Re(i,t,`boolean expected, ${o} found`)]:[]},number:no,color:function(e){const t=e.key,i=e.value,o=Gi(i);return"string"!==o?[new Re(t,i,`color expected, ${o} found`)]:null===lt(i)?[new Re(t,i,`color expected, "${i}" found`)]:[]},constants:Oe,enum:uo,filter:xo,function:lo,layer:qo,object:ao,source:To,light:Co,terrain:zo,string:Fo,formatted:function(e){return 0===Fo(e).length?[]:co(e)},resolvedImage:function(e){return 0===Fo(e).length?[]:co(e)}};function Po(e){const t=e.value,i=e.valueSpec,o=e.styleSpec;return i.expression&&ji($e(t))?lo(e):i.expression&&Yi(Ve(t))?co(e):i.type&&Ao[i.type]?Ao[i.type](e):ao(Ne({},e,{valueSpec:i.type?o[i.type]:i}))}function Bo(e){const t=e.value,i=e.key,o=Fo(e);return o.length||(-1===t.indexOf("{fontstack}")&&o.push(new Re(i,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&o.push(new Re(i,t,'"glyphs" url must include a "{range}" token'))),o}function Mo(e,t=Ue){let i=[];return i=i.concat(Po({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Bo,"*":()=>[]}})),e.constants&&(i=i.concat(Oe({key:"constants",value:e.constants,style:e,styleSpec:t}))),Do(i)}function Do(e){return[].concat(e).sort((e,t)=>e.line-t.line)}function So(e){return function(...t){return Do(e.apply(this,t))}}Mo.source=So(To),Mo.light=So(Co),Mo.terrain=So(zo),Mo.layer=So(qo),Mo.filter=So(xo),Mo.paintProperty=So(Io),Mo.layoutProperty=So(wo);const ko=Mo,Uo=ko.light,Ro=ko.paintProperty,Oo=ko.layoutProperty;function No(e,t){let i=!1;if(t&&t.length)for(const o of t)e.fire(new Se(new Error(o.message))),i=!0;return i}var $o=Vo;function Vo(e,t,i){var o=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var s=new Int32Array(this.arrayBuffer);e=s[0],this.d=(t=s[1])+2*(i=s[2]);for(var a=0;a<this.d*this.d;a++){var r=s[3+a],n=s[3+a+1];o.push(r===n?null:s.subarray(r,n))}var l=s[3+o.length+1];this.keys=s.subarray(s[3+o.length],l),this.bboxes=s.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var c=0;c<this.d*this.d;c++)o.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var u=i/t*e;this.min=-u,this.max=e+u}Vo.prototype.insert=function(e,t,i,o,s){this._forEachCell(t,i,o,s,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(o),this.bboxes.push(s)},Vo.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Vo.prototype._insertCell=function(e,t,i,o,s,a){this.cells[s].push(a)},Vo.prototype.query=function(e,t,i,o,s){var a=this.min,r=this.max;if(e<=a&&t<=a&&r<=i&&r<=o&&!s)return Array.prototype.slice.call(this.keys);var n=[];return this._forEachCell(e,t,i,o,this._queryCell,n,{},s),n},Vo.prototype._queryCell=function(e,t,i,o,s,a,r,n){var l=this.cells[s];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var p=l[h];if(void 0===r[p]){var m=4*p;(n?n(u[m+0],u[m+1],u[m+2],u[m+3]):e<=u[m+2]&&t<=u[m+3]&&i>=u[m+0]&&o>=u[m+1])?(r[p]=!0,a.push(c[p])):r[p]=!1}}},Vo.prototype._forEachCell=function(e,t,i,o,s,a,r,n){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(i),h=this._convertToCellCoord(o),p=l;p<=u;p++)for(var m=c;m<=h;m++){var d=this.d*m+p;if((!n||n(this._convertFromCellCoord(p),this._convertFromCellCoord(m),this._convertFromCellCoord(p+1),this._convertFromCellCoord(m+1)))&&s.call(this,e,t,i,o,d,a,r,n))return}},Vo.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Vo.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Vo.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,i=0,o=0;o<this.cells.length;o++)i+=this.cells[o].length;var s=new Int32Array(t+i+this.keys.length+this.bboxes.length);s[0]=this.extent,s[1]=this.n,s[2]=this.padding;for(var a=t,r=0;r<e.length;r++){var n=e[r];s[3+r]=a,s.set(n,a),a+=n.length}return s[3+e.length]=a,s.set(this.keys,a),s[3+e.length+1]=a+=this.keys.length,s.set(this.bboxes,a),a+=this.bboxes.length,s.buffer};const{ImageData:Go,ImageBitmap:jo}=r,Zo={};function Ho(e,t,i={}){Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),Zo[e]={klass:t,omit:i.omit||[],shallow:i.shallow||[]}}Ho("Object",Object),$o.serialize=function(e,t){const i=e.toArrayBuffer();return t&&t.push(i),{buffer:i}},$o.deserialize=function(e){return new $o(e.buffer)},Ho("Grid",$o),Ho("Color",ct),Ho("Error",Error),Ho("ResolvedImage",mt),Ho("StylePropertyFunction",so),Ho("StyleExpression",Ji,{omit:["_evaluator"]}),Ho("ZoomDependentExpression",io),Ho("ZoomConstantExpression",to),Ho("CompoundExpression",Tt,{omit:["_evaluate"]});for(const e in Mi)Mi[e]._classRegistryKey||Ho("Expression_"+e,Mi[e]);function Xo(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Qo(e){return jo&&e instanceof jo}function Wo(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Xo(e)||Qo(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){const i=e;return t&&t.push(i.buffer),i}if(e instanceof Go)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const i=[];for(const o of e)i.push(Wo(o,t));return i}if("object"==typeof e){const i=e.constructor,o=i._classRegistryKey;if(!o)throw new Error("can't serialize object of unregistered class");const s=i.serialize?i.serialize(e,t):{};if(!i.serialize){for(const i in e){if(!e.hasOwnProperty(i))continue;if(Zo[o].omit.indexOf(i)>=0)continue;const a=e[i];s[i]=Zo[o].shallow.indexOf(i)>=0?a:Wo(a,t)}e instanceof Error&&(s.message=e.message)}if(s.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==o&&(s.$name=o),s}throw new Error("can't serialize object of type "+typeof e)}function Ko(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Xo(e)||Qo(e)||ArrayBuffer.isView(e)||e instanceof Go)return e;if(Array.isArray(e))return e.map(Ko);if("object"==typeof e){const t=e.$name||"Object",{klass:i}=Zo[t];if(!i)throw new Error("can't deserialize unregistered class "+t);if(i.deserialize)return i.deserialize(e);const o=Object.create(i.prototype);for(const i of Object.keys(e)){if("$name"===i)continue;const s=e[i];o[i]=Zo[t].shallow.indexOf(i)>=0?s:Ko(s)}return o}throw new Error("can't deserialize object of type "+typeof e)}class Jo{constructor(){this.first=!0}update(e,t){const i=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=i,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=i,!0):(this.lastFloorZoom>i?(this.lastIntegerZoom=i+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<i&&(this.lastIntegerZoom=i,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=i,!0))}}const Yo={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519};function es(e){for(const t of e)if(os(t.charCodeAt(0)))return!0;return!1}function ts(e){for(const t of e)if(!is(t.charCodeAt(0)))return!1;return!0}function is(e){return!(Yo.Arabic(e)||Yo["Arabic Supplement"](e)||Yo["Arabic Extended-A"](e)||Yo["Arabic Presentation Forms-A"](e)||Yo["Arabic Presentation Forms-B"](e))}function os(e){return!(746!==e&&747!==e&&(e<4352||!(Yo["Bopomofo Extended"](e)||Yo.Bopomofo(e)||Yo["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Yo["CJK Compatibility Ideographs"](e)||Yo["CJK Compatibility"](e)||Yo["CJK Radicals Supplement"](e)||Yo["CJK Strokes"](e)||!(!Yo["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Yo["CJK Unified Ideographs Extension A"](e)||Yo["CJK Unified Ideographs"](e)||Yo["Enclosed CJK Letters and Months"](e)||Yo["Hangul Compatibility Jamo"](e)||Yo["Hangul Jamo Extended-A"](e)||Yo["Hangul Jamo Extended-B"](e)||Yo["Hangul Jamo"](e)||Yo["Hangul Syllables"](e)||Yo.Hiragana(e)||Yo["Ideographic Description Characters"](e)||Yo.Kanbun(e)||Yo["Kangxi Radicals"](e)||Yo["Katakana Phonetic Extensions"](e)||Yo.Katakana(e)&&12540!==e||!(!Yo["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Yo["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Yo["Unified Canadian Aboriginal Syllabics"](e)||Yo["Unified Canadian Aboriginal Syllabics Extended"](e)||Yo["Vertical Forms"](e)||Yo["Yijing Hexagram Symbols"](e)||Yo["Yi Syllables"](e)||Yo["Yi Radicals"](e))))}function ss(e){return!(os(e)||function(e){return!!(Yo["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Yo["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Yo["Letterlike Symbols"](e)||Yo["Number Forms"](e)||Yo["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Yo["Control Pictures"](e)&&9251!==e||Yo["Optical Character Recognition"](e)||Yo["Enclosed Alphanumerics"](e)||Yo["Geometric Shapes"](e)||Yo["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Yo["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Yo["CJK Symbols and Punctuation"](e)||Yo.Katakana(e)||Yo["Private Use Area"](e)||Yo["CJK Compatibility Forms"](e)||Yo["Small Form Variants"](e)||Yo["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function as(e){return e>=1424&&e<=2303||Yo["Arabic Presentation Forms-A"](e)||Yo["Arabic Presentation Forms-B"](e)}function rs(e,t){return!(!t&&as(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Yo.Khmer(e))}function ns(e){for(const t of e)if(as(t.charCodeAt(0)))return!0;return!1}let ls=null,cs="unavailable",us=null;const hs=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(cs="error"),ls&&ls(e)};function ps(){ms.fire(new De("pluginStateChange",{pluginStatus:cs,pluginURL:us}))}const ms=new ke,ds=function(){return cs},fs=function(){if("deferred"!==cs||!us)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");cs="loading",ps(),us&&qe({url:us},e=>{e?hs(e):(cs="loaded",ps())})},ys={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>"loaded"===cs||null!=ys.applyArabicShaping,isLoading:()=>"loading"===cs,setState(e){cs=e.pluginStatus,us=e.pluginURL},isParsed:()=>null!=ys.applyArabicShaping&&null!=ys.processBidirectionalText&&null!=ys.processStyledBidirectionalText,getPluginURL:()=>us};class gs{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Jo,this.transition={})}isSupportedScript(e){return function(e,t){for(const i of e)if(!rs(i.charCodeAt(0),t))return!1;return!0}(e,ys.isLoaded())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const e=this.zoom,t=e-Math.floor(e),i=this.crossFadingFactor();return e>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:t+(1-t)*i}:{fromScale:.5,toScale:1,t:1-(1-i)*t}}}class _s{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(ji(e))return new so(e,t);if(Yi(e)){const i=oo(e,t);if("error"===i.result)throw new Error(i.value.map(e=>`${e.key}: ${e.message}`).join(", "));return i.value}{let i=e;return"string"==typeof e&&"color"===t.type&&(i=ct.parse(e)),{kind:"constant",evaluate:()=>i}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)}}class bs{constructor(e){this.property=e,this.value=new _s(e,void 0)}transitioned(e,t){return new xs(this.property,this.value,t,_({},e.transition,this.transition),e.now)}untransitioned(){return new xs(this.property,this.value,null,{},0)}}class vs{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return E(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new bs(this._values[e].property)),this._values[e].value=new _s(this._values[e].property,null===t?void 0:E(t))}getTransition(e){return E(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new bs(this._values[e].property)),this._values[e].transition=E(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const i=this.getValue(t);void 0!==i&&(e[t]=i);const o=this.getTransition(t);void 0!==o&&(e[t+"-transition"]=o)}return e}transitioned(e,t){const i=new Ls(this._properties);for(const o of Object.keys(this._values))i._values[o]=this._values[o].transitioned(e,t._values[o]);return i}untransitioned(){const e=new Ls(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class xs{constructor(e,t,i,o,s){this.property=e,this.value=t,this.begin=s+o.delay||0,this.end=this.begin+o.duration||0,e.specification.transition&&(o.delay||o.duration)&&(this.prior=i)}possiblyEvaluate(e,t,i){const o=e.now||0,s=this.value.possiblyEvaluate(e,t,i),a=this.prior;if(a){if(o>this.end)return this.prior=null,s;if(this.value.isDataDriven())return this.prior=null,s;if(o<this.begin)return a.possiblyEvaluate(e,t,i);{const r=(o-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,i),s,p(r))}}return s}}class Ls{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,i){const o=new qs(this._properties);for(const s of Object.keys(this._values))o._values[s]=this._values[s].possiblyEvaluate(e,t,i);return o}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Is{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return E(this._values[e].value)}setValue(e,t){this._values[e]=new _s(this._values[e].property,null===t?void 0:E(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const i=this.getValue(t);void 0!==i&&(e[t]=i)}return e}possiblyEvaluate(e,t,i){const o=new qs(this._properties);for(const s of Object.keys(this._values))o._values[s]=this._values[s].possiblyEvaluate(e,t,i);return o}}class ws{constructor(e,t,i){this.property=e,this.value=t,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,i,o){return this.property.evaluate(this.value,this.parameters,e,t,i,o)}}class qs{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Fs{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,i){const o=ei[this.specification.type];return o?o(e,t,i):e}}class Es{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,i,o){return new ws(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},i,o)}:e.expression,t)}interpolate(e,t,i){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new ws(this,{kind:"constant",value:void 0},e.parameters);const o=ei[this.specification.type];return o?new ws(this,{kind:"constant",value:o(e.value.value,t.value.value,i)},e.parameters):e}evaluate(e,t,i,o,s,a){return"constant"===e.kind?e.value:e.evaluate(t,i,o,s,a)}}class Ts extends Es{possiblyEvaluate(e,t,i,o){if(void 0===e.value)return new ws(this,{kind:"constant",value:void 0},t);if("constant"===e.expression.kind){const s=e.expression.evaluate(t,null,{},i,o),a="resolvedImage"===e.property.specification.type&&"string"!=typeof s?s.name:s,r=this._calculate(a,a,a,t);return new ws(this,{kind:"constant",value:r},t)}if("camera"===e.expression.kind){const i=this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t);return new ws(this,{kind:"constant",value:i},t)}return new ws(this,e.expression,t)}evaluate(e,t,i,o,s,a){if("source"===e.kind){const r=e.evaluate(t,i,o,s,a);return this._calculate(r,r,r,t)}return"composite"===e.kind?this._calculate(e.evaluate({zoom:Math.floor(t.zoom)-1},i,o),e.evaluate({zoom:Math.floor(t.zoom)},i,o),e.evaluate({zoom:Math.floor(t.zoom)+1},i,o),t):e.value}_calculate(e,t,i,o){return o.zoom>o.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}}interpolate(e){return e}}class Cs{constructor(e){this.specification=e}possiblyEvaluate(e,t,i,o){if(void 0!==e.value){if("constant"===e.expression.kind){const s=e.expression.evaluate(t,null,{},i,o);return this._calculate(s,s,s,t)}return this._calculate(e.expression.evaluate(new gs(Math.floor(t.zoom-1),t)),e.expression.evaluate(new gs(Math.floor(t.zoom),t)),e.expression.evaluate(new gs(Math.floor(t.zoom+1),t)),t)}}_calculate(e,t,i,o){return o.zoom>o.zoomHistory.lastIntegerZoom?{from:e,to:t}:{from:i,to:t}}interpolate(e){return e}}class zs{constructor(e){this.specification=e}possiblyEvaluate(e,t,i,o){return!!e.expression.evaluate(t,null,{},i,o)}interpolate(){return!1}}class As{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const t in e){const i=e[t];i.specification.overridable&&this.overridableProperties.push(t);const o=this.defaultPropertyValues[t]=new _s(i,void 0),s=this.defaultTransitionablePropertyValues[t]=new bs(i);this.defaultTransitioningPropertyValues[t]=s.untransitioned(),this.defaultPossiblyEvaluatedValues[t]=o.possiblyEvaluate({})}}}function Ps(e,t){return 256*(e=f(Math.floor(e),0,255))+f(Math.floor(t),0,255)}Ho("DataDrivenProperty",Es),Ho("DataConstantProperty",Fs),Ho("CrossFadedDataDrivenProperty",Ts),Ho("CrossFadedProperty",Cs),Ho("ColorRampProperty",zs);const Bs={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ms{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ds{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ss(e,t=1){let i=0,o=0;return{members:e.map(e=>{const s=Bs[e.type].BYTES_PER_ELEMENT,a=i=ks(i,Math.max(t,s)),r=e.components||1;return o=Math.max(o,s),i+=s*r,{name:e.name,type:e.type,components:r,offset:a}}),size:ks(i,Math.max(o,t)),alignment:t}}function ks(e,t){return Math.ceil(e/t)*t}class Us extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){const o=2*e;return this.int16[o+0]=t,this.int16[o+1]=i,e}}Us.prototype.bytesPerElement=4,Ho("StructArrayLayout2i4",Us);class Rs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,i,o)}emplace(e,t,i,o,s){const a=4*e;return this.int16[a+0]=t,this.int16[a+1]=i,this.int16[a+2]=o,this.int16[a+3]=s,e}}Rs.prototype.bytesPerElement=8,Ho("StructArrayLayout4i8",Rs);class Os extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,o,s,a,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,o,s,a,r)}emplace(e,t,i,o,s,a,r,n){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=i,this.uint8[c+4]=o,this.uint8[c+5]=s,this.uint8[c+6]=a,this.uint8[c+7]=r,this.float32[u+2]=n,e}}Os.prototype.bytesPerElement=12,Ho("StructArrayLayout2i4ub1f12",Os);class Ns extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){const o=2*e;return this.float32[o+0]=t,this.float32[o+1]=i,e}}Ns.prototype.bytesPerElement=8,Ho("StructArrayLayout2f8",Ns);class $s extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,o,s,a,r,n,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,i,o,s,a,r,n,l,c)}emplace(e,t,i,o,s,a,r,n,l,c,u){const h=10*e;return this.uint16[h+0]=t,this.uint16[h+1]=i,this.uint16[h+2]=o,this.uint16[h+3]=s,this.uint16[h+4]=a,this.uint16[h+5]=r,this.uint16[h+6]=n,this.uint16[h+7]=l,this.uint16[h+8]=c,this.uint16[h+9]=u,e}}$s.prototype.bytesPerElement=20,Ho("StructArrayLayout10ui20",$s);class Vs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,o,s,a,r,n,l,c,u,h){const p=this.length;return this.resize(p+1),this.emplace(p,e,t,i,o,s,a,r,n,l,c,u,h)}emplace(e,t,i,o,s,a,r,n,l,c,u,h,p){const m=12*e;return this.int16[m+0]=t,this.int16[m+1]=i,this.int16[m+2]=o,this.int16[m+3]=s,this.uint16[m+4]=a,this.uint16[m+5]=r,this.uint16[m+6]=n,this.uint16[m+7]=l,this.int16[m+8]=c,this.int16[m+9]=u,this.int16[m+10]=h,this.int16[m+11]=p,e}}Vs.prototype.bytesPerElement=24,Ho("StructArrayLayout4i4ui4i24",Vs);class Gs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,i)}emplace(e,t,i,o){const s=3*e;return this.float32[s+0]=t,this.float32[s+1]=i,this.float32[s+2]=o,e}}Gs.prototype.bytesPerElement=12,Ho("StructArrayLayout3f12",Gs);class js extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}js.prototype.bytesPerElement=4,Ho("StructArrayLayout1ul4",js);class Zs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,o,s,a,r,n,l,c){const u=this.length;return this.resize(u+1),this.emplace(u,e,t,i,o,s,a,r,n,l,c)}emplace(e,t,i,o,s,a,r,n,l,c,u){const h=16*e,p=8*e;return this.int16[h+0]=t,this.int16[h+1]=i,this.float32[p+1]=o,this.float32[p+2]=s,this.float32[p+3]=a,this.float32[p+4]=r,this.int16[h+10]=n,this.uint32[p+6]=l,this.uint16[h+14]=c,this.uint16[h+15]=u,e}}Zs.prototype.bytesPerElement=32,Ho("StructArrayLayout2i4f1i1ul2ui32",Zs);class Hs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,o,s,a){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,i,o,s,a)}emplace(e,t,i,o,s,a,r){const n=6*e;return this.int16[n+0]=t,this.int16[n+1]=i,this.int16[n+2]=o,this.int16[n+3]=s,this.int16[n+4]=a,this.int16[n+5]=r,e}}Hs.prototype.bytesPerElement=12,Ho("StructArrayLayout2i2i2i12",Hs);class Xs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,o,s){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,o,s)}emplace(e,t,i,o,s,a){const r=4*e,n=8*e;return this.float32[r+0]=t,this.float32[r+1]=i,this.float32[r+2]=o,this.int16[n+6]=s,this.int16[n+7]=a,e}}Xs.prototype.bytesPerElement=16,Ho("StructArrayLayout2f1f2i16",Xs);class Qs extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,i,o)}emplace(e,t,i,o,s){const a=12*e,r=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=i,this.float32[r+1]=o,this.float32[r+2]=s,e}}Qs.prototype.bytesPerElement=12,Ho("StructArrayLayout2ub2f12",Qs);class Ws extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,i)}emplace(e,t,i,o){const s=3*e;return this.uint16[s+0]=t,this.uint16[s+1]=i,this.uint16[s+2]=o,e}}Ws.prototype.bytesPerElement=6,Ho("StructArrayLayout3ui6",Ws);class Ks extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,o,s,a,r,n,l,c,u,h,p,m,d,f,y){const g=this.length;return this.resize(g+1),this.emplace(g,e,t,i,o,s,a,r,n,l,c,u,h,p,m,d,f,y)}emplace(e,t,i,o,s,a,r,n,l,c,u,h,p,m,d,f,y,g){const _=24*e,b=12*e,v=48*e;return this.int16[_+0]=t,this.int16[_+1]=i,this.uint16[_+2]=o,this.uint16[_+3]=s,this.uint32[b+2]=a,this.uint32[b+3]=r,this.uint32[b+4]=n,this.uint16[_+10]=l,this.uint16[_+11]=c,this.uint16[_+12]=u,this.float32[b+7]=h,this.float32[b+8]=p,this.uint8[v+36]=m,this.uint8[v+37]=d,this.uint8[v+38]=f,this.uint32[b+10]=y,this.int16[_+22]=g,e}}Ks.prototype.bytesPerElement=48,Ho("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ks);class Js extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,o,s,a,r,n,l,c,u,h,p,m,d,f,y,g,_,b,v,x,L,I,w,q,F,E){const T=this.length;return this.resize(T+1),this.emplace(T,e,t,i,o,s,a,r,n,l,c,u,h,p,m,d,f,y,g,_,b,v,x,L,I,w,q,F,E)}emplace(e,t,i,o,s,a,r,n,l,c,u,h,p,m,d,f,y,g,_,b,v,x,L,I,w,q,F,E,T){const C=34*e,z=17*e;return this.int16[C+0]=t,this.int16[C+1]=i,this.int16[C+2]=o,this.int16[C+3]=s,this.int16[C+4]=a,this.int16[C+5]=r,this.int16[C+6]=n,this.int16[C+7]=l,this.uint16[C+8]=c,this.uint16[C+9]=u,this.uint16[C+10]=h,this.uint16[C+11]=p,this.uint16[C+12]=m,this.uint16[C+13]=d,this.uint16[C+14]=f,this.uint16[C+15]=y,this.uint16[C+16]=g,this.uint16[C+17]=_,this.uint16[C+18]=b,this.uint16[C+19]=v,this.uint16[C+20]=x,this.uint16[C+21]=L,this.uint16[C+22]=I,this.uint32[z+12]=w,this.float32[z+13]=q,this.float32[z+14]=F,this.float32[z+15]=E,this.float32[z+16]=T,e}}Js.prototype.bytesPerElement=68,Ho("StructArrayLayout8i15ui1ul4f68",Js);class Ys extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Ys.prototype.bytesPerElement=4,Ho("StructArrayLayout1f4",Ys);class ea extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,i)}emplace(e,t,i,o){const s=3*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.int16[s+2]=o,e}}ea.prototype.bytesPerElement=6,Ho("StructArrayLayout3i6",ea);class ta extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,i)}emplace(e,t,i,o){const s=4*e;return this.uint32[2*e+0]=t,this.uint16[s+2]=i,this.uint16[s+3]=o,e}}ta.prototype.bytesPerElement=8,Ho("StructArrayLayout1ul2ui8",ta);class ia extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){const o=2*e;return this.uint16[o+0]=t,this.uint16[o+1]=i,e}}ia.prototype.bytesPerElement=4,Ho("StructArrayLayout2ui4",ia);class oa extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}oa.prototype.bytesPerElement=2,Ho("StructArrayLayout1ui2",oa);class sa extends Ds{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,i,o)}emplace(e,t,i,o,s){const a=4*e;return this.float32[a+0]=t,this.float32[a+1]=i,this.float32[a+2]=o,this.float32[a+3]=s,e}}sa.prototype.bytesPerElement=16,Ho("StructArrayLayout4f16",sa);class aa extends Ms{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.float32[this._pos4+1]}get y1(){return this._structArray.float32[this._pos4+2]}get x2(){return this._structArray.float32[this._pos4+3]}get y2(){return this._structArray.float32[this._pos4+4]}get padding(){return this._structArray.int16[this._pos2+10]}get featureIndex(){return this._structArray.uint32[this._pos4+6]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+14]}get bucketIndex(){return this._structArray.uint16[this._pos2+15]}get anchorPoint(){return new s(this.anchorPointX,this.anchorPointY)}}aa.prototype.size=32;class ra extends Zs{get(e){return new aa(this,e)}}Ho("CollisionBoxArray",ra);class na extends Ms{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(e){this._structArray.uint8[this._pos1+37]=e}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(e){this._structArray.uint8[this._pos1+38]=e}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(e){this._structArray.uint32[this._pos4+10]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}na.prototype.size=48;class la extends Ks{get(e){return new na(this,e)}}Ho("PlacedSymbolArray",la);class ca extends Ms{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(e){this._structArray.uint32[this._pos4+12]=e}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}ca.prototype.size=68;class ua extends Js{get(e){return new ca(this,e)}}Ho("SymbolInstanceArray",ua);class ha extends Ys{getoffsetX(e){return this.float32[1*e+0]}}Ho("GlyphOffsetArray",ha);class pa extends ea{getx(e){return this.int16[3*e+0]}gety(e){return this.int16[3*e+1]}gettileUnitDistanceFromAnchor(e){return this.int16[3*e+2]}}Ho("SymbolLineVertexArray",pa);class ma extends Ms{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ma.prototype.size=8;class da extends ta{get(e){return new ma(this,e)}}Ho("FeatureIndexArray",da);const fa=Ss([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ya=t((function(e){e.exports=function(e,t){var i,o,s,a,r,n,l,c;for(o=e.length-(i=3&e.length),s=t,r=3432918353,n=461845907,c=0;c<o;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,s=27492+(65535&(a=5*(65535&(s=(s^=l=(65535&(l=(l=(65535&l)*r+(((l>>>16)*r&65535)<<16)&4294967295)<<15|l>>>17))*n+(((l>>>16)*n&65535)<<16)&4294967295)<<13|s>>>19))+((5*(s>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:s^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*r+(((l>>>16)*r&65535)<<16)&4294967295)<<15|l>>>17))*n+(((l>>>16)*n&65535)<<16)&4294967295}return s^=e.length,s=2246822507*(65535&(s^=s>>>16))+((2246822507*(s>>>16)&65535)<<16)&4294967295,s=3266489909*(65535&(s^=s>>>13))+((3266489909*(s>>>16)&65535)<<16)&4294967295,(s^=s>>>16)>>>0}})),ga=t((function(e){e.exports=function(e,t){for(var i,o=e.length,s=t^o,a=0;o>=4;)i=1540483477*(65535&(i=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(i>>>16)&65535)<<16),s=1540483477*(65535&s)+((1540483477*(s>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),o-=4,++a;switch(o){case 3:s^=(255&e.charCodeAt(a+2))<<16;case 2:s^=(255&e.charCodeAt(a+1))<<8;case 1:s=1540483477*(65535&(s^=255&e.charCodeAt(a)))+((1540483477*(s>>>16)&65535)<<16)}return s=1540483477*(65535&(s^=s>>>13))+((1540483477*(s>>>16)&65535)<<16),(s^=s>>>15)>>>0}})),_a=ya,ba=ga;_a.murmur3=ya,_a.murmur2=ba;class va{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,i,o){this.ids.push(xa(e)),this.positions.push(t,i,o)}getPositions(e){const t=xa(e);let i=0,o=this.ids.length-1;for(;i<o;){const e=i+o>>1;this.ids[e]>=t?o=e:i=e+1}const s=[];for(;this.ids[i]===t;)s.push({index:this.positions[3*i],start:this.positions[3*i+1],end:this.positions[3*i+2]}),i++;return s}static serialize(e,t){const i=new Float64Array(e.ids),o=new Uint32Array(e.positions);return function e(t,i,o,s){for(;o<s;){const a=t[o+s>>1];let r=o-1,n=s+1;for(;;){do{r++}while(t[r]<a);do{n--}while(t[n]>a);if(r>=n)break;La(t,r,n),La(i,3*r,3*n),La(i,3*r+1,3*n+1),La(i,3*r+2,3*n+2)}n-o<s-n?(e(t,i,o,n),o=n+1):(e(t,i,n+1,s),s=n)}}(i,o,0,i.length-1),t&&t.push(i.buffer,o.buffer),{ids:i,positions:o}}static deserialize(e){const t=new va;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function xa(e){const t=+e;return!isNaN(t)&&t<=l?t:_a(String(e))}function La(e,t,i){const o=e[t];e[t]=e[i],e[i]=o}Ho("FeaturePositionMap",va);class Ia{constructor(e,t){this.gl=e.gl,this.location=t}}class wa extends Ia{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1f(this.location,e))}}class qa extends Ia{constructor(e,t){super(e,t),this.current=[0,0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]&&e[3]===this.current[3]||(this.current=e,this.gl.uniform4f(this.location,e[0],e[1],e[2],e[3]))}}class Fa extends Ia{constructor(e,t){super(e,t),this.current=ct.transparent}set(e){e.r===this.current.r&&e.g===this.current.g&&e.b===this.current.b&&e.a===this.current.a||(this.current=e,this.gl.uniform4f(this.location,e.r,e.g,e.b,e.a))}}const Ea=new Float32Array(16),Ta=new Float32Array(9);function Ca(e){return[Ps(255*e.r,255*e.g),Ps(255*e.b,255*e.a)]}class za{constructor(e,t,i){this.value=e,this.uniformNames=t.map(e=>"u_"+e),this.type=i}setUniform(e,t,i){e.set(i.constantOr(this.value))}getBinding(e,t,i){return"color"===this.type?new Fa(e,t):new wa(e,t)}}class Aa{constructor(e,t){this.uniformNames=t.map(e=>"u_"+e),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(e,t){this.pixelRatioFrom=t.pixelRatio,this.pixelRatioTo=e.pixelRatio,this.patternFrom=t.tlbr,this.patternTo=e.tlbr}setUniform(e,t,i,o){const s="u_pattern_to"===o?this.patternTo:"u_pattern_from"===o?this.patternFrom:"u_pixel_ratio_to"===o?this.pixelRatioTo:"u_pixel_ratio_from"===o?this.pixelRatioFrom:null;s&&e.set(s)}getBinding(e,t,i){return"u_pattern"===i.substr(0,9)?new qa(e,t):new wa(e,t)}}class Pa{constructor(e,t,i,o){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_"+e,type:"Float32",components:"color"===i?2:1,offset:0})),this.paintVertexArray=new o}populatePaintArray(e,t,i,o,s){const a=this.paintVertexArray.length,r=this.expression.evaluate(new gs(0),t,{},o,[],s);this.paintVertexArray.resize(e),this._setPaintValue(a,e,r)}updatePaintArray(e,t,i,o){const s=this.expression.evaluate({zoom:0},i,o);this._setPaintValue(e,t,s)}_setPaintValue(e,t,i){if("color"===this.type){const o=Ca(i);for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,o[0],o[1])}else{for(let o=e;o<t;o++)this.paintVertexArray.emplace(o,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ba{constructor(e,t,i,o,s,a){this.expression=e,this.uniformNames=t.map(e=>`u_${e}_t`),this.type=i,this.useIntegerZoom=o,this.zoom=s,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_"+e,type:"Float32",components:"color"===i?4:2,offset:0})),this.paintVertexArray=new a}populatePaintArray(e,t,i,o,s){const a=this.expression.evaluate(new gs(this.zoom),t,{},o,[],s),r=this.expression.evaluate(new gs(this.zoom+1),t,{},o,[],s),n=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(n,e,a,r)}updatePaintArray(e,t,i,o){const s=this.expression.evaluate({zoom:this.zoom},i,o),a=this.expression.evaluate({zoom:this.zoom+1},i,o);this._setPaintValue(e,t,s,a)}_setPaintValue(e,t,i,o){if("color"===this.type){const s=Ca(i),a=Ca(o);for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,s[0],s[1],a[0],a[1])}else{for(let s=e;s<t;s++)this.paintVertexArray.emplace(s,i,o);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(o))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t){const i=this.useIntegerZoom?Math.floor(t.zoom):t.zoom,o=f(this.expression.interpolationFactor(i,this.zoom,this.zoom+1),0,1);e.set(o)}getBinding(e,t,i){return new wa(e,t)}}class Ma{constructor(e,t,i,o,s,a){this.expression=e,this.type=t,this.useIntegerZoom=i,this.zoom=o,this.layerId=a,this.zoomInPaintVertexArray=new s,this.zoomOutPaintVertexArray=new s}populatePaintArray(e,t,i){const o=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(e),this.zoomOutPaintVertexArray.resize(e),this._setPaintValues(o,e,t.patterns&&t.patterns[this.layerId],i)}updatePaintArray(e,t,i,o,s){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],s)}_setPaintValues(e,t,i,o){if(!o||!i)return;const{min:s,mid:a,max:r}=i,n=o[s],l=o[a],c=o[r];if(n&&l&&c)for(let i=e;i<t;i++)this.zoomInPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],n.tl[0],n.tl[1],n.br[0],n.br[1],l.pixelRatio,n.pixelRatio),this.zoomOutPaintVertexArray.emplace(i,l.tl[0],l.tl[1],l.br[0],l.br[1],c.tl[0],c.tl[1],c.br[0],c.br[1],l.pixelRatio,c.pixelRatio)}upload(e){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=e.createVertexBuffer(this.zoomInPaintVertexArray,fa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=e.createVertexBuffer(this.zoomOutPaintVertexArray,fa.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Da{constructor(e,t,i=(()=>!0)){this.binders={},this._buffers=[];const o=[];for(const s in e.paint._values){if(!i(s))continue;const a=e.paint.get(s);if(!(a instanceof ws&&Ni(a.property.specification)))continue;const r=ka(s,e.type),n=a.value,l=a.property.specification.type,c=a.property.useIntegerZoom,u=a.property.specification["property-type"],h="cross-faded"===u||"cross-faded-data-driven"===u;if("constant"===n.kind)this.binders[s]=h?new Aa(n.value,r):new za(n.value,r,l),o.push("/u_"+s);else if("source"===n.kind||h){const i=Ua(s,l,"source");this.binders[s]=h?new Ma(n,l,c,t,i,e.id):new Pa(n,r,l,i),o.push("/a_"+s)}else{const e=Ua(s,l,"composite");this.binders[s]=new Ba(n,r,l,c,t,e),o.push("/z_"+s)}}this.cacheKey=o.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Pa||t instanceof Ba?t.maxValue:0}populatePaintArrays(e,t,i,o,s){for(const a in this.binders){const r=this.binders[a];(r instanceof Pa||r instanceof Ba||r instanceof Ma)&&r.populatePaintArray(e,t,i,o,s)}}setConstantPatternPositions(e,t){for(const i in this.binders){const o=this.binders[i];o instanceof Aa&&o.setConstantPatternPositions(e,t)}}updatePaintArrays(e,t,i,o,s){let a=!1;for(const r in e){const n=t.getPositions(r);for(const t of n){const n=i.feature(t.index);for(const i in this.binders){const l=this.binders[i];if((l instanceof Pa||l instanceof Ba||l instanceof Ma)&&!0===l.expression.isStateDependent){const c=o.paint.get(i);l.expression=c.value,l.updatePaintArray(t.start,t.end,n,e[r],s),a=!0}}}}return a}defines(){const e=[];for(const t in this.binders){const i=this.binders[t];(i instanceof za||i instanceof Aa)&&e.push(...i.uniformNames.map(e=>"#define HAS_UNIFORM_"+e))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const i=this.binders[t];if(i instanceof Pa||i instanceof Ba)for(let t=0;t<i.paintVertexAttributes.length;t++)e.push(i.paintVertexAttributes[t].name);else if(i instanceof Ma)for(let t=0;t<fa.members.length;t++)e.push(fa.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const i=this.binders[t];if(i instanceof za||i instanceof Aa||i instanceof Ba)for(const t of i.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e,t){const i=[];for(const o in this.binders){const s=this.binders[o];if(s instanceof za||s instanceof Aa||s instanceof Ba)for(const a of s.uniformNames)if(t[a]){const r=s.getBinding(e,t[a],a);i.push({name:a,property:o,binding:r})}}return i}setUniforms(e,t,i,o){for(const{name:e,property:s,binding:a}of t)this.binders[s].setUniform(a,o,i.get(s),e)}updatePaintBuffers(e){this._buffers=[];for(const t in this.binders){const i=this.binders[t];if(e&&i instanceof Ma){const t=2===e.fromScale?i.zoomInPaintVertexBuffer:i.zoomOutPaintVertexBuffer;t&&this._buffers.push(t)}else(i instanceof Pa||i instanceof Ba)&&i.paintVertexBuffer&&this._buffers.push(i.paintVertexBuffer)}}upload(e){for(const t in this.binders){const i=this.binders[t];(i instanceof Pa||i instanceof Ba||i instanceof Ma)&&i.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Pa||t instanceof Ba||t instanceof Ma)&&t.destroy()}}}class Sa{constructor(e,t,i=(()=>!0)){this.programConfigurations={};for(const o of e)this.programConfigurations[o.id]=new Da(o,t,i);this.needsUpload=!1,this._featureMap=new va,this._bufferOffset=0}populatePaintArrays(e,t,i,o,s,a){for(const i in this.programConfigurations)this.programConfigurations[i].populatePaintArrays(e,t,o,s,a);void 0!==t.id&&this._featureMap.add(t.id,i,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,i,o){for(const s of i)this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(e,this._featureMap,t,s,o)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}function ka(e,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[e]||[e.replace(t+"-","").replace(/-/g,"_")]}function Ua(e,t,i){const o={color:{source:Ns,composite:sa},number:{source:Ys,composite:Ns}},s=function(e){return{"line-pattern":{source:$s,composite:$s},"fill-pattern":{source:$s,composite:$s},"fill-extrusion-pattern":{source:$s,composite:$s}}[e]}(e);return s&&s[i]||o[t][i]}Ho("ConstantBinder",za),Ho("CrossFadedConstantBinder",Aa),Ho("SourceExpressionBinder",Pa),Ho("CrossFadedCompositeBinder",Ma),Ho("CompositeExpressionBinder",Ba),Ho("ProgramConfiguration",Da,{omit:["_buffers"]}),Ho("ProgramConfigurationSet",Sa);class Ra extends ke{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1},"custom"!==e.type&&(this.metadata=(e=e).metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Is(t.layout)),t.paint)){this._transitionablePaint=new vs(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new qs(t.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,i={}){null!=t&&this._validate(Oo,`layers.${this.id}.layout.${e}`,e,t,i)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return w(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,i={}){if(null!=t&&this._validate(Ro,`layers.${this.id}.paint.${e}`,e,t,i))return!1;if(w(e,"-transition"))return this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0),!1;{const i=this._transitionablePaint._values[e],o="cross-faded-data-driven"===i.property.specification["property-type"],s=i.value.isDataDriven(),a=i.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const r=this._transitionablePaint._values[e].value;return r.isDataDriven()||s||o||this._handleOverridablePaintPropertyUpdate(e,a,r)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,i){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){e.getCrossfadeParameters&&(this._crossfadeParameters=e.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),F(e,(e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length))}_validate(e,t,i,o,s={}){return(!s||!1!==s.validate)&&No(this,e.call(ko,{key:t,layerType:this.type,objectKey:i,value:o,styleSpec:Ue,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof ws&&Ni(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}}const Oa=Ss([{name:"a_pos",components:2,type:"Int16"}],4),{members:Na}=Oa;class $a{constructor(e=[]){this.segments=e}prepareSegment(e,t,i,o){let s=this.segments[this.segments.length-1];return e>$a.MAX_VERTEX_ARRAY_LENGTH&&C(`Max vertices per segment is ${$a.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!s||s.vertexLength+e>$a.MAX_VERTEX_ARRAY_LENGTH||s.sortKey!==o)&&(s={vertexOffset:t.length,primitiveOffset:i.length,vertexLength:0,primitiveLength:0},void 0!==o&&(s.sortKey=o),this.segments.push(s)),s}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,i,o){return new $a([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:o,vaos:{},sortKey:0}])}}$a.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ho("SegmentVector",$a);const Va=Math.pow(2,14)-1,Ga=-Va-1;function ja(e){const t=8192/e.extent,i=e.loadGeometry();for(let e=0;e<i.length;e++){const o=i[e];for(let e=0;e<o.length;e++){const i=o[e],s=Math.round(i.x*t),a=Math.round(i.y*t);i.x=f(s,Ga,Va),i.y=f(a,Ga,Va),(s<i.x||s>i.x+1||a<i.y||a>i.y+1)&&C("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return i}function Za(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?ja(e):[]}}function Ha(e,t,i,o,s){e.emplaceBack(2*t+(o+1)/2,2*i+(s+1)/2)}class Xa{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Us,this.indexArray=new Ws,this.segments=new $a,this.programConfigurations=new Sa(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,i){const o=this.layers[0],s=[];let a=null;"circle"===o.type&&(a=o.layout.get("circle-sort-key"));for(const{feature:t,id:o,index:r,sourceLayerIndex:n}of e){const e=this.layers[0]._featureFilter.needGeometry,l=Za(t,e);if(!this.layers[0]._featureFilter.filter(new gs(this.zoom),l,i))continue;const c=a?a.evaluate(l,{},i):void 0,u={id:o,properties:t.properties,type:t.type,sourceLayerIndex:n,index:r,geometry:e?l.geometry:ja(t),patterns:{},sortKey:c};s.push(u)}a&&s.sort((e,t)=>e.sortKey-t.sortKey);for(const o of s){const{geometry:s,index:a,sourceLayerIndex:r}=o,n=e[a].feature;this.addFeature(o,s,a,i),t.featureIndex.insert(n,s,a,r,this.index)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Na),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,i,o){for(const i of t)for(const t of i){const i=t.x,o=t.y;if(i<0||i>=8192||o<0||o>=8192)continue;const s=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),a=s.vertexLength;Ha(this.layoutVertexArray,i,o,-1,-1),Ha(this.layoutVertexArray,i,o,1,-1),Ha(this.layoutVertexArray,i,o,1,1),Ha(this.layoutVertexArray,i,o,-1,1),this.indexArray.emplaceBack(a,a+1,a+2),this.indexArray.emplaceBack(a,a+3,a+2),s.vertexLength+=4,s.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},o)}}function Qa(e,t){for(let i=0;i<e.length;i++)if(sr(t,e[i]))return!0;for(let i=0;i<t.length;i++)if(sr(e,t[i]))return!0;return!!Ya(e,t)}function Wa(e,t,i){return!!sr(e,t)||!!tr(t,e,i)}function Ka(e,t){if(1===e.length)return or(t,e[0]);for(let i=0;i<t.length;i++){const o=t[i];for(let t=0;t<o.length;t++)if(sr(e,o[t]))return!0}for(let i=0;i<e.length;i++)if(or(t,e[i]))return!0;for(let i=0;i<t.length;i++)if(Ya(e,t[i]))return!0;return!1}function Ja(e,t,i){if(e.length>1){if(Ya(e,t))return!0;for(let o=0;o<t.length;o++)if(tr(t[o],e,i))return!0}for(let o=0;o<e.length;o++)if(tr(e[o],t,i))return!0;return!1}function Ya(e,t){if(0===e.length||0===t.length)return!1;for(let i=0;i<e.length-1;i++){const o=e[i],s=e[i+1];for(let e=0;e<t.length-1;e++)if(er(o,s,t[e],t[e+1]))return!0}return!1}function er(e,t,i,o){return z(e,i,o)!==z(t,i,o)&&z(e,t,i)!==z(e,t,o)}function tr(e,t,i){const o=i*i;if(1===t.length)return e.distSqr(t[0])<o;for(let i=1;i<t.length;i++)if(ir(e,t[i-1],t[i])<o)return!0;return!1}function ir(e,t,i){const o=t.distSqr(i);if(0===o)return e.distSqr(t);const s=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/o;return e.distSqr(s<0?t:s>1?i:i.sub(t)._mult(s)._add(t))}function or(e,t){let i,o,s,a=!1;for(let r=0;r<e.length;r++){i=e[r];for(let e=0,r=i.length-1;e<i.length;r=e++)o=i[e],s=i[r],o.y>t.y!=s.y>t.y&&t.x<(s.x-o.x)*(t.y-o.y)/(s.y-o.y)+o.x&&(a=!a)}return a}function sr(e,t){let i=!1;for(let o=0,s=e.length-1;o<e.length;s=o++){const a=e[o],r=e[s];a.y>t.y!=r.y>t.y&&t.x<(r.x-a.x)*(t.y-a.y)/(r.y-a.y)+a.x&&(i=!i)}return i}function ar(e,t,i,o,a){for(const s of e)if(t<=s.x&&i<=s.y&&o>=s.x&&a>=s.y)return!0;const r=[new s(t,i),new s(t,a),new s(o,a),new s(o,i)];if(e.length>2)for(const t of r)if(sr(e,t))return!0;for(let t=0;t<e.length-1;t++)if(rr(e[t],e[t+1],r))return!0;return!1}function rr(e,t,i){const o=i[0],s=i[2];if(e.x<o.x&&t.x<o.x||e.x>s.x&&t.x>s.x||e.y<o.y&&t.y<o.y||e.y>s.y&&t.y>s.y)return!1;const a=z(e,t,i[0]);return a!==z(e,t,i[1])||a!==z(e,t,i[2])||a!==z(e,t,i[3])}function nr(e,t,i){const o=t.paint.get(e).value;return"constant"===o.kind?o.value:i.programConfigurations.get(t.id).getMaxValue(e)}function lr(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function cr(e,t,i,o,a){if(!t[0]&&!t[1])return e;const r=s.convert(t)._mult(a);"viewport"===i&&r._rotate(-o);const n=[];for(let t=0;t<e.length;t++)n.push(e[t].sub(r));return n}function ur(e,t,i,o){const a=s.convert(e)._mult(o);return"viewport"===t&&a._rotate(-i),a}Ho("CircleBucket",Xa,{omit:["layers"]});const hr=new As({"circle-sort-key":new Es(Ue.layout_circle["circle-sort-key"])});var pr={paint:new As({"circle-radius":new Es(Ue.paint_circle["circle-radius"]),"circle-color":new Es(Ue.paint_circle["circle-color"]),"circle-blur":new Es(Ue.paint_circle["circle-blur"]),"circle-opacity":new Es(Ue.paint_circle["circle-opacity"]),"circle-translate":new Fs(Ue.paint_circle["circle-translate"]),"circle-translate-anchor":new Fs(Ue.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Fs(Ue.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Fs(Ue.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Es(Ue.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Es(Ue.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Es(Ue.paint_circle["circle-stroke-opacity"])}),layout:hr},mr="undefined"!=typeof Float32Array?Float32Array:Array;function dr(){var e=new mr(9);return mr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function fr(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function yr(e,t,i){var o=t[0],s=t[1],a=t[2],r=t[3],n=t[4],l=t[5],c=t[6],u=t[7],h=t[8],p=t[9],m=t[10],d=t[11],f=t[12],y=t[13],g=t[14],_=t[15],b=i[0],v=i[1],x=i[2],L=i[3];return e[0]=b*o+v*n+x*h+L*f,e[1]=b*s+v*l+x*p+L*y,e[2]=b*a+v*c+x*m+L*g,e[3]=b*r+v*u+x*d+L*_,e[4]=(b=i[4])*o+(v=i[5])*n+(x=i[6])*h+(L=i[7])*f,e[5]=b*s+v*l+x*p+L*y,e[6]=b*a+v*c+x*m+L*g,e[7]=b*r+v*u+x*d+L*_,e[8]=(b=i[8])*o+(v=i[9])*n+(x=i[10])*h+(L=i[11])*f,e[9]=b*s+v*l+x*p+L*y,e[10]=b*a+v*c+x*m+L*g,e[11]=b*r+v*u+x*d+L*_,e[12]=(b=i[12])*o+(v=i[13])*n+(x=i[14])*h+(L=i[15])*f,e[13]=b*s+v*l+x*p+L*y,e[14]=b*a+v*c+x*m+L*g,e[15]=b*r+v*u+x*d+L*_,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var gr=yr;function _r(){var e=new mr(3);return mr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function br(e){var t=new mr(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function vr(e){return Math.hypot(e[0],e[1],e[2])}function xr(e,t,i){var o=new mr(3);return o[0]=e,o[1]=t,o[2]=i,o}function Lr(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function Ir(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function wr(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function qr(e,t,i,o){return e[0]=t[0]+i[0]*o,e[1]=t[1]+i[1]*o,e[2]=t[2]+i[2]*o,e}function Fr(e,t){var i=t[0],o=t[1],s=t[2],a=i*i+o*o+s*s;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function Er(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Tr(e,t,i){var o=t[0],s=t[1],a=t[2],r=i[0],n=i[1],l=i[2];return e[0]=s*l-a*n,e[1]=a*r-o*l,e[2]=o*n-s*r,e}function Cr(e,t,i){var o=i[0],s=i[1],a=i[2],r=t[0],n=t[1],l=t[2],c=s*l-a*n,u=a*r-o*l,h=o*n-s*r,p=s*h-a*u,m=a*c-o*h,d=o*u-s*c,f=2*i[3];return u*=f,h*=f,m*=2,d*=2,e[0]=r+(c*=f)+(p*=2),e[1]=n+u+m,e[2]=l+h+d,e}var zr,Ar=Ir,Pr=vr;function Br(e,t,i){var o=t[0],s=t[1],a=t[2],r=t[3];return e[0]=i[0]*o+i[4]*s+i[8]*a+i[12]*r,e[1]=i[1]*o+i[5]*s+i[9]*a+i[13]*r,e[2]=i[2]*o+i[6]*s+i[10]*a+i[14]*r,e[3]=i[3]*o+i[7]*s+i[11]*a+i[15]*r,e}function Mr(){var e=new mr(4);return mr!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Dr(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Sr(e,t,i){i*=.5;var o=t[0],s=t[1],a=t[2],r=t[3],n=Math.sin(i),l=Math.cos(i);return e[0]=o*l+r*n,e[1]=s*l+a*n,e[2]=a*l-s*n,e[3]=r*l-o*n,e}_r(),zr=new mr(4),mr!=Float32Array&&(zr[0]=0,zr[1]=0,zr[2]=0,zr[3]=0),_r(),xr(1,0,0),xr(0,1,0),Mr(),Mr(),dr();class kr{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,i){const o=Math.pow(2,i),s=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(i=>{const s=Br([],i,e),a=1/s[3]/t*o;return function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}(s,s,[a,a,1/s[3],a])}),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(e=>{const t=Fr([],Tr([],Ar([],s[e[0]],s[e[1]]),Ar([],s[e[2]],s[e[1]]))),i=-Er(t,s[e[1]]);return t.concat(i)});return new kr(s,a)}}class Ur{constructor(e,t){this.min=e,this.max=t,this.center=wr([],Lr([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],i=br(this.min),o=br(this.max);for(let e=0;e<t.length;e++)i[e]=t[e]?this.min[e]:this.center[e],o[e]=t[e]?this.center[e]:this.max[e];return o[2]=this.max[2],new Ur(i,o)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}intersects(e){const t=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let i=!0;for(let a=0;a<e.planes.length;a++){const r=e.planes[a];let n=0;for(let e=0;e<t.length;e++)n+=(o=r)[0]*(s=t[e])[0]+o[1]*s[1]+o[2]*s[2]+o[3]*s[3]>=0;if(0===n)return 0;n!==t.length&&(i=!1)}var o,s;if(i)return 2;for(let t=0;t<3;t++){let i=Number.MAX_VALUE,o=-Number.MAX_VALUE;for(let s=0;s<e.points.length;s++){const a=e.points[s][t]-this.min[t];i=Math.min(i,a),o=Math.max(o,a)}if(o<0||i>this.max[t]-this.min[t])return 0}return 1}}function Rr(e,t,i){const o=Br([],[e.x,e.y,t,1],i);return new s(o[0]/o[3],o[1]/o[3])}const Or=xr(0,0,0),Nr=xr(0,0,1);function $r(e,t){const i=_r();return Or[2]=t,e.intersectsPlane(Or,Nr,i),new s(i[0],i[1])}class Vr extends Xa{}function Gr(e,{width:t,height:i},o,s){if(s){if(s instanceof Uint8ClampedArray)s=new Uint8Array(s.buffer);else if(s.length!==t*i*o)throw new RangeError("mismatched image size")}else s=new Uint8Array(t*i*o);return e.width=t,e.height=i,e.data=s,e}function jr(e,{width:t,height:i},o){if(t===e.width&&i===e.height)return;const s=Gr({},{width:t,height:i},o);Zr(e,s,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,t),height:Math.min(e.height,i)},o),e.width=t,e.height=i,e.data=s.data}function Zr(e,t,i,o,s,a){if(0===s.width||0===s.height)return t;if(s.width>e.width||s.height>e.height||i.x>e.width-s.width||i.y>e.height-s.height)throw new RangeError("out of range source coordinates for image copy");if(s.width>t.width||s.height>t.height||o.x>t.width-s.width||o.y>t.height-s.height)throw new RangeError("out of range destination coordinates for image copy");const r=e.data,n=t.data;for(let l=0;l<s.height;l++){const c=((i.y+l)*e.width+i.x)*a,u=((o.y+l)*t.width+o.x)*a;for(let e=0;e<s.width*a;e++)n[u+e]=r[c+e]}return t}Ho("HeatmapBucket",Vr,{omit:["layers"]});class Hr{constructor(e,t){Gr(this,e,1,t)}resize(e){jr(this,e,1)}clone(){return new Hr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,i,o,s){Zr(e,t,i,o,s,1)}}class Xr{constructor(e,t){Gr(this,e,4,t)}resize(e){jr(this,e,4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Xr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,i,o,s){Zr(e,t,i,o,s,4)}}Ho("AlphaImage",Hr),Ho("RGBAImage",Xr);var Qr={paint:new As({"heatmap-radius":new Es(Ue.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Es(Ue.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Fs(Ue.paint_heatmap["heatmap-intensity"]),"heatmap-color":new zs(Ue.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Fs(Ue.paint_heatmap["heatmap-opacity"])})};function Wr(e){const t={},i=e.resolution||256,o=e.clips?e.clips.length:1,s=e.image||new Xr({width:i,height:o}),a=(i,o,a)=>{t[e.evaluationKey]=a;const r=e.expression.evaluate(t);s.data[i+o+0]=Math.floor(255*r.r/r.a),s.data[i+o+1]=Math.floor(255*r.g/r.a),s.data[i+o+2]=Math.floor(255*r.b/r.a),s.data[i+o+3]=Math.floor(255*r.a)};if(e.clips)for(let t=0,s=0;t<o;++t,s+=4*i)for(let o=0,r=0;o<i;o++,r+=4){const n=o/(i-1),{start:l,end:c}=e.clips[t];a(s,r,l*(1-n)+c*n)}else for(let e=0,t=0;e<i;e++,t+=4)a(0,t,e/(i-1));return s}var Kr={paint:new As({"hillshade-illumination-direction":new Fs(Ue.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Fs(Ue.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Fs(Ue.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Fs(Ue.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Fs(Ue.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Fs(Ue.paint_hillshade["hillshade-accent-color"])})};const Jr=Ss([{name:"a_pos",components:2,type:"Int16"}],4),{members:Yr}=Jr;var en=on,tn=on;function on(e,t,i){i=i||2;var o,s,a,r,n,l,c,u=t&&t.length,h=u?t[0]*i:e.length,p=sn(e,0,h,i,!0),m=[];if(!p||p.next===p.prev)return m;if(u&&(p=function(e,t,i,o){var s,a,r,n=[];for(s=0,a=t.length;s<a;s++)(r=sn(e,t[s]*o,s<a-1?t[s+1]*o:e.length,o,!1))===r.next&&(r.steiner=!0),n.push(fn(r));for(n.sort(hn),s=0;s<n.length;s++)pn(n[s],i),i=an(i,i.next);return i}(e,t,p,i)),e.length>80*i){o=a=e[0],s=r=e[1];for(var d=i;d<h;d+=i)(n=e[d])<o&&(o=n),(l=e[d+1])<s&&(s=l),n>a&&(a=n),l>r&&(r=l);c=0!==(c=Math.max(a-o,r-s))?1/c:0}return rn(p,m,i,o,s,c),m}function sn(e,t,i,o,s){var a,r;if(s===Tn(e,t,i,o)>0)for(a=t;a<i;a+=o)r=qn(a,e[a],e[a+1],r);else for(a=i-o;a>=t;a-=o)r=qn(a,e[a],e[a+1],r);return r&&bn(r,r.next)&&(Fn(r),r=r.next),r}function an(e,t){if(!e)return e;t||(t=e);var i,o=e;do{if(i=!1,o.steiner||!bn(o,o.next)&&0!==_n(o.prev,o,o.next))o=o.next;else{if(Fn(o),(o=t=o.prev)===o.next)break;i=!0}}while(i||o!==t);return t}function rn(e,t,i,o,s,a,r){if(e){!r&&a&&function(e,t,i,o){var s=e;do{null===s.z&&(s.z=dn(s.x,s.y,t,i,o)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next}while(s!==e);s.prevZ.nextZ=null,s.prevZ=null,function(e){var t,i,o,s,a,r,n,l,c=1;do{for(i=e,e=null,a=null,r=0;i;){for(r++,o=i,n=0,t=0;t<c&&(n++,o=o.nextZ);t++);for(l=c;n>0||l>0&&o;)0!==n&&(0===l||!o||i.z<=o.z)?(s=i,i=i.nextZ,n--):(s=o,o=o.nextZ,l--),a?a.nextZ=s:e=s,s.prevZ=a,a=s;i=o}a.nextZ=null,c*=2}while(r>1)}(s)}(e,o,s,a);for(var n,l,c=e;e.prev!==e.next;)if(n=e.prev,l=e.next,a?ln(e,o,s,a):nn(e))t.push(n.i/i),t.push(e.i/i),t.push(l.i/i),Fn(e),e=l.next,c=l.next;else if((e=l)===c){r?1===r?rn(e=cn(an(e),t,i),t,i,o,s,a,2):2===r&&un(e,t,i,o,s,a):rn(an(e),t,i,o,s,a,1);break}}}function nn(e){var t=e.prev,i=e,o=e.next;if(_n(t,i,o)>=0)return!1;for(var s=e.next.next;s!==e.prev;){if(yn(t.x,t.y,i.x,i.y,o.x,o.y,s.x,s.y)&&_n(s.prev,s,s.next)>=0)return!1;s=s.next}return!0}function ln(e,t,i,o){var s=e.prev,a=e,r=e.next;if(_n(s,a,r)>=0)return!1;for(var n=s.x>a.x?s.x>r.x?s.x:r.x:a.x>r.x?a.x:r.x,l=s.y>a.y?s.y>r.y?s.y:r.y:a.y>r.y?a.y:r.y,c=dn(s.x<a.x?s.x<r.x?s.x:r.x:a.x<r.x?a.x:r.x,s.y<a.y?s.y<r.y?s.y:r.y:a.y<r.y?a.y:r.y,t,i,o),u=dn(n,l,t,i,o),h=e.prevZ,p=e.nextZ;h&&h.z>=c&&p&&p.z<=u;){if(h!==e.prev&&h!==e.next&&yn(s.x,s.y,a.x,a.y,r.x,r.y,h.x,h.y)&&_n(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==e.prev&&p!==e.next&&yn(s.x,s.y,a.x,a.y,r.x,r.y,p.x,p.y)&&_n(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=c;){if(h!==e.prev&&h!==e.next&&yn(s.x,s.y,a.x,a.y,r.x,r.y,h.x,h.y)&&_n(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=u;){if(p!==e.prev&&p!==e.next&&yn(s.x,s.y,a.x,a.y,r.x,r.y,p.x,p.y)&&_n(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function cn(e,t,i){var o=e;do{var s=o.prev,a=o.next.next;!bn(s,a)&&vn(s,o,o.next,a)&&In(s,a)&&In(a,s)&&(t.push(s.i/i),t.push(o.i/i),t.push(a.i/i),Fn(o),Fn(o.next),o=e=a),o=o.next}while(o!==e);return an(o)}function un(e,t,i,o,s,a){var r=e;do{for(var n=r.next.next;n!==r.prev;){if(r.i!==n.i&&gn(r,n)){var l=wn(r,n);return r=an(r,r.next),l=an(l,l.next),rn(r,t,i,o,s,a),void rn(l,t,i,o,s,a)}n=n.next}r=r.next}while(r!==e)}function hn(e,t){return e.x-t.x}function pn(e,t){if(t=function(e,t){var i,o=t,s=e.x,a=e.y,r=-1/0;do{if(a<=o.y&&a>=o.next.y&&o.next.y!==o.y){var n=o.x+(a-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(n<=s&&n>r){if(r=n,n===s){if(a===o.y)return o;if(a===o.next.y)return o.next}i=o.x<o.next.x?o:o.next}}o=o.next}while(o!==t);if(!i)return null;if(s===r)return i;var l,c=i,u=i.x,h=i.y,p=1/0;o=i;do{s>=o.x&&o.x>=u&&s!==o.x&&yn(a<h?s:r,a,u,h,a<h?r:s,a,o.x,o.y)&&(l=Math.abs(a-o.y)/(s-o.x),In(o,e)&&(l<p||l===p&&(o.x>i.x||o.x===i.x&&mn(i,o)))&&(i=o,p=l)),o=o.next}while(o!==c);return i}(e,t)){var i=wn(t,e);an(t,t.next),an(i,i.next)}}function mn(e,t){return _n(e.prev,e,t.prev)<0&&_n(t.next,e,e.next)<0}function dn(e,t,i,o,s){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*s)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-o)*s)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function fn(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function yn(e,t,i,o,s,a,r,n){return(s-r)*(t-n)-(e-r)*(a-n)>=0&&(e-r)*(o-n)-(i-r)*(t-n)>=0&&(i-r)*(a-n)-(s-r)*(o-n)>=0}function gn(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&vn(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(In(e,t)&&In(t,e)&&function(e,t){var i=e,o=!1,s=(e.x+t.x)/2,a=(e.y+t.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&s<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(o=!o),i=i.next}while(i!==e);return o}(e,t)&&(_n(e.prev,e,t.prev)||_n(e,t.prev,t))||bn(e,t)&&_n(e.prev,e,e.next)>0&&_n(t.prev,t,t.next)>0)}function _n(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function bn(e,t){return e.x===t.x&&e.y===t.y}function vn(e,t,i,o){var s=Ln(_n(e,t,i)),a=Ln(_n(e,t,o)),r=Ln(_n(i,o,e)),n=Ln(_n(i,o,t));return s!==a&&r!==n||!(0!==s||!xn(e,i,t))||!(0!==a||!xn(e,o,t))||!(0!==r||!xn(i,e,o))||!(0!==n||!xn(i,t,o))}function xn(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Ln(e){return e>0?1:e<0?-1:0}function In(e,t){return _n(e.prev,e,e.next)<0?_n(e,t,e.next)>=0&&_n(e,e.prev,t)>=0:_n(e,t,e.prev)<0||_n(e,e.next,t)<0}function wn(e,t){var i=new En(e.i,e.x,e.y),o=new En(t.i,t.x,t.y),s=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=s,s.prev=i,o.next=i,i.prev=o,a.next=o,o.prev=a,o}function qn(e,t,i,o){var s=new En(e,t,i);return o?(s.next=o.next,s.prev=o,o.next.prev=s,o.next=s):(s.prev=s,s.next=s),s}function Fn(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function En(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Tn(e,t,i,o){for(var s=0,a=t,r=i-o;a<i;a+=o)s+=(e[r]-e[a])*(e[a+1]+e[r+1]),r=a;return s}function Cn(e,t,i,o,s){!function e(t,i,o,s,a){for(;s>o;){if(s-o>600){var r=s-o+1,n=i-o+1,l=Math.log(r),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(r-c)/r)*(n-r/2<0?-1:1);e(t,i,Math.max(o,Math.floor(i-n*c/r+u)),Math.min(s,Math.floor(i+(r-n)*c/r+u)),a)}var h=t[i],p=o,m=s;for(zn(t,o,i),a(t[s],h)>0&&zn(t,o,s);p<m;){for(zn(t,p,m),p++,m--;a(t[p],h)<0;)p++;for(;a(t[m],h)>0;)m--}0===a(t[o],h)?zn(t,o,m):zn(t,++m,s),m<=i&&(o=m+1),i<=m&&(s=m-1)}}(e,t,i||0,o||e.length-1,s||An)}function zn(e,t,i){var o=e[t];e[t]=e[i],e[i]=o}function An(e,t){return e<t?-1:e>t?1:0}function Pn(e,t){const i=e.length;if(i<=1)return[e];const o=[];let s,a;for(let t=0;t<i;t++){const i=A(e[t]);0!==i&&(e[t].area=Math.abs(i),void 0===a&&(a=i<0),a===i<0?(s&&o.push(s),s=[e[t]]):s.push(e[t]))}if(s&&o.push(s),t>1)for(let e=0;e<o.length;e++)o[e].length<=t||(Cn(o[e],t,1,o[e].length-1,Bn),o[e]=o[e].slice(0,t));return o}function Bn(e,t){return t.area-e.area}function Mn(e,t,i){const o=i.patternDependencies;let s=!1;for(const i of t){const t=i.paint.get(e+"-pattern");t.isConstant()||(s=!0);const a=t.constantOr(null);a&&(s=!0,o[a.to]=!0,o[a.from]=!0)}return s}function Dn(e,t,i,o,s){const a=s.patternDependencies;for(const r of t){const t=r.paint.get(e+"-pattern").value;if("constant"!==t.kind){let e=t.evaluate({zoom:o-1},i,{},s.availableImages),n=t.evaluate({zoom:o},i,{},s.availableImages),l=t.evaluate({zoom:o+1},i,{},s.availableImages);e=e&&e.name?e.name:e,n=n&&n.name?n.name:n,l=l&&l.name?l.name:l,a[e]=!0,a[n]=!0,a[l]=!0,i.patterns[r.id]={min:e,mid:n,max:l}}}return i}on.deviation=function(e,t,i,o){var s=t&&t.length,a=Math.abs(Tn(e,0,s?t[0]*i:e.length,i));if(s)for(var r=0,n=t.length;r<n;r++)a-=Math.abs(Tn(e,t[r]*i,r<n-1?t[r+1]*i:e.length,i));var l=0;for(r=0;r<o.length;r+=3){var c=o[r]*i,u=o[r+1]*i,h=o[r+2]*i;l+=Math.abs((e[c]-e[h])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[h+1]-e[c+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},on.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},o=0,s=0;s<e.length;s++){for(var a=0;a<e[s].length;a++)for(var r=0;r<t;r++)i.vertices.push(e[s][a][r]);s>0&&i.holes.push(o+=e[s-1].length)}return i},en.default=tn;class Sn{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Us,this.indexArray=new Ws,this.indexArray2=new ia,this.programConfigurations=new Sa(e.layers,e.zoom),this.segments=new $a,this.segments2=new $a,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,i){this.hasPattern=Mn("fill",this.layers,t);const o=this.layers[0].layout.get("fill-sort-key"),s=[];for(const{feature:a,id:r,index:n,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=Za(a,e);if(!this.layers[0]._featureFilter.filter(new gs(this.zoom),c,i))continue;const u=o?o.evaluate(c,{},i,t.availableImages):void 0,h={id:r,properties:a.properties,type:a.type,sourceLayerIndex:l,index:n,geometry:e?c.geometry:ja(a),patterns:{},sortKey:u};s.push(h)}o&&s.sort((e,t)=>e.sortKey-t.sortKey);for(const o of s){const{geometry:s,index:a,sourceLayerIndex:r}=o;if(this.hasPattern){const e=Dn("fill",this.layers,o,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(o,s,a,i,{});t.featureIndex.insert(e[a].feature,s,a,r,this.index)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}addFeatures(e,t,i){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Yr),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,i,o,s){for(const e of Pn(t,500)){let t=0;for(const i of e)t+=i.length;const i=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),o=i.vertexLength,s=[],a=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&a.push(s.length/2);const i=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),o=i.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(o+t.length-1,o),s.push(t[0].x),s.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(o+e-1,o+e),s.push(t[e].x),s.push(t[e].y);i.vertexLength+=t.length,i.primitiveLength+=t.length}const r=en(s,a);for(let e=0;e<r.length;e+=3)this.indexArray.emplaceBack(o+r[e],o+r[e+1],o+r[e+2]);i.vertexLength+=t,i.primitiveLength+=r.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,s,o)}}Ho("FillBucket",Sn,{omit:["layers","patternFeatures"]});const kn=new As({"fill-sort-key":new Es(Ue.layout_fill["fill-sort-key"])});var Un={paint:new As({"fill-antialias":new Fs(Ue.paint_fill["fill-antialias"]),"fill-opacity":new Es(Ue.paint_fill["fill-opacity"]),"fill-color":new Es(Ue.paint_fill["fill-color"]),"fill-outline-color":new Es(Ue.paint_fill["fill-outline-color"]),"fill-translate":new Fs(Ue.paint_fill["fill-translate"]),"fill-translate-anchor":new Fs(Ue.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ts(Ue.paint_fill["fill-pattern"])}),layout:kn};const Rn=Ss([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),On=Ss([{name:"a_centroid_pos",components:2,type:"Uint16"}]),{members:Nn}=Rn;var $n=Vn;function Vn(e,t,i,o,s){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=o,this._values=s,e.readFields(Gn,this,t)}function Gn(e,t,i){1==e?t.id=i.readVarint():2==e?function(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var o=t._keys[e.readVarint()],s=t._values[e.readVarint()];t.properties[o]=s}}(i,t):3==e?t.type=i.readVarint():4==e&&(t._geometry=i.pos)}function jn(e){for(var t,i,o=0,s=0,a=e.length,r=a-1;s<a;r=s++)o+=((i=e[r]).x-(t=e[s]).x)*(t.y+i.y);return o}Vn.types=["Unknown","Point","LineString","Polygon"],Vn.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,o=1,a=0,r=0,n=0,l=[];e.pos<i;){if(a<=0){var c=e.readVarint();o=7&c,a=c>>3}if(a--,1===o||2===o)r+=e.readSVarint(),n+=e.readSVarint(),1===o&&(t&&l.push(t),t=[]),t.push(new s(r,n));else{if(7!==o)throw new Error("unknown command "+o);t&&t.push(t[0].clone())}}return t&&l.push(t),l},Vn.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,o=0,s=0,a=0,r=1/0,n=-1/0,l=1/0,c=-1/0;e.pos<t;){if(o<=0){var u=e.readVarint();i=7&u,o=u>>3}if(o--,1===i||2===i)(s+=e.readSVarint())<r&&(r=s),s>n&&(n=s),(a+=e.readSVarint())<l&&(l=a),a>c&&(c=a);else if(7!==i)throw new Error("unknown command "+i)}return[r,l,n,c]},Vn.prototype.toGeoJSON=function(e,t,i){var o,s,a=this.extent*Math.pow(2,i),r=this.extent*e,n=this.extent*t,l=this.loadGeometry(),c=Vn.types[this.type];function u(e){for(var t=0;t<e.length;t++){var i=e[t];e[t]=[360*(i.x+r)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+n)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(o=0;o<l.length;o++)h[o]=l[o][0];u(l=h);break;case 2:for(o=0;o<l.length;o++)u(l[o]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var i,o,s=[],a=0;a<t;a++){var r=jn(e[a]);0!==r&&(void 0===o&&(o=r<0),o===r<0?(i&&s.push(i),i=[e[a]]):i.push(e[a]))}return i&&s.push(i),s}(l),o=0;o<l.length;o++)for(s=0;s<l[o].length;s++)u(l[o][s])}1===l.length?l=l[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var Zn=Hn;function Hn(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(Xn,this,t),this.length=this._features.length}function Xn(e,t,i){15===e?t.version=i.readVarint():1===e?t.name=i.readString():5===e?t.extent=i.readVarint():2===e?t._features.push(i.pos):3===e?t._keys.push(i.readString()):4===e&&t._values.push(function(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var o=e.readVarint()>>3;t=1===o?e.readString():2===o?e.readFloat():3===o?e.readDouble():4===o?e.readVarint64():5===o?e.readVarint():6===o?e.readSVarint():7===o?e.readBoolean():null}return t}(i))}function Qn(e,t,i){if(3===e){var o=new Zn(i,i.readVarint()+i.pos);o.length&&(t[o.name]=o)}}Hn.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new $n(this._pbf,t,this.extent,this._keys,this._values)};var Wn={VectorTile:function(e,t){this.layers=e.readFields(Qn,{},t)},VectorTileFeature:$n,VectorTileLayer:Zn};const Kn=Wn.VectorTileFeature.types,Jn=Math.pow(2,13);function Yn(e,t,i,o,s,a,r,n){e.emplaceBack((t<<1)+r,(i<<1)+a,(Math.floor(o*Jn)<<1)+s,Math.round(n))}class el{constructor(){this.acc=new s(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new s(e.x,e.y),this.max=new s(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);let i=!!this.borders;const o=this.min,s=this.max;e.x<o.x?(o.x=e.x,i=!0):e.x>s.x&&(s.x=e.x,i=!0),e.y<o.y?(o.y=e.y,i=!0):e.y>s.y&&(s.y=e.y,i=!0),((0===e.x||8192===e.x)&&e.x===t.x)!=((0===e.y||8192===e.y)&&e.y===t.y)&&this.processBorderOverlap(e,t),i&&this.checkBorderIntersection(e,t)}checkBorderIntersection(e,t){t.x<0!=e.x<0&&this.addBorderIntersection(0,Yt(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>8192!=e.x>8192&&this.addBorderIntersection(1,Yt(t.y,e.y,(8192-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Yt(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>8192!=e.y>8192&&this.addBorderIntersection(3,Yt(t.x,e.x,(8192-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const i=this.borders[e];t<i[0]&&(i[0]=t),t>i[1]&&(i[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const i=0===e.x?0:1;this.addBorderIntersection(i,t.y),this.addBorderIntersection(i,e.y)}else{const i=0===e.y?2:3;this.addBorderIntersection(i,t.x),this.addBorderIntersection(i,e.x)}}centroid(){const e=this.polyCount.reduce((e,t)=>e+t.edges,0);return 0!==e?this.acc.div(e)._round():new s(0,0)}span(){return new s(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,t)=>e+ +(t[0]!==Number.MAX_VALUE),0)}}class tl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.layoutVertexArray=new Rs,this.centroidVertexArray=new ia,this.indexArray=new Ws,this.programConfigurations=new Sa(e.layers,e.zoom),this.segments=new $a,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.enableTerrain=e.enableTerrain}populate(e,t,i){this.features=[],this.hasPattern=Mn("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDone=[!1,!1,!1,!1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/8192/(1<<e.z)}(i);for(const{feature:o,id:s,index:a,sourceLayerIndex:r}of e){const e=this.layers[0]._featureFilter.needGeometry,n=Za(o,e);if(!this.layers[0]._featureFilter.filter(new gs(this.zoom),n,i))continue;const l={id:s,sourceLayerIndex:r,index:a,geometry:e?n.geometry:ja(o),properties:o.properties,type:o.type,patterns:{}};this.hasPattern?this.features.push(Dn("fill-extrusion",this.layers,l,this.zoom,t)):this.addFeature(l,l.geometry,a,i,{}),t.featureIndex.insert(o,l.geometry,a,r,this.index)}this.sortBorders()}addFeatures(e,t,i){for(const e of this.features){const{geometry:o}=e;this.addFeature(e,o,e.index,t,i)}this.sortBorders()}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Nn),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,On.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,i,o,s){const a=this.enableTerrain&&e.properties&&e.properties.hasOwnProperty("type")&&e.properties.hasOwnProperty("height")&&"Polygon"===Kn[e.type]?new el:null;for(const i of Pn(t,500)){let t=0,o=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);if(0===i.length||(r=i[0]).every(e=>e.x<=0)||r.every(e=>e.x>=8192)||r.every(e=>e.y<=0)||r.every(e=>e.y>=8192))continue;for(let e=0;e<i.length;e++){const s=i[e];if(0===s.length)continue;t+=s.length;let r=0;a&&a.startRing(s[0]);for(let e=0;e<s.length;e++){const t=s[e];if(e>=1){const i=s[e-1];if(!il(t,i)){a&&a.append(t,i),o.vertexLength+4>$a.MAX_VERTEX_ARRAY_LENGTH&&(o=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const e=t.sub(i)._perp(),s=e.x/(Math.abs(e.x)+Math.abs(e.y)),n=e.y>0?1:0,l=i.dist(t);r+l>32768&&(r=0),Yn(this.layoutVertexArray,t.x,t.y,s,n,0,0,r),Yn(this.layoutVertexArray,t.x,t.y,s,n,0,1,r),r+=l,Yn(this.layoutVertexArray,i.x,i.y,s,n,0,0,r),Yn(this.layoutVertexArray,i.x,i.y,s,n,0,1,r);const c=o.vertexLength;this.indexArray.emplaceBack(c,c+2,c+1),this.indexArray.emplaceBack(c+1,c+2,c+3),o.vertexLength+=4,o.primitiveLength+=2}}}}if(o.vertexLength+t>$a.MAX_VERTEX_ARRAY_LENGTH&&(o=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray)),"Polygon"!==Kn[e.type])continue;const s=[],n=[],l=o.vertexLength;for(let e=0;e<i.length;e++){const t=i[e];if(0!==t.length){t!==i[0]&&n.push(s.length/2);for(let e=0;e<t.length;e++){const i=t[e];Yn(this.layoutVertexArray,i.x,i.y,0,0,1,1,0),s.push(i.x),s.push(i.y),a&&a.currentPolyCount.top++}}}const c=en(s,n);for(let e=0;e<c.length;e+=3)this.indexArray.emplaceBack(l+c[e],l+c[e+2],l+c[e+1]);o.primitiveLength+=c.length/3,o.vertexLength+=t}var r;if(a&&a.polyCount.length>0){if(a.borders){a.vertexArrayOffset=this.centroidVertexArray.length;const e=a.borders,t=this.featuresOnBorder.push(a)-1;for(let i=0;i<4;i++)e[i][0]!==Number.MAX_VALUE&&this.borders[i].push(t)}this.encodeCentroid(a.borders?void 0:a.centroid(),a)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,s,o)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((t,i)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[i].borders[e][0])}encodeCentroid(e,t,i=!0){let o,s;if(e)if(0!==e.y){const i=t.span()._mult(this.tileToMeter);o=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(i.x/10)),s=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(i.y/10))}else o=Math.ceil(7.3*e.x),s=0;else o=0,s=+i;let a=i?this.centroidVertexArray.length:t.vertexArrayOffset;for(const e of t.polyCount){i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*e.edges+e.top);for(let t=0;t<2*e.edges;t++)this.centroidVertexArray.emplace(a++,0,s),this.centroidVertexArray.emplace(a++,o,s);for(let t=0;t<e.top;t++)this.centroidVertexArray.emplace(a++,o,s)}}}function il(e,t){return e.x===t.x&&(e.x<0||e.x>8192)||e.y===t.y&&(e.y<0||e.y>8192)}Ho("FillExtrusionBucket",tl,{omit:["layers","features"]}),Ho("PartMetadata",el);var ol={paint:new As({"fill-extrusion-opacity":new Fs(Ue["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Es(Ue["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Fs(Ue["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Fs(Ue["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ts(Ue["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Es(Ue["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Es(Ue["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Fs(Ue["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function sl(e,t){return e.x*t.x+e.y*t.y}function al(e,t){if(1===e.length){let i=0;const o=t[i++];let s;for(;!s||o.equals(s);)if(s=t[i++],!s)return 1/0;for(;i<t.length;i++){const a=t[i],r=e[0],n=s.sub(o),l=a.sub(o),c=r.sub(o),u=sl(n,n),h=sl(n,l),p=sl(l,l),m=sl(c,n),d=sl(c,l),f=u*p-h*h,y=(p*m-h*d)/f,g=(u*d-h*m)/f,_=o.z*(1-y-g)+s.z*y+a.z*g;if(isFinite(_))return _}return 1/0}{let e=1/0;for(const i of t)e=Math.min(e,i.z);return e}}const rl=Ss([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:nl}=rl,ll=Ss([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:cl}=ll,ul=Wn.VectorTileFeature.types,hl=Math.cos(Math.PI/180*37.5);class pl{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(e=>{this.gradients[e.id]={}}),this.layoutVertexArray=new Os,this.layoutVertexArray2=new Ns,this.indexArray=new Ws,this.programConfigurations=new Sa(e.layers,e.zoom),this.segments=new $a,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,i){this.hasPattern=Mn("line",this.layers,t);const o=this.layers[0].layout.get("line-sort-key"),s=[];for(const{feature:t,id:a,index:r,sourceLayerIndex:n}of e){const e=this.layers[0]._featureFilter.needGeometry,l=Za(t,e);if(!this.layers[0]._featureFilter.filter(new gs(this.zoom),l,i))continue;const c=o?o.evaluate(l,{},i):void 0,u={id:a,properties:t.properties,type:t.type,sourceLayerIndex:n,index:r,geometry:e?l.geometry:ja(t),patterns:{},sortKey:c};s.push(u)}o&&s.sort((e,t)=>e.sortKey-t.sortKey);for(const o of s){const{geometry:s,index:a,sourceLayerIndex:r}=o;if(this.hasPattern){const e=Dn("line",this.layers,o,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(o,s,a,i,{});t.featureIndex.insert(e[a].feature,s,a,r,this.index)}}update(e,t,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,i)}addFeatures(e,t,i){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,cl)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,nl),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,i,o,s){const a=this.layers[0].layout,r=a.get("line-join").evaluate(e,{}),n=a.get("line-cap"),l=a.get("line-miter-limit"),c=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const i of t)this.addLine(i,e,r,n,l,c);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,s,o)}addLine(e,t,i,o,s,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const r="Polygon"===ul[t.type];let n=e.length;for(;n>=2&&e[n-1].equals(e[n-2]);)n--;let l=0;for(;l<n-1&&e[l].equals(e[l+1]);)l++;if(n<(r?3:2))return;"bevel"===i&&(s=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,u=this.segments.prepareSegment(10*n,this.layoutVertexArray,this.indexArray);let h,p=void 0,m=void 0,d=void 0,f=void 0;this.e1=this.e2=-1,r&&(h=e[n-2],f=e[l].sub(h)._unit()._perp());for(let t=l;t<n;t++){if(m=t===n-1?r?e[l+1]:void 0:e[t+1],m&&e[t].equals(m))continue;f&&(d=f),h&&(p=h),h=e[t],f=m?m.sub(h)._unit()._perp():d,d=d||f;let y=d.add(f);0===y.x&&0===y.y||y._unit();const g=d.x*f.x+d.y*f.y,_=y.x*f.x+y.y*f.y,b=0!==_?1/_:1/0,v=2*Math.sqrt(2-2*_),x=_<hl&&p&&m,L=d.x*f.y-d.y*f.x>0;if(x&&t>l){const e=h.dist(p);if(e>2*c){const t=h.sub(h.sub(p)._mult(c/e)._round());this.updateDistance(p,t),this.addCurrentVertex(t,d,0,0,u),p=t}}const I=p&&m;let w=I?i:r?"butt":o;if(I&&"round"===w&&(b<a?w="miter":b<=2&&(w="fakeround")),"miter"===w&&b>s&&(w="bevel"),"bevel"===w&&(b>2&&(w="flipbevel"),b<s&&(w="miter")),p&&this.updateDistance(p,h),"miter"===w)y._mult(b),this.addCurrentVertex(h,y,0,0,u);else if("flipbevel"===w){if(b>100)y=f.mult(-1);else{const e=b*d.add(f).mag()/d.sub(f).mag();y._perp()._mult(e*(L?-1:1))}this.addCurrentVertex(h,y,0,0,u),this.addCurrentVertex(h,y.mult(-1),0,0,u)}else if("bevel"===w||"fakeround"===w){const e=-Math.sqrt(b*b-1),t=L?e:0,i=L?0:e;if(p&&this.addCurrentVertex(h,d,t,i,u),"fakeround"===w){const e=Math.round(180*v/Math.PI/20);for(let t=1;t<e;t++){let i=t/e;if(.5!==i){const e=i-.5;i+=i*e*(i-1)*((1.0904+g*(g*(3.55645-1.43519*g)-3.2452))*e*e+(.848013+g*(.215638*g-1.06021)))}const o=f.sub(d)._mult(i)._add(d)._unit()._mult(L?-1:1);this.addHalfVertex(h,o.x,o.y,!1,L,0,u)}}m&&this.addCurrentVertex(h,f,-t,-i,u)}else if("butt"===w)this.addCurrentVertex(h,y,0,0,u);else if("square"===w){const e=p?1:-1;this.addCurrentVertex(h,y,e,e,u)}else"round"===w&&(p&&(this.addCurrentVertex(h,d,0,0,u),this.addCurrentVertex(h,d,1,1,u,!0)),m&&(this.addCurrentVertex(h,f,-1,-1,u,!0),this.addCurrentVertex(h,f,0,0,u)));if(x&&t<n-1){const e=h.dist(m);if(e>2*c){const t=h.add(m.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,f,0,0,u),h=t}}}}addCurrentVertex(e,t,i,o,s,a=!1){const r=t.y*o-t.x,n=-t.y-t.x*o;this.addHalfVertex(e,t.x+t.y*i,t.y-t.x*i,a,!1,i,s),this.addHalfVertex(e,r,n,a,!0,-o,s)}addHalfVertex({x:e,y:t},i,o,s,a,r,n){this.layoutVertexArray.emplaceBack((e<<1)+(s?1:0),(t<<1)+(a?1:0),Math.round(63*i)+128,Math.round(63*o)+128,1+(0===r?0:r<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length);const l=n.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),n.primitiveLength++),a?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}Ho("LineBucket",pl,{omit:["layers","patternFeatures"]});const ml=new As({"line-cap":new Fs(Ue.layout_line["line-cap"]),"line-join":new Es(Ue.layout_line["line-join"]),"line-miter-limit":new Fs(Ue.layout_line["line-miter-limit"]),"line-round-limit":new Fs(Ue.layout_line["line-round-limit"]),"line-sort-key":new Es(Ue.layout_line["line-sort-key"])});var dl={paint:new As({"line-opacity":new Es(Ue.paint_line["line-opacity"]),"line-color":new Es(Ue.paint_line["line-color"]),"line-translate":new Fs(Ue.paint_line["line-translate"]),"line-translate-anchor":new Fs(Ue.paint_line["line-translate-anchor"]),"line-width":new Es(Ue.paint_line["line-width"]),"line-gap-width":new Es(Ue.paint_line["line-gap-width"]),"line-offset":new Es(Ue.paint_line["line-offset"]),"line-blur":new Es(Ue.paint_line["line-blur"]),"line-dasharray":new Cs(Ue.paint_line["line-dasharray"]),"line-pattern":new Ts(Ue.paint_line["line-pattern"]),"line-gradient":new zs(Ue.paint_line["line-gradient"])}),layout:ml};const fl=new class extends Es{possiblyEvaluate(e,t){return t=new gs(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,zoomHistory:t.zoomHistory,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,i,o){return t=_({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,i,o)}}(dl.paint.properties["line-width"].specification);function yl(e,t){return t>0?t+2*e:e}fl.useIntegerZoom=!0;const gl=Ss([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),_l=Ss([{name:"a_projected_pos",components:3,type:"Float32"}],4),bl=(Ss([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Ss([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),vl=Ss([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]),xl=(Ss([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Ss([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ll=Ss([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Il(e,t){const{expression:i}=t;if("constant"===i.kind)return{kind:"constant",layoutSize:i.evaluate(new gs(e+1))};if("source"===i.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:o}=i;let s=0;for(;s<t.length&&t[s]<=e;)s++;s=Math.max(0,s-1);let a=s;for(;a<t.length&&t[a]<e+1;)a++;a=Math.min(t.length-1,a);const r=t[s],n=t[a];return"composite"===i.kind?{kind:"composite",minZoom:r,maxZoom:n,interpolationType:o}:{kind:"camera",minZoom:r,maxZoom:n,minSize:i.evaluate(new gs(r)),maxSize:i.evaluate(new gs(n)),interpolationType:o}}}function wl(e,{uSize:t,uSizeT:i},{lowerSize:o,upperSize:s}){return"source"===e.kind?o/128:"composite"===e.kind?Yt(o/128,s/128,i):t}function ql(e,t){let i=0,o=0;if("constant"===e.kind)o=e.layoutSize;else if("source"!==e.kind){const{interpolationType:s,minZoom:a,maxZoom:r}=e,n=s?f(di.interpolationFactor(s,t,a,r),0,1):0;"camera"===e.kind?o=Yt(e.minSize,e.maxSize,n):i=n}return{uSizeT:i,uSize:o}}Ss([{name:"triangle",components:3,type:"Uint16"}]),Ss([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ss([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ss([{type:"Float32",name:"offsetX"}]),Ss([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Fl=Object.freeze({__proto__:null,getSizeData:Il,evaluateSizeForFeature:wl,evaluateSizeForZoom:ql,SIZE_PACK_FACTOR:128});function El(e,t,i){return e.sections.forEach(e=>{e.text=function(e,t,i){const o=t.layout.get("text-transform").evaluate(i,{});return"uppercase"===o?e=e.toLocaleUpperCase():"lowercase"===o&&(e=e.toLocaleLowerCase()),ys.applyArabicShaping&&(e=ys.applyArabicShaping(e)),e}(e.text,t,i)}),e}const Tl={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Cl=function(e,t,i,o,s){var a,r,n=8*s-o-1,l=(1<<n)-1,c=l>>1,u=-7,h=i?s-1:0,p=i?-1:1,m=e[t+h];for(h+=p,a=m&(1<<-u)-1,m>>=-u,u+=n;u>0;a=256*a+e[t+h],h+=p,u-=8);for(r=a&(1<<-u)-1,a>>=-u,u+=o;u>0;r=256*r+e[t+h],h+=p,u-=8);if(0===a)a=1-c;else{if(a===l)return r?NaN:1/0*(m?-1:1);r+=Math.pow(2,o),a-=c}return(m?-1:1)*r*Math.pow(2,a-o)},zl=function(e,t,i,o,s,a){var r,n,l,c=8*a-s-1,u=(1<<c)-1,h=u>>1,p=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,m=o?0:a-1,d=o?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(n=isNaN(t)?1:0,r=u):(r=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-r))<1&&(r--,l*=2),(t+=r+h>=1?p/l:p*Math.pow(2,1-h))*l>=2&&(r++,l/=2),r+h>=u?(n=0,r=u):r+h>=1?(n=(t*l-1)*Math.pow(2,s),r+=h):(n=t*Math.pow(2,h-1)*Math.pow(2,s),r=0));s>=8;e[i+m]=255&n,m+=d,n/=256,s-=8);for(r=r<<s|n,c+=s;c>0;e[i+m]=255&r,m+=d,r/=256,c-=8);e[i+m-d]|=128*f},Al=Pl;function Pl(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Pl.Varint=0,Pl.Fixed64=1,Pl.Bytes=2,Pl.Fixed32=5;var Bl="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Ml(e){return e.type===Pl.Bytes?e.readVarint()+e.pos:e.pos+1}function Dl(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Sl(e,t,i){var o=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(o);for(var s=i.pos-1;s>=e;s--)i.buf[s+o]=i.buf[s]}function kl(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function Ul(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function Rl(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function Ol(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function Nl(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function $l(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function Vl(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function Gl(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function jl(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function Zl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Hl(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function Xl(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Ql(e,t,i){1===e&&i.readMessage(Wl,t)}function Wl(e,t,i){if(3===e){const{id:e,bitmap:o,width:s,height:a,left:r,top:n,advance:l}=i.readMessage(Kl,{});t.push({id:e,bitmap:new Hr({width:s+6,height:a+6},o),metrics:{width:s,height:a,left:r,top:n,advance:l}})}}function Kl(e,t,i){1===e?t.id=i.readVarint():2===e?t.bitmap=i.readBytes():3===e?t.width=i.readVarint():4===e?t.height=i.readVarint():5===e?t.left=i.readSVarint():6===e?t.top=i.readSVarint():7===e&&(t.advance=i.readVarint())}function Jl(e){let t=0,i=0;for(const o of e)t+=o.w*o.h,i=Math.max(i,o.w);e.sort((e,t)=>t.h-e.h);const o=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}];let s=0,a=0;for(const t of e)for(let e=o.length-1;e>=0;e--){const i=o[e];if(!(t.w>i.w||t.h>i.h)){if(t.x=i.x,t.y=i.y,a=Math.max(a,t.y+t.h),s=Math.max(s,t.x+t.w),t.w===i.w&&t.h===i.h){const t=o.pop();e<o.length&&(o[e]=t)}else t.h===i.h?(i.x+=t.w,i.w-=t.w):t.w===i.w?(i.y+=t.h,i.h-=t.h):(o.push({x:i.x+t.w,y:i.y,w:i.w-t.w,h:t.h}),i.y+=t.h,i.h-=t.h);break}}return{w:s,h:a,fill:t/(s*a)||0}}Pl.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var o=this.readVarint(),s=o>>3,a=this.pos;this.type=7&o,e(s,t,this),this.pos===a&&this.skip(o)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Zl(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Xl(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Zl(this.buf,this.pos)+4294967296*Zl(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=Zl(this.buf,this.pos)+4294967296*Xl(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=Cl(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=Cl(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,o=this.buf;return t=127&(i=o[this.pos++]),i<128?t:(t|=(127&(i=o[this.pos++]))<<7,i<128?t:(t|=(127&(i=o[this.pos++]))<<14,i<128?t:(t|=(127&(i=o[this.pos++]))<<21,i<128?t:function(e,t,i){var o,s,a=i.buf;if(o=(112&(s=a[i.pos++]))>>4,s<128)return Dl(e,o,t);if(o|=(127&(s=a[i.pos++]))<<3,s<128)return Dl(e,o,t);if(o|=(127&(s=a[i.pos++]))<<10,s<128)return Dl(e,o,t);if(o|=(127&(s=a[i.pos++]))<<17,s<128)return Dl(e,o,t);if(o|=(127&(s=a[i.pos++]))<<24,s<128)return Dl(e,o,t);if(o|=(1&(s=a[i.pos++]))<<31,s<128)return Dl(e,o,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=o[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Bl?function(e,t,i){return Bl.decode(e.subarray(t,i))}(this.buf,t,e):function(e,t,i){for(var o="",s=t;s<i;){var a,r,n,l=e[s],c=null,u=l>239?4:l>223?3:l>191?2:1;if(s+u>i)break;1===u?l<128&&(c=l):2===u?128==(192&(a=e[s+1]))&&(c=(31&l)<<6|63&a)<=127&&(c=null):3===u?(r=e[s+2],128==(192&(a=e[s+1]))&&128==(192&r)&&((c=(15&l)<<12|(63&a)<<6|63&r)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(r=e[s+2],n=e[s+3],128==(192&(a=e[s+1]))&&128==(192&r)&&128==(192&n)&&((c=(15&l)<<18|(63&a)<<12|(63&r)<<6|63&n)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,o+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),o+=String.fromCharCode(c),s+=u}return o}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Pl.Bytes)return e.push(this.readVarint(t));var i=Ml(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Pl.Bytes)return e.push(this.readSVarint());var t=Ml(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Pl.Bytes)return e.push(this.readBoolean());var t=Ml(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Pl.Bytes)return e.push(this.readFloat());var t=Ml(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Pl.Bytes)return e.push(this.readDouble());var t=Ml(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Pl.Bytes)return e.push(this.readFixed32());var t=Ml(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Pl.Bytes)return e.push(this.readSFixed32());var t=Ml(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Pl.Bytes)return e.push(this.readFixed64());var t=Ml(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Pl.Bytes)return e.push(this.readSFixed64());var t=Ml(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Pl.Varint)for(;this.buf[this.pos++]>127;);else if(t===Pl.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Pl.Fixed32)this.pos+=4;else{if(t!==Pl.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Hl(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Hl(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Hl(this.buf,-1&e,this.pos),Hl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Hl(this.buf,-1&e,this.pos),Hl(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var i,o;if(e>=0?(i=e%4294967296|0,o=e/4294967296|0):(o=~(-e/4294967296),4294967295^(i=~(-e%4294967296))?i=i+1|0:(i=0,o=o+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,i){i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,i.buf[i.pos]=127&(e>>>=7)}(i,0,t),function(e,t){var i=(7&e)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(o,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,i){for(var o,s,a=0;a<t.length;a++){if((o=t.charCodeAt(a))>55295&&o<57344){if(!s){o>56319||a+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):s=o;continue}if(o<56320){e[i++]=239,e[i++]=191,e[i++]=189,s=o;continue}o=s-55296<<10|o-56320|65536,s=null}else s&&(e[i++]=239,e[i++]=191,e[i++]=189,s=null);o<128?e[i++]=o:(o<2048?e[i++]=o>>6|192:(o<65536?e[i++]=o>>12|224:(e[i++]=o>>18|240,e[i++]=o>>12&63|128),e[i++]=o>>6&63|128),e[i++]=63&o|128)}return i}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&Sl(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),zl(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),zl(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var o=this.pos-i;o>=128&&Sl(i,o,this),this.pos=i-1,this.writeVarint(o),this.pos+=o},writeMessage:function(e,t,i){this.writeTag(e,Pl.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,kl,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,Ul,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Nl,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Rl,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Ol,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,$l,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Vl,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Gl,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,jl,t)},writeBytesField:function(e,t){this.writeTag(e,Pl.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Pl.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Pl.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Pl.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Pl.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Pl.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Pl.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Pl.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Pl.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Pl.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};class Yl{constructor(e,{pixelRatio:t,version:i,stretchX:o,stretchY:s,content:a}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=o,this.stretchY=s,this.content=a,this.version=i}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class ec{constructor(e,t){const i={},o={};this.haveRenderCallbacks=[];const s=[];this.addImages(e,i,s),this.addImages(t,o,s);const{w:a,h:r}=Jl(s),n=new Xr({width:a||1,height:r||1});for(const t in e){const o=e[t],s=i[t].paddedRect;Xr.copy(o.data,n,{x:0,y:0},{x:s.x+1,y:s.y+1},o.data)}for(const e in t){const i=t[e],s=o[e].paddedRect,a=s.x+1,r=s.y+1,l=i.data.width,c=i.data.height;Xr.copy(i.data,n,{x:0,y:0},{x:a,y:r},i.data),Xr.copy(i.data,n,{x:0,y:c-1},{x:a,y:r-1},{width:l,height:1}),Xr.copy(i.data,n,{x:0,y:0},{x:a,y:r+c},{width:l,height:1}),Xr.copy(i.data,n,{x:l-1,y:0},{x:a-1,y:r},{width:1,height:c}),Xr.copy(i.data,n,{x:0,y:0},{x:a+l,y:r},{width:1,height:c})}this.image=n,this.iconPositions=i,this.patternPositions=o}addImages(e,t,i){for(const o in e){const s=e[o],a={x:0,y:0,w:s.data.width+2,h:s.data.height+2};i.push(a),t[o]=new Yl(a,s),s.hasRenderCallback&&this.haveRenderCallbacks.push(o)}}patchUpdatedImages(e,t){e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const i in e.updatedImages)this.patchUpdatedImage(this.iconPositions[i],e.getImage(i),t),this.patchUpdatedImage(this.patternPositions[i],e.getImage(i),t)}patchUpdatedImage(e,t,i){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[o,s]=e.tl;i.update(t.data,void 0,{x:o,y:s})}}Ho("ImagePosition",Yl),Ho("ImageAtlas",ec);const tc={horizontal:1,vertical:2,horizontalOnly:3};class ic{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const i=new ic;return i.scale=e||1,i.fontStack=t,i}static forImage(e){const t=new ic;return t.imageName=e,t}}class oc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const i=new oc;for(let o=0;o<e.sections.length;o++){const s=e.sections[o];s.image?i.addImageSection(s):i.addTextSection(s,t)}return i}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(){this.text=function(e){let t="";for(let i=0;i<e.length;i++){const o=e.charCodeAt(i+1)||null,s=e.charCodeAt(i-1)||null;t+=o&&ss(o)&&!Tl[e[i+1]]||s&&ss(s)&&!Tl[e[i-1]]||!Tl[e[i]]?e[i]:Tl[e[i]]}return t}(this.text)}trim(){let e=0;for(let t=0;t<this.text.length&&ac[this.text.charCodeAt(t)];t++)e++;let t=this.text.length;for(let i=this.text.length-1;i>=0&&i>=e&&ac[this.text.charCodeAt(i)];i--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const i=new oc;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,t)=>Math.max(e,this.sections[t].scale),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(ic.forText(e.scale,e.fontStack||t));const i=this.sections.length-1;for(let t=0;t<e.text.length;++t)this.sectionIndex.push(i)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void C("Can't add FormattedSection with an empty image.");const i=this.getNextImageSectionCharCode();i?(this.text+=String.fromCharCode(i),this.sections.push(ic.forImage(t)),this.sectionIndex.push(this.sections.length-1)):C("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function sc(e,t,i,o,s,a,r,n,l,c,u,h,p,m,d,f){const y=oc.fromFeature(e,s);let g;h===tc.vertical&&y.verticalizePunctuation();const{processBidirectionalText:_,processStyledBidirectionalText:b}=ys;if(_&&1===y.sections.length){g=[];const e=_(y.toString(),hc(y,c,a,t,o,m,d));for(const t of e){const e=new oc;e.text=t,e.sections=y.sections;for(let i=0;i<t.length;i++)e.sectionIndex.push(0);g.push(e)}}else if(b){g=[];const e=b(y.text,y.sectionIndex,hc(y,c,a,t,o,m,d));for(const t of e){const e=new oc;e.text=t[0],e.sectionIndex=t[1],e.sections=y.sections,g.push(e)}}else g=function(e,t){const i=[],o=e.text;let s=0;for(const o of t)i.push(e.substring(s,o)),s=o;return s<o.length&&i.push(e.substring(s,o.length)),i}(y,hc(y,c,a,t,o,m,d));const v=[],x={positionedLines:v,text:y.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1};return function(e,t,i,o,s,a,r,n,l,c,u,h){let p=0,m=-17,d=0,f=0;const y="right"===n?1:"left"===n?0:.5;let g=0;for(const r of s){r.trim();const s=r.getMaxScale(),n=24*(s-1),b={positionedGlyphs:[],lineOffset:0};e.positionedLines[g]=b;const v=b.positionedGlyphs;let x=0;if(!r.length()){m+=a,++g;continue}for(let a=0;a<r.length();a++){const d=r.getSection(a),f=r.getSectionIndex(a),y=r.getCharCode(a);let g=0,b=null,L=null,I=null,w=24;const q=!(l===tc.horizontal||!u&&!os(y)||u&&(ac[y]||(_=y,Yo.Arabic(_)||Yo["Arabic Supplement"](_)||Yo["Arabic Extended-A"](_)||Yo["Arabic Presentation Forms-A"](_)||Yo["Arabic Presentation Forms-B"](_))));if(d.imageName){const t=o[d.imageName];if(!t)continue;I=d.imageName,e.iconsInText=e.iconsInText||!0,L=t.paddedRect;const i=t.displaySize;d.scale=24*d.scale/h,b={width:i[0],height:i[1],left:1,top:-3,advance:q?i[1]:i[0]},g=n+(24-i[1]*d.scale),w=b.advance;const a=q?i[0]*d.scale-24*s:i[1]*d.scale-24*s;a>0&&a>x&&(x=a)}else{const e=i[d.fontStack],o=e&&e[y];if(o&&o.rect)L=o.rect,b=o.metrics;else{const e=t[d.fontStack],i=e&&e[y];if(!i)continue;b=i.metrics}g=24*(s-d.scale)}q?(e.verticalizable=!0,v.push({glyph:y,imageName:I,x:p,y:m+g,vertical:q,scale:d.scale,fontStack:d.fontStack,sectionIndex:f,metrics:b,rect:L}),p+=w*d.scale+c):(v.push({glyph:y,imageName:I,x:p,y:m+g,vertical:q,scale:d.scale,fontStack:d.fontStack,sectionIndex:f,metrics:b,rect:L}),p+=b.advance*d.scale+c)}0!==v.length&&(d=Math.max(p-c,d),mc(v,0,v.length-1,y,x)),p=0;const L=a*s+x;b.lineOffset=Math.max(x,n),m+=L,f=Math.max(L,f),++g}var _;const b=m- -17,{horizontalAlign:v,verticalAlign:x}=pc(r);(function(e,t,i,o,s,a,r,n,l){const c=(t-i)*s;let u=0;u=a!==r?-n*o- -17:(-o*l+.5)*r;for(const t of e)for(const e of t.positionedGlyphs)e.x+=c,e.y+=u})(e.positionedLines,y,v,x,d,f,a,b,s.length),e.top+=-x*b,e.bottom=e.top+b,e.left+=-v*d,e.right=e.left+d}(x,t,i,o,g,r,n,l,h,c,p,f),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(v)&&x}const ac={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},rc={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function nc(e,t,i,o,s,a){if(t.imageName){const e=o[t.imageName];return e?e.displaySize[0]*t.scale*24/a+s:0}{const o=i[t.fontStack],a=o&&o[e];return a?a.metrics.advance*t.scale+s:0}}function lc(e,t,i,o){const s=Math.pow(e-t,2);return o?e<t?s/2:2*s:s+Math.abs(i)*i}function cc(e,t,i){let o=0;return 10===e&&(o-=1e4),i&&(o+=150),40!==e&&65288!==e||(o+=50),41!==t&&65289!==t||(o+=50),o}function uc(e,t,i,o,s,a){let r=null,n=lc(t,i,s,a);for(const e of o){const o=lc(t-e.x,i,s,a)+e.badness;o<=n&&(r=e,n=o)}return{index:e,x:t,priorBreak:r,badness:n}}function hc(e,t,i,o,s,a,r){if("point"!==a)return[];if(!e)return[];const n=[],l=function(e,t,i,o,s,a){let r=0;for(let i=0;i<e.length();i++){const n=e.getSection(i);r+=nc(e.getCharCode(i),n,o,s,t,a)}return r/Math.max(1,Math.ceil(r/i))}(e,t,i,o,s,r),c=e.text.indexOf("​")>=0;let u=0;for(let i=0;i<e.length();i++){const a=e.getSection(i),p=e.getCharCode(i);if(ac[p]||(u+=nc(p,a,o,s,t,r)),i<e.length()-1){const t=!((h=p)<11904||!(Yo["Bopomofo Extended"](h)||Yo.Bopomofo(h)||Yo["CJK Compatibility Forms"](h)||Yo["CJK Compatibility Ideographs"](h)||Yo["CJK Compatibility"](h)||Yo["CJK Radicals Supplement"](h)||Yo["CJK Strokes"](h)||Yo["CJK Symbols and Punctuation"](h)||Yo["CJK Unified Ideographs Extension A"](h)||Yo["CJK Unified Ideographs"](h)||Yo["Enclosed CJK Letters and Months"](h)||Yo["Halfwidth and Fullwidth Forms"](h)||Yo.Hiragana(h)||Yo["Ideographic Description Characters"](h)||Yo["Kangxi Radicals"](h)||Yo["Katakana Phonetic Extensions"](h)||Yo.Katakana(h)||Yo["Vertical Forms"](h)||Yo["Yi Radicals"](h)||Yo["Yi Syllables"](h)));(rc[p]||t||a.imageName)&&n.push(uc(i+1,u,l,n,cc(p,e.getCharCode(i+1),t&&c),!1))}}var h;return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(uc(e.length(),u,l,n,0,!0))}function pc(e){let t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function mc(e,t,i,o,s){if(!o&&!s)return;const a=e[i],r=(e[i].x+a.metrics.advance*a.scale)*o;for(let o=t;o<=i;o++)e[o].x-=r,e[o].y+=s}function dc(e,t,i){const{horizontalAlign:o,verticalAlign:s}=pc(i),a=t[0]-e.displaySize[0]*o,r=t[1]-e.displaySize[1]*s;return{image:e,top:r,bottom:r+e.displaySize[1],left:a,right:a+e.displaySize[0]}}function fc(e,t,i,o,s,a){const r=e.image;let n;if(r.content){const e=r.content,t=r.pixelRatio||1;n=[e[0]/t,e[1]/t,r.displaySize[0]-e[2]/t,r.displaySize[1]-e[3]/t]}const l=t.left*a,c=t.right*a;let u,h,p,m;"width"===i||"both"===i?(m=s[0]+l-o[3],h=s[0]+c+o[1]):(m=s[0]+(l+c-r.displaySize[0])/2,h=m+r.displaySize[0]);const d=t.top*a,f=t.bottom*a;return"height"===i||"both"===i?(u=s[1]+d-o[0],p=s[1]+f+o[2]):(u=s[1]+(d+f-r.displaySize[1])/2,p=u+r.displaySize[1]),{image:r,top:u,right:h,bottom:p,left:m,collisionPadding:n}}class yc extends s{constructor(e,t,i,o){super(e,t),this.angle=i,void 0!==o&&(this.segment=o)}clone(){return new yc(this.x,this.y,this.angle,this.segment)}}function gc(e,t,i,o,s){if(void 0===t.segment)return!0;let a=t,r=t.segment+1,n=0;for(;n>-i/2;){if(r--,r<0)return!1;n-=e[r].dist(a),a=e[r]}n+=e[r].dist(e[r+1]),r++;const l=[];let c=0;for(;n<i/2;){const t=e[r],i=e[r+1];if(!i)return!1;let a=e[r-1].angleTo(t)-t.angleTo(i);for(a=Math.abs((a+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:n,angleDelta:a}),c+=a;n-l[0].distance>o;)c-=l.shift().angleDelta;if(c>s)return!1;r++,n+=t.dist(i)}return!0}function _c(e){let t=0;for(let i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function bc(e,t,i){return e?.6*t*i:0}function vc(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function xc(e,t,i,o,s,a){const r=bc(i,s,a),n=vc(i,o)*a;let l=0;const c=_c(e)/2;for(let i=0;i<e.length-1;i++){const o=e[i],s=e[i+1],a=o.dist(s);if(l+a>c){const u=(c-l)/a,h=Yt(o.x,s.x,u),p=Yt(o.y,s.y,u),m=new yc(h,p,s.angleTo(o),i);return m._round(),!r||gc(e,m,n,r,t)?m:void 0}l+=a}}function Lc(e,t,i,o,s,a,r,n,l){const c=bc(o,a,r),u=vc(o,s),h=u*r,p=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),function e(t,i,o,s,a,r,n,l,c){const u=r/2,h=_c(t);let p=0,m=i-o,d=[];for(let e=0;e<t.length-1;e++){const i=t[e],n=t[e+1],l=i.dist(n),f=n.angleTo(i);for(;m+o<p+l;){m+=o;const y=(m-p)/l,g=Yt(i.x,n.x,y),_=Yt(i.y,n.y,y);if(g>=0&&g<c&&_>=0&&_<c&&m-u>=0&&m+u<=h){const i=new yc(g,_,f,e);i._round(),s&&!gc(t,i,r,s,a)||d.push(i)}}p+=l}return l||d.length||n||(d=e(t,p/2,o,s,a,r,n,!0,c)),d}(e,p?t/2*n%t:(u/2+2*a)*r*n%t,t,c,i,h,p,!1,l)}function Ic(e,t,i,o,a){const r=[];for(let n=0;n<e.length;n++){const l=e[n];let c;for(let e=0;e<l.length-1;e++){let n=l[e],u=l[e+1];n.x<t&&u.x<t||(n.x<t?n=new s(t,n.y+(t-n.x)/(u.x-n.x)*(u.y-n.y))._round():u.x<t&&(u=new s(t,n.y+(t-n.x)/(u.x-n.x)*(u.y-n.y))._round()),n.y<i&&u.y<i||(n.y<i?n=new s(n.x+(i-n.y)/(u.y-n.y)*(u.x-n.x),i)._round():u.y<i&&(u=new s(n.x+(i-n.y)/(u.y-n.y)*(u.x-n.x),i)._round()),n.x>=o&&u.x>=o||(n.x>=o?n=new s(o,n.y+(o-n.x)/(u.x-n.x)*(u.y-n.y))._round():u.x>=o&&(u=new s(o,n.y+(o-n.x)/(u.x-n.x)*(u.y-n.y))._round()),n.y>=a&&u.y>=a||(n.y>=a?n=new s(n.x+(a-n.y)/(u.y-n.y)*(u.x-n.x),a)._round():u.y>=a&&(u=new s(n.x+(a-n.y)/(u.y-n.y)*(u.x-n.x),a)._round()),c&&n.equals(c[c.length-1])||(c=[n],r.push(c)),c.push(u)))))}}return r}function wc(e,t,i,o){const a=[],r=e.image,n=r.pixelRatio,l=r.paddedRect.w-2,c=r.paddedRect.h-2,u=e.right-e.left,h=e.bottom-e.top,p=r.stretchX||[[0,l]],m=r.stretchY||[[0,c]],d=(e,t)=>e+t[1]-t[0],f=p.reduce(d,0),y=m.reduce(d,0),g=l-f,_=c-y;let b=0,v=f,x=0,L=y,I=0,w=g,q=0,F=_;if(r.content&&o){const e=r.content;b=qc(p,0,e[0]),x=qc(m,0,e[1]),v=qc(p,e[0],e[2]),L=qc(m,e[1],e[3]),I=e[0]-b,q=e[1]-x,w=e[2]-e[0]-v,F=e[3]-e[1]-L}const E=(o,a,l,c)=>{const p=Ec(o.stretch-b,v,u,e.left),m=Tc(o.fixed-I,w,o.stretch,f),d=Ec(a.stretch-x,L,h,e.top),g=Tc(a.fixed-q,F,a.stretch,y),_=Ec(l.stretch-b,v,u,e.left),E=Tc(l.fixed-I,w,l.stretch,f),T=Ec(c.stretch-x,L,h,e.top),C=Tc(c.fixed-q,F,c.stretch,y),z=new s(p,d),A=new s(_,d),P=new s(_,T),B=new s(p,T),M=new s(m/n,g/n),D=new s(E/n,C/n),S=t*Math.PI/180;if(S){const e=Math.sin(S),t=Math.cos(S),i=[t,-e,e,t];z._matMult(i),A._matMult(i),B._matMult(i),P._matMult(i)}const k=o.stretch+o.fixed,U=a.stretch+a.fixed;return{tl:z,tr:A,bl:B,br:P,tex:{x:r.paddedRect.x+1+k,y:r.paddedRect.y+1+U,w:l.stretch+l.fixed-k,h:c.stretch+c.fixed-U},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:M,pixelOffsetBR:D,minFontScaleX:w/n/u,minFontScaleY:F/n/h,isSDF:i}};if(o&&(r.stretchX||r.stretchY)){const e=Fc(p,g,f),t=Fc(m,_,y);for(let i=0;i<e.length-1;i++){const o=e[i],s=e[i+1];for(let e=0;e<t.length-1;e++)a.push(E(o,t[e],s,t[e+1]))}}else a.push(E({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return a}function qc(e,t,i){let o=0;for(const s of e)o+=Math.max(t,Math.min(i,s[1]))-Math.max(t,Math.min(i,s[0]));return o}function Fc(e,t,i){const o=[{fixed:-1,stretch:0}];for(const[t,i]of e){const e=o[o.length-1];o.push({fixed:t-e.stretch,stretch:e.stretch}),o.push({fixed:t-e.stretch,stretch:e.stretch+(i-t)})}return o.push({fixed:t+1,stretch:i}),o}function Ec(e,t,i,o){return e/t*i+o}function Tc(e,t,i,o){return e-t*i/o}Ho("Anchor",yc);class Cc{constructor(e=[],t=zc){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,o=t[e];for(;e>0;){const s=e-1>>1,a=t[s];if(i(o,a)>=0)break;t[e]=a,e=s}t[e]=o}_down(e){const{data:t,compare:i}=this,o=this.length>>1,s=t[e];for(;e<o;){let o=1+(e<<1),a=t[o];const r=o+1;if(r<this.length&&i(t[r],a)<0&&(o=r,a=t[r]),i(a,s)>=0)break;t[e]=a,e=o}t[e]=s}}function zc(e,t){return e<t?-1:e>t?1:0}function Ac(e,t=1,i=!1){let o=1/0,a=1/0,r=-1/0,n=-1/0;const l=e[0];for(let e=0;e<l.length;e++){const t=l[e];(!e||t.x<o)&&(o=t.x),(!e||t.y<a)&&(a=t.y),(!e||t.x>r)&&(r=t.x),(!e||t.y>n)&&(n=t.y)}const c=Math.min(r-o,n-a);let u=c/2;const h=new Cc([],Pc);if(0===c)return new s(o,a);for(let t=o;t<r;t+=c)for(let i=a;i<n;i+=c)h.push(new Bc(t+u,i+u,u,e));let p=function(e){let t=0,i=0,o=0;const s=e[0];for(let e=0,a=s.length,r=a-1;e<a;r=e++){const a=s[e],n=s[r],l=a.x*n.y-n.x*a.y;i+=(a.x+n.x)*l,o+=(a.y+n.y)*l,t+=3*l}return new Bc(i/t,o/t,0,e)}(e),m=h.length;for(;h.length;){const o=h.pop();(o.d>p.d||!p.d)&&(p=o,i&&console.log("found best %d after %d probes",Math.round(1e4*o.d)/1e4,m)),o.max-p.d<=t||(u=o.h/2,h.push(new Bc(o.p.x-u,o.p.y-u,u,e)),h.push(new Bc(o.p.x+u,o.p.y-u,u,e)),h.push(new Bc(o.p.x-u,o.p.y+u,u,e)),h.push(new Bc(o.p.x+u,o.p.y+u,u,e)),m+=4)}return i&&(console.log("num probes: "+m),console.log("best distance: "+p.d)),p.p}function Pc(e,t){return t.max-e.max}function Bc(e,t,i,o){this.p=new s(e,t),this.h=i,this.d=function(e,t){let i=!1,o=1/0;for(let s=0;s<t.length;s++){const a=t[s];for(let t=0,s=a.length,r=s-1;t<s;r=t++){const s=a[t],n=a[r];s.y>e.y!=n.y>e.y&&e.x<(n.x-s.x)*(e.y-s.y)/(n.y-s.y)+s.x&&(i=!i),o=Math.min(o,ir(e,s,n))}}return(i?1:-1)*Math.sqrt(o)}(this.p,o),this.max=this.d+this.h*Math.SQRT2}const Mc=Number.POSITIVE_INFINITY;function Dc(e,t){return t[1]!==Mc?function(e,t,i){let o=0,s=0;switch(t=Math.abs(t),i=Math.abs(i),e){case"top-right":case"top-left":case"top":s=i-7;break;case"bottom-right":case"bottom-left":case"bottom":s=7-i}switch(e){case"top-right":case"bottom-right":case"right":o=-t;break;case"top-left":case"bottom-left":case"left":o=t}return[o,s]}(e,t[0],t[1]):function(e,t){let i=0,o=0;t<0&&(t=0);const s=t/Math.sqrt(2);switch(e){case"top-right":case"top-left":o=s-7;break;case"bottom-right":case"bottom-left":o=7-s;break;case"bottom":o=7-t;break;case"top":o=t-7}switch(e){case"top-right":case"bottom-right":i=-s;break;case"top-left":case"bottom-left":i=s;break;case"left":i=t;break;case"right":i=-t}return[i,o]}(e,t[0])}function Sc(e,t,i,o,s,a,r,n){e.createArrays(),e.tilePixelRatio=8192/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const l=e.layers[0].layout,c=e.layers[0]._unevaluatedLayout._values,u={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:i}=e.textSizeData;u.compositeTextSizes=[c["text-size"].possiblyEvaluate(new gs(t),r),c["text-size"].possiblyEvaluate(new gs(i),r)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:i}=e.iconSizeData;u.compositeIconSizes=[c["icon-size"].possiblyEvaluate(new gs(t),r),c["icon-size"].possiblyEvaluate(new gs(i),r)]}u.layoutTextSize=c["text-size"].possiblyEvaluate(new gs(n+1),r),u.layoutIconSize=c["icon-size"].possiblyEvaluate(new gs(n+1),r),u.textMaxSize=c["text-size"].possiblyEvaluate(new gs(18),r);const h=24*l.get("text-line-height"),p="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),m=l.get("text-keep-upright"),d=l.get("text-size");for(const a of e.features){const n=l.get("text-font").evaluate(a,{},r).join(","),c=d.evaluate(a,{},r),f=u.layoutTextSize.evaluate(a,{},r),y=(u.layoutIconSize.evaluate(a,{},r),{horizontal:{},vertical:void 0}),g=a.text;let _,b=[0,0];if(g){const o=g.toString(),u=24*l.get("text-letter-spacing").evaluate(a,{},r),d=ts(o)?u:0,_=l.get("text-anchor").evaluate(a,{},r),v=l.get("text-variable-anchor");if(!v){const e=l.get("text-radial-offset").evaluate(a,{},r);b=e?Dc(_,[24*e,Mc]):l.get("text-offset").evaluate(a,{},r).map(e=>24*e)}let x=p?"center":l.get("text-justify").evaluate(a,{},r);const L=l.get("symbol-placement"),I="point"===L?24*l.get("text-max-width").evaluate(a,{},r):0,w=()=>{e.allowVerticalPlacement&&es(o)&&(y.vertical=sc(g,t,i,s,n,I,h,_,"left",d,b,tc.vertical,!0,L,f,c))};if(!p&&v){const e="auto"===x?v.map(e=>kc(e)):[x];let o=!1;for(let a=0;a<e.length;a++){const r=e[a];if(!y.horizontal[r])if(o)y.horizontal[r]=y.horizontal[0];else{const e=sc(g,t,i,s,n,I,h,"center",r,d,b,tc.horizontal,!1,L,f,c);e&&(y.horizontal[r]=e,o=1===e.positionedLines.length)}}w()}else{"auto"===x&&(x=kc(_));const e=sc(g,t,i,s,n,I,h,_,x,d,b,tc.horizontal,!1,L,f,c);e&&(y.horizontal[x]=e),w(),es(o)&&p&&m&&(y.vertical=sc(g,t,i,s,n,I,h,_,x,d,b,tc.vertical,!1,L,f,c))}}let v=!1;if(a.icon&&a.icon.name){const t=o[a.icon.name];t&&(_=dc(s[a.icon.name],l.get("icon-offset").evaluate(a,{},r),l.get("icon-anchor").evaluate(a,{},r)),v=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&C("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==l.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const x=Oc(y.horizontal)||y.vertical;e.iconsInText=!!x&&x.iconsInText,(x||_)&&Uc(e,a,y,_,o,u,f,0,b,v,r)}a&&e.generateCollisionDebugBuffers(n,e.collisionBoxArray)}function kc(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Uc(e,t,i,o,s,a,r,n,l,c,u){let p=a.textMaxSize.evaluate(t,{},u);void 0===p&&(p=r);const m=e.layers[0].layout,d=m.get("icon-offset").evaluate(t,{},u),f=Oc(i.horizontal),y=r/24,g=e.tilePixelRatio*y,_=e.tilePixelRatio*p/24,b=e.tilePixelRatio*m.get("symbol-spacing"),v=m.get("text-padding")*e.tilePixelRatio,x=m.get("icon-padding")*e.tilePixelRatio,L=h(m.get("text-max-angle")),I="map"===m.get("text-rotation-alignment")&&"point"!==m.get("symbol-placement"),w="map"===m.get("icon-rotation-alignment")&&"point"!==m.get("symbol-placement"),q=m.get("symbol-placement"),F=b/2,E=m.get("icon-text-fit");let T;o&&"none"!==E&&(e.allowVerticalPlacement&&i.vertical&&(T=fc(o,i.vertical,E,m.get("icon-text-fit-padding"),d,y)),f&&(o=fc(o,f,E,m.get("icon-text-fit-padding"),d,y)));const z=(n,h)=>{h.x<0||h.x>=8192||h.y<0||h.y>=8192||function(e,t,i,o,s,a,r,n,l,c,u,h,p,m,d,f,y,g,_,b,v,x,L,I,w){const q=e.addToLineVertexArray(t,i);let F,E,T,z,A,P,B,M=0,D=0,S=0,k=0,U=-1,R=-1;const O={};let N=_a(""),$=0,V=0;if(void 0===n._unevaluatedLayout.getValue("text-radial-offset")?[$,V]=n.layout.get("text-offset").evaluate(v,{},I).map(e=>24*e):($=24*n.layout.get("text-radial-offset").evaluate(v,{},I),V=Mc),e.allowVerticalPlacement&&o.vertical){const e=o.vertical;if(d)P=$c(e),r&&(B=$c(r));else{const i=n.layout.get("text-rotate").evaluate(v,{},I)+90;T=Nc(l,t,c,u,h,e,0,m,i),r&&(z=Nc(l,t,c,u,h,r,0,g,i))}}if(s){const i=n.layout.get("icon-rotate").evaluate(v,{},I),o="none"!==n.layout.get("icon-text-fit"),a=wc(s,i,L,o),p=r?wc(r,i,L,o):void 0;E=Nc(l,t,c,u,h,s,0,g,i),M=4*a.length;const m=e.iconSizeData;let d=null;"source"===m.kind?(d=[128*n.layout.get("icon-size").evaluate(v,{},I)],d[0]>32640&&C(e.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".')):"composite"===m.kind&&(d=[128*x.compositeIconSizes[0].evaluate(v,{},I),128*x.compositeIconSizes[1].evaluate(v,{},I)],(d[0]>32640||d[1]>32640)&&C(e.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".')),e.addSymbols(e.icon,a,d,b,_,v,!1,t,q.lineStartIndex,q.lineLength,-1,I),U=e.icon.placedSymbolArray.length-1,p&&(D=4*p.length,e.addSymbols(e.icon,p,d,b,_,v,tc.vertical,t,q.lineStartIndex,q.lineLength,-1,I),R=e.icon.placedSymbolArray.length-1)}for(const i in o.horizontal){const s=o.horizontal[i];F||(N=_a(s.text),d?A=$c(s):F=Nc(l,t,c,u,h,s,0,m,n.layout.get("text-rotate").evaluate(v,{},I)));const r=1===s.positionedLines.length;if(S+=Rc(e,t,s,a,n,d,v,f,q,o.vertical?tc.horizontal:tc.horizontalOnly,r?Object.keys(o.horizontal):[i],O,U,x,I),r)break}o.vertical&&(k+=Rc(e,t,o.vertical,a,n,d,v,f,q,tc.vertical,["vertical"],O,R,x,I));let G=-1;const j=(e,t)=>e?Math.max(e,t):t;G=j(A,G),G=j(P,G),G=j(B,G);const Z=G>-1?1:0;Z&&(G*=w/24),e.glyphOffsetArray.length>=Kc.MAX_GLYPHS&&C("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==v.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,v.sortKey),e.symbolInstances.emplaceBack(t.x,t.y,O.right>=0?O.right:-1,O.center>=0?O.center:-1,O.left>=0?O.left:-1,O.vertical||-1,U,R,N,void 0!==F?F:e.collisionBoxArray.length,void 0!==F?F+1:e.collisionBoxArray.length,void 0!==T?T:e.collisionBoxArray.length,void 0!==T?T+1:e.collisionBoxArray.length,void 0!==E?E:e.collisionBoxArray.length,void 0!==E?E+1:e.collisionBoxArray.length,z||e.collisionBoxArray.length,z?z+1:e.collisionBoxArray.length,c,S,k,M,D,Z,0,p,$,V,G)}(e,h,n,i,o,s,T,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,g,v,I,l,0,x,w,d,t,a,c,u,r)};if("line"===q)for(const s of Ic(t.geometry,0,0,8192,8192)){const t=Lc(s,b,L,i.vertical||f,o,24,_,e.overscaling,8192);for(const i of t){const t=f;t&&Vc(e,t.text,F,i)||z(s,i)}}else if("line-center"===q){for(const e of t.geometry)if(e.length>1){const t=xc(e,L,i.vertical||f,o,24,_);t&&z(e,t)}}else if("Polygon"===t.type)for(const e of Pn(t.geometry,0)){const t=Ac(e,16);z(e[0],new yc(t.x,t.y,0))}else if("LineString"===t.type)for(const e of t.geometry)z(e,new yc(e[0].x,e[0].y,0));else if("Point"===t.type)for(const e of t.geometry)for(const t of e)z([t],new yc(t.x,t.y,0))}function Rc(e,t,i,o,a,r,n,l,c,u,h,p,m,d,f){const y=function(e,t,i,o,a,r,n,l){const c=o.layout.get("text-rotate").evaluate(r,{})*Math.PI/180,u=[];for(const e of t.positionedLines)for(const o of e.positionedGlyphs){if(!o.rect)continue;const r=o.rect||{};let h=4,p=!0,m=1,d=0;const f=(a||l)&&o.vertical,y=o.metrics.advance*o.scale/2;if(l&&t.verticalizable){const t=24*(o.scale-1),i=(24-o.metrics.width*o.scale)/2;d=e.lineOffset/2-(o.imageName?-i:t)}if(o.imageName){const e=n[o.imageName];p=e.sdf,m=e.pixelRatio,h=1/m}const g=a?[o.x+y,o.y]:[0,0];let _=a?[0,0]:[o.x+y+i[0],o.y+i[1]-d],b=[0,0];f&&(b=_,_=[0,0]);const v=(o.metrics.left-h)*o.scale-y+_[0],x=(-o.metrics.top-h)*o.scale+_[1],L=v+r.w*o.scale/m,I=x+r.h*o.scale/m,w=new s(v,x),q=new s(L,x),F=new s(v,I),E=new s(L,I);if(f){const e=new s(-y,y- -17),t=-Math.PI/2,i=12-y,a=new s(22-i,-(o.imageName?i:0)),r=new s(...b);w._rotateAround(t,e)._add(a)._add(r),q._rotateAround(t,e)._add(a)._add(r),F._rotateAround(t,e)._add(a)._add(r),E._rotateAround(t,e)._add(a)._add(r)}if(c){const e=Math.sin(c),t=Math.cos(c),i=[t,-e,e,t];w._matMult(i),q._matMult(i),F._matMult(i),E._matMult(i)}const T=new s(0,0),C=new s(0,0);u.push({tl:w,tr:q,bl:F,br:E,tex:r,writingMode:t.writingMode,glyphOffset:g,sectionIndex:o.sectionIndex,isSDF:p,pixelOffsetTL:T,pixelOffsetBR:C,minFontScaleX:0,minFontScaleY:0})}return u}(0,i,l,a,r,n,o,e.allowVerticalPlacement),g=e.textSizeData;let _=null;"source"===g.kind?(_=[128*a.layout.get("text-size").evaluate(n,{},f)],_[0]>32640&&C(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".')):"composite"===g.kind&&(_=[128*d.compositeTextSizes[0].evaluate(n,{},f),128*d.compositeTextSizes[1].evaluate(n,{},f)],(_[0]>32640||_[1]>32640)&&C(e.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".')),e.addSymbols(e.text,y,_,l,r,n,u,t,c.lineStartIndex,c.lineLength,m,f);for(const t of h)p[t]=e.text.placedSymbolArray.length-1;return 4*y.length}function Oc(e){for(const t in e)return e[t];return null}function Nc(e,t,i,o,a,r,n,l,c){let u=r.top,p=r.bottom,m=r.left,d=r.right;const f=r.collisionPadding;if(f&&(m-=f[0],u-=f[1],d+=f[2],p+=f[3]),c){const e=new s(m,u),t=new s(d,u),i=new s(m,p),o=new s(d,p),a=h(c);e._rotate(a),t._rotate(a),i._rotate(a),o._rotate(a),m=Math.min(e.x,t.x,i.x,o.x),d=Math.max(e.x,t.x,i.x,o.x),u=Math.min(e.y,t.y,i.y,o.y),p=Math.max(e.y,t.y,i.y,o.y)}return e.emplaceBack(t.x,t.y,m,u,d,p,l,i,o,a),e.length-1}function $c(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Vc(e,t,i,o){const s=e.compareText;if(t in s){const e=s[t];for(let t=e.length-1;t>=0;t--)if(o.dist(e[t])<i)return!0}else s[t]=[];return s[t].push(o),!1}const Gc=Wn.VectorTileFeature.types,jc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Zc(e,t,i,o,s,a,r,n,l,c,u,h,p){const m=n?Math.min(32640,Math.round(n[0])):0,d=n?Math.min(32640,Math.round(n[1])):0;e.emplaceBack(t,i,Math.round(32*o),Math.round(32*s),a,r,(m<<1)+(l?1:0),d,16*c,16*u,256*h,256*p)}function Hc(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}function Xc(e){for(const t of e.sections)if(ns(t.text))return!0;return!1}class Qc{constructor(e){this.layoutVertexArray=new Vs,this.indexArray=new Ws,this.programConfigurations=e,this.segments=new $a,this.dynamicLayoutVertexArray=new Gs,this.opacityVertexArray=new js,this.placedSymbolArray=new la}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,i,o){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,gl.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,_l.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,jc,!0),this.opacityVertexBuffer.itemSize=1),(i||o)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ho("SymbolBuffers",Qc);class Wc{constructor(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new $a,this.collisionVertexArray=new Qs,this.collisionVertexArrayExt=new Gs}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,bl.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,vl.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Ho("CollisionBuffers",Wc);class Kc{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=fr([]),this.placementViewportMatrix=fr([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Il(this.zoom,t["text-size"]),this.iconSizeData=Il(this.zoom,t["icon-size"]);const i=this.layers[0].layout,o=i.get("symbol-sort-key"),s=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==s&&void 0!==o.constantOr(1),this.sortFeaturesByY=("viewport-y"===s||"auto"===s&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===i.get("symbol-placement")&&(this.writingModes=i.get("text-writing-mode").map(e=>tc[e])),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.sourceID=e.sourceID}createArrays(){this.text=new Qc(new Sa(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Qc(new Sa(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new ha,this.lineVertexArray=new pa,this.symbolInstances=new ua}calculateGlyphDependencies(e,t,i,o,s){for(let a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,(i||o)&&s){const i=Tl[e.charAt(a)];i&&(t[i.charCodeAt(0)]=!0)}}populate(e,t,i){const o=this.layers[0],s=o.layout,a=s.get("text-font"),r=s.get("text-field"),n=s.get("icon-image"),l=("constant"!==r.value.kind||r.value.value instanceof pt&&!r.value.value.isEmpty()||r.value.value.toString().length>0)&&("constant"!==a.value.kind||a.value.value.length>0),c="constant"!==n.value.kind||!!n.value.value||Object.keys(n.parameters).length>0,u=s.get("symbol-sort-key");if(this.features=[],!l&&!c)return;const h=t.iconDependencies,p=t.glyphDependencies,m=t.availableImages,d=new gs(this.zoom);for(const{feature:t,id:r,index:n,sourceLayerIndex:f}of e){const e=o._featureFilter.needGeometry,y=Za(t,e);if(!o._featureFilter.filter(d,y,i))continue;let g,_;if(e||(y.geometry=ja(t)),l){const e=o.getValueAndResolveTokens("text-field",y,i,m),t=pt.factory(e);Xc(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ds()||this.hasRTLText&&ys.isParsed())&&(g=El(t,o,y))}if(c){const e=o.getValueAndResolveTokens("icon-image",y,i,m);_=e instanceof mt?e:mt.fromString(e)}if(!g&&!_)continue;const b=this.sortFeaturesByKey?u.evaluate(y,{},i):void 0;if(this.features.push({id:r,text:g,icon:_,index:n,sourceLayerIndex:f,geometry:y.geometry,properties:t.properties,type:Gc[t.type],sortKey:b}),_&&(h[_.name]=!0),g){const e=a.evaluate(y,{},i).join(","),t="map"===s.get("text-rotation-alignment")&&"point"!==s.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(tc.vertical)>=0;for(const i of g.sections)if(i.image)h[i.image.name]=!0;else{const o=es(g.toString()),s=i.fontStack||e,a=p[s]=p[s]||{};this.calculateGlyphDependencies(i.text,a,t,this.allowVerticalPlacement,o)}}}"line"===s.get("symbol-placement")&&(this.features=function(e){const t={},i={},o=[];let s=0;function a(t){o.push(e[t]),s++}function r(e,t,s){const a=i[e];return delete i[e],i[t]=a,o[a].geometry[0].pop(),o[a].geometry[0]=o[a].geometry[0].concat(s[0]),a}function n(e,i,s){const a=t[i];return delete t[i],t[e]=a,o[a].geometry[0].shift(),o[a].geometry[0]=s[0].concat(o[a].geometry[0]),a}function l(e,t,i){const o=i?t[0][t[0].length-1]:t[0][0];return`${e}:${o.x}:${o.y}`}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,p=u.text?u.text.toString():null;if(!p){a(c);continue}const m=l(p,h),d=l(p,h,!0);if(m in i&&d in t&&i[m]!==t[d]){const e=n(m,d,h),s=r(m,d,o[e].geometry);delete t[m],delete i[d],i[l(p,o[s].geometry,!0)]=s,o[e].geometry=null}else m in i?r(m,d,h):d in t?n(m,d,h):(a(c),t[m]=s-1,i[d]=s-1)}return o.filter(e=>e.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((e,t)=>e.sortKey-t.sortKey)}update(e,t,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const i=this.lineVertexArray.length;if(void 0!==e.segment){let i=e.dist(t[e.segment+1]),o=e.dist(t[e.segment]);const s={};for(let o=e.segment+1;o<t.length;o++)s[o]={x:t[o].x,y:t[o].y,tileUnitDistanceFromAnchor:i},o<t.length-1&&(i+=t[o+1].dist(t[o]));for(let i=e.segment||0;i>=0;i--)s[i]={x:t[i].x,y:t[i].y,tileUnitDistanceFromAnchor:o},i>0&&(o+=t[i-1].dist(t[i]));for(let e=0;e<t.length;e++){const t=s[e];this.lineVertexArray.emplaceBack(t.x,t.y,t.tileUnitDistanceFromAnchor)}}return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(e,t,i,o,s,a,r,n,l,c,u,h){const p=e.indexArray,m=e.layoutVertexArray,d=e.segments.prepareSegment(4*t.length,m,p,this.canOverlap?a.sortKey:void 0),f=this.glyphOffsetArray.length,y=d.vertexLength,g=this.allowVerticalPlacement&&r===tc.vertical?Math.PI/2:0,_=a.text&&a.text.sections;for(let o=0;o<t.length;o++){const{tl:s,tr:r,bl:l,br:c,tex:u,pixelOffsetTL:f,pixelOffsetBR:y,minFontScaleX:b,minFontScaleY:v,glyphOffset:x,isSDF:L,sectionIndex:I}=t[o],w=d.vertexLength,q=x[1];Zc(m,n.x,n.y,s.x,q+s.y,u.x,u.y,i,L,f.x,f.y,b,v),Zc(m,n.x,n.y,r.x,q+r.y,u.x+u.w,u.y,i,L,y.x,f.y,b,v),Zc(m,n.x,n.y,l.x,q+l.y,u.x,u.y+u.h,i,L,f.x,y.y,b,v),Zc(m,n.x,n.y,c.x,q+c.y,u.x+u.w,u.y+u.h,i,L,y.x,y.y,b,v),Hc(e.dynamicLayoutVertexArray,n,g),p.emplaceBack(w,w+1,w+2),p.emplaceBack(w+1,w+2,w+3),d.vertexLength+=4,d.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(x[0]),o!==t.length-1&&I===t[o+1].sectionIndex||e.programConfigurations.populatePaintArrays(m.length,a,a.index,{},h,_&&_[I])}e.placedSymbolArray.emplaceBack(n.x,n.y,f,this.glyphOffsetArray.length-f,y,l,c,n.segment,i?i[0]:0,i?i[1]:0,o[0],o[1],r,0,!1,0,u)}_commitLayoutVertex(e,t,i,o,s){e.emplaceBack(t.x,t.y,i,o,Math.round(s.x),Math.round(s.y))}_addCollisionDebugVertices(e,t,i,o,a){const r=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),n=r.vertexLength,l=a.anchorX,c=a.anchorY;for(let e=0;e<4;e++)i.collisionVertexArray.emplaceBack(0,0,0,0);i.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),i.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),i.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),i.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(i.layoutVertexArray,o,l,c,new s(e.x1,e.y1)),this._commitLayoutVertex(i.layoutVertexArray,o,l,c,new s(e.x2,e.y1)),this._commitLayoutVertex(i.layoutVertexArray,o,l,c,new s(e.x2,e.y2)),this._commitLayoutVertex(i.layoutVertexArray,o,l,c,new s(e.x1,e.y2)),r.vertexLength+=4;const u=i.indexArray;u.emplaceBack(n,n+1),u.emplaceBack(n+1,n+2),u.emplaceBack(n+2,n+3),u.emplaceBack(n+3,n),r.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,i,o,s,a){for(let r=o;r<s;r++){const o=i.get(r),s=this.getSymbolInstanceTextSize(e,a,t,r);this._addCollisionDebugVertices(o,s,this.textCollisionBox,o.anchorPoint,a)}}_addIconDebugCollisionBoxes(e,t,i,o,s,a){for(let r=o;r<s;r++){const o=i.get(r),s=this.getSymbolInstanceIconSize(e,t,r);this._addCollisionDebugVertices(o,s,this.iconCollisionBox,o.anchorPoint,a)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Wc(Hs,xl.members,ia),this.iconCollisionBox=new Wc(Hs,xl.members,ia);const i=ql(this.iconSizeData,e),o=ql(this.textSizeData,e);for(let s=0;s<this.symbolInstances.length;s++){const a=this.symbolInstances.get(s);this._addTextDebugCollisionBoxes(o,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._addTextDebugCollisionBoxes(o,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._addIconDebugCollisionBoxes(i,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a),this._addIconDebugCollisionBoxes(i,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a)}}getSymbolInstanceTextSize(e,t,i,o){const s=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:o),a=wl(this.textSizeData,e,s)/24;return this.tilePixelRatio*a}getSymbolInstanceIconSize(e,t,i){const o=this.icon.placedSymbolArray.get(i),s=wl(this.iconSizeData,e,o);return this.tilePixelRatio*s}_commitDebugCollisionVertexUpdate(e,t,i){e.emplaceBack(t,-i,-i),e.emplaceBack(t,i,-i),e.emplaceBack(t,i,i),e.emplaceBack(t,-i,i)}_updateTextDebugCollisionBoxes(e,t,i,o,s,a){for(let r=o;r<s;r++){const o=i.get(r),s=this.getSymbolInstanceTextSize(e,a,t,r);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,s,o.padding)}}_updateIconDebugCollisionBoxes(e,t,i,o,s){for(let a=o;a<s;a++){const o=i.get(a),s=this.getSymbolInstanceIconSize(e,t,a);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,s,o.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const i=ql(this.iconSizeData,e),o=ql(this.textSizeData,e);for(let s=0;s<this.symbolInstances.length;s++){const a=this.symbolInstances.get(s);this._updateTextDebugCollisionBoxes(o,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._updateTextDebugCollisionBoxes(o,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._updateIconDebugCollisionBoxes(i,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex),this._updateIconDebugCollisionBoxes(i,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,i,o,s,a,r,n,l){const c={};for(let o=t;o<i;o++){const t=e.get(o);c.textBox={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,padding:t.padding,anchorPointX:t.anchorPointX,anchorPointY:t.anchorPointY},c.textFeatureIndex=t.featureIndex;break}for(let t=o;t<s;t++){const i=e.get(t);c.verticalTextBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,padding:i.padding,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},c.verticalTextFeatureIndex=i.featureIndex;break}for(let t=a;t<r;t++){const i=e.get(t);c.iconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,padding:i.padding,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},c.iconFeatureIndex=i.featureIndex;break}for(let t=n;t<l;t++){const i=e.get(t);c.verticalIconBox={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,padding:i.padding,anchorPointX:i.anchorPointX,anchorPointY:i.anchorPointY},c.verticalIconFeatureIndex=i.featureIndex;break}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const i=e.placedSymbolArray.get(t),o=i.vertexStartIndex+4*i.numGlyphs;for(let t=i.vertexStartIndex;t<o;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),i=Math.cos(e),o=[],s=[],a=[];for(let e=0;e<this.symbolInstances.length;++e){a.push(e);const r=this.symbolInstances.get(e);o.push(0|Math.round(t*r.anchorX+i*r.anchorY)),s.push(r.featureIndex)}return a.sort((e,t)=>o[e]-o[t]||s[t]-s[e]),a}addToSortKeyRanges(e,t){const i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex),[t.rightJustifiedTextSymbolIndex,t.centerJustifiedTextSymbolIndex,t.leftJustifiedTextSymbolIndex].forEach((e,t,i)=>{e>=0&&i.indexOf(e)===t&&this.addIndicesForPlacedSymbol(this.text,e)}),t.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,t.verticalPlacedTextSymbolIndex),t.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.placedIconSymbolIndex),t.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,t.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Ho("SymbolBucket",Kc,{omit:["layers","collisionBoxArray","features","compareText"]}),Kc.MAX_GLYPHS=65535,Kc.addDynamicAttributes=Hc;const Jc=new As({"symbol-placement":new Fs(Ue.layout_symbol["symbol-placement"]),"symbol-spacing":new Fs(Ue.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Fs(Ue.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Es(Ue.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Fs(Ue.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Fs(Ue.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Fs(Ue.layout_symbol["icon-ignore-placement"]),"icon-optional":new Fs(Ue.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Fs(Ue.layout_symbol["icon-rotation-alignment"]),"icon-size":new Es(Ue.layout_symbol["icon-size"]),"icon-text-fit":new Fs(Ue.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Fs(Ue.layout_symbol["icon-text-fit-padding"]),"icon-image":new Es(Ue.layout_symbol["icon-image"]),"icon-rotate":new Es(Ue.layout_symbol["icon-rotate"]),"icon-padding":new Fs(Ue.layout_symbol["icon-padding"]),"icon-keep-upright":new Fs(Ue.layout_symbol["icon-keep-upright"]),"icon-offset":new Es(Ue.layout_symbol["icon-offset"]),"icon-anchor":new Es(Ue.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Fs(Ue.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Fs(Ue.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Fs(Ue.layout_symbol["text-rotation-alignment"]),"text-field":new Es(Ue.layout_symbol["text-field"]),"text-font":new Es(Ue.layout_symbol["text-font"]),"text-size":new Es(Ue.layout_symbol["text-size"]),"text-max-width":new Es(Ue.layout_symbol["text-max-width"]),"text-line-height":new Fs(Ue.layout_symbol["text-line-height"]),"text-letter-spacing":new Es(Ue.layout_symbol["text-letter-spacing"]),"text-justify":new Es(Ue.layout_symbol["text-justify"]),"text-radial-offset":new Es(Ue.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Fs(Ue.layout_symbol["text-variable-anchor"]),"text-anchor":new Es(Ue.layout_symbol["text-anchor"]),"text-max-angle":new Fs(Ue.layout_symbol["text-max-angle"]),"text-writing-mode":new Fs(Ue.layout_symbol["text-writing-mode"]),"text-rotate":new Es(Ue.layout_symbol["text-rotate"]),"text-padding":new Fs(Ue.layout_symbol["text-padding"]),"text-keep-upright":new Fs(Ue.layout_symbol["text-keep-upright"]),"text-transform":new Es(Ue.layout_symbol["text-transform"]),"text-offset":new Es(Ue.layout_symbol["text-offset"]),"text-allow-overlap":new Fs(Ue.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Fs(Ue.layout_symbol["text-ignore-placement"]),"text-optional":new Fs(Ue.layout_symbol["text-optional"])});var Yc={paint:new As({"icon-opacity":new Es(Ue.paint_symbol["icon-opacity"]),"icon-color":new Es(Ue.paint_symbol["icon-color"]),"icon-halo-color":new Es(Ue.paint_symbol["icon-halo-color"]),"icon-halo-width":new Es(Ue.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Es(Ue.paint_symbol["icon-halo-blur"]),"icon-translate":new Fs(Ue.paint_symbol["icon-translate"]),"icon-translate-anchor":new Fs(Ue.paint_symbol["icon-translate-anchor"]),"text-opacity":new Es(Ue.paint_symbol["text-opacity"]),"text-color":new Es(Ue.paint_symbol["text-color"],{runtimeType:We,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Es(Ue.paint_symbol["text-halo-color"]),"text-halo-width":new Es(Ue.paint_symbol["text-halo-width"]),"text-halo-blur":new Es(Ue.paint_symbol["text-halo-blur"]),"text-translate":new Fs(Ue.paint_symbol["text-translate"]),"text-translate-anchor":new Fs(Ue.paint_symbol["text-translate-anchor"])}),layout:Jc};class eu{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:Ze,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ho("FormatSectionOverride",eu,{omit:["defaultValue"]});class tu extends Ra{constructor(e){super(e,Yc)}recalculate(e,t){if(super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const e=this.layout.get("text-writing-mode");if(e){const t=[];for(const i of e)t.indexOf(i)<0&&t.push(i);this.layout._values["text-writing-mode"]=t}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(e,t,i,o){const s=this.layout.get(e).evaluate(t,{},i,o),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||Yi(a.value)||!s?s:function(e,t){return t.replace(/{([^{}]+)}/g,(t,i)=>i in e?String(e[i]):"")}(t.properties,s)}createBucket(e){return new Kc(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of Yc.paint.overridableProperties){if(!tu.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),i=new eu(t),o=new Ji(i,t.property.specification);let s=null;s="constant"===t.value.kind||"source"===t.value.kind?new to("source",o):new io("composite",o,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new ws(t.property,s,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,i){return!(!this.layout||t.isDataDriven()||i.isDataDriven())&&tu.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const i=e.get("text-field"),o=Yc.paint.properties[t];let s=!1;const a=e=>{for(const t of e)if(o.overrides&&o.overrides.hasOverride(t))return void(s=!0)};if("constant"===i.value.kind&&i.value.value instanceof pt)a(i.value.value.sections);else if("source"===i.value.kind){const e=t=>{s||(t instanceof _t&&yt(t.value)===et?a(t.value.sections):t instanceof Lt?a(t.sections):t.eachChild(e))},t=i.value;t._styleExpression&&e(t._styleExpression.expression)}return s}getProgramConfiguration(e){return new Da(this,e)}}var iu={paint:new As({"background-color":new Fs(Ue.paint_background["background-color"]),"background-pattern":new Cs(Ue.paint_background["background-pattern"]),"background-opacity":new Fs(Ue.paint_background["background-opacity"])})},ou={paint:new As({"raster-opacity":new Fs(Ue.paint_raster["raster-opacity"]),"raster-hue-rotate":new Fs(Ue.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Fs(Ue.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Fs(Ue.paint_raster["raster-brightness-max"]),"raster-saturation":new Fs(Ue.paint_raster["raster-saturation"]),"raster-contrast":new Fs(Ue.paint_raster["raster-contrast"]),"raster-resampling":new Fs(Ue.paint_raster["raster-resampling"]),"raster-fade-duration":new Fs(Ue.paint_raster["raster-fade-duration"])})};class su extends Ra{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var au={paint:new As({"sky-type":new Fs(Ue.paint_sky["sky-type"]),"sky-atmosphere-sun":new Fs(Ue.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Fs(Ue.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Fs(Ue.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Fs(Ue.paint_sky["sky-gradient-radius"]),"sky-gradient":new zs(Ue.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Fs(Ue.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Fs(Ue.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Fs(Ue.paint_sky["sky-opacity"])})};function ru(e,t,i){const o=xr(0,0,1),s=Dr(Mr());return function(e,t,i){i*=.5;var o=t[0],s=t[1],a=t[2],r=t[3],n=Math.sin(i),l=Math.cos(i);e[0]=o*l-a*n,e[1]=s*l+r*n,e[2]=a*l+o*n,e[3]=r*l-s*n}(s,s,i?-h(e)+Math.PI:h(e)),Sr(s,s,-h(t)),Cr(o,o,s),Fr(o,o)}const nu={circle:class extends Ra{constructor(e){super(e,pr)}createBucket(e){return new Xa(e)}queryRadius(e){const t=e;return nr("circle-radius",this,t)+nr("circle-stroke-width",this,t)+lr(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,i,o,s,a,r,n){const l="map"===this.paint.get("circle-pitch-alignment");if(l&&e.queryGeometry.isAboveHorizon)return!1;const c=ur(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(t,i)+this.paint.get("circle-stroke-width").evaluate(t,i),h=l?u*e.pixelToTileUnitsFactor:u;for(const t of o)for(const i of t){const t=i.add(c),o=n&&a.elevation?a.elevation.exaggeration()*n.getElevationAt(t.x,t.y,!0):0,s=l?t:Rr(t,o,r),u=l?e.tilespaceRays.map(e=>$r(e,o)):e.queryGeometry.screenGeometry;let p=h;const m=Br([],[i.x,i.y,o,1],r);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?p*=m[3]/a.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(p*=a.cameraToCenterDistance/m[3]),Wa(u,s,p))return!0}return!1}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new Da(this,e)}},heatmap:class extends Ra{createBucket(e){return new Vr(e)}constructor(e){super(e,Qr),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Wr({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new Da(this,e)}},hillshade:class extends Ra{constructor(e){super(e,Kr)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getProgramConfiguration(e){return new Da(this,e)}},fill:class extends Ra{constructor(e){super(e,Un)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),i=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&i.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),i}getProgramConfiguration(e){return new Da(this,e)}recalculate(e,t){super.recalculate(e,t);const i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new Sn(e)}queryRadius(){return lr(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,i,o,s,a){return!e.queryGeometry.isAboveHorizon&&Ka(cr(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),o)}isTileClipped(){return!0}},"fill-extrusion":class extends Ra{constructor(e){super(e,ol)}createBucket(e){return new tl(e)}queryRadius(){return lr(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new Da(this,e)}queryIntersectsFeature(e,t,i,o,a,r,n){const l=ur(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),r.angle,e.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(t,i),u=this.paint.get("fill-extrusion-base").evaluate(t,i),h=e.queryGeometry.screenGeometry,p=function(e,t,i,o,a){const r=[],n=[],l=a[8]*t,c=a[9]*t,u=a[10]*t,h=a[11]*t,p=a[8]*i,m=a[9]*i,d=a[10]*i,f=a[11]*i;for(const t of e){const e=[],i=[];for(const r of t){const t=r.x+o.x,n=r.y+o.y,y=a[0]*t+a[4]*n+a[12],g=a[1]*t+a[5]*n+a[13],_=a[2]*t+a[6]*n+a[14],b=a[3]*t+a[7]*n+a[15],v=_+u,x=b+h,L=y+p,I=g+m,w=_+d,q=b+f,F=new s((y+l)/x,(g+c)/x);F.z=v/x,e.push(F);const E=new s(L/q,I/q);E.z=w/q,i.push(E)}r.push(e),n.push(i)}return[r,n]}(o,u,c,l,n);return function(e,t,i){let o=1/0;Ka(i,t)&&(o=al(i,t[0]));for(let s=0;s<t.length;s++){const a=t[s],r=e[s];for(let e=0;e<a.length-1;e++){const t=a[e],s=[t,a[e+1],r[e+1],r[e],t];Qa(i,s)&&(o=Math.min(o,al(i,s)))}}return o!==1/0&&o}(p[0],p[1],h)}},line:class extends Ra{constructor(e){super(e,dl),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){"line-gradient"===e&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Jt,this.gradientVersion=(this.gradientVersion+1)%l)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=fl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new pl(e)}getProgramIds(){const e=this.paint.get("line-dasharray"),t=this.paint.get("line-pattern").constantOr(1),i=this.paint.get("line-gradient");return[t?"linePattern":e?"lineSDF":i?"lineGradient":"line"]}getProgramConfiguration(e){return new Da(this,e)}queryRadius(e){const t=e,i=yl(nr("line-width",this,t),nr("line-gap-width",this,t)),o=nr("line-offset",this,t);return i/2+Math.abs(o)+lr(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,i,o,a,r){if(e.queryGeometry.isAboveHorizon)return!1;const n=cr(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),r.angle,e.pixelToTileUnitsFactor),l=e.pixelToTileUnitsFactor/2*yl(this.paint.get("line-width").evaluate(t,i),this.paint.get("line-gap-width").evaluate(t,i)),c=this.paint.get("line-offset").evaluate(t,i);return c&&(o=function(e,t){const i=[],o=new s(0,0);for(let s=0;s<e.length;s++){const a=e[s],r=[];for(let e=0;e<a.length;e++){const i=a[e-1],s=a[e],n=a[e+1],l=0===e?o:s.sub(i)._unit()._perp(),c=e===a.length-1?o:n.sub(s)._unit()._perp(),u=l._add(c)._unit();u._mult(1/(u.x*c.x+u.y*c.y)),r.push(u._mult(t)._add(s))}i.push(r)}return i}(o,c*e.pixelToTileUnitsFactor)),function(e,t,i){for(let o=0;o<t.length;o++){const s=t[o];if(e.length>=3)for(let t=0;t<s.length;t++)if(sr(e,s[t]))return!0;if(Ja(e,s,i))return!0}return!1}(n,o,l)}isTileClipped(){return!0}},symbol:tu,background:class extends Ra{constructor(e){super(e,iu)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Ra{constructor(e){super(e,ou)}getProgramIds(){return["raster"]}},sky:class extends Ra{constructor(e){super(e,au),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Wr({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}}getCenter(e,t){const i=this.paint.get("sky-type");if("atmosphere"===i){const i=this.paint.get("sky-atmosphere-sun"),o=!i,s=e.style.light,a=s.properties.get("position");return o&&"viewport"===s.properties.get("anchor")&&C("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),o?ru(a.azimuthal,90-a.polar,t):ru(i[0],90-i[1],t)}if("gradient"===i){const e=this.paint.get("sky-gradient-center");return ru(e[0],90-e[1],t)}}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}},{HTMLImageElement:lu,HTMLCanvasElement:cu,HTMLVideoElement:uu,ImageData:hu,ImageBitmap:pu}=r;class mu{constructor(e,t,i,o){this.context=e,this.format=i,this.texture=e.gl.createTexture(),this.update(t,o)}update(e,t,i){const{width:o,height:s}=e,a=!(this.size&&this.size[0]===o&&this.size[1]===s||i),{context:r}=this,{gl:n}=r;if(this.useMipmap=Boolean(t&&t.useMipmap),n.bindTexture(n.TEXTURE_2D,this.texture),r.pixelStoreUnpackFlipY.set(!1),r.pixelStoreUnpack.set(1),r.pixelStoreUnpackPremultiplyAlpha.set(this.format===n.RGBA&&(!t||!1!==t.premultiply)),a)this.size=[o,s],e instanceof lu||e instanceof cu||e instanceof uu||e instanceof hu||pu&&e instanceof pu?n.texImage2D(n.TEXTURE_2D,0,this.format,this.format,n.UNSIGNED_BYTE,e):n.texImage2D(n.TEXTURE_2D,0,this.format,o,s,0,this.format,n.UNSIGNED_BYTE,e.data);else{const{x:t,y:a}=i||{x:0,y:0};e instanceof lu||e instanceof cu||e instanceof uu||e instanceof hu||pu&&e instanceof pu?n.texSubImage2D(n.TEXTURE_2D,0,t,a,n.RGBA,n.UNSIGNED_BYTE,e):n.texSubImage2D(n.TEXTURE_2D,0,t,a,o,s,n.RGBA,n.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&n.generateMipmap(n.TEXTURE_2D)}bind(e,t,i){const{context:o}=this,{gl:s}=o;s.bindTexture(s.TEXTURE_2D,this.texture),i!==s.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(i=s.LINEAR),e!==this.filter&&(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,e),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,t),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class du{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const fu=r.performance;class yu{constructor(e){this._marks={start:[e.url,"start"].join("#"),end:[e.url,"end"].join("#"),measure:e.url.toString()},fu.mark(this._marks.start)}finish(){fu.mark(this._marks.end);let e=fu.getEntriesByName(this._marks.measure);return 0===e.length&&(fu.measure(this._marks.measure,this._marks.start,this._marks.end),e=fu.getEntriesByName(this._marks.measure),fu.clearMarks(this._marks.start),fu.clearMarks(this._marks.end),fu.clearMeasures(this._marks.measure)),e}}class gu{constructor(){this.tasks={},this.taskQueue=[],I(["process"],this),this.invoker=new du(this.process),this.nextId=0}add(e,t){const i=this.nextId++;return this.tasks[i]={fn:e,metadata:t,priority:_u(t),id:i},this.taskQueue.push(i),this.invoker.trigger(),{cancel:()=>{delete this.tasks[i]}}}process(){P();try{if(this.taskQueue=this.taskQueue.filter(e=>!!this.tasks[e]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let i=0;i<this.taskQueue.length;i++){const o=this.tasks[this.taskQueue[i]];o.priority<t&&(t=o.priority,e=i)}if(null===e)return null;const i=this.taskQueue[e];return this.taskQueue.splice(e,1),i}remove(){this.invoker.remove()}}function _u({type:e,isSymbolTile:t,zoom:i}){return i=i||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-i:"maybePrepare"===e&&t?400-i:500:200-i:100-i}class bu{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof vu?new vu(e.lng,e.lat):vu.convert(e),this}setSouthWest(e){return this._sw=e instanceof vu?new vu(e.lng,e.lat):vu.convert(e),this}extend(e){const t=this._sw,i=this._ne;let o,s;if(e instanceof vu)o=e,s=e;else{if(!(e instanceof bu))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(bu.convert(e)):this.extend(vu.convert(e)):this;if(o=e._sw,s=e._ne,!o||!s)return this}return t||i?(t.lng=Math.min(o.lng,t.lng),t.lat=Math.min(o.lat,t.lat),i.lng=Math.max(s.lng,i.lng),i.lat=Math.max(s.lat,i.lat)):(this._sw=new vu(o.lng,o.lat),this._ne=new vu(s.lng,s.lat)),this}getCenter(){return new vu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new vu(this.getWest(),this.getNorth())}getSouthEast(){return new vu(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:i}=vu.convert(e);let o=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(o=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&o}static convert(e){return!e||e instanceof bu?e:new bu(e)}}class vu{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new vu(y(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,i=this.lat*t,o=e.lat*t,s=Math.sin(i)*Math.sin(o)+Math.cos(i)*Math.cos(o)*Math.cos((e.lng-this.lng)*t);return 6371008.8*Math.acos(Math.min(s,1))}toBounds(e=0){const t=360*e/40075017,i=t/Math.cos(Math.PI/180*this.lat);return new bu(new vu(this.lng-i,this.lat-t),new vu(this.lng+i,this.lat+t))}static convert(e){if(e instanceof vu)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new vu(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new vu(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const xu=2*Math.PI*6371008.8;function Lu(e){return xu*Math.cos(e*Math.PI/180)}function Iu(e){return(180+e)/360}function wu(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function qu(e,t){return e/Lu(t)}function Fu(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Eu(e,t){return e*Lu(Fu(t))}class Tu{constructor(e,t,i=0){this.x=+e,this.y=+t,this.z=+i}static fromLngLat(e,t=0){const i=vu.convert(e);return new Tu(Iu(i.lng),wu(i.lat),qu(t,i.lat))}toLngLat(){return new vu(360*this.x-180,Fu(this.y))}toAltitude(){return Eu(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/xu*(e=Fu(this.y),1/Math.cos(e*Math.PI/180));var e}}function Cu(e,t,i){var o=2*Math.PI*6378137/256/Math.pow(2,i);return[e*o-2*Math.PI*6378137/2,t*o-2*Math.PI*6378137/2]}class zu{constructor(e,t,i){this.z=e,this.x=t,this.y=i,this.key=Bu(0,e,e,t,i)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const i=(s=this.y,a=this.z,r=Cu(256*(o=this.x),256*(s=Math.pow(2,a)-s-1),a),n=Cu(256*(o+1),256*(s+1),a),r[0]+","+r[1]+","+n[0]+","+n[1]);var o,s,a,r,n;const l=function(e,t,i){let o,s="";for(let a=e;a>0;a--)o=1<<a-1,s+=(t&o?1:0)+(i&o?2:0);return s}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",l).replace("{bbox-epsg-3857}",i)}getTilePoint(e){const t=Math.pow(2,this.z);return new s(8192*(e.x*t-this.x),8192*(e.y*t-this.y))}getTileVec3(e){const t=Math.pow(2,this.z);return xr(8192*(e.x*t-this.x),8192*(e.y*t-this.y),Eu(e.z,e.y))}toString(){return`${this.z}/${this.x}/${this.y}`}}class Au{constructor(e,t){this.wrap=e,this.canonical=t,this.key=Bu(e,t.z,t.z,t.x,t.y)}}class Pu{constructor(e,t,i,o,s){this.overscaledZ=e,this.wrap=t,this.canonical=new zu(i,+o,+s),this.key=0===t&&e===i?this.canonical.key:Bu(t,e,i,o,s)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new Pu(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Pu(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return Bu(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const i=this.canonical.z-e;return Bu(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new Pu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,i=2*this.canonical.x,o=2*this.canonical.y;return[new Pu(t,this.wrap,t,i,o),new Pu(t,this.wrap,t,i+1,o),new Pu(t,this.wrap,t,i,o+1),new Pu(t,this.wrap,t,i+1,o+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Pu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Pu(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Au(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(e){return this.canonical.getTilePoint(new Tu(e.x-this.wrap,e.y))}getTileVec3(e){return this.canonical.getTileVec3(new Tu(e.x-this.wrap,e.y,e.z))}}function Bu(e,t,i,o,s){const a=1<<Math.min(i,22);let r=a*(s%a)+o%a;return e&&i<22&&(r+=a*a*((e<0?-2*e-1:2*e)%(1<<2*(22-i)))),16*(32*r+i)+(t-i)}Ho("CanonicalTileID",zu),Ho("OverscaledTileID",Pu,{omit:["posMatrix"]});class Mu{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}class Du{constructor(e,t,i,o,s){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=o,this.properties=e.properties,this.id=s}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={geometry:this.geometry};for(const t in this)"_geometry"!==t&&"_vectorTileFeature"!==t&&(e[t]=this[t]);return e}}var Su=Ss([{name:"a_pos",type:"Int16",components:2}]);class ku{constructor(e,t,i){this.tileID=e,this.uid=v(),this.uses=0,this.tileSize=t,this.tileZoom=i,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const t=e+this.timeAdded;t<V.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}loadVectorData(e,t,i){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const i={};if(!t)return i;for(const o of e){const e=o.layerIds.map(e=>t.getLayer(e)).filter(Boolean);if(0!==e.length){o.layers=e,o.stateDependentLayerIds&&(o.stateDependentLayers=o.stateDependentLayerIds.map(t=>e.filter(e=>e.id===t)[0]));for(const t of e)i[t.id]=o}}return i}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Kc){if(this.hasSymbolBuckets=!0,!i)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Kc&&t.hasRTLText){this.hasRTLText=!0,ys.isLoading()||ys.isLoaded()||"deferred"!==ds()||fs();break}}this.queryPadding=0;for(const e in this.buckets){const i=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(i))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new ra}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const i=this.buckets[t];i.uploadPending()&&i.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new mu(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new mu(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,i,o,s,a,r,n){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:o,pixelPosMatrix:r,transform:a,params:s},e,t,i):{}}querySourceFeatures(e,t){const i=this.latestFeatureIndex;if(!i||!i.rawTileData)return;const o=i.loadVTLayers(),s=t?t.sourceLayer:"",a=o._geojsonTileLayer||o[s];if(!a)return;const r=mo(t&&t.filter),{z:n,x:l,y:c}=this.tileID.canonical,u={z:n,x:l,y:c};for(let t=0;t<a.length;t++){const o=a.feature(t);if(r.needGeometry){const e=Za(o,!0);if(!r.filter(new gs(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!r.filter(new gs(this.tileID.overscaledZ),o))continue;const h=i.getId(o,s),p=new Du(o,n,l,c,h);p.tile=u,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=B(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let i=!1;if(this.expirationTime>e)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{const o=this.expirationTime-t;o?this.expirationTime=e+Math.max(o,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length)return;const i=this.latestFeatureIndex.loadVTLayers();for(const o in this.buckets){if(!t.style.hasLayer(o))continue;const s=this.buckets[o],a=s.layers[0].sourceLayer||"_geojsonTileLayer",r=i[a],n=e[a];if(!r||!n||0===Object.keys(n).length)continue;s.update(n,r,this.imageAtlas&&this.imageAtlas.patternPositions||{});const l=t&&t.style&&t.style.getLayer(o);l&&(this.queryPadding=Math.max(this.queryPadding,l.queryRadius(s)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<V.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=V.now()+e}setDependencies(e,t){const i={};for(const e of t)i[e]=!0;this.dependencies[e]=i}hasDependency(e,t){for(const i of e){const e=this.dependencies[i];if(e)for(const i of t)if(e[i])return!0}return!1}clearQueryDebugViz(){}}class Uu{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,i){const o=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][o]=this.stateChanges[e][o]||{},_(this.stateChanges[e][o],i),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==o&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][o]){this.deletedStates[e][o]={};for(const t in this.state[e][o])i[t]||(this.deletedStates[e][o][t]=null)}else for(const t in i)this.deletedStates[e]&&this.deletedStates[e][o]&&null===this.deletedStates[e][o][t]&&delete this.deletedStates[e][o][t]}removeFeatureState(e,t,i){if(null===this.deletedStates[e])return;const o=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&void 0!==t)null!==this.deletedStates[e][o]&&(this.deletedStates[e][o]=this.deletedStates[e][o]||{},this.deletedStates[e][o][i]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][o])for(i in this.deletedStates[e][o]={},this.stateChanges[e][o])this.deletedStates[e][o][i]=null;else this.deletedStates[e][o]=null;else this.deletedStates[e]=null}getState(e,t){const i=String(t),o=_({},(this.state[e]||{})[i],(this.stateChanges[e]||{})[i]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const i=this.deletedStates[e][t];if(null===i)return{};for(const e in i)delete o[e]}return o}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const i={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const t={};for(const i in this.stateChanges[e])this.state[e][i]||(this.state[e][i]={}),_(this.state[e][i],this.stateChanges[e][i]),t[i]=this.state[e][i];i[e]=t}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const t={};if(null===this.deletedStates[e])for(const i in this.state[e])t[i]={},this.state[e][i]={};else for(const i in this.deletedStates[e]){if(null===this.deletedStates[e][i])this.state[e][i]={};else for(const t of Object.keys(this.deletedStates[e][i]))delete this.state[e][i][t];t[i]=this.state[e][i]}i[e]=i[e]||{},_(i[e],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(i).length)for(const o in e)e[o].setFeatureState(i,t)}}class Ru{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const i=this.toIdx(e,t);return{min:this.minimums[i],max:this.maximums[i]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function Ou(e,t,i,o){let s=0,a=Number.MAX_VALUE;for(let r=0;r<3;r++)if(Math.abs(o[r])<1e-15){if(i[r]<e[r]||i[r]>t[r])return null}else{const n=1/o[r];let l=(e[r]-i[r])*n,c=(t[r]-i[r])*n;if(l>c){const e=l;l=c,c=e}if(l>s&&(s=l),c<a&&(a=c),s>a)return null}return s}function Nu(e,t,i,o,s,a,r,n,l,c,u){const h=o-e,p=s-t,m=a-i,d=r-e,f=n-t,y=l-i,g=u[1]*y-u[2]*f,_=u[2]*d-u[0]*y,b=u[0]*f-u[1]*d,v=h*g+p*_+m*b;if(Math.abs(v)<1e-15)return null;const x=1/v,L=c[0]-e,I=c[1]-t,w=c[2]-i,q=(L*g+I*_+w*b)*x;if(q<0||q>1)return null;const F=I*m-w*p,E=w*h-L*m,T=L*p-I*h,C=(u[0]*F+u[1]*E+u[2]*T)*x;return C<0||q+C>1?null:(d*F+f*E+y*T)*x}function $u(e,t,i){return(e-t)/(i-t)}function Vu(e,t,i,o,s,a,r,n,l){const c=1<<i,u=a-o,h=r-s,p=(e+1)/c*u+o,m=(t+0)/c*h+s,d=(t+1)/c*h+s;n[0]=(e+0)/c*u+o,n[1]=m,l[0]=p,l[1]=d}class Gu{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),i=[];let o=Math.ceil(Math.pow(2,t));const s=1/o,a=(e,t,i,o,s)=>{const a=o?1:0,r=(e+1)*i-a,n=t*i,l=(t+1)*i-a;s[0]=e*i,s[1]=n,s[2]=r,s[3]=l};let r=new Ru(o);const n=[];for(let t=0;t<o*o;t++){a(t%o,Math.floor(t/o),s,!1,n);const i=Zu(n[0],n[1],e),l=Zu(n[2],n[1],e),c=Zu(n[2],n[3],e),u=Zu(n[0],n[3],e);r.minimums.push(Math.min(i,l,c,u)),r.maximums.push(Math.max(i,l,c,u)),r.leaves.push(1)}for(i.push(r),o/=2;o>=1;o/=2){const e=i[i.length-1];r=new Ru(o);for(let t=0;t<o*o;t++){a(t%o,Math.floor(t/o),2,!0,n);const i=e.getElevation(n[0],n[1]),s=e.getElevation(n[2],n[1]),l=e.getElevation(n[2],n[3]),c=e.getElevation(n[0],n[3]),u=e.isLeaf(n[0],n[1]),h=e.isLeaf(n[2],n[1]),p=e.isLeaf(n[2],n[3]),m=e.isLeaf(n[0],n[3]),d=Math.min(i.min,s.min,l.min,c.min),f=Math.max(i.max,s.max,l.max,c.max),y=u&&h&&p&&m;r.maximums.push(f),r.minimums.push(d),r.leaves.push(f-d<=5&&y?1:0)}i.push(r)}return i}(this.dem),i=t.length-1,o=t[i];this._addNode(o.minimums[0],o.maximums[0],o.leaves[0]),this._construct(t,0,0,i,0)}raycastRoot(e,t,i,o,s,a,r=1){return Ou([e,t,-100],[i,o,this.maximums[0]*r],s,a)}raycast(e,t,i,o,s,a,r=1){if(!this.nodeCount)return null;const n=this.raycastRoot(e,t,i,o,s,a,r);if(null==n)return null;const l=[],c=[],u=[],h=[],p=[{idx:0,t:n,nodex:0,nodey:0,depth:0}];for(;p.length>0;){const{idx:n,t:m,nodex:d,nodey:f,depth:y}=p.pop();if(this.leaves[n]){Vu(d,f,y,e,t,i,o,u,h);const n=1<<y,l=(d+0)/n,c=(d+1)/n,p=(f+0)/n,g=(f+1)/n,_=Zu(l,p,this.dem)*r,b=Zu(c,p,this.dem)*r,v=Zu(c,g,this.dem)*r,x=Zu(l,g,this.dem)*r,L=Nu(u[0],u[1],_,h[0],u[1],b,h[0],h[1],v,s,a),I=Nu(h[0],h[1],v,u[0],h[1],x,u[0],u[1],_,s,a),w=Math.min(null!==L?L:Number.MAX_VALUE,null!==I?I:Number.MAX_VALUE);if(w!==Number.MAX_VALUE)return w;{const e=qr([],s,a,m);if(ju(_,b,x,v,$u(e[0],u[0],h[0]),$u(e[1],u[1],h[1]))>=e[2])return m}continue}let g=0;for(let p=0;p<this._siblingOffset.length;p++){Vu((d<<1)+this._siblingOffset[p][0],(f<<1)+this._siblingOffset[p][1],y+1,e,t,i,o,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[n]+p]*r;const m=Ou(u,h,s,a);if(null!=m){const e=m;l[p]=e;let t=!1;for(let i=0;i<g&&!t;i++)e>=l[c[i]]&&(c.splice(i,0,p),t=!0);t||(c[g]=p),g++}}for(let e=0;e<g;e++){const t=c[e];p.push({idx:this.childOffsets[n]+t,t:l[t],nodex:(d<<1)+this._siblingOffset[t][0],nodey:(f<<1)+this._siblingOffset[t][1],depth:y+1})}}return null}_addNode(e,t,i){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(i),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,i,o,s){if(1===e[o].isLeaf(t,i))return;this.childOffsets[s]||(this.childOffsets[s]=this.nodeCount);const a=o-1,r=e[a];let n,l=0;for(let e=0;e<this._siblingOffset.length;e++){const o=2*t+this._siblingOffset[e][0],s=2*i+this._siblingOffset[e][1],a=r.getElevation(o,s),c=r.isLeaf(o,s),u=this._addNode(a.min,a.max,c);c&&(l|=1<<e),n||(n=u)}for(let o=0;o<this._siblingOffset.length;o++)l&1<<o||this._construct(e,2*t+this._siblingOffset[o][0],2*i+this._siblingOffset[o][1],a,n+o)}}function ju(e,t,i,o,s,a){return Yt(Yt(e,i,a),Yt(t,o,a),s)}function Zu(e,t,i){const o=i.dim,s=f(e*o-.5,0,o-1),a=f(t*o-.5,0,o-1),r=Math.floor(s),n=Math.floor(a),l=Math.min(r+1,o-1),c=Math.min(n+1,o-1);return ju(i.get(r,n),i.get(l,n),i.get(r,c),i.get(l,c),s-r,a-n)}const Hu={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class Xu{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,i,o=!1,s=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return C(`"${i}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const a=this.dim=t.height-2;if(this.data=new Uint32Array(t.data.buffer),this.encoding=i||"mapbox",this.borderReady=o,!o){for(let e=0;e<a;e++)this.data[this._idx(-1,e)]=this.data[this._idx(0,e)],this.data[this._idx(a,e)]=this.data[this._idx(a-1,e)],this.data[this._idx(e,-1)]=this.data[this._idx(e,0)],this.data[this._idx(e,a)]=this.data[this._idx(e,a-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(a,-1)]=this.data[this._idx(a-1,0)],this.data[this._idx(-1,a)]=this.data[this._idx(0,a-1)],this.data[this._idx(a,a)]=this.data[this._idx(a-1,a-1)],s&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Gu(this)}get(e,t){const i=new Uint8Array(this.data.buffer),o=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(i[o],i[o+1],i[o+2])}static getUnpackVector(e){return Hu[e]}get unpackVector(){return Hu[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}_unpackMapbox(e,t,i){return(256*e*256+256*t+i)/10-1e4}_unpackTerrarium(e,t,i){return 256*e+t+i/256-32768}static pack(e,t){const i=[0,0,0,0],o=Xu.getUnpackVector(t);let s=Math.floor((e+o[3])/o[2]);return i[2]=s%256,s=Math.floor(s/256),i[1]=s%256,s=Math.floor(s/256),i[0]=s,i}getPixels(){return new Xr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let o=t*this.dim,s=t*this.dim+this.dim,a=i*this.dim,r=i*this.dim+this.dim;switch(t){case-1:o=s-1;break;case 1:s=o+1}switch(i){case-1:a=r-1;break;case 1:r=a+1}const n=-t*this.dim,l=-i*this.dim;for(let t=a;t<r;t++)for(let i=o;i<s;i++)this.data[this._idx(i,t)]=e.data[this._idx(i+n,t+l)]}onDeserialize(){this._tree&&(this._tree.dem=this)}}Ho("DEMData",Xu),Ho("DemMinMaxQuadTree",Gu,{omit:["dem"]});class Qu{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,i){const o=e.wrapped().key;void 0===this.data[o]&&(this.data[o]=[]);const s={value:t,timeout:void 0};if(void 0!==i&&(s.timeout=setTimeout(()=>{this.remove(e,s)},i)),this.data[o].push(s),this.order.push(o),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const i=e.wrapped().key,o=void 0===t?0:this.data[i].indexOf(t),s=this.data[i][o];return this.data[i].splice(o,1),s.timeout&&clearTimeout(s.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(s.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const i in this.data)for(const o of this.data[i])e(o.value)||t.push(o);for(const e of t)this.remove(e.value.tileID,e)}}class Wu{constructor(e,t,i){this.context=e;const o=e.gl;this.buffer=o.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),o.bufferData(o.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?o.DYNAMIC_DRAW:o.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ku={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ju{constructor(e,t,i,o){this.length=t.length,this.attributes=i,this.itemSize=t.bytesPerElement,this.dynamicDraw=o,this.context=e;const s=e.gl;this.buffer=s.createBuffer(),e.bindVertexBuffer.set(this.buffer),s.bufferData(s.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?s.DYNAMIC_DRAW:s.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let i=0;i<this.attributes.length;i++){const o=t.attributes[this.attributes[i].name];void 0!==o&&e.enableVertexAttribArray(o)}}setVertexAttribPointers(e,t,i){for(let o=0;o<this.attributes.length;o++){const s=this.attributes[o],a=t.attributes[s.name];void 0!==a&&e.vertexAttribPointer(a,s.components,e[Ku[s.type]],!1,this.itemSize,s.offset+this.itemSize*(i||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Yu{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class eh extends Yu{getDefault(){return ct.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class th extends Yu{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class ih extends Yu{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class oh extends Yu{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class sh extends Yu{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class ah extends Yu{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class rh extends Yu{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class nh extends Yu{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class lh extends Yu{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class ch extends Yu{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class uh extends Yu{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class hh extends Yu{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class ph extends Yu{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class mh extends Yu{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class dh extends Yu{getDefault(){return ct.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class fh extends Yu{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class yh extends Yu{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class gh extends Yu{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class _h extends Yu{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class bh extends Yu{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class vh extends Yu{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class xh extends Yu{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Lh extends Yu{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Ih extends Yu{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class wh extends Yu{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class qh extends Yu{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Fh extends Yu{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Eh extends Yu{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class Th extends Yu{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class Ch extends Yu{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class zh extends Yu{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Ah extends Yu{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class Ph extends Ah{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Bh extends Ah{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Mh{constructor(e,t,i,o){this.context=e,this.width=t,this.height=i;const s=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new Ph(e,s),o&&(this.depthAttachment=new Bh(e,s))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Dh{constructor(e,t,i){this.func=e,this.mask=t,this.range=i}}Dh.ReadOnly=!1,Dh.ReadWrite=!0,Dh.disabled=new Dh(519,Dh.ReadOnly,[0,1]);class Sh{constructor(e,t,i,o,s,a){this.test=e,this.ref=t,this.mask=i,this.fail=o,this.depthFail=s,this.pass=a}}Sh.disabled=new Sh({func:519,mask:0},0,0,7680,7680,7680);class kh{constructor(e,t,i){this.blendFunction=e,this.blendColor=t,this.mask=i}}kh.Replace=[1,0],kh.disabled=new kh(kh.Replace,ct.transparent,[!1,!1,!1,!1]),kh.unblended=new kh(kh.Replace,ct.transparent,[!0,!0,!0,!0]),kh.alphaBlended=new kh([1,771],ct.transparent,[!0,!0,!0,!0]);class Uh{constructor(e,t,i){this.enable=e,this.mode=t,this.frontFace=i}}Uh.disabled=new Uh(!1,1029,2305),Uh.backCCW=new Uh(!0,1029,2305),Uh.backCW=new Uh(!0,1029,2304),Uh.frontCW=new Uh(!0,1028,2304),Uh.frontCCW=new Uh(!0,1028,2305);class Rh extends ke{constructor(e,t,i){super(),this.id=e,this._onlySymbols=i,t.on("data",e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),t.on("error",()=>{this._sourceErrored=!0}),this._source=t,this._tiles={},this._cache=new Qu(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Uu}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const i=this._tiles[t];i.upload(e),i.prepare(this.map.style.imageManager)}}getIds(){return g(this._tiles).map(e=>e.tileID).sort(Oh).map(e=>e.key)}getRenderableIds(e){const t=[];for(const i in this._tiles)this._isIdRenderable(+i,e)&&t.push(this._tiles[i]);return e?t.sort((e,t)=>{const i=e.tileID,o=t.tileID,a=new s(i.canonical.x,i.canonical.y)._rotate(this.transform.angle),r=new s(o.canonical.x,o.canonical.y)._rotate(this.transform.angle);return i.overscaledZ-o.overscaledZ||r.y-a.y||r.x-a.x}).map(e=>e.tileID.key):t.map(e=>e.tileID).sort(Oh).map(e=>e.key)}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const i=this._tiles[e];i&&("loading"!==i.state&&(i.state=t),this._loadTile(i,this._tileLoaded.bind(this,i,e,t)))}_tileLoaded(e,t,i,o){if(o)return e.state="errored",void(404!==o.status?this._source.fire(new Se(o,{tile:e})):this.update(this.transform));e.timeAdded=V.now(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new De("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let o=0;o<t.length;o++){const s=t[o];if(e.neighboringTiles&&e.neighboringTiles[s]){const t=this.getTileByID(s);i(e,t),i(t,e)}}function i(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let i=t.tileID.canonical.x-e.tileID.canonical.x;const o=t.tileID.canonical.y-e.tileID.canonical.y,s=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===i&&0===o||Math.abs(o)>1||(Math.abs(i)>1&&(1===Math.abs(i+s)?i+=s:1===Math.abs(i-s)&&(i-=s)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,i,o),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,i,o){for(const s in this._tiles){let a=this._tiles[s];if(o[s]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>i)continue;let r=a.tileID;for(;a&&a.tileID.overscaledZ>t+1;){const e=a.tileID.scaledTo(a.tileID.overscaledZ-1);a=this._tiles[e.key],a&&a.hasData()&&(r=e)}let n=r;for(;n.overscaledZ>t;)if(n=n.scaledTo(n.overscaledZ-1),e[n.key]){o[r.key]=r;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const i=this._loadedParentTiles[e.key];return i&&i.tileID.overscaledZ>=t?i:null}for(let i=e.overscaledZ-1;i>=t;i--){const t=e.scaledTo(i),o=this._getLoadedTile(t);if(o)return o}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const i=Math.ceil(e.width/t)+1,o=Math.ceil(e.height/t)+1,s=Math.floor(i*o*5),a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,s):s;this._cache.setMaxSize(a)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const i in this._tiles){const o=this._tiles[i];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),e[o.tileID.key]=o}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(e,t,i){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!i)return;let o;this.updateCacheSize(e,t),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?o=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(e=>new Pu(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)):(o=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!i,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!!this.transform.elevation&&!this.usedForTerrain}),this._source.hasTile&&(o=o.filter(e=>this._source.hasTile(e)))):o=[];const s=this._updateRetainedTiles(o);if(Nh(this._source.type)&&0!==o.length){const e={},t={},i=Object.keys(s);for(const o of i){const i=s[o],a=this._tiles[o];if(!a||a.fadeEndTime&&a.fadeEndTime<=V.now())continue;const r=this.findLoadedParent(i,Math.max(i.overscaledZ-Rh.maxOverzooming,this._source.minzoom));r&&(this._addTile(r.tileID),e[r.tileID.key]=r.tileID),t[o]=i}const a=o[o.length-1].overscaledZ;for(const e in this._tiles){const i=this._tiles[e];if(s[e]||!i.hasData())continue;let o=i.tileID;for(;o.overscaledZ>a;){o=o.scaledTo(o.overscaledZ-1);const a=this._tiles[o.key];if(a&&a.hasData()&&t[o.key]){s[e]=i.tileID;break}}}for(const t in e)s[t]||(this._coveredTiles[t]=!0,s[t]=e[t])}for(const e in s)this._tiles[e].clearFadeHold();const a=function(e,t){const i=[];for(const o in e)o in t||i.push(o);return i}(this._tiles,s);for(const e of a){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+e)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const i={},o=e[e.length-1].overscaledZ,s=e[0].overscaledZ,a=Math.max(s-Rh.maxOverzooming,this._source.minzoom),r=Math.max(s+Rh.maxUnderzooming,this._source.minzoom),n={};for(const i of e){const e=this._addTile(i);t[i.key]=i,e.hasData()||o<this._source.maxzoom&&(n[i.key]=i)}this._retainLoadedChildren(n,o,r,t);for(const o of e){let e=this._tiles[o.key];if(e.hasData())continue;if(o.canonical.z>=this._source.maxzoom){const e=o.children(this._source.maxzoom)[0],i=this.getTile(e);if(i&&i.hasData()){t[e.key]=e;continue}}else{const e=o.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let s=e.wasRequested();for(let r=o.overscaledZ-1;r>=a;--r){const a=o.scaledTo(r);if(i[a.key])break;if(i[a.key]=!0,e=this.getTile(a),!e&&s&&(e=this._addTile(a)),e&&(t[a.key]=a,s=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let i,o=this._tiles[e].tileID;for(;o.overscaledZ>0;){if(o.key in this._loadedParentTiles){i=this._loadedParentTiles[o.key];break}t.push(o.key);const e=o.scaledTo(o.overscaledZ-1);if(i=this._getLoadedTile(e),i)break;o=e}for(const e of t)this._loadedParentTiles[e]=i}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const i=Boolean(t);return i||(t=new ku(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t?(t.uses++,this._tiles[e.key]=t,i||this._source.fire(new De("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const i=t.getExpiryTimeout();i&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},i))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._cache.reset()}tilesIn(e,t,i){const o=[],s=this.transform;if(!s)return o;for(const a in this._tiles){const r=this._tiles[a];if(i&&r.clearQueryDebugViz(),r.holdingForFade())continue;const n=e.containsTile(r,s,t);n&&o.push(n)}return o}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map(e=>this._tiles[e].tileID);for(const e of t)e.posMatrix=this.transform.calculatePosMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(Nh(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=V.now())return!0}return!1}setFeatureState(e,t,i){this._state.updateState(e=e||"_geojsonTileLayer",t,i)}removeFeatureState(e,t,i){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,i)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,i){const o=this._tiles[e];o&&o.setDependencies(t,i)}reloadTilesForDependencies(e,t){for(const i in this._tiles)this._tiles[i].hasDependency(e,t)&&this._reloadTile(+i,"reloading");this._cache.filter(i=>!i.hasDependency(e,t))}}function Oh(e,t){const i=Math.abs(2*e.wrap)-+(e.wrap<0),o=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||o-i||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Nh(e){return"raster"===e||"image"===e||"video"===e}Rh.maxOverzooming=10,Rh.maxUnderzooming=3;class $h{constructor(e,t,i){this._dem=e,this._scale=t,this._offset=i}static create(e,t,i){const o=i||e.findDEMTileFor(t);if(!o||!o.dem)return;const s=o.dem,a=o.tileID,r=1<<t.canonical.z-a.canonical.z;return new $h(s,o.tileSize/8192/r,[(t.canonical.x/r-a.canonical.x)*s.dim,(t.canonical.y/r-a.canonical.y)*s.dim])}getElevationAt(e,t,i){const o=e*this._scale+this._offset[0],s=t*this._scale+this._offset[1],a=Math.floor(o),r=Math.floor(s),n=this._dem;return i?Yt(Yt(n.get(a,r),n.get(a,r+1),s-r),Yt(n.get(a+1,r),n.get(a+1,r+1),s-r),o-a):n.get(a,r)}}class Vh{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new $o(8192,16,0),this.featureIndexArray=new da,this.promoteId=t}insert(e,t,i,o,s){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,o,s);const r=this.grid;for(let e=0;e<t.length;e++){const i=t[e],o=[1/0,1/0,-1/0,-1/0];for(let e=0;e<i.length;e++){const t=i[e];o[0]=Math.min(o[0],t.x),o[1]=Math.min(o[1],t.y),o[2]=Math.max(o[2],t.x),o[3]=Math.max(o[3],t.y)}o[0]<8192&&o[1]<8192&&o[2]>=0&&o[3]>=0&&r.insert(a,o[0],o[1],o[2],o[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Wn.VectorTile(new Al(this.rawTileData)).layers,this.sourceLayerCoder=new Mu(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(e,t,i,o){this.loadVTLayers();const s=e.params||{},a=mo(s.filter),r=e.tileResult,n=e.transform,l=r.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,(e,t,i,o)=>ar(r.bufferedTilespaceGeometry,e,t,i,o));c.sort(jh);let u=null;n.elevation&&c.length>0&&(u=$h.create(n.elevation,this.tileID));const h={};let p;for(let n=0;n<c.length;n++){const l=c[n];if(l===p)continue;p=l;const m=this.featureIndexArray.get(l);let d=null;this.loadMatchingFeature(h,m.bucketIndex,m.sourceLayerIndex,m.featureIndex,a,s.layers,s.availableImages,t,i,o,(t,i,o)=>(d||(d=ja(t)),i.queryIntersectsFeature(r,t,o,d,this.z,e.transform,e.pixelPosMatrix,u)))}return h}loadMatchingFeature(e,t,i,o,s,a,r,n,l,c,u){const h=this.bucketLayerIDs[t];if(a&&!function(e,t){for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>=0)return!0;return!1}(a,h))return;const p=this.sourceLayerCoder.decode(i),m=this.vtLayers[p].feature(o);if(s.needGeometry){const e=Za(m,!0);if(!s.filter(new gs(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!s.filter(new gs(this.tileID.overscaledZ),m))return;const d=this.getId(m,p);for(let t=0;t<h.length;t++){const i=h[t];if(a&&a.indexOf(i)<0)continue;const s=n[i];if(!s)continue;let p={};void 0!==d&&c&&(p=c.getState(s.sourceLayer||"_geojsonTileLayer",d));const f=_({},l[i]);f.paint=Gh(f.paint,s.paint,m,p,r),f.layout=Gh(f.layout,s.layout,m,p,r);const y=!u||u(m,s,p);if(!y)continue;const g=new Du(m,this.z,this.x,this.y,d);g.layer=f;let b=e[i];void 0===b&&(b=e[i]=[]),b.push({featureIndex:o,feature:g,intersectionZ:y})}}lookupSymbolFeatures(e,t,i,o,s,a,r,n){const l={};this.loadVTLayers();const c=mo(s);for(const s of e)this.loadMatchingFeature(l,i,o,s,c,a,r,n,t);return l}hasLayer(e){for(const t of this.bucketLayerIDs)for(const i of t)if(e===i)return!0;return!1}getId(e,t){let i=e.id;return this.promoteId&&(i=e.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[t]],"boolean"==typeof i&&(i=Number(i))),i}}function Gh(e,t,i,o,s){return q(e,(e,a)=>{const r=t instanceof qs?t.get(a):null;return r&&r.evaluate?r.evaluate(i,o,s):r})}function jh(e,t){return t-e}Ho("FeatureIndex",Vh,{omit:["rawTileData","sourceLayerCoder"]});class Zh{constructor(e){const t={},i=[];for(const o in e){const s=e[o],a=t[o]={};for(const e in s){const t=s[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const o={x:0,y:0,w:t.bitmap.width+2,h:t.bitmap.height+2};i.push(o),a[e]={rect:o,metrics:t.metrics}}}const{w:o,h:s}=Jl(i),a=new Hr({width:o||1,height:s||1});for(const i in e){const o=e[i];for(const e in o){const s=o[+e];if(!s||0===s.bitmap.width||0===s.bitmap.height)continue;const r=t[i][e].rect;Hr.copy(s.bitmap,a,{x:0,y:0},{x:r.x+1,y:r.y+1},s.bitmap)}}this.image=a,this.positions=t}}Ho("GlyphAtlas",Zh);class Hh{constructor(e){this.tileID=new Pu(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile}parse(e,t,i,o,s){this.status="parsing",this.data=e,this.collisionBoxArray=new ra;const a=new Mu(Object.keys(e.layers).sort()),r=new Vh(this.tileID,this.promoteId);r.bucketLayerIDs=[];const n={},l={featureIndex:r,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:i},c=t.familiesBySource[this.source];for(const t in c){const o=e.layers[t];if(!o)continue;let s=!1,u=!1;for(const e of c[t])"symbol"===e[0].type?s=!0:u=!0;if(!0===this.isSymbolTile&&!s)continue;if(!1===this.isSymbolTile&&!u)continue;1===o.version&&C(`Vector tile source "${this.source}" layer "${t}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const h=a.encode(t),p=[];for(let e=0;e<o.length;e++){const i=o.feature(e),s=r.getId(i,t);p.push({feature:i,id:s,index:e,sourceLayerIndex:h})}for(const e of c[t]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(Xh(e,this.zoom,i),(n[t.id]=t.createBucket({index:r.bucketLayerIDs.length,layers:e,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:h,sourceID:this.source,enableTerrain:this.enableTerrain})).populate(p,l,this.tileID.canonical),r.bucketLayerIDs.push(e.map(e=>e.id)))}}let u,h,p,m;const d={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},f=q(l.glyphDependencies,e=>Object.keys(e).map(Number));Object.keys(f).length?o.send("getGlyphs",{uid:this.uid,stacks:f},(e,t)=>{u||(u=e,h=t,b.call(this))},void 0,void 0,d):h={};const y=Object.keys(l.iconDependencies);y.length?o.send("getImages",{icons:y,source:this.source,tileID:this.tileID,type:"icons"},(e,t)=>{u||(u=e,p=t,b.call(this))},void 0,void 0,d):p={};const _=Object.keys(l.patternDependencies);function b(){if(u)return s(u);if(h&&p&&m){const e=new Zh(h),t=new ec(p,m);for(const o in n){const s=n[o];s instanceof Kc?(Xh(s.layers,this.zoom,i),Sc(s,h,e.positions,p,t.iconPositions,this.showCollisionBoxes,this.tileID.canonical,this.tileZoom)):s.hasPattern&&(s instanceof pl||s instanceof Sn||s instanceof tl)&&(Xh(s.layers,this.zoom,i),s.addFeatures(l,this.tileID.canonical,t.patternPositions))}this.status="done",s(null,{buckets:g(n).filter(e=>!e.isEmpty()),featureIndex:r,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,imageAtlas:t,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?p:null,glyphPositions:this.returnDependencies?e.positions:null})}}_.length?o.send("getImages",{icons:_,source:this.source,tileID:this.tileID,type:"patterns"},(e,t)=>{u||(u=e,m=t,b.call(this))},void 0,void 0,d):m={},b.call(this)}}function Xh(e,t,i){const o=new gs(t);for(const t of e)t.recalculate(o,i)}class Qh{constructor(e){this.entries={},this.scheduler=e}request(e,t,i,o){const s=this.entries[e]=this.entries[e]||{callbacks:[]};if(s.result){const[e,i]=s.result;return this.scheduler?this.scheduler.add(()=>{o(e,i)},t):o(e,i),()=>{}}return s.callbacks.push(o),s.cancel||(s.cancel=i((i,o)=>{s.result=[i,o];for(const e of s.callbacks)this.scheduler?this.scheduler.add(()=>{e(i,o)},t):e(i,o);setTimeout(()=>delete this.entries[e],3e3)})),()=>{s.result||(s.callbacks=s.callbacks.filter(e=>e!==o),s.callbacks.length||(s.cancel(),delete this.entries[e]))}}}function Wh(e,t,i){const o=JSON.stringify(e.request);return e.data&&(this.deduped.entries[o]={result:[null,e.data]}),this.deduped.request(o,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},t=>{const o=qe(e.request,(e,o,s,a)=>{e?t(e):o&&t(null,{vectorTile:i?void 0:new Wn.VectorTile(new Al(o)),rawData:o,cacheControl:s,expires:a})});return()=>{o.cancel(),t()}},t)}e.AUTH_ERR_MSG="NO_ACCESS_TOKEN",e.Aabb=Ur,e.Actor=class{constructor(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.cancelCallbacks={},I(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=P()?e:r,this.scheduler=new gu}send(e,t,i,o,s=!1,a){const r=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(i.metadata=a,this.callbacks[r]=i);const n=D(this.globalScope)?void 0:[];return this.target.postMessage({id:r,type:e,hasCallback:!!i,targetMapId:o,mustQueue:s,sourceMapId:this.mapId,data:Wo(t,n)},n),{cancel:()=>{i&&delete this.callbacks[r],this.target.postMessage({id:r,type:"<cancel>",targetMapId:o,sourceMapId:this.mapId})}}}receive(e){const t=e.data,i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[i];delete this.cancelCallbacks[i],e&&e.cancel()}else if(P()||t.mustQueue){const e=this.callbacks[i];this.cancelCallbacks[i]=this.scheduler.add(()=>this.processTask(i,t),e&&e.metadata||{type:"message"})}else this.processTask(i,t)}processTask(e,t){if("<response>"===t.type){const i=this.callbacks[e];delete this.callbacks[e],i&&(t.error?i(Ko(t.error)):i(null,Ko(t.data)))}else{const i=D(this.globalScope)?void 0:[],o=t.hasCallback?(t,o)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Wo(t):null,data:Wo(o,i)},i)}:e=>{},s=Ko(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,s,o);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],s.source)[e[1]](s,o)}else o(new Error("Could not find function "+t.type))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.AlphaImage=Hr,e.CanonicalTileID=zu,e.Color=ct,e.ColorMode=kh,e.Context=class{constructor(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new eh(this),this.clearDepth=new th(this),this.clearStencil=new ih(this),this.colorMask=new oh(this),this.depthMask=new sh(this),this.stencilMask=new ah(this),this.stencilFunc=new rh(this),this.stencilOp=new nh(this),this.stencilTest=new lh(this),this.depthRange=new ch(this),this.depthTest=new uh(this),this.depthFunc=new hh(this),this.blend=new ph(this),this.blendFunc=new mh(this),this.blendColor=new dh(this),this.blendEquation=new fh(this),this.cullFace=new yh(this),this.cullFaceSide=new gh(this),this.frontFace=new _h(this),this.program=new bh(this),this.activeTexture=new vh(this),this.viewport=new xh(this),this.bindFramebuffer=new Lh(this),this.bindRenderbuffer=new Ih(this),this.bindTexture=new wh(this),this.bindVertexBuffer=new qh(this),this.bindElementBuffer=new Fh(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Eh(this),this.pixelStoreUnpack=new Th(this),this.pixelStoreUnpackPremultiplyAlpha=new Ch(this),this.pixelStoreUnpackFlipY=new zh(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(e.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new Wu(this,e,t)}createVertexBuffer(e,t,i){return new Ju(this,e,t,i)}createRenderbuffer(e,t,i){const o=this.gl,s=o.createRenderbuffer();return this.bindRenderbuffer.set(s),o.renderbufferStorage(o.RENDERBUFFER,e,t,i),this.bindRenderbuffer.set(null),s}createFramebuffer(e,t,i){return new Mh(this,e,t,i)}clear({color:e,depth:t,stencil:i}){const o=this.gl;let s=0;e&&(s|=o.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(s|=o.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==i&&(s|=o.STENCIL_BUFFER_BIT,this.clearStencil.set(i),this.stencilMask.set(255)),o.clear(s)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){n(e.blendFunction,kh.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}},e.CullFaceMode=Uh,e.DEMData=Xu,e.DataConstantProperty=Fs,e.DedupedRequest=Qh,e.DepthMode=Dh,e.DepthStencilAttachment=class extends Bh{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}},e.EXTENT=8192,e.Elevation=class{getAtPoint(e,t=0){const i=this._source();if(!i)return t;if(e.y<0||e.y>1)return t;const o=i.getSource().maxzoom,s=1<<o,a=Math.floor(e.x),r=e.x-a,n=new Pu(o,a,o,Math.floor(r*s),Math.floor(e.y*s)),l=this.findDEMTileFor(n);if(!l||!l.dem)return t;const c=l.dem,u=1<<l.tileID.canonical.z,h=(r*u-l.tileID.canonical.x)*c.dim,p=(e.y*u-l.tileID.canonical.y)*c.dim,m=Math.floor(h),d=Math.floor(p);return this.exaggeration()*Yt(Yt(c.get(m,d),c.get(m,d+1),p-d),Yt(c.get(m+1,d),c.get(m+1,d+1),p-d),h-m)}getAtTileOffset(e,t,i){const o=1<<e.canonical.z;return this.getAtPoint(new Tu(e.wrap+(e.canonical.x+t/8192)/o,(e.canonical.y+i/8192)/o))}getForTilePoints(e,t,i,o){const s=$h.create(this,e,o);return!!s&&(t.forEach(e=>{e[2]=this.exaggeration()*s.getElevationAt(e[0],e[1],i)}),!0)}getMinMaxForTile(e){const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const i=t.dem.tree,o=t.tileID,s=1<<e.canonical.z-o.canonical.z;let a=e.canonical.x/s-o.canonical.x,r=e.canonical.y/s-o.canonical.y,n=0;for(let t=0;t<e.canonical.z-o.canonical.z&&!i.leaves[n];t++){a*=2,r*=2;const e=2*Math.floor(r)+Math.floor(a);n=i.childOffsets[n]+e,a%=1,r%=1}return{min:this.exaggeration()*i.minimums[n],max:this.exaggeration()*i.maximums[n]}}raycast(e,t,i){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=Se,e.EvaluationParameters=gs,e.Event=De,e.Evented=ke,e.Frustum=kr,e.ImagePosition=Yl,e.LngLat=vu,e.LngLatBounds=bu,e.MAX_SAFE_INTEGER=l,e.MercatorCoordinate=Tu,e.ONE_EM=24,e.OverscaledTileID=Pu,e.Point=s,e.Point$1=s,e.Properties=As,e.RGBAImage=Xr,e.Ray=class{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,i){const o=Er(t,this.dir);if(Math.abs(o)<1e-6)return!1;const s=Er(Ar(_r(),e,this.pos),t)/o;return function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2]}(i,qr(_r(),this.pos,this.dir,s)),!0}},e.RequestManager=class{constructor(e,t){this._transformRequestFn=e,this._customAccessToken=t,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",K,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!J(e))return e;const i=ie(e);return i.path="/styles/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!J(e))return e;const i=ie(e);return i.path="/fonts/v1"+i.path,this._makeAPIURL(i,this._customAccessToken||t)}normalizeSourceURL(e,t){if(!J(e))return e;const i=ie(e);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),this._makeAPIURL(i,this._customAccessToken||t)}normalizeSpriteURL(e,t,i,o){const s=ie(e);return J(e)?(s.path=`/styles/v1${s.path}/sprite${t}${i}`,this._makeAPIURL(s,this._customAccessToken||o)):(s.path+=`${t}${i}`,oe(s))}normalizeTileURL(e,t,i){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!J(e))return e;const o=ie(e);o.path=o.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||i&&"raster"!==o.authority&&512===i?"@2x":""}${j.supported?".webp":"$1"}`),"raster"===o.authority?o.path=`/${G.RASTER_URL_PREFIX}${o.path}`:(o.path=o.path.replace(/^.+\/v4\//,"/"),o.path=`/${G.TILE_URL_VERSION}${o.path}`);const s=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(o.params)||G.ACCESS_TOKEN;return G.REQUIRE_ACCESS_TOKEN&&s&&this._skuToken&&o.params.push("sku="+this._skuToken),this._makeAPIURL(o,s)}canonicalizeTileURL(e,t){const i=ie(e);if(!i.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!i.path.match(/\.[\w]+$/))return e;let o="mapbox://";i.path.match(/^\/raster\/v1\//)?o+="raster/"+i.path.replace(`/${G.RASTER_URL_PREFIX}/`,""):o+="tiles/"+i.path.replace(`/${G.TILE_URL_VERSION}/`,"");let s=i.params;return t&&(s=s.filter(e=>!e.match(/^access_token=/))),s.length&&(o+="?"+s.join("&")),o}canonicalizeTileset(e,t){const i=!!t&&J(t),o=[];for(const t of e.tiles||[])ee(t)?o.push(this.canonicalizeTileURL(t,i)):o.push(t);return o}_makeAPIURL(e,t){const i="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",o=ie(G.API_URL);if(e.protocol=o.protocol,e.authority=o.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==o.path&&(e.path=`${o.path}${e.path}`),!G.REQUIRE_ACCESS_TOKEN)return oe(e);if(!(t=t||G.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+i);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+i);return e.params=e.params.filter(e=>-1===e.indexOf("access_token")),e.params.push("access_token="+t),oe(e)}},e.RequestPerformance=yu,e.ResourceType=xe,e.SegmentVector=$a,e.SourceCache=Rh,e.StencilMode=Sh,e.StructArrayLayout1ui2=oa,e.StructArrayLayout2f1f2i16=Xs,e.StructArrayLayout2i4=Us,e.StructArrayLayout3f12=Gs,e.StructArrayLayout3ui6=Ws,e.StructArrayLayout4i8=Rs,e.Texture=mu,e.Tile=ku,e.Transitionable=vs,e.Uniform1f=wa,e.Uniform1i=class extends Ia{constructor(e,t){super(e,t),this.current=0}set(e){this.current!==e&&(this.current=e,this.gl.uniform1i(this.location,e))}},e.Uniform2f=class extends Ia{constructor(e,t){super(e,t),this.current=[0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]||(this.current=e,this.gl.uniform2f(this.location,e[0],e[1]))}},e.Uniform3f=class extends Ia{constructor(e,t){super(e,t),this.current=[0,0,0]}set(e){e[0]===this.current[0]&&e[1]===this.current[1]&&e[2]===this.current[2]||(this.current=e,this.gl.uniform3f(this.location,e[0],e[1],e[2]))}},e.Uniform4f=qa,e.UniformColor=Fa,e.UniformMatrix3f=class extends Ia{constructor(e,t){super(e,t),this.current=Ta}set(e){for(let t=0;t<9;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix3fv(this.location,!1,e);break}}},e.UniformMatrix4f=class extends Ia{constructor(e,t){super(e,t),this.current=Ea}set(e){if(e[12]!==this.current[12]||e[0]!==this.current[0])return this.current=e,void this.gl.uniformMatrix4fv(this.location,!1,e);for(let t=1;t<16;t++)if(e[t]!==this.current[t]){this.current=e,this.gl.uniformMatrix4fv(this.location,!1,e);break}}},e.UnwrappedTileID=Au,e.ValidationError=Re,e.VectorTileWorkerSource=class{constructor(e,t,i,o){this.actor=e,this.layerIndex=t,this.availableImages=i,this.loadVectorData=o||Wh,this.loading={},this.loaded={},this.deduped=new Qh(e.scheduler)}loadTile(e,t){const i=e.uid,o=!!(e&&e.request&&e.request.collectResourceTiming)&&new yu(e.request),s=this.loading[i]=new Hh(e);s.abort=this.loadVectorData(e,(e,a)=>{const r=!this.loading[i];if(delete this.loading[i],r||e||!a)return s.status="done",r||(this.loaded[i]=s),t(e);const n=a.rawData,l={};a.expires&&(l.expires=a.expires),a.cacheControl&&(l.cacheControl=a.cacheControl);const c={};if(o){const e=o.finish();e&&(c.resourceTiming=JSON.parse(JSON.stringify(e)))}s.vectorTile=a.vectorTile||new Wn.VectorTile(new Al(n)),s.parse(s.vectorTile,this.layerIndex,this.availableImages,this.actor,(e,i)=>{if(e||!i)return t(e);t(null,_({rawTileData:n.slice(0)},i,l,c))}),this.loaded=this.loaded||{},this.loaded[i]=s})}reloadTile(e,t){const i=this.loaded,o=e.uid,s=this;if(i&&i[o]){const a=i[o];a.showCollisionBoxes=e.showCollisionBoxes,a.enableTerrain=!!e.enableTerrain;const r=(e,i)=>{const o=a.reloadCallback;o&&(delete a.reloadCallback,a.parse(a.vectorTile,s.layerIndex,this.availableImages,s.actor,o)),t(e,i)};"parsing"===a.status?a.reloadCallback=r:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,r):r())}}abortTile(e,t){const i=e.uid,o=this.loading[i];o&&(o.abort&&o.abort(),delete this.loading[i]),t()}removeTile(e,t){const i=this.loaded,o=e.uid;i&&i[o]&&delete i[o],t()}},e.WritingMode=tc,e.ZoomHistory=Jo,e.add=Lr,e.addDynamicAttributes=Hc,e.altitudeFromMercatorZ=Eu,e.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);let o=e.length;const s=new Array(e.length);let a=null;e.forEach((e,r)=>{t(e,(e,t)=>{e&&(a=e),s[r]=t,0==--o&&i(a,s)})})},e.bezier=m,e.bindAll=I,e.browser=V,e.bufferConvexPolygon=function(e,t){const i=[];for(let o=0;o<e.length;o++){const s=y(o-1,-1,e.length-1),a=y(o+1,-1,e.length-1),r=e[o],n=e[a],l=e[s].sub(r).unit(),c=n.sub(r).unit(),u=c.angleWithSep(l.x,l.y),h=l.add(c).unit().mult(-1*t/Math.sin(u/2));i.push(r.add(h))}return i},e.cacheEntryPossiblyAdded=function(e){be++,be>fe&&(e.getActor().send("enforceCacheSizeLimit",de),be=0)},e.clamp=f,e.clearTileCache=function(e){const t=r.caches.delete("mapbox-tiles");e&&t.catch(e).then(()=>e())},e.clipLine=Ic,e.clone=function(e){var t=new mr(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=E,e.collisionCircleLayout=Ll,e.config=G,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new mr(16);return mr!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=dr,e.create$2=function(){var e=new mr(4);return mr!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},e.createCommonjsModule=t,e.createExpression=eo,e.createLayout=Ss,e.createStyleLayer=function(e){return"custom"===e.type?new su(e):new nu[e.type](e)},e.cross=Tr,e.deepEqual=n,e.degToRad=h,e.div=function(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e},e.dot=Er,e.ease=d,e.easeCubicInOut=p,e.emitValidationErrors=No,e.endsWith=w,e.enforceCacheSizeLimit=function(e){ye(),pe&&pe.then(t=>{t.keys().then(i=>{for(let o=0;o<i.length-e;o++)t.delete(i[o])})})},e.evaluateSizeForFeature=wl,e.evaluateSizeForZoom=ql,e.evaluateVariableOffset=Dc,e.evented=ms,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.extend=_,e.featureFilter=mo,e.filterObject=F,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var i=t[0],o=t[1],s=t[2],a=t[3],r=i+i,n=o+o,l=s+s,c=i*r,u=o*r,h=o*n,p=s*r,m=s*n,d=s*l,f=a*r,y=a*n,g=a*l;return e[0]=1-h-d,e[1]=u+g,e[2]=p-y,e[3]=0,e[4]=u-g,e[5]=1-c-d,e[6]=m+f,e[7]=0,e[8]=p+y,e[9]=m-f,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var i=Math.sin(t),o=Math.cos(t);return e[0]=o,e[1]=i,e[2]=0,e[3]=-i,e[4]=o,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.getAnchorAlignment=pc,e.getAnchorJustification=kc,e.getArrayBuffer=qe,e.getBounds=function(e){let t=1/0,i=1/0,o=-1/0,a=-1/0;for(const s of e)t=Math.min(t,s.x),i=Math.min(i,s.y),o=Math.max(o,s.x),a=Math.max(a,s.y);return{min:new s(t,i),max:new s(o,a)}},e.getImage=Pe,e.getJSON=function(e,t){return we(_(e,{type:"json"}),t)},e.getMapSessionAPI=he,e.getRTLTextPluginStatus=ds,e.getReferrer=Ie,e.getVideo=function(e,t){const i=r.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(let t=0;t<e.length;t++){const o=r.document.createElement("source");Te(e[t])||(i.crossOrigin="Anonymous"),o.src=e[t],i.appendChild(o)}return{cancel:()=>{}}},e.identity=fr,e.identity$1=Dr,e.invert=function(e,t){var i=t[0],o=t[1],s=t[2],a=t[3],r=t[4],n=t[5],l=t[6],c=t[7],u=t[8],h=t[9],p=t[10],m=t[11],d=t[12],f=t[13],y=t[14],g=t[15],_=i*n-o*r,b=i*l-s*r,v=i*c-a*r,x=o*l-s*n,L=o*c-a*n,I=s*c-a*l,w=u*f-h*d,q=u*y-p*d,F=u*g-m*d,E=h*y-p*f,T=h*g-m*f,C=p*g-m*y,z=_*C-b*T+v*E+x*F-L*q+I*w;return z?(e[0]=(n*C-l*T+c*E)*(z=1/z),e[1]=(s*T-o*C-a*E)*z,e[2]=(f*I-y*L+g*x)*z,e[3]=(p*L-h*I-m*x)*z,e[4]=(l*F-r*C-c*q)*z,e[5]=(i*C-s*F+a*q)*z,e[6]=(y*v-d*I-g*b)*z,e[7]=(u*I-p*v+m*b)*z,e[8]=(r*T-n*F+c*w)*z,e[9]=(o*F-i*T-a*w)*z,e[10]=(d*L-f*v+g*_)*z,e[11]=(h*v-u*L-m*_)*z,e[12]=(n*q-r*E-l*w)*z,e[13]=(i*E-o*q+s*w)*z,e[14]=(f*b-d*x-y*_)*z,e[15]=(u*x-h*b+p*_)*z,e):null},e.isChar=Yo,e.isMapboxURL=J,e.latFromMercatorY=Fu,e.len=Pr,e.length=vr,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.loadVectorTile=Wh,e.makeRequest=we,e.mercatorXfromLng=Iu,e.mercatorYfromLat=wu,e.mercatorZfromAltitude=qu,e.mul=gr,e.mul$1=function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e},e.multiply=yr,e.mvt=Wn,e.nextPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},e.normalize=Fr,e.normalize$1=function(e,t){var i=t[0],o=t[1],s=t[2],a=t[3],r=i*i+o*o+s*s+a*a;return r>0&&(r=1/Math.sqrt(r)),e[0]=i*r,e[1]=o*r,e[2]=s*r,e[3]=a*r,e},e.number=Yt,e.offscreenCanvasSupported=ve,e.ortho=function(e,t,i,o,s,a,r){var n=1/(t-i),l=1/(o-s),c=1/(a-r);return e[0]=-2*n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*n,e[13]=(s+o)*l,e[14]=(r+a)*c,e[15]=1,e},e.parseGlyphPBF=function(e){return new Al(e).readFields(Ql,[])},e.pbf=Al,e.perspective=function(e,t,i,o,s){var a,r=1/Math.tan(t/2);return e[0]=r/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=s&&s!==1/0?(e[10]=(s+o)*(a=1/(o-s)),e[14]=2*s*o*a):(e[10]=-1,e[14]=-2*o),e},e.pick=function(e,t){const i={};for(let o=0;o<t.length;o++){const s=t[o];s in e&&(i[s]=e[s])}return i},e.plugin=ys,e.polygonIntersectsBox=ar,e.polygonIntersectsPolygon=Qa,e.polygonizeBounds=function(e,t,i=0){const o=new s(i,i),a=e.sub(o),r=t.add(o);return[a,new s(r.x,a.y),r,new s(a.x,r.y),a]},e.posAttributes=Su,e.postMapLoadEvent=ce,e.postTurnstileEvent=ne,e.potpack=Jl,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=function(e){return e*u},e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:cs,pluginURL:us}),ms.on("pluginStateChange",e),e},e.renderColorRamp=Wr,e.rotate=function(e,t,i){var o=t[0],s=t[1],a=t[2],r=t[3],n=Math.sin(i),l=Math.cos(i);return e[0]=o*l+a*n,e[1]=s*l+r*n,e[2]=o*-n+a*l,e[3]=s*-n+r*l,e},e.rotateX=function(e,t,i){var o=Math.sin(i),s=Math.cos(i),a=t[4],r=t[5],n=t[6],l=t[7],c=t[8],u=t[9],h=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*s+c*o,e[5]=r*s+u*o,e[6]=n*s+h*o,e[7]=l*s+p*o,e[8]=c*s-a*o,e[9]=u*s-r*o,e[10]=h*s-n*o,e[11]=p*s-l*o,e},e.rotateX$1=Sr,e.rotateY=function(e,t,i){var o=Math.sin(i),s=Math.cos(i),a=t[0],r=t[1],n=t[2],l=t[3],c=t[8],u=t[9],h=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*s-c*o,e[1]=r*s-u*o,e[2]=n*s-h*o,e[3]=l*s-p*o,e[8]=a*o+c*s,e[9]=r*o+u*s,e[10]=n*o+h*s,e[11]=l*o+p*s,e},e.rotateZ=function(e,t,i){var o=Math.sin(i),s=Math.cos(i),a=t[0],r=t[1],n=t[2],l=t[3],c=t[4],u=t[5],h=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*s+c*o,e[1]=r*s+u*o,e[2]=n*s+h*o,e[3]=l*s+p*o,e[4]=c*s-a*o,e[5]=u*s-r*o,e[6]=h*s-n*o,e[7]=p*s-l*o,e},e.rotateZ$1=function(e,t,i){i*=.5;var o=t[0],s=t[1],a=t[2],r=t[3],n=Math.sin(i),l=Math.cos(i);return e[0]=o*l+s*n,e[1]=s*l-o*n,e[2]=a*l+r*n,e[3]=r*l-a*n,e},e.scale=function(e,t,i){var o=i[0],s=i[1],a=i[2];return e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e[3]=t[3]*o,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.scale$1=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e},e.scale$2=wr,e.scaleAndAdd=qr,e.setCacheLimits=function(e,t){de=e,fe=t},e.setRTLTextPlugin=function(e,t,i=!1){if("deferred"===cs||"loading"===cs||"loaded"===cs)throw new Error("setRTLTextPlugin cannot be called multiple times.");us=V.resolveURL(e),cs="deferred",ls=t,ps(),i||fs()},e.styleSpec=Ue,e.sub=Ar,e.subtract=Ir,e.symbolSize=Fl,e.transformMat3=function(e,t,i){var o=t[0],s=t[1],a=t[2];return e[0]=o*i[0]+s*i[3]+a*i[6],e[1]=o*i[1]+s*i[4]+a*i[7],e[2]=o*i[2]+s*i[5]+a*i[8],e},e.transformMat4=Br,e.transformQuat=Cr,e.translate=function(e,t,i){var o,s,a,r,n,l,c,u,h,p,m,d,f=i[0],y=i[1],g=i[2];return t===e?(e[12]=t[0]*f+t[4]*y+t[8]*g+t[12],e[13]=t[1]*f+t[5]*y+t[9]*g+t[13],e[14]=t[2]*f+t[6]*y+t[10]*g+t[14],e[15]=t[3]*f+t[7]*y+t[11]*g+t[15]):(s=t[1],a=t[2],r=t[3],n=t[4],l=t[5],c=t[6],u=t[7],h=t[8],p=t[9],m=t[10],d=t[11],e[0]=o=t[0],e[1]=s,e[2]=a,e[3]=r,e[4]=n,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=p,e[10]=m,e[11]=d,e[12]=o*f+n*y+h*g+t[12],e[13]=s*f+l*y+p*g+t[13],e[14]=a*f+c*y+m*g+t[14],e[15]=r*f+u*y+d*g+t[15]),e},e.triggerPluginCompletionEvent=hs,e.uniqueId=v,e.validateCustomStyleLayer=function(e){const t=[],i=e.id;return void 0===i&&t.push({message:`layers.${i}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${i}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${i}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateLight=Uo,e.validateStyle=ko,e.values=g,e.vectorTile=Wn,e.version="2.0.0",e.warnOnce=C,e.webpSupported=j,e.window=r,e.wrap=y})),o(0,(function(e){function t(e){const i=typeof e;if("number"===i||"boolean"===i||"string"===i||null==e)return JSON.stringify(e);if(Array.isArray(e)){let i="[";for(const o of e)i+=t(o)+",";return i+"]"}const o=Object.keys(e).sort();let s="{";for(let i=0;i<o.length;i++)s+=`${JSON.stringify(o[i])}:${t(e[o[i]])},`;return s+"}"}function i(i){let o="";for(const s of e.refProperties)o+="/"+t(i[s]);return o}class o{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,o){for(const i of t){this._layerConfigs[i.id]=i;const t=this._layers[i.id]=e.createStyleLayer(i);t._featureFilter=e.featureFilter(t.filter),this.keyCache[i.id]&&delete this.keyCache[i.id]}for(const e of o)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const s=function(e,t){const o={};for(let s=0;s<e.length;s++){const a=t&&t[e[s].id]||i(e[s]);t&&(t[e[s].id]=a);let r=o[a];r||(r=o[a]=[]),r.push(e[s])}const s=[];for(const e in o)s.push(o[e]);return s}(e.values(this._layerConfigs),this.keyCache);for(const e of s){const t=e.map(e=>this._layers[e.id]),i=t[0];if("none"===i.visibility)continue;const o=i.source||"";let s=this.familiesBySource[o];s||(s=this.familiesBySource[o]={});const a=i.sourceLayer||"_geojsonTileLayer";let r=s[a];r||(r=s[a]=[]),r.push(t)}}}const{ImageBitmap:s}=e.window;class a{loadTile(t,i){const{uid:o,encoding:a,rawImageData:r,padding:n,buildQuadTree:l}=t,c=s&&r instanceof s?this.getImageData(r,n):r;i(null,new e.DEMData(o,c,a,n<1,l))}getImageData(t,i){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(t.width,t.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=t.width,this.offscreenCanvas.height=t.height,this.offscreenCanvasContext.drawImage(t,0,0,t.width,t.height);const o=this.offscreenCanvasContext.getImageData(-i,-i,t.width+2*i,t.height+2*i);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:o.width,height:o.height},o.data)}}function r(e,t){if(0!==e.length){n(e[0],t);for(var i=1;i<e.length;i++)n(e[i],!t)}}function n(e,t){for(var i=0,o=0,s=e.length,a=s-1;o<s;a=o++)i+=(e[o][0]-e[a][0])*(e[a][1]+e[o][1]);i>=0!=!!t&&e.reverse()}const l=e.vectorTile.VectorTileFeature.prototype.toGeoJSON;class c{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const i of this._feature.geometry)t.push([new e.Point$1(i[0],i[1])]);return t}{const t=[];for(const i of this._feature.geometry){const o=[];for(const t of i)o.push(new e.Point$1(t[0],t[1]));t.push(o)}return t}}toGeoJSON(e,t,i){return l.call(this,e,t,i)}}class u{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(e){return new c(this._features[e])}}var h=e.vectorTile.VectorTileFeature,p=m;function m(e,t){this.options=t||{},this.features=e,this.length=e.length}function d(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}m.prototype.feature=function(e){return new d(this.features[e],this.options.extent)},d.prototype.loadGeometry=function(){var t=this.rawGeometry;this.geometry=[];for(var i=0;i<t.length;i++){for(var o=t[i],s=[],a=0;a<o.length;a++)s.push(new e.Point$1(o[a][0],o[a][1]));this.geometry.push(s)}return this.geometry},d.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,i=-1/0,o=1/0,s=-1/0,a=0;a<e.length;a++)for(var r=e[a],n=0;n<r.length;n++){var l=r[n];t=Math.min(t,l.x),i=Math.max(i,l.x),o=Math.min(o,l.y),s=Math.max(s,l.y)}return[t,o,i,s]},d.prototype.toGeoJSON=h.prototype.toGeoJSON;var f=g,y=p;function g(t){var i=new e.pbf;return function(e,t){for(var i in e.layers)t.writeMessage(3,_,e.layers[i])}(t,i),i.finish()}function _(e,t){var i;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var o={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<e.length;i++)o.feature=e.feature(i),t.writeMessage(2,b,o);var s=o.keys;for(i=0;i<s.length;i++)t.writeStringField(3,s[i]);var a=o.values;for(i=0;i<a.length;i++)t.writeMessage(4,w,a[i])}function b(e,t){var i=e.feature;void 0!==i.id&&t.writeVarintField(1,i.id),t.writeMessage(2,v,e),t.writeVarintField(3,i.type),t.writeMessage(4,I,i)}function v(e,t){var i=e.feature,o=e.keys,s=e.values,a=e.keycache,r=e.valuecache;for(var n in i.properties){var l=a[n];void 0===l&&(o.push(n),a[n]=l=o.length-1),t.writeVarint(l);var c=i.properties[n],u=typeof c;"string"!==u&&"boolean"!==u&&"number"!==u&&(c=JSON.stringify(c));var h=u+":"+c,p=r[h];void 0===p&&(s.push(c),r[h]=p=s.length-1),t.writeVarint(p)}}function x(e,t){return(t<<3)+(7&e)}function L(e){return e<<1^e>>31}function I(e,t){for(var i=e.loadGeometry(),o=e.type,s=0,a=0,r=i.length,n=0;n<r;n++){var l=i[n],c=1;1===o&&(c=l.length),t.writeVarint(x(1,c));for(var u=3===o?l.length-1:l.length,h=0;h<u;h++){1===h&&1!==o&&t.writeVarint(x(2,u-1));var p=l[h].x-s,m=l[h].y-a;t.writeVarint(L(p)),t.writeVarint(L(m)),s+=p,a+=m}3===o&&t.writeVarint(x(7,1))}}function w(e,t){var i=typeof e;"string"===i?t.writeStringField(1,e):"boolean"===i?t.writeBooleanField(7,e):"number"===i&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function q(e,t,i,o){F(e,i,o),F(t,2*i,2*o),F(t,2*i+1,2*o+1)}function F(e,t,i){const o=e[t];e[t]=e[i],e[i]=o}function E(e,t,i,o){const s=e-i,a=t-o;return s*s+a*a}f.fromVectorTileJs=g,f.fromGeojsonVt=function(e,t){t=t||{};var i={};for(var o in e)i[o]=new p(e[o].features,t),i[o].name=o,i[o].version=t.version,i[o].extent=t.extent;return g({layers:i})},f.GeoJSONWrapper=y;const T=e=>e[0],C=e=>e[1];class z{constructor(e,t=T,i=C,o=64,s=Float64Array){this.nodeSize=o,this.points=e;const a=e.length<65536?Uint16Array:Uint32Array,r=this.ids=new a(e.length),n=this.coords=new s(2*e.length);for(let o=0;o<e.length;o++)r[o]=o,n[2*o]=t(e[o]),n[2*o+1]=i(e[o]);!function e(t,i,o,s,a,r){if(a-s<=o)return;const n=s+a>>1;!function e(t,i,o,s,a,r){for(;a>s;){if(a-s>600){const n=a-s+1,l=o-s+1,c=Math.log(n),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(n-u)/n)*(l-n/2<0?-1:1);e(t,i,o,Math.max(s,Math.floor(o-l*u/n+h)),Math.min(a,Math.floor(o+(n-l)*u/n+h)),r)}const n=i[2*o+r];let l=s,c=a;for(q(t,i,s,o),i[2*a+r]>n&&q(t,i,s,a);l<c;){for(q(t,i,l,c),l++,c--;i[2*l+r]<n;)l++;for(;i[2*c+r]>n;)c--}i[2*s+r]===n?q(t,i,s,c):(c++,q(t,i,c,a)),c<=o&&(s=c+1),o<=c&&(a=c-1)}}(t,i,n,s,a,r%2),e(t,i,o,s,n-1,r+1),e(t,i,o,n+1,a,r+1)}(r,n,o,0,r.length-1,0)}range(e,t,i,o){return function(e,t,i,o,s,a,r){const n=[0,e.length-1,0],l=[];let c,u;for(;n.length;){const h=n.pop(),p=n.pop(),m=n.pop();if(p-m<=r){for(let r=m;r<=p;r++)c=t[2*r],u=t[2*r+1],c>=i&&c<=s&&u>=o&&u<=a&&l.push(e[r]);continue}const d=Math.floor((m+p)/2);c=t[2*d],u=t[2*d+1],c>=i&&c<=s&&u>=o&&u<=a&&l.push(e[d]);const f=(h+1)%2;(0===h?i<=c:o<=u)&&(n.push(m),n.push(d-1),n.push(f)),(0===h?s>=c:a>=u)&&(n.push(d+1),n.push(p),n.push(f))}return l}(this.ids,this.coords,e,t,i,o,this.nodeSize)}within(e,t,i){return function(e,t,i,o,s,a){const r=[0,e.length-1,0],n=[],l=s*s;for(;r.length;){const c=r.pop(),u=r.pop(),h=r.pop();if(u-h<=a){for(let s=h;s<=u;s++)E(t[2*s],t[2*s+1],i,o)<=l&&n.push(e[s]);continue}const p=Math.floor((h+u)/2),m=t[2*p],d=t[2*p+1];E(m,d,i,o)<=l&&n.push(e[p]);const f=(c+1)%2;(0===c?i-s<=m:o-s<=d)&&(r.push(h),r.push(p-1),r.push(f)),(0===c?i+s>=m:o+s>=d)&&(r.push(p+1),r.push(u),r.push(f))}return n}(this.ids,this.coords,e,t,i,this.nodeSize)}}const A={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e};class P{constructor(e){this.options=O(Object.create(A),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:i,maxZoom:o,nodeSize:s}=this.options;t&&console.time("total time");const a=`prepare ${e.length} points`;t&&console.time(a),this.points=e;let r=[];for(let t=0;t<e.length;t++)e[t].geometry&&r.push(M(e[t],t));this.trees[o+1]=new z(r,N,$,s,Float32Array),t&&console.timeEnd(a);for(let e=o;e>=i;e--){const i=+Date.now();r=this._cluster(r,e),this.trees[e]=new z(r,N,$,s,Float32Array),t&&console.log("z%d: %d clusters in %dms",e,r.length,+Date.now()-i)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let i=((e[0]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[1]));let s=180===e[2]?180:((e[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)i=-180,s=180;else if(i>s){const e=this.getClusters([i,o,180,a],t),r=this.getClusters([-180,o,s,a],t);return e.concat(r)}const r=this.trees[this._limitZoom(t)],n=r.range(k(i),U(a),k(s),U(o)),l=[];for(const e of n){const t=r.points[e];l.push(t.numPoints?D(t):this.points[t.index])}return l}getChildren(e){const t=this._getOriginId(e),i=this._getOriginZoom(e),o="No cluster with the specified id.",s=this.trees[i];if(!s)throw new Error(o);const a=s.points[t];if(!a)throw new Error(o);const r=this.options.radius/(this.options.extent*Math.pow(2,i-1)),n=s.within(a.x,a.y,r),l=[];for(const t of n){const i=s.points[t];i.parentId===e&&l.push(i.numPoints?D(i):this.points[i.index])}if(0===l.length)throw new Error(o);return l}getLeaves(e,t,i){const o=[];return this._appendLeaves(o,e,t=t||10,i=i||0,0),o}getTile(e,t,i){const o=this.trees[this._limitZoom(e)],s=Math.pow(2,e),{extent:a,radius:r}=this.options,n=r/a,l=(i-n)/s,c=(i+1+n)/s,u={features:[]};return this._addTileFeatures(o.range((t-n)/s,l,(t+1+n)/s,c),o.points,t,i,s,u),0===t&&this._addTileFeatures(o.range(1-n/s,l,1,c),o.points,s,i,s,u),t===s-1&&this._addTileFeatures(o.range(0,l,n/s,c),o.points,-1,i,s,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const i=this.getChildren(e);if(t++,1!==i.length)break;e=i[0].properties.cluster_id}return t}_appendLeaves(e,t,i,o,s){const a=this.getChildren(t);for(const t of a){const a=t.properties;if(a&&a.cluster?s+a.point_count<=o?s+=a.point_count:s=this._appendLeaves(e,a.cluster_id,i,o,s):s<o?s++:e.push(t),e.length===i)break}return s}_addTileFeatures(e,t,i,o,s,a){for(const r of e){const e=t[r],n=e.numPoints,l={type:1,geometry:[[Math.round(this.options.extent*(e.x*s-i)),Math.round(this.options.extent*(e.y*s-o))]],tags:n?S(e):this.points[e.index].properties};let c;n?c=e.id:this.options.generateId?c=e.index:this.points[e.index].id&&(c=this.points[e.index].id),void 0!==c&&(l.id=c),a.features.push(l)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}_cluster(e,t){const i=[],{radius:o,extent:s,reduce:a,minPoints:r}=this.options,n=o/(s*Math.pow(2,t));for(let o=0;o<e.length;o++){const s=e[o];if(s.zoom<=t)continue;s.zoom=t;const l=this.trees[t+1],c=l.within(s.x,s.y,n),u=s.numPoints||1;let h=u;for(const e of c){const i=l.points[e];i.zoom>t&&(h+=i.numPoints||1)}if(h>=r){let e=s.x*u,r=s.y*u,n=a&&u>1?this._map(s,!0):null;const p=(o<<5)+(t+1)+this.points.length;for(const i of c){const o=l.points[i];if(o.zoom<=t)continue;o.zoom=t;const c=o.numPoints||1;e+=o.x*c,r+=o.y*c,o.parentId=p,a&&(n||(n=this._map(s,!0)),a(n,this._map(o)))}s.parentId=p,i.push(B(e/h,r/h,p,h,n))}else if(i.push(s),h>1)for(const e of c){const o=l.points[e];o.zoom<=t||(o.zoom=t,i.push(o))}}return i}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?O({},e.properties):e.properties;const i=this.points[e.index].properties,o=this.options.map(i);return t&&o===i?O({},o):o}}function B(e,t,i,o,s){return{x:e,y:t,zoom:1/0,id:i,parentId:-1,numPoints:o,properties:s}}function M(e,t){const[i,o]=e.geometry.coordinates;return{x:k(i),y:U(o),zoom:1/0,index:t,parentId:-1}}function D(e){return{type:"Feature",id:e.id,properties:S(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),R(e.y)]}};var t}function S(e){const t=e.numPoints,i=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return O(O({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:i})}function k(e){return e/360+.5}function U(e){const t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function R(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function O(e,t){for(const i in t)e[i]=t[i];return e}function N(e){return e.x}function $(e){return e.y}function V(e,t,i,o,s,a){var r=s-i,n=a-o;if(0!==r||0!==n){var l=((e-i)*r+(t-o)*n)/(r*r+n*n);l>1?(i=s,o=a):l>0&&(i+=r*l,o+=n*l)}return(r=e-i)*r+(n=t-o)*n}function G(e,t,i,o){var s={id:void 0===e?null:e,type:t,geometry:i,tags:o,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,i=e.type;if("Point"===i||"MultiPoint"===i||"LineString"===i)j(e,t);else if("Polygon"===i||"MultiLineString"===i)for(var o=0;o<t.length;o++)j(e,t[o]);else if("MultiPolygon"===i)for(o=0;o<t.length;o++)for(var s=0;s<t[o].length;s++)j(e,t[o][s])}(s),s}function j(e,t){for(var i=0;i<t.length;i+=3)e.minX=Math.min(e.minX,t[i]),e.minY=Math.min(e.minY,t[i+1]),e.maxX=Math.max(e.maxX,t[i]),e.maxY=Math.max(e.maxY,t[i+1])}function Z(e,t,i,o){if(t.geometry){var s=t.geometry.coordinates,a=t.geometry.type,r=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2),n=[],l=t.id;if(i.promoteId?l=t.properties[i.promoteId]:i.generateId&&(l=o||0),"Point"===a)H(s,n);else if("MultiPoint"===a)for(var c=0;c<s.length;c++)H(s[c],n);else if("LineString"===a)X(s,n,r,!1);else if("MultiLineString"===a){if(i.lineMetrics){for(c=0;c<s.length;c++)X(s[c],n=[],r,!1),e.push(G(l,"LineString",n,t.properties));return}Q(s,n,r,!1)}else if("Polygon"===a)Q(s,n,r,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(c=0;c<t.geometry.geometries.length;c++)Z(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},i,o);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<s.length;c++){var u=[];Q(s[c],u,r,!0),n.push(u)}}e.push(G(l,a,n,t.properties))}}function H(e,t){t.push(W(e[0])),t.push(K(e[1])),t.push(0)}function X(e,t,i,o){for(var s,a,r=0,n=0;n<e.length;n++){var l=W(e[n][0]),c=K(e[n][1]);t.push(l),t.push(c),t.push(0),n>0&&(r+=o?(s*c-l*a)/2:Math.sqrt(Math.pow(l-s,2)+Math.pow(c-a,2))),s=l,a=c}var u=t.length-3;t[2]=1,function e(t,i,o,s){for(var a,r=s,n=o-i>>1,l=o-i,c=t[i],u=t[i+1],h=t[o],p=t[o+1],m=i+3;m<o;m+=3){var d=V(t[m],t[m+1],c,u,h,p);if(d>r)a=m,r=d;else if(d===r){var f=Math.abs(m-n);f<l&&(a=m,l=f)}}r>s&&(a-i>3&&e(t,i,a,s),t[a+2]=r,o-a>3&&e(t,a,o,s))}(t,0,u,i),t[u+2]=1,t.size=Math.abs(r),t.start=0,t.end=t.size}function Q(e,t,i,o){for(var s=0;s<e.length;s++){var a=[];X(e[s],a,i,o),t.push(a)}}function W(e){return e/360+.5}function K(e){var t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function J(e,t,i,o,s,a,r,n){if(o/=t,a>=(i/=t)&&r<o)return e;if(r<i||a>=o)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],h=u.geometry,p=u.type,m=0===s?u.minX:u.minY,d=0===s?u.maxX:u.maxY;if(m>=i&&d<o)l.push(u);else if(!(d<i||m>=o)){var f=[];if("Point"===p||"MultiPoint"===p)Y(h,f,i,o,s);else if("LineString"===p)ee(h,f,i,o,s,!1,n.lineMetrics);else if("MultiLineString"===p)ie(h,f,i,o,s,!1);else if("Polygon"===p)ie(h,f,i,o,s,!0);else if("MultiPolygon"===p)for(var y=0;y<h.length;y++){var g=[];ie(h[y],g,i,o,s,!0),g.length&&f.push(g)}if(f.length){if(n.lineMetrics&&"LineString"===p){for(y=0;y<f.length;y++)l.push(G(u.id,p,f[y],u.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===f.length?(p="LineString",f=f[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===f.length?"Point":"MultiPoint"),l.push(G(u.id,p,f,u.tags))}}}return l.length?l:null}function Y(e,t,i,o,s){for(var a=0;a<e.length;a+=3){var r=e[a+s];r>=i&&r<=o&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function ee(e,t,i,o,s,a,r){for(var n,l,c=te(e),u=0===s?se:ae,h=e.start,p=0;p<e.length-3;p+=3){var m=e[p],d=e[p+1],f=e[p+2],y=e[p+3],g=e[p+4],_=0===s?m:d,b=0===s?y:g,v=!1;r&&(n=Math.sqrt(Math.pow(m-y,2)+Math.pow(d-g,2))),_<i?b>i&&(l=u(c,m,d,y,g,i),r&&(c.start=h+n*l)):_>o?b<o&&(l=u(c,m,d,y,g,o),r&&(c.start=h+n*l)):oe(c,m,d,f),b<i&&_>=i&&(l=u(c,m,d,y,g,i),v=!0),b>o&&_<=o&&(l=u(c,m,d,y,g,o),v=!0),!a&&v&&(r&&(c.end=h+n*l),t.push(c),c=te(e)),r&&(h+=n)}var x=e.length-3;m=e[x],d=e[x+1],f=e[x+2],(_=0===s?m:d)>=i&&_<=o&&oe(c,m,d,f),x=c.length-3,a&&x>=3&&(c[x]!==c[0]||c[x+1]!==c[1])&&oe(c,c[0],c[1],c[2]),c.length&&t.push(c)}function te(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ie(e,t,i,o,s,a){for(var r=0;r<e.length;r++)ee(e[r],t,i,o,s,a,!1)}function oe(e,t,i,o){e.push(t),e.push(i),e.push(o)}function se(e,t,i,o,s,a){var r=(a-t)/(o-t);return e.push(a),e.push(i+(s-i)*r),e.push(1),r}function ae(e,t,i,o,s,a){var r=(a-i)/(s-i);return e.push(t+(o-t)*r),e.push(a),e.push(1),r}function re(e,t){for(var i=[],o=0;o<e.length;o++){var s,a=e[o],r=a.type;if("Point"===r||"MultiPoint"===r||"LineString"===r)s=ne(a.geometry,t);else if("MultiLineString"===r||"Polygon"===r){s=[];for(var n=0;n<a.geometry.length;n++)s.push(ne(a.geometry[n],t))}else if("MultiPolygon"===r)for(s=[],n=0;n<a.geometry.length;n++){for(var l=[],c=0;c<a.geometry[n].length;c++)l.push(ne(a.geometry[n][c],t));s.push(l)}i.push(G(a.id,r,s,a.tags))}return i}function ne(e,t){var i=[];i.size=e.size,void 0!==e.start&&(i.start=e.start,i.end=e.end);for(var o=0;o<e.length;o+=3)i.push(e[o]+t,e[o+1],e[o+2]);return i}function le(e,t){if(e.transformed)return e;var i,o,s,a=1<<e.z,r=e.x,n=e.y;for(i=0;i<e.features.length;i++){var l=e.features[i],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(o=0;o<c.length;o+=2)l.geometry.push(ce(c[o],c[o+1],t,a,r,n));else for(o=0;o<c.length;o++){var h=[];for(s=0;s<c[o].length;s+=2)h.push(ce(c[o][s],c[o][s+1],t,a,r,n));l.geometry.push(h)}}return e.transformed=!0,e}function ce(e,t,i,o,s,a){return[Math.round(i*(e*o-s)),Math.round(i*(t*o-a))]}function ue(e,t,i,o,s){for(var a=t===s.maxZoom?0:s.tolerance/((1<<t)*s.extent),r={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:o,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},n=0;n<e.length;n++){r.numFeatures++,he(r,e[n],a,s);var l=e[n].minX,c=e[n].minY,u=e[n].maxX,h=e[n].maxY;l<r.minX&&(r.minX=l),c<r.minY&&(r.minY=c),u>r.maxX&&(r.maxX=u),h>r.maxY&&(r.maxY=h)}return r}function he(e,t,i,o){var s=t.geometry,a=t.type,r=[];if("Point"===a||"MultiPoint"===a)for(var n=0;n<s.length;n+=3)r.push(s[n]),r.push(s[n+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)pe(r,s,e,i,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(n=0;n<s.length;n++)pe(r,s[n],e,i,"Polygon"===a,0===n);else if("MultiPolygon"===a)for(var l=0;l<s.length;l++){var c=s[l];for(n=0;n<c.length;n++)pe(r,c[n],e,i,!0,0===n)}if(r.length){var u=t.tags||null;if("LineString"===a&&o.lineMetrics){for(var h in u={},t.tags)u[h]=t.tags[h];u.mapbox_clip_start=s.start/s.size,u.mapbox_clip_end=s.end/s.size}var p={geometry:r,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:u};null!==t.id&&(p.id=t.id),e.features.push(p)}}function pe(e,t,i,o,s,a){var r=o*o;if(o>0&&t.size<(s?r:o))i.numPoints+=t.length/3;else{for(var n=[],l=0;l<t.length;l+=3)(0===o||t[l+2]>r)&&(i.numSimplified++,n.push(t[l]),n.push(t[l+1])),i.numPoints++;s&&function(e,t){for(var i=0,o=0,s=e.length,a=s-2;o<s;a=o,o+=2)i+=(e[o]-e[a])*(e[o+1]+e[a+1]);if(i>0===t)for(o=0,s=e.length;o<s/2;o+=2){var r=e[o],n=e[o+1];e[o]=e[s-2-o],e[o+1]=e[s-1-o],e[s-2-o]=r,e[s-1-o]=n}}(n,a),e.push(n)}}function me(e,t){var i=(t=this.options=function(e,t){for(var i in t)e[i]=t[i];return e}(Object.create(this.options),t)).debug;if(i&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var o=function(e,t){var i=[];if("FeatureCollection"===e.type)for(var o=0;o<e.features.length;o++)Z(i,e.features[o],t,o);else Z(i,"Feature"===e.type?e:{geometry:e},t);return i}(e,t);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(o=function(e,t){var i=t.buffer/t.extent,o=e,s=J(e,1,-1-i,i,0,-1,2,t),a=J(e,1,1-i,2+i,0,-1,2,t);return(s||a)&&(o=J(e,1,-i,1+i,0,-1,2,t)||[],s&&(o=re(s,1).concat(o)),a&&(o=o.concat(re(a,-1)))),o}(o,t)).length&&this.splitTile(o,0,0,0),i&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function de(e,t,i){return 32*((1<<e)*i+t)+e}function fe(e,t){const i=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);const o=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!o)return t(null,null);const s=new u(o.features);let a=f(s);0===a.byteOffset&&a.byteLength===a.buffer.byteLength||(a=new Uint8Array(a)),t(null,{vectorTile:s,rawData:a.buffer})}me.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},me.prototype.splitTile=function(e,t,i,o,s,a,r){for(var n=[e,t,i,o],l=this.options,c=l.debug;n.length;){o=n.pop(),i=n.pop(),t=n.pop(),e=n.pop();var u=1<<t,h=de(t,i,o),p=this.tiles[h];if(!p&&(c>1&&console.time("creation"),p=this.tiles[h]=ue(e,t,i,o,l),this.tileCoords.push({z:t,x:i,y:o}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,i,o,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var m="z"+t;this.stats[m]=(this.stats[m]||0)+1,this.total++}if(p.source=e,s){if(t===l.maxZoom||t===s)continue;var d=1<<s-t;if(i!==Math.floor(a/d)||o!==Math.floor(r/d))continue}else if(t===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==e.length){c>1&&console.time("clipping");var f,y,g,_,b,v,x=.5*l.buffer/l.extent,L=.5-x,I=.5+x,w=1+x;f=y=g=_=null,b=J(e,u,i-x,i+I,0,p.minX,p.maxX,l),v=J(e,u,i+L,i+w,0,p.minX,p.maxX,l),e=null,b&&(f=J(b,u,o-x,o+I,1,p.minY,p.maxY,l),y=J(b,u,o+L,o+w,1,p.minY,p.maxY,l),b=null),v&&(g=J(v,u,o-x,o+I,1,p.minY,p.maxY,l),_=J(v,u,o+L,o+w,1,p.minY,p.maxY,l),v=null),c>1&&console.timeEnd("clipping"),n.push(f||[],t+1,2*i,2*o),n.push(y||[],t+1,2*i,2*o+1),n.push(g||[],t+1,2*i+1,2*o),n.push(_||[],t+1,2*i+1,2*o+1)}}},me.prototype.getTile=function(e,t,i){var o=this.options,s=o.extent,a=o.debug;if(e<0||e>24)return null;var r=1<<e,n=de(e,t=(t%r+r)%r,i);if(this.tiles[n])return le(this.tiles[n],s);a>1&&console.log("drilling down to z%d-%d-%d",e,t,i);for(var l,c=e,u=t,h=i;!l&&c>0;)c--,u=Math.floor(u/2),h=Math.floor(h/2),l=this.tiles[de(c,u,h)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",c,u,h),a>1&&console.time("drilling down"),this.splitTile(l.source,c,u,h,e,t,i),a>1&&console.timeEnd("drilling down"),this.tiles[n]?le(this.tiles[n],s):null):null};class ye extends e.VectorTileWorkerSource{constructor(e,t,i,o){super(e,t,i,fe),o&&(this.loadGeoJSON=o)}loadData(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=t,this._pendingLoadDataParams=e,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())}_loadData(){if(!this._pendingCallback||!this._pendingLoadDataParams)return;const t=this._pendingCallback,i=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;const o=!!(i&&i.request&&i.request.collectResourceTiming)&&new e.RequestPerformance(i.request);this.loadGeoJSON(i,(s,a)=>{if(s||!a)return t(s);if("object"!=typeof a)return t(new Error(`Input data given to '${i.source}' is not a valid GeoJSON object.`));{!function e(t,i){var o,s=t&&t.type;if("FeatureCollection"===s)for(o=0;o<t.features.length;o++)e(t.features[o],i);else if("GeometryCollection"===s)for(o=0;o<t.geometries.length;o++)e(t.geometries[o],i);else if("Feature"===s)e(t.geometry,i);else if("Polygon"===s)r(t.coordinates,i);else if("MultiPolygon"===s)for(o=0;o<t.coordinates.length;o++)r(t.coordinates[o],i);return t}(a,!0);try{if(i.filter){const t=e.createExpression(i.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===t.result)throw new Error(t.value.map(e=>`${e.key}: ${e.message}`).join(", "));const o=a.features.filter(e=>t.value.evaluate({zoom:0},e));a={type:"FeatureCollection",features:o}}this._geoJSONIndex=i.cluster?new P(function({superclusterOptions:t,clusterProperties:i}){if(!i||!t)return t;const o={},s={},a={accumulated:null,zoom:0},r={properties:null},n=Object.keys(i);for(const t of n){const[a,r]=i[t],n=e.createExpression(r),l=e.createExpression("string"==typeof a?[a,["accumulated"],["get",t]]:a);o[t]=n.value,s[t]=l.value}return t.map=e=>{r.properties=e;const t={};for(const e of n)t[e]=o[e].evaluate(a,r);return t},t.reduce=(e,t)=>{r.properties=t;for(const t of n)a.accumulated=e[t],e[t]=s[t].evaluate(a,r)},t}(i)).load(a.features):function(e,t){return new me(e,t)}(a,i.geojsonVtOptions)}catch(s){return t(s)}this.loaded={};const n={};if(o){const e=o.finish();e&&(n.resourceTiming={},n.resourceTiming[i.source]=JSON.parse(JSON.stringify(e)))}t(null,n)}})}coalesce(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())}reloadTile(e,t){const i=this.loaded;return i&&i[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,i){if(t.request)e.getJSON(t.request,i);else{if("string"!=typeof t.data)return i(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return i(null,JSON.parse(t.data))}catch(e){return i(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}removeSource(e,t){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),t()}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class ge{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:ye},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}checkIfReady(e,t,i){i()}setReferrer(e,t){this.referrer=t}setImages(e,t,i){this.availableImages[e]=t;for(const i in this.workerSources[e]){const o=this.workerSources[e][i];for(const e in o)o[e].availableImages=t}i()}enableTerrain(e,t,i){this.terrain=t,i()}setLayers(e,t,i){this.getLayerIndex(e).replace(t),i()}updateLayers(e,t,i){this.getLayerIndex(e).update(t.layers,t.removedIds),i()}loadTile(t,i,o){const s=this.enableTerrain?e.extend({enableTerrain:this.terrain},i):i;this.getWorkerSource(t,i.type,i.source).loadTile(s,o)}loadDEMTile(t,i,o){const s=this.enableTerrain?e.extend({buildQuadTree:this.terrain},i):i;this.getDEMWorkerSource(t,i.source).loadTile(s,o)}reloadTile(t,i,o){const s=this.enableTerrain?e.extend({enableTerrain:this.terrain},i):i;this.getWorkerSource(t,i.type,i.source).reloadTile(s,o)}abortTile(e,t,i){this.getWorkerSource(e,t.type,t.source).abortTile(t,i)}removeTile(e,t,i){this.getWorkerSource(e,t.type,t.source).removeTile(t,i)}removeSource(e,t,i){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const o=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==o.removeSource?o.removeSource(t,i):i()}loadWorkerSource(e,t,i){try{this.self.importScripts(t.url),i()}catch(e){i(e.toString())}}syncRTLPluginState(t,i,o){try{e.plugin.setState(i);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const i=e.plugin.isParsed();o(i?void 0:new Error("RTL Text Plugin failed to import scripts from "+t),i)}}catch(e){o(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new o),t}getWorkerSource(e,t,i){return this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),this.workerSources[e][t][i]||(this.workerSources[e][t][i]=new this.workerSourceTypes[t]({send:(t,i,o,s,a,r)=>{this.actor.send(t,i,o,e,s,r)},scheduler:this.actor.scheduler},this.getLayerIndex(e),this.getAvailableImages(e))),this.workerSources[e][t][i]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new a),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,i){e.enforceCacheSizeLimit(i)}getWorkerPerformanceMetrics(e,t,i){i(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new ge(self)),ge})),o(0,(function(e){var t=e.createCommonjsModule((function(e){function t(e){return!i(e)}function i(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,i=new Blob([""],{type:"text/javascript"}),o=URL.createObjectURL(i);try{t=new Worker(o),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(o),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){const e=document.createElement("canvas");e.width=e.height=1;const t=e.getContext("2d");if(!t)return!1;const i=t.getImageData(0,0,1,1);return i&&i.width===e.width}()?(void 0===o[i=e&&e.failIfMajorPerformanceCaveat]&&(o[i]=function(e){const i=function(e){var i=document.createElement("canvas"),o=Object.create(t.webGLContextAttributes);return o.failIfMajorPerformanceCaveat=e,i.probablySupportsContext?i.probablySupportsContext("webgl",o)||i.probablySupportsContext("experimental-webgl",o):i.supportsContext?i.supportsContext("webgl",o)||i.supportsContext("experimental-webgl",o):i.getContext("webgl",o)||i.getContext("experimental-webgl",o)}(e);if(!i)return!1;const o=i.createShader(i.VERTEX_SHADER);return!(!o||i.isContextLost())&&(i.shaderSource(o,"void main() {}"),i.compileShader(o),!0===i.getShaderParameter(o,i.COMPILE_STATUS))}(i)),o[i]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var i}e.exports?e.exports=t:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=t,window.mapboxgl.notSupportedReason=i);var o={};t.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}));const i={create:function(t,i,o){const s=e.window.document.createElement(t);return void 0!==i&&(s.className=i),o&&o.appendChild(s),s},createNS:function(t,i){return e.window.document.createElementNS(t,i)}},o=e.window.document&&e.window.document.documentElement.style;function s(e){if(!o)return e[0];for(let t=0;t<e.length;t++)if(e[t]in o)return e[t];return e[0]}const a=s(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);let r;i.disableDrag=function(){o&&a&&(r=o[a],o[a]="none")},i.enableDrag=function(){o&&a&&(o[a]=r)};const n=s(["transform","WebkitTransform"]);i.setTransform=function(e,t){e.style[n]=t};let l=!1;try{const t=Object.defineProperty({},"passive",{get(){l=!0}});e.window.addEventListener("test",t,t),e.window.removeEventListener("test",t,t)}catch(e){l=!1}i.addEventListener=function(e,t,i,o={}){e.addEventListener(t,i,"passive"in o&&l?o:o.capture)},i.removeEventListener=function(e,t,i,o={}){e.removeEventListener(t,i,"passive"in o&&l?o:o.capture)};const c=function(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",c,!0)};function u(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}i.suppressClick=function(){e.window.addEventListener("click",c,!0),e.window.setTimeout(()=>{e.window.removeEventListener("click",c,!0)},0)},i.mousePos=function(t,i){const o=t.getBoundingClientRect();return new e.Point(i.clientX-o.left-t.clientLeft,i.clientY-o.top-t.clientTop)},i.touchPos=function(t,i){const o=t.getBoundingClientRect(),s=[];for(let a=0;a<i.length;a++)s.push(new e.Point(i[a].clientX-o.left-t.clientLeft,i[a].clientY-o.top-t.clientTop));return s},i.mouseButton=function(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button},i.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)};class h extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,i){let o=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),o=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),o=!1),this._validateContent(i.content,i)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),o=!1),o}_validateStretch(e,t){if(!e)return!0;let i=0;for(const o of e){if(o[0]<i||o[1]<o[0]||t<o[1])return!1;i=o[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let i=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(i=!1);this.isLoaded()||i?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,i){const o={};for(const i of t){this.images[i]||this.fire(new e.Event("styleimagemissing",{id:i}));const t=this.images[i];t?o[i]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}i(null,o)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const i=this.patterns[t],o=this.getImage(t);if(!o)return null;if(i&&i.position.version===o.version)return i.position;if(i)i.position.version=o.version;else{const i={w:o.data.width+2,h:o.data.height+2,x:0,y:0},s=new e.ImagePosition(i,o);this.patterns[t]={bin:i,position:s}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const i=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,i.RGBA),this.atlasTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:i,h:o}=e.potpack(t),s=this.atlasImage;s.resize({width:i||1,height:o||1});for(const t in this.patterns){const{bin:i}=this.patterns[t],o=i.x+1,a=i.y+1,r=this.images[t].data,n=r.width,l=r.height;e.RGBAImage.copy(r,s,{x:0,y:0},{x:o,y:a},{width:n,height:l}),e.RGBAImage.copy(r,s,{x:0,y:l-1},{x:o,y:a-1},{width:n,height:1}),e.RGBAImage.copy(r,s,{x:0,y:0},{x:o,y:a+l},{width:n,height:1}),e.RGBAImage.copy(r,s,{x:n-1,y:0},{x:o-1,y:a},{width:1,height:l}),e.RGBAImage.copy(r,s,{x:0,y:0},{x:o+n,y:a},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];u(e)&&this.updateImage(t,e)}}}var p=f,m=f,d=1e20;function f(e,t,i,o,s,a){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=o||.25,this.fontFamily=s||"sans-serif",this.fontWeight=a||"normal",this.radius=i||8;var r=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=r,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(r*r),this.gridInner=new Float64Array(r*r),this.f=new Float64Array(r),this.d=new Float64Array(r),this.z=new Float64Array(r+1),this.v=new Int16Array(r),this.middle=Math.round(r/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function y(e,t,i,o,s,a,r){for(var n=0;n<t;n++){for(var l=0;l<i;l++)o[l]=e[l*t+n];for(g(o,s,a,r,i),l=0;l<i;l++)e[l*t+n]=s[l]}for(l=0;l<i;l++){for(n=0;n<t;n++)o[n]=e[l*t+n];for(g(o,s,a,r,t),n=0;n<t;n++)e[l*t+n]=Math.sqrt(s[n])}}function g(e,t,i,o,s){i[0]=0,o[0]=-d,o[1]=+d;for(var a=1,r=0;a<s;a++){for(var n=(e[a]+a*a-(e[i[r]]+i[r]*i[r]))/(2*a-2*i[r]);n<=o[r];)r--,n=(e[a]+a*a-(e[i[r]]+i[r]*i[r]))/(2*a-2*i[r]);i[++r]=a,o[r]=n,o[r+1]=+d}for(a=0,r=0;a<s;a++){for(;o[r+1]<a;)r++;t[a]=(a-i[r])*(a-i[r])+e[i[r]]}}f.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),o=0;o<this.size*this.size;o++){var s=t.data[4*o+3]/255;this.gridOuter[o]=1===s?0:0===s?d:Math.pow(Math.max(0,.5-s),2),this.gridInner[o]=1===s?d:0===s?0:Math.pow(Math.max(0,s-.5),2)}for(y(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),y(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),o=0;o<this.size*this.size;o++)i[o]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[o]-this.gridInner[o])/this.radius+this.cutoff))));return i},p.default=m;class _{constructor(e,t){this.requestManager=e,this.localIdeographFontFamily=t,this.entries={}}setURL(e){this.url=e}getGlyphs(t,i){const o=[];for(const e in t)for(const i of t[e])o.push({stack:e,id:i});e.asyncAll(o,({stack:e,id:t},i)=>{let o=this.entries[e];o||(o=this.entries[e]={glyphs:{},requests:{},ranges:{}});let s=o.glyphs[t];if(void 0!==s)return void i(null,{stack:e,id:t,glyph:s});if(s=this._tinySDF(o,e,t),s)return o.glyphs[t]=s,void i(null,{stack:e,id:t,glyph:s});const a=Math.floor(t/256);if(256*a>65535)return void i(new Error("glyphs > 65535 not supported"));if(o.ranges[a])return void i(null,{stack:e,id:t,glyph:s});let r=o.requests[a];r||(r=o.requests[a]=[],_.loadGlyphRange(e,a,this.url,this.requestManager,(e,t)=>{if(t){for(const e in t)this._doesCharSupportLocalGlyph(+e)||(o.glyphs[+e]=t[+e]);o.ranges[a]=!0}for(const i of r)i(e,t);delete o.requests[a]})),r.push((o,s)=>{o?i(o):s&&i(null,{stack:e,id:t,glyph:s[t]||null})})},(e,t)=>{if(e)i(e);else if(t){const e={};for(const{stack:i,id:o,glyph:s}of t)(e[i]||(e[i]={}))[o]=s&&{id:s.id,bitmap:s.bitmap.clone(),metrics:s.metrics};i(null,e)}})}_doesCharSupportLocalGlyph(t){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](t)||e.isChar["Hangul Syllables"](t)||e.isChar.Hiragana(t)||e.isChar.Katakana(t))}_tinySDF(t,i,o){const s=this.localIdeographFontFamily;if(!s)return;if(!this._doesCharSupportLocalGlyph(o))return;let a=t.tinySDF;if(!a){let e="400";/bold/i.test(i)?e="900":/medium/i.test(i)?e="500":/light/i.test(i)&&(e="200"),a=t.tinySDF=new _.TinySDF(24,3,8,.25,s,e)}return{id:o,bitmap:new e.AlphaImage({width:30,height:30},a.draw(String.fromCharCode(o))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}}_.loadGlyphRange=function(t,i,o,s,a){const r=256*i,n=r+255,l=s.transformRequest(s.normalizeGlyphsURL(o).replace("{fontstack}",t).replace("{range}",`${r}-${n}`),e.ResourceType.Glyphs);e.getArrayBuffer(l,(t,i)=>{if(t)a(t);else if(i){const t={};for(const o of e.parseGlyphPBF(i))t[o.id]=o;a(null,t)}})},_.TinySDF=p;const b=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new class{constructor(){this.specification=e.styleSpec.light.position}possiblyEvaluate(t,i){return function([t,i,o]){const s=e.degToRad(i+90),a=e.degToRad(o);return{x:t*Math.cos(s)*Math.sin(a),y:t*Math.sin(s)*Math.sin(a),z:t*Math.cos(a),azimuthal:i,polar:o}}(t.expression.evaluate(i))}interpolate(t,i,o){return{x:e.number(t.x,i.x,o),y:e.number(t.y,i.y,o),z:e.number(t.z,i.z,o),azimuthal:e.number(t.azimuthal,i.azimuthal,o),polar:e.number(t.polar,i.polar,o)}}},color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)});class v extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(b),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,i={}){if(!this._validate(e.validateLight,t,i))for(const i in t){const o=t[i];e.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),o):this._transitionable.setValue(i,o)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,i,o){return(!o||!1!==o.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))}}const x=new e.Properties({source:new e.DataConstantProperty(e.styleSpec.terrain.source),exaggeration:new e.DataConstantProperty(e.styleSpec.terrain.exaggeration)});class L extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(x),this.set(t),this._transitioning=this._transitionable.untransitioned()}get(){return this._transitionable.serialize()}set(t){for(const i in t){const o=t[i];e.endsWith(i,"-transition")?this._transitionable.setTransition(i.slice(0,-"-transition".length),o):this._transitionable.setValue(i,o)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}}class I{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,t){const i=e.join(",")+String(t);return this.dashEntry[i]||(this.dashEntry[i]=this.addDash(e,t)),this.dashEntry[i]}getDashRanges(e,t,i){const o=[];let s=e.length%2==1?-e[e.length-1]*i:0,a=e[0]*i,r=!0;o.push({left:s,right:a,isDash:r,zeroLength:0===e[0]});let n=e[0];for(let t=1;t<e.length;t++){r=!r;const l=e[t];s=n*i,n+=l,a=n*i,o.push({left:s,right:a,isDash:r,zeroLength:0===l})}return o}addRoundDash(e,t,i){const o=t/2;for(let t=-i;t<=i;t++){const s=this.width*(this.nextRow+i+t);let a=0,r=e[a];for(let n=0;n<this.width;n++){n/r.right>1&&(r=e[++a]);const l=Math.abs(n-r.left),c=Math.abs(n-r.right),u=Math.min(l,c);let h;const p=t/i*(o+1);if(r.isDash){const e=o-Math.abs(p);h=Math.sqrt(u*u+e*e)}else h=o-Math.sqrt(u*u+p*p);this.data[s+n]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e){for(let t=e.length-1;t>=0;--t){const i=e[t],o=e[t+1];i.zeroLength?e.splice(t,1):o&&o.isDash===i.isDash&&(o.left=i.left,e.splice(t,1))}const t=e[0],i=e[e.length-1];t.isDash===i.isDash&&(t.left=i.left-this.width,i.right=t.right+this.width);const o=this.width*this.nextRow;let s=0,a=e[s];for(let t=0;t<this.width;t++){t/a.right>1&&(a=e[++s]);const i=Math.abs(t-a.left),r=Math.abs(t-a.right),n=Math.min(i,r);this.data[o+t]=Math.max(0,Math.min(255,(a.isDash?n:-n)+128))}}addDash(t,i){const o=i?7:0,s=2*o+1;if(this.nextRow+s>this.height)return e.warnOnce("LineAtlas out of space"),null;0===t.length&&t.push(1);let a=0;for(let i=0;i<t.length;i++)t[i]<0&&(e.warnOnce("Negative value is found in line dasharray, replacing values with 0"),t[i]=0),a+=t[i];if(0!==a){const e=this.width/a,s=this.getDashRanges(t,this.width,e);i?this.addRoundDash(s,e,o):this.addRegularDash(s)}const r={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:a};return this.nextRow+=s,this.dirty=!0,r}bind(e){const t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.ALPHA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.ALPHA,this.width,this.height,0,t.ALPHA,t.UNSIGNED_BYTE,this.data))}}class w{constructor(t,i){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const o=this.workerPool.acquire(this.id);for(let e=0;e<o.length;e++){const t=new w.Actor(o[e],i,this.id);t.name="Worker "+e,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(t,i,o){e.asyncAll(this.actors,(e,o)=>{e.send(t,i,o)},o=o||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(e=>{e.remove()}),this.actors=[],this.workerPool.release(this.id)}}function q(t,i,o){return i*(e.EXTENT/(t.tileSize*Math.pow(2,o-t.tileID.overscaledZ)))}w.Actor=e.Actor;class F{constructor(e,t,i,o){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=i,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this.screenGeometry.map(e=>o.pointCoordinate3D(e)),this.cameraGeometry=this.bufferedCameraGeometry(0)}static createFromScreenPoints(t,i){let o,s;if(t instanceof e.Point||"number"==typeof t[0]){const a=e.Point.convert(t);o=[e.Point.convert(t)],s=i.isPointAboveHorizon(a)}else{const a=e.Point.convert(t[0]),r=e.Point.convert(t[1]);o=[a,r],s=e.polygonizeBounds(a,r).every(e=>i.isPointAboveHorizon(e))}return new F(o,i.getCameraPoint(),s,i)}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const i=[this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,0)):this.screenBounds[1],this.cameraPoint];return e.bufferConvexPolygon(i,t)}containsTile(t,i,o){const s=t.queryPadding+1,a=o?this._bufferedCameraMercator(s,i).map(e=>t.tileID.getTilePoint(e)):this._bufferedScreenMercator(s,i).map(e=>t.tileID.getTilePoint(e)),r=this.screenGeometryMercator.map(e=>t.tileID.getTileVec3(e)),n=r.map(t=>new e.Point(t[0],t[1])),l=i.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),c=t.tileID.getTileVec3(l),u=r.map(t=>{const i=e.sub(t,t,c);return e.normalize(i,i),new e.Ray(c,i)}),h=q(t,1,i.zoom);if(e.polygonIntersectsBox(a,0,0,e.EXTENT,e.EXTENT))return{queryGeometry:this,tilespaceGeometry:n,tilespaceRays:u,bufferedTilespaceGeometry:a,bufferedTilespaceBounds:(p=e.getBounds(a),p.min.x=e.clamp(p.min.x,0,e.EXTENT),p.min.y=e.clamp(p.min.y,0,e.EXTENT),p.max.x=e.clamp(p.max.x,0,e.EXTENT),p.max.y=e.clamp(p.max.y,0,e.EXTENT),p),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:h};var p}_bufferedScreenMercator(e,t){const i=E(e);if(this._screenRaycastCache[i])return this._screenRaycastCache[i];{const o=this.bufferedScreenGeometry(e).map(e=>t.pointCoordinate3D(e));return this._screenRaycastCache[i]=o,o}}_bufferedCameraMercator(e,t){const i=E(e);if(this._cameraRaycastCache[i])return this._cameraRaycastCache[i];{const o=this.bufferedCameraGeometry(e).map(e=>t.pointCoordinate3D(e));return this._cameraRaycastCache[i]=o,o}}}function E(e){return 100*e|0}function T(t,i,o){const s=function(s,a){if(s)return o(s);if(a){const s=e.pick(e.extend(a,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);a.vector_layers&&(s.vectorLayers=a.vector_layers,s.vectorLayerIds=s.vectorLayers.map(e=>e.id)),s.tiles=i.canonicalizeTileset(s,t.url),o(null,s)}};return t.url?e.getJSON(i.transformRequest(i.normalizeSourceURL(t.url),e.ResourceType.Source),s):e.browser.frame(()=>s(null,t))}class C{constructor(t,i,o){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=i||0,this.maxzoom=o||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const i=Math.pow(2,t.z),o=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*i),s=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*i),a=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*i),r=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*i);return t.x>=o&&t.x<a&&t.y>=s&&t.y<r}}class z extends e.Evented{constructor(t,i,o,s){super(),this.id=t,this.dispatcher=o,this.setEventedParent(s),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},i),e.extend(this,e.pick(i,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=T(this._options,this.map._requestManager,(t,i)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):i&&(e.extend(this,i),i.bounds&&(this.tileBounds=new C(i.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(i.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,i){const o=e.browser.devicePixelRatio>=2,s=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),o,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(s,e.ResourceType.Tile),(o,s)=>{if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(o)t.state="errored",i(o);else if(s){this.map._refreshExpiredTiles&&t.setExpiryData(s),delete s.cacheControl,delete s.expires;const o=this.map.painter.context,a=o.gl;t.texture=this.map.painter.getTileTexture(s.width),t.texture?t.texture.update(s,{useMipmap:!0}):(t.texture=new e.Texture(o,s,a.RGBA,{useMipmap:!0}),t.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE,a.LINEAR_MIPMAP_NEAREST),o.extTextureFilterAnisotropic&&a.texParameterf(a.TEXTURE_2D,o.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,o.extTextureFilterAnisotropicMax)),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),i(null)}})}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}}var A=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class P extends e.Evented{constructor(e,t,i,o){super(),this.id=e,this.dispatcher=i,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(o),this.options=t}load(t,i){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(o,s)=>{this._loaded=!0,o?this.fire(new e.ErrorEvent(o)):s&&(this.image=s,t&&(this.coordinates=t),i&&i(),this._finishLoading())})}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this.options.url=e.url,this.load(e.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}setCoordinates(t){this.coordinates=t;const i=t.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(t){let i=1/0,o=1/0,s=-1/0,a=-1/0;for(const e of t)i=Math.min(i,e.x),o=Math.min(o,e.y),s=Math.max(s,e.x),a=Math.max(a,e.y);const r=Math.max(s-i,a-o),n=Math.max(0,Math.floor(-Math.log(r)/Math.LN2)),l=Math.pow(2,n);return new e.CanonicalTileID(n,Math.floor((i+s)/2*l),Math.floor((o+a)/2*l))}(i),this.minzoom=this.maxzoom=this.tileID.z;const o=i.map(e=>this.tileID.getTilePoint(e)._round());return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(o[0].x,o[0].y,0,0),this._boundsArray.emplaceBack(o[1].x,o[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(o[3].x,o[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(o[2].x,o[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,i=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(t,this.image,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const B={vector:class extends e.Evented{constructor(t,i,o,s){if(super(),this.id=t,this.dispatcher=o,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(i,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},i),this._collectResourceTiming=i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(s),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=T(this._options,this.map._requestManager,(t,i)=>{this._tileJSONRequest=null,this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):i&&(e.extend(this,i),i.bounds&&(this.tileBounds=new C(i.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(i.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.cancel(),e();const t=this.map.style._getSourceCaches(this.id);for(const e of t)e.clearTiles();this.load()}setTiles(e){return this.setSourceProperty(()=>{this._options.tiles=e}),this}setUrl(e){return this.setSourceProperty(()=>{this.url=e,this._options.url=e}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return e.extend({},this._options)}loadTile(t,i){const o=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),s={request:this.map._requestManager.transformRequest(o,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(s.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=i:t.request=t.actor.send("reloadTile",s,a.bind(this));else if(t.actor=this._tileWorkers[o]=this._tileWorkers[o]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",s,a.bind(this));else{const i=e.loadVectorTile.call({deduped:this._deduped},s,(e,i)=>{e||!i?a.call(this,e):(s.data={cacheControl:i.cacheControl,expires:i.expires,rawData:i.rawData.slice(0)},t.actor&&t.actor.send("loadTile",s,a.bind(this)))},!0);t.request={cancel:i}}function a(o,s){return delete t.request,t.aborted?i(null):o&&404!==o.status?i(o):(s&&s.resourceTiming&&(t.resourceTiming=s.resourceTiming),this.map._refreshExpiredTiles&&s&&t.setExpiryData(s),t.loadVectorData(s,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),i(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0)}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}},raster:z,"raster-dem":class extends z{constructor(t,i,o,s){super(t,i,o,s),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(t,i){const o=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function s(e,o){e&&(t.state="errored",i(e)),o&&(t.dem=o,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",i(null))}t.request=e.getImage(this.map._requestManager.transformRequest(o,e.ResourceType.Tile),function(o,a){if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(o)t.state="errored",i(o);else if(a){this.map._refreshExpiredTiles&&t.setExpiryData(a),delete a.cacheControl,delete a.expires;const i=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),o=1-(a.width-e.prevPowerOfTwo(a.width))/2;o<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const r=i?a:e.browser.getImageData(a,o),n={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:r,encoding:this.encoding,padding:o};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",n,s.bind(this)))}}.bind(this))}_getNeighboringTiles(t){const i=t.canonical,o=Math.pow(2,i.z),s=(i.x-1+o)%o,a=0===i.x?t.wrap-1:t.wrap,r=(i.x+1+o)%o,n=i.x+1===o?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,a,i.z,s,i.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,n,i.z,r,i.y).key]={backfilled:!1},i.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,a,i.z,s,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,n,i.z,r,i.y-1).key]={backfilled:!1}),i.y+1<o&&(l[new e.OverscaledTileID(t.overscaledZ,a,i.z,s,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,n,i.z,r,i.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,i,o,s){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=o.getActor(),this.setEventedParent(s),this._data=i.data,this._options=e.extend({},i),this._collectResourceTiming=i.collectResourceTiming,this._resourceTiming=[],void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const a=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*a,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*a,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.EXTENT,radius:(i.clusterRadius||50)*a,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions)}load(){this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(t=>{if(t)return void this.fire(new e.ErrorEvent(t));const i={dataType:"source",sourceDataType:"metadata"};this._collectResourceTiming&&this._resourceTiming&&this._resourceTiming.length>0&&(i.resourceTiming=this._resourceTiming,this._resourceTiming=[]),this.fire(new e.Event("data",i))})}onAdd(e){this.map=e,this.load()}setData(t){return this._data=t,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(t=>{if(t)return void this.fire(new e.ErrorEvent(t));const i={dataType:"source",sourceDataType:"content"};this._collectResourceTiming&&this._resourceTiming&&this._resourceTiming.length>0&&(i.resourceTiming=this._resourceTiming,this._resourceTiming=[]),this.fire(new e.Event("data",i))}),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,i,o){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:i},o),this}_updateWorkerData(t){this._loaded=!1;const i=e.extend({},this.workerOptions),o=this._data;"string"==typeof o?(i.request=this.map._requestManager.transformRequest(e.browser.resolveURL(o),e.ResourceType.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(o),this.actor.send(this.type+".loadData",i,(e,o)=>{this._removed||o&&o.abandoned||(this._loaded=!0,o&&o.resourceTiming&&o.resourceTiming[this.id]&&(this._resourceTiming=o.resourceTiming[this.id].slice(0)),this.actor.send(this.type+".coalesce",{source:i.source},null),t(e))})}loaded(){return this._loaded}loadTile(t,i){const o=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(o,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(e,s)=>(delete t.request,t.unloadVectorData(),t.aborted?i(null):e?i(e):(t.loadVectorData(s,this.map.painter,"reloadTile"===o),i(null))))}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends P{constructor(e,t,i,o){super(e,t,i,o),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const i of t.urls)this.urls.push(this.map._requestManager.transformRequest(i,e.ResourceType.Source).url);e.getVideo(this.urls,(t,i)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):i&&(this.video=i,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const i=this.video.seekable;t<i.start(0)||t>i.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,`Playback for this video can be set only between the ${i.start(0)} and ${i.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,i=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,i.RGBA),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE));for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:P,canvas:class extends P{constructor(t,i,o,s){super(t,i,o,s),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(e=>!Array.isArray(e)||2!==e.length||e.some(e=>"number"!=typeof e))||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context,o=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,A.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(i,this.canvas,o.RGBA,{premultiply:!0});for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}},M=function(t,i,o,s){const a=new B[i.type](t,i,o,s);if(a.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${a.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],a),a};function D(t,i){const o=e.identity([]);return e.scale(o,o,[.5*t.width,.5*-t.height,1]),e.translate(o,o,[1,-1,0]),e.multiply(o,o,t.calculatePosMatrix(i.toUnwrapped()))}function S(e,t,i,o,s,a,r,n=!1){const l=e.tilesIn(o,r,n);l.sort(U);const c=[];for(const o of l)c.push({wrappedTileID:o.tile.tileID.wrapped().key,queryResults:o.tile.queryRenderedFeatures(t,i,e._state,o,s,a,D(e.transform,o.tile.tileID),n)});const u=function(e){const t={},i={};for(const o of e){const e=o.queryResults,s=o.wrappedTileID,a=i[s]=i[s]||{};for(const i in e){const o=e[i],s=a[i]=a[i]||{},r=t[i]=t[i]||[];for(const e of o)s[e.featureIndex]||(s[e.featureIndex]=!0,r.push(e))}}return t}(c);for(const t in u)u[t].forEach(t=>{const i=t.feature,o=e.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o});return u}function k(e,t){const i=e.getRenderableIds().map(t=>e.getTileByID(t)),o=[],s={};for(let e=0;e<i.length;e++){const a=i[e],r=a.tileID.canonical.key;s[r]||(s[r]=!0,a.querySourceFeatures(o,t))}return o}function U(e,t){const i=e.tileID,o=t.tileID;return i.overscaledZ-o.overscaledZ||i.canonical.y-o.canonical.y||i.wrap-o.wrap||i.canonical.x-o.canonical.x}function R(){return new e.window.Worker(Is.workerUrl)}const O="mapboxgl_preloaded_worker_pool";class N{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<N.workerCount;)this.workers.push(new R);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach(e=>{e.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[O]}numActive(){return Object.keys(this.active).length}}let $;function V(){return $||($=new N),$}function G(t,i){const o={};for(const e in t)"ref"!==e&&(o[e]=t[e]);return e.refProperties.forEach(e=>{e in i&&(o[e]=i[e])}),o}function j(e){e=e.slice();const t=Object.create(null);for(let i=0;i<e.length;i++)t[e[i].id]=e[i];for(let i=0;i<e.length;i++)"ref"in e[i]&&(e[i]=G(e[i],t[e[i].ref]));return e}N.workerCount=2;const Z={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain"};function H(e,t,i){i.push({command:Z.addSource,args:[e,t[e]]})}function X(e,t,i){t.push({command:Z.removeSource,args:[e]}),i[e]=!0}function Q(e,t,i,o){X(e,i,o),H(e,t,i)}function W(t,i,o){let s;for(s in t[o])if(t[o].hasOwnProperty(s)&&"data"!==s&&!e.deepEqual(t[o][s],i[o][s]))return!1;for(s in i[o])if(i[o].hasOwnProperty(s)&&"data"!==s&&!e.deepEqual(t[o][s],i[o][s]))return!1;return!0}function K(t,i,o,s,a,r){let n;for(n in i=i||{},t=t||{})t.hasOwnProperty(n)&&(e.deepEqual(t[n],i[n])||o.push({command:r,args:[s,n,i[n],a]}));for(n in i)i.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(e.deepEqual(t[n],i[n])||o.push({command:r,args:[s,n,i[n],a]}))}function J(e){return e.id}function Y(e,t){return e[t.id]=t,e}class ee{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let i=1,o=this._distances[i];const s=t*this.paddedLength+this.padding;for(;o<s&&i<this._distances.length;)o=this._distances[++i];const a=i-1,r=this._distances[a],n=o-r,l=n>0?(s-r)/n:0;return this.points[a].mult(1-l).add(this.points[i].mult(l))}}class te{constructor(e,t,i){const o=this.boxCells=[],s=this.circleCells=[];this.xCellCount=Math.ceil(e/i),this.yCellCount=Math.ceil(t/i);for(let e=0;e<this.xCellCount*this.yCellCount;e++)o.push([]),s.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,i,o,s){this._forEachCell(t,i,o,s,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(o),this.bboxes.push(s)}insertCircle(e,t,i,o){this._forEachCell(t-o,i-o,t+o,i+o,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(i),this.circles.push(o)}_insertBoxCell(e,t,i,o,s,a){this.boxCells[s].push(a)}_insertCircleCell(e,t,i,o,s,a){this.circleCells[s].push(a)}_query(e,t,i,o,s,a){if(i<0||e>this.width||o<0||t>this.height)return!s&&[];const r=[];if(e<=0&&t<=0&&this.width<=i&&this.height<=o){if(s)return!0;for(let e=0;e<this.boxKeys.length;e++)r.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],i=this.circles[3*e+1],o=this.circles[3*e+2];r.push({key:this.circleKeys[e],x1:t-o,y1:i-o,x2:t+o,y2:i+o})}return a?r.filter(a):r}return this._forEachCell(e,t,i,o,this._queryCell,r,{hitTest:s,seenUids:{box:{},circle:{}}},a),s?r.length>0:r}_queryCircle(e,t,i,o,s){const a=e-i,r=e+i,n=t-i,l=t+i;if(r<0||a>this.width||l<0||n>this.height)return!o&&[];const c=[];return this._forEachCell(a,n,r,l,this._queryCellCircle,c,{hitTest:o,circle:{x:e,y:t,radius:i},seenUids:{box:{},circle:{}}},s),o?c.length>0:c}query(e,t,i,o,s){return this._query(e,t,i,o,!1,s)}hitTest(e,t,i,o,s){return this._query(e,t,i,o,!0,s)}hitTestCircle(e,t,i,o){return this._queryCircle(e,t,i,!0,o)}_queryCell(e,t,i,o,s,a,r,n){const l=r.seenUids,c=this.boxCells[s];if(null!==c){const s=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=s[c+2]&&t<=s[c+3]&&i>=s[c+0]&&o>=s[c+1]&&(!n||n(this.boxKeys[u]))){if(r.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[u],x1:s[c],y1:s[c+1],x2:s[c+2],y2:s[c+3]})}}}const u=this.circleCells[s];if(null!==u){const s=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(s[u],s[u+1],s[u+2],e,t,i,o)&&(!n||n(this.circleKeys[c]))){if(r.hitTest)return a.push(!0),!0;{const e=s[u],t=s[u+1],i=s[u+2];a.push({key:this.circleKeys[c],x1:e-i,y1:t-i,x2:e+i,y2:t+i})}}}}}_queryCellCircle(e,t,i,o,s,a,r,n){const l=r.circle,c=r.seenUids,u=this.boxCells[s];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const i=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[i+0],e[i+1],e[i+2],e[i+3])&&(!n||n(this.boxKeys[t])))return a.push(!0),!0}}const h=this.circleCells[s];if(null!==h){const e=this.circles;for(const t of h)if(!c.circle[t]){c.circle[t]=!0;const i=3*t;if(this._circlesCollide(e[i],e[i+1],e[i+2],l.x,l.y,l.radius)&&(!n||n(this.circleKeys[t])))return a.push(!0),!0}}}_forEachCell(e,t,i,o,s,a,r,n){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(o);for(let p=l;p<=u;p++)for(let l=c;l<=h;l++)if(s.call(this,e,t,i,o,this.xCellCount*l+p,a,r,n))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,i,o,s,a){const r=o-e,n=s-t,l=i+a;return l*l>r*r+n*n}_circleAndRectCollide(e,t,i,o,s,a,r){const n=(a-o)/2,l=Math.abs(e-(o+n));if(l>n+i)return!1;const c=(r-s)/2,u=Math.abs(t-(s+c));if(u>c+i)return!1;if(l<=n||u<=c)return!0;const h=l-n,p=u-c;return h*h+p*p<=i*i}}function ie(t,i,o,s,a){const r=e.create();return i?(e.scale(r,r,[1/a,1/a,1]),o||e.rotateZ(r,r,s.angle)):e.multiply(r,s.labelPlaneMatrix,t),r}function oe(t,i,o,s,a){if(i){const i=e.clone(t);return e.scale(i,i,[a,a,1]),o||e.rotateZ(i,i,-s.angle),i}return s.glCoordMatrix}function se(t,i,o=0){const s=[t.x,t.y,o,1];o?e.transformMat4(s,s,i):fe(s,s,i);const a=s[3];return{point:new e.Point(s[0]/a,s[1]/a),signedDistanceFromCamera:a}}function ae(e,t){return Math.min(.5+e/t*.5,1.5)}function re(e,t){const i=e[0]/e[3],o=e[1]/e[3];return i>=-t[0]&&i<=t[0]&&o>=-t[1]&&o<=t[1]}function ne(t,i,o,s,a,r,n,l,c){const u=s?t.textSizeData:t.iconSizeData,h=e.evaluateSizeForZoom(u,o.transform.zoom),p=[256/o.width*2+1,256/o.height*2+1],m=s?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;m.clear();const d=t.lineVertexArray,f=s?t.text.placedSymbolArray:t.icon.placedSymbolArray,y=o.transform.width/o.transform.height;let g=!1;for(let s=0;s<f.length;s++){const _=f.get(s);if(_.hidden||_.writingMode===e.WritingMode.vertical&&!g){de(_.numGlyphs,m);continue}g=!1;const b=c?c({x:_.anchorX,y:_.anchorY}):0,v=[_.anchorX,_.anchorY,b,1];if(e.transformMat4(v,v,i),!re(v,p)){de(_.numGlyphs,m);continue}const x=ae(o.transform.cameraToCenterDistance,v[3]),L=e.evaluateSizeForFeature(u,h,_),I=n?L/x:L*x,w=new e.Point(_.anchorX,_.anchorY),q=se(w,a,b);if(q.signedDistanceFromCamera<=0){de(_.numGlyphs,m);continue}const F=q.point;let E={};const T=n?null:c,C=ue(_,I,!1,l,i,a,r,t.glyphOffsetArray,d,m,F,w,E,y,T);g=C.useVertical,T&&C.needsFlipping&&(E={}),(C.notEnoughRoom||g||C.needsFlipping&&ue(_,I,!0,l,i,a,r,t.glyphOffsetArray,d,m,F,w,E,y,T).notEnoughRoom)&&de(_.numGlyphs,m)}s?t.text.dynamicLayoutVertexBuffer.updateData(m):t.icon.dynamicLayoutVertexBuffer.updateData(m)}function le(e,t,i,o,s,a,r,n,l,c,u,h,p){const m=n.glyphStartIndex+n.numGlyphs,d=n.lineStartIndex,f=n.lineStartIndex+n.lineLength,y=t.getoffsetX(n.glyphStartIndex),g=t.getoffsetX(m-1),_=pe(e*y,i,o,s,a,r,n.segment,d,f,l,c,u,h,p,!0);if(!_)return null;const b=pe(e*g,i,o,s,a,r,n.segment,d,f,l,c,u,h,p,!0);return b?{first:_,last:b}:null}function ce(t,i,o,s){return t===e.WritingMode.horizontal&&Math.abs(o.y-i.y)>Math.abs(o.x-i.x)*s?{useVertical:!0}:(t===e.WritingMode.vertical?i.y<o.y:i.x>o.x)?{needsFlipping:!0}:null}function ue(t,i,o,s,a,r,n,l,c,u,h,p,m,d,f){const y=i/24,g=t.lineOffsetX*y,_=t.lineOffsetY*y;let b;if(t.numGlyphs>1){const e=t.glyphStartIndex+t.numGlyphs,i=t.lineStartIndex,a=t.lineStartIndex+t.lineLength,u=le(y,l,g,_,o,h,p,t,c,r,m,f);if(!u)return{notEnoughRoom:!0};const v=se(u.first.point,n).point,x=se(u.last.point,n).point;if(s&&!o){const e=ce(t.writingMode,v,x,d);if(e)return e}b=[u.first];for(let s=t.glyphStartIndex+1;s<e-1;s++)b.push(pe(y*l.getoffsetX(s),g,_,o,h,p,t.segment,i,a,c,r,m,f));b.push(u.last)}else{if(s&&!o){const i=se(p,a).point,o=t.lineStartIndex+t.segment+1,s=new e.Point(c.getx(o),c.gety(o)),r=se(s,a),n=r.signedDistanceFromCamera>0?r.point:he(p,s,i,1,a),l=ce(t.writingMode,i,n,d);if(l)return l}const i=pe(y*l.getoffsetX(t.glyphStartIndex),g,_,o,h,p,t.segment,t.lineStartIndex,t.lineStartIndex+t.lineLength,c,r,m,f);if(!i)return{notEnoughRoom:!0};b=[i]}for(const t of b)e.addDynamicAttributes(u,t.point,t.angle);return{}}function he(e,t,i,o,s,a){const r=e.add(e.sub(t)._unit()),n=se(r,s,a?a(r):0).point,l=i.sub(n);return i.add(l._mult(o/l.mag()))}function pe(t,i,o,s,a,r,n,l,c,u,h,p,m,d,f){const y=s?t-i:t+i;let g=y>0?1:-1,_=0;s&&(g*=-1,_=Math.PI),g<0&&(_+=Math.PI);let b=g>0?l+n:l+n+1,v=a,x=a,L=0,I=0;const w=Math.abs(y),q=[],F=[];let E=r;const T=()=>{const t=b-g;return 0===L?r:new e.Point(u.getx(t),u.gety(t))},C=()=>he(T(),E,x,w-L+1,h,m);for(;L+I<=w;){if(b+=g,b<l||b>=c)return null;if(x=v,q.push(v),d&&F.push(E||T()),v=p[b],void 0===v){E=new e.Point(u.getx(b),u.gety(b));const t=se(E,h,m?m(E):0);v=t.signedDistanceFromCamera>0?p[b]=t.point:C()}else E=null;L+=I,I=x.dist(v)}f&&m&&(E=E||new e.Point(u.getx(b),u.gety(b)),p[b]=v=void 0===p[b]?v:C(),I=x.dist(v));const z=(w-L)/I,A=v.sub(x),P=A.mult(z)._add(x);o&&P._add(A._unit()._perp()._mult(o*g));const B=_+Math.atan2(v.y-x.y,v.x-x.x);return q.push(P),d&&(E=E||new e.Point(u.getx(b),u.gety(b)),F.push(function(t,i,o){const s=1-o;return new e.Point(t.x*s+i.x*o,t.y*s+i.y*o)}(F.length>0?F[F.length-1]:E,E,z))),{point:P,angle:B,path:q,tilePath:F}}const me=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function de(e,t){for(let i=0;i<e;i++){const e=t.length;t.resize(e+4),t.float32.set(me,3*e)}}function fe(e,t,i){const o=t[0],s=t[1];return e[0]=i[0]*o+i[4]*s+i[12],e[1]=i[1]*o+i[5]*s+i[13],e[3]=i[3]*o+i[7]*s+i[15],e}class ye{constructor(e,t=new te(e.width+200,e.height+200,25),i=new te(e.width+200,e.height+200,25)){this.transform=e,this.grid=t,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200}placeCollisionBox(e,t,i,o,s,a,r){const n=this.projectAndGetPerspectiveRatio(a,t.anchorPointX,t.anchorPointY,t.elevation),l=s*n.perspectiveRatio,c=(t.x1*e+i.x-t.padding)*l+n.point.x,u=(t.y1*e+i.y-t.padding)*l+n.point.y,h=(t.x2*e+i.x+t.padding)*l+n.point.x,p=(t.y2*e+i.y+t.padding)*l+n.point.y,m=n.perspectiveRatio<=.55;return!this.isInsideGrid(c,u,h,p)||!o&&this.grid.hitTest(c,u,h,p,r)||m?{box:[],offscreen:!1}:{box:[c,u,h,p],offscreen:this.isOffscreen(c,u,h,p)}}placeCollisionCircles(t,i,o,s,a,r,n,l,c,u,h,p,m,d){const f=[],y=this.transform.elevation,g=y?e=>y.getAtTileOffset(d,e.x,e.y):e=>0,_=new e.Point(i.anchorX,i.anchorY),b=g(_),v=se(_,r,b),x=ae(this.transform.cameraToCenterDistance,v.signedDistanceFromCamera),L=(u?a/x:a*x)/e.ONE_EM,I=se(_,n,b).point,w=v.signedDistanceFromCamera>0?le(L,s,i.lineOffsetX*L,i.lineOffsetY*L,!1,I,_,i,o,n,{},y&&!u?g:null,u&&!!y):null;let q=!1,F=!1,E=!0;if(w){const i=.5*p*x+m,o=new e.Point(-100,-100),s=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),a=new ee,r=w.first,n=w.last;let u=[];for(let e=r.path.length-1;e>=1;e--)u.push(r.path[e]);for(let e=1;e<n.path.length;e++)u.push(n.path[e]);const d=2.5*i;if(l){const e=u.map(y?(e,t)=>{const i=g(t<r.path.length-1?r.tilePath[r.path.length-1-t]:n.tilePath[t-r.path.length+2]);return se(e,l,i)}:e=>se(e,l));u=e.some(e=>e.signedDistanceFromCamera<=0)?[]:e.map(e=>e.point)}let _=[];if(u.length>0){const t=u[0].clone(),i=u[0].clone();for(let e=1;e<u.length;e++)t.x=Math.min(t.x,u[e].x),t.y=Math.min(t.y,u[e].y),i.x=Math.max(i.x,u[e].x),i.y=Math.max(i.y,u[e].y);_=t.x>=o.x&&i.x<=s.x&&t.y>=o.y&&i.y<=s.y?[u]:i.x<o.x||t.x>s.x||i.y<o.y||t.y>s.y?[]:e.clipLine([u],o.x,o.y,s.x,s.y)}for(const e of _){a.reset(e,.25*i);let o=0;o=a.length<=.5*i?1:Math.ceil(a.paddedLength/d)+1;for(let e=0;e<o;e++){const s=e/Math.max(o-1,1),r=a.lerp(s),n=r.x+100,l=r.y+100;f.push(n,l,i,0);const u=n-i,p=l-i,m=n+i,d=l+i;if(E=E&&this.isOffscreen(u,p,m,d),F=F||this.isInsideGrid(u,p,m,d),!t&&this.grid.hitTestCircle(n,l,i,h)&&(q=!0,!c))return{circles:[],offscreen:!1,collisionDetected:q}}}}return{circles:!c&&q||!F?[]:f,offscreen:E,collisionDetected:q}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const i=[];let o=1/0,s=1/0,a=-1/0,r=-1/0;for(const n of t){const t=new e.Point(n.x+100,n.y+100);o=Math.min(o,t.x),s=Math.min(s,t.y),a=Math.max(a,t.x),r=Math.max(r,t.y),i.push(t)}const n=this.grid.query(o,s,a,r).concat(this.ignoredGrid.query(o,s,a,r)),l={},c={};for(const t of n){const o=t.key;if(void 0===l[o.bucketInstanceId]&&(l[o.bucketInstanceId]={}),l[o.bucketInstanceId][o.featureIndex])continue;const s=[new e.Point(t.x1,t.y1),new e.Point(t.x2,t.y1),new e.Point(t.x2,t.y2),new e.Point(t.x1,t.y2)];e.polygonIntersectsPolygon(i,s)&&(l[o.bucketInstanceId][o.featureIndex]=!0,void 0===c[o.bucketInstanceId]&&(c[o.bucketInstanceId]=[]),c[o.bucketInstanceId].push(o.featureIndex))}return c}insertCollisionBox(e,t,i,o,s){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:o,collisionGroupID:s},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,i,o,s){const a=t?this.ignoredGrid:this.grid,r={bucketInstanceId:i,featureIndex:o,collisionGroupID:s};for(let t=0;t<e.length;t+=4)a.insertCircle(r,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(t,i,o,s){const a=[i,o,0,1];return s?(a[2]=s,e.transformMat4(a,a,t)):fe(a,a,t),{point:new e.Point((a[0]/a[3]+1)/2*this.transform.width+100,(-a[1]/a[3]+1)/2*this.transform.height+100),perspectiveRatio:Math.min(.5+this.transform.cameraToCenterDistance/a[3]*.5,1.5)}}isOffscreen(e,t,i,o){return i<100||e>=this.screenRightBoundary||o<100||t>this.screenBottomBoundary}isInsideGrid(e,t,i,o){return i>=0&&e<this.gridRightBoundary&&o>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}class ge{constructor(e,t,i,o){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):o&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class _e{constructor(e,t,i,o,s){this.text=new ge(e?e.text:null,t,i,s),this.icon=new ge(e?e.icon:null,t,o,s)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class be{constructor(e,t,i){this.text=e,this.icon=t,this.skipFade=i}}class ve{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class xe{constructor(e,t,i,o,s){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=i,this.bucketIndex=o,this.tileID=s}}class Le{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function Ie(t,i,o,s,a){const{horizontalAlign:r,verticalAlign:n}=e.getAnchorAlignment(t),l=-(r-.5)*i,c=-(n-.5)*o,u=e.evaluateVariableOffset(t,s);return new e.Point(l+u[0]*a,c+u[1]*a)}function we(t,i,o,s,a){const r=new e.Point(t,i);return o&&r._rotate(s?a:-a),r}class qe{constructor(e,t,i,o){this.transform=e.clone(),this.collisionIndex=new ye(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new Le(i),this.collisionCircleArrays={},this.prevPlacement=o,o&&(o.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,i,o,s){const a=o.getBucket(i),r=o.latestFeatureIndex;if(!a||!r||i.id!==a.layerIds[0])return;const n=o.collisionBoxArray,l=a.layers[0].layout,c=Math.pow(2,this.transform.zoom-o.tileID.overscaledZ),u=o.tileSize/e.EXTENT,h=this.transform.calculatePosMatrix(o.tileID.toUnwrapped()),p="map"===l.get("text-pitch-alignment"),m="map"===l.get("text-rotation-alignment"),d=q(o,1,this.transform.zoom),f=ie(h,p,m,this.transform,d);let y=null;if(p){const t=oe(h,p,m,this.transform,d);y=e.multiply([],this.transform.labelPlaneMatrix,t)}this.retainedQueryData[a.bucketInstanceId]=new xe(a.bucketInstanceId,r,a.sourceLayerIndex,a.index,o.tileID);const g={bucket:a,layout:l,posMatrix:h,textLabelPlaneMatrix:f,labelToScreenMatrix:y,scale:c,textPixelRatio:u,holdingForFade:o.holdingForFade(),collisionBoxArray:n,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(a.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(s)for(const e of a.sortKeyRanges){const{sortKey:i,symbolInstanceStart:o,symbolInstanceEnd:s}=e;t.push({sortKey:i,symbolInstanceStart:o,symbolInstanceEnd:s,parameters:g})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:g})}attemptAnchorPlacement(e,t,i,o,s,a,r,n,l,c,u,h,p,m,d,f,y,g){const _=[h.textOffset0,h.textOffset1],b=m.getSymbolInstanceTextSize(y,h,this.transform.zoom,p),v=Ie(e,i,o,_,s),x=this.collisionIndex.placeCollisionBox(b,t,we(v.x,v.y,a,r,this.transform.angle),u,n,l,c.predicate);if((!f||0!==this.collisionIndex.placeCollisionBox(m.getSymbolInstanceIconSize(g,this.transform.zoom,p),f,we(v.x,v.y,a,r,this.transform.angle),u,n,l,c.predicate).box.length)&&x.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID]&&this.prevPlacement.placements[h.crossTileID].text&&(t=this.prevPlacement.variableOffsets[h.crossTileID].anchor),this.variableOffsets[h.crossTileID]={textOffset:_,width:i,height:o,anchor:e,textBoxScale:s,prevAnchor:t},this.markUsedJustification(m,e,h,d),m.allowVerticalPlacement&&(this.markUsedOrientation(m,d,h),this.placedOrientations[h.crossTileID]=d),{shift:v,placedGlyphBoxes:x}}}placeLayerBucketPart(t,i,o){const{bucket:s,layout:a,posMatrix:r,textLabelPlaneMatrix:n,labelToScreenMatrix:l,textPixelRatio:c,holdingForFade:u,collisionBoxArray:h,partiallyEvaluatedTextSize:p,partiallyEvaluatedIconSize:m,collisionGroup:d}=t.parameters,f=a.get("text-optional"),y=a.get("icon-optional"),g=a.get("text-allow-overlap"),_=a.get("icon-allow-overlap"),b="map"===a.get("text-rotation-alignment"),v="map"===a.get("text-pitch-alignment"),x="none"!==a.get("icon-text-fit"),L="viewport-y"===a.get("symbol-z-order"),I=g&&(_||!s.hasIconData()||y),w=_&&(g||!s.hasTextData()||f);!s.collisionArrays&&h&&s.deserializeCollisionBoxes(h),o&&s.updateCollisionDebugBuffers(this.transform.zoom,h);const q=(t,h,L)=>{if(i[t.crossTileID])return;if(u)return void(this.placements[t.crossTileID]=new be(!1,!1,!1));let q=!1,F=!1,E=!0,T=null,C={box:null,offscreen:null},z={box:null,offscreen:null},A=null,P=null,B=null,M=0,D=0,S=0;L.textFeatureIndex?M=L.textFeatureIndex:t.useRuntimeCollisionCircles&&(M=t.featureIndex),L.verticalTextFeatureIndex&&(D=L.verticalTextFeatureIndex);const k=e=>{(this.transform.elevation||e.elevation)&&(e.elevation=this.transform.elevation?this.transform.elevation.getAtTileOffset(this.retainedQueryData[s.bucketInstanceId].tileID,e.anchorPointX,e.anchorPointY):0)},U=L.textBox;if(U){k(U);const i=i=>{let o=e.WritingMode.horizontal;if(s.allowVerticalPlacement&&!i&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[t.crossTileID];e&&(this.placedOrientations[t.crossTileID]=e,o=e,this.markUsedOrientation(s,o,t))}return o},o=(i,o)=>{if(s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&L.verticalTextBox){for(const t of s.writingModes)if(t===e.WritingMode.vertical?(C=o(),z=C):C=i(),C&&C.box&&C.box.length)break}else C=i()};if(a.get("text-variable-anchor")){let n=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[t.crossTileID]){const e=this.prevPlacement.variableOffsets[t.crossTileID];n.indexOf(e.anchor)>0&&(n=n.filter(t=>t!==e.anchor),n.unshift(e.anchor))}const l=(e,i,o)=>{const a=t.textBoxScale,l=(e.x2-e.x1)*a+2*e.padding,u=(e.y2-e.y1)*a+2*e.padding,f=x&&!_?i:null;f&&k(f);let y={box:[],offscreen:!1};const L=g?2*n.length:n.length;for(let i=0;i<L;++i){const g=this.attemptAnchorPlacement(n[i%n.length],e,l,u,a,b,v,c,r,d,i>=n.length,t,h,s,o,f,p,m);if(g&&(y=g.placedGlyphBoxes,y&&y.box&&y.box.length)){q=!0,T=g.shift;break}}return y};o(()=>l(U,L.iconBox,e.WritingMode.horizontal),()=>{const i=L.verticalTextBox;return i&&k(i),s.allowVerticalPlacement&&!(C&&C.box&&C.box.length)&&t.numVerticalGlyphVertices>0&&i?l(i,L.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),C&&(q=C.box,E=C.offscreen);const u=i(C&&C.box);if(!q&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[t.crossTileID];e&&(this.variableOffsets[t.crossTileID]=e,this.markUsedJustification(s,e.anchor,t,u))}}else{const a=(i,o)=>{const a=s.getSymbolInstanceTextSize(p,t,this.transform.zoom,h),n=this.collisionIndex.placeCollisionBox(a,i,new e.Point(0,0),g,c,r,d.predicate);return n&&n.box&&n.box.length&&(this.markUsedOrientation(s,o,t),this.placedOrientations[t.crossTileID]=o),n};o(()=>a(U,e.WritingMode.horizontal),()=>{const i=L.verticalTextBox;return s.allowVerticalPlacement&&t.numVerticalGlyphVertices>0&&i?(k(i),a(i,e.WritingMode.vertical)):{box:null,offscreen:null}}),i(C&&C.box&&C.box.length)}}if(A=C,q=A&&A.box&&A.box.length>0,E=A&&A.offscreen,t.useRuntimeCollisionCircles){const i=s.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex),c=e.evaluateSizeForFeature(s.textSizeData,p,i),u=a.get("text-padding");P=this.collisionIndex.placeCollisionCircles(g,i,s.lineVertexArray,s.glyphOffsetArray,c,r,n,l,o,v,d.predicate,t.collisionCircleDiameter,u,this.retainedQueryData[s.bucketInstanceId].tileID),q=g||P.circles.length>0&&!P.collisionDetected,E=E&&P.offscreen}if(L.iconFeatureIndex&&(S=L.iconFeatureIndex),L.iconBox){const t=t=>{k(t);const i=x&&T?we(T.x,T.y,b,v,this.transform.angle):new e.Point(0,0),o=s.getSymbolInstanceIconSize(m,this.transform.zoom,h);return this.collisionIndex.placeCollisionBox(o,t,i,_,c,r,d.predicate)};z&&z.box&&z.box.length&&L.verticalIconBox?(B=t(L.verticalIconBox),F=B.box.length>0):(B=t(L.iconBox),F=B.box.length>0),E=E&&B.offscreen}const R=f||0===t.numHorizontalGlyphVertices&&0===t.numVerticalGlyphVertices,O=y||0===t.numIconVertices;if(R||O?O?R||(F=F&&q):q=F&&q:F=q=F&&q,q&&A&&A.box&&this.collisionIndex.insertCollisionBox(A.box,a.get("text-ignore-placement"),s.bucketInstanceId,z&&z.box&&D?D:M,d.ID),F&&B&&this.collisionIndex.insertCollisionBox(B.box,a.get("icon-ignore-placement"),s.bucketInstanceId,S,d.ID),P&&(q&&this.collisionIndex.insertCollisionCircles(P.circles,a.get("text-ignore-placement"),s.bucketInstanceId,M,d.ID),o)){const e=s.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new ve);for(let e=0;e<P.circles.length;e+=4)t.circles.push(P.circles[e+0]),t.circles.push(P.circles[e+1]),t.circles.push(P.circles[e+2]),t.circles.push(P.collisionDetected?1:0)}this.placements[t.crossTileID]=new be(q||I,F||w,E||s.justReloaded),i[t.crossTileID]=!0};if(L){const e=s.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const i=e[t];q(s.symbolInstances.get(i),i,s.collisionArrays[i])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)q(s.symbolInstances.get(e),e,s.collisionArrays[e]);if(o&&s.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[s.bucketInstanceId];e.invert(t.invProjMatrix,r),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}markUsedJustification(t,i,o,s){let a;a=s===e.WritingMode.vertical?o.verticalPlacedTextSymbolIndex:{left:o.leftJustifiedTextSymbolIndex,center:o.centerJustifiedTextSymbolIndex,right:o.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(i)];const r=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex,o.verticalPlacedTextSymbolIndex];for(const e of r)e>=0&&(t.text.placedSymbolArray.get(e).crossTileID=a>=0&&e!==a?0:o.crossTileID)}markUsedOrientation(t,i,o){const s=i===e.WritingMode.horizontal||i===e.WritingMode.horizontalOnly?i:0,a=i===e.WritingMode.vertical?i:0,r=[o.leftJustifiedTextSymbolIndex,o.centerJustifiedTextSymbolIndex,o.rightJustifiedTextSymbolIndex];for(const e of r)t.text.placedSymbolArray.get(e).placedOrientation=s;o.verticalPlacedTextSymbolIndex&&(t.text.placedSymbolArray.get(o.verticalPlacedTextSymbolIndex).placedOrientation=a)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let i=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const o=t?t.symbolFadeChange(e):1,s=t?t.opacities:{},a=t?t.variableOffsets:{},r=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],a=s[e];a?(this.opacities[e]=new _e(a,o,t.text,t.icon),i=i||t.text!==a.text.placed||t.icon!==a.icon.placed):(this.opacities[e]=new _e(null,o,t.text,t.icon,t.skipFade),i=i||t.text||t.icon)}for(const e in s){const t=s[e];if(!this.opacities[e]){const s=new _e(t,o,!1,!1);s.isHidden()||(this.opacities[e]=s,i=i||t.text.placed||t.icon.placed)}}for(const e in a)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=a[e]);for(const e in r)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=r[e]);i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const i={};for(const o of t){const t=o.getBucket(e);t&&o.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,i,o.collisionBoxArray)}}updateBucketOpacities(t,i,o){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const s=t.layers[0].layout,a=new _e(null,0,!1,!1,!0),r=s.get("text-allow-overlap"),n=s.get("icon-allow-overlap"),l=s.get("text-variable-anchor"),c="map"===s.get("text-rotation-alignment"),u="map"===s.get("text-pitch-alignment"),h="none"!==s.get("icon-text-fit"),p=new _e(null,0,r&&(n||!t.hasIconData()||s.get("icon-optional")),n&&(r||!t.hasTextData()||s.get("text-optional")),!0);!t.collisionArrays&&o&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(o);const m=(e,t,i)=>{for(let o=0;o<t/4;o++)e.opacityVertexArray.emplaceBack(i)};for(let o=0;o<t.symbolInstances.length;o++){const s=t.symbolInstances.get(o),{numHorizontalGlyphVertices:r,numVerticalGlyphVertices:n,crossTileID:d}=s;let f=this.opacities[d];i[d]?f=a:f||(f=p,this.opacities[d]=f),i[d]=!0;const y=s.numIconVertices>0,g=this.placedOrientations[s.crossTileID],_=g===e.WritingMode.vertical,b=g===e.WritingMode.horizontal||g===e.WritingMode.horizontalOnly;if(r>0||n>0){const e=Me(f.text);m(t.text,r,_?De:e),m(t.text,n,b?De:e);const i=f.text.isHidden();[s.rightJustifiedTextSymbolIndex,s.centerJustifiedTextSymbolIndex,s.leftJustifiedTextSymbolIndex].forEach(e=>{e>=0&&(t.text.placedSymbolArray.get(e).hidden=i||_?1:0)}),s.verticalPlacedTextSymbolIndex>=0&&(t.text.placedSymbolArray.get(s.verticalPlacedTextSymbolIndex).hidden=i||b?1:0);const o=this.variableOffsets[s.crossTileID];o&&this.markUsedJustification(t,o.anchor,s,g);const a=this.placedOrientations[s.crossTileID];a&&(this.markUsedJustification(t,"left",s,a),this.markUsedOrientation(t,a,s))}if(y){const e=Me(f.icon),i=!(h&&s.verticalPlacedIconSymbolIndex&&_);s.placedIconSymbolIndex>=0&&(m(t.icon,s.numIconVertices,i?e:De),t.icon.placedSymbolArray.get(s.placedIconSymbolIndex).hidden=f.icon.isHidden()),s.verticalPlacedIconSymbolIndex>=0&&(m(t.icon,s.numVerticalIconVertices,i?De:e),t.icon.placedSymbolArray.get(s.verticalPlacedIconSymbolIndex).hidden=f.icon.isHidden())}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const i=t.collisionArrays[o];if(i){let o=new e.Point(0,0);if(i.textBox||i.verticalTextBox){let e=!0;if(l){const t=this.variableOffsets[d];t?(o=Ie(t.anchor,t.width,t.height,t.textOffset,t.textBoxScale),c&&o._rotate(u?this.transform.angle:-this.transform.angle)):e=!1}i.textBox&&Fe(t.textCollisionBox.collisionVertexArray,f.text.placed,!e||_,o.x,o.y),i.verticalTextBox&&Fe(t.textCollisionBox.collisionVertexArray,f.text.placed,!e||b,o.x,o.y)}const s=Boolean(!b&&i.verticalIconBox);i.iconBox&&Fe(t.iconCollisionBox.collisionVertexArray,f.icon.placed,s,h?o.x:0,h?o.y:0),i.verticalIconBox&&Fe(t.iconCollisionBox.collisionVertexArray,f.icon.placed,!s,h?o.x:0,h?o.y:0)}}}if(t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const i=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*i>e}setStale(){this.stale=!0}}function Fe(e,t,i,o,s){e.emplaceBack(t?1:0,i?1:0,o||0,s||0),e.emplaceBack(t?1:0,i?1:0,o||0,s||0),e.emplaceBack(t?1:0,i?1:0,o||0,s||0),e.emplaceBack(t?1:0,i?1:0,o||0,s||0)}const Ee=Math.pow(2,25),Te=Math.pow(2,24),Ce=Math.pow(2,17),ze=Math.pow(2,16),Ae=Math.pow(2,9),Pe=Math.pow(2,8),Be=Math.pow(2,1);function Me(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,i=Math.floor(127*e.opacity);return i*Ee+t*Te+i*Ce+t*ze+i*Ae+t*Pe+i*Be+t}const De=0;class Se{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,i,o,s){const a=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(a,o,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,s())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((e,t)=>e.sortKey-t.sortKey));this._currentPartIndex<a.length;)if(t.placeLayerBucketPart(a[this._currentPartIndex],this._seenCrossTileIDs,i),this._currentPartIndex++,s())return!0;return!1}}class ke{constructor(e,t,i,o,s,a,r){this.placement=new qe(e,s,a,r),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=o,this._done=!1}isDone(){return this._done}continuePlacement(t,i,o){const s=e.browser.now(),a=()=>{const t=e.browser.now()-s;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=i[t[this._currentPlacementIndex]],s=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=s)&&(!e.maxzoom||e.maxzoom>s)){if(this._inProgressLayer||(this._inProgressLayer=new Se(e)),this._inProgressLayer.continuePlacement(o[e.source],this.placement,this._showCollisionBoxes,e,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Ue=512/e.EXTENT/2;class Re{constructor(e,t,i){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=i;for(let i=0;i<t.length;i++){const o=t.get(i),s=o.key;this.indexedSymbolInstances[s]||(this.indexedSymbolInstances[s]=[]),this.indexedSymbolInstances[s].push({crossTileID:o.crossTileID,coord:this.getScaledCoordinates(o,e)})}}getScaledCoordinates(t,i){const o=Ue/Math.pow(2,i.canonical.z-this.tileID.canonical.z);return{x:Math.floor((i.canonical.x*e.EXTENT+t.anchorX)*o),y:Math.floor((i.canonical.y*e.EXTENT+t.anchorY)*o)}}findMatches(e,t,i){const o=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let s=0;s<e.length;s++){const a=e.get(s);if(a.crossTileID)continue;const r=this.indexedSymbolInstances[a.key];if(!r)continue;const n=this.getScaledCoordinates(a,t);for(const e of r)if(Math.abs(e.coord.x-n.x)<=o&&Math.abs(e.coord.y-n.y)<=o&&!i[e.crossTileID]){i[e.crossTileID]=!0,a.crossTileID=e.crossTileID;break}}}}class Oe{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ne{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const i=this.indexes[e],o={};for(const e in i){const s=i[e];s.tileID=s.tileID.unwrapTo(s.tileID.wrap+t),o[s.tileID.key]=s}this.indexes[e]=o}this.lng=e}addBucket(e,t,i){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const o=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const s=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in s){const a=s[i];a.tileID.isChildOf(e)&&a.findMatches(t.symbolInstances,e,o)}else{const a=s[e.scaledTo(Number(i)).key];a&&a.findMatches(t.symbolInstances,e,o)}}for(let e=0;e<t.symbolInstances.length;e++){const s=t.symbolInstances.get(e);s.crossTileID||(s.crossTileID=i.generate(),o[s.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Re(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const i in t.indexedSymbolInstances)for(const o of t.indexedSymbolInstances[i])delete this.usedCrossTileIDs[e][o.crossTileID]}removeStaleBuckets(e){let t=!1;for(const i in this.indexes){const o=this.indexes[i];for(const s in o)e[o[s].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,o[s]),delete o[s],t=!0)}return t}}class $e{constructor(){this.layerIndexes={},this.crossTileIDs=new Oe,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,i){let o=this.layerIndexes[e.id];void 0===o&&(o=this.layerIndexes[e.id]=new Ne);let s=!1;const a={};o.handleWrapJump(i);for(const i of t){const t=i.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),o.addBucket(i.tileID,t,this.crossTileIDs)&&(s=!0),a[t.bucketInstanceId]=!0)}return o.removeStaleBuckets(a)&&(s=!0),s}pruneUnusedLayers(e){const t={};e.forEach(e=>{t[e]=!0});for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}const Ve=(t,i)=>e.emitValidationErrors(t,i&&i.filter(e=>"source.canvas"!==e.identifier)),Ge=e.pick(Z,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain"]),je=e.pick(Z,["setCenter","setZoom","setBearing","setPitch"]),Ze=function(){const t={},i=e.styleSpec.$version;for(const o in e.styleSpec.$root){const s=e.styleSpec.$root[o];if(s.required){let e=null;e="version"===o?i:"array"===s.type?[]:{},null!=e&&(t[o]=e)}}return t}();class He extends e.Evented{constructor(t,i={}){super(),this.map=t,this.dispatcher=new w(V(),this),this.imageManager=new h,this.imageManager.setEventedParent(this),this.glyphManager=new _(t._requestManager,i.localIdeographFontFamily),this.lineAtlas=new I(256,512),this.crossTileSymbolIndex=new $e,this._layers={},this._num3DLayers=0,this._serializedLayers={},this._order=[],this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const o=this;this._rtlTextPluginCallback=He.registerForPluginStateChange(t=>{o.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(t,i)=>{if(e.triggerPluginCompletionEvent(t),i&&i.every(e=>e))for(const e in o._sourceCaches){const t=o._sourceCaches[e],i=t.getSource().type;"vector"!==i&&"geojson"!==i||t.reload()}})}),this.on("data",e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const e in this._layers){const i=this._layers[e];i.source===t.id&&this._validateLayer(i)}})}loadURL(t,i={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const o="boolean"==typeof i.validate?i.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,i.accessToken);const s=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(s,(t,i)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):i&&this._load(i,o)})}loadJSON(t,i={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(()=>{this._request=null,this._load(t,!1!==i.validate)})}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Ze,!1)}_load(t,i){if(i&&Ve(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=t;for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(t.glyphs);const o=j(this.stylesheet.layers);this._order=o.map(e=>e.id),this._layers={},this._serializedLayers={};for(let t of o)t=e.createStyleLayer(t),t.setEventedParent(this,{layer:{id:t.id}}),this._layers[t.id]=t,this._serializedLayers[t.id]=t.serialize(),t.is3D()&&this._num3DLayers++;this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new v(this.stylesheet.light),this.stylesheet.terrain&&this._createTerrain(this.stylesheet.terrain),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}_loadSprite(t){this._spriteRequest=function(t,i,o){let s,a,r;const n=e.browser.devicePixelRatio>1?"@2x":"";let l=e.getJSON(i.transformRequest(i.normalizeSpriteURL(t,n,".json"),e.ResourceType.SpriteJSON),(e,t)=>{l=null,r||(r=e,s=t,u())}),c=e.getImage(i.transformRequest(i.normalizeSpriteURL(t,n,".png"),e.ResourceType.SpriteImage),(e,t)=>{c=null,r||(r=e,a=t,u())});function u(){if(r)o(r);else if(s&&a){const t=e.browser.getImageData(a),i={};for(const o in s){const{width:a,height:r,x:n,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:p,content:m}=s[o],d=new e.RGBAImage({width:a,height:r});e.RGBAImage.copy(t,d,{x:n,y:l},{x:0,y:0},{width:a,height:r}),i[o]={data:d,pixelRatio:u,sdf:c,stretchX:h,stretchY:p,content:m}}o(null,i)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,(t,i)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(i)for(const e in i)this.imageManager.addImage(e,i[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))})}_validateLayer(t){const i=this.getSource(t.source);if(!i)return;const o=t.sourceLayer;o&&("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(o))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${o}" does not exist on source "${i.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const i of e){const e=this._layers[i];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const i=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);(e.length||i.length)&&this._updateWorkerLayers(e,i);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this._resetUpdates()}const o={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];o[e]=t.used,t.used=!1}for(const e of this._order){const i=this._layers[e];if(i.recalculate(t,this._availableImages),!i.isHidden(t.zoom)){const e=this._getLayerSourceCache(i);e&&(e.used=!0)}const o=this.map.painter;if(o){const e=i.getProgramIds();if(!e)continue;const s=i.getProgramConfiguration(t.zoom);for(const t of e)o.useProgram(t,s)}}for(const t in o){const i=this._sourceCaches[t];o[t]!==i.used&&i.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:i.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.z=t.zoom,i&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(t){if(this._checkLoaded(),Ve(this,e.validateStyle(t)))return!1;(t=e.clone$1(t)).layers=j(t.layers);const i=function(t,i){if(!t)return[{command:Z.setStyle,args:[i]}];let o=[];try{if(!e.deepEqual(t.version,i.version))return[{command:Z.setStyle,args:[i]}];e.deepEqual(t.center,i.center)||o.push({command:Z.setCenter,args:[i.center]}),e.deepEqual(t.zoom,i.zoom)||o.push({command:Z.setZoom,args:[i.zoom]}),e.deepEqual(t.bearing,i.bearing)||o.push({command:Z.setBearing,args:[i.bearing]}),e.deepEqual(t.pitch,i.pitch)||o.push({command:Z.setPitch,args:[i.pitch]}),e.deepEqual(t.sprite,i.sprite)||o.push({command:Z.setSprite,args:[i.sprite]}),e.deepEqual(t.glyphs,i.glyphs)||o.push({command:Z.setGlyphs,args:[i.glyphs]}),e.deepEqual(t.transition,i.transition)||o.push({command:Z.setTransition,args:[i.transition]}),e.deepEqual(t.light,i.light)||o.push({command:Z.setLight,args:[i.light]}),e.deepEqual(t.terrain,i.terrain)||o.push({command:Z.setTerrain,args:[i.terrain]});const s={},a=[];!function(t,i,o,s){let a;for(a in i=i||{},t=t||{})t.hasOwnProperty(a)&&(i.hasOwnProperty(a)||X(a,o,s));for(a in i)i.hasOwnProperty(a)&&(t.hasOwnProperty(a)?e.deepEqual(t[a],i[a])||("geojson"===t[a].type&&"geojson"===i[a].type&&W(t,i,a)?o.push({command:Z.setGeoJSONSourceData,args:[a,i[a].data]}):Q(a,i,o,s)):H(a,i,o))}(t.sources,i.sources,a,s);const r=[];t.layers&&t.layers.forEach(e=>{s[e.source]?o.push({command:Z.removeLayer,args:[e.id]}):r.push(e)}),o=o.concat(a),function(t,i,o){i=i||[];const s=(t=t||[]).map(J),a=i.map(J),r=t.reduce(Y,{}),n=i.reduce(Y,{}),l=s.slice(),c=Object.create(null);let u,h,p,m,d,f,y;for(u=0,h=0;u<s.length;u++)p=s[u],n.hasOwnProperty(p)?h++:(o.push({command:Z.removeLayer,args:[p]}),l.splice(l.indexOf(p,h),1));for(u=0,h=0;u<a.length;u++)p=a[a.length-1-u],l[l.length-1-u]!==p&&(r.hasOwnProperty(p)?(o.push({command:Z.removeLayer,args:[p]}),l.splice(l.lastIndexOf(p,l.length-h),1)):h++,f=l[l.length-u],o.push({command:Z.addLayer,args:[n[p],f]}),l.splice(l.length-u,0,p),c[p]=!0);for(u=0;u<a.length;u++)if(p=a[u],m=r[p],d=n[p],!c[p]&&!e.deepEqual(m,d))if(e.deepEqual(m.source,d.source)&&e.deepEqual(m["source-layer"],d["source-layer"])&&e.deepEqual(m.type,d.type)){for(y in K(m.layout,d.layout,o,p,null,Z.setLayoutProperty),K(m.paint,d.paint,o,p,null,Z.setPaintProperty),e.deepEqual(m.filter,d.filter)||o.push({command:Z.setFilter,args:[p,d.filter]}),e.deepEqual(m.minzoom,d.minzoom)&&e.deepEqual(m.maxzoom,d.maxzoom)||o.push({command:Z.setLayerZoomRange,args:[p,d.minzoom,d.maxzoom]}),m)m.hasOwnProperty(y)&&"layout"!==y&&"paint"!==y&&"filter"!==y&&"metadata"!==y&&"minzoom"!==y&&"maxzoom"!==y&&(0===y.indexOf("paint.")?K(m[y],d[y],o,p,y.slice(6),Z.setPaintProperty):e.deepEqual(m[y],d[y])||o.push({command:Z.setLayerProperty,args:[p,y,d[y]]}));for(y in d)d.hasOwnProperty(y)&&!m.hasOwnProperty(y)&&"layout"!==y&&"paint"!==y&&"filter"!==y&&"metadata"!==y&&"minzoom"!==y&&"maxzoom"!==y&&(0===y.indexOf("paint.")?K(m[y],d[y],o,p,y.slice(6),Z.setPaintProperty):e.deepEqual(m[y],d[y])||o.push({command:Z.setLayerProperty,args:[p,y,d[y]]}))}else o.push({command:Z.removeLayer,args:[p]}),f=l[l.lastIndexOf(p)+1],o.push({command:Z.addLayer,args:[d,f]})}(r,i.layers,o)}catch(e){console.warn("Unable to compute style diff:",e),o=[{command:Z.setStyle,args:[i]}]}return o}(this.serialize(),t).filter(e=>!(e.command in je));if(0===i.length)return!1;const o=i.filter(e=>!(e.command in Ge));if(o.length>0)throw new Error(`Unimplemented: ${o.map(e=>e.command).join(", ")}.`);return i.forEach(e=>{"setTransition"!==e.command&&this[e.command].apply(this,e.args)}),this.stylesheet=t,!0}addImage(t,i){if(this.getImage(t))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(t,i),this._afterImageUpdated(t)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){if(!this.getImage(t))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(t),this._afterImageUpdated(t)}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(t,i,o={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!i.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(i).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(e.validateStyle.source,"sources."+t,i,null,o))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const s=M(t,i,this.dispatcher,this);s.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:s.serialize(),sourceId:t}));const a=i=>{const o=(i?"symbol:":"other:")+t,a=this._sourceCaches[o]=new e.SourceCache(o,s,i);(i?this._symbolSourceCaches:this._otherSourceCaches)[t]=a,a.style=this,a.onAdd(this.map)};a(!1),"vector"!==i.type&&"geojson"!==i.type||a(!0),s.onAdd&&s.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const i=this.getSource(t);if(void 0===i)throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${i}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const o=this._getSourceCaches(t);for(const t of o)delete this._sourceCaches[t.id],delete this._updatedSources[t.id],t.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t.getSource().id})),t.setEventedParent(null),t.clearTiles();delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],i.setEventedParent(null),i.onRemove&&i.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}addLayer(t,i,o={}){this._checkLoaded();const s=t.id;if(this.getLayer(s))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${s}" already exists on this map`)));let a;if("custom"===t.type){if(Ve(this,e.validateCustomStyleLayer(t)))return;a=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(s,t.source),t=e.clone$1(t),t=e.extend(t,{source:s})),this._validate(e.validateStyle.layer,"layers."+s,t,{arrayIndex:-1},o))return;a=e.createStyleLayer(t),this._validateLayer(a),a.setEventedParent(this,{layer:{id:s}}),this._serializedLayers[a.id]=a.serialize(),a.is3D()&&this._num3DLayers++}const r=i?this._order.indexOf(i):this._order.length;if(i&&-1===r)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" does not exist on this map.`)));this._order.splice(r,0,s),this._layerOrderChanged=!0,this._layers[s]=a;const n=this._getLayerSourceCache(a);if(this._removedLayers[s]&&a.source&&n&&"custom"!==a.type){const e=this._removedLayers[s];delete this._removedLayers[s],e.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",n.pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map)}moveLayer(t,i){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===i)return;const o=this._order.indexOf(t);this._order.splice(o,1);const s=i?this._order.indexOf(i):this._order.length;i&&-1===s?this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" does not exist on this map.`))):(this._order.splice(s,0,t),this._layerOrderChanged=!0)}removeLayer(t){this._checkLoaded();const i=this._layers[t];if(!i)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));i.setEventedParent(null),i.is3D()&&this._num3DLayers--;const o=this._order.indexOf(t);this._order.splice(o,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=i,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],i.onRemove&&i.onRemove(this.map)}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}setLayerZoomRange(t,i,o){this._checkLoaded();const s=this.getLayer(t);s?s.minzoom===i&&s.maxzoom===o||(null!=i&&(s.minzoom=i),null!=o&&(s.maxzoom=o),this._updateLayer(s)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(t,i,o={}){this._checkLoaded();const s=this.getLayer(t);if(s){if(!e.deepEqual(s.filter,i))return null==i?(s.filter=void 0,void this._updateLayer(s)):void(this._validate(e.validateStyle.filter,`layers.${s.id}.filter`,i,null,o)||(s.filter=e.clone$1(i),this._updateLayer(s)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){return e.clone$1(this.getLayer(t).filter)}setLayoutProperty(t,i,o,s={}){this._checkLoaded();const a=this.getLayer(t);a?e.deepEqual(a.getLayoutProperty(i),o)||(a.setLayoutProperty(i,o,s),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,i){const o=this.getLayer(t);if(o)return o.getLayoutProperty(i);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(t,i,o,s={}){this._checkLoaded();const a=this.getLayer(t);a?e.deepEqual(a.getPaintProperty(i),o)||(a.setPaintProperty(i,o,s)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[t]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){return this.getLayer(e).getPaintProperty(t)}setFeatureState(t,i){this._checkLoaded();const o=t.source,s=t.sourceLayer,a=this.getSource(o);if(void 0===a)return void this.fire(new e.ErrorEvent(new Error(`The source '${o}' does not exist in the map's style.`)));const r=a.type;if("geojson"===r&&s)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===r&&!s)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const n=this._getSourceCaches(o);for(const e of n)e.setFeatureState(s,t.id,i)}removeFeatureState(t,i){this._checkLoaded();const o=t.source,s=this.getSource(o);if(void 0===s)return void this.fire(new e.ErrorEvent(new Error(`The source '${o}' does not exist in the map's style.`)));const a=s.type,r="vector"===a?t.sourceLayer:void 0;if("vector"===a&&!r)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(i&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const n=this._getSourceCaches(o);for(const e of n)e.removeFeatureState(r,t.id,i)}getFeatureState(t){this._checkLoaded();const i=t.source,o=t.sourceLayer,s=this.getSource(i);if(void 0!==s){if("vector"!==s.type||o)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(i)[0].getFeatureState(o,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const i=this._sourceCaches[e].getSource();t[i.id]||(t[i.id]=i.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.stylesheet.terrain,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t,layers:this._serializeLayers(this._order)},e=>void 0!==e)}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,i={},o=[];for(let s=this._order.length-1;s>=0;s--){const a=this._order[s];if(t(a)){i[a]=s;for(const t of e){const e=t[a];if(e)for(const t of e)o.push(t)}}}o.sort((e,t)=>t.intersectionZ-e.intersectionZ);const s=[];for(let a=this._order.length-1;a>=0;a--){const r=this._order[a];if(t(r))for(let e=o.length-1;e>=0;e--){const t=o[e].feature;if(i[t.layer.id]<a)break;s.push(t),o.pop()}else for(const t of e){const e=t[r];if(e)for(const t of e)s.push(t.feature)}}return s}queryRenderedFeatures(t,i,o){i&&i.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",i.filter,null,i);const s={};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of i.layers){const i=this._layers[t];if(!i)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];s[i.source]=!0}}const a=[];i.availableImages=this._availableImages;const r=i&&i.layers?i.layers.some(e=>{const t=this.getLayer(e);return t&&t.is3D()}):this.has3DLayers(),n=F.createFromScreenPoints(t,o);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;i.layers&&!s[t]||a.push(S(this._sourceCaches[e],this._layers,this._serializedLayers,n,i,o,r,!!this.map._showQueryGeometry))}return this.placement&&a.push(function(e,t,i,o,s,a,r){const n={},l=a.queryRenderedSymbols(o),c=[];for(const e of Object.keys(l).map(Number))c.push(r[e]);c.sort(U);for(const i of c){const o=i.featureIndex.lookupSymbolFeatures(l[i.bucketInstanceId],t,i.bucketIndex,i.sourceLayerIndex,s.filter,s.layers,s.availableImages,e);for(const e in o){const t=n[e]=n[e]||[],s=o[e];s.sort((e,t)=>{const o=i.featureSortOrder;if(o){const i=o.indexOf(e.featureIndex);return o.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex});for(const e of s)t.push(e)}}for(const t in n)n[t].forEach(o=>{const s=o.feature,a=i(e[t]).getFeatureState(s.layer["source-layer"],s.id);s.source=s.layer.source,s.layer["source-layer"]&&(s.sourceLayer=s.layer["source-layer"]),s.state=a});return n}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),n.screenGeometry,i,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(a)}querySourceFeatures(t,i){i&&i.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",i.filter,null,i);const o=this._getSourceCaches(t);let s=[];for(const e of o)s=s.concat(k(e,i));return s}addSourceType(e,t,i){return He.getSourceType(e)?i(new Error(`A source type called "${e}" already exists.`)):(He.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},i):i(null,null))}getLight(){return this.light.getLight()}setLight(t,i={}){this._checkLoaded();const o=this.light.getLight();let s=!1;for(const i in t)if(!e.deepEqual(t[i],o[i])){s=!0;break}if(!s)return;const a={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(t,i),this.light.updateTransitions(a)}setTerrain(t){if(this._checkLoaded(),!t)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),void this._force3DLayerUpdate();if("object"==typeof t.source){const i="terrain-dem-src";this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})}if(!this._validate(e.validateStyle.terrain,"terrain",t))if(this.terrain){const i=this.terrain,o=i.get();for(const s in t)if(!e.deepEqual(t[s],o[s])){i.set(t),this.stylesheet.terrain=t;const o={now:e.browser.now(),transition:e.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(o);break}}else this._createTerrain(t)}_createTerrain(t){const i=this.terrain=new L(t);this.stylesheet.terrain=t,this.dispatcher.broadcast("enableTerrain",!0),this._force3DLayerUpdate();const o={now:e.browser.now(),transition:e.extend({duration:0},this.stylesheet.transition)};i.updateTransitions(o)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_validate(t,i,o,s,a={}){return(!a||!1!==a.validate)&&Ve(this,t.call(e.validateStyle,e.extend({key:i,style:this.serialize(),value:o,styleSpec:e.styleSpec},s)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const e of t)e.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const e of t)e.resume(),e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,i,o,s,a=!1){let r=!1,n=!1;const l={};for(const e of this._order){const i=this._layers[e];if("symbol"!==i.type)continue;if(!l[i.source]){const e=this._getLayerSourceCache(i);if(!e)continue;l[i.source]=e.getRenderableIds(!0).map(t=>e.getTileByID(t)).sort((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1))}const o=this.crossTileSymbolIndex.addLayer(i,l[i.source],t.center.lng);r=r||o}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((a=a||this._layerOrderChanged||0===o)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),t.zoom))&&(this.pauseablePlacement=new ke(t,this._order,a,i,o,s,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),n=!0),r&&this.pauseablePlacement.placement.setStale()),n||r)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,i){this.imageManager.getImages(t.icons,i),this._updateTilesForChangedImages();const o=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};o(this._otherSourceCaches[t.source]),o(this._symbolSourceCaches[t.source])}getGlyphs(e,t,i){this.glyphManager.getGlyphs(t.stacks,i)}getResource(t,i,o){return e.makeRequest(i,o)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}has3DLayers(){return this._num3DLayers>0}}He.getSourceType=function(e){return B[e]},He.setSourceType=function(e,t){B[e]=t},He.registerForPluginStateChange=e.registerForPluginStateChange;var Xe="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}";let Qe={};Qe=Et("","#ifdef TERRAIN\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}float prevElevation(vec2 apos) {float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {return currentElevation(apos);}\n#endif\nfloat unpack_depth(vec4 rgba_depth)\n{const vec4 bit_shift=vec4(1.0/(256.0*256.0*256.0),1.0/(256.0*256.0),1.0/256.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;vec4 bounds=vec4(d,vec2(1.0)-d);h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*word/7.3;}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",!0);const We=Et("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nconst float PI=3.141592653589793;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const float PI=3.141592653589793;const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),Ke=Et("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Je=Et("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ye=Et("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float height=circle_elevation(circle_center);vec4 world_center=vec4(circle_center,height,1);vec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);vec4 occlusion_world_center=vec4(circle_center,cantilevered_height,1);vec4 occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nvec4 occlusion_world_center=world_center;vec4 occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),et=Et("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),tt=Et("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}"),it=Et("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),ot=Et("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=u_matrix*vec4(a_pos,elevation(a_pos),1.0);gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),st=Et("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),at=Et("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);}"),rt=Et("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),nt=Et("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),lt=Et("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),ct=Et("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),ut=Et("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,t > 0.0 ? height : base,1);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),ht=Et("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;\n#ifdef TERRAIN\nvec2 centroid_pos=a_centroid_pos;bool flat_roof=centroid_pos.x !=0.0;float ele=elevation(pos_nx.xy);float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);gl_Position=mix(u_matrix*vec4(pos_nx.xy,h,1),AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(pos_nx.xy,z,1);\n#endif\nvec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),pt=Et("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),mt=Et("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),dt=Et("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),ft=Et("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_width2=vec2(outset,inset);}"),yt=Et("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),gt=Et("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),_t=Et("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),bt=Et("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));}"),vt=Et("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),xt=Et("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}float h=elevation(a_pos);vec4 projectedPoint=u_matrix*vec4(a_pos,h,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),h,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h,1.0);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale);\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\nfloat occlusion_fade=occlusionFade(projectedPoint);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projectedPoint.w <=0.0 || occlusion_fade==0.0));float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),Lt=Et("uniform sampler2D u_image0;varying vec2 v_pos0;void main() {gl_FragColor=texture2D(u_image0,v_pos0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;const float skirtOffset=24575.0;void main() {v_pos0=a_texture_pos/8192.0;float skirt=float(a_pos.x >=skirtOffset);float elevation=elevation(a_texture_pos)-skirt*u_skirt_height;vec2 decodedPos=a_pos-vec2(skirt*skirtOffset,0.0);gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);}"),It=Et("#ifdef GL_ES\nprecision highp float;\n#endif\nvec4 pack_depth(float ndc_z) {float depth=ndc_z*0.5+0.5;const vec4 bit_shift=vec4(256.0*256.0*256.0,256.0*256.0,256.0,1.0);const vec4 bit_mask =vec4(0.0,1.0/256.0,1.0/256.0,1.0/256.0);vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying float v_depth;void main() {float elevation=elevation(a_texture_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),wt=Et("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Xe),qt=Et("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform lowp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(vec3(p.xyx)*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract(vec3((p3.x+p3.y)*p3.z,(p3.x+p3.z)*p3.y,(p3.y+p3.z)*p3.x));}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;color.rgb+=rnd/255.0;return color;}void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5))*u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",Xe),Ft=Et("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}");function Et(e,t,i){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,s=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),a=e.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g),r=t.match(/uniform (highp |mediump |lowp )?([\w]+) ([\w]+)([\s]*)([\w]*)/g);let n=r?r.concat(a):a;i||(n=Qe.staticUniforms.concat(n));const l={};return{fragmentSource:e=e.replace(o,(e,t,i,o,s)=>(l[s]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${s}\nvarying ${i} ${o} ${s};\n#else\nuniform ${i} ${o} u_${s};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${s}\n    ${i} ${o} ${s} = u_${s};\n#endif\n`)),vertexSource:t=t.replace(o,(e,t,i,o,s)=>{const a="float"===o?"vec2":"vec4",r=s.match(/color/)?"color":a;return l[s]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${s}\nuniform lowp float u_${s}_t;\nattribute ${i} ${a} a_${s};\nvarying ${i} ${o} ${s};\n#else\nuniform ${i} ${o} u_${s};\n#endif\n`:"vec4"===r?`\n#ifndef HAS_UNIFORM_u_${s}\n    ${s} = a_${s};\n#else\n    ${i} ${o} ${s} = u_${s};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${s}\n    ${s} = unpack_mix_${r}(a_${s}, u_${s}_t);\n#else\n    ${i} ${o} ${s} = u_${s};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${s}\nuniform lowp float u_${s}_t;\nattribute ${i} ${a} a_${s};\n#else\nuniform ${i} ${o} u_${s};\n#endif\n`:"vec4"===r?`\n#ifndef HAS_UNIFORM_u_${s}\n    ${i} ${o} ${s} = a_${s};\n#else\n    ${i} ${o} ${s} = u_${s};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${s}\n    ${i} ${o} ${s} = unpack_mix_${r}(a_${s}, u_${s}_t);\n#else\n    ${i} ${o} ${s} = u_${s};\n#endif\n`}),staticAttributes:s,staticUniforms:n}}var Tt=Object.freeze({__proto__:null,get preludeTerrain(){return Qe},prelude:We,background:Ke,backgroundPattern:Je,circle:Ye,clippingMask:et,heatmap:tt,heatmapTexture:it,collisionBox:ot,collisionCircle:st,debug:at,fill:rt,fillOutline:nt,fillOutlinePattern:lt,fillPattern:ct,fillExtrusion:ut,fillExtrusionPattern:ht,hillshadePrepare:pt,hillshade:mt,line:dt,lineGradient:ft,linePattern:yt,lineSDF:gt,raster:_t,symbolIcon:bt,symbolSDF:vt,symbolTextAndIcon:xt,terrainRaster:Lt,terrainDepth:It,skybox:wt,skyboxGradient:qt,skyboxCapture:Ft});class Ct{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,t,i,o,s,a,r,n){this.context=e;let l=this.boundPaintVertexBuffers.length!==o.length;for(let e=0;!l&&e<o.length;e++)this.boundPaintVertexBuffers[e]!==o[e]&&(l=!0);e.extVertexArrayObject&&this.vao&&this.boundProgram===t&&this.boundLayoutVertexBuffer===i&&!l&&this.boundIndexBuffer===s&&this.boundVertexOffset===a&&this.boundDynamicVertexBuffer===r&&this.boundDynamicVertexBuffer2===n?(e.bindVertexArrayOES.set(this.vao),r&&r.bind(),s&&s.dynamicDraw&&s.bind(),n&&n.bind()):this.freshBind(t,i,o,s,a,r,n)}freshBind(e,t,i,o,s,a,r){let n;const l=e.numAttributes,c=this.context,u=c.gl;if(c.extVertexArrayObject)this.vao&&this.destroy(),this.vao=c.extVertexArrayObject.createVertexArrayOES(),c.bindVertexArrayOES.set(this.vao),n=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=o,this.boundVertexOffset=s,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=r;else{n=c.currentNumAttributes||0;for(let e=l;e<n;e++)u.disableVertexAttribArray(e)}t.enableAttributes(u,e);for(const t of i)t.enableAttributes(u,e);a&&a.enableAttributes(u,e),r&&r.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,s);for(const t of i)t.bind(),t.setVertexAttribPointers(u,e,s);a&&(a.bind(),a.setVertexAttribPointers(u,e,s)),o&&o.bind(),r&&(r.bind(),r.setVertexAttribPointers(u,e,s)),c.currentNumAttributes=l}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function zt(t,i){const o=Math.pow(2,i.canonical.z),s=i.canonical.y;return[new e.MercatorCoordinate(0,s/o).toLngLat().lat,new e.MercatorCoordinate(0,(s+1)/o).toLngLat().lat]}function At(t,i,o,s,a,r,n){const l=t.context,c=l.gl,u=o.fbo;if(!u)return;t.prepareDrawTile(i);const h=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const p=((e,t,i,o)=>{const s=i.paint.get("hillshade-shadow-color"),a=i.paint.get("hillshade-highlight-color"),r=i.paint.get("hillshade-accent-color");let n=i.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===i.paint.get("hillshade-illumination-anchor")&&(n-=e.transform.angle);const l=!e.options.moving;return{u_matrix:o||e.transform.calculatePosMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:zt(0,t.tileID),u_light:[i.paint.get("hillshade-exaggeration"),n],u_shadow:s,u_highlight:a,u_accent:r}})(t,o,s,t.terrain?i.posMatrix:null);h.draw(l,c.TRIANGLES,a,r,n,e.CullFaceMode.disabled,p,s.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}function Pt(t,i,o){if(!i.needsDEMTextureUpload)return;const s=t.context,a=s.gl;s.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||t.getTileTexture(o.stride);const r=o.getPixels();i.demTexture?i.demTexture.update(r,{premultiply:!1}):i.demTexture=new e.Texture(s,r,a.RGBA,{premultiply:!1}),i.needsDEMTextureUpload=!1}function Bt(t,i,o,s,a,r){const n=t.context,l=n.gl;if(!i.dem)return;const c=i.dem;if(n.activeTexture.set(l.TEXTURE1),Pt(t,i,c),!i.demTexture)return;i.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;n.activeTexture.set(l.TEXTURE0);let h=i.fbo;if(!h){const t=new e.Texture(n,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),h=i.fbo=n.createFramebuffer(u,u,!0),h.colorAttachment.set(t.texture)}n.bindFramebuffer.set(h.framebuffer),n.viewport.set([0,0,u,u]),t.useProgram("hillshadePrepare").draw(n,l.TRIANGLES,s,a,r,e.CullFaceMode.disabled,((t,i)=>{const o=i.stride,s=e.create();return e.ortho(s,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(s,s,[0,-e.EXTENT,0]),{u_matrix:s,u_image:1,u_dimension:[o,o],u_zoom:t.overscaledZ,u_unpack:i.unpackVector}})(i.tileID,c),o.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments),i.needsHillshadePrepare=!1}const Mt=(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image0:new e.Uniform1i(t,i.u_image0),u_skirt_height:new e.Uniform1f(t,i.u_skirt_height)}),Dt=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),St=new class{constructor(){this.operations={}}newMorphing(e,t,i,o,s){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==i.tileID.key&&(t.queued=i)}else this.operations[e]={startTime:o,phase:0,duration:s,from:t,to:i,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const i=this.operations[t];for(i.phase=(e-i.startTime)/i.duration;i.phase>=1||!this._validOp(i);)if(!this._nextOp(i,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},kt={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Ut(t,i,o,s,a){const r=t.context,n=r.gl;let l=t.useProgram("terrainRaster"),c=0;const u=t.colorModeForRenderPass(),h=new e.DepthMode(n.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);St.update(a);const p=t.transform,m=6*Math.pow(1.5,22-p.zoom)*i.exaggeration();var d,f,y;for(const g of s){const s=o.getTile(g),_=e.StencilMode.disabled,b=i.prevTerrainTileForTile[g.key],v=i.terrainTileForTile[g.key];y=v,null!=(f=b)&&null!=y&&f.hasData()&&y.hasData()&&null!=f.demTexture&&null!=y.demTexture&&f.tileID.key!==y.tileID.key&&St.newMorphing(g.key,b,v,a,250),r.activeTexture.set(n.TEXTURE0),s.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE,n.LINEAR_MIPMAP_NEAREST);const x=St.getMorphValuesForProxy(g.key),L=x?1:0;let I;x&&(I={morphing:{srcDemTile:x.from,dstDemTile:x.to,phase:e.easeCubicInOut(x.phase)}});const w=Dt(g.posMatrix,Rt(g.canonical,p.renderWorldCopies)?m/10:m);c!==(d=L)&&(l=t.useProgram("terrainRaster",null,kt[d]),c=d),i.setupElevationDraw(s,l,I),l.draw(r,n.TRIANGLES,h,_,u,e.CullFaceMode.backCCW,w,"terrain_raster",i.gridBuffer,i.gridIndexBuffer,i.gridSegments)}}function Rt(e,t){const i=1<<e.z;return!t&&(0===e.x||e.x===i-1)||0===e.y||e.y===i-1}const Ot=e=>({u_matrix:e});function Nt(t,i,o,s,a){if(a>0){const r=e.browser.now(),n=(r-t.timeAdded)/a,l=i?(r-i.timeAdded)/a:-1,c=o.getSource(),u=s.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!i||Math.abs(i.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),p=h&&t.refreshedUponExpiration?1:e.clamp(h?n:1-l,0,1);return t.refreshedUponExpiration&&n>=1&&(t.refreshedUponExpiration=!1),i?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}const $t={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Vt extends e.SourceCache{constructor(e){const t=M("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new w(V(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,i,o){if(t.freezeTileCoverage)return;this.transform=t;const s=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,useElevationData:!0}).reduce((i,o)=>{if(i[o.key]="",!this._tiles[o.key]){const i=new e.Tile(o,this._source.tileSize*o.overscaleFactor(),t.tileZoom);i.state="loaded",this._tiles[o.key]=i}return i},{});for(const e in this._tiles)e in s||(this.freeFBO(e),this._tiles[e].state="unloaded",delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];void 0!==t&&(this.renderCachePool.push(t),delete this.proxyCachedFBO[e])}deallocRenderCache(){this.renderCache.forEach(e=>e.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Gt extends e.OverscaledTileID{constructor(e,t,i){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.posMatrix=i}}class jt extends e.Elevation{constructor(t,i){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[o,s,a]=function(t){const i=new e.StructArrayLayout4i8,o=new e.StructArrayLayout3ui6;i.reserve(17161),o.reserve(33800);const s=e.EXTENT/128,a=e.EXTENT+s/2,r=a+s;for(let t=-s;t<r;t+=s)for(let o=-s;o<r;o+=s){const s=o<0||o>a||t<0||t>a?24575:0,r=e.clamp(Math.round(o),0,e.EXTENT),n=e.clamp(Math.round(t),0,e.EXTENT);i.emplaceBack(r+s,n,r,n)}const n=(e,t)=>{const i=131*t+e;o.emplaceBack(i+1,i,i+131),o.emplaceBack(i+131,i+131+1,i+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)n(t,e);return[0,129].forEach(e=>{for(let t=0;t<130;t++)n(t,e),n(e,t)}),[i,o,32768]}(),r=t.context;this.gridBuffer=r.createVertexBuffer(o,A.members),this.gridIndexBuffer=r.createIndexBuffer(s),this.gridSegments=e.SegmentVector.simpleSegment(0,0,o.length,s.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,o.length,a),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._sourceTilesOverlap={},this.proxySourceCache=new Vt(i.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,0,e.EXTENT,0,e.EXTENT,0,1);const n=r.gl;this._overlapStencilMode=new e.StencilMode({func:n.GEQUAL,mask:255},0,255,n.KEEP,n.KEEP,n.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=i,i.on("data",this._onStyleDataEvent.bind(this))}update(t,i,o){if(t&&t.terrain){this.style!==t&&(t.on("data",this._onStyleDataEvent.bind(this)),this.style=t),this.enabled=!0;const s=t.terrain.properties;this.sourceCache=t._getSourceCache(s.get("source")),this._exaggeration=s.get("exaggeration");const a=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.sourceCache.getSource().tileSize/128,o=this.proxySourceCache.getSource().tileSize;this.sourceCache.update(i,t*o,!0),this._findCoveringTileCache[this.sourceCache.id]={}};this.sourceCache.usedForTerrain||(this._findCoveringTileCache[this.sourceCache.id]={},this.sourceCache.usedForTerrain=!0,a(),this._initializing=!0),a(),i.updateElevation(!o),this._findCoveringTileCache[this.proxySourceCache.id]={},this.proxySourceCache.update(i),this._depthDone=!1,this._emptyDEMTextureDirty=!0}else this._disable()}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this.proxySourceCache.deallocRenderCache(),this.painter.style))for(const e in this.painter.style._sourceCaches)this.painter.style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(e=>e.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture)}_source(){return this.enabled?this.sourceCache:null}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const i=this.proxySourceCache,o=this.painter.transform;this._initializing&&(this._initializing=0===o._centerAltitude&&-1===this.getAtPoint(e.MercatorCoordinate.fromLngLat(o.center),-1),this._emptyDEMTextureDirty=!this._initializing);const s=this.painter.options;this.drapeFirst=(s.zooming||s.moving||s.rotating||!!this.forceDrapeFirst)&&!this._invalidateRenderCache,this._invalidateRenderCache=!1;const a=this.proxyCoords=i.getIds().map(e=>{const t=i.getTileByID(e).tileID;return t.posMatrix=o.calculatePosMatrix(t.toUnwrapped()),t});!function(t,i){const o=i.transform.pointCoordinate(i.transform.getCameraPoint()),s=new e.Point(o.x,o.y);t.sort((t,i)=>{if(i.overscaledZ-t.overscaledZ)return i.overscaledZ-t.overscaledZ;const o=new e.Point(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),a=new e.Point(i.canonical.x+(1<<i.canonical.z)*i.wrap,i.canonical.y),r=s.mult(1<<t.canonical.z);return r.x-=.5,r.y-=.5,r.distSqr(o)-r.distSqr(a)})}(a,this.painter),this._previousZoom=o.zoom;const r=this.proxyToSource||{};this.proxyToSource={},a.forEach(e=>{this.proxyToSource[e.key]={}}),this.terrainTileForTile={};const n=this.painter.style._sourceCaches;for(const e in n){const i=n[e];if(!i.used)continue;if(i!==this.sourceCache&&(this._findCoveringTileCache[i.id]={}),this._setupProxiedCoordsForOrtho(i,t[e],r),i.usedForTerrain)continue;const o=t[e];i.getSource().reparseOverscaled&&this._assignTerrainTiles(o)}this.proxiedCoords[i.id]=a.map(e=>new Gt(e,e.key,this.orthoMatrix)),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupRenderCache(r),this.drapeFirstPending=this.drapeFirst,this.renderingToTexture=!1,this._initFBOPool(),this._updateTimestamp=e.browser.now();const l={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const i=t.tileID.key;i in l||(this._visibleDemTiles.push(t),l[i]=i)}}_assignTerrainTiles(e){this._initializing||e.forEach(e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)})}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const i in this.terrainTileForTile){const o=this.terrainTileForTile[i],s=o.dem;!s||o.demTexture&&!o.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),Pt(this.painter,o,s))}}_prepareDemTileUniforms(e,t,i,o){if(!t||null==t.demTexture)return!1;const s=e.tileID.canonical,a=Math.pow(2,t.tileID.canonical.z-s.z),r=o||"";return i["u_dem_tl"+r]=[s.x*a%1,s.y*a%1],i["u_dem_scale"+r]=a,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce((t,i)=>{if(!i.dem)return t;const o=i.dem.tree.minimums[0];return o>0&&e++,t+o},0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,i=t.gl;t.activeTexture.set(i.TEXTURE2);const o=this._getLoadedAreaMinimum(),s={width:1,height:1,data:new Uint8Array(e.DEMData.pack(o,this.sourceCache.getSource().encoding))};this._emptyDEMTextureDirty=!1;let a=this._emptyDEMTexture;return a?a.update(s,{premultiply:!1}):a=this._emptyDEMTexture=new e.Texture(t,s,i.RGBA,{premultiply:!1}),a}setupElevationDraw(t,i,o){const s=this.painter.context,a=s.gl,r=(n=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(n),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var n;r.u_dem_size=this.sourceCache.getSource().tileSize,r.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(o&&o.morphing){const e=o.morphing.srcDemTile,i=o.morphing.dstDemTile;u=o.morphing.phase,e&&i&&(this._prepareDemTileUniforms(t,e,r,"_prev")&&(c=e),this._prepareDemTileUniforms(t,i,r)&&(l=i))}if(c&&l?(s.activeTexture.set(a.TEXTURE2),l.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),s.activeTexture.set(a.TEXTURE4),c.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),r.u_dem_lerp=u):(l=this.terrainTileForTile[t.tileID.key],s.activeTexture.set(a.TEXTURE2),(this._prepareDemTileUniforms(t,l,r)?l.demTexture:this.emptyDEMTexture).bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST)),o&&o.useDepthForOcclusion&&(s.activeTexture.set(a.TEXTURE3),this._depthTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),r.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height]),o&&o.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;r.u_meter_to_dem=t}o&&o.labelPlaneMatrixInv&&(r.u_label_plane_matrix_inv=o.labelPlaneMatrixInv),i.setTerrainUniformValues(s,r)}renderLayer(e,t){return"translucent"!==this.painter.renderPass?(this._depthDone||"symbol"!==e.type&&"circle"!==e.type||this.drawDepth(),!0):this.drapeFirst&&this.drapeFirstPending?(this.render(),this.drapeFirstPending=!1,!0):!!this._isLayerDrapedOverTerrain(e)&&(this.drapeFirst&&!this.renderingToTexture||this.render(),!0)}render(){this.renderingToTexture=!0;const t=this.painter,i=this.painter.context,o=this.proxySourceCache,s=this.proxiedCoords[o.id],a=()=>{i.bindFramebuffer.set(null),i.viewport.set([0,0,t.width,t.height]),this.renderingToTexture=!1},r=t.currentLayer;let n=r,l=[];const c=t.style._order;let u=0;for(let h=0;h<s.length;h++){const p=s[h],m=o.getTileByID(p.proxyTileKey),d=o.proxyCachedFBO[p.key],f=this.currentFBO=void 0!==d?o.renderCache[d]:this.pool[u++];if(m.texture=f.tex,void 0!==d&&!f.dirty){l.push(m.tileID);continue}let y;for(i.bindFramebuffer.set(f.fb.framebuffer),this.renderedToTile=!1,f.dirty&&(i.clear({color:e.Color.transparent}),f.dirty=!1),t.currentLayer=r;t.currentLayer<c.length;t.currentLayer++){const e=t.style._layers[c[t.currentLayer]],o=e.isHidden(t.transform.zoom),s=this._isLayerDrapedOverTerrain(e);if(this.drapeFirst&&!s)continue;if(t.currentLayer>n){if(!o&&!s)break;n++}if(o)continue;const a=this.painter.style._getLayerSourceCache(e),r=a?this.proxyToSource[p.key][a.id]:[p];if(!r)continue;const l=r;i.viewport.set([0,0,f.fb.width,f.fb.height]),y!==(a?a.id:null)&&(this._setupStencil(r,e,a),y=a?a.id:null),t.renderLayer(t,a,e,l)}f.dirty=this.renderedToTile,this.renderedToTile&&l.push(m.tileID),5===u&&(u=0,l.length>0&&(a(),Ut(t,this,o,l,this._updateTimestamp),this.renderingToTexture=!0,l=[]))}a(),l.length>0&&Ut(t,this,o,l,this._updateTimestamp),t.currentLayer=this.drapeFirst?-1:n}raycast(e,t,i){if(!this._visibleDemTiles)return null;const o=this._visibleDemTiles.filter(e=>e.dem).map(o=>{const s=o.tileID,a=Math.pow(2,s.overscaledZ),{x:r,y:n}=s.canonical,l=r/a,c=(r+1)/a,u=n/a,h=(n+1)/a;return{minx:l,miny:u,maxx:c,maxy:h,t:o.dem.tree.raycastRoot(l,u,c,h,e,t,i),tile:o}});o.sort((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE));for(const s of o){if(null==s.t)return null;const o=s.tile.dem.tree.raycast(s.minx,s.miny,s.maxx,s.maxy,e,t,i);if(null!=o)return o}return null}_createFBO(){const t=this.painter.context,i=t.gl,o=this.drapeBufferSize;t.activeTexture.set(i.TEXTURE0);const s=new e.Texture(t,{width:o[0],height:o[1],data:null},i.RGBA);s.bind(i.LINEAR,i.CLAMP_TO_EDGE);const a=t.createFramebuffer(o[0],o[1],!1);return a.colorAttachment.set(s.texture),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&i.texParameterf(i.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:a,tex:s,dirty:!1,ref:1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){return!this.drapeFirst||this.painter.style._order.some(e=>{const t=this.painter.style._layers[e],i=!t.isHidden(this.painter.transform.zoom),o=t.getCrossfadeParameters();return"custom"!==t.type&&!i&&!!o&&1!==o.t})}_clearRasterFadeFromRenderCache(){for(const e in this.painter.style._sourceCaches)if(!(this.painter.style._sourceCaches[e]._source instanceof z))return;for(let e=0;e<this.painter.style._order.length;++e){const t=this.painter.style._layers[this.painter.style._order[e]],i=t.isHidden(this.painter.transform.zoom),o=this.painter.style._getLayerSourceCache(t);if("raster"!==t.type||i||!o)continue;const s=t.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][o.id];if(t)for(const e of t){const t=Nt(o.getTile(e),o.findLoadedParent(e,0),o,this.painter.transform,s);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(o.id,e)}}}}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()){if(t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={},t.renderCachePool=t.renderCachePool.concat(e)}return}this._clearRasterFadeFromRenderCache();const i=this.proxyCoords,o=this._tilesDirty;for(let s=i.length-1;s>=0;s--){const a=i[s];if(t.getTileByID(a.key),void 0!==t.proxyCachedFBO[a.key]){const i=e[a.key],s=this.proxyToSource[a.key];let r=0;for(const e in s){const t=s[e],a=i[e];if(!a||a.length!==t.length||t.some((t,i)=>t!==a[i]||o[e]&&o[e].hasOwnProperty(t.key))){r=-1;break}++r}t.renderCache[t.proxyCachedFBO[a.key]].dirty=r<0||r!==Object.values(i).length}else{let e=t.renderCachePool.pop();void 0===e&&t.renderCache.length<50&&(e=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==e&&(t.proxyCachedFBO[a.key]=e,t.renderCache[e].dirty=!0)}}this._tilesDirty={}}_setupStencil(t,i,o){if(!o||!this._sourceTilesOverlap[o.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const s=this.painter.context,a=s.gl;if(t.length<=1)return void(this._overlapStencilType=!1);const r=this.currentFBO,n=r.fb;let l;if(i.isTileClipped())l=t.length,this._overlapStencilMode.test={func:a.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);l=1,this._overlapStencilMode.test={func:a.GREATER,mask:255},this._overlapStencilType="Mask"}if(!n.depthAttachment){const t=s.createRenderbuffer(s.gl.DEPTH_STENCIL,n.width,n.height);n.depthAttachment=new e.DepthStencilAttachment(s,n.framebuffer),n.depthAttachment.set(t),s.clear({stencil:0})}r.ref+l>255&&(s.clear({stencil:0}),r.ref=0),r.ref+=l,this._overlapStencilMode.ref=r.ref,i.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,i){const o=this.painter,s=this.painter.context,a=s.gl;o._tileClippingMaskIDs={},s.setColorMode(e.ColorMode.disabled),s.setDepthMode(e.DepthMode.disabled);const r=o.useProgram("clippingMask");for(const n of t){const t=o._tileClippingMaskIDs[n.key]=--i;r.draw(s,a.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:a.ALWAYS,mask:0},t,255,a.KEEP,a.KEEP,a.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Ot(n.posMatrix),"$clipping",o.tileExtentBuffer,o.quadTriangleIndexBuffer,o.tileExtentSegments)}}pointCoordinate(t){const i=this.painter.transform;if(t.x<0||t.x>i.width||t.y<0||t.y>i.height)return null;const o=[t.x,t.y,1,1];e.transformMat4(o,o,i.pixelMatrixInverse),e.scale$1(o,o,1/o[3]),o[0]/=i.worldSize,o[1]/=i.worldSize;const s=i._camera.position,a=e.mercatorZfromAltitude(1,i.center.lat),r=[s[0],s[1],s[2]/a,0],n=e.subtract([],o.slice(0,3),r);e.normalize(n,n);const l=this.raycast(r,n,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(r,r,n,l),r[3]=r[2],r[2]*=a,r):null}drawDepth(){const t=this.painter,i=t.context,o=this.proxySourceCache,s=Math.ceil(t.width),a=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===s&&this._depthFBO.height===a||(this._depthFBO.destroy(),delete this._depthFBO,delete this._depthTexture),!this._depthFBO){const t=i.gl,o=i.createFramebuffer(s,a,!0);i.activeTexture.set(t.TEXTURE0);const r=new e.Texture(i,{width:s,height:a,data:null},t.RGBA);r.bind(t.NEAREST,t.CLAMP_TO_EDGE),o.colorAttachment.set(r.texture);const n=i.createRenderbuffer(i.gl.DEPTH_COMPONENT16,s,a);o.depthAttachment.set(n),this._depthFBO=o,this._depthTexture=r}i.bindFramebuffer.set(this._depthFBO.framebuffer),i.viewport.set([0,0,s,a]),function(t,i,o,s){const a=t.context,r=a.gl;a.clear({depth:1});const n=t.useProgram("terrainDepth"),l=new e.DepthMode(r.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const t of s){const s=o.getTile(t),c=Dt(t.posMatrix,0);i.setupElevationDraw(s,n),n.draw(a,r.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,c,"terrain_depth",i.gridBuffer,i.gridIndexBuffer,i.gridNoSkirtSegments)}}(t,this,o,this.proxyCoords),i.bindFramebuffer.set(null),i.viewport.set([0,0,t.width,t.height]),this._depthDone=!0}_isLayerDrapedOverTerrain(e){return!!this.enabled&&$t.hasOwnProperty(e.type)}_setupProxiedCoordsForOrtho(e,t,i){if(e.getSource()instanceof P)return this._setupProxiedCoordsForImageSource(e,t,i);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const o=this.proxiedCoords[e.id]=[],s=this.proxyCoords;for(let t=0;t<s.length;t++){const a=s[t],r=this._findTileCoveringTileID(a,e);if(r){const t=this._createProxiedId(a,r,i[a.key]&&i[a.key][e.id]);o.push(t),this.proxyToSource[a.key][e.id]=[t]}}let a=!1;for(let s=0;s<t.length;s++){const r=e.getTile(t[s]);if(!r||!r.hasData())continue;const n=this._findTileCoveringTileID(r.tileID,this.proxySourceCache);if(n&&n.tileID.canonical.z!==r.tileID.canonical.z){const t=this.proxyToSource[n.tileID.key][e.id],s=this._createProxiedId(n.tileID,r,i[n.tileID.key]&&i[n.tileID.key][e.id]);t?t.splice(t.length-1,0,s):this.proxyToSource[n.tileID.key][e.id]=[s],o.push(s),a=!0}}this._sourceTilesOverlap[e.id]=a}_setupProxiedCoordsForImageSource(t,i,o){if(!t.getSource().loaded())return;const s=this.proxiedCoords[t.id]=[],a=this.proxyCoords,r=t.getSource(),n=new e.Point(r.tileID.x,r.tileID.y)._div(1<<r.tileID.z),l=r.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce((e,t)=>(e.min.x=Math.min(e.min.x,t.x-n.x),e.min.y=Math.min(e.min.y,t.y-n.y),e.max.x=Math.max(e.max.x,t.x-n.x),e.max.y=Math.max(e.max.y,t.y-n.y),e),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,i)=>{const o=t.wrap+t.canonical.x/(1<<t.canonical.z),s=t.canonical.y/(1<<t.canonical.z),a=e.EXTENT/(1<<t.canonical.z),r=i.wrap+i.canonical.x/(1<<i.canonical.z),n=i.canonical.y/(1<<i.canonical.z);return o+a<r+l.min.x||o>r+l.max.x||s+a<n+l.min.y||s>n+l.max.y};for(let e=0;e<a.length;e++){const r=a[e];for(let e=0;e<i.length;e++){const a=t.getTile(i[e]);if(!a||!a.hasData())continue;if(c(r,a.tileID))continue;const n=this._createProxiedId(r,a,o[r.key]&&o[r.key][t.id]),l=this.proxyToSource[r.key][t.id];l?l.push(n):this.proxyToSource[r.key][t.id]=[n],s.push(n)}}}_createProxiedId(t,i,o){let s=this.orthoMatrix;if(o){const e=o.find(e=>e.key===i.tileID.key);if(e)return e}if(i.tileID.key!==t.key){const o=t.canonical.z-i.tileID.canonical.z;let a,r,n;s=e.create();const l=i.tileID.wrap-t.wrap<<t.overscaledZ;o>0?(a=e.EXTENT>>o,r=a*((i.tileID.canonical.x<<o)-t.canonical.x+l),n=a*((i.tileID.canonical.y<<o)-t.canonical.y)):(a=e.EXTENT<<-o,r=e.EXTENT*(i.tileID.canonical.x-(t.canonical.x+l<<-o)),n=e.EXTENT*(i.tileID.canonical.y-(t.canonical.y<<-o))),e.ortho(s,0,a,0,a,0,1),e.translate(s,s,[r,n,0])}return new Gt(i.tileID,t.key,s)}_findTileCoveringTileID(t,i){let o=i.getTile(t);if(o&&o.hasData())return o;const s=this._findCoveringTileCache[i.id],a=s[t.key];if(o=a?i.getTileByID(a):null,o&&o.hasData()||null===a)return o;let r=o?o.tileID:t,n=r.overscaledZ;const l=i.getSource().minzoom,c=[];if(!a){const s=i.getSource().maxzoom;if(t.canonical.z>=s){const o=t.canonical.z-s;i.getSource().reparseOverscaled?(n=Math.max(t.canonical.z+2,i.transform.tileZoom),r=new e.OverscaledTileID(n,t.wrap,s,t.canonical.x>>o,t.canonical.y>>o)):0!==o&&(n=s,r=new e.OverscaledTileID(n,t.wrap,s,t.canonical.x>>o,t.canonical.y>>o))}r.key!==t.key&&(c.push(r.key),o=i.getTile(r))}const u=e=>{c.forEach(t=>{s[t]=e}),c.length=0};for(n-=1;n>=l&&(!o||!o.hasData());n--){o&&u(o.tileID.key);const e=r.calculateScaledKey(n);if(o=i.getTileByID(e),o&&o.hasData())break;const t=s[e];if(null===t)break;void 0===t?c.push(e):o=i.getTileByID(t)}return u(o?o.tileID.key:null),o&&o.hasData()?o:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(e){this.renderedToTile||(this.renderedToTile=!0)}_clearRenderCacheForTile(e,t){let i=this._tilesDirty[e];i||(i=this._tilesDirty[e]={}),i[t.key]=!0}}function Zt(e){const t=[];for(let i=0;i<e.length;i++){if(null===e[i])continue;const o=e[i].split(" ");t.push(o.pop())}return t}class Ht{static cacheKey(e,t,i){let o=`${e}${i?i.cacheKey:""}`;for(const e of t)o+="/"+e;return o}constructor(t,i,o,s,a,r){const n=t.gl;this.program=n.createProgram();const l=Zt(o.staticAttributes),c=s?s.getBinderAttributes():[],u=l.concat(c),h=o.staticUniforms?Zt(o.staticUniforms):[],p=s?s.getBinderUniforms():[],m=h.concat(p),d=[];for(const e of m)d.indexOf(e)<0&&d.push(e);let f=s?s.defines():[];f=f.concat(r.map(e=>"#define "+e));const y=f.concat(We.fragmentSource,o.fragmentSource).join("\n"),g=f.concat(We.vertexSource,Qe.vertexSource,o.vertexSource).join("\n"),_=n.createShader(n.FRAGMENT_SHADER);if(n.isContextLost())return void(this.failedToCreate=!0);n.shaderSource(_,y),n.compileShader(_),n.attachShader(this.program,_);const b=n.createShader(n.VERTEX_SHADER);if(n.isContextLost())return void(this.failedToCreate=!0);n.shaderSource(b,g),n.compileShader(b),n.attachShader(this.program,b),this.attributes={};const v={};this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(n.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);n.linkProgram(this.program),n.deleteShader(b),n.deleteShader(_);for(let e=0;e<d.length;e++){const t=d[e];if(t&&!v[t]){const e=n.getUniformLocation(this.program,t);e&&(v[t]=e)}}this.fixedUniforms=a(t,v),this.binderUniforms=s?s.getUniforms(t,v):[],-1!==r.indexOf("TERRAIN")&&(this.terrainUniforms=((t,i)=>({u_dem:new e.Uniform1i(t,i.u_dem),u_dem_prev:new e.Uniform1i(t,i.u_dem_prev),u_dem_unpack:new e.Uniform4f(t,i.u_dem_unpack),u_dem_tl:new e.Uniform2f(t,i.u_dem_tl),u_dem_scale:new e.Uniform1f(t,i.u_dem_scale),u_dem_tl_prev:new e.Uniform2f(t,i.u_dem_tl_prev),u_dem_scale_prev:new e.Uniform1f(t,i.u_dem_scale_prev),u_dem_size:new e.Uniform1f(t,i.u_dem_size),u_dem_lerp:new e.Uniform1f(t,i.u_dem_lerp),u_exaggeration:new e.Uniform1f(t,i.u_exaggeration),u_depth:new e.Uniform1i(t,i.u_depth),u_depth_size_inv:new e.Uniform2f(t,i.u_depth_size_inv),u_meter_to_dem:new e.Uniform1f(t,i.u_meter_to_dem),u_label_plane_matrix_inv:new e.UniformMatrix4f(t,i.u_label_plane_matrix_inv)}))(t,v))}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const i=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)i[e].set(t[e])}}draw(e,t,i,o,s,a,r,n,l,c,u,h,p,m,d,f){const y=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(i),e.setStencilMode(o),e.setColorMode(s),e.setCullFace(a);for(const e in this.fixedUniforms)this.fixedUniforms[e].set(r[e]);m&&m.setUniforms(e,this.binderUniforms,h,{zoom:p});const g={[y.LINES]:2,[y.TRIANGLES]:3,[y.LINE_STRIP]:1}[t];for(const i of u.get()){const o=i.vaos||(i.vaos={});(o[n]||(o[n]=new Ct)).bind(e,this,l,m?m.getPaintVertexBuffers():[],c,i.vertexOffset,d,f),y.drawElements(t,i.primitiveLength*g,y.UNSIGNED_SHORT,i.primitiveOffset*g*2)}}}function Xt(e,t,i){const o=1/q(i,1,t.transform.tileZoom),s=Math.pow(2,i.tileID.overscaledZ),a=i.tileSize*Math.pow(2,t.transform.tileZoom)/s,r=a*(i.tileID.canonical.x+i.tileID.wrap*s),n=a*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture.size,u_scale:[o,e.fromScale,e.toScale],u_fade:e.t,u_pixel_coord_upper:[r>>16,n>>16],u_pixel_coord_lower:[65535&r,65535&n]}}const Qt=(t,i,o,s)=>{const a=i.style.light,r=a.properties.get("position"),n=[r.x,r.y,r.z],l=e.create$1();"viewport"===a.properties.get("anchor")&&(e.fromRotation(l,-i.transform.angle),e.transformMat3(n,n,l));const c=a.properties.get("color");return{u_matrix:t,u_lightpos:n,u_lightintensity:a.properties.get("intensity"),u_lightcolor:[c.r,c.g,c.b],u_vertical_gradient:+o,u_opacity:s}},Wt=(t,i,o,s,a,r,n)=>e.extend(Qt(t,i,o,s),Xt(r,i,n),{u_height_factor:-Math.pow(2,a.overscaledZ)/n.tileSize/8}),Kt=e=>({u_matrix:e}),Jt=(t,i,o,s)=>e.extend(Kt(t),Xt(o,i,s)),Yt=(e,t)=>({u_matrix:e,u_world:t}),ei=(t,i,o,s,a)=>e.extend(Jt(t,i,o,s),{u_world:a}),ti=(t,i,o,s)=>{const a=t.transform;let r;if("map"===s.paint.get("circle-pitch-alignment")){const e=q(o,1,a.zoom);r=[e,e]}else r=a.pixelsToGLUnits;return{u_camera_to_center_distance:a.cameraToCenterDistance,u_matrix:t.translatePosMatrix(i.posMatrix,o,s.paint.get("circle-translate"),s.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:r}},ii=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},oi=(t,i,o)=>{const s=e.EXTENT/o.tileSize;return{u_matrix:t,u_camera_to_center_distance:i.cameraToCenterDistance,u_extrude_scale:[i.pixelsToGLUnits[0]/s,i.pixelsToGLUnits[1]/s]}},si=(e,t,i=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:i}),ai=(e,t,i,o)=>({u_matrix:e,u_extrude_scale:q(t,1,i),u_intensity:o}),ri=(t,i,o,s)=>{const a=t.transform;return{u_matrix:hi(t,i,o,s),u_ratio:1/q(i,1,a.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]]}},ni=(t,i,o,s,a)=>e.extend(ri(t,i,o,s),{u_image:0,u_image_height:a}),li=(t,i,o,s,a)=>{const r=t.transform,n=ui(i,r);return{u_matrix:hi(t,i,o,a),u_texsize:i.imageAtlasTexture.size,u_ratio:1/q(i,1,r.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[n,s.fromScale,s.toScale],u_fade:s.t,u_units_to_pixels:[1/r.pixelsToGLUnits[0],1/r.pixelsToGLUnits[1]]}},ci=(t,i,o,s,a,r)=>{const n=t.lineAtlas,l=ui(i,t.transform),c="round"===o.layout.get("line-cap"),u=n.getDash(s.from,c),h=n.getDash(s.to,c),p=u.width*a.fromScale,m=h.width*a.toScale;return e.extend(ri(t,i,o,r),{u_patternscale_a:[l/p,-u.height/2],u_patternscale_b:[l/m,-h.height/2],u_sdfgamma:n.width/(256*Math.min(p,m)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:u.y,u_tex_y_b:h.y,u_mix:a.t})};function ui(e,t){return 1/q(e,1,t.tileZoom)}function hi(e,t,i,o){return e.translatePosMatrix(o||t.tileID.posMatrix,t,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const pi=(e,t,i,o,s)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:i,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*s.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:s.paint.get("raster-brightness-min"),u_brightness_high:s.paint.get("raster-brightness-max"),u_saturation_factor:(r=s.paint.get("raster-saturation"),r>0?1-1/(1.001-r):-r),u_contrast_factor:(a=s.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:mi(s.paint.get("raster-hue-rotate"))};var a,r};function mi(e){e*=Math.PI/180;const t=Math.sin(e),i=Math.cos(e);return[(2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3]}const di=(e,t,i,o,s,a,r,n,l,c)=>{const u=s.transform;return{u_is_size_zoom_constant:+("constant"===e||"source"===e),u_is_size_feature_constant:+("constant"===e||"camera"===e),u_size_t:t?t.uSizeT:0,u_size:t?t.uSize:0,u_camera_to_center_distance:u.cameraToCenterDistance,u_pitch:u.pitch/360*2*Math.PI,u_rotate_symbol:+i,u_aspect_ratio:u.width/u.height,u_fade_change:s.options.fadeDuration?s.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:r,u_coord_matrix:n,u_is_text:+l,u_pitch_with_map:+o,u_texsize:c,u_texture:0}},fi=(t,i,o,s,a,r,n,l,c,u,h)=>{const p=a.transform;return e.extend(di(t,i,o,s,a,r,n,l,c,u),{u_gamma_scale:s?Math.cos(p._pitch)*p.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+h})},yi=(t,i,o,s,a,r,n,l,c,u)=>e.extend(fi(t,i,o,s,a,r,n,l,!0,c,!0),{u_texsize_icon:u,u_texture_icon:1}),gi=(e,t,i)=>({u_matrix:e,u_opacity:t,u_color:i}),_i=(t,i,o,s,a,r)=>e.extend(function(e,t,i,o){const s=i.imageManager.getPattern(e.from.toString()),a=i.imageManager.getPattern(e.to.toString()),{width:r,height:n}=i.imageManager.getPixelSize(),l=Math.pow(2,o.tileID.overscaledZ),c=o.tileSize*Math.pow(2,i.transform.tileZoom)/l,u=c*(o.tileID.canonical.x+o.tileID.wrap*l),h=c*o.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:s.tl,u_pattern_br_a:s.br,u_pattern_tl_b:a.tl,u_pattern_br_b:a.br,u_texsize:[r,n],u_mix:t.t,u_pattern_size_a:s.displaySize,u_pattern_size_b:a.displaySize,u_scale_a:t.fromScale,u_scale_b:t.toScale,u_tile_units_to_pixels:1/q(o,1,i.transform.tileZoom),u_pixel_coord_upper:[u>>16,h>>16],u_pixel_coord_lower:[65535&u,65535&h]}}(s,r,o,a),{u_matrix:t,u_opacity:i}),bi={fillExtrusion:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_opacity:new e.Uniform1f(t,i.u_opacity)}),fillExtrusionPattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_lightpos:new e.Uniform3f(t,i.u_lightpos),u_lightintensity:new e.Uniform1f(t,i.u_lightintensity),u_lightcolor:new e.Uniform3f(t,i.u_lightcolor),u_vertical_gradient:new e.Uniform1f(t,i.u_vertical_gradient),u_height_factor:new e.Uniform1f(t,i.u_height_factor),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade),u_opacity:new e.Uniform1f(t,i.u_opacity)}),fill:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}),fillPattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}),fillOutline:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world)}),fillOutlinePattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world),u_image:new e.Uniform1i(t,i.u_image),u_texsize:new e.Uniform2f(t,i.u_texsize),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}),circle:(t,i)=>({u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,i.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}),collisionBox:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_extrude_scale:new e.Uniform2f(t,i.u_extrude_scale)}),collisionCircle:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_inv_matrix:new e.UniformMatrix4f(t,i.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(t,i.u_viewport_size)}),debug:(t,i)=>({u_color:new e.UniformColor(t,i.u_color),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_overlay:new e.Uniform1i(t,i.u_overlay),u_overlay_scale:new e.Uniform1f(t,i.u_overlay_scale)}),clippingMask:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}),heatmap:(t,i)=>({u_extrude_scale:new e.Uniform1f(t,i.u_extrude_scale),u_intensity:new e.Uniform1f(t,i.u_intensity),u_matrix:new e.UniformMatrix4f(t,i.u_matrix)}),heatmapTexture:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_world:new e.Uniform2f(t,i.u_world),u_image:new e.Uniform1i(t,i.u_image),u_color_ramp:new e.Uniform1i(t,i.u_color_ramp),u_opacity:new e.Uniform1f(t,i.u_opacity)}),hillshade:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_latrange:new e.Uniform2f(t,i.u_latrange),u_light:new e.Uniform2f(t,i.u_light),u_shadow:new e.UniformColor(t,i.u_shadow),u_highlight:new e.UniformColor(t,i.u_highlight),u_accent:new e.UniformColor(t,i.u_accent)}),hillshadePrepare:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_image:new e.Uniform1i(t,i.u_image),u_dimension:new e.Uniform2f(t,i.u_dimension),u_zoom:new e.Uniform1f(t,i.u_zoom),u_unpack:new e.Uniform4f(t,i.u_unpack)}),line:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels)}),lineGradient:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_image:new e.Uniform1i(t,i.u_image),u_image_height:new e.Uniform1f(t,i.u_image_height)}),linePattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_texsize:new e.Uniform2f(t,i.u_texsize),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_image:new e.Uniform1i(t,i.u_image),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_scale:new e.Uniform3f(t,i.u_scale),u_fade:new e.Uniform1f(t,i.u_fade)}),lineSDF:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_ratio:new e.Uniform1f(t,i.u_ratio),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(t,i.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(t,i.u_patternscale_a),u_patternscale_b:new e.Uniform2f(t,i.u_patternscale_b),u_sdfgamma:new e.Uniform1f(t,i.u_sdfgamma),u_image:new e.Uniform1i(t,i.u_image),u_tex_y_a:new e.Uniform1f(t,i.u_tex_y_a),u_tex_y_b:new e.Uniform1f(t,i.u_tex_y_b),u_mix:new e.Uniform1f(t,i.u_mix)}),raster:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_tl_parent:new e.Uniform2f(t,i.u_tl_parent),u_scale_parent:new e.Uniform1f(t,i.u_scale_parent),u_buffer_scale:new e.Uniform1f(t,i.u_buffer_scale),u_fade_t:new e.Uniform1f(t,i.u_fade_t),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image0:new e.Uniform1i(t,i.u_image0),u_image1:new e.Uniform1i(t,i.u_image1),u_brightness_low:new e.Uniform1f(t,i.u_brightness_low),u_brightness_high:new e.Uniform1f(t,i.u_brightness_high),u_saturation_factor:new e.Uniform1f(t,i.u_saturation_factor),u_contrast_factor:new e.Uniform1f(t,i.u_contrast_factor),u_spin_weights:new e.Uniform3f(t,i.u_spin_weights)}),symbolIcon:(t,i)=>({u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texture:new e.Uniform1i(t,i.u_texture)}),symbolSDF:(t,i)=>({u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texture:new e.Uniform1i(t,i.u_texture),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}),symbolTextAndIcon:(t,i)=>({u_is_size_zoom_constant:new e.Uniform1i(t,i.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(t,i.u_is_size_feature_constant),u_size_t:new e.Uniform1f(t,i.u_size_t),u_size:new e.Uniform1f(t,i.u_size),u_camera_to_center_distance:new e.Uniform1f(t,i.u_camera_to_center_distance),u_pitch:new e.Uniform1f(t,i.u_pitch),u_rotate_symbol:new e.Uniform1i(t,i.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(t,i.u_aspect_ratio),u_fade_change:new e.Uniform1f(t,i.u_fade_change),u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(t,i.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(t,i.u_coord_matrix),u_is_text:new e.Uniform1i(t,i.u_is_text),u_pitch_with_map:new e.Uniform1i(t,i.u_pitch_with_map),u_texsize:new e.Uniform2f(t,i.u_texsize),u_texsize_icon:new e.Uniform2f(t,i.u_texsize_icon),u_texture:new e.Uniform1i(t,i.u_texture),u_texture_icon:new e.Uniform1i(t,i.u_texture_icon),u_gamma_scale:new e.Uniform1f(t,i.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(t,i.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(t,i.u_is_halo)}),background:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_color:new e.UniformColor(t,i.u_color)}),backgroundPattern:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_opacity:new e.Uniform1f(t,i.u_opacity),u_image:new e.Uniform1i(t,i.u_image),u_pattern_tl_a:new e.Uniform2f(t,i.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(t,i.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(t,i.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(t,i.u_pattern_br_b),u_texsize:new e.Uniform2f(t,i.u_texsize),u_mix:new e.Uniform1f(t,i.u_mix),u_pattern_size_a:new e.Uniform2f(t,i.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(t,i.u_pattern_size_b),u_scale_a:new e.Uniform1f(t,i.u_scale_a),u_scale_b:new e.Uniform1f(t,i.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(t,i.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(t,i.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(t,i.u_tile_units_to_pixels)}),terrainRaster:Mt,terrainDepth:Mt,skybox:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_sun_direction:new e.Uniform3f(t,i.u_sun_direction),u_cubemap:new e.Uniform1i(t,i.u_cubemap),u_opacity:new e.Uniform1f(t,i.u_opacity),u_temporal_offset:new e.Uniform1f(t,i.u_temporal_offset)}),skyboxGradient:(t,i)=>({u_matrix:new e.UniformMatrix4f(t,i.u_matrix),u_color_ramp:new e.Uniform1i(t,i.u_color_ramp),u_center_direction:new e.Uniform3f(t,i.u_center_direction),u_radius:new e.Uniform1f(t,i.u_radius),u_opacity:new e.Uniform1f(t,i.u_opacity),u_temporal_offset:new e.Uniform1f(t,i.u_temporal_offset)}),skyboxCapture:(t,i)=>({u_matrix_3f:new e.UniformMatrix3f(t,i.u_matrix_3f),u_sun_direction:new e.Uniform3f(t,i.u_sun_direction),u_sun_intensity:new e.Uniform1f(t,i.u_sun_intensity),u_color_tint_r:new e.Uniform4f(t,i.u_color_tint_r),u_color_tint_m:new e.Uniform4f(t,i.u_color_tint_m),u_luminance:new e.Uniform1f(t,i.u_luminance)})};let vi;function xi(t,i,o,s,a,r,n){const l=t.context,c=l.gl,u=t.useProgram("collisionBox"),h=[];let p=0,m=0;for(let d=0;d<s.length;d++){const f=s[d],y=i.getTile(f),g=y.getBucket(o);if(!g)continue;let _=f.posMatrix;0===a[0]&&0===a[1]||(_=t.translatePosMatrix(f.posMatrix,y,a,r));const b=n?g.textCollisionBox:g.iconCollisionBox,v=g.collisionCircleArray;if(v.length>0){const i=e.create(),o=_;e.mul(i,g.placementInvProjMatrix,t.transform.glCoordMatrix),e.mul(i,i,g.placementViewportMatrix),h.push({circleArray:v,circleOffset:m,transform:o,invTransform:i}),p+=v.length/4,m=p}b&&(t.terrain&&t.terrain.setupElevationDraw(y,u),u.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,oi(_,t.transform,y),o.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,t.transform.zoom,null,b.collisionVertexBuffer,b.collisionVertexBufferExt))}if(!n||!h.length)return;const d=t.useProgram("collisionCircle"),f=new e.StructArrayLayout2f1f2i16;f.resize(4*p),f._trim();let y=0;for(const e of h)for(let t=0;t<e.circleArray.length/4;t++){const i=4*t,o=e.circleArray[i+0],s=e.circleArray[i+1],a=e.circleArray[i+2],r=e.circleArray[i+3];f.emplace(y++,o,s,a,r,0),f.emplace(y++,o,s,a,r,1),f.emplace(y++,o,s,a,r,2),f.emplace(y++,o,s,a,r,3)}(!vi||vi.length<2*p)&&(vi=function(t){const i=2*t,o=new e.StructArrayLayout3ui6;o.resize(i),o._trim();for(let e=0;e<i;e++){const t=6*e;o.uint16[t+0]=4*e+0,o.uint16[t+1]=4*e+1,o.uint16[t+2]=4*e+2,o.uint16[t+3]=4*e+2,o.uint16[t+4]=4*e+3,o.uint16[t+5]=4*e+0}return o}(p));const g=l.createIndexBuffer(vi,!0),_=l.createVertexBuffer(f,e.collisionCircleLayout.members,!0);for(const i of h){const s={u_matrix:i.transform,u_inv_matrix:i.invTransform,u_camera_to_center_distance:(b=t.transform).cameraToCenterDistance,u_viewport_size:[b.width,b.height]};d.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,s,o.id,_,g,e.SegmentVector.simpleSegment(0,2*i.circleOffset,i.circleArray.length,i.circleArray.length/2),null,t.transform.zoom,null,null,null)}var b;_.destroy(),g.destroy()}const Li=e.identity(new Float32Array(16));function Ii(t,i,o,s,a,r){const{horizontalAlign:n,verticalAlign:l}=e.getAnchorAlignment(t),c=-(n-.5)*i,u=-(l-.5)*o,h=e.evaluateVariableOffset(t,s);return new e.Point((c/a+h[0])*r,(u/a+h[1])*r)}function wi(t,i,o,s,a,r,n,l,c,u,h,p){const m=t.text.placedSymbolArray,d=t.text.dynamicLayoutVertexArray,f=t.icon.dynamicLayoutVertexArray,y={};d.clear();for(let f=0;f<m.length;f++){const g=m.get(f),_=t.allowVerticalPlacement&&!g.placedOrientation,b=g.hidden||!g.crossTileID||_?null:s[g.crossTileID];if(b){const s=new e.Point(g.anchorX,g.anchorY),m=p(s),f=se(s,o?l:n,m),_=ae(r.cameraToCenterDistance,f.signedDistanceFromCamera);let v=a.evaluateSizeForFeature(t.textSizeData,u,g)*_/e.ONE_EM;o&&(v*=t.tilePixelRatio/c);const{width:x,height:L,anchor:I,textOffset:w,textBoxScale:q}=b,F=Ii(I,x,L,w,q,v),E=o?se(s.add(F),n,m).point:f.point.add(i?F.rotate(-r.angle):F),T=t.allowVerticalPlacement&&g.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<g.numGlyphs;t++)e.addDynamicAttributes(d,E,T);h&&g.associatedIconIndex>=0&&(y[g.associatedIconIndex]={shiftedAnchor:E,angle:T})}else de(g.numGlyphs,d)}if(h){f.clear();const i=t.icon.placedSymbolArray;for(let t=0;t<i.length;t++){const o=i.get(t);if(o.hidden)de(o.numGlyphs,f);else{const i=y[t];if(i)for(let t=0;t<o.numGlyphs;t++)e.addDynamicAttributes(f,i.shiftedAnchor,i.angle);else de(o.numGlyphs,f)}}t.icon.dynamicLayoutVertexBuffer.updateData(f)}t.text.dynamicLayoutVertexBuffer.updateData(d)}function qi(e,t,i){return i.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Fi(t,i,o,s,a,r,n,l,c,u,h,p){const m=t.context,d=m.gl,f=t.transform,y="map"===l,g="map"===c,_=y&&"point"!==o.layout.get("symbol-placement"),b=y&&!g&&!_,v=void 0!==o.layout.get("symbol-sort-key").constantOr(1);let x=!1;const L=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),I=o.layout.get("text-variable-anchor"),w=[],F=t.terrain&&g?["PITCH_WITH_MAP_TERRAIN"]:null;for(const l of s){const s=i.getTile(l),c=s.getBucket(o);if(!c)continue;const h=a?c.text:c.icon;if(!h||!h.segments.get().length)continue;const p=h.programConfigurations.get(o.id),m=a||c.sdfIcons,L=a?c.textSizeData:c.iconSizeData,E=g||0!==f.pitch,T=t.useProgram(qi(m,a,c),p,F),C=e.evaluateSizeForZoom(L,f.zoom);let z,A,P,B,M=[0,0],D=null;if(a){if(A=s.glyphAtlasTexture,P=d.LINEAR,z=s.glyphAtlasTexture.size,c.iconsInText){M=s.imageAtlasTexture.size,D=s.imageAtlasTexture;const e="composite"===L.kind||"camera"===L.kind;B=E||t.options.rotating||t.options.zooming||e?d.LINEAR:d.NEAREST}}else{const e=1!==o.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;A=s.imageAtlasTexture,P=m||t.options.rotating||t.options.zooming||e||E?d.LINEAR:d.NEAREST,z=s.imageAtlasTexture.size}const S=q(s,1,t.transform.zoom),k=ie(l.posMatrix,g,y,t.transform,S),U=t.terrain&&g&&_?e.invert(new Float32Array(16),k):Li,R=oe(l.posMatrix,g,y,t.transform,S),O=I&&c.hasTextData(),N="none"!==o.layout.get("icon-text-fit")&&O&&c.hasIconData();if(_){const e=f.elevation;ne(c,l.posMatrix,t,a,k,R,g,u,e?t=>e.getAtTileOffset(l,t.x,t.y):null)}const $=t.translatePosMatrix(l.posMatrix,s,r,n),V=_||a&&I||N?Li:k,G=t.translatePosMatrix(R,s,r,n,!0),j=m&&0!==o.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1);let Z;Z=m?c.iconsInText?yi(L.kind,C,b,g,t,$,V,G,z,M):fi(L.kind,C,b,g,t,$,V,G,a,z,!0):di(L.kind,C,b,g,t,$,V,G,a,z);const H={program:T,buffers:h,uniformValues:Z,atlasTexture:A,atlasTextureIcon:D,atlasInterpolation:P,atlasInterpolationIcon:B,isSDF:m,hasHalo:j,tile:s,labelPlaneMatrixInv:U};if(v&&c.canOverlap){x=!0;const t=h.segments.get();for(const i of t)w.push({segments:new e.SegmentVector([i]),sortKey:i.sortKey,state:H})}else w.push({segments:h.segments,sortKey:0,state:H})}x&&w.sort((e,t)=>e.sortKey-t.sortKey);for(const e of w){const i=e.state;if(t.terrain&&t.terrain.setupElevationDraw(i.tile,i.program,{useDepthForOcclusion:!0,labelPlaneMatrixInv:i.labelPlaneMatrixInv}),m.activeTexture.set(d.TEXTURE0),i.atlasTexture.bind(i.atlasInterpolation,d.CLAMP_TO_EDGE),i.atlasTextureIcon&&(m.activeTexture.set(d.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,d.CLAMP_TO_EDGE)),i.isSDF){const s=i.uniformValues;i.hasHalo&&(s.u_is_halo=1,Ei(i.buffers,e.segments,o,t,i.program,L,h,p,s)),s.u_is_halo=0}Ei(i.buffers,e.segments,o,t,i.program,L,h,p,i.uniformValues)}}function Ei(t,i,o,s,a,r,n,l,c){const u=s.context;a.draw(u,u.gl.TRIANGLES,r,n,l,e.CullFaceMode.disabled,c,o.id,t.layoutVertexBuffer,t.indexBuffer,i,o.paint,s.transform.zoom,t.programConfigurations.get(o.id),t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer)}function Ti(t,i,o,s,a,r,n){const l=t.context.gl,c=o.paint.get("fill-pattern"),u=c&&c.constantOr(1),h=o.getCrossfadeParameters();let p,m,d,f,y;n?(m=u&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",p=l.LINES):(m=u?"fillPattern":"fill",p=l.TRIANGLES);for(const g of s){const s=i.getTile(g);if(u&&!s.patternsLoaded())continue;const _=s.getBucket(o);if(!_)continue;t.prepareDrawTile(g);const b=_.programConfigurations.get(o.id),v=t.useProgram(m,b);u&&(t.context.activeTexture.set(l.TEXTURE0),s.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),b.updatePaintBuffers(h));const x=c.constantOr(null);if(x&&s.imageAtlas){const e=s.imageAtlas,t=e.patternPositions[x.to.toString()],i=e.patternPositions[x.from.toString()];t&&i&&b.setConstantPatternPositions(t,i)}const L=t.translatePosMatrix(g.posMatrix,s,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(n){f=_.indexBuffer2,y=_.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];d="fillOutlinePattern"===m&&u?ei(L,t,h,s,e):Yt(L,e)}else f=_.indexBuffer,y=_.segments,d=u?Jt(L,t,h,s):Kt(L);v.draw(t.context,p,a,t.stencilModeForClipping(g),r,e.CullFaceMode.disabled,d,o.id,_.layoutVertexBuffer,f,y,o.paint,t.transform.zoom,b)}}function Ci(t,i,o,s,a,r,n){const l=t.context,c=l.gl,u=o.paint.get("fill-extrusion-pattern"),h=u.constantOr(1),p=o.getCrossfadeParameters(),m=o.paint.get("fill-extrusion-opacity");for(const d of s){const s=i.getTile(d),f=s.getBucket(o);if(!f)continue;const y=f.programConfigurations.get(o.id),g=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",y);if(t.terrain){const e=t.terrain;if(!f.enableTerrain)continue;if(e.setupElevationDraw(s,g,{useMeterToDem:!0}),zi(l,i,d,f,o,e),!f.centroidVertexBuffer){const e=g.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}h&&(t.context.activeTexture.set(c.TEXTURE0),s.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),y.updatePaintBuffers(p));const _=u.constantOr(null);if(_&&s.imageAtlas){const e=s.imageAtlas,t=e.patternPositions[_.to.toString()],i=e.patternPositions[_.from.toString()];t&&i&&y.setConstantPatternPositions(t,i)}const b=t.translatePosMatrix(d.posMatrix,s,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),v=o.paint.get("fill-extrusion-vertical-gradient"),x=h?Wt(b,t,v,m,d,p,s):Qt(b,t,v,m);g.draw(l,l.gl.TRIANGLES,a,r,n,e.CullFaceMode.backCCW,x,o.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,o.paint,t.transform.zoom,y,t.terrain?f.centroidVertexBuffer:null)}}function zi(t,i,o,s,a,r){const n=[t=>{let i=t.canonical.x-1,o=t.wrap;return i<0&&(i=(1<<t.canonical.z)-1,o--),new e.OverscaledTileID(t.overscaledZ,o,t.canonical.z,i,t.canonical.y)},t=>{let i=t.canonical.x+1,o=t.wrap;return i===1<<t.canonical.z&&(i=0,o++),new e.OverscaledTileID(t.overscaledZ,o,t.canonical.z,i,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=i.getSource().maxzoom;for(const o of[0,-1,1]){if(e.overscaledZ+o<t)continue;if(o>0&&e.overscaledZ<t)continue;const s=i.getTileByID(e.calculateScaledKey(e.overscaledZ+o));if(s&&s.hasData()){const e=s.getBucket(a);if(e)return e}}},c=[0,0,0],u=(t,i)=>(c[0]=Math.min(t.min.y,i.min.y),c[1]=Math.max(t.max.y,i.max.y),c[2]=e.EXTENT-i.min.x>t.max.x?i.min.x-e.EXTENT:t.max.x,c),h=(t,i)=>(c[0]=Math.min(t.min.x,i.min.x),c[1]=Math.max(t.max.x,i.max.x),c[2]=e.EXTENT-i.min.y>t.max.y?i.min.y-e.EXTENT:t.max.y,c),p=[(e,t)=>u(e,t),(e,t)=>u(t,e),(e,t)=>h(e,t),(e,t)=>h(t,e)],m=new e.Point(0,0);let d,f,y;const g=(t,i,s,a,n)=>{const l=[[a?s:t,a?t:s,0],[a?s:i,a?i:s,0]],c=n<0?e.EXTENT+n:n,u=[a?c:(t+i)/2,a?(t+i)/2:c,0];return 0===s&&n<0||0!==s&&n>0?r.getForTilePoints(y,[u],!0,f):l.push(u),r.getForTilePoints(o,l,!0,d),Math.max(l[0][2],l[1][2],u[2])/r.exaggeration()};for(let t=0;t<4;t++){const i=s.borders[t];if(0===i.length&&(s.borderDone[t]=!0),s.borderDone[t])continue;const a=y=n[t](o),c=l(a);if(!c||!c.enableTerrain)continue;if(f=r.findDEMTileFor(a),!f||!f.dem)continue;if(!d){const e=r.findDEMTileFor(o);if(!e||!e.dem)return;d=e}const u=(t<2?1:5)-t,h=c.borders[u];let _=0;for(let o=0;o<i.length;o++){const a=s.featuresOnBorder[i[o]],r=a.borders[t];let n;for(;_<h.length&&(n=c.featuresOnBorder[h[_]],!(n.borders[u][1]>r[0]+3));)c.borderDone[u]||c.encodeCentroid(void 0,n,!1),_++;if(n&&_<h.length){const i=_;let o=0;for(;!(n.borders[u][0]>r[1]-3)&&(o++,++_!==h.length);)n=c.featuresOnBorder[h[_]];if(n=c.featuresOnBorder[h[i]],a.intersectsCount()>1||n.intersectsCount()>1||1!==o){1!==o&&(_=i),s.encodeCentroid(void 0,a,!1),c.borderDone[u]||c.encodeCentroid(void 0,n,!1);continue}const l=p[t](a,n),d=t%2?e.EXTENT-1:0;m.x=g(l[0],Math.min(e.EXTENT-1,l[1]),d,t<2,l[2]),m.y=0,s.encodeCentroid(m,a,!1),c.borderDone[u]||c.encodeCentroid(m,n,!1)}else s.encodeCentroid(void 0,a,!1)}s.borderDone[t]=s.needsCentroidUpdate=!0,c.borderDone[u]||(c.borderDone[u]=c.needsCentroidUpdate=!0)}(s.needsCentroidUpdate||!s.centroidVertexBuffer&&0!==s.centroidVertexArray.length)&&s.uploadCentroid(t)}const Ai=new e.Color(1,0,0,1),Pi=new e.Color(0,1,0,1),Bi=new e.Color(0,0,1,1),Mi=new e.Color(1,0,1,1),Di=new e.Color(0,1,1,1);function Si(e,t,i,o){Ui(e,0,t+i/2,e.transform.width,i,o)}function ki(e,t,i,o){Ui(e,t-i/2,0,i,e.transform.height,o)}function Ui(t,i,o,s,a,r){const n=t.context,l=n.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*e.browser.devicePixelRatio,o*e.browser.devicePixelRatio,s*e.browser.devicePixelRatio,a*e.browser.devicePixelRatio),n.clear({color:r}),l.disable(l.SCISSOR_TEST)}function Ri(t,i,o){const s=t.context,a=s.gl,r=o.posMatrix,n=t.useProgram("debug"),l=i.getTileByID(o.key);t.terrain&&t.terrain.setupElevationDraw(l,n);const c=e.DepthMode.disabled,u=e.StencilMode.disabled,h=t.colorModeForRenderPass();s.activeTexture.set(a.TEXTURE0),t.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),n.draw(s,a.LINE_STRIP,c,u,h,e.CullFaceMode.disabled,si(r,e.Color.red),"$debug",t.debugBuffer,t.tileBorderIndexBuffer,t.debugSegments);const p=l.latestRawTileData,m=Math.floor((p&&p.byteLength||0)/1024),d=i.getTile(o).tileSize,f=512/Math.min(d,512)*(o.overscaledZ/t.transform.zoom)*.5;let y=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(y+=" => "+o.overscaledZ),function(e,t){e.initDebugOverlayCanvas();const i=e.debugOverlayCanvas,o=e.context.gl,s=e.debugOverlayCanvas.getContext("2d");s.clearRect(0,0,i.width,i.height),s.shadowColor="white",s.shadowBlur=2,s.lineWidth=1.5,s.strokeStyle="white",s.textBaseline="top",s.font="bold 36px Open Sans, sans-serif",s.fillText(t,5,5),s.strokeText(t,5,5),e.debugOverlayTexture.update(i),e.debugOverlayTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}(t,`${y} ${m}kb`),n.draw(s,a.TRIANGLES,c,u,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,si(r,e.Color.transparent,f),"$debug",t.debugBuffer,t.quadTriangleIndexBuffer,t.debugSegments)}const Oi=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ni}=Oi;function $i(e,t,i,o){e.emplaceBack(t,i,o)}class Vi{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,$i(this.vertexArray,-1,-1,1),$i(this.vertexArray,1,-1,1),$i(this.vertexArray,-1,1,1),$i(this.vertexArray,1,1,1),$i(this.vertexArray,-1,-1,-1),$i(this.vertexArray,1,-1,-1),$i(this.vertexArray,-1,1,-1),$i(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Ni),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function Gi(t,i,o,s,a,r){const n=t.gl,l=i.paint.get("sky-atmosphere-color"),c=i.paint.get("sky-atmosphere-halo-color"),u=i.paint.get("sky-atmosphere-sun-intensity"),h=((e,t,i,o,s)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:i,u_color_tint_r:[o.r,o.g,o.b,o.a],u_color_tint_m:[s.r,s.g,s.b,s.a],u_luminance:5e-5}))(e.fromMat4([],s),a,u,l,c);n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+r,i.skyboxTexture,0),o.draw(t,n.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,h,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const ji={symbol:function(t,i,o,s,a){if("translucent"!==t.renderPass)return;const r=e.StencilMode.disabled,n=t.colorModeForRenderPass();o.layout.get("text-variable-anchor")&&function(t,i,o,s,a,r,n){const l=i.transform,c="map"===a,u="map"===r;for(const a of t){const t=s.getTile(a),r=t.getBucket(o);if(!r||!r.text||!r.text.segments.get().length)continue;const h=e.evaluateSizeForZoom(r.textSizeData,l.zoom),p=q(t,1,i.transform.zoom),m=ie(a.posMatrix,u,c,i.transform,p),d="none"!==o.layout.get("icon-text-fit")&&r.hasIconData();if(h){const i=Math.pow(2,l.zoom-t.tileID.overscaledZ),o=l.elevation;wi(r,c,u,n,e.symbolSize,l,m,a.posMatrix,i,h,d,o?e=>o.getAtTileOffset(a,e.x,e.y):e=>0)}}}(s,t,o,i,o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),a),0!==o.paint.get("icon-opacity").constantOr(1)&&Fi(t,i,o,s,!1,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),o.layout.get("icon-rotation-alignment"),o.layout.get("icon-pitch-alignment"),o.layout.get("icon-keep-upright"),r,n),0!==o.paint.get("text-opacity").constantOr(1)&&Fi(t,i,o,s,!0,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),o.layout.get("text-rotation-alignment"),o.layout.get("text-pitch-alignment"),o.layout.get("text-keep-upright"),r,n),i.map.showCollisionBoxes&&(xi(t,i,o,s,o.paint.get("text-translate"),o.paint.get("text-translate-anchor"),!0),xi(t,i,o,s,o.paint.get("icon-translate"),o.paint.get("icon-translate-anchor"),!1))},circle:function(t,i,o,s){if("translucent"!==t.renderPass)return;const a=o.paint.get("circle-opacity"),r=o.paint.get("circle-stroke-width"),n=o.paint.get("circle-stroke-opacity"),l=void 0!==o.layout.get("circle-sort-key").constantOr(1);if(0===a.constantOr(1)&&(0===r.constantOr(1)||0===n.constantOr(1)))return;const c=t.context,u=c.gl,h=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),p=e.StencilMode.disabled,m=t.colorModeForRenderPass(),d=[];for(let a=0;a<s.length;a++){const r=s[a],n=i.getTile(r),c=n.getBucket(o);if(!c)continue;const u=c.programConfigurations.get(o.id),h=ii(o),p={programConfiguration:u,program:t.useProgram("circle",u,h),layoutVertexBuffer:c.layoutVertexBuffer,indexBuffer:c.indexBuffer,uniformValues:ti(t,r,n,o),tile:n};if(l){const t=c.segments.get();for(const i of t)d.push({segments:new e.SegmentVector([i]),sortKey:i.sortKey,state:p})}else d.push({segments:c.segments,sortKey:0,state:p})}l&&d.sort((e,t)=>e.sortKey-t.sortKey);for(const i of d){const{programConfiguration:s,program:a,layoutVertexBuffer:r,indexBuffer:n,uniformValues:l,tile:d}=i.state,f=i.segments;t.terrain&&t.terrain.setupElevationDraw(d,a,{useDepthForOcclusion:!0}),a.draw(c,u.TRIANGLES,h,p,m,e.CullFaceMode.disabled,l,o.id,r,n,f,o.paint,t.transform.zoom,s)}},heatmap:function(t,i,o,s){if(0!==o.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const a=t.context,r=a.gl,n=e.StencilMode.disabled,l=new e.ColorMode([r.ONE,r.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,i){const o=e.gl;e.activeTexture.set(o.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);let s=i.heatmapFbo;if(s)o.bindTexture(o.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer);else{const a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),s=i.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4,!1),function(e,t,i,o){const s=e.gl;s.texImage2D(s.TEXTURE_2D,0,s.RGBA,t.width/4,t.height/4,0,s.RGBA,e.extRenderToTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:s.UNSIGNED_BYTE,null),o.colorAttachment.set(i)}(e,t,a,s)}}(a,t,o),a.clear({color:e.Color.transparent});for(let c=0;c<s.length;c++){const u=s[c];if(i.hasRenderableParent(u))continue;const h=i.getTile(u),p=h.getBucket(o);if(!p)continue;const m=p.programConfigurations.get(o.id),d=t.useProgram("heatmap",m),{zoom:f}=t.transform;t.terrain&&t.terrain.setupElevationDraw(h,d),d.draw(a,r.TRIANGLES,e.DepthMode.disabled,n,l,e.CullFaceMode.disabled,ai(u.posMatrix,h,f,o.paint.get("heatmap-intensity")),o.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,o.paint,t.transform.zoom,m)}a.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,i){const o=t.context,s=o.gl,a=i.heatmapFbo;if(!a)return;o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,a.colorAttachment.get()),o.activeTexture.set(s.TEXTURE1);let r=i.colorRampTexture;r||(r=i.colorRampTexture=new e.Texture(o,i.colorRamp,s.RGBA)),r.bind(s.LINEAR,s.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(o,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((t,i,o,s)=>{const a=e.create();e.ortho(a,0,t.width,t.height,0,0,1);const r=t.context.gl;return{u_matrix:a,u_world:[r.drawingBufferWidth,r.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:i.paint.get("heatmap-opacity")}})(t,i),i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,i.paint,t.transform.zoom)}(t,o))},line:function(t,i,o,s){if("translucent"!==t.renderPass)return;const a=o.paint.get("line-opacity"),r=o.paint.get("line-width");if(0===a.constantOr(1)||0===r.constantOr(1))return;const n=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=o.paint.get("line-dasharray"),u=o.paint.get("line-pattern"),h=u.constantOr(1),p=o.paint.get("line-gradient"),m=o.getCrossfadeParameters(),d=h?"linePattern":c?"lineSDF":p?"lineGradient":"line",f=t.context,y=f.gl;let g=!0;for(const a of s){const s=i.getTile(a);if(h&&!s.patternsLoaded())continue;const r=s.getBucket(o);if(!r)continue;t.prepareDrawTile(a);const _=r.programConfigurations.get(o.id),b=t.context.program.get(),v=t.useProgram(d,_),x=g||v.program!==b,L=u.constantOr(null);if(L&&s.imageAtlas){const e=s.imageAtlas,t=e.patternPositions[L.to.toString()],i=e.patternPositions[L.from.toString()];t&&i&&_.setConstantPatternPositions(t,i)}const I=t.terrain?a.posMatrix:null,w=h?li(t,s,o,m,I):c?ci(t,s,o,c,m,I):p?ni(t,s,o,I,r.lineClipsArray.length):ri(t,s,o,I);if(h)f.activeTexture.set(y.TEXTURE0),s.imageAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),_.updatePaintBuffers(m);else if(c&&(x||t.lineAtlas.dirty))f.activeTexture.set(y.TEXTURE0),t.lineAtlas.bind(f);else if(p){const s=r.gradients[o.id];let n=s.texture;if(o.gradientVersion!==s.version){let l=256;if(o.stepInterpolant){const o=i.getSource().maxzoom,s=a.canonical.z===o?Math.ceil(1<<t.transform.maxZoom-a.canonical.z):1;l=e.clamp(e.nextPowerOfTwo(r.maxLineLength/e.EXTENT*1024*s),256,f.maxTextureSize)}s.gradient=e.renderColorRamp({expression:o.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:s.gradient||void 0,clips:r.lineClipsArray}),s.texture?s.texture.update(s.gradient):s.texture=new e.Texture(f,s.gradient,y.RGBA),s.version=o.gradientVersion,n=s.texture}f.activeTexture.set(y.TEXTURE0),n.bind(o.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}v.draw(f,y.TRIANGLES,n,t.stencilModeForClipping(a),l,e.CullFaceMode.disabled,w,o.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,o.paint,t.transform.zoom,_,r.layoutVertexBuffer2),g=!1}},fill:function(t,i,o,s){const a=o.paint.get("fill-color"),r=o.paint.get("fill-opacity");if(0===r.constantOr(1))return;const n=t.colorModeForRenderPass(),l=o.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(e.Color.transparent).a&&1===r.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const a=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);Ti(t,i,o,s,a,n,!1)}if("translucent"===t.renderPass&&o.paint.get("fill-antialias")){const a=t.depthModeForSublayer(o.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);Ti(t,i,o,s,a,n,!0)}},"fill-extrusion":function(t,i,o,s){const a=o.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===t.renderPass){const r=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==a||o.paint.get("fill-extrusion-pattern").constantOr(1))Ci(t,i,o,s,r,e.StencilMode.disabled,e.ColorMode.disabled),Ci(t,i,o,s,r,t.stencilModeFor3D(),t.colorModeForRenderPass());else{const a=t.colorModeForRenderPass();Ci(t,i,o,s,r,e.StencilMode.disabled,a)}}},hillshade:function(t,i,o,s){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const a=t.context,r=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),n=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,u]="translucent"!==t.renderPass||l?[{},s]:t.stencilConfigForOverlap(s);for(const s of u){const a=i.getTile(s);if(a.needsHillshadePrepare&&"offscreen"===t.renderPass)Bt(t,a,o,r,e.StencilMode.disabled,n);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(s):c[s.overscaledZ];At(t,s,a,o,r,e,n)}}a.viewport.set([0,0,t.width,t.height])},raster:function(t,i,o,s,a,r){if("translucent"!==t.renderPass)return;if(0===o.paint.get("raster-opacity"))return;if(!s.length)return;const n=t.context,l=n.gl,c=i.getSource(),u=t.useProgram("raster"),h=t.colorModeForRenderPass(),p=t.terrain&&t.terrain.renderingToTexture,[m,d]=c instanceof P||p?[{},s]:t.stencilConfigForOverlap(s),f=d[d.length-1].overscaledZ,y=!t.options.moving;for(const s of d){const a=p?e.DepthMode.disabled:t.depthModeForSublayer(s.overscaledZ-f,1===o.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),d=i.getTile(s);if(p&&(!d||!d.hasData()))continue;const g=p?s.posMatrix:t.transform.calculatePosMatrix(s.toUnwrapped(),y),_=t.terrain&&p?t.terrain.stencilModeForRTTOverlap(s):m[s.overscaledZ],b=r?0:o.paint.get("raster-fade-duration");d.registerFadeDuration(b);const v=i.findLoadedParent(s,0),x=Nt(d,v,i,t.transform,b);let L,I;t.terrain&&t.terrain.prepareDrawTile(s);const w="nearest"===o.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;n.activeTexture.set(l.TEXTURE0),d.texture.bind(w,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),n.activeTexture.set(l.TEXTURE1),v?(v.texture.bind(w,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),L=Math.pow(2,v.tileID.overscaledZ-d.tileID.overscaledZ),I=[d.tileID.canonical.x*L%1,d.tileID.canonical.y*L%1]):d.texture.bind(w,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST);const q=pi(g,I||[0,0],L||1,x,o);c instanceof P?u.draw(n,l.TRIANGLES,a,e.StencilMode.disabled,h,e.CullFaceMode.disabled,q,o.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments):u.draw(n,l.TRIANGLES,a,_,h,e.CullFaceMode.disabled,q,o.id,t.rasterBoundsBuffer,t.quadTriangleIndexBuffer,t.rasterBoundsSegments)}},background:function(t,i,o,s){const a=o.paint.get("background-color"),r=o.paint.get("background-opacity");if(0===r)return;const n=t.context,l=n.gl,c=t.transform,u=c.tileSize,h=o.paint.get("background-pattern");if(t.isPatternMissing(h))return;const p=!h&&1===a.a&&1===r&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==p)return;const m=e.StencilMode.disabled,d=t.depthModeForSublayer(0,"opaque"===p?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),f=t.colorModeForRenderPass(),y=t.useProgram(h?"backgroundPattern":"background"),g=s||c.coveringTiles({tileSize:u});h&&(n.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));const _=o.getCrossfadeParameters();for(const i of g){const c=s?i.posMatrix:t.transform.calculatePosMatrix(i.toUnwrapped());t.prepareDrawTile(i);const p=h?_i(c,r,t,h,{tileID:i,tileSize:u},_):gi(c,r,a);y.draw(n,l.TRIANGLES,d,m,f,e.CullFaceMode.disabled,p,o.id,t.tileExtentBuffer,t.quadTriangleIndexBuffer,t.tileExtentSegments)}},sky:function(t,i,o){const s=o.paint.get("sky-opacity");if(0===s)return;const a=t.context,r=o.paint.get("sky-type"),n=new e.DepthMode(a.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),l=t.frameCounter/1e3%1;"atmosphere"===r?"offscreen"===t.renderPass?o.needsSkyboxCapture(t)&&(function(t,i,o,s){const a=t.context,r=a.gl;let n=i.skyboxFbo;if(!n){n=i.skyboxFbo=a.createFramebuffer(32,32,!1),i.skyboxGeometry=new Vi(a),i.skyboxTexture=a.gl.createTexture(),r.bindTexture(r.TEXTURE_CUBE_MAP,i.skyboxTexture),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,r.LINEAR);for(let e=0;e<6;++e)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,r.RGBA,32,32,0,r.RGBA,r.UNSIGNED_BYTE,null)}a.bindFramebuffer.set(n.framebuffer),a.viewport.set([0,0,32,32]);const l=i.getCenter(t,!0),c=t.useProgram("skyboxCapture"),u=new Float64Array(16);e.identity(u),e.rotateY(u,u,.5*-Math.PI),Gi(a,i,c,u,l,0),e.identity(u),e.rotateY(u,u,.5*Math.PI),Gi(a,i,c,u,l,1),e.identity(u),e.rotateX(u,u,.5*-Math.PI),Gi(a,i,c,u,l,2),e.identity(u),e.rotateX(u,u,.5*Math.PI),Gi(a,i,c,u,l,3),e.identity(u),Gi(a,i,c,u,l,4),e.identity(u),e.rotateY(u,u,Math.PI),Gi(a,i,c,u,l,5),a.viewport.set([0,0,t.width,t.height])}(t,o),o.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,i,o,s,a){const r=t.context,n=r.gl,l=t.transform,c=t.useProgram("skybox");r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_CUBE_MAP,i.skyboxTexture);const u=((e,t,i,o,s)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:o,u_temporal_offset:s}))(l.skyboxMatrix,i.getCenter(t,!1),0,s,a);c.draw(r,n.TRIANGLES,o,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(t,o,n,s,l):"gradient"===r&&"sky"===t.renderPass&&function(t,i,o,s,a){const r=t.context,n=r.gl,l=t.transform,c=t.useProgram("skyboxGradient");i.skyboxGeometry||(i.skyboxGeometry=new Vi(r)),r.activeTexture.set(n.TEXTURE0);let u=i.colorRampTexture;u||(u=i.colorRampTexture=new e.Texture(r,i.colorRamp,n.RGBA)),u.bind(n.LINEAR,n.CLAMP_TO_EDGE);const h=((t,i,o,s,a)=>({u_matrix:t,u_color_ramp:0,u_center_direction:i,u_radius:e.degToRad(o),u_opacity:s,u_temporal_offset:a}))(l.skyboxMatrix,i.getCenter(t,!1),i.paint.get("sky-gradient-radius"),s,a);c.draw(r,n.TRIANGLES,o,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skyboxGradient",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(t,o,n,s,l)},debug:function(e,t,i){for(let o=0;o<i.length;o++)Ri(e,t,i[o])},custom:function(t,i,o){const s=t.context,a=o.implementation;if("offscreen"===t.renderPass){const e=a.prerender;e&&(t.setCustomLayerDefaults(),s.setColorMode(t.colorModeForRenderPass()),e.call(a,s.gl,t.transform.customLayerMatrix()),s.setDirty(),t.setBaseState())}else if("translucent"===t.renderPass){t.setCustomLayerDefaults(),s.setColorMode(t.colorModeForRenderPass()),s.setStencilMode(e.StencilMode.disabled);const i="3d"===a.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);s.setDepthMode(i),a.render(s.gl,t.transform.customLayerMatrix()),s.setDirty(),t.setBaseState(),s.bindFramebuffer.set(null)}}};class Zi{constructor(t,i){this.context=new e.Context(t),this.transform=i,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $e,this.gpuTimers={},this.frameCounter=0}updateTerrain(e,t){const i=!!e&&!!e.terrain;if(!(i||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new jt(this,e));const o=this._terrain;this.transform.elevation=i?o:null,o.update(e,this.transform,t)}get terrain(){return this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,i){if(this.width=t*e.browser.devicePixelRatio,this.height=i*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style._order)this.style._layers[e].resize()}setup(){const t=this.context,i=new e.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(e.EXTENT,0),i.emplaceBack(0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout2i4;o.emplaceBack(0,0),o.emplaceBack(e.EXTENT,0),o.emplaceBack(0,e.EXTENT),o.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(o,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const s=new e.StructArrayLayout4i8;s.emplaceBack(0,0,0,0),s.emplaceBack(e.EXTENT,0,e.EXTENT,0),s.emplaceBack(0,e.EXTENT,0,e.EXTENT),s.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=t.createVertexBuffer(s,A.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.StructArrayLayout2i4;a.emplaceBack(0,0),a.emplaceBack(1,0),a.emplaceBack(0,1),a.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(a,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const r=new e.StructArrayLayout1ui2;r.emplaceBack(0),r.emplaceBack(1),r.emplaceBack(3),r.emplaceBack(2),r.emplaceBack(0),this.tileBorderIndexBuffer=t.createIndexBuffer(r);const n=new e.StructArrayLayout3ui6;n.emplaceBack(0,1,2),n.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(n),this.emptyTexture=new e.Texture(t,{width:1,height:1,data:new Uint8Array([0,0,0,0])},t.gl.RGBA);const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now())}clearStencil(){const t=this.context,i=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const o=e.create();e.ortho(o,0,this.width,this.height,0,0,1),e.scale(o,o,[i.drawingBufferWidth,i.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(t,i.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Ot(o),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(t,i,o){if(!(i&&this.currentStencilSource!==i.id&&t.isTileClipped()&&o&&o.length))return;this.currentStencilSource=i.id;const s=this.context,a=s.gl;this.nextStencilID+o.length>256&&this.clearStencil(),s.setColorMode(e.ColorMode.disabled),s.setDepthMode(e.DepthMode.disabled);const r=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of o){const i=this._tileClippingMaskIDs[t.key]=this.nextStencilID++;r.draw(s,a.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:a.ALWAYS,mask:0},i,255,a.KEEP,a.KEEP,a.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Ot(t.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,i=this.context.gl;return new e.StencilMode({func:i.NOTEQUAL,mask:255},t,255,i.KEEP,i.KEEP,i.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const i=this.context.gl;return new e.StencilMode({func:i.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,i.KEEP,i.KEEP,i.REPLACE)}stencilConfigForOverlap(t){const i=this.context.gl,o=t.sort((e,t)=>t.overscaledZ-e.overscaledZ),s=o[o.length-1].overscaledZ,a=o[0].overscaledZ-s+1;if(a>1){this.currentStencilSource=void 0,this.nextStencilID+a>256&&this.clearStencil();const t={};for(let o=0;o<a;o++)t[o+s]=new e.StencilMode({func:i.GEQUAL,mask:255},o+this.nextStencilID,255,i.KEEP,i.KEEP,i.REPLACE);return this.nextStencilID+=a,[t,o]}return[{[s]:e.StencilMode.disabled},o]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,i,o){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const s=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(o||this.context.gl.LEQUAL,i,[s,s])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,i){this.style=t,this.options=i,this.lineAtlas=t.lineAtlas,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();const o=this.style._order,s=this.style._sourceCaches;for(const e in s){const t=s[e];t.used&&t.prepare(this.context)}const a={},r={},n={};for(const e in s){const t=s[e];a[e]=t.getVisibleCoordinates(),r[e]=a[e].slice().reverse(),n[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<o.length;e++)if(this.style._layers[o[e]].is3D()){this.opaquePassCutoff=e;break}this.terrain&&(this.terrain.updateTileBinding(n),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const e of o){const i=this.style._layers[e],o=t._getLayerSourceCache(i);if(!i.hasOffscreenPass()||i.isHidden(this.transform.zoom))continue;const s=o?r[o.id]:void 0;("custom"===i.type||i.isSky()||s&&s.length)&&this.renderLayer(this,o,i,s)}for(this.context.bindFramebuffer.set(null),this.context.clear({color:i.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.depthRangeFor3D=[0,1-(t._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=o.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[o[this.currentLayer]],i=t._getLayerSourceCache(e);if(this.terrain&&this.terrain.renderLayer(e,i)||e.isSky())continue;const s=i?r[i.id]:void 0;this._renderTileClippingMasks(e,i,s),this.renderLayer(this,i,e,s)}if(this.renderPass="sky",this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){const e=this.style._layers[o[this.currentLayer]],i=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,i,e,i?r[i.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<o.length;this.currentLayer++){const e=this.style._layers[o[this.currentLayer]],i=t._getLayerSourceCache(e);if(this.terrain&&this.terrain.renderLayer(e,i)||e.isSky())continue;const s=i?("symbol"===e.type?n:r)[i.id]:void 0;this._renderTileClippingMasks(e,i,i?a[i.id]:void 0),this.renderLayer(this,i,e,s)}if(this.options.showTileBoundaries||this.options.showQueryGeometry){let i=null;e.values(this.style._layers).forEach(e=>{const o=t._getLayerSourceCache(e);o&&!e.isHidden(this.transform.zoom)&&(!i||i.getSource().maxzoom<o.getSource().maxzoom)&&(i=o)}),i&&this.options.showTileBoundaries&&ji.debug(this,i,i.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Si(e,e.transform.height-(t.top||0),3,Ai),Si(e,t.bottom||0,3,Pi),ki(e,t.left||0,3,Bi),ki(e,e.transform.width-(t.right||0),3,Mi);const i=e.transform.centerPoint;!function(e,t,i,o){Ui(e,t-1,i-10,2,20,o),Ui(e,t-10,i-1,20,2,o)}(e,i.x,e.transform.height-i.y,Di)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%e.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,i,o){i.isHidden(this.transform.zoom)||("background"===i.type||"sky"===i.type||"custom"===i.type||o&&o.length)&&(this.id=i.id,this.gpuTimingStart(i),ji[i.type](e,t,i,o,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let i=this.gpuTimers[e.id];i||(i=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),i.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,i.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}queryGpuTimers(e){const t={};for(const i in e){const o=e[i],s=this.context.extTimerQuery,a=s.getQueryObjectEXT(o.query,s.QUERY_RESULT_EXT)/1e6;s.deleteQueryEXT(o.query),t[i]=a}return t}translatePosMatrix(t,i,o,s,a){if(!o[0]&&!o[1])return t;const r=a?"map"===s?this.transform.angle:0:"viewport"===s?-this.transform.angle:0;if(r){const e=Math.sin(r),t=Math.cos(r);o=[o[0]*t-o[1]*e,o[0]*e+o[1]*t]}const n=[a?o[0]:q(i,o[0],this.transform.zoom),a?o[1]:q(i,o[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,n),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const t=this.imageManager.getPattern(e.from.toString()),i=this.imageManager.getPattern(e.to.toString());return!t||!i}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=[];return this.terrain&&!this.terrain.renderingToTexture&&t.push("TERRAIN"),e&&t.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&t.push("OVERDRAW_INSPECTOR"),t}useProgram(e,t,i){this.cache=this.cache||{};const o=i||[],s=this.currentGlobalDefines().concat(o),a=Ht.cacheKey(e,s,t);return this.cache[a]||(this.cache[a]=new Ht(this.context,e,Tt[e],t,bi[e],s)),this.cache[a]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}prepareDrawTile(e){this.terrain&&this.terrain.prepareDrawTile(e)}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){this.frameCopies.push(this.canvasCopy()),this.tileLoaded=!1}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}}class Hi{constructor(e=0,t=0,i=0,o=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(i)||i<0||isNaN(o)||o<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=i,this.right=o}interpolate(t,i,o){return null!=i.top&&null!=t.top&&(this.top=e.number(t.top,i.top,o)),null!=i.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,i.bottom,o)),null!=i.left&&null!=t.left&&(this.left=e.number(t.left,i.left,o)),null!=i.right&&null!=t.right&&(this.right=e.number(t.right,i.right,o)),this}getCenter(t,i){const o=e.clamp((this.left+t-this.right)/2,0,t),s=e.clamp((this.top+i-this.bottom)/2,0,i);return new e.Point(o,s)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new Hi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Xi(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}function Qi(e,t,i){e[4*t+0]=i[0],e[4*t+1]=i[1],e[4*t+2]=i[2],e[4*t+3]=i[3]}function Wi(t,i){const o=Xi(t,3);e.fromQuat(t,i),Qi(t,3,o)}function Ki(e,t){Qi(e,3,[t[0],t[1],t[2],1])}function Ji(t,i){const o=e.identity$1([]);return e.rotateZ$1(o,o,-i),e.rotateX$1(o,o,-t),o}function Yi(t,i){const o=[t[0],t[1],0],s=[i[0],i[1],0];if(e.length(o)>=1e-15){const t=e.normalize([],o);e.scale$2(s,t,e.dot(s,t)),i[0]=s[0],i[1]=s[1]}const a=e.cross([],i,t);if(e.len(a)<1e-15)return null;const r=Math.atan2(-a[1],a[0]);return Ji(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),r)}class eo{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){this._position=this._renderWorldCopies?function(t){if(!t)return;const i=Array.isArray(t)?new e.MercatorCoordinate(t[0],t[1],t[2]):t;return i.x=e.wrap(i.x,0,1),i}(t):t}lookAtPoint(t,i){if(this.orientation=null,!this.position)return;const o=this._elevation?this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(t)):0,s=this.position,a=e.MercatorCoordinate.fromLngLat(t,o),r=[a.x-s.x,a.y-s.y,a.z-s.z];i||(i=[0,0,1]),i[2]=Math.abs(i[2]),this.orientation=Yi(r,i)}setPitchBearing(t,i){this.orientation=Ji(e.degToRad(t),e.degToRad(-i))}}class to{constructor(t,i){this._transform=e.identity([]),this._orientation=e.identity$1([]),i&&(this._orientation=i,Wi(this._transform,this._orientation)),t&&Ki(this._transform,t)}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const e=Xi(this._transform,3);return[e[0],e[1],e[2]]}set position(e){Ki(this._transform,e)}get orientation(){return this._orientation}set orientation(e){this._orientation=e,Wi(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Ji(e,t),Wi(this._transform,this._orientation)}forward(){const e=Xi(this._transform,2);return[-e[0],-e[1],-e[2]]}up(){const e=Xi(this._transform,1);return[-e[0],-e[1],-e[2]]}right(){const e=Xi(this._transform,0);return[e[0],e[1],e[2]]}getCameraToWorld(t,i){const o=new Float64Array(16);return e.invert(o,this.getWorldToCamera(t,i)),o}getWorldToCamera(t,i){const o=new Float64Array(16),s=new Float64Array(4),a=this.position;return e.conjugate(s,this._orientation),e.scale$2(a,a,-t),e.fromQuat(o,s),e.translate(o,o,a),o[1]*=-1,o[5]*=-1,o[9]*=-1,o[13]*=-1,o[8]*=i,o[9]*=i,o[10]*=i,o[11]*=i,o}getCameraToClipPerspective(t,i,o,s){const a=new Float64Array(16);return e.perspective(a,t,i,o,s),a}clone(){return new to([...this.position],[...this.orientation])}}class io{constructor(t,i,o,s,a){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===a||a,this._minZoom=t||0,this._maxZoom=i||22,this._minPitch=null==o?0:o,this._maxPitch=null==s?60:s,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Hi,this._posMatrixCache={},this._alignedPosMatrixCache={},this._camera=new to,this._centerAltitude=0,this.cameraElevationReference="ground"}clone(){const e=new io(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._cameraZoom=this._cameraZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,e?this._updateCenterElevation()&&this._updateCameraOnTerrain():(this._cameraZoom=null,this._centerAltitude=0),this._calcMatrices())}updateElevation(e){this._terrainEnabled()&&null==this._cameraZoom&&this._updateCenterElevation()&&this._updateCameraOnTerrain(),e&&this._constrainCameraAltitude(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.Point(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(t){const i=-e.wrap(t,-180,180)*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const i=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCenterElevation(){if(!this._elevation)return!1;const t=this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(this.center),-1);return-1===t?(this._cameraZoom=null,!1):(this._centerAltitude=t,!0)}_updateCameraOnTerrain(){const t=this.cameraToCenterDistance/this.worldSize,i=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat);this._cameraZoom=this._zoomFromMercatorZ(i+t)}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCenterElevation()?this._updateCameraOnTerrain():this._cameraZoom=null:this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._cameraZoom||!this._elevation)return;const t=this._cameraZoom,i=this._elevation.getAtPoint(e.MercatorCoordinate.fromLngLat(this.center)),o=e.mercatorZfromAltitude(i,this.center.lat),s=this._mercatorZfromZoom(t),a=this._mercatorZfromZoom(this._maxZoom),r=Math.max(s-o,a);this._setZoom(this._zoomFromMercatorZ(r))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const i=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let o;o=t.z<this._camera.position[2]?[i.x,i.y,i.z]:[t.x,t.y,t.z];const s=e.length(e.sub([],this._camera.position,o));return e.clamp(this._zoomFromMercatorZ(s),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let i=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(i=this._setCameraOrientation(t.orientation)),t.position){const o=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(o,this._camera.position)||(this._setCameraPosition(o),i=!0)}i&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,i=new eo;return i.position=new e.MercatorCoordinate(t[0],t[1],t[2]),i.orientation=this._camera.orientation,i._elevation=this.elevation,i._renderWorldCopies=this._renderWorldCopies,i}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const i=e.transformQuat([],[0,0,-1],t),o=e.transformQuat([],[0,-1,0],t);if(o[2]<0)return!1;const s=Yi(i,o);return!!s&&(this._camera.orientation=s,!0)}_setCameraPosition(t){const i=this.zoomScale(this.minZoom)*this.tileSize,o=this.zoomScale(this.maxZoom)*this.tileSize,s=this.cameraToCenterDistance;t[2]=e.clamp(t[2],s/o,s/i),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,i){this._unmodified=!1,this._edgeInsets.interpolate(e,t,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const i=[new e.UnwrappedTileID(0,t)];if(this._renderWorldCopies){const o=this.pointCoordinate(new e.Point(0,0)),s=this.pointCoordinate(new e.Point(this.width,0)),a=this.pointCoordinate(new e.Point(this.width,this.height)),r=this.pointCoordinate(new e.Point(0,this.height)),n=Math.floor(Math.min(o.x,s.x,a.x,r.x)),l=Math.floor(Math.max(o.x,s.x,a.x,r.x)),c=1;for(let o=n-c;o<=l+c;o++)0!==o&&i.push(new e.UnwrappedTileID(o,t))}return i}coveringTiles(t){let i=this.coveringZoomLevel(t);const o=i,s=!!t.useElevationData;if(void 0!==t.minzoom&&i<t.minzoom)return[];void 0!==t.maxzoom&&i>t.maxzoom&&(i=t.maxzoom);const a=e.MercatorCoordinate.fromLngLat(this.center),r=1<<i,n=[r*a.x,r*a.y,0],l=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i),c=this.pointCoordinate(this.getCameraPoint()),u=r*e.mercatorZfromAltitude(1,this.center.lat),h=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),p=[r*c.x,r*c.y,h],m=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),d=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation?i:0,f=this.elevation?1e4*this.elevation.exaggeration():0,y=t=>({aabb:new e.Aabb([t*r,0,-f],[(t+1)*r,r,f]),zoom:0,x:0,y:0,wrap:t,fullyVisible:!1}),g=[],_=[],b=i,v=t.reparseOverscaled?o:i,x=(e,t)=>{if(!this._elevation)return;const i=this._elevation.getMinMaxForTile(t);i&&(e.min[2]=i.min,e.max[2]=i.max,e.center[2]=(e.min[2]+e.max[2])/2)},L=e=>e*e,I=L((h-this._centerAltitude)*u),w=(e,t)=>{if(t*L(.707)<e)return 1;const i=Math.sqrt(t/e);return i/(1/.707+(Math.pow(1.1,i-1/.707+1)-1)/(1.1-1)-1)};if(this._renderWorldCopies)for(let e=1;e<=3;e++)g.push(y(-e)),g.push(y(e));for(g.push(y(0));g.length>0;){const o=g.pop(),a=o.x,r=o.y;let c=o.fullyVisible;if(!c){const e=o.aabb.intersects(l);if(0===e)continue;c=2===e}let h=!0;if(d<=o.zoom&&o.zoom<b){const e=o.aabb.distanceX(p),t=o.aabb.distanceY(p);let i=I;s&&(i=L(o.aabb.distanceZ(p)*u));const a=e*e+t*t+i;h=a<L((1<<b-o.zoom)*m*w(Math.max(i,I),a))}if(o.zoom!==b&&h)for(let t=0;t<4;t++){const i=(a<<1)+t%2,n=(r<<1)+(t>>1),l=o.aabb.quadrant(t);let u=null;s&&o.zoom>b-6&&(u=new e.OverscaledTileID(o.zoom+1===b?v:o.zoom+1,o.wrap,o.zoom+1,i,n),x(l,u)),g.push({aabb:l,zoom:o.zoom+1,x:i,y:n,wrap:o.wrap,fullyVisible:c,tileID:u})}else{const s=o.zoom===b?v:o.zoom;if(t.minzoom&&t.minzoom>s)continue;const l=n[0]-(.5+a+(o.wrap<<o.zoom))*(1<<i-o.zoom),c=n[1]-.5-r,u=o.tileID?o.tileID:new e.OverscaledTileID(s,o.wrap,o.zoom,a,r);_.push({tileID:u,distanceSq:l*l+c*c})}}return _.sort((e,t)=>e.distanceSq-t.distanceSq).map(e=>e.tileID)}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const i=e.clamp(t.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(t.lng)*this.worldSize,e.mercatorYfromLat(i)*this.worldSize)}unproject(t){return new e.MercatorCoordinate(t.x/this.worldSize,t.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}setLocationAtPoint(t,i){const o=this.pointCoordinate(i),s=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(t),r=new e.MercatorCoordinate(a.x-(o.x-s.x),a.y-(o.y-s.y));this.center=this.coordinateLocation(r),this._renderWorldCopies&&(this.center=this.center.wrap())}setLocation(e){this.center=this.coordinateLocation(e),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e){return this._coordinatePoint(this.locationCoordinate(e),!1)}locationPoint3D(e){return this._coordinatePoint(this.locationCoordinate(e),!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t){return e.MercatorCoordinate.fromLngLat(t)}coordinateLocation(e){return e.toLngLat()}pointRayIntersection(t,i){const o=null!=i?i:this._centerAltitude,s=[t.x,t.y,0,1],a=[t.x,t.y,1,1];e.transformMat4(s,s,this.pixelMatrixInverse),e.transformMat4(a,a,this.pixelMatrixInverse);const r=a[3];e.scale$1(s,s,1/s[3]),e.scale$1(a,a,1/r);const n=s[2],l=a[2];return{p0:s,p1:a,t:n===l?0:(o-n)/(l-n)}}screenPointToMercatorRay(t){const i=[t.x,t.y,0,1],o=[t.x,t.y,1,1];return e.transformMat4(i,i,this.pixelMatrixInverse),e.transformMat4(o,o,this.pixelMatrixInverse),e.scale$1(i,i,1/i[3]),e.scale$1(o,o,1/o[3]),i[2]=e.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,o[2]=e.mercatorZfromAltitude(o[2],this._center.lat)*this.worldSize,e.scale$1(i,i,1/this.worldSize),e.scale$1(o,o,1/this.worldSize),new e.Ray([i[0],i[1],i[2]],e.normalize([],e.sub([],o,i)))}rayIntersectionCoordinate(t){const{p0:i,p1:o,t:s}=t,a=e.mercatorZfromAltitude(i[2],this._center.lat),r=e.mercatorZfromAltitude(o[2],this._center.lat);return new e.MercatorCoordinate(e.number(i[0],o[0],s)/this.worldSize,e.number(i[1],o[1],s)/this.worldSize,e.number(a,r,s))}pointCoordinate(t){const i=this.horizonLineFromTop(),o=i>t.y?new e.Point(t.x,i):t;return this.rayIntersectionCoordinate(this.pointRayIntersection(o))}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);const i=this.elevation;let o=this.elevation.pointCoordinate(t);if(o)return new e.MercatorCoordinate(o[0],o[1],o[2]);let s=0,a=this.horizonLineFromTop();if(t.y>a)return this.pointCoordinate(t);const r=.02*a,n=t.clone();for(let t=0;t<10&&a-s>r;t++){n.y=e.number(s,a,.66);const t=i.pointCoordinate(n);t?(a=n.y,o=t):s=n.y}return o?new e.MercatorCoordinate(o[0],o[1],o[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){if(this.elevation)return!this.elevation.pointCoordinate(e);{const t=this.horizonLineFromTop();return e.y<t}}_coordinatePoint(t,i){const o=i&&this.elevation?this.elevation.getAtPoint(t,this._centerAltitude):this._centerAltitude,s=[t.x*this.worldSize,t.y*this.worldSize,o+t.toAltitude(),1];return e.transformMat4(s,s,this.pixelMatrix),s[3]>0?new e.Point(s[0]/s[3],s[1]/s[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}getBounds(){return this._terrainEnabled()?this._getBounds3D():(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))}_getBounds3D(){const t=this.elevation,i=t.visibleDemTiles.reduce((e,t)=>{if(t.dem){const i=t.dem.tree;e.min=Math.min(e.min,i.minimums[0]),e.max=Math.max(e.max,i.maximums[0])}return e},{min:Number.MAX_VALUE,max:0});i.min*=t.exaggeration(),i.max*=t.exaggeration();const o=this.horizonLineFromTop();return[new e.Point(0,o),new e.Point(this.width,o),new e.Point(this.width,this.height),new e.Point(0,this.height)].reduce((e,t)=>e.extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(t,i.min)))).extend(this.coordinateLocation(this.rayIntersectionCoordinate(this.pointRayIntersection(t,i.max)))),new e.LngLatBounds)}horizonLineFromTop(){const e=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y;return Math.max(0,this.height/2-.97*e)}getMaxBounds(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(t,i=!1){const o=t.key,s=i?this._alignedPosMatrixCache:this._posMatrixCache;if(s[o])return s[o];const a=t.canonical,r=this.worldSize/this.zoomScale(a.z),n=a.x+Math.pow(2,a.z)*t.wrap,l=e.identity(new Float64Array(16));return e.translate(l,l,[n*r,a.y*r,0]),e.scale(l,l,[r/e.EXTENT,r/e.EXTENT,1]),e.multiply(l,i?this.alignedProjMatrix:this.projMatrix,l),s[o]=new Float32Array(l),s[o]}customLayerMatrix(){return this.mercatorMatrix.slice()}recenterOnTerrain(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const i=this._camera.position,o=this._camera.forward();if(i.z<=0||o[2]>=0)return;const s=e.mercatorZfromAltitude(1,this._center.lat);i[2]/=s,o[2]/=s,e.normalize(o,o);const a=t.raycast(i,o,t.exaggeration());if(a){const t=e.scaleAndAdd([],i,o,a),s=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),r=this._camera.position,n=s.z+e.length([s.x-r[0],s.y-r[1],s.z-r[2]]);this._cameraZoom=this._zoomFromMercatorZ(n),this._centerAltitude=s.toAltitude(),this._center=s.toLngLat(),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCameraAltitude(){if(!this._elevation)return;const t=this._elevation;this._updateCameraState();const i=t.getAtPoint(this._camera.mercatorPosition),o=this._minimumHeightOverTerrain()*Math.cos(e.degToRad(this._maxPitch)),s=e.mercatorZfromAltitude(i,this._center.lat),a=this._camera.position[2]-s;if(a<o){const t=e.MercatorCoordinate.fromLngLat(this._center,this._centerAltitude),i=this._camera.mercatorPosition,s=[t.x-i.x,t.y-i.y,t.z-i.z],r=e.length(s);s[2]-=o-a;const n=e.length(s);if(0===n)return;e.scale$2(s,s,r/n),this._camera.position=[t.x-s[0],t.y-s[1],t.z-s[2]],this._camera.orientation=Yi(s,this._camera.up()),this._updateStateFromCamera()}}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let t,i,o,s,a=-90,r=90,n=-180,l=180;const c=this.size,u=this._unmodified;if(this.latRange){const i=this.latRange;a=e.mercatorYfromLat(i[1])*this.worldSize,r=e.mercatorYfromLat(i[0])*this.worldSize,t=r-a<c.y?c.y/(r-a):0}if(this.lngRange){const t=this.lngRange;n=e.mercatorXfromLng(t[0])*this.worldSize,l=e.mercatorXfromLng(t[1])*this.worldSize,i=l-n<c.x?c.x/(l-n):0}const h=this.point,p=Math.max(i||0,t||0);if(p)return this.center=this.unproject(new e.Point(i?(l+n)/2:h.x,t?(r+a)/2:h.y)),this.zoom+=this.scaleZoom(p),this._unmodified=u,void(this._constraining=!1);if(this.latRange){const e=h.y,t=c.y/2;e-t<a&&(s=a+t),e+t>r&&(s=r-t)}if(this.lngRange){const e=h.x,t=c.x/2;e-t<n&&(o=n+t),e+t>l&&(o=l-t)}void 0===o&&void 0===s||(this.center=this.unproject(new e.Point(void 0!==o?o:h.x,void 0!==s?s:h.y))),this._constrainCameraAltitude(),this._unmodified=u,this._constraining=!1}_minZoomForBounds(){const t=(e,t)=>Math.log2(e/(this.tileSize*Math.abs(t[1]-t[0])));let i=0;if(this.latRange){const o=this.latRange;i=t(this.height,[e.mercatorYfromLat(o[0]),e.mercatorYfromLat(o[1])])}let o=0;if(this.lngRange){const i=this.lngRange;o=t(this.width,[e.mercatorXfromLng(i[0]),e.mercatorXfromLng(i[1])])}return Math.max(i,o)}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;const i=e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;this._updateCameraState();const o=Math.PI/2+this._pitch,s=this.fovAboveCenter,a=this._camera.position[2]*this.worldSize/Math.cos(this._pitch),r=Math.sin(s)*a/Math.sin(e.clamp(Math.PI-o-s,.01,Math.PI-.01)),n=this.point,l=n.x,c=n.y,u=1.01*(Math.cos(Math.PI/2-this._pitch)*r+a),h=this.height/50,p=this._camera.getWorldToCamera(this.worldSize,i),m=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,h,u);m[8]=2*-t.x/this.width,m[9]=2*t.y/this.height;let d=e.mul([],m,p);this.mercatorMatrix=e.scale([],d,[this.worldSize,this.worldSize,this.worldSize/i]),this.projMatrix=d,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const f=new Float32Array(16);e.identity(f),e.scale(f,f,[1,-1,1]),e.rotateX(f,f,this._pitch),e.rotateZ(f,f,this.angle);const y=e.perspective(new Float32Array(16),this._fov,this.width/this.height,h,u);this.skyboxMatrix=e.multiply(f,y,f);const g=this.width%2/2,_=this.height%2/2,b=Math.cos(this.angle),v=Math.sin(this.angle),x=l-Math.round(l)+b*g+v*_,L=c-Math.round(c)+b*_+v*g,I=new Float64Array(d);if(e.translate(I,I,[x>.5?x-1:x,L>.5?L-1:L,0]),this.alignedProjMatrix=I,d=e.create(),e.scale(d,d,[this.width/2,-this.height/2,1]),e.translate(d,d,[1,-1,0]),this.labelPlaneMatrix=d,d=e.create(),e.scale(d,d,[1,-1,1]),e.translate(d,d,[-1,-1,0]),e.scale(d,d,[2/this.width,2/this.height,1]),this.glCoordMatrix=d,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),d=e.invert(new Float64Array(16),this.pixelMatrix),!d)throw new Error("failed to invert matrix");this.pixelMatrixInverse=d,this._posMatrixCache={},this._alignedPosMatrixCache={}}_updateCameraState(){if(!this.height)return;this._camera.setPitchBearing(this._pitch,this.angle);const t=this._camera.forward(),i=this.cameraToCenterDistance,o=this.point,s=this._mercatorZfromZoom(this._cameraZoom?this._cameraZoom:this._zoom)-e.mercatorZfromAltitude(this._centerAltitude,this.center.lat),a=this.cameraToCenterDistance/s;this._camera.position=[o.x/this.worldSize-t[0]*i/a,o.y/this.worldSize-t[1]*i/a,e.mercatorZfromAltitude(this._centerAltitude,this._center.lat)+-t[2]*i/a]}_translateCameraConstrained(t){const i=this._maxCameraBoundsDistance()*Math.cos(this._pitch),o=t[2];let s=1;o>0&&(s=Math.min((i-this._camera.position[2])/o,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,s),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,i=this._camera.forward(),{pitch:o,bearing:s}=this._camera.getPitchBearing(),a=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat),r=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),n=Math.max((t[2]-a)/Math.cos(o),r),l=this._zoomFromMercatorZ(n);e.scaleAndAdd(t,t,i,n),this._pitch=e.clamp(o,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(s,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._terrainEnabled()&&this._updateCameraOnTerrain(),this._center=new e.MercatorCoordinate(t[0],t[1],t[2]).toLngLat(),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._cameraZoom?this._cameraZoom:this._zoom)+2,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}_terrainEnabled(){return!!this._elevation}isHorizonVisibleForPoints(t,i){const o=Math.min(t.x,i.x),s=Math.max(t.x,i.x),a=Math.min(t.y,i.y),r=Math.max(t.y,i.y),n=[new e.Point(o,a),new e.Point(s,r),new e.Point(o,r),new e.Point(s,a)],l=this._renderWorldCopies?-3:0,c=this._renderWorldCopies?4:1;for(const e of n){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const i=this.rayIntersectionCoordinate(t);if(i.x<l||i.y<0||i.x>c||i.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.isHorizonVisibleForPoints(new e.Point(0,0),new e.Point(this.width,this.height))}zoomDeltaToMovement(t,i){const o=e.length(e.sub([],this._camera.position,t)),s=this._zoomFromMercatorZ(o)+i;return o-this._mercatorZfromZoom(s)}getCameraPoint(){const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))}}class oo{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(e,t){let i=!1,o=null;const s=()=>{o=null,i&&(e(),o=setTimeout(s,300),i=!1)};return()=>(i=!0,o||s(),o)}(this._updateHashUnthrottled.bind(this))}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(t){const i=this._map.getCenter(),o=Math.round(100*this._map.getZoom())/100,s=Math.ceil((o*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,s),r=Math.round(i.lng*a)/a,n=Math.round(i.lat*a)/a,l=this._map.getBearing(),c=this._map.getPitch();let u="";if(u+=t?`/${r}/${n}/${o}`:`${o}/${n}/${r}`,(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/"+Math.round(c)),this._hashName){const t=this._hashName;let i=!1;const o=e.window.location.hash.slice(1).split("&").map(e=>{const o=e.split("=")[0];return o===t?(i=!0,`${o}=${u}`):e}).filter(e=>e);return i||o.push(`${t}=${u}`),"#"+o.join("&")}return"#"+u}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map(e=>e.split("=")).forEach(t=>{t[0]===this._hashName&&(e=t)}),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._getCurrentHash();if(e.length>=3&&!e.some(e=>isNaN(e))){const t=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(e[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:t,pitch:+(e[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());try{e.window.history.replaceState(e.window.history.state,null,t)}catch(e){}}}const so={linearity:.3,easing:e.bezier(0,0,.3,1)},ao=e.extend({deceleration:2500,maxSpeed:1400},so),ro=e.extend({deceleration:20,maxSpeed:1400},so),no=e.extend({deceleration:1e3,maxSpeed:360},so),lo=e.extend({deceleration:1e3,maxSpeed:90},so);class co{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,i=e.browser.now();for(;t.length>0&&i-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)i.zoom+=e.zoomDelta||0,i.bearing+=e.bearingDelta||0,i.pitch+=e.pitchDelta||0,e.panDelta&&i.pan._add(e.panDelta),e.around&&(i.around=e.around),e.pinchAround&&(i.pinchAround=e.pinchAround);const o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(i.pan.mag()){const a=ho(i.pan.mag(),o,e.extend({},ao,t||{}));s.offset=i.pan.mult(a.amount/i.pan.mag()),s.center=this._map.transform.center,uo(s,a)}if(i.zoom){const e=ho(i.zoom,o,ro);s.zoom=this._map.transform.zoom+e.amount,uo(s,e)}if(i.bearing){const t=ho(i.bearing,o,no);s.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),uo(s,t)}if(i.pitch){const e=ho(i.pitch,o,lo);s.pitch=this._map.transform.pitch+e.amount,uo(s,e)}if(s.zoom||s.bearing){const e=void 0===i.pinchAround?i.around:i.pinchAround;s.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),e.extend(s,{noMoveStart:!0})}}function uo(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function ho(t,i,o){const{maxSpeed:s,linearity:a,deceleration:r}=o,n=e.clamp(t*a/(i/1e3),-s,s),l=Math.abs(n)/(r*a);return{easing:o.easing,duration:1e3*l,amount:n*(l/2)}}class po extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,s,a={}){const r=i.mousePos(o.getCanvasContainer(),s),n=o.unproject(r);super(t,e.extend({point:r,lngLat:n,originalEvent:s},a)),this._defaultPrevented=!1,this.target=o}}class mo extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,o,s){const a="touchend"===t?s.changedTouches:s.touches,r=i.touchPos(o.getCanvasContainer(),a),n=r.map(e=>o.unproject(e)),l=r.reduce((e,t,i,o)=>e.add(t.div(o.length)),new e.Point(0,0));super(t,{points:r,point:l,lngLats:n,lngLat:o.unproject(l),originalEvent:s}),this._defaultPrevented=!1}}class fo extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,i){super(e,{originalEvent:i}),this._defaultPrevented=!1}}class yo{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new fo(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new po(e.type,this._map,e))}mouseup(e){this._map.fire(new po(e.type,this._map,e))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||this._map.fire(new po(e.type,this._map,e))}dblclick(e){return this._firePreventable(new po(e.type,this._map,e))}mouseover(e){this._map.fire(new po(e.type,this._map,e))}mouseout(e){this._map.fire(new po(e.type,this._map,e))}touchstart(e){return this._firePreventable(new mo(e.type,this._map,e))}touchmove(e){this._map.fire(new mo(e.type,this._map,e))}touchend(e){this._map.fire(new mo(e.type,this._map,e))}touchcancel(e){this._map.fire(new mo(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class go{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,delete this._contextMenuEvent}mousemove(e){this._map.fire(new po(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new po("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new po(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class _o{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(i.disableDrag(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const o=t;if(this._lastPos.equals(o)||!this._box&&o.dist(this._startPos)<this._clickTolerance)return;const s=this._startPos;this._lastPos=o,this._box||(this._box=i.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const a=Math.min(s.x,o.x),r=Math.max(s.x,o.x),n=Math.min(s.y,o.y),l=Math.max(s.y,o.y);i.setTransform(this._box,`translate(${a}px,${n}px)`),this._box.style.width=r-a+"px",this._box.style.height=l-n+"px"}mouseupWindow(t,o){if(!this._active)return;if(0!==t.button)return;const s=this._startPos,a=o;if(this.reset(),i.suppressClick(),s.x!==a.x||s.y!==a.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(s,a,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(i.remove(this._box),this._box=null),i.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(t,i){return this._map.fire(new e.Event(t,{originalEvent:i}))}}function bo(e,t){const i={};for(let o=0;o<e.length;o++)i[e[o].identifier]=t[o];return i}class vo{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(t,i,o){(this.centroid||o.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=t.timeStamp),o.length===this.numTouches&&(this.centroid=function(t){const i=new e.Point(0,0);for(const e of t)i._add(e);return i.div(t.length)}(i),this.touches=bo(o,i)))}touchmove(e,t,i){if(this.aborted||!this.centroid)return;const o=bo(i,t);for(const e in this.touches){const t=this.touches[e],i=o[e];(!i||i.dist(t)>30)&&(this.aborted=!0)}}touchend(e,t,i){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class xo{constructor(e){this.singleTap=new vo(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,t,i){this.singleTap.touchstart(e,t,i)}touchmove(e,t,i){this.singleTap.touchmove(e,t,i)}touchend(e,t,i){const o=this.singleTap.touchend(e,t,i);if(o){const t=e.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(o)<30;if(t&&i||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=o,this.count===this.numTaps)return this.reset(),o}}}class Lo{constructor(){this._zoomIn=new xo({numTouches:1,numTaps:2}),this._zoomOut=new xo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,i){this._zoomIn.touchstart(e,t,i),this._zoomOut.touchstart(e,t,i)}touchmove(e,t,i){this._zoomIn.touchmove(e,t,i),this._zoomOut.touchmove(e,t,i)}touchend(e,t,i){const o=this._zoomIn.touchend(e,t,i),s=this._zoomOut.touchend(e,t,i);return o?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(o)},{originalEvent:e})}):s?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(s)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Io={0:1,2:2};class wo{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const o=i.mouseButton(e);this._correctButton(e,o)&&(this._lastPoint=t,this._eventButton=o)}mousemoveWindow(e,t){const i=this._lastPoint;if(i)if(e.preventDefault(),function(e,t){const i=Io[t];return void 0===e.buttons||(e.buttons&i)!==i}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(i,t)}mouseupWindow(e){this._lastPoint&&i.mouseButton(e)===this._eventButton&&(this._moved&&i.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qo extends wo{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class Fo extends wo{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const i=.8*(t.x-e.x);if(i)return this._active=!0,{bearingDelta:i}}contextmenu(e){e.preventDefault()}}class Eo extends wo{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const i=-.5*(t.y-e.y);if(i)return this._active=!0,{pitchDelta:i}}contextmenu(e){e.preventDefault()}}class To{constructor(e){this._minTouches=1,this._clickTolerance=e.clickTolerance||1,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)}touchstart(e,t,i){return this._calculateTransform(e,t,i)}touchmove(e,t,i){if(this._active&&!(i.length<this._minTouches))return e.preventDefault(),this._calculateTransform(e,t,i)}touchend(e,t,i){this._calculateTransform(e,t,i),this._active&&i.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,i,o){o.length>0&&(this._active=!0);const s=bo(o,i),a=new e.Point(0,0),r=new e.Point(0,0);let n=0;for(const e in s){const t=s[e],i=this._touches[e];i&&(a._add(t),r._add(t.sub(i)),n++,s[e]=t)}if(this._touches=s,n<this._minTouches||!r.mag())return;const l=r.div(n);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(n),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Co{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(e){}_move(e,t,i){return{}}touchstart(e,t,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,i){if(!this._firstTwoTouches)return;e.preventDefault();const[o,s]=this._firstTwoTouches,a=zo(i,t,o),r=zo(i,t,s);if(!a||!r)return;const n=this._aroundCenter?null:a.add(r).div(2);return this._move([a,r],n,e)}touchend(e,t,o){if(!this._firstTwoTouches)return;const[s,a]=this._firstTwoTouches,r=zo(o,t,s),n=zo(o,t,a);r&&n||(this._active&&i.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function zo(e,t,i){for(let o=0;o<e.length;o++)if(e[o].identifier===i)return t[o]}function Ao(e,t){return Math.log(e/t)/Math.LN2}class Po extends Co{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const i=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Ao(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ao(this._distance,i),pinchAround:t}}}function Bo(e,t){return 180*e.angleWith(t)/Math.PI}class Mo extends Co{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const i=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Bo(this._vector,i),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,i=Bo(e,this._startVector);return Math.abs(i)<t}}function Do(e){return Math.abs(e.y)>Math.abs(e.x)}class So extends Co{reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}_start(e){this._lastPoints=e,Do(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,t,i){const o=e[0].sub(this._lastPoints[0]),s=e[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(o,s,i.timeStamp),this._valid)return this._lastPoints=e,this._active=!0,{pitchDelta:(o.y+s.y)/2*-.5}}gestureBeginsVertically(e,t,i){if(void 0!==this._valid)return this._valid;const o=e.mag()>=2,s=t.mag()>=2;if(!o&&!s)return;if(!o||!s)return void 0===this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const a=e.y>0==t.y>0;return Do(e)&&Do(t)&&a}}const ko={panStep:100,bearingStep:15,pitchStep:10};class Uo{constructor(){const e=ko;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,i=0,o=0,s=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?i=-1:(e.preventDefault(),s=-1);break;case 39:e.shiftKey?i=1:(e.preventDefault(),s=1);break;case 38:e.shiftKey?o=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?o=-1:(e.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(i=0,o=0),{cameraAnimation:r=>{const n=r.getZoom();r.easeTo({duration:300,easeId:"keyboardHandler",easing:Ro,zoom:t?Math.round(n)+t*(e.shiftKey?2:1):n,bearing:r.getBearing()+i*this._bearingStep,pitch:r.getPitch()+o*this._pitchStep,offset:[-s*this._panStep,-a*this._panStep],center:r.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ro(e){return e*(2-e)}class Oo{constructor(t,i){this._map=t,this._el=t.getCanvasContainer(),this._handler=i,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onTimeout"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=e&&"center"===e.around)}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(t){if(!this.isEnabled())return;let i=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const o=e.browser.now(),s=o-(this._lastWheelEventTime||0);this._lastWheelEventTime=o,0!==i&&i%4.000244140625==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":s>400?(this._type=null,this._lastValue=i,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(s*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),t.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=t,this._delta-=i,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=i.mousePos(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform,i=()=>t._terrainEnabled()?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate;let o=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==o&&(o=1/o);const s=i(),a=Math.pow(2,s),r="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):a;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(r*o))),"wheel"===this._type&&(this._startZoom=i(),this._easing=this._smoothOutEasing(200)),this._delta=0}const o="number"==typeof this._targetZoom?this._targetZoom:i(),s=this._startZoom,a=this._easing;let r,n=!1;if("wheel"===this._type&&s&&a){const t=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),i=a(t);r=e.number(s,o,i),t<1?this._frameId||(this._frameId=!0):n=!0}else r=o,n=!0;return this._active=!0,n&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!n,zoomDelta:r-i(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let i=e.ease;if(this._prevEase){const t=this._prevEase,o=(e.browser.now()-t.start)/t.duration,s=t.easing(o+.01)-t.easing(o),a=.27/Math.sqrt(s*s+1e-4)*.01,r=Math.sqrt(.0729-a*a);i=e.bezier(a,r,.25,1)}return this._prevEase={start:e.browser.now(),duration:t,easing:i},i}reset(){this._active=!1}}class No{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class $o{constructor(){this.reset()}reset(){this._active=!1}dblclick(e,t){return e.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:i.getZoom()+(e.shiftKey?-1:1),around:i.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vo{constructor(){this._tap=new xo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(e,t,i){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=t[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(e,t,i))}touchmove(e,t,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const o=t[0],s=o.y-this._swipePoint.y;return this._swipePoint=o,e.preventDefault(),this._active=!0,{zoomDelta:s/128}}}else this._tap.touchmove(e,t,i)}touchend(e,t,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(e,t,i)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Go{constructor(e,t,i){this._el=e,this._mousePan=t,this._touchPan=i}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class jo{constructor(e,t,i){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Zo{constructor(e,t,i,o){this._el=e,this._touchZoom=t,this._touchRotate=i,this._tapDragZoom=o,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ho=e=>e.zoom||e.drag||e.pitch||e.rotate;class Xo extends e.Event{}class Qo{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,i){const o=e.sub([],i,t);this.radius=e.length(o[2]<0?e.div([],o,this.constants):[o[0],o[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const i=e.scale$2([],t,this.radius);if(i[2]>0){const t=e.scale$2([],[0,0,1],e.dot(i,[0,0,1])),o=e.scale$2([],e.normalize([],[i[0],i[1],0]),this.radius),s=e.add([],i,e.scale$2([],e.sub([],e.add([],o,t),i),2));i[0]=s[0],i[1]=s[1]}return i}}function Wo(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Ko{constructor(t,o){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new co(t),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Qo,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(o),e.bindAll(["handleEvent","handleWindowEvent"],this);const s=this._el;this._listeners=[[s,"touchstart",{passive:!0}],[s,"touchmove",{passive:!1}],[s,"touchend",void 0],[s,"touchcancel",void 0],[s,"mousedown",void 0],[s,"mousemove",void 0],[s,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[s,"mouseover",void 0],[s,"mouseout",void 0],[s,"dblclick",void 0],[s,"click",void 0],[s,"keydown",{capture:!1}],[s,"keyup",void 0],[s,"wheel",{passive:!1}],[s,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[t,o,s]of this._listeners)i.addEventListener(t,o,t===e.window.document?this.handleWindowEvent:this.handleEvent,s)}destroy(){for(const[t,o,s]of this._listeners)i.removeEventListener(t,o,t===e.window.document?this.handleWindowEvent:this.handleEvent,s)}_addDefaultHandlers(e){const t=this._map,i=t.getCanvasContainer();this._add("mapEvent",new yo(t,e));const o=t.boxZoom=new _o(t,e);this._add("boxZoom",o);const s=new Lo,a=new $o;t.doubleClickZoom=new No(a,s),this._add("tapZoom",s),this._add("clickZoom",a);const r=new Vo;this._add("tapDragZoom",r);const n=t.touchPitch=new So;this._add("touchPitch",n);const l=new Fo(e),c=new Eo(e);t.dragRotate=new jo(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new qo(e),h=new To(e);t.dragPan=new Go(i,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const p=new Mo,m=new Po;t.touchZoomRotate=new Zo(i,m,p,r),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",m,["touchPan","touchRotate"]);const d=t.scrollZoom=new Oo(t,this);this._add("scrollZoom",d,["mousePan"]);const f=t.keyboard=new Uo;this._add("keyboard",f),this._add("blockableMapEvent",new go(t));for(const i of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[i]&&t[i].enable(e[i])}_add(e,t,i){this._handlers.push({handlerName:e,handler:t,allowed:i}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ho(this._eventsInProgress))||this.isZooming()}_blockedByActive(e,t,i){for(const o in e)if(o!==i&&(!t||t.indexOf(o)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,e.type+"Window")}_getMapTouches(e){const t=[];for(const i of e)this._el.contains(i.target)&&t.push(i);return t}handleEvent(e,t){if("blur"===e.type)return void this.stop(!0);this._updatingCamera=!0;const o="renderFrame"===e.type?void 0:e,s={needsRenderFrame:!1},a={},r={},n=e.touches?this._getMapTouches(e.touches):void 0,l=n?i.touchPos(this._el,n):i.mousePos(this._el,e);for(const{handlerName:i,handler:c,allowed:u}of this._handlers){if(!c.isEnabled())continue;let h;this._blockedByActive(r,u,i)?c.reset():c[t||e.type]&&(h=c[t||e.type](e,l,n),this.mergeHandlerResult(s,a,h,i,o),h&&h.needsRenderFrame&&this._triggerRenderFrame()),(h||c.isActive())&&(r[i]=c)}const c={};for(const e in this._previousActiveHandlers)r[e]||(c[e]=o);this._previousActiveHandlers=r,(Object.keys(c).length||Wo(s))&&(this._changes.push([s,a,c]),this._triggerRenderFrame()),(Object.keys(r).length||Wo(s))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=s;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(t,i,o,s,a){if(!o)return;e.extend(t,o);const r={handlerName:s,originalEvent:o.originalEvent||a};void 0!==o.zoomDelta&&(i.zoom=r),void 0!==o.panDelta&&(i.drag=r),void 0!==o.pitchDelta&&(i.pitch=r),void 0!==o.bearingDelta&&(i.rotate=r)}_applyChanges(){const t={},i={},o={};for(const[s,a,r]of this._changes)s.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(t.around=s.around),void 0!==s.aroundCoord&&(t.aroundCoord=s.aroundCoord),void 0!==s.pinchAround&&(t.pinchAround=s.pinchAround),s.noInertia&&(t.noInertia=s.noInertia),e.extend(i,a),e.extend(o,r);this._updateMapTransform(t,i,o),this._changes=[]}_updateMapTransform(t,i,o){const s=this._map,a=s.transform,r=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!Wo(t)){const e=a.zoom;a.cameraElevationReference="sea",a.recenterOnTerrain(),a.cameraElevationReference="ground",e!==a.zoom&&this._map._update(!0)}if(!Wo(t))return this._fireEvents(i,o,!0);let{panDelta:n,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,aroundCoord:p,pinchAround:m}=t;void 0!==m&&(h=m),(e=>i.drag&&!this._eventsInProgress.drag)()&&h&&(this._dragOrigin=r(a.pointCoordinate3D(h)),this._trackingEllipsoid.setup(a._camera.position,this._dragOrigin)),a.cameraElevationReference="sea",s._stop(!0),h=h||s.transform.centerPoint,c&&(a.bearing+=c),u&&(a.pitch+=u),a._updateCameraState();const d=[0,0,0];if(n){const e=a.screenPointToMercatorRay(h),t=a.screenPointToMercatorRay(h.sub(n)),i=this._trackingEllipsoid.projectRay(e.dir),o=this._trackingEllipsoid.projectRay(t.dir);d[0]=o[0]-i[0],d[1]=o[1]-i[1]}const f=a.zoom,y=[0,0,0];if(l){const t=r(p||a.pointCoordinate3D(h)),i={dir:e.normalize([],e.sub([],t,a._camera.position))},o=a.screenPointToMercatorRay(a.centerPoint);if(i.dir[2]<0){const s=e.altitudeFromMercatorZ(t[2],t[1]),n=a.rayIntersectionCoordinate(a.pointRayIntersection(a.centerPoint,s)),c=a.zoomDeltaToMovement(r(n),l)*(o.dir[2]/i.dir[2]);e.scale$2(y,i.dir,c)}else if(a._terrainEnabled()){const o=a.zoomDeltaToMovement(t,l);e.scale$2(y,i.dir,o)}}const g=e.add(d,d,y);a._translateCameraConstrained(g),l&&Math.abs(a.zoom-f)>1e-4&&a.recenterOnTerrain(),a.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(i,o,!0)}_fireEvents(t,i,o){const s=Ho(this._eventsInProgress),a=Ho(t),r={};for(const e in t){const{originalEvent:i}=t[e];this._eventsInProgress[e]||(r[e+"start"]=i),this._eventsInProgress[e]=t[e]}!s&&a&&this._fireEvent("movestart",a.originalEvent);for(const e in r)this._fireEvent(e,r[e]);a&&this._fireEvent("move",a.originalEvent);for(const e in t){const{originalEvent:i}=t[e];this._fireEvent(e,i)}const n={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:o}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=i[t]||o,n[e+"end"]=l)}for(const e in n)this._fireEvent(e,n[e]);const c=Ho(this._eventsInProgress);if(o&&(s||a)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(i(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),i(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,i){this._map.fire(new e.Event(t,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new Xo("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Jo extends e.Evented{constructor(t,i){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=i.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,i,o){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},i),o)}panTo(t,i,o){return this.easeTo(e.extend({center:t},i),o)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,i,o){return this.easeTo(e.extend({zoom:t},i),o)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,i,o){return this.easeTo(e.extend({bearing:t},i),o)}resetNorth(t,i){return this.rotateTo(0,e.extend({duration:1e3},t),i),this}resetNorthPitch(t,i){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),i),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,i){t=e.LngLatBounds.convert(t);const o=i&&i.bearing||0;return this._cameraForBoxAndBearing(t.getNorthWest(),t.getSouthEast(),o,i)}_extendCameraOptions(t){const i={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:i,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(i,t.padding),t}_cameraForBoxAndBearing(t,i,o,s){const a=this._extendCameraOptions(s),r=this.transform,n=r.padding,l=r.project(e.LngLat.convert(t)),c=r.project(e.LngLat.convert(i)),u=l.rotate(-e.degToRad(o)),h=c.rotate(-e.degToRad(o)),p=new e.Point(Math.max(u.x,h.x),Math.max(u.y,h.y)),m=new e.Point(Math.min(u.x,h.x),Math.min(u.y,h.y)),d=p.sub(m),f=(r.width-(n.left+n.right+a.padding.left+a.padding.right))/d.x,y=(r.height-(n.top+n.bottom+a.padding.top+a.padding.bottom))/d.y;if(y<0||f<0)return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const g=Math.min(r.scaleZoom(r.scale*Math.min(f,y)),a.maxZoom),_="number"==typeof a.offset.x?new e.Point(a.offset.x,a.offset.y):e.Point.convert(a.offset),b=new e.Point((a.padding.left-a.padding.right)/2,(a.padding.top-a.padding.bottom)/2).rotate(o*Math.PI/180),v=_.add(b).mult(r.scale/r.zoomScale(g));return{center:r.unproject(l.add(c).div(2).sub(v)),zoom:g,bearing:o}}_cameraForBox(t,i,o,s,a){const r=this._extendCameraOptions(a);o=o||0,s=s||0,t=e.LngLat.convert(t),i=e.LngLat.convert(i);const n=this.transform.clone();n.padding=r.padding;const l=this.getFreeCameraOptions(),c=new e.LngLat(.5*(t.lng+i.lng),.5*(t.lat+i.lat)),u=.5*(o+s);if(n._camera.position[2]<e.mercatorZfromAltitude(u,c.lat))return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");l.lookAtPoint(c),n.setFreeCameraOptions(l);const h=e.MercatorCoordinate.fromLngLat(t),p=e.MercatorCoordinate.fromLngLat(i),m=n.pointRayIntersection(n.centerPoint,u),d=[(f=n.rayIntersectionCoordinate(m)).x,f.y,f.z];var f;const y=n.screenPointToMercatorRay(n.centerPoint);let g,_=0;do{const i=Math.floor(n.zoom),a=1<<i,r=Math.min(a*h.x,a*p.x),l=Math.min(a*h.y,a*p.y),c=Math.max(a*h.x,a*p.x),u=Math.max(a*h.y,a*p.y),m=new e.Aabb([r,l,o],[c,u,s]),f=e.Frustum.fromInvProjectionMatrix(n.invProjMatrix,n.worldSize,i);if(2!==m.intersects(f)){g&&(n._camera.position=e.scaleAndAdd([],n._camera.position,y.dir,-g),n._updateStateFromCamera());break}const _=e.sub([],n._camera.position,d);g=.5*e.length(_),n._camera.position=e.scaleAndAdd([],n._camera.position,y.dir,g);try{n._updateStateFromCamera()}catch(t){return void e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}}while(++_<10);return{center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}}fitBounds(e,t,i){return this._fitInternal(this.cameraForBounds(e,t),t,i)}_raycastElevationBox(t,i){const o=this.transform.elevation;if(!o)return;const s=new e.Point(t.x,i.y),a=new e.Point(i.x,t.y),r=o.pointCoordinate(t);if(!r)return;const n=o.pointCoordinate(i);if(!n)return;const l=o.pointCoordinate(s);if(!l)return;const c=o.pointCoordinate(a);if(!c)return;const u=new e.MercatorCoordinate(r[0],r[1]).toLngLat(),h=new e.MercatorCoordinate(n[0],n[1]).toLngLat(),p=new e.MercatorCoordinate(l[0],l[1]).toLngLat(),m=new e.MercatorCoordinate(c[0],c[1]).toLngLat(),d=Math.min(u.lng,Math.min(h.lng,Math.min(p.lng,m.lng))),f=Math.min(u.lat,Math.min(h.lat,Math.min(p.lat,m.lat))),y=Math.max(u.lng,Math.max(h.lng,Math.max(p.lng,m.lng))),g=Math.max(u.lat,Math.max(h.lat,Math.max(p.lat,m.lat))),_=Math.min(r[3],Math.min(n[3],Math.min(l[3],c[3]))),b=Math.max(r[3],Math.max(n[3],Math.max(l[3],c[3])));return{minLngLat:new e.LngLat(d,f),maxLngLat:new e.LngLat(y,g),minAltitude:_,maxAltitude:b}}fitScreenCoordinates(t,i,o,s,a){let r,n,l,c;const u=e.Point.convert(t),h=e.Point.convert(i),p=this._raycastElevationBox(u,h);if(p)r=p.minLngLat,n=p.maxLngLat,l=p.minAltitude,c=p.maxAltitude;else{if(this.transform.isHorizonVisibleForPoints(u,h))return this;r=this.transform.pointLocation(u),n=this.transform.pointLocation(h)}return this._fitInternal(0===this.transform.pitch?this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(t)),this.transform.pointLocation(e.Point.convert(i)),o,s):this._cameraForBox(r,n,l,c,s),s,a)}_fitInternal(t,i,o){return t?(delete(i=e.extend(t,i)).padding,i.linear?this.easeTo(i,o):this.flyTo(i,o)):this}jumpTo(t,i){this.stop();const o=this.transform;let s=!1,a=!1,r=!1;return"zoom"in t&&o.zoom!==+t.zoom&&(s=!0,o.zoom=+t.zoom),void 0!==t.center&&(o.center=e.LngLat.convert(t.center)),"bearing"in t&&o.bearing!==+t.bearing&&(a=!0,o.bearing=+t.bearing),"pitch"in t&&o.pitch!==+t.pitch&&(r=!0,o.pitch=+t.pitch),null==t.padding||o.isPaddingEqual(t.padding)||(o.padding=t.padding),this.fire(new e.Event("movestart",i)).fire(new e.Event("move",i)),s&&this.fire(new e.Event("zoomstart",i)).fire(new e.Event("zoom",i)).fire(new e.Event("zoomend",i)),a&&this.fire(new e.Event("rotatestart",i)).fire(new e.Event("rotate",i)).fire(new e.Event("rotateend",i)),r&&this.fire(new e.Event("pitchstart",i)).fire(new e.Event("pitch",i)).fire(new e.Event("pitchend",i)),this.fire(new e.Event("moveend",i))}getFreeCameraOptions(){return this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,i){this.stop();const o=this.transform,s=o.zoom,a=o.pitch,r=o.bearing;o.setFreeCameraOptions(t);const n=s!==o.zoom,l=a!==o.pitch,c=r!==o.bearing;return this.fire(new e.Event("movestart",i)).fire(new e.Event("move",i)),n&&this.fire(new e.Event("zoomstart",i)).fire(new e.Event("zoom",i)).fire(new e.Event("zoomend",i)),c&&this.fire(new e.Event("rotatestart",i)).fire(new e.Event("rotate",i)).fire(new e.Event("rotateend",i)),l&&this.fire(new e.Event("pitchstart",i)).fire(new e.Event("pitch",i)).fire(new e.Event("pitchend",i)),this.fire(new e.Event("moveend",i)),this}easeTo(t,i){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.browser.prefersReducedMotion)&&(t.duration=0);const o=this.transform,s=this.getZoom(),a=this.getBearing(),r=this.getPitch(),n=this.getPadding(),l="zoom"in t?+t.zoom:s,c="bearing"in t?this._normalizeBearing(t.bearing,a):a,u="pitch"in t?+t.pitch:r,h="padding"in t?t.padding:o.padding,p=e.Point.convert(t.offset);let m=o.centerPoint.add(p);const d=o.pointLocation(m),f=e.LngLat.convert(t.center||d);this._normalizeCenter(f);const y=o.project(d),g=o.project(f).sub(y),_=o.zoomScale(l-s);let b,v;t.around&&(b=e.LngLat.convert(t.around),v=o.locationPoint(b));const x={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||l!==s,this._rotating=this._rotating||a!==c,this._pitching=this._pitching||u!==r,this._padding=!o.isPaddingEqual(h),this._easeId=t.easeId,this._prepareEase(i,t.noMoveStart,x),this._ease(t=>{if(this._zooming&&(o.zoom=e.number(s,l,t)),this._rotating&&(o.bearing=e.number(a,c,t)),this._pitching&&(o.pitch=e.number(r,u,t)),this._padding&&(o.interpolatePadding(n,h,t),m=o.centerPoint.add(p)),b)o.setLocationAtPoint(b,v);else{const e=o.zoomScale(o.zoom-s),i=l>s?Math.min(2,_):Math.max(.5,_),a=Math.pow(i,1-t),r=o.unproject(y.add(g.mult(t*a)).mult(e));o.setLocationAtPoint(o.renderWorldCopies?r.wrap():r,m)}this._fireMoveEvents(i)},e=>{o.recenterOnTerrain(),this._afterEase(i,e)},t),this}_prepareEase(t,i,o={}){this._moving=!0,this.transform.cameraElevationReference="sea",i||o.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!o.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!o.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!o.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,i){if(this._easeId&&i&&this._easeId===i)return;delete this._easeId,this.transform.cameraElevationReference="ground";const o=this._zooming,s=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,o&&this.fire(new e.Event("zoomend",t)),s&&this.fire(new e.Event("rotateend",t)),a&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,i){if(!t.essential&&e.browser.prefersReducedMotion){const o=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(o,i)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const o=this.transform,s=this.getZoom(),a=this.getBearing(),r=this.getPitch(),n=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,o.minZoom,o.maxZoom):s,c="bearing"in t?this._normalizeBearing(t.bearing,a):a,u="pitch"in t?+t.pitch:r,h="padding"in t?t.padding:o.padding,p=o.zoomScale(l-s),m=e.Point.convert(t.offset);let d=o.centerPoint.add(m);const f=o.pointLocation(d),y=e.LngLat.convert(t.center||f);this._normalizeCenter(y);const g=o.project(f),_=o.project(y).sub(g);let b=t.curve;const v=Math.max(o.width,o.height),x=v/p,L=_.mag();if("minZoom"in t){const i=e.clamp(Math.min(t.minZoom,s,l),o.minZoom,o.maxZoom),a=v/o.zoomScale(i-s);b=Math.sqrt(a/L*2)}const I=b*b;function w(e){const t=(x*x-v*v+(e?-1:1)*I*I*L*L)/(2*(e?x:v)*I*L);return Math.log(Math.sqrt(t*t+1)-t)}function q(e){return(Math.exp(e)-Math.exp(-e))/2}function F(e){return(Math.exp(e)+Math.exp(-e))/2}const E=w(0);let T=function(e){return F(E)/F(E+b*e)},C=function(e){return v*((F(E)*(q(t=E+b*e)/F(t))-q(E))/I)/L;var t},z=(w(1)-E)/b;if(Math.abs(L)<1e-6||!isFinite(z)){if(Math.abs(v-x)<1e-6)return this.easeTo(t,i);const e=x<v?-1:1;z=Math.abs(Math.log(x/v))/b,C=function(){return 0},T=function(t){return Math.exp(e*b*t)}}return t.duration="duration"in t?+t.duration:1e3*z/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0),this._zooming=!0,this._rotating=a!==c,this._pitching=u!==r,this._padding=!o.isPaddingEqual(h),this._prepareEase(i,!1),this._ease(t=>{const p=t*z,f=1/T(p);o.zoom=1===t?l:s+o.scaleZoom(f),this._rotating&&(o.bearing=e.number(a,c,t)),this._pitching&&(o.pitch=e.number(r,u,t)),this._padding&&(o.interpolatePadding(n,h,t),d=o.centerPoint.add(m));const b=1===t?y:o.unproject(g.add(_.mult(C(p))).mult(f));o.setLocationAtPoint(o.renderWorldCopies?b.wrap():b,d),o._updateCenterElevation(),this._fireMoveEvents(i)},()=>this._afterEase(i),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const e=this._onEaseEnd;delete this._onEaseEnd,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,i,o){!1===o.animate||0===o.duration?(t(1),i()):(this._easeStart=e.browser.now(),this._easeOptions=o,this._onEaseFrame=t,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,i){t=e.wrap(t,-180,180);const o=Math.abs(t-i);return Math.abs(t-360-i)<o&&(t-=360),Math.abs(t+360-i)<o&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.lngRange)return;const i=e.lng-t.center.lng;e.lng+=i>180?-360:i<-180?360:0}}class Yo{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=i.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=i.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){i.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const i=this._map._getUIString("AttributionControl."+t);e.title=i,e.setAttribute("aria-label",i)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const o=i.reduce((e,t,o)=>(t.value&&(e+=`${t.key}=${t.value}${o<i.length-1?"&":""}`),e),"?");t.href=`${e.config.FEEDBACK_URL}/${o}${this._map._hash?this._map._hash.getHashString(!0):""}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map(e=>"string"!=typeof e?"":e)):"string"==typeof this.options.customAttribution&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const i in t){const o=t[i];if(o.used){const t=o.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort((e,t)=>e.length-t.length),e=e.filter((t,i)=>{for(let o=i+1;o<e.length;o++)if(e[o].indexOf(t)>=0)return!1;return!0});const i=e.join(" | ");i!==this._attribHTML&&(this._attribHTML=i,e.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class es{constructor(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)}onAdd(e){this._map=e,this._container=i.create("div","mapboxgl-ctrl");const t=i.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){i.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const i=e[t].getSource();if(i.hasOwnProperty("mapbox_logo")&&!i.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class ts{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,i=t?this._queue.concat(t):this._queue;for(const t of i)if(t.id===e)return void(t.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const i of t)if(!i.cancelled&&(i.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const is={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},{HTMLImageElement:os,HTMLElement:ss,ImageBitmap:as}=e.window,rs={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0};function ns(e){e.parentNode&&e.parentNode.removeChild(e)}const ls={showCompass:!0,showZoom:!0,visualizePitch:!1};class cs{constructor(t,o,s=!1){this._clickTolerance=10,this.element=o,this.mouseRotate=new Fo({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,s&&(this.mousePitch=new Eo({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener(o,"mousedown",this.mousedown),i.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),i.addEventListener(o,"touchmove",this.touchmove),i.addEventListener(o,"touchend",this.touchend),i.addEventListener(o,"touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),i.disableDrag()}move(e,t){const i=this.map,o=this.mouseRotate.mousemoveWindow(e,t);if(o&&o.bearingDelta&&i.setBearing(i.getBearing()+o.bearingDelta),this.mousePitch){const o=this.mousePitch.mousemoveWindow(e,t);o&&o.pitchDelta&&i.setPitch(i.getPitch()+o.pitchDelta)}}off(){const e=this.element;i.removeEventListener(e,"mousedown",this.mousedown),i.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),i.removeEventListener(e,"touchmove",this.touchmove),i.removeEventListener(e,"touchend",this.touchend),i.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){i.enableDrag(),i.removeEventListener(e.window,"mousemove",this.mousemove),i.removeEventListener(e.window,"mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),i.mousePos(this.element,t)),i.addEventListener(e.window,"mousemove",this.mousemove),i.addEventListener(e.window,"mouseup",this.mouseup)}mousemove(e){this.move(e,i.mousePos(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=i.touchPos(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=i.touchPos(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function us(t,i,o){if(t=new e.LngLat(t.lng,t.lat),i){const s=new e.LngLat(t.lng-360,t.lat),a=new e.LngLat(t.lng+360,t.lat),r=360*Math.ceil(Math.abs(t.lng-o.center.lng)/360),n=o.locationPoint(t).distSqr(i),l=i.x<0||i.y<0||i.x>o.width||i.y>o.height;o.locationPoint(s).distSqr(i)<n&&(l||Math.abs(s.lng-o.center.lng)<r)?t=s:o.locationPoint(a).distSqr(i)<n&&(l||Math.abs(a.lng-o.center.lng)<r)&&(t=a)}for(;Math.abs(t.lng-o.center.lng)>180;){const e=o.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=o.width&&e.y<=o.height)break;t.lng>o.center.lng?t.lng-=360:t.lng+=360}return t}const hs={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ps(e,t,i){const o=e.classList;for(const e in hs)o.remove(`mapboxgl-${i}-anchor-${e}`);o.add(`mapboxgl-${i}-anchor-${t}`)}class ms extends e.Evented{constructor(t,o){if(super(),(t instanceof e.window.HTMLElement||o)&&(t=e.extend({element:t},o)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&"auto"!==t.pitchAlignment?t.pitchAlignment:this._rotationAlignment,t&&t.element)this._element=t.element,this._offset=e.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=i.create("div"),this._element.setAttribute("aria-label","Map marker");const o=i.createNS("http://www.w3.org/2000/svg","svg"),s=41,a=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",s+"px"),o.setAttributeNS(null,"width",a+"px"),o.setAttributeNS(null,"viewBox",`0 0 ${a} ${s}`);const r=i.createNS("http://www.w3.org/2000/svg","g");r.setAttributeNS(null,"stroke","none"),r.setAttributeNS(null,"stroke-width","1"),r.setAttributeNS(null,"fill","none"),r.setAttributeNS(null,"fill-rule","evenodd");const n=i.createNS("http://www.w3.org/2000/svg","g");n.setAttributeNS(null,"fill-rule","nonzero");const l=i.createNS("http://www.w3.org/2000/svg","g");l.setAttributeNS(null,"transform","translate(3.0, 29.0)"),l.setAttributeNS(null,"fill","#000000");const c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const e of c){const t=i.createNS("http://www.w3.org/2000/svg","ellipse");t.setAttributeNS(null,"opacity","0.04"),t.setAttributeNS(null,"cx","10.5"),t.setAttributeNS(null,"cy","5.80029008"),t.setAttributeNS(null,"rx",e.rx),t.setAttributeNS(null,"ry",e.ry),l.appendChild(t)}const u=i.createNS("http://www.w3.org/2000/svg","g");u.setAttributeNS(null,"fill",this._color);const h=i.createNS("http://www.w3.org/2000/svg","path");h.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),u.appendChild(h);const p=i.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"opacity","0.25"),p.setAttributeNS(null,"fill","#000000");const m=i.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),p.appendChild(m);const d=i.createNS("http://www.w3.org/2000/svg","g");d.setAttributeNS(null,"transform","translate(6.0, 7.0)"),d.setAttributeNS(null,"fill","#FFFFFF");const f=i.createNS("http://www.w3.org/2000/svg","g");f.setAttributeNS(null,"transform","translate(8.0, 8.0)");const y=i.createNS("http://www.w3.org/2000/svg","circle");y.setAttributeNS(null,"fill","#000000"),y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"cx","5.5"),y.setAttributeNS(null,"cy","5.5"),y.setAttributeNS(null,"r","5.4999962");const g=i.createNS("http://www.w3.org/2000/svg","circle");g.setAttributeNS(null,"fill","#FFFFFF"),g.setAttributeNS(null,"cx","5.5"),g.setAttributeNS(null,"cy","5.5"),g.setAttributeNS(null,"r","5.4999962"),f.appendChild(y),f.appendChild(g),n.appendChild(l),n.appendChild(u),n.appendChild(p),n.appendChild(d),n.appendChild(f),o.appendChild(n),o.setAttributeNS(null,"height",s*this._scale+"px"),o.setAttributeNS(null,"width",a*this._scale+"px"),this._element.appendChild(o),this._offset=e.Point.convert(t&&t.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",e=>{e.preventDefault()}),this._element.addEventListener("mousedown",e=>{e.preventDefault()}),ps(this._element,this._anchor,"marker"),this._popup=null}addTo(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),i.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,i=13.5,o=Math.sqrt(Math.pow(i,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[o,-1*(t-i+o)],"bottom-right":[-o,-1*(t-i+o)],left:[i,-1*(t-i)],right:[-i,-1*(t-i)]}:this._offset}this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(e){const t=e.code,i=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==i&&13!==i||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this}_updateOcclusion(){this._occlusionTimer||(this._occlusionTimer=setTimeout(this._onOcclusionTimer.bind(this),60))}_onOcclusionTimer(){const e=this._map.transform,t=this._pos?this._pos.sub(this._transformedOffset()):null;if(t&&t.x>=0&&t.x<e.width&&t.y>=0&&t.y<e.height){const e=this._map.unproject(t),i=this._map.getFreeCameraOptions();if(i.position){const t=i.position.toLngLat(),o=t.distanceTo(e),s=t.distanceTo(this._lngLat);this._element.classList.toggle("mapboxgl-marker-occluded",o<.9*s)}}this._occlusionTimer=null}_update(e){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=us(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._transformedOffset()),this._map.transform.elevation&&this._updateOcclusion();let t="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?t=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(t=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let o="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?o="rotateX(0deg)":"map"===this._pitchAlignment&&(o=`rotateX(${this._map.getPitch()}deg)`),e&&"moveend"!==e.type||(this._pos=this._pos.round()),i.setTransform(this._element,`${hs[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${o} ${t}`)}_transformedOffset(){if(!this._defaultMarker)return this._offset;const e=this._map.transform,t=this._offset.mult(this._scale);return"map"===this._rotationAlignment&&t._rotate(e.angle),"map"===this._pitchAlignment&&(t.y*=Math.cos(e._pitch)),t}getOffset(){return this._offset}setOffset(t){return this._offset=e.Point.convert(t),this._update(),this}_onMove(t){if(!this._isDragging){const e=this._clickTolerance||this._map._clickTolerance;this._isDragging=t.point.dist(this._pointerdownPos)>=e}this._isDragging&&(this._pos=t.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(this._pos).add(this._transformedOffset()),this._pointerdownPos=e.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&"auto"!==e?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const ds={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let fs,ys=0,gs=!1;const _s={maxWidth:100,unit:"metric"};function bs(e,t,i){const o=i&&i.maxWidth||100,s=e._container.clientHeight/2,a=e.unproject([0,s]),r=e.unproject([o,s]),n=a.distanceTo(r);if(i&&"imperial"===i.unit){const i=3.2808*n;i>5280?vs(t,o,i/5280,e._getUIString("ScaleControl.Miles")):vs(t,o,i,e._getUIString("ScaleControl.Feet"))}else i&&"nautical"===i.unit?vs(t,o,n/1852,e._getUIString("ScaleControl.NauticalMiles")):n>=1e3?vs(t,o,n/1e3,e._getUIString("ScaleControl.Kilometers")):vs(t,o,n,e._getUIString("ScaleControl.Meters"))}function vs(e,t,i,o){const s=function(e){const t=Math.pow(10,(""+Math.floor(e)).length-1);let i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(i),t*i}(i);e.style.width=t*(s/i)+"px",e.innerHTML=`${s}&nbsp;${o}`}const xs={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ls=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Is={version:e.version,supported:t,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Jo{constructor(t){if(null!=(t=e.extend({},rs,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new io(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming,this._renderTaskQueue=new ts,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},is,t.locale),this._clickTolerance=t.clickTolerance,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken),"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof ss))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Ko(this,t),this._hash=t.hash&&new oo("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new Yo({customAttribution:t.customAttribution})),this._logoControl=new es,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",t=>{this._update("style"===t.dataType),this.fire(new e.Event(t.dataType+"data",t))}),this.on("dataloading",t=>{this.fire(new e.Event(t.dataType+"dataloading",t))})}_getMapId(){return this._mapId}addControl(t,i){if(void 0===i&&(i=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=t.onAdd(this);this._controls.push(t);const s=this._controlPositions[i];return-1!==i.indexOf("bottom")?s.insertBefore(o,s.firstChild):s.appendChild(o),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(t);return i>-1&&this._controls.splice(i,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}resize(t){const i=this._containerDimensions(),o=i[0],s=i[1];this._resizeCanvas(o,s),this.transform.resize(o,s),this.painter.resize(o,s);const a=!this._moving;return a&&(this.stop(),this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t))),this.fire(new e.Event("resize",t)),a&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(e){if((e=null==e?-2:e)>=-2&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if((e=null==e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if((e=null==e?0:e)<0)throw new Error("minPitch must be greater than or equal to 0");if(e>=0&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this._update(),this.getPitch()<e&&this.setPitch(e),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if((e=null==e?85:e)>85)throw new Error("maxPitch must be less than or equal to 85");if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this._update(),this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this._update()}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.Point.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()}_createDelegatedListener(e,t,i){if("mouseenter"===e||"mouseover"===e){let o=!1;const s=s=>{const a=this.getLayer(t)?this.queryRenderedFeatures(s.point,{layers:[t]}):[];a.length?o||(o=!0,i.call(this,new po(e,this,s.originalEvent,{features:a}))):o=!1};return{layer:t,listener:i,delegates:{mousemove:s,mouseout:()=>{o=!1}}}}if("mouseleave"===e||"mouseout"===e){let o=!1;const s=s=>{(this.getLayer(t)?this.queryRenderedFeatures(s.point,{layers:[t]}):[]).length?o=!0:o&&(o=!1,i.call(this,new po(e,this,s.originalEvent)))},a=t=>{o&&(o=!1,i.call(this,new po(e,this,t.originalEvent)))};return{layer:t,listener:i,delegates:{mousemove:s,mouseout:a}}}{const o=e=>{const o=this.getLayer(t)?this.queryRenderedFeatures(e.point,{layers:[t]}):[];o.length&&(e.features=o,i.call(this,e),delete e.features)};return{layer:t,listener:i,delegates:{[e]:o}}}}on(e,t,i){if(void 0===i)return super.on(e,t);const o=this._createDelegatedListener(e,t,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(o);for(const e in o.delegates)this.on(e,o.delegates[e]);return this}once(e,t,i){if(void 0===i)return super.once(e,t);const o=this._createDelegatedListener(e,t,i);for(const e in o.delegates)this.once(e,o.delegates[e]);return this}off(e,t,i){return void 0===i?super.off(e,t):(this._delegatedListeners&&this._delegatedListeners[e]&&(o=>{const s=this._delegatedListeners[e];for(let e=0;e<s.length;e++){const o=s[e];if(o.layer===t&&o.listener===i){for(const e in o.delegates)this.off(e,o.delegates[e]);return s.splice(e,1),this}}})(),this)}queryRenderedFeatures(t,i){return this.style?(void 0!==i||void 0===t||t instanceof e.Point||Array.isArray(t)||(i=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],i=i||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(t,i){return!1!==(i=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&t?(this._diffStyle(t,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(t,i))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),delete this.style),e&&(this.style=new He(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new He(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,i){if("string"==typeof t){const o=this._requestManager.normalizeStyleURL(t),s=this._requestManager.transformRequest(o,e.ResourceType.Style);e.getJSON(s,(t,o)=>{t?this.fire(new e.ErrorEvent(t)):o&&this._updateDiff(o,i)})}else"object"==typeof t&&this._updateDiff(t,i)}_updateDiff(t,i){try{this.style.setState(t)&&(this._update(!0),this._updateTerrain())}catch(o){e.warnOnce(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(t,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(t){const i=this.style&&this.style._getSourceCaches(t);if(0!==i.length)return i.every(e=>e.loaded());this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`)))}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const i=e[t]._tiles;for(const e in i){const t=i[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,i){return this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,i)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,i,{pixelRatio:o=1,sdf:s=!1,stretchX:a,stretchY:r,content:n}={}){if(this._lazyInitEmptyStyle(),i instanceof os||as&&i instanceof as){const{width:l,height:c,data:u}=e.browser.getImageData(i);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:o,stretchX:a,stretchY:r,content:n,sdf:s,version:0})}else{if(void 0===i.width||void 0===i.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:l,height:c,data:u}=i,h=i;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u)),pixelRatio:o,stretchX:a,stretchY:r,content:n,sdf:s,version:0,userImage:h}),h.onAdd&&h.onAdd(this,t)}}}updateImage(t,i){const o=this.style.getImage(t);if(!o)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const s=i instanceof os||as&&i instanceof as?e.browser.getImageData(i):i,{width:a,height:r,data:n}=s;return void 0===a||void 0===r?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):a!==o.data.width||r!==o.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(o.data.replace(n,!(i instanceof os||as&&i instanceof as)),void this.style.updateImage(t,o))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,i){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,i){return this.style.setLayerZoomRange(e,t,i),this._update(!0)}setFilter(e,t,i={}){return this.style.setFilter(e,t,i),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,i,o={}){return this.style.setPaintProperty(e,t,i,o),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,i,o={}){return this.style.setLayoutProperty(e,t,i,o),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),this.style.setTerrain(e),this._update(!0)}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let e=0,t=0;return this._container&&(e=this._container.clientWidth||400,t=this._container.clientHeight||300),[e,t]}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=i.create("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=i.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=i.create("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const o=this._containerDimensions();this._resizeCanvas(o[0],o[1]);const s=this._controlContainer=i.create("div","mapboxgl-control-container",e),a=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(e=>{a[e]=i.create("div","mapboxgl-ctrl-"+e,s)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,i){const o=e.browser.devicePixelRatio||1;this._canvas.width=o*t,this._canvas.height=o*i,this._canvas.style.width=t+"px",this._canvas.style.height=i+"px"}_setupPainter(){const i=e.extend({},t.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),o=this._canvas.getContext("webgl",i)||this._canvas.getContext("experimental-webgl",i);o?(this.painter=new Zi(o,this.transform),this.on("data",e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)}),e.webpSupported.testSupport(o)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(t){let i,o=0;const s=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=s.createQueryEXT(),s.beginQueryEXT(s.TIME_ELAPSED_EXT,i),o=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(t),this._removed)return;let a=!1;const r=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,i=e.browser.now();this.style.zoomHistory.update(t,i);const o=new e.EvaluationParameters(t,{now:i,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),s=o.crossFadingFactor();1===s&&s===this._crossFadingFactor||(a=!0,this._crossFadingFactor=s),this.style.update(o)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this._updateTerrain(),this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||a)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const t=e.browser.now()-o;s.endQueryEXT(s.TIME_ELAPSED_EXT,i),setTimeout(()=>{const o=s.getQueryObjectEXT(i,s.QUERY_RESULT_EXT)/1e6;s.deleteQueryEXT(i),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:o}))},50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout(()=>{const i=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:i}))},50)}const n=this._sourcesDirty||this._styleDirty||this._placementDirty;if(n||this._repaint)this.triggerRepaint();else if(this._triggerFrame(!1),!this.isMoving()&&this.loaded()&&(this.fire(new e.Event("idle")),this._isInitialLoad&&this._authenticate(),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}return!this._loaded||this._fullyLoaded||n||(this._fullyLoaded=!0),this}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){console.error("Error: A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/"),e.browser.setErrorState();const t=this.painter.context.gl;this._logoControl instanceof es&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}}),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){this.painter.updateTerrain(this.style,this.isMoving()||this.isRotating()||this.isZooming())}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const i=this.painter.context.gl,o=i.createFramebuffer();function s(e){i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0);const t=new Uint8Array(i.drawingBufferWidth*i.drawingBufferHeight*4);return i.readPixels(0,0,i.drawingBufferWidth,i.drawingBufferHeight,i.RGBA,i.UNSIGNED_BYTE,t),t}return i.bindFramebuffer(i.FRAMEBUFFER,o),this._canvasPixelComparison(s(e),t.canvasCopies.map(s),t.timeStamps)}_canvasPixelComparison(e,t,i){let o=i[1]-i[0];const s=e.length/4;for(let a=0;a<t.length;a++){const r=t[a];let n=0;for(let t=0;t<r.length;t+=4)r[t]===e[t]&&r[t+1]===e[t+1]&&r[t+2]===e[t+2]&&r[t+3]===e[t+3]&&(n+=1);o+=(i[a+2]-i[a+1])*(1-n/s)}return o}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),ns(this._canvasContainer),ns(this._controlContainer),ns(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.browser.frame(e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)}))}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}_setCacheLimits(t,i){e.setCacheLimits(t,i)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},ls,t),this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",e=>this._map.zoomIn({},{originalEvent:e})),i.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",e=>this._map.zoomOut({},{originalEvent:e})),i.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})}),this._compassIcon=i.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))}_updateZoomButtons(){const e=this._map.getZoom(),t=e===this._map.getMaxZoom(),i=e===this._map.getMinZoom();this._zoomInButton.disabled=t,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",t.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}_rotateCompassArrow(){const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new cs(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){i.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(e,t){const o=i.create("button",e,this._container);return o.type="button",o.addEventListener("click",t),o}_setButtonTitle(e,t){const i=this._map._getUIString("NavigationControl."+t);e.title=i,e.setAttribute("aria-label",i)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({},ds,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(t){var o;return this._map=t,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),o=this._setupUI,void 0!==fs?o(fs):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(e=>{fs="denied"!==e.state,o(fs)}):(fs=!!e.window.navigator.geolocation,o(fs)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),i.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ys=0,gs=!1}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),i=e.coords;return t&&(i.longitude<t.getWest()||i.longitude>t.getEast()||i.latitude<t.getSouth()||i.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const i=new e.LngLat(t.coords.longitude,t.coords.latitude),o=t.coords.accuracy,s=this._map.getBearing(),a=e.extend({bearing:s},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(o),a,{geolocateSource:!0})}_updateMarker(t){if(t){const i=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const e=this._map._container.clientHeight/2,t=this._map.unproject([0,e]),i=this._map.unproject([1,e]),o=t.distanceTo(i),s=Math.ceil(2*this._accuracy/o);this._circleElement.style.width=s+"px",this._circleElement.style.height=s+"px"}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&gs)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=i.create("button","mapboxgl-ctrl-geolocate",this._container),i.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=t,this._geolocateButton.setAttribute("aria-label",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=e,this._geolocateButton.setAttribute("aria-label",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=i.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ms(this._dotElement),this._circleElement=i.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ms({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ys--,gs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ys++,ys>1?(t={maximumAge:6e5,timeout:0},gs=!0):(t=this.options.positionOptions,gs=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,t)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Yo,ScaleControl:class{constructor(t){this.options=e.extend({},_s,t),e.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){bs(this._map,this._container,this.options)}onAdd(e){return this._map=e,this._container=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){i.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(e){this.options.unit=e,bs(this._map,this._container,this.options)}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=i.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){i.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=i.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);i.create("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden",!0),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.title=e}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(xs),t),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&i.remove(this._content),this._container&&(i.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const i=e.window.document.createDocumentFragment(),o=e.window.document.createElement("body");let s;for(o.innerHTML=t;s=o.firstChild,s;)i.appendChild(s);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=i.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(e),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(e){this._container&&this._container.classList.add(e)}removeClassName(e){this._container&&this._container.classList.remove(e)}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){if(this._container)return this._container.classList.toggle(e)}_createCloseButton(){this.options.closeButton&&(this._closeButton=i.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(e){this._update(e.point)}_onMouseMove(e){this._update(e.point)}_onDrag(e){this._update(e.point)}_update(t){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(this._container||(this._container=i.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=i.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(e=>this._container.classList.add(e)),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=us(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!t)return;const o=this._pos=this._trackPointer&&t?t:this._map.project(this._lngLat);let s=this.options.anchor;const a=function t(i){if(i){if("number"==typeof i){const t=Math.round(Math.sqrt(.5*Math.pow(i,2)));return{center:new e.Point(0,0),top:new e.Point(0,i),"top-left":new e.Point(t,t),"top-right":new e.Point(-t,t),bottom:new e.Point(0,-i),"bottom-left":new e.Point(t,-t),"bottom-right":new e.Point(-t,-t),left:new e.Point(i,0),right:new e.Point(-i,0)}}if(i instanceof e.Point||Array.isArray(i)){const t=e.Point.convert(i);return{center:t,top:t,"top-left":t,"top-right":t,bottom:t,"bottom-left":t,"bottom-right":t,left:t,right:t}}return{center:e.Point.convert(i.center||[0,0]),top:e.Point.convert(i.top||[0,0]),"top-left":e.Point.convert(i["top-left"]||[0,0]),"top-right":e.Point.convert(i["top-right"]||[0,0]),bottom:e.Point.convert(i.bottom||[0,0]),"bottom-left":e.Point.convert(i["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(i["bottom-right"]||[0,0]),left:e.Point.convert(i.left||[0,0]),right:e.Point.convert(i.right||[0,0])}}return t(new e.Point(0,0))}(this.options.offset);if(!s){const e=this._container.offsetWidth,t=this._container.offsetHeight;let i;i=o.y+a.bottom.y<t?["top"]:o.y>this._map.transform.height-t?["bottom"]:[],o.x<e/2?i.push("left"):o.x>this._map.transform.width-e/2&&i.push("right"),s=0===i.length?"bottom":i.join("-")}const r=o.add(a[s]).round();i.setTransform(this._container,`${hs[s]} translate(${r.x}px,${r.y}px)`),ps(this._container,s,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(Ls);e&&e.focus()}_onClose(){this.remove()}},Marker:ms,Style:He,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:eo,Evented:e.Evented,config:e.config,prewarm:function(){V().acquire(O)},clearPrewarmedResources:function(){const e=$;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(O),$=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return N.workerCount},set workerCount(e){N.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:""};return Is})),i}()}));Ue.accessToken="pk.eyJ1IjoiaW5mb2dlb2dlb3N0YXJ0IiwiYSI6ImNrdHNnOGJkeTFmdnQydW1wZmp1amxzNDIifQ.SNA6XHEPjyxynwsHbZCDNw";
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
<<<<<<< HEAD
  ***************************************************************************** */function Ke(e,t){function i(){this.constructor=e}We(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var Je=function(){return(Je=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function Ye(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var a,s,o=i.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(a=o.next()).done;)r.push(a.value)}catch(e){s={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return r}function et(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ye(arguments[t]));return e}
=======
  ***************************************************************************** */
var Re=function(e,t){return(Re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};function Oe(e,t){function i(){this.constructor=e}Re(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var Ne=function(){return(Ne=Object.assign||function(e){for(var t,i=1,o=arguments.length;i<o;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};function $e(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var o,s,a=i.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)r.push(o.value)}catch(e){s={error:e}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}return r}function Ve(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat($e(arguments[t]));return e}
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
<<<<<<< HEAD
   */var tt,it=function(){function e(e){void 0===e&&(e={}),this.adapter_=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),at=function(){function e(e,t){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];this.root_=e,this.initialize.apply(this,et(i)),this.foundation_=void 0===t?this.getDefaultFoundation():t,this.foundation_.init(),this.initialSyncWithDOM()}return e.attachTo=function(t){return new e(t,new it({}))},e.prototype.initialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},e.prototype.initialSyncWithDOM=function(){},e.prototype.destroy=function(){this.foundation_.destroy()},e.prototype.listen=function(e,t,i){this.root_.addEventListener(e,t,i)},e.prototype.unlisten=function(e,t,i){this.root_.removeEventListener(e,t,i)},e.prototype.emit=function(e,t,i){var a;void 0===i&&(i=!1),"function"==typeof CustomEvent?a=new CustomEvent(e,{bubbles:i,detail:t}):(a=document.createEvent("CustomEvent")).initCustomEvent(e,i,!1,t),this.root_.dispatchEvent(a)},e}(),st={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"},ot={ROOT:"mdc-text-field__icon"},rt=["click","keydown"],nt=function(e){function t(i){var a=e.call(this,Je({},t.defaultAdapter,i))||this;return a.savedTabIndex_=null,a.interactionHandler_=function(e){return a.handleInteraction(e)},a}return Ke(t,e),Object.defineProperty(t,"strings",{get:function(){return st},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return ot},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.savedTabIndex_=this.adapter_.getAttr("tabindex"),rt.forEach((function(t){e.adapter_.registerInteractionHandler(t,e.interactionHandler_)}))},t.prototype.destroy=function(){var e=this;rt.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.interactionHandler_)}))},t.prototype.setDisabled=function(e){this.savedTabIndex_&&(e?(this.adapter_.setAttr("tabindex","-1"),this.adapter_.removeAttr("role")):(this.adapter_.setAttr("tabindex",this.savedTabIndex_),this.adapter_.setAttr("role",st.ICON_ROLE)))},t.prototype.setAriaLabel=function(e){this.adapter_.setAttr("aria-label",e)},t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.handleInteraction=function(e){var t="Enter"===e.key||13===e.keyCode;("click"===e.type||t)&&this.adapter_.notifyIconAction()},t}(it),lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ke(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new nt({getAttr:function(t){return e.root_.getAttribute(t)},setAttr:function(t,i){return e.root_.setAttribute(t,i)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t},registerInteractionHandler:function(t,i){return e.listen(t,i)},deregisterInteractionHandler:function(t,i){return e.unlisten(t,i)},notifyIconAction:function(){return e.emit(nt.strings.ICON_EVENT,{},!0)}})},t}(at);
=======
   */var Ge,je=function(){function e(e){void 0===e&&(e={}),this.adapter_=e}return Object.defineProperty(e,"cssClasses",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"strings",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"numbers",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"defaultAdapter",{get:function(){return{}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.destroy=function(){},e}(),Ze=function(){function e(e,t){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];this.root_=e,this.initialize.apply(this,Ve(i)),this.foundation_=void 0===t?this.getDefaultFoundation():t,this.foundation_.init(),this.initialSyncWithDOM()}return e.attachTo=function(t){return new e(t,new je({}))},e.prototype.initialize=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.getDefaultFoundation=function(){throw new Error("Subclasses must override getDefaultFoundation to return a properly configured foundation class")},e.prototype.initialSyncWithDOM=function(){},e.prototype.destroy=function(){this.foundation_.destroy()},e.prototype.listen=function(e,t,i){this.root_.addEventListener(e,t,i)},e.prototype.unlisten=function(e,t,i){this.root_.removeEventListener(e,t,i)},e.prototype.emit=function(e,t,i){var o;void 0===i&&(i=!1),"function"==typeof CustomEvent?o=new CustomEvent(e,{bubbles:i,detail:t}):(o=document.createEvent("CustomEvent")).initCustomEvent(e,i,!1,t),this.root_.dispatchEvent(o)},e}(),He={ICON_EVENT:"MDCTextField:icon",ICON_ROLE:"button"},Xe={ROOT:"mdc-text-field__icon"},Qe=["click","keydown"],We=function(e){function t(i){var o=e.call(this,Ne({},t.defaultAdapter,i))||this;return o.savedTabIndex_=null,o.interactionHandler_=function(e){return o.handleInteraction(e)},o}return Oe(t,e),Object.defineProperty(t,"strings",{get:function(){return He},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return Xe},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{getAttr:function(){return null},setAttr:function(){},removeAttr:function(){},setContent:function(){},registerInteractionHandler:function(){},deregisterInteractionHandler:function(){},notifyIconAction:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this;this.savedTabIndex_=this.adapter_.getAttr("tabindex"),Qe.forEach((function(t){e.adapter_.registerInteractionHandler(t,e.interactionHandler_)}))},t.prototype.destroy=function(){var e=this;Qe.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.interactionHandler_)}))},t.prototype.setDisabled=function(e){this.savedTabIndex_&&(e?(this.adapter_.setAttr("tabindex","-1"),this.adapter_.removeAttr("role")):(this.adapter_.setAttr("tabindex",this.savedTabIndex_),this.adapter_.setAttr("role",He.ICON_ROLE)))},t.prototype.setAriaLabel=function(e){this.adapter_.setAttr("aria-label",e)},t.prototype.setContent=function(e){this.adapter_.setContent(e)},t.prototype.handleInteraction=function(e){var t="Enter"===e.key||13===e.keyCode;("click"===e.type||t)&&this.adapter_.notifyIconAction()},t}(je),Ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"foundation",{get:function(){return this.foundation_},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new We({getAttr:function(t){return e.root_.getAttribute(t)},setAttr:function(t,i){return e.root_.setAttribute(t,i)},removeAttr:function(t){return e.root_.removeAttribute(t)},setContent:function(t){e.root_.textContent=t},registerInteractionHandler:function(t,i){return e.listen(t,i)},deregisterInteractionHandler:function(t,i){return e.unlisten(t,i)},notifyIconAction:function(){return e.emit(We.strings.ICON_EVENT,{},!0)}})},t}(Ze);
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
<<<<<<< HEAD
   */function ut(e,t=[]){const i=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture",...t];function a(t){Q(e,t)}return e=>{const t=[];for(let s=0;s<i.length;s++)t.push(P(e,i[s],a));return{destroy:()=>{for(let e=0;e<t.length;e++)t[e]()}}}}function ct(e,t){let i=Object.getOwnPropertyNames(e);const a={};for(let s=0;s<i.length;s++){const o=i[s],r=o.indexOf("$");-1!==r&&-1!==t.indexOf(o.substring(0,r+1))||-1===t.indexOf(o)&&(a[o]=e[o])}return a}function gt(e,t){let i=[];if(t)for(let a=0;a<t.length;a++){const s=Array.isArray(t[a]),o=s?t[a][0]:t[a];s&&t[a].length>1?i.push(o(e,t[a][1])):i.push(o(e))}return{update(e){if((e&&e.length||0)!=i.length)throw new Error("You must not change the length of an actions array.");if(e)for(let t=0;t<e.length;t++)if(i[t]&&"update"in i[t]){Array.isArray(e[t])&&e[t].length>1?i[t].update(e[t][1]):i[t].update()}},destroy(){for(let e=0;e<i.length;e++)i[e]&&"destroy"in i[e]&&i[e].destroy()}}}function ft(e){let t,a,s,n,u,g,f,h;const p=e[8].default,m=l(p,e,e[7],null);let y=[{class:a="mdc-text-field__icon "+e[1]},{tabindex:e[2]},{"aria-hidden":s="-1"===e[2]?"true":"false"},ct(e[5],["use","class","tabindex"])],_={};for(let e=0;e<y.length;e+=1)_=i(_,y[e]);return{c(){t=q("i"),m&&m.c(),T(t,_)},m(i,a){v(i,t,a),m&&m.m(t,null),e[9](t),g=!0,f||(h=[d(n=gt.call(null,t,e[0])),d(u=e[4].call(null,t))],f=!0)},p(e,[i]){m&&m.p&&128&i&&c(m,p,e,e[7],i,null,null),T(t,_=pe(y,[(!g||2&i&&a!==(a="mdc-text-field__icon "+e[1]))&&{class:a},(!g||4&i)&&{tabindex:e[2]},(!g||4&i&&s!==(s="-1"===e[2]?"true":"false"))&&{"aria-hidden":s},32&i&&ct(e[5],["use","class","tabindex"])])),n&&r(n.update)&&1&i&&n.update.call(null,e[0])},i(e){g||(ge(m,e),g=!0)},o(e){fe(m,e),g=!1},d(i){i&&x(t),m&&m.d(i),e[9](null),f=!1,o(h)}}}function dt(e,t,a){let{$$slots:s={},$$scope:o}=t;const r=ut(N());let n,l,{use:u=[]}=t,{class:c=""}=t,{role:f}=t,{tabindex:d=(void 0!==f?"0":"-1")}=t;return $(()=>{l=new lt(n)}),G(()=>{l&&l.destroy()}),e.$$set=e=>{a(5,t=i(i({},t),g(e))),"use"in e&&a(0,u=e.use),"class"in e&&a(1,c=e.class),"role"in e&&a(6,f=e.role),"tabindex"in e&&a(2,d=e.tabindex),"$$scope"in e&&a(7,o=e.$$scope)},t=g(t),[u,c,d,n,r,t,f,o,s,function(e){H[e?"unshift":"push"](()=>{n=e,a(3,n)})}]}class ht extends Ce{constructor(e){super(),xe(this,e,dt,ft,n,{use:0,class:1,role:6,tabindex:2})}}
=======
   */function Je(e,t=[]){const i=["focus","blur","fullscreenchange","fullscreenerror","scroll","cut","copy","paste","keydown","keypress","keyup","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","drag","dragend","dragenter","dragstart","dragleave","dragover","drop","touchcancel","touchend","touchmove","touchstart","pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture",...t];function o(t){G(e,t)}return e=>{const t=[];for(let s=0;s<i.length;s++)t.push(F(e,i[s],o));return{destroy:()=>{for(let e=0;e<t.length;e++)t[e]()}}}}function Ye(e,t){let i=Object.getOwnPropertyNames(e);const o={};for(let s=0;s<i.length;s++){const a=i[s],r=a.indexOf("$");-1!==r&&-1!==t.indexOf(a.substring(0,r+1))||-1===t.indexOf(a)&&(o[a]=e[a])}return o}function et(e,t){let i=[];if(t)for(let o=0;o<t.length;o++){const s=Array.isArray(t[o]),a=s?t[o][0]:t[o];s&&t[o].length>1?i.push(a(e,t[o][1])):i.push(a(e))}return{update(e){if((e&&e.length||0)!=i.length)throw new Error("You must not change the length of an actions array.");if(e)for(let t=0;t<e.length;t++)if(i[t]&&"update"in i[t]){Array.isArray(e[t])&&e[t].length>1?i[t].update(e[t][1]):i[t].update()}},destroy(){for(let e=0;e<i.length;e++)i[e]&&"destroy"in i[e]&&i[e].destroy()}}}function tt(e){let t,o,s,n,c,h,m,d;const f=e[8].default,y=l(f,e,e[7],null);let g=[{class:o="mdc-text-field__icon "+e[1]},{tabindex:e[2]},{"aria-hidden":s="-1"===e[2]?"true":"false"},Ye(e[5],["use","class","tabindex"])],_={};for(let e=0;e<g.length;e+=1)_=i(_,g[e]);return{c(){t=L("i"),y&&y.c(),T(t,_)},m(i,o){b(i,t,o),y&&y.m(t,null),e[9](t),h=!0,m||(d=[p(n=et.call(null,t,e[0])),p(c=e[4].call(null,t))],m=!0)},p(e,[i]){y&&y.p&&128&i&&u(y,f,e,e[7],i,null,null),T(t,_=me(g,[(!h||2&i&&o!==(o="mdc-text-field__icon "+e[1]))&&{class:o},(!h||4&i)&&{tabindex:e[2]},(!h||4&i&&s!==(s="-1"===e[2]?"true":"false"))&&{"aria-hidden":s},32&i&&Ye(e[5],["use","class","tabindex"])])),n&&r(n.update)&&1&i&&n.update.call(null,e[0])},i(e){h||(ce(y,e),h=!0)},o(e){ue(y,e),h=!1},d(i){i&&v(t),y&&y.d(i),e[9](null),m=!1,a(d)}}}function it(e,t,o){let{$$slots:s={},$$scope:a}=t;const r=Je(R());let n,l,{use:c=[]}=t,{class:u=""}=t,{role:p}=t,{tabindex:m=(void 0!==p?"0":"-1")}=t;return O(()=>{l=new Ke(n)}),N(()=>{l&&l.destroy()}),e.$$set=e=>{o(5,t=i(i({},t),h(e))),"use"in e&&o(0,c=e.use),"class"in e&&o(1,u=e.class),"role"in e&&o(6,p=e.role),"tabindex"in e&&o(2,m=e.tabindex),"$$scope"in e&&o(7,a=e.$$scope)},t=h(t),[c,u,m,n,r,t,p,a,s,function(e){Z[e?"unshift":"push"](()=>{n=e,o(3,n)})}]}class ot extends ve{constructor(e){super(),be(this,e,it,tt,n,{use:0,class:1,role:6,tabindex:2})}}
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
/**
   * @license
   * Copyright 2019 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
<<<<<<< HEAD
   */function pt(e,t){if(void 0===e&&(e=window),void 0===t&&(t=!1),void 0===tt||t){var i=!1;try{e.document.addEventListener("test",(function(){}),{get passive(){return i=!0}})}catch(e){}tt=i}return!!tt&&{passive:!0}}
=======
   */function st(e,t){if(void 0===e&&(e=window),void 0===t&&(t=!1),void 0===Ge||t){var i=!1;try{e.document.addEventListener("test",(function(){}),{get passive(){return i=!0}})}catch(e){}Ge=i}return!!Ge&&{passive:!0}}
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
/**
   * @license
   * Copyright 2018 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
<<<<<<< HEAD
   */function mt(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}
=======
   */function at(e,t){return(e.matches||e.webkitMatchesSelector||e.msMatchesSelector).call(e,t)}
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
<<<<<<< HEAD
   */var yt,_t={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},bt={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},vt={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};
=======
   */var rt,nt={BG_FOCUSED:"mdc-ripple-upgraded--background-focused",FG_ACTIVATION:"mdc-ripple-upgraded--foreground-activation",FG_DEACTIVATION:"mdc-ripple-upgraded--foreground-deactivation",ROOT:"mdc-ripple-upgraded",UNBOUNDED:"mdc-ripple-upgraded--unbounded"},lt={VAR_FG_SCALE:"--mdc-ripple-fg-scale",VAR_FG_SIZE:"--mdc-ripple-fg-size",VAR_FG_TRANSLATE_END:"--mdc-ripple-fg-translate-end",VAR_FG_TRANSLATE_START:"--mdc-ripple-fg-translate-start",VAR_LEFT:"--mdc-ripple-left",VAR_TOP:"--mdc-ripple-top"},ct={DEACTIVATION_TIMEOUT_MS:225,FG_DEACTIVATION_MS:150,INITIAL_ORIGIN_SCALE:.6,PADDING:10,TAP_DELAY_MS:300};
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
<<<<<<< HEAD
var xt=["touchstart","pointerdown","mousedown","keydown"],Ct=["touchend","pointerup","mouseup","contextmenu"],qt=[],Ut=function(e){function t(i){var a=e.call(this,Je({},t.defaultAdapter,i))||this;return a.activationAnimationHasEnded_=!1,a.activationTimer_=0,a.fgDeactivationRemovalTimer_=0,a.fgScale_="0",a.frame_={width:0,height:0},a.initialSize_=0,a.layoutFrame_=0,a.maxRadius_=0,a.unboundedCoords_={left:0,top:0},a.activationState_=a.defaultActivationState_(),a.activationTimerCallback_=function(){a.activationAnimationHasEnded_=!0,a.runDeactivationUXLogicIfReady_()},a.activateHandler_=function(e){return a.activate_(e)},a.deactivateHandler_=function(){return a.deactivate_()},a.focusHandler_=function(){return a.handleFocus()},a.blurHandler_=function(){return a.handleBlur()},a.resizeHandler_=function(){return a.layout()},a}return Ke(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return _t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return bt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return vt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this,i=this.supportsPressRipple_();if(this.registerRootHandlers_(i),i){var a=t.cssClasses,s=a.ROOT,o=a.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.addClass(s),e.adapter_.isUnbounded()&&(e.adapter_.addClass(o),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_DEACTIVATION));var i=t.cssClasses,a=i.ROOT,s=i.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.removeClass(a),e.adapter_.removeClass(s),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var i=t.cssClasses.UNBOUNDED;e?this.adapter_.addClass(i):this.adapter_.removeClass(i)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter_.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&(xt.forEach((function(e){t.adapter_.registerInteractionHandler(e,t.activateHandler_)})),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):Ct.forEach((function(e){t.adapter_.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;xt.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),Ct.forEach((function(t){e.adapter_.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,i=t.strings;Object.keys(i).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter_.updateCssVariable(i[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter_.isSurfaceDisabled()){var i=this.activationState_;if(!i.isActivated){var a=this.previousActivationEvent_;if(!(a&&void 0!==e&&a.type!==e.type))i.isActivated=!0,i.isProgrammatic=void 0===e,i.activationEvent=e,i.wasActivatedByPointer=!i.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&qt.length>0&&qt.some((function(e){return t.adapter_.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(qt.push(e.target),this.registerDeactivationHandlers_(e)),i.wasElementMadeActive=this.checkElementMadeActive_(e),i.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){qt=[],i.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(i.wasElementMadeActive=t.checkElementMadeActive_(e),i.wasElementMadeActive&&t.animateActivation_()),i.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter_.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,i=t.strings,a=i.VAR_FG_TRANSLATE_START,s=i.VAR_FG_TRANSLATE_END,o=t.cssClasses,r=o.FG_DEACTIVATION,n=o.FG_ACTIVATION,l=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var u="",c="";if(!this.adapter_.isUnbounded()){var g=this.getFgTranslationCoordinates_(),f=g.startPoint,d=g.endPoint;u=f.x+"px, "+f.y+"px",c=d.x+"px, "+d.y+"px"}this.adapter_.updateCssVariable(a,u),this.adapter_.updateCssVariable(s,c),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(r),this.adapter_.computeBoundingRect(),this.adapter_.addClass(n),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),l)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,i=t.activationEvent;return{startPoint:e={x:(e=t.wasActivatedByPointer?function(e,t,i){if(!e)return{x:0,y:0};var a,s,o=t.x,r=t.y,n=o+i.left,l=r+i.top;if("touchstart"===e.type){var u=e;a=u.changedTouches[0].pageX-n,s=u.changedTouches[0].pageY-l}else{var c=e;a=c.pageX-n,s=c.pageY-l}return{x:a,y:s}}(i,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,i=t.cssClasses.FG_DEACTIVATION,a=this.activationState_,s=a.hasDeactivationUXRun,o=a.isActivated;(s||!o)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(i),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter_.removeClass(i)}),vt.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var i=Je({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(i)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(i),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,i=e.wasElementMadeActive;(t||i)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){var e=this;this.frame_=this.adapter_.computeBoundingRect();var i=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?i:Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING,this.initialSize_=Math.floor(i*t.numbers.INITIAL_ORIGIN_SCALE),this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,i=e.VAR_FG_SIZE,a=e.VAR_LEFT,s=e.VAR_TOP,o=e.VAR_FG_SCALE;this.adapter_.updateCssVariable(i,this.initialSize_+"px"),this.adapter_.updateCssVariable(o,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(a,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(s,this.unboundedCoords_.top+"px"))},t}(it),wt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disabled=!1,t}return Ke(t,e),t.attachTo=function(e,i){void 0===i&&(i={isUnbounded:void 0});var a=new t(e);return void 0!==i.isUnbounded&&(a.unbounded=i.isUnbounded),a},t.createAdapter=function(e){return{addClass:function(t){return e.root_.classList.add(t)},browserSupportsCssVars:function(){return function(e,t){void 0===t&&(t=!1);var i=e.CSS,a=yt;if("boolean"==typeof yt&&!t)return yt;if(!(i&&"function"==typeof i.supports))return!1;var s=i.supports("--css-vars","yes"),o=i.supports("(--css-vars: yes)")&&i.supports("color","#00000000");return a=!(!s&&!o)&&!function(e){var t=e.document,i=t.createElement("div");i.className="mdc-ripple-surface--test-edge-var-bug",t.head.appendChild(i);var a=e.getComputedStyle(i),s=null!==a&&"solid"===a.borderTopStyle;return i.parentNode&&i.parentNode.removeChild(i),s}(e),t||(yt=a),a}(window)},computeBoundingRect:function(){return e.root_.getBoundingClientRect()},containsEventTarget:function(t){return e.root_.contains(t)},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,pt())},deregisterInteractionHandler:function(t,i){return e.root_.removeEventListener(t,i,pt())},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isSurfaceActive:function(){return mt(e.root_,":active")},isSurfaceDisabled:function(){return Boolean(e.disabled)},isUnbounded:function(){return Boolean(e.unbounded)},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,pt())},registerInteractionHandler:function(t,i){return e.root_.addEventListener(t,i,pt())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},removeClass:function(t){return e.root_.classList.remove(t)},updateCssVariable:function(t,i){return e.root_.style.setProperty(t,i)}}},Object.defineProperty(t.prototype,"unbounded",{get:function(){return Boolean(this.unbounded_)},set:function(e){this.unbounded_=Boolean(e),this.setUnbounded_()},enumerable:!0,configurable:!0}),t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.layout=function(){this.foundation_.layout()},t.prototype.getDefaultFoundation=function(){return new Ut(t.createAdapter(this))},t.prototype.initialSyncWithDOM=function(){var e=this.root_;this.unbounded="mdcRippleIsUnbounded"in e.dataset},t.prototype.setUnbounded_=function(){this.foundation_.setUnbounded(Boolean(this.unbounded_))},t}(at),Et={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},Bt={ARIA_PRESSED:"aria-pressed",CHANGE_EVENT:"MDCIconButtonToggle:change"},Pt=function(e){function t(i){return e.call(this,Je({},t.defaultAdapter,i))||this}return Ke(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Et},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Bt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},setAttr:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.setAttr(Bt.ARIA_PRESSED,""+this.isOn())},t.prototype.handleClick=function(){this.toggle(),this.adapter_.notifyChange({isOn:this.isOn()})},t.prototype.isOn=function(){return this.adapter_.hasClass(Et.ICON_BUTTON_ON)},t.prototype.toggle=function(e){void 0===e&&(e=!this.isOn()),e?this.adapter_.addClass(Et.ICON_BUTTON_ON):this.adapter_.removeClass(Et.ICON_BUTTON_ON),this.adapter_.setAttr(Bt.ARIA_PRESSED,""+e)},t}(it),Mt=Pt.strings,Tt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ripple_=t.createRipple_(),t}return Ke(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){var e=this;this.handleClick_=function(){return e.foundation_.handleClick()},this.listen("click",this.handleClick_)},t.prototype.destroy=function(){this.unlisten("click",this.handleClick_),this.ripple_.destroy(),e.prototype.destroy.call(this)},t.prototype.getDefaultFoundation=function(){var e=this;return new Pt({addClass:function(t){return e.root_.classList.add(t)},hasClass:function(t){return e.root_.classList.contains(t)},notifyChange:function(t){return e.emit(Mt.CHANGE_EVENT,t)},removeClass:function(t){return e.root_.classList.remove(t)},setAttr:function(t,i){return e.root_.setAttribute(t,i)}})},Object.defineProperty(t.prototype,"ripple",{get:function(){return this.ripple_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"on",{get:function(){return this.foundation_.isOn()},set:function(e){this.foundation_.toggle(e)},enumerable:!0,configurable:!0}),t.prototype.createRipple_=function(){var e=new wt(this.root_);return e.unbounded=!0,e},t}(at);function At(e,t={ripple:!1,unbounded:!1,color:null,classForward:()=>{}}){let i,a=null,s=Z("SMUI:addLayoutListener"),o=[];function r(i){-1===o.indexOf(i)&&(e.classList.add(i),o.push(i),t.classForward&&t.classForward(o))}function n(i){const a=o.indexOf(i);-1!==a&&(e.classList.remove(i),o.splice(a,1),t.classForward&&t.classForward(o))}function l(){if(t.ripple&&!a){const t=wt.createAdapter;wt.createAdapter=function(...e){const i=t.apply(this,e);return i.addClass=function(e){return r(e)},i.removeClass=function(e){return n(e)},i},a=new wt(e),wt.createAdapter=t}else a&&!t.ripple&&(a.destroy(),a=null);if(t.ripple)switch(a.unbounded=!!t.unbounded,t.color){case"surface":return r("mdc-ripple-surface"),n("mdc-ripple-surface--primary"),void n("mdc-ripple-surface--accent");case"primary":return r("mdc-ripple-surface"),r("mdc-ripple-surface--primary"),void n("mdc-ripple-surface--accent");case"secondary":return r("mdc-ripple-surface"),n("mdc-ripple-surface--primary"),void r("mdc-ripple-surface--accent")}n("mdc-ripple-surface"),n("mdc-ripple-surface--primary"),n("mdc-ripple-surface--accent")}return l(),s&&(i=s((function(){a&&a.layout()}))),{update(e={ripple:!1,unbounded:!1,color:null,classForward:[]}){t=e,l()},destroy(){a&&(a.destroy(),a=null,n("mdc-ripple-surface"),n("mdc-ripple-surface--primary"),n("mdc-ripple-surface--accent")),i&&i()}}}function St(e){let t,a,s,n,u,g,f,h;const p=e[13].default,m=l(p,e,e[12],null);let y=[{class:a="\n      mdc-icon-button\n      "+e[2]+"\n      "+(e[0]?"mdc-icon-button--on":"")+"\n      "+("card:action"===e[10]?"mdc-card__action":"")+"\n      "+("card:action"===e[10]?"mdc-card__action--icon":"")+"\n      "+("top-app-bar:navigation"===e[10]?"mdc-top-app-bar__navigation-icon":"")+"\n      "+("top-app-bar:action"===e[10]?"mdc-top-app-bar__action-item":"")+"\n      "+("snackbar"===e[10]?"mdc-snackbar__dismiss":"")+"\n    "},{"aria-hidden":"true"},{"aria-pressed":e[0]},e[8]],_={};for(let e=0;e<y.length;e+=1)_=i(_,y[e]);return{c(){t=q("button"),m&&m.c(),T(t,_)},m(i,a){v(i,t,a),m&&m.m(t,null),e[15](t),g=!0,f||(h=[d(s=gt.call(null,t,e[1])),d(n=e[9].call(null,t)),d(u=At.call(null,t,{ripple:e[3]&&!e[5],unbounded:!0,color:e[4]})),P(t,"MDCIconButtonToggle:change",e[11])],f=!0)},p(e,i){m&&m.p&&4096&i&&c(m,p,e,e[12],i,null,null),T(t,_=pe(y,[(!g||5&i&&a!==(a="\n      mdc-icon-button\n      "+e[2]+"\n      "+(e[0]?"mdc-icon-button--on":"")+"\n      "+("card:action"===e[10]?"mdc-card__action":"")+"\n      "+("card:action"===e[10]?"mdc-card__action--icon":"")+"\n      "+("top-app-bar:navigation"===e[10]?"mdc-top-app-bar__navigation-icon":"")+"\n      "+("top-app-bar:action"===e[10]?"mdc-top-app-bar__action-item":"")+"\n      "+("snackbar"===e[10]?"mdc-snackbar__dismiss":"")+"\n    "))&&{class:a},{"aria-hidden":"true"},(!g||1&i)&&{"aria-pressed":e[0]},256&i&&e[8]])),s&&r(s.update)&&2&i&&s.update.call(null,e[1]),u&&r(u.update)&&56&i&&u.update.call(null,{ripple:e[3]&&!e[5],unbounded:!0,color:e[4]})},i(e){g||(ge(m,e),g=!0)},o(e){fe(m,e),g=!1},d(i){i&&x(t),m&&m.d(i),e[15](null),f=!1,o(h)}}}function It(e){let t,a,s,n,u,g,f,h;const p=e[13].default,m=l(p,e,e[12],null);let y=[{class:a="\n      mdc-icon-button\n      "+e[2]+"\n      "+(e[0]?"mdc-icon-button--on":"")+"\n      "+("card:action"===e[10]?"mdc-card__action":"")+"\n      "+("card:action"===e[10]?"mdc-card__action--icon":"")+"\n      "+("top-app-bar:navigation"===e[10]?"mdc-top-app-bar__navigation-icon":"")+"\n      "+("top-app-bar:action"===e[10]?"mdc-top-app-bar__action-item":"")+"\n      "+("snackbar"===e[10]?"mdc-snackbar__dismiss":"")+"\n    "},{"aria-hidden":"true"},{"aria-pressed":e[0]},{href:e[6]},e[8]],_={};for(let e=0;e<y.length;e+=1)_=i(_,y[e]);return{c(){t=q("a"),m&&m.c(),T(t,_)},m(i,a){v(i,t,a),m&&m.m(t,null),e[14](t),g=!0,f||(h=[d(s=gt.call(null,t,e[1])),d(n=e[9].call(null,t)),d(u=At.call(null,t,{ripple:e[3]&&!e[5],unbounded:!0,color:e[4]})),P(t,"MDCIconButtonToggle:change",e[11])],f=!0)},p(e,i){m&&m.p&&4096&i&&c(m,p,e,e[12],i,null,null),T(t,_=pe(y,[(!g||5&i&&a!==(a="\n      mdc-icon-button\n      "+e[2]+"\n      "+(e[0]?"mdc-icon-button--on":"")+"\n      "+("card:action"===e[10]?"mdc-card__action":"")+"\n      "+("card:action"===e[10]?"mdc-card__action--icon":"")+"\n      "+("top-app-bar:navigation"===e[10]?"mdc-top-app-bar__navigation-icon":"")+"\n      "+("top-app-bar:action"===e[10]?"mdc-top-app-bar__action-item":"")+"\n      "+("snackbar"===e[10]?"mdc-snackbar__dismiss":"")+"\n    "))&&{class:a},{"aria-hidden":"true"},(!g||1&i)&&{"aria-pressed":e[0]},(!g||64&i)&&{href:e[6]},256&i&&e[8]])),s&&r(s.update)&&2&i&&s.update.call(null,e[1]),u&&r(u.update)&&56&i&&u.update.call(null,{ripple:e[3]&&!e[5],unbounded:!0,color:e[4]})},i(e){g||(ge(m,e),g=!0)},o(e){fe(m,e),g=!1},d(i){i&&x(t),m&&m.d(i),e[14](null),f=!1,o(h)}}}function Dt(e){let t,i,a,s;const o=[It,St],r=[];function n(e,t){return e[6]?0:1}return t=n(e),i=r[t]=o[t](e),{c(){i.c(),a=B()},m(e,i){r[t].m(e,i),v(e,a,i),s=!0},p(e,[s]){let l=t;t=n(e),t===l?r[t].p(e,s):(ue(),fe(r[l],1,1,()=>{r[l]=null}),ce(),i=r[t],i||(i=r[t]=o[t](e),i.c()),ge(i,1),i.m(a.parentNode,a))},i(e){s||(ge(i),s=!0)},o(e){fe(i),s=!1},d(e){r[t].d(e),e&&x(a)}}}function zt(e,t,a){let{$$slots:s={},$$scope:o}=t;const r=ut(N(),["MDCIconButtonToggle:change"]);let n,l,{use:u=[]}=t,{class:c=""}=t,{ripple:f=!0}=t,{color:d=null}=t,{toggle:h=!1}=t,{pressed:p=!1}=t,{href:m=null}=t,y=Z("SMUI:icon-button:context");V("SMUI:icon:context","icon-button");let _,b=null;return G(()=>{l&&l.destroy()}),e.$$set=e=>{a(18,t=i(i({},t),g(e))),"use"in e&&a(1,u=e.use),"class"in e&&a(2,c=e.class),"ripple"in e&&a(3,f=e.ripple),"color"in e&&a(4,d=e.color),"toggle"in e&&a(5,h=e.toggle),"pressed"in e&&a(0,p=e.pressed),"href"in e&&a(6,m=e.href),"$$scope"in e&&a(12,o=e.$$scope)},e.$$.update=()=>{a(8,_=ct(t,["use","class","ripple","color","toggle","pressed","href"])),196777&e.$$.dirty&&n&&h!==b&&(h?(a(16,l=new Tt(n)),f||l.ripple.destroy(),a(16,l.on=p,l)):b&&(l&&l.destroy(),a(16,l=null)),a(17,b=h)),65537&e.$$.dirty&&l&&l.on!==p&&a(16,l.on=p,l)},t=g(t),[p,u,c,f,d,h,m,n,_,r,y,function(e){a(0,p=e.detail.isOn)},o,s,function(e){H[e?"unshift":"push"](()=>{n=e,a(7,n)})},function(e){H[e?"unshift":"push"](()=>{n=e,a(7,n)})}]}class kt extends Ce{constructor(e){super(),xe(this,e,zt,Dt,n,{use:1,class:2,ripple:3,color:4,toggle:5,pressed:0,href:6})}}function Ft(e){let t,a,s,n,u,g,f;const h=e[10].default,p=l(h,e,e[9],null);let m=[{class:a="\n    "+e[1]+"\n    "+("button"===e[7]?"mdc-button__icon":"")+"\n    "+("fab"===e[7]?"mdc-fab__icon":"")+"\n    "+("icon-button"===e[7]?"mdc-icon-button__icon":"")+"\n    "+("icon-button"===e[7]&&e[2]?"mdc-icon-button__icon--on":"")+"\n    "+("chip"===e[7]?"mdc-chip__icon":"")+"\n    "+("chip"===e[7]&&e[3]?"mdc-chip__icon--leading":"")+"\n    "+("chip"===e[7]&&e[4]?"mdc-chip__icon--leading-hidden":"")+"\n    "+("chip"===e[7]&&e[5]?"mdc-chip__icon--trailing":"")+"\n    "+("tab"===e[7]?"mdc-tab__icon":"")+"\n  "},{"aria-hidden":"true"},ct(e[8],["use","class","on","leading","leadingHidden","trailing"])],y={};for(let e=0;e<m.length;e+=1)y=i(y,m[e]);return{c(){t=q("i"),p&&p.c(),T(t,y)},m(i,a){v(i,t,a),p&&p.m(t,null),u=!0,g||(f=[d(s=gt.call(null,t,e[0])),d(n=e[6].call(null,t))],g=!0)},p(e,[i]){p&&p.p&&512&i&&c(p,h,e,e[9],i,null,null),T(t,y=pe(m,[(!u||62&i&&a!==(a="\n    "+e[1]+"\n    "+("button"===e[7]?"mdc-button__icon":"")+"\n    "+("fab"===e[7]?"mdc-fab__icon":"")+"\n    "+("icon-button"===e[7]?"mdc-icon-button__icon":"")+"\n    "+("icon-button"===e[7]&&e[2]?"mdc-icon-button__icon--on":"")+"\n    "+("chip"===e[7]?"mdc-chip__icon":"")+"\n    "+("chip"===e[7]&&e[3]?"mdc-chip__icon--leading":"")+"\n    "+("chip"===e[7]&&e[4]?"mdc-chip__icon--leading-hidden":"")+"\n    "+("chip"===e[7]&&e[5]?"mdc-chip__icon--trailing":"")+"\n    "+("tab"===e[7]?"mdc-tab__icon":"")+"\n  "))&&{class:a},{"aria-hidden":"true"},256&i&&ct(e[8],["use","class","on","leading","leadingHidden","trailing"])])),s&&r(s.update)&&1&i&&s.update.call(null,e[0])},i(e){u||(ge(p,e),u=!0)},o(e){fe(p,e),u=!1},d(e){e&&x(t),p&&p.d(e),g=!1,o(f)}}}function Lt(e,t,a){let{$$slots:s={},$$scope:o}=t;const r=ut(N());let{use:n=[]}=t,{class:l=""}=t,{on:u=!1}=t,{leading:c=!1}=t,{leadingHidden:f=!1}=t,{trailing:d=!1}=t;const h=Z("SMUI:icon:context");return e.$$set=e=>{a(8,t=i(i({},t),g(e))),"use"in e&&a(0,n=e.use),"class"in e&&a(1,l=e.class),"on"in e&&a(2,u=e.on),"leading"in e&&a(3,c=e.leading),"leadingHidden"in e&&a(4,f=e.leadingHidden),"trailing"in e&&a(5,d=e.trailing),"$$scope"in e&&a(9,o=e.$$scope)},t=g(t),[n,l,u,c,f,d,r,h,t,o,s]}class Ot extends Ce{constructor(e){super(),xe(this,e,Lt,Ft,n,{use:0,class:1,on:2,leading:3,leadingHidden:4,trailing:5})}}function Rt(e){let t,i;return t=new kt({props:{title:"3D/2D",class:"buttonSurt",$$slots:{default:[$t]},$$scope:{ctx:e}}}),t.$on("click",e[2]),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,i){const a={};2048&i&&(a.$$scope={dirty:i,ctx:e}),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function Nt(e){let t,i;return t=new kt({props:{title:"3D/2D",class:"buttonSurt",$$slots:{default:[Gt]},$$scope:{ctx:e}}}),t.$on("click",e[1]),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,i){const a={};2048&i&&(a.$$scope={dirty:i,ctx:e}),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function $t(t){let i,a,s,o;return i=new He({props:{icon:Xe,class:"iconi",size:"2x",style:"     color: grey;\r\n    top: -13px;\r\n    position: relative;\r\n    padding: 0px;\r\n    \r\n    border-radius: 49px;"}}),{c(){ye(i.$$.fragment),a=E(),s=q("p"),s.textContent="3D",I(s,"bottom","43px"),I(s,"position","relative"),I(s,"font-size","17px"),I(s,"color","grey")},m(e,t){_e(i,e,t),v(e,a,t),v(e,s,t),o=!0},p:e,i(e){o||(ge(i.$$.fragment,e),o=!0)},o(e){fe(i.$$.fragment,e),o=!1},d(e){be(i,e),e&&x(a),e&&x(s)}}}function Gt(t){let i,a,s,o;return i=new He({props:{icon:Xe,size:"2x",class:"iconi",style:"      color: blue;\r\n    top: -13px;\r\n    position: relative;\r\n    padding: 0px;\r\n    \r\n    border-radius: 49px;"}}),{c(){ye(i.$$.fragment),a=E(),s=q("p"),s.textContent="3D",I(s,"bottom","43px"),I(s,"position","relative"),I(s,"font-size","17px"),I(s,"color","blue")},m(e,t){_e(i,e,t),v(e,a,t),v(e,s,t),o=!0},p:e,i(e){o||(ge(i.$$.fragment,e),o=!0)},o(e){fe(i.$$.fragment,e),o=!1},d(e){be(i,e),e&&x(a),e&&x(s)}}}function Vt(e){let t,i;return t=new kt({props:{title:"3D/2D",class:"buttonSurt",$$slots:{default:[Qt]},$$scope:{ctx:e}}}),t.$on("click",e[2]),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,i){const a={};2048&i&&(a.$$scope={dirty:i,ctx:e}),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function Zt(e){let t,i;return t=new kt({props:{title:"3D/2D",class:"buttonSurt",$$slots:{default:[jt]},$$scope:{ctx:e}}}),t.$on("click",e[1]),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,i){const a={};2048&i&&(a.$$scope={dirty:i,ctx:e}),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function Qt(t){let i,a,s,o;return i=new He({props:{icon:Xe,class:"iconi",size:"1x",style:"     color: grey;\r\n    top: -10px;\r\n    position: relative;\r\n    padding: 0px;\r\n    padding-top: 7px;\r\n    right: 6px;\r\n    border-radius: 49px;"}}),{c(){ye(i.$$.fragment),a=E(),s=q("p"),s.textContent="3D",I(s,"bottom","-13px"),I(s,"right","5px"),I(s,"position","absolute"),I(s,"font-size","15px"),I(s,"color","grey")},m(e,t){_e(i,e,t),v(e,a,t),v(e,s,t),o=!0},p:e,i(e){o||(ge(i.$$.fragment,e),o=!0)},o(e){fe(i.$$.fragment,e),o=!1},d(e){be(i,e),e&&x(a),e&&x(s)}}}function jt(t){let i,a,s,o;return i=new He({props:{icon:Xe,size:"1x",class:"iconi",style:"      color: blue;\r\n    \r\n    top: -10px;\r\n    position: relative;\r\n    padding: 0px;\r\n    padding-top: 7px;\r\n    right: 6px;\r\n    border-radius: 49px;"}}),{c(){ye(i.$$.fragment),a=E(),s=q("p"),s.textContent="3D",I(s,"bottom","-13px"),I(s,"right","5px"),I(s,"position","absolute"),I(s,"font-size","15px"),I(s,"color","blue")},m(e,t){_e(i,e,t),v(e,a,t),v(e,s,t),o=!0},p:e,i(e){o||(ge(i.$$.fragment,e),o=!0)},o(e){fe(i.$$.fragment,e),o=!1},d(e){be(i,e),e&&x(a),e&&x(s)}}}function Ht(e){let t,i,a,s=window.innerWidth>500&&function(e){let t,i,a,s;const o=[Nt,Rt],r=[];function n(e,t){return e[0]?0:1}return i=n(e),a=r[i]=o[i](e),{c(){t=q("div"),a.c(),I(t,"z-index","100"),I(t,"bottom","38%"),I(t,"right","8px"),I(t,"position","absolute"),I(t,"display","flex"),I(t,"flex-direction","column"),I(t,"height","auto"),I(t,"background-color","white"),I(t,"border-radius","19px")},m(e,a){v(e,t,a),r[i].m(t,null),s=!0},p(e,s){let l=i;i=n(e),i===l?r[i].p(e,s):(ue(),fe(r[l],1,1,()=>{r[l]=null}),ce(),a=r[i],a||(a=r[i]=o[i](e),a.c()),ge(a,1),a.m(t,null))},i(e){s||(ge(a),s=!0)},o(e){fe(a),s=!1},d(e){e&&x(t),r[i].d()}}}(e),o=window.innerWidth<500&&function(e){let t,i,a,s;const o=[Zt,Vt],r=[];function n(e,t){return e[0]?0:1}return i=n(e),a=r[i]=o[i](e),{c(){t=q("div"),a.c(),M(t,"style","z-index: 10000;\r\n  bottom: 35%;\r\n  /* width: 70%; */\r\n  right: 7px;\r\n  height: 10px;\r\n  opacity: 1.6;\r\n  position: absolute;\r\n  display: flex;\r\n  flex-direction: column;\r\n  height: fit-content;\r\n  border-radius: 10px;\r\n  background-color: white;\r\n  box-shadow: 0px 0px 11px 3px rgb(143 154 154 / 68%), 0 6px 20px 0 rgb(243 243 243 / 0%);\r\n  border-radius: 10px;")},m(e,a){v(e,t,a),r[i].m(t,null),s=!0},p(e,s){let l=i;i=n(e),i===l?r[i].p(e,s):(ue(),fe(r[l],1,1,()=>{r[l]=null}),ce(),a=r[i],a||(a=r[i]=o[i](e),a.c()),ge(a,1),a.m(t,null))},i(e){s||(ge(a),s=!0)},o(e){fe(a),s=!1},d(e){e&&x(t),r[i].d()}}}(e);return{c(){s&&s.c(),t=E(),o&&o.c(),i=B()},m(e,r){s&&s.m(e,r),v(e,t,r),o&&o.m(e,r),v(e,i,r),a=!0},p(e,[t]){window.innerWidth>500&&s.p(e,t),window.innerWidth<500&&o.p(e,t)},i(e){a||(ge(s),ge(o),a=!0)},o(e){fe(s),fe(o),a=!1},d(e){s&&s.d(e),e&&x(t),o&&o.d(e),e&&x(i)}}}function Xt(e,t,i){let a=!1;const{getMap:s}=Z(De),o=s();return $(async()=>{o.on("pitchend",(function(e){setTimeout(()=>{let e=o._canvas.baseURI.toString();e=e.split("/"),e.length>7?i(0,a=!0):i(0,a=!1)},250)}))}),[a,function(){i(0,a=!1),o.easeTo({pitch:0,bearing:0})},function(){i(0,a=!0),o.easeTo({pitch:70,bearing:10}),letNoshowthewind()}]}class Wt extends Ce{constructor(e){super(),xe(this,e,Xt,Ht,n,{})}}
=======
var ut=["touchstart","pointerdown","mousedown","keydown"],ht=["touchend","pointerup","mouseup","contextmenu"],pt=[],mt=function(e){function t(i){var o=e.call(this,Ne({},t.defaultAdapter,i))||this;return o.activationAnimationHasEnded_=!1,o.activationTimer_=0,o.fgDeactivationRemovalTimer_=0,o.fgScale_="0",o.frame_={width:0,height:0},o.initialSize_=0,o.layoutFrame_=0,o.maxRadius_=0,o.unboundedCoords_={left:0,top:0},o.activationState_=o.defaultActivationState_(),o.activationTimerCallback_=function(){o.activationAnimationHasEnded_=!0,o.runDeactivationUXLogicIfReady_()},o.activateHandler_=function(e){return o.activate_(e)},o.deactivateHandler_=function(){return o.deactivate_()},o.focusHandler_=function(){return o.handleFocus()},o.blurHandler_=function(){return o.handleBlur()},o.resizeHandler_=function(){return o.layout()},o}return Oe(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return nt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return lt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return ct},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},browserSupportsCssVars:function(){return!0},computeBoundingRect:function(){return{top:0,right:0,bottom:0,left:0,width:0,height:0}},containsEventTarget:function(){return!0},deregisterDocumentInteractionHandler:function(){},deregisterInteractionHandler:function(){},deregisterResizeHandler:function(){},getWindowPageOffset:function(){return{x:0,y:0}},isSurfaceActive:function(){return!0},isSurfaceDisabled:function(){return!0},isUnbounded:function(){return!0},registerDocumentInteractionHandler:function(){},registerInteractionHandler:function(){},registerResizeHandler:function(){},removeClass:function(){},updateCssVariable:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){var e=this,i=this.supportsPressRipple_();if(this.registerRootHandlers_(i),i){var o=t.cssClasses,s=o.ROOT,a=o.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.addClass(s),e.adapter_.isUnbounded()&&(e.adapter_.addClass(a),e.layoutInternal_())}))}},t.prototype.destroy=function(){var e=this;if(this.supportsPressRipple_()){this.activationTimer_&&(clearTimeout(this.activationTimer_),this.activationTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_ACTIVATION)),this.fgDeactivationRemovalTimer_&&(clearTimeout(this.fgDeactivationRemovalTimer_),this.fgDeactivationRemovalTimer_=0,this.adapter_.removeClass(t.cssClasses.FG_DEACTIVATION));var i=t.cssClasses,o=i.ROOT,s=i.UNBOUNDED;requestAnimationFrame((function(){e.adapter_.removeClass(o),e.adapter_.removeClass(s),e.removeCssVars_()}))}this.deregisterRootHandlers_(),this.deregisterDeactivationHandlers_()},t.prototype.activate=function(e){this.activate_(e)},t.prototype.deactivate=function(){this.deactivate_()},t.prototype.layout=function(){var e=this;this.layoutFrame_&&cancelAnimationFrame(this.layoutFrame_),this.layoutFrame_=requestAnimationFrame((function(){e.layoutInternal_(),e.layoutFrame_=0}))},t.prototype.setUnbounded=function(e){var i=t.cssClasses.UNBOUNDED;e?this.adapter_.addClass(i):this.adapter_.removeClass(i)},t.prototype.handleFocus=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.addClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.handleBlur=function(){var e=this;requestAnimationFrame((function(){return e.adapter_.removeClass(t.cssClasses.BG_FOCUSED)}))},t.prototype.supportsPressRipple_=function(){return this.adapter_.browserSupportsCssVars()},t.prototype.defaultActivationState_=function(){return{activationEvent:void 0,hasDeactivationUXRun:!1,isActivated:!1,isProgrammatic:!1,wasActivatedByPointer:!1,wasElementMadeActive:!1}},t.prototype.registerRootHandlers_=function(e){var t=this;e&&(ut.forEach((function(e){t.adapter_.registerInteractionHandler(e,t.activateHandler_)})),this.adapter_.isUnbounded()&&this.adapter_.registerResizeHandler(this.resizeHandler_)),this.adapter_.registerInteractionHandler("focus",this.focusHandler_),this.adapter_.registerInteractionHandler("blur",this.blurHandler_)},t.prototype.registerDeactivationHandlers_=function(e){var t=this;"keydown"===e.type?this.adapter_.registerInteractionHandler("keyup",this.deactivateHandler_):ht.forEach((function(e){t.adapter_.registerDocumentInteractionHandler(e,t.deactivateHandler_)}))},t.prototype.deregisterRootHandlers_=function(){var e=this;ut.forEach((function(t){e.adapter_.deregisterInteractionHandler(t,e.activateHandler_)})),this.adapter_.deregisterInteractionHandler("focus",this.focusHandler_),this.adapter_.deregisterInteractionHandler("blur",this.blurHandler_),this.adapter_.isUnbounded()&&this.adapter_.deregisterResizeHandler(this.resizeHandler_)},t.prototype.deregisterDeactivationHandlers_=function(){var e=this;this.adapter_.deregisterInteractionHandler("keyup",this.deactivateHandler_),ht.forEach((function(t){e.adapter_.deregisterDocumentInteractionHandler(t,e.deactivateHandler_)}))},t.prototype.removeCssVars_=function(){var e=this,i=t.strings;Object.keys(i).forEach((function(t){0===t.indexOf("VAR_")&&e.adapter_.updateCssVariable(i[t],null)}))},t.prototype.activate_=function(e){var t=this;if(!this.adapter_.isSurfaceDisabled()){var i=this.activationState_;if(!i.isActivated){var o=this.previousActivationEvent_;if(!(o&&void 0!==e&&o.type!==e.type))i.isActivated=!0,i.isProgrammatic=void 0===e,i.activationEvent=e,i.wasActivatedByPointer=!i.isProgrammatic&&(void 0!==e&&("mousedown"===e.type||"touchstart"===e.type||"pointerdown"===e.type)),void 0!==e&&pt.length>0&&pt.some((function(e){return t.adapter_.containsEventTarget(e)}))?this.resetActivationState_():(void 0!==e&&(pt.push(e.target),this.registerDeactivationHandlers_(e)),i.wasElementMadeActive=this.checkElementMadeActive_(e),i.wasElementMadeActive&&this.animateActivation_(),requestAnimationFrame((function(){pt=[],i.wasElementMadeActive||void 0===e||" "!==e.key&&32!==e.keyCode||(i.wasElementMadeActive=t.checkElementMadeActive_(e),i.wasElementMadeActive&&t.animateActivation_()),i.wasElementMadeActive||(t.activationState_=t.defaultActivationState_())})))}}},t.prototype.checkElementMadeActive_=function(e){return void 0===e||"keydown"!==e.type||this.adapter_.isSurfaceActive()},t.prototype.animateActivation_=function(){var e=this,i=t.strings,o=i.VAR_FG_TRANSLATE_START,s=i.VAR_FG_TRANSLATE_END,a=t.cssClasses,r=a.FG_DEACTIVATION,n=a.FG_ACTIVATION,l=t.numbers.DEACTIVATION_TIMEOUT_MS;this.layoutInternal_();var c="",u="";if(!this.adapter_.isUnbounded()){var h=this.getFgTranslationCoordinates_(),p=h.startPoint,m=h.endPoint;c=p.x+"px, "+p.y+"px",u=m.x+"px, "+m.y+"px"}this.adapter_.updateCssVariable(o,c),this.adapter_.updateCssVariable(s,u),clearTimeout(this.activationTimer_),clearTimeout(this.fgDeactivationRemovalTimer_),this.rmBoundedActivationClasses_(),this.adapter_.removeClass(r),this.adapter_.computeBoundingRect(),this.adapter_.addClass(n),this.activationTimer_=setTimeout((function(){return e.activationTimerCallback_()}),l)},t.prototype.getFgTranslationCoordinates_=function(){var e,t=this.activationState_,i=t.activationEvent;return{startPoint:e={x:(e=t.wasActivatedByPointer?function(e,t,i){if(!e)return{x:0,y:0};var o,s,a=t.x,r=t.y,n=a+i.left,l=r+i.top;if("touchstart"===e.type){var c=e;o=c.changedTouches[0].pageX-n,s=c.changedTouches[0].pageY-l}else{var u=e;o=u.pageX-n,s=u.pageY-l}return{x:o,y:s}}(i,this.adapter_.getWindowPageOffset(),this.adapter_.computeBoundingRect()):{x:this.frame_.width/2,y:this.frame_.height/2}).x-this.initialSize_/2,y:e.y-this.initialSize_/2},endPoint:{x:this.frame_.width/2-this.initialSize_/2,y:this.frame_.height/2-this.initialSize_/2}}},t.prototype.runDeactivationUXLogicIfReady_=function(){var e=this,i=t.cssClasses.FG_DEACTIVATION,o=this.activationState_,s=o.hasDeactivationUXRun,a=o.isActivated;(s||!a)&&this.activationAnimationHasEnded_&&(this.rmBoundedActivationClasses_(),this.adapter_.addClass(i),this.fgDeactivationRemovalTimer_=setTimeout((function(){e.adapter_.removeClass(i)}),ct.FG_DEACTIVATION_MS))},t.prototype.rmBoundedActivationClasses_=function(){var e=t.cssClasses.FG_ACTIVATION;this.adapter_.removeClass(e),this.activationAnimationHasEnded_=!1,this.adapter_.computeBoundingRect()},t.prototype.resetActivationState_=function(){var e=this;this.previousActivationEvent_=this.activationState_.activationEvent,this.activationState_=this.defaultActivationState_(),setTimeout((function(){return e.previousActivationEvent_=void 0}),t.numbers.TAP_DELAY_MS)},t.prototype.deactivate_=function(){var e=this,t=this.activationState_;if(t.isActivated){var i=Ne({},t);t.isProgrammatic?(requestAnimationFrame((function(){return e.animateDeactivation_(i)})),this.resetActivationState_()):(this.deregisterDeactivationHandlers_(),requestAnimationFrame((function(){e.activationState_.hasDeactivationUXRun=!0,e.animateDeactivation_(i),e.resetActivationState_()})))}},t.prototype.animateDeactivation_=function(e){var t=e.wasActivatedByPointer,i=e.wasElementMadeActive;(t||i)&&this.runDeactivationUXLogicIfReady_()},t.prototype.layoutInternal_=function(){var e=this;this.frame_=this.adapter_.computeBoundingRect();var i=Math.max(this.frame_.height,this.frame_.width);this.maxRadius_=this.adapter_.isUnbounded()?i:Math.sqrt(Math.pow(e.frame_.width,2)+Math.pow(e.frame_.height,2))+t.numbers.PADDING,this.initialSize_=Math.floor(i*t.numbers.INITIAL_ORIGIN_SCALE),this.fgScale_=""+this.maxRadius_/this.initialSize_,this.updateLayoutCssVars_()},t.prototype.updateLayoutCssVars_=function(){var e=t.strings,i=e.VAR_FG_SIZE,o=e.VAR_LEFT,s=e.VAR_TOP,a=e.VAR_FG_SCALE;this.adapter_.updateCssVariable(i,this.initialSize_+"px"),this.adapter_.updateCssVariable(a,this.fgScale_),this.adapter_.isUnbounded()&&(this.unboundedCoords_={left:Math.round(this.frame_.width/2-this.initialSize_/2),top:Math.round(this.frame_.height/2-this.initialSize_/2)},this.adapter_.updateCssVariable(o,this.unboundedCoords_.left+"px"),this.adapter_.updateCssVariable(s,this.unboundedCoords_.top+"px"))},t}(je),dt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.disabled=!1,t}return Oe(t,e),t.attachTo=function(e,i){void 0===i&&(i={isUnbounded:void 0});var o=new t(e);return void 0!==i.isUnbounded&&(o.unbounded=i.isUnbounded),o},t.createAdapter=function(e){return{addClass:function(t){return e.root_.classList.add(t)},browserSupportsCssVars:function(){return function(e,t){void 0===t&&(t=!1);var i=e.CSS,o=rt;if("boolean"==typeof rt&&!t)return rt;if(!(i&&"function"==typeof i.supports))return!1;var s=i.supports("--css-vars","yes"),a=i.supports("(--css-vars: yes)")&&i.supports("color","#00000000");return o=!(!s&&!a)&&!function(e){var t=e.document,i=t.createElement("div");i.className="mdc-ripple-surface--test-edge-var-bug",t.head.appendChild(i);var o=e.getComputedStyle(i),s=null!==o&&"solid"===o.borderTopStyle;return i.parentNode&&i.parentNode.removeChild(i),s}(e),t||(rt=o),o}(window)},computeBoundingRect:function(){return e.root_.getBoundingClientRect()},containsEventTarget:function(t){return e.root_.contains(t)},deregisterDocumentInteractionHandler:function(e,t){return document.documentElement.removeEventListener(e,t,st())},deregisterInteractionHandler:function(t,i){return e.root_.removeEventListener(t,i,st())},deregisterResizeHandler:function(e){return window.removeEventListener("resize",e)},getWindowPageOffset:function(){return{x:window.pageXOffset,y:window.pageYOffset}},isSurfaceActive:function(){return at(e.root_,":active")},isSurfaceDisabled:function(){return Boolean(e.disabled)},isUnbounded:function(){return Boolean(e.unbounded)},registerDocumentInteractionHandler:function(e,t){return document.documentElement.addEventListener(e,t,st())},registerInteractionHandler:function(t,i){return e.root_.addEventListener(t,i,st())},registerResizeHandler:function(e){return window.addEventListener("resize",e)},removeClass:function(t){return e.root_.classList.remove(t)},updateCssVariable:function(t,i){return e.root_.style.setProperty(t,i)}}},Object.defineProperty(t.prototype,"unbounded",{get:function(){return Boolean(this.unbounded_)},set:function(e){this.unbounded_=Boolean(e),this.setUnbounded_()},enumerable:!0,configurable:!0}),t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.layout=function(){this.foundation_.layout()},t.prototype.getDefaultFoundation=function(){return new mt(t.createAdapter(this))},t.prototype.initialSyncWithDOM=function(){var e=this.root_;this.unbounded="mdcRippleIsUnbounded"in e.dataset},t.prototype.setUnbounded_=function(){this.foundation_.setUnbounded(Boolean(this.unbounded_))},t}(Ze),ft={ICON_BUTTON_ON:"mdc-icon-button--on",ROOT:"mdc-icon-button"},yt={ARIA_PRESSED:"aria-pressed",CHANGE_EVENT:"MDCIconButtonToggle:change"},gt=function(e){function t(i){return e.call(this,Ne({},t.defaultAdapter,i))||this}return Oe(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return ft},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return yt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},hasClass:function(){return!1},notifyChange:function(){},removeClass:function(){},setAttr:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.setAttr(yt.ARIA_PRESSED,""+this.isOn())},t.prototype.handleClick=function(){this.toggle(),this.adapter_.notifyChange({isOn:this.isOn()})},t.prototype.isOn=function(){return this.adapter_.hasClass(ft.ICON_BUTTON_ON)},t.prototype.toggle=function(e){void 0===e&&(e=!this.isOn()),e?this.adapter_.addClass(ft.ICON_BUTTON_ON):this.adapter_.removeClass(ft.ICON_BUTTON_ON),this.adapter_.setAttr(yt.ARIA_PRESSED,""+e)},t}(je),_t=gt.strings,bt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ripple_=t.createRipple_(),t}return Oe(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialSyncWithDOM=function(){var e=this;this.handleClick_=function(){return e.foundation_.handleClick()},this.listen("click",this.handleClick_)},t.prototype.destroy=function(){this.unlisten("click",this.handleClick_),this.ripple_.destroy(),e.prototype.destroy.call(this)},t.prototype.getDefaultFoundation=function(){var e=this;return new gt({addClass:function(t){return e.root_.classList.add(t)},hasClass:function(t){return e.root_.classList.contains(t)},notifyChange:function(t){return e.emit(_t.CHANGE_EVENT,t)},removeClass:function(t){return e.root_.classList.remove(t)},setAttr:function(t,i){return e.root_.setAttribute(t,i)}})},Object.defineProperty(t.prototype,"ripple",{get:function(){return this.ripple_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"on",{get:function(){return this.foundation_.isOn()},set:function(e){this.foundation_.toggle(e)},enumerable:!0,configurable:!0}),t.prototype.createRipple_=function(){var e=new dt(this.root_);return e.unbounded=!0,e},t}(Ze);function vt(e,t={ripple:!1,unbounded:!1,color:null,classForward:()=>{}}){let i,o=null,s=V("SMUI:addLayoutListener"),a=[];function r(i){-1===a.indexOf(i)&&(e.classList.add(i),a.push(i),t.classForward&&t.classForward(a))}function n(i){const o=a.indexOf(i);-1!==o&&(e.classList.remove(i),a.splice(o,1),t.classForward&&t.classForward(a))}function l(){if(t.ripple&&!o){const t=dt.createAdapter;dt.createAdapter=function(...e){const i=t.apply(this,e);return i.addClass=function(e){return r(e)},i.removeClass=function(e){return n(e)},i},o=new dt(e),dt.createAdapter=t}else o&&!t.ripple&&(o.destroy(),o=null);if(t.ripple)switch(o.unbounded=!!t.unbounded,t.color){case"surface":return r("mdc-ripple-surface"),n("mdc-ripple-surface--primary"),void n("mdc-ripple-surface--accent");case"primary":return r("mdc-ripple-surface"),r("mdc-ripple-surface--primary"),void n("mdc-ripple-surface--accent");case"secondary":return r("mdc-ripple-surface"),n("mdc-ripple-surface--primary"),void r("mdc-ripple-surface--accent")}n("mdc-ripple-surface"),n("mdc-ripple-surface--primary"),n("mdc-ripple-surface--accent")}return l(),s&&(i=s((function(){o&&o.layout()}))),{update(e={ripple:!1,unbounded:!1,color:null,classForward:[]}){t=e,l()},destroy(){o&&(o.destroy(),o=null,n("mdc-ripple-surface"),n("mdc-ripple-surface--primary"),n("mdc-ripple-surface--accent")),i&&i()}}}function xt(e){let t,o,s,n,c,h,m,d;const f=e[13].default,y=l(f,e,e[12],null);let g=[{class:o="\n      mdc-icon-button\n      "+e[2]+"\n      "+(e[0]?"mdc-icon-button--on":"")+"\n      "+("card:action"===e[10]?"mdc-card__action":"")+"\n      "+("card:action"===e[10]?"mdc-card__action--icon":"")+"\n      "+("top-app-bar:navigation"===e[10]?"mdc-top-app-bar__navigation-icon":"")+"\n      "+("top-app-bar:action"===e[10]?"mdc-top-app-bar__action-item":"")+"\n      "+("snackbar"===e[10]?"mdc-snackbar__dismiss":"")+"\n    "},{"aria-hidden":"true"},{"aria-pressed":e[0]},e[8]],_={};for(let e=0;e<g.length;e+=1)_=i(_,g[e]);return{c(){t=L("button"),y&&y.c(),T(t,_)},m(i,o){b(i,t,o),y&&y.m(t,null),e[15](t),h=!0,m||(d=[p(s=et.call(null,t,e[1])),p(n=e[9].call(null,t)),p(c=vt.call(null,t,{ripple:e[3]&&!e[5],unbounded:!0,color:e[4]})),F(t,"MDCIconButtonToggle:change",e[11])],m=!0)},p(e,i){y&&y.p&&4096&i&&u(y,f,e,e[12],i,null,null),T(t,_=me(g,[(!h||5&i&&o!==(o="\n      mdc-icon-button\n      "+e[2]+"\n      "+(e[0]?"mdc-icon-button--on":"")+"\n      "+("card:action"===e[10]?"mdc-card__action":"")+"\n      "+("card:action"===e[10]?"mdc-card__action--icon":"")+"\n      "+("top-app-bar:navigation"===e[10]?"mdc-top-app-bar__navigation-icon":"")+"\n      "+("top-app-bar:action"===e[10]?"mdc-top-app-bar__action-item":"")+"\n      "+("snackbar"===e[10]?"mdc-snackbar__dismiss":"")+"\n    "))&&{class:o},{"aria-hidden":"true"},(!h||1&i)&&{"aria-pressed":e[0]},256&i&&e[8]])),s&&r(s.update)&&2&i&&s.update.call(null,e[1]),c&&r(c.update)&&56&i&&c.update.call(null,{ripple:e[3]&&!e[5],unbounded:!0,color:e[4]})},i(e){h||(ce(y,e),h=!0)},o(e){ue(y,e),h=!1},d(i){i&&v(t),y&&y.d(i),e[15](null),m=!1,a(d)}}}function Lt(e){let t,o,s,n,c,h,m,d;const f=e[13].default,y=l(f,e,e[12],null);let g=[{class:o="\n      mdc-icon-button\n      "+e[2]+"\n      "+(e[0]?"mdc-icon-button--on":"")+"\n      "+("card:action"===e[10]?"mdc-card__action":"")+"\n      "+("card:action"===e[10]?"mdc-card__action--icon":"")+"\n      "+("top-app-bar:navigation"===e[10]?"mdc-top-app-bar__navigation-icon":"")+"\n      "+("top-app-bar:action"===e[10]?"mdc-top-app-bar__action-item":"")+"\n      "+("snackbar"===e[10]?"mdc-snackbar__dismiss":"")+"\n    "},{"aria-hidden":"true"},{"aria-pressed":e[0]},{href:e[6]},e[8]],_={};for(let e=0;e<g.length;e+=1)_=i(_,g[e]);return{c(){t=L("a"),y&&y.c(),T(t,_)},m(i,o){b(i,t,o),y&&y.m(t,null),e[14](t),h=!0,m||(d=[p(s=et.call(null,t,e[1])),p(n=e[9].call(null,t)),p(c=vt.call(null,t,{ripple:e[3]&&!e[5],unbounded:!0,color:e[4]})),F(t,"MDCIconButtonToggle:change",e[11])],m=!0)},p(e,i){y&&y.p&&4096&i&&u(y,f,e,e[12],i,null,null),T(t,_=me(g,[(!h||5&i&&o!==(o="\n      mdc-icon-button\n      "+e[2]+"\n      "+(e[0]?"mdc-icon-button--on":"")+"\n      "+("card:action"===e[10]?"mdc-card__action":"")+"\n      "+("card:action"===e[10]?"mdc-card__action--icon":"")+"\n      "+("top-app-bar:navigation"===e[10]?"mdc-top-app-bar__navigation-icon":"")+"\n      "+("top-app-bar:action"===e[10]?"mdc-top-app-bar__action-item":"")+"\n      "+("snackbar"===e[10]?"mdc-snackbar__dismiss":"")+"\n    "))&&{class:o},{"aria-hidden":"true"},(!h||1&i)&&{"aria-pressed":e[0]},(!h||64&i)&&{href:e[6]},256&i&&e[8]])),s&&r(s.update)&&2&i&&s.update.call(null,e[1]),c&&r(c.update)&&56&i&&c.update.call(null,{ripple:e[3]&&!e[5],unbounded:!0,color:e[4]})},i(e){h||(ce(y,e),h=!0)},o(e){ue(y,e),h=!1},d(i){i&&v(t),y&&y.d(i),e[14](null),m=!1,a(d)}}}function It(e){let t,i,o,s;const a=[Lt,xt],r=[];function n(e,t){return e[6]?0:1}return t=n(e),i=r[t]=a[t](e),{c(){i.c(),o=q()},m(e,i){r[t].m(e,i),b(e,o,i),s=!0},p(e,[s]){let l=t;t=n(e),t===l?r[t].p(e,s):(ne(),ue(r[l],1,1,()=>{r[l]=null}),le(),i=r[t],i||(i=r[t]=a[t](e),i.c()),ce(i,1),i.m(o.parentNode,o))},i(e){s||(ce(i),s=!0)},o(e){ue(i),s=!1},d(e){r[t].d(e),e&&v(o)}}}function wt(e,t,o){let{$$slots:s={},$$scope:a}=t;const r=Je(R(),["MDCIconButtonToggle:change"]);let n,l,{use:c=[]}=t,{class:u=""}=t,{ripple:p=!0}=t,{color:m=null}=t,{toggle:d=!1}=t,{pressed:f=!1}=t,{href:y=null}=t,g=V("SMUI:icon-button:context");$("SMUI:icon:context","icon-button");let _,b=null;return N(()=>{l&&l.destroy()}),e.$$set=e=>{o(18,t=i(i({},t),h(e))),"use"in e&&o(1,c=e.use),"class"in e&&o(2,u=e.class),"ripple"in e&&o(3,p=e.ripple),"color"in e&&o(4,m=e.color),"toggle"in e&&o(5,d=e.toggle),"pressed"in e&&o(0,f=e.pressed),"href"in e&&o(6,y=e.href),"$$scope"in e&&o(12,a=e.$$scope)},e.$$.update=()=>{o(8,_=Ye(t,["use","class","ripple","color","toggle","pressed","href"])),196777&e.$$.dirty&&n&&d!==b&&(d?(o(16,l=new bt(n)),p||l.ripple.destroy(),o(16,l.on=f,l)):b&&(l&&l.destroy(),o(16,l=null)),o(17,b=d)),65537&e.$$.dirty&&l&&l.on!==f&&o(16,l.on=f,l)},t=h(t),[f,c,u,p,m,d,y,n,_,r,g,function(e){o(0,f=e.detail.isOn)},a,s,function(e){Z[e?"unshift":"push"](()=>{n=e,o(7,n)})},function(e){Z[e?"unshift":"push"](()=>{n=e,o(7,n)})}]}class qt extends ve{constructor(e){super(),be(this,e,wt,It,n,{use:1,class:2,ripple:3,color:4,toggle:5,pressed:0,href:6})}}function Ft(e){let t,o,s,n,c,h,m;const d=e[10].default,f=l(d,e,e[9],null);let y=[{class:o="\n    "+e[1]+"\n    "+("button"===e[7]?"mdc-button__icon":"")+"\n    "+("fab"===e[7]?"mdc-fab__icon":"")+"\n    "+("icon-button"===e[7]?"mdc-icon-button__icon":"")+"\n    "+("icon-button"===e[7]&&e[2]?"mdc-icon-button__icon--on":"")+"\n    "+("chip"===e[7]?"mdc-chip__icon":"")+"\n    "+("chip"===e[7]&&e[3]?"mdc-chip__icon--leading":"")+"\n    "+("chip"===e[7]&&e[4]?"mdc-chip__icon--leading-hidden":"")+"\n    "+("chip"===e[7]&&e[5]?"mdc-chip__icon--trailing":"")+"\n    "+("tab"===e[7]?"mdc-tab__icon":"")+"\n  "},{"aria-hidden":"true"},Ye(e[8],["use","class","on","leading","leadingHidden","trailing"])],g={};for(let e=0;e<y.length;e+=1)g=i(g,y[e]);return{c(){t=L("i"),f&&f.c(),T(t,g)},m(i,o){b(i,t,o),f&&f.m(t,null),c=!0,h||(m=[p(s=et.call(null,t,e[0])),p(n=e[6].call(null,t))],h=!0)},p(e,[i]){f&&f.p&&512&i&&u(f,d,e,e[9],i,null,null),T(t,g=me(y,[(!c||62&i&&o!==(o="\n    "+e[1]+"\n    "+("button"===e[7]?"mdc-button__icon":"")+"\n    "+("fab"===e[7]?"mdc-fab__icon":"")+"\n    "+("icon-button"===e[7]?"mdc-icon-button__icon":"")+"\n    "+("icon-button"===e[7]&&e[2]?"mdc-icon-button__icon--on":"")+"\n    "+("chip"===e[7]?"mdc-chip__icon":"")+"\n    "+("chip"===e[7]&&e[3]?"mdc-chip__icon--leading":"")+"\n    "+("chip"===e[7]&&e[4]?"mdc-chip__icon--leading-hidden":"")+"\n    "+("chip"===e[7]&&e[5]?"mdc-chip__icon--trailing":"")+"\n    "+("tab"===e[7]?"mdc-tab__icon":"")+"\n  "))&&{class:o},{"aria-hidden":"true"},256&i&&Ye(e[8],["use","class","on","leading","leadingHidden","trailing"])])),s&&r(s.update)&&1&i&&s.update.call(null,e[0])},i(e){c||(ce(f,e),c=!0)},o(e){ue(f,e),c=!1},d(e){e&&v(t),f&&f.d(e),h=!1,a(m)}}}function Et(e,t,o){let{$$slots:s={},$$scope:a}=t;const r=Je(R());let{use:n=[]}=t,{class:l=""}=t,{on:c=!1}=t,{leading:u=!1}=t,{leadingHidden:p=!1}=t,{trailing:m=!1}=t;const d=V("SMUI:icon:context");return e.$$set=e=>{o(8,t=i(i({},t),h(e))),"use"in e&&o(0,n=e.use),"class"in e&&o(1,l=e.class),"on"in e&&o(2,c=e.on),"leading"in e&&o(3,u=e.leading),"leadingHidden"in e&&o(4,p=e.leadingHidden),"trailing"in e&&o(5,m=e.trailing),"$$scope"in e&&o(9,a=e.$$scope)},t=h(t),[n,l,c,u,p,m,r,d,t,a,s]}class Tt extends ve{constructor(e){super(),be(this,e,Et,Ft,n,{use:0,class:1,on:2,leading:3,leadingHidden:4,trailing:5})}}
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
/**
   * @license
   * Copyright 2018 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
<<<<<<< HEAD
   */var Kt={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},Jt=function(e){function t(i){var a=e.call(this,Je({},t.defaultAdapter,i))||this;return a.transitionEndHandler_=function(e){return a.handleTransitionEnd(e)},a}return Ke(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Kt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.activate=function(){this.adapter_.removeClass(Kt.LINE_RIPPLE_DEACTIVATING),this.adapter_.addClass(Kt.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter_.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter_.addClass(Kt.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var t=this.adapter_.hasClass(Kt.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter_.removeClass(Kt.LINE_RIPPLE_ACTIVE),this.adapter_.removeClass(Kt.LINE_RIPPLE_DEACTIVATING))},t}(it),Yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ke(t,e),t.attachTo=function(e){return new t(e)},t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.setRippleCenter=function(e){this.foundation_.setRippleCenter(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new Jt({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setStyle:function(t,i){return e.root_.style.setProperty(t,i)},registerEventHandler:function(t,i){return e.listen(t,i)},deregisterEventHandler:function(t,i){return e.unlisten(t,i)}})},t}(at);
=======
   */var Ct={LINE_RIPPLE_ACTIVE:"mdc-line-ripple--active",LINE_RIPPLE_DEACTIVATING:"mdc-line-ripple--deactivating"},zt=function(e){function t(i){var o=e.call(this,Ne({},t.defaultAdapter,i))||this;return o.transitionEndHandler_=function(e){return o.handleTransitionEnd(e)},o}return Oe(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Ct},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},registerEventHandler:function(){},deregisterEventHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterEventHandler("transitionend",this.transitionEndHandler_)},t.prototype.activate=function(){this.adapter_.removeClass(Ct.LINE_RIPPLE_DEACTIVATING),this.adapter_.addClass(Ct.LINE_RIPPLE_ACTIVE)},t.prototype.setRippleCenter=function(e){this.adapter_.setStyle("transform-origin",e+"px center")},t.prototype.deactivate=function(){this.adapter_.addClass(Ct.LINE_RIPPLE_DEACTIVATING)},t.prototype.handleTransitionEnd=function(e){var t=this.adapter_.hasClass(Ct.LINE_RIPPLE_DEACTIVATING);"opacity"===e.propertyName&&t&&(this.adapter_.removeClass(Ct.LINE_RIPPLE_ACTIVE),this.adapter_.removeClass(Ct.LINE_RIPPLE_DEACTIVATING))},t}(je),At=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.attachTo=function(e){return new t(e)},t.prototype.activate=function(){this.foundation_.activate()},t.prototype.deactivate=function(){this.foundation_.deactivate()},t.prototype.setRippleCenter=function(e){this.foundation_.setRippleCenter(e)},t.prototype.getDefaultFoundation=function(){var e=this;return new zt({addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},hasClass:function(t){return e.root_.classList.contains(t)},setStyle:function(t,i){return e.root_.style.setProperty(t,i)},registerEventHandler:function(t,i){return e.listen(t,i)},deregisterEventHandler:function(t,i){return e.unlisten(t,i)}})},t}(Ze);
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
/**
   * @license
   * Copyright 2018 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
<<<<<<< HEAD
   */function ei(e,t){let i=Object.getOwnPropertyNames(e);const a={};for(let s=0;s<i.length;s++){const o=i[s];o.substring(0,t.length)===t&&(a[o.substring(t.length)]=e[o])}return a}function ti(t){let a,s,n,l,u,c,g=[{class:s="\n    mdc-line-ripple\n    "+t[1]+"\n    "+(t[2]?"mdc-line-ripple--active":"")+"\n  "},ct(t[5],["use","class","active"])],f={};for(let e=0;e<g.length;e+=1)f=i(f,g[e]);return{c(){a=q("div"),T(a,f)},m(e,i){v(e,a,i),t[9](a),u||(c=[d(n=gt.call(null,a,t[0])),d(l=t[4].call(null,a))],u=!0)},p(e,[t]){T(a,f=pe(g,[6&t&&s!==(s="\n    mdc-line-ripple\n    "+e[1]+"\n    "+(e[2]?"mdc-line-ripple--active":"")+"\n  ")&&{class:s},32&t&&ct(e[5],["use","class","active"])])),n&&r(n.update)&&1&t&&n.update.call(null,e[0])},i:e,o:e,d(e){e&&x(a),t[9](null),u=!1,o(c)}}}function ii(e,t,a){const s=ut(N());let o,r,{use:n=[]}=t,{class:l=""}=t,{active:u=!1}=t;return $(()=>{r=new Yt(o)}),G(()=>{r&&r.destroy()}),e.$$set=e=>{a(5,t=i(i({},t),g(e))),"use"in e&&a(0,n=e.use),"class"in e&&a(1,l=e.class),"active"in e&&a(2,u=e.active)},t=g(t),[n,l,u,o,s,t,function(...e){return r.activate(...e)},function(...e){return r.deactivate(...e)},function(e,...t){return r.setRippleCenter(e,...t)},function(e){H[e?"unshift":"push"](()=>{o=e,a(3,o)})}]}class ai extends Ce{constructor(e){super(),xe(this,e,ii,ti,n,{use:0,class:1,active:2,activate:6,deactivate:7,setRippleCenter:8})}get activate(){return this.$$.ctx[6]}get deactivate(){return this.$$.ctx[7]}get setRippleCenter(){return this.$$.ctx[8]}}
=======
   */function Pt(e,t){let i=Object.getOwnPropertyNames(e);const o={};for(let s=0;s<i.length;s++){const a=i[s];a.substring(0,t.length)===t&&(o[a.substring(t.length)]=e[a])}return o}function Bt(t){let o,s,n,l,c,u,h=[{class:s="\n    mdc-line-ripple\n    "+t[1]+"\n    "+(t[2]?"mdc-line-ripple--active":"")+"\n  "},Ye(t[5],["use","class","active"])],m={};for(let e=0;e<h.length;e+=1)m=i(m,h[e]);return{c(){o=L("div"),T(o,m)},m(e,i){b(e,o,i),t[9](o),c||(u=[p(n=et.call(null,o,t[0])),p(l=t[4].call(null,o))],c=!0)},p(e,[t]){T(o,m=me(h,[6&t&&s!==(s="\n    mdc-line-ripple\n    "+e[1]+"\n    "+(e[2]?"mdc-line-ripple--active":"")+"\n  ")&&{class:s},32&t&&Ye(e[5],["use","class","active"])])),n&&r(n.update)&&1&t&&n.update.call(null,e[0])},i:e,o:e,d(e){e&&v(o),t[9](null),c=!1,a(u)}}}function Mt(e,t,o){const s=Je(R());let a,r,{use:n=[]}=t,{class:l=""}=t,{active:c=!1}=t;return O(()=>{r=new At(a)}),N(()=>{r&&r.destroy()}),e.$$set=e=>{o(5,t=i(i({},t),h(e))),"use"in e&&o(0,n=e.use),"class"in e&&o(1,l=e.class),"active"in e&&o(2,c=e.active)},t=h(t),[n,l,c,a,s,t,function(...e){return r.activate(...e)},function(...e){return r.deactivate(...e)},function(e,...t){return r.setRippleCenter(e,...t)},function(e){Z[e?"unshift":"push"](()=>{a=e,o(3,a)})}]}class Dt extends ve{constructor(e){super(),be(this,e,Mt,Bt,n,{use:0,class:1,active:2,activate:6,deactivate:7,setRippleCenter:8})}get activate(){return this.$$.ctx[6]}get deactivate(){return this.$$.ctx[7]}get setRippleCenter(){return this.$$.ctx[8]}}
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
<<<<<<< HEAD
   */var si={animationend:{cssProperty:"animation",prefixed:"webkitAnimationEnd",standard:"animationend"},animationiteration:{cssProperty:"animation",prefixed:"webkitAnimationIteration",standard:"animationiteration"},animationstart:{cssProperty:"animation",prefixed:"webkitAnimationStart",standard:"animationstart"},transitionend:{cssProperty:"transition",prefixed:"webkitTransitionEnd",standard:"transitionend"}};function oi(e,t){if(function(e){return Boolean(e.document)&&"function"==typeof e.document.createElement}(e)&&t in si){var i=e.document.createElement("div"),a=si[t],s=a.standard,o=a.prefixed;return a.cssProperty in i.style?s:o}return t}
=======
   */var St={animationend:{cssProperty:"animation",prefixed:"webkitAnimationEnd",standard:"animationend"},animationiteration:{cssProperty:"animation",prefixed:"webkitAnimationIteration",standard:"animationiteration"},animationstart:{cssProperty:"animation",prefixed:"webkitAnimationStart",standard:"animationstart"},transitionend:{cssProperty:"transition",prefixed:"webkitTransitionEnd",standard:"transitionend"}};function kt(e,t){if(function(e){return Boolean(e.document)&&"function"==typeof e.document.createElement}(e)&&t in St){var i=e.document.createElement("div"),o=St[t],s=o.standard,a=o.prefixed;return o.cssProperty in i.style?s:a}return t}
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
/**
   * @license
   * Copyright 2016 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
<<<<<<< HEAD
   */var ri={ANIM_CHECKED_INDETERMINATE:"mdc-checkbox--anim-checked-indeterminate",ANIM_CHECKED_UNCHECKED:"mdc-checkbox--anim-checked-unchecked",ANIM_INDETERMINATE_CHECKED:"mdc-checkbox--anim-indeterminate-checked",ANIM_INDETERMINATE_UNCHECKED:"mdc-checkbox--anim-indeterminate-unchecked",ANIM_UNCHECKED_CHECKED:"mdc-checkbox--anim-unchecked-checked",ANIM_UNCHECKED_INDETERMINATE:"mdc-checkbox--anim-unchecked-indeterminate",BACKGROUND:"mdc-checkbox__background",CHECKED:"mdc-checkbox--checked",CHECKMARK:"mdc-checkbox__checkmark",CHECKMARK_PATH:"mdc-checkbox__checkmark-path",DISABLED:"mdc-checkbox--disabled",INDETERMINATE:"mdc-checkbox--indeterminate",MIXEDMARK:"mdc-checkbox__mixedmark",NATIVE_CONTROL:"mdc-checkbox__native-control",ROOT:"mdc-checkbox",SELECTED:"mdc-checkbox--selected",UPGRADED:"mdc-checkbox--upgraded"},ni={ARIA_CHECKED_ATTR:"aria-checked",ARIA_CHECKED_INDETERMINATE_VALUE:"mixed",NATIVE_CONTROL_SELECTOR:".mdc-checkbox__native-control",TRANSITION_STATE_CHECKED:"checked",TRANSITION_STATE_INDETERMINATE:"indeterminate",TRANSITION_STATE_INIT:"init",TRANSITION_STATE_UNCHECKED:"unchecked"},li={ANIM_END_LATCH_MS:250},ui=function(e){function t(i){var a=e.call(this,Je({},t.defaultAdapter,i))||this;return a.currentCheckState_=ni.TRANSITION_STATE_INIT,a.currentAnimationClass_="",a.animEndLatchTimer_=0,a.enableAnimationEndHandler_=!1,a}return Ke(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return ri},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return ni},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return li},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},forceLayout:function(){},hasNativeControl:function(){return!1},isAttachedToDOM:function(){return!1},isChecked:function(){return!1},isIndeterminate:function(){return!1},removeClass:function(){},removeNativeControlAttr:function(){},setNativeControlAttr:function(){},setNativeControlDisabled:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.currentCheckState_=this.determineCheckState_(),this.updateAriaChecked_(),this.adapter_.addClass(ri.UPGRADED)},t.prototype.destroy=function(){clearTimeout(this.animEndLatchTimer_)},t.prototype.setDisabled=function(e){this.adapter_.setNativeControlDisabled(e),e?this.adapter_.addClass(ri.DISABLED):this.adapter_.removeClass(ri.DISABLED)},t.prototype.handleAnimationEnd=function(){var e=this;this.enableAnimationEndHandler_&&(clearTimeout(this.animEndLatchTimer_),this.animEndLatchTimer_=setTimeout((function(){e.adapter_.removeClass(e.currentAnimationClass_),e.enableAnimationEndHandler_=!1}),li.ANIM_END_LATCH_MS))},t.prototype.handleChange=function(){this.transitionCheckState_()},t.prototype.transitionCheckState_=function(){if(this.adapter_.hasNativeControl()){var e=this.currentCheckState_,t=this.determineCheckState_();if(e!==t){this.updateAriaChecked_();var i=ri.SELECTED;t===ni.TRANSITION_STATE_UNCHECKED?this.adapter_.removeClass(i):this.adapter_.addClass(i),this.currentAnimationClass_.length>0&&(clearTimeout(this.animEndLatchTimer_),this.adapter_.forceLayout(),this.adapter_.removeClass(this.currentAnimationClass_)),this.currentAnimationClass_=this.getTransitionAnimationClass_(e,t),this.currentCheckState_=t,this.adapter_.isAttachedToDOM()&&this.currentAnimationClass_.length>0&&(this.adapter_.addClass(this.currentAnimationClass_),this.enableAnimationEndHandler_=!0)}}},t.prototype.determineCheckState_=function(){var e=ni.TRANSITION_STATE_INDETERMINATE,t=ni.TRANSITION_STATE_CHECKED,i=ni.TRANSITION_STATE_UNCHECKED;return this.adapter_.isIndeterminate()?e:this.adapter_.isChecked()?t:i},t.prototype.getTransitionAnimationClass_=function(e,i){var a=ni.TRANSITION_STATE_INIT,s=ni.TRANSITION_STATE_CHECKED,o=ni.TRANSITION_STATE_UNCHECKED,r=t.cssClasses,n=r.ANIM_UNCHECKED_CHECKED,l=r.ANIM_UNCHECKED_INDETERMINATE,u=r.ANIM_CHECKED_UNCHECKED,c=r.ANIM_CHECKED_INDETERMINATE,g=r.ANIM_INDETERMINATE_CHECKED,f=r.ANIM_INDETERMINATE_UNCHECKED;switch(e){case a:return i===o?"":i===s?g:f;case o:return i===s?n:l;case s:return i===o?u:c;default:return i===s?g:f}},t.prototype.updateAriaChecked_=function(){this.adapter_.isIndeterminate()?this.adapter_.setNativeControlAttr(ni.ARIA_CHECKED_ATTR,ni.ARIA_CHECKED_INDETERMINATE_VALUE):this.adapter_.removeNativeControlAttr(ni.ARIA_CHECKED_ATTR)},t}(it),ci=["checked","indeterminate"],gi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ripple_=t.createRipple_(),t}return Ke(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"ripple",{get:function(){return this.ripple_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this.nativeControl_.checked},set:function(e){this.nativeControl_.checked=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indeterminate",{get:function(){return this.nativeControl_.indeterminate},set:function(e){this.nativeControl_.indeterminate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.nativeControl_.disabled},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.nativeControl_.value},set:function(e){this.nativeControl_.value=e},enumerable:!0,configurable:!0}),t.prototype.initialSyncWithDOM=function(){var e=this;this.handleChange_=function(){return e.foundation_.handleChange()},this.handleAnimationEnd_=function(){return e.foundation_.handleAnimationEnd()},this.nativeControl_.addEventListener("change",this.handleChange_),this.listen(oi(window,"animationend"),this.handleAnimationEnd_),this.installPropertyChangeHooks_()},t.prototype.destroy=function(){this.ripple_.destroy(),this.nativeControl_.removeEventListener("change",this.handleChange_),this.unlisten(oi(window,"animationend"),this.handleAnimationEnd_),this.uninstallPropertyChangeHooks_(),e.prototype.destroy.call(this)},t.prototype.getDefaultFoundation=function(){var e=this;return new ui({addClass:function(t){return e.root_.classList.add(t)},forceLayout:function(){return e.root_.offsetWidth},hasNativeControl:function(){return!!e.nativeControl_},isAttachedToDOM:function(){return Boolean(e.root_.parentNode)},isChecked:function(){return e.checked},isIndeterminate:function(){return e.indeterminate},removeClass:function(t){return e.root_.classList.remove(t)},removeNativeControlAttr:function(t){return e.nativeControl_.removeAttribute(t)},setNativeControlAttr:function(t,i){return e.nativeControl_.setAttribute(t,i)},setNativeControlDisabled:function(t){return e.nativeControl_.disabled=t}})},t.prototype.createRipple_=function(){var e=this,t=Je({},wt.createAdapter(this),{deregisterInteractionHandler:function(t,i){return e.nativeControl_.removeEventListener(t,i,pt())},isSurfaceActive:function(){return mt(e.nativeControl_,":active")},isUnbounded:function(){return!0},registerInteractionHandler:function(t,i){return e.nativeControl_.addEventListener(t,i,pt())}});return new wt(this.root_,new Ut(t))},t.prototype.installPropertyChangeHooks_=function(){var e=this,t=this.nativeControl_,i=Object.getPrototypeOf(t);ci.forEach((function(a){var s=Object.getOwnPropertyDescriptor(i,a);if(fi(s)){var o=s.get,r={configurable:s.configurable,enumerable:s.enumerable,get:o,set:function(i){s.set.call(t,i),e.foundation_.handleChange()}};Object.defineProperty(t,a,r)}}))},t.prototype.uninstallPropertyChangeHooks_=function(){var e=this.nativeControl_,t=Object.getPrototypeOf(e);ci.forEach((function(i){var a=Object.getOwnPropertyDescriptor(t,i);fi(a)&&Object.defineProperty(e,i,a)}))},Object.defineProperty(t.prototype,"nativeControl_",{get:function(){var e=ui.strings.NATIVE_CONTROL_SELECTOR,t=this.root_.querySelector(e);if(!t)throw new Error("Checkbox component requires a "+e+" element");return t},enumerable:!0,configurable:!0}),t}(at);function fi(e){return!!e&&"function"==typeof e.set}function di(t){let a,s,n,l,u,c,g,f,h,p,m,y,_=[{class:n="mdc-checkbox__native-control "+t[6]},{type:"checkbox"},t[11],{disabled:t[2]},{__value:l=t[4]===t[10]?t[3]:t[4]},ct(ei(t[15],"input$"),["use","class"])],C={};for(let e=0;e<_.length;e+=1)C=i(C,_[e]);let U=[{class:f="\n    mdc-checkbox\n    "+t[1]+"\n    "+(t[2]?"mdc-checkbox--disabled":"")+"\n    "+("data-table"===t[12]&&t[13]?"mdc-data-table__header-row-checkbox":"")+"\n    "+("data-table"!==t[12]||t[13]?"":"mdc-data-table__row-checkbox")+"\n  "},ct(t[15],["use","class","disabled","indeterminate","group","checked","value","valueKey","input$"])],w={};for(let e=0;e<U.length;e+=1)w=i(w,U[e]);return{c(){a=q("div"),s=q("input"),c=E(),g=q("div"),g.innerHTML='<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24"><path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"></path></svg> \n    <div class="mdc-checkbox__mixedmark"></div>',T(s,C),M(g,"class","mdc-checkbox__background"),T(a,w)},m(e,i){v(e,a,i),b(a,s),s.checked=t[8],b(a,c),b(a,g),t[23](a),m||(y=[d(u=gt.call(null,s,t[5])),P(s,"change",t[22]),P(s,"change",t[14]),P(s,"input",t[14]),P(s,"change",t[20]),P(s,"input",t[21]),d(h=gt.call(null,a,t[0])),d(p=t[9].call(null,a))],m=!0)},p(e,t){T(s,C=pe(_,[64&t[0]&&n!==(n="mdc-checkbox__native-control "+e[6])&&{class:n},{type:"checkbox"},e[11],4&t[0]&&{disabled:e[2]},24&t[0]&&l!==(l=e[4]===e[10]?e[3]:e[4])&&{__value:l},32768&t[0]&&ct(ei(e[15],"input$"),["use","class"])])),u&&r(u.update)&&32&t[0]&&u.update.call(null,e[5]),256&t[0]&&(s.checked=e[8]),T(a,w=pe(U,[6&t[0]&&f!==(f="\n    mdc-checkbox\n    "+e[1]+"\n    "+(e[2]?"mdc-checkbox--disabled":"")+"\n    "+("data-table"===e[12]&&e[13]?"mdc-data-table__header-row-checkbox":"")+"\n    "+("data-table"!==e[12]||e[13]?"":"mdc-data-table__row-checkbox")+"\n  ")&&{class:f},32768&t[0]&&ct(e[15],["use","class","disabled","indeterminate","group","checked","value","valueKey","input$"])])),h&&r(h.update)&&1&t[0]&&h.update.call(null,e[0])},i:e,o:e,d(e){e&&x(a),t[23](null),m=!1,o(y)}}}function hi(e,t,a){const s=ut(N());let o,r,n=()=>{},{use:l=[]}=t,{class:u=""}=t,{disabled:c=!1}=t,{indeterminate:f=n}=t,{group:d=n}=t,{checked:h=n}=t,{value:p=null}=t,{valueKey:m=n}=t,{input$use:y=[]}=t,{input$class:_=""}=t,b=Z("SMUI:form-field"),v=Z("SMUI:generic:input:props")||{},x=Z("SMUI:generic:input:setChecked"),C=Z("SMUI:generic:input:addChangeHandler"),q=d===n?h!==n&&h:-1!==d.indexOf(p),U=Z("SMUI:checkbox:context"),w=Z("SMUI:data-table:row:header"),E=Z("SMUI:data-table:row:getIndex"),B=Z("SMUI:checkbox:instantiate"),P=Z("SMUI:checkbox:getInstance"),M=h;function T(){if(d!==n){const e=d.indexOf(p);r.checked&&-1===e?(d.push(p),a(16,d)):r.checked||-1===e||(d.splice(e,1),a(16,d))}}return C&&C(T),$(async()=>{a(24,r=!1!==B?new gi(o):"data-table"===U?w?await P(!0):(await P(!1))[E()]:await P()),b&&b()&&(b().input=r)}),G(()=>{!1!==B&&r&&r.destroy()}),e.$$set=e=>{a(15,t=i(i({},t),g(e))),"use"in e&&a(0,l=e.use),"class"in e&&a(1,u=e.class),"disabled"in e&&a(2,c=e.disabled),"indeterminate"in e&&a(18,f=e.indeterminate),"group"in e&&a(16,d=e.group),"checked"in e&&a(17,h=e.checked),"value"in e&&a(3,p=e.value),"valueKey"in e&&a(4,m=e.valueKey),"input$use"in e&&a(5,y=e.input$use),"input$class"in e&&a(6,_=e.input$class)},e.$$.update=()=>{if(33685760&e.$$.dirty[0]&&h!==n&&(h===M?a(17,h=q):q!==h&&a(8,q=h),a(25,M=h)),256&e.$$.dirty[0]&&x&&x(q),17039360&e.$$.dirty[0]&&r&&f!==n&&r.indeterminate!==f&&a(24,r.indeterminate=f,r),16973832&e.$$.dirty[0]&&r)if(d!==n){const e=-1!==d.indexOf(p);r.checked!==e&&a(24,r.checked=e,r)}else h!==n&&r.checked!==h&&a(24,r.checked=h,r);16777220&e.$$.dirty[0]&&r&&r.disabled!==c&&a(24,r.disabled=c,r),16777240&e.$$.dirty[0]&&r&&m===n&&r.value!==p&&a(24,r.value=p,r),16777232&e.$$.dirty[0]&&r&&m!==n&&r.value!==m&&a(24,r.value=m,r)},t=g(t),[l,u,c,p,m,y,_,o,q,s,n,v,U,w,T,t,d,h,f,function(){return v&&v.id},function(t){Q(e,t)},function(t){Q(e,t)},function(){q=this.checked,a(8,q),a(17,h),a(10,n),a(25,M)},function(e){H[e?"unshift":"push"](()=>{o=e,a(7,o)})}]}class pi extends Ce{constructor(e){super(),xe(this,e,hi,di,n,{use:0,class:1,disabled:2,indeterminate:18,group:16,checked:17,value:3,valueKey:4,input$use:5,input$class:6,getId:19},[-1,-1])}get getId(){return this.$$.ctx[19]}}
=======
   */var Ut={ANIM_CHECKED_INDETERMINATE:"mdc-checkbox--anim-checked-indeterminate",ANIM_CHECKED_UNCHECKED:"mdc-checkbox--anim-checked-unchecked",ANIM_INDETERMINATE_CHECKED:"mdc-checkbox--anim-indeterminate-checked",ANIM_INDETERMINATE_UNCHECKED:"mdc-checkbox--anim-indeterminate-unchecked",ANIM_UNCHECKED_CHECKED:"mdc-checkbox--anim-unchecked-checked",ANIM_UNCHECKED_INDETERMINATE:"mdc-checkbox--anim-unchecked-indeterminate",BACKGROUND:"mdc-checkbox__background",CHECKED:"mdc-checkbox--checked",CHECKMARK:"mdc-checkbox__checkmark",CHECKMARK_PATH:"mdc-checkbox__checkmark-path",DISABLED:"mdc-checkbox--disabled",INDETERMINATE:"mdc-checkbox--indeterminate",MIXEDMARK:"mdc-checkbox__mixedmark",NATIVE_CONTROL:"mdc-checkbox__native-control",ROOT:"mdc-checkbox",SELECTED:"mdc-checkbox--selected",UPGRADED:"mdc-checkbox--upgraded"},Rt={ARIA_CHECKED_ATTR:"aria-checked",ARIA_CHECKED_INDETERMINATE_VALUE:"mixed",NATIVE_CONTROL_SELECTOR:".mdc-checkbox__native-control",TRANSITION_STATE_CHECKED:"checked",TRANSITION_STATE_INDETERMINATE:"indeterminate",TRANSITION_STATE_INIT:"init",TRANSITION_STATE_UNCHECKED:"unchecked"},Ot={ANIM_END_LATCH_MS:250},Nt=function(e){function t(i){var o=e.call(this,Ne({},t.defaultAdapter,i))||this;return o.currentCheckState_=Rt.TRANSITION_STATE_INIT,o.currentAnimationClass_="",o.animEndLatchTimer_=0,o.enableAnimationEndHandler_=!1,o}return Oe(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Ut},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Rt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Ot},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},forceLayout:function(){},hasNativeControl:function(){return!1},isAttachedToDOM:function(){return!1},isChecked:function(){return!1},isIndeterminate:function(){return!1},removeClass:function(){},removeNativeControlAttr:function(){},setNativeControlAttr:function(){},setNativeControlDisabled:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.currentCheckState_=this.determineCheckState_(),this.updateAriaChecked_(),this.adapter_.addClass(Ut.UPGRADED)},t.prototype.destroy=function(){clearTimeout(this.animEndLatchTimer_)},t.prototype.setDisabled=function(e){this.adapter_.setNativeControlDisabled(e),e?this.adapter_.addClass(Ut.DISABLED):this.adapter_.removeClass(Ut.DISABLED)},t.prototype.handleAnimationEnd=function(){var e=this;this.enableAnimationEndHandler_&&(clearTimeout(this.animEndLatchTimer_),this.animEndLatchTimer_=setTimeout((function(){e.adapter_.removeClass(e.currentAnimationClass_),e.enableAnimationEndHandler_=!1}),Ot.ANIM_END_LATCH_MS))},t.prototype.handleChange=function(){this.transitionCheckState_()},t.prototype.transitionCheckState_=function(){if(this.adapter_.hasNativeControl()){var e=this.currentCheckState_,t=this.determineCheckState_();if(e!==t){this.updateAriaChecked_();var i=Ut.SELECTED;t===Rt.TRANSITION_STATE_UNCHECKED?this.adapter_.removeClass(i):this.adapter_.addClass(i),this.currentAnimationClass_.length>0&&(clearTimeout(this.animEndLatchTimer_),this.adapter_.forceLayout(),this.adapter_.removeClass(this.currentAnimationClass_)),this.currentAnimationClass_=this.getTransitionAnimationClass_(e,t),this.currentCheckState_=t,this.adapter_.isAttachedToDOM()&&this.currentAnimationClass_.length>0&&(this.adapter_.addClass(this.currentAnimationClass_),this.enableAnimationEndHandler_=!0)}}},t.prototype.determineCheckState_=function(){var e=Rt.TRANSITION_STATE_INDETERMINATE,t=Rt.TRANSITION_STATE_CHECKED,i=Rt.TRANSITION_STATE_UNCHECKED;return this.adapter_.isIndeterminate()?e:this.adapter_.isChecked()?t:i},t.prototype.getTransitionAnimationClass_=function(e,i){var o=Rt.TRANSITION_STATE_INIT,s=Rt.TRANSITION_STATE_CHECKED,a=Rt.TRANSITION_STATE_UNCHECKED,r=t.cssClasses,n=r.ANIM_UNCHECKED_CHECKED,l=r.ANIM_UNCHECKED_INDETERMINATE,c=r.ANIM_CHECKED_UNCHECKED,u=r.ANIM_CHECKED_INDETERMINATE,h=r.ANIM_INDETERMINATE_CHECKED,p=r.ANIM_INDETERMINATE_UNCHECKED;switch(e){case o:return i===a?"":i===s?h:p;case a:return i===s?n:l;case s:return i===a?c:u;default:return i===s?h:p}},t.prototype.updateAriaChecked_=function(){this.adapter_.isIndeterminate()?this.adapter_.setNativeControlAttr(Rt.ARIA_CHECKED_ATTR,Rt.ARIA_CHECKED_INDETERMINATE_VALUE):this.adapter_.removeNativeControlAttr(Rt.ARIA_CHECKED_ATTR)},t}(je),$t=["checked","indeterminate"],Vt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ripple_=t.createRipple_(),t}return Oe(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"ripple",{get:function(){return this.ripple_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){return this.nativeControl_.checked},set:function(e){this.nativeControl_.checked=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indeterminate",{get:function(){return this.nativeControl_.indeterminate},set:function(e){this.nativeControl_.indeterminate=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this.nativeControl_.disabled},set:function(e){this.foundation_.setDisabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.nativeControl_.value},set:function(e){this.nativeControl_.value=e},enumerable:!0,configurable:!0}),t.prototype.initialSyncWithDOM=function(){var e=this;this.handleChange_=function(){return e.foundation_.handleChange()},this.handleAnimationEnd_=function(){return e.foundation_.handleAnimationEnd()},this.nativeControl_.addEventListener("change",this.handleChange_),this.listen(kt(window,"animationend"),this.handleAnimationEnd_),this.installPropertyChangeHooks_()},t.prototype.destroy=function(){this.ripple_.destroy(),this.nativeControl_.removeEventListener("change",this.handleChange_),this.unlisten(kt(window,"animationend"),this.handleAnimationEnd_),this.uninstallPropertyChangeHooks_(),e.prototype.destroy.call(this)},t.prototype.getDefaultFoundation=function(){var e=this;return new Nt({addClass:function(t){return e.root_.classList.add(t)},forceLayout:function(){return e.root_.offsetWidth},hasNativeControl:function(){return!!e.nativeControl_},isAttachedToDOM:function(){return Boolean(e.root_.parentNode)},isChecked:function(){return e.checked},isIndeterminate:function(){return e.indeterminate},removeClass:function(t){return e.root_.classList.remove(t)},removeNativeControlAttr:function(t){return e.nativeControl_.removeAttribute(t)},setNativeControlAttr:function(t,i){return e.nativeControl_.setAttribute(t,i)},setNativeControlDisabled:function(t){return e.nativeControl_.disabled=t}})},t.prototype.createRipple_=function(){var e=this,t=Ne({},dt.createAdapter(this),{deregisterInteractionHandler:function(t,i){return e.nativeControl_.removeEventListener(t,i,st())},isSurfaceActive:function(){return at(e.nativeControl_,":active")},isUnbounded:function(){return!0},registerInteractionHandler:function(t,i){return e.nativeControl_.addEventListener(t,i,st())}});return new dt(this.root_,new mt(t))},t.prototype.installPropertyChangeHooks_=function(){var e=this,t=this.nativeControl_,i=Object.getPrototypeOf(t);$t.forEach((function(o){var s=Object.getOwnPropertyDescriptor(i,o);if(Gt(s)){var a=s.get,r={configurable:s.configurable,enumerable:s.enumerable,get:a,set:function(i){s.set.call(t,i),e.foundation_.handleChange()}};Object.defineProperty(t,o,r)}}))},t.prototype.uninstallPropertyChangeHooks_=function(){var e=this.nativeControl_,t=Object.getPrototypeOf(e);$t.forEach((function(i){var o=Object.getOwnPropertyDescriptor(t,i);Gt(o)&&Object.defineProperty(e,i,o)}))},Object.defineProperty(t.prototype,"nativeControl_",{get:function(){var e=Nt.strings.NATIVE_CONTROL_SELECTOR,t=this.root_.querySelector(e);if(!t)throw new Error("Checkbox component requires a "+e+" element");return t},enumerable:!0,configurable:!0}),t}(Ze);function Gt(e){return!!e&&"function"==typeof e.set}function jt(t){let o,s,n,l,c,u,h,m,d,f,y,g,x=[{class:n="mdc-checkbox__native-control "+t[6]},{type:"checkbox"},t[11],{disabled:t[2]},{__value:l=t[4]===t[10]?t[3]:t[4]},Ye(Pt(t[15],"input$"),["use","class"])],I={};for(let e=0;e<x.length;e+=1)I=i(I,x[e]);let q=[{class:m="\n    mdc-checkbox\n    "+t[1]+"\n    "+(t[2]?"mdc-checkbox--disabled":"")+"\n    "+("data-table"===t[12]&&t[13]?"mdc-data-table__header-row-checkbox":"")+"\n    "+("data-table"!==t[12]||t[13]?"":"mdc-data-table__row-checkbox")+"\n  "},Ye(t[15],["use","class","disabled","indeterminate","group","checked","value","valueKey","input$"])],C={};for(let e=0;e<q.length;e+=1)C=i(C,q[e]);return{c(){o=L("div"),s=L("input"),u=w(),h=L("div"),h.innerHTML='<svg class="mdc-checkbox__checkmark" viewBox="0 0 24 24"><path class="mdc-checkbox__checkmark-path" fill="none" d="M1.73,12.91 8.1,19.28 22.79,4.59"></path></svg> \n    <div class="mdc-checkbox__mixedmark"></div>',T(s,I),E(h,"class","mdc-checkbox__background"),T(o,C)},m(e,i){b(e,o,i),_(o,s),s.checked=t[8],_(o,u),_(o,h),t[23](o),y||(g=[p(c=et.call(null,s,t[5])),F(s,"change",t[22]),F(s,"change",t[14]),F(s,"input",t[14]),F(s,"change",t[20]),F(s,"input",t[21]),p(d=et.call(null,o,t[0])),p(f=t[9].call(null,o))],y=!0)},p(e,t){T(s,I=me(x,[64&t[0]&&n!==(n="mdc-checkbox__native-control "+e[6])&&{class:n},{type:"checkbox"},e[11],4&t[0]&&{disabled:e[2]},24&t[0]&&l!==(l=e[4]===e[10]?e[3]:e[4])&&{__value:l},32768&t[0]&&Ye(Pt(e[15],"input$"),["use","class"])])),c&&r(c.update)&&32&t[0]&&c.update.call(null,e[5]),256&t[0]&&(s.checked=e[8]),T(o,C=me(q,[6&t[0]&&m!==(m="\n    mdc-checkbox\n    "+e[1]+"\n    "+(e[2]?"mdc-checkbox--disabled":"")+"\n    "+("data-table"===e[12]&&e[13]?"mdc-data-table__header-row-checkbox":"")+"\n    "+("data-table"!==e[12]||e[13]?"":"mdc-data-table__row-checkbox")+"\n  ")&&{class:m},32768&t[0]&&Ye(e[15],["use","class","disabled","indeterminate","group","checked","value","valueKey","input$"])])),d&&r(d.update)&&1&t[0]&&d.update.call(null,e[0])},i:e,o:e,d(e){e&&v(o),t[23](null),y=!1,a(g)}}}function Zt(e,t,o){const s=Je(R());let a,r,n=()=>{},{use:l=[]}=t,{class:c=""}=t,{disabled:u=!1}=t,{indeterminate:p=n}=t,{group:m=n}=t,{checked:d=n}=t,{value:f=null}=t,{valueKey:y=n}=t,{input$use:g=[]}=t,{input$class:_=""}=t,b=V("SMUI:form-field"),v=V("SMUI:generic:input:props")||{},x=V("SMUI:generic:input:setChecked"),L=V("SMUI:generic:input:addChangeHandler"),I=m===n?d!==n&&d:-1!==m.indexOf(f),w=V("SMUI:checkbox:context"),q=V("SMUI:data-table:row:header"),F=V("SMUI:data-table:row:getIndex"),E=V("SMUI:checkbox:instantiate"),T=V("SMUI:checkbox:getInstance"),C=d;function z(){if(m!==n){const e=m.indexOf(f);r.checked&&-1===e?(m.push(f),o(16,m)):r.checked||-1===e||(m.splice(e,1),o(16,m))}}return L&&L(z),O(async()=>{o(24,r=!1!==E?new Vt(a):"data-table"===w?q?await T(!0):(await T(!1))[F()]:await T()),b&&b()&&(b().input=r)}),N(()=>{!1!==E&&r&&r.destroy()}),e.$$set=e=>{o(15,t=i(i({},t),h(e))),"use"in e&&o(0,l=e.use),"class"in e&&o(1,c=e.class),"disabled"in e&&o(2,u=e.disabled),"indeterminate"in e&&o(18,p=e.indeterminate),"group"in e&&o(16,m=e.group),"checked"in e&&o(17,d=e.checked),"value"in e&&o(3,f=e.value),"valueKey"in e&&o(4,y=e.valueKey),"input$use"in e&&o(5,g=e.input$use),"input$class"in e&&o(6,_=e.input$class)},e.$$.update=()=>{if(33685760&e.$$.dirty[0]&&d!==n&&(d===C?o(17,d=I):I!==d&&o(8,I=d),o(25,C=d)),256&e.$$.dirty[0]&&x&&x(I),17039360&e.$$.dirty[0]&&r&&p!==n&&r.indeterminate!==p&&o(24,r.indeterminate=p,r),16973832&e.$$.dirty[0]&&r)if(m!==n){const e=-1!==m.indexOf(f);r.checked!==e&&o(24,r.checked=e,r)}else d!==n&&r.checked!==d&&o(24,r.checked=d,r);16777220&e.$$.dirty[0]&&r&&r.disabled!==u&&o(24,r.disabled=u,r),16777240&e.$$.dirty[0]&&r&&y===n&&r.value!==f&&o(24,r.value=f,r),16777232&e.$$.dirty[0]&&r&&y!==n&&r.value!==y&&o(24,r.value=y,r)},t=h(t),[l,c,u,f,y,g,_,a,I,s,n,v,w,q,z,t,m,d,p,function(){return v&&v.id},function(t){G(e,t)},function(t){G(e,t)},function(){I=this.checked,o(8,I),o(17,d),o(10,n),o(25,C)},function(e){Z[e?"unshift":"push"](()=>{a=e,o(7,a)})}]}class Ht extends ve{constructor(e){super(),be(this,e,Zt,jt,n,{use:0,class:1,disabled:2,indeterminate:18,group:16,checked:17,value:3,valueKey:4,input$use:5,input$class:6,getId:19},[-1,-1])}get getId(){return this.$$.ctx[19]}}
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
/**
   * @license
   * Copyright 2017 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
<<<<<<< HEAD
   */var mi={ROOT:"mdc-form-field"},yi={LABEL_SELECTOR:".mdc-form-field > label"},_i=function(e){function t(i){var a=e.call(this,Je({},t.defaultAdapter,i))||this;return a.clickHandler_=function(){return a.handleClick_()},a}return Ke(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return mi},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return yi},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{activateInputRipple:function(){},deactivateInputRipple:function(){},deregisterInteractionHandler:function(){},registerInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerInteractionHandler("click",this.clickHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterInteractionHandler("click",this.clickHandler_)},t.prototype.handleClick_=function(){var e=this;this.adapter_.activateInputRipple(),requestAnimationFrame((function(){return e.adapter_.deactivateInputRipple()}))},t}(it),bi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ke(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"input",{get:function(){return this.input_},set:function(e){this.input_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label_",{get:function(){var e=_i.strings.LABEL_SELECTOR;return this.root_.querySelector(e)},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new _i({activateInputRipple:function(){e.input_&&e.input_.ripple&&e.input_.ripple.activate()},deactivateInputRipple:function(){e.input_&&e.input_.ripple&&e.input_.ripple.deactivate()},deregisterInteractionHandler:function(t,i){e.label_&&e.label_.removeEventListener(t,i)},registerInteractionHandler:function(t,i){e.label_&&e.label_.addEventListener(t,i)}})},t}(at);const vi=e=>({}),xi=e=>({});function Ci(e){let t,a,s,n,u,g,f,h,p,m;const y=e[9].default,_=l(y,e,e[8],null),C=e[9].label,U=l(C,e,e[8],xi);let w=[{for:e[3]},ct(ei(e[7],"label$"),["use"])],B={};for(let e=0;e<w.length;e+=1)B=i(B,w[e]);let P=[{class:u="\n    mdc-form-field\n    "+e[1]+"\n    "+("end"===e[2]?"mdc-form-field--align-end":"")+"\n  "},ct(e[7],["use","class","alignEnd","inputId","label$"])],M={};for(let e=0;e<P.length;e+=1)M=i(M,P[e]);return{c(){t=q("div"),_&&_.c(),a=E(),s=q("label"),U&&U.c(),T(s,B),T(t,M)},m(i,o){v(i,t,o),_&&_.m(t,null),b(t,a),b(t,s),U&&U.m(s,null),e[10](t),h=!0,p||(m=[d(n=gt.call(null,s,e[4])),d(g=gt.call(null,t,e[0])),d(f=e[6].call(null,t))],p=!0)},p(e,[i]){_&&_.p&&256&i&&c(_,y,e,e[8],i,null,null),U&&U.p&&256&i&&c(U,C,e,e[8],i,vi,xi),T(s,B=pe(w,[(!h||8&i)&&{for:e[3]},128&i&&ct(ei(e[7],"label$"),["use"])])),n&&r(n.update)&&16&i&&n.update.call(null,e[4]),T(t,M=pe(P,[(!h||6&i&&u!==(u="\n    mdc-form-field\n    "+e[1]+"\n    "+("end"===e[2]?"mdc-form-field--align-end":"")+"\n  "))&&{class:u},128&i&&ct(e[7],["use","class","alignEnd","inputId","label$"])])),g&&r(g.update)&&1&i&&g.update.call(null,e[0])},i(e){h||(ge(_,e),ge(U,e),h=!0)},o(e){fe(_,e),fe(U,e),h=!1},d(i){i&&x(t),_&&_.d(i),U&&U.d(i),e[10](null),p=!1,o(m)}}}let qi=0;function Ui(e,t,a){let{$$slots:s={},$$scope:o}=t;const r=ut(N());let n,l,{use:u=[]}=t,{class:c=""}=t,{align:f="start"}=t,{inputId:d="SMUI-form-field-"+qi++}=t,{label$use:h=[]}=t;return V("SMUI:form-field",()=>l),V("SMUI:generic:input:props",{id:d}),$(()=>{l=new bi(n)}),G(()=>{l&&l.destroy()}),e.$$set=e=>{a(7,t=i(i({},t),g(e))),"use"in e&&a(0,u=e.use),"class"in e&&a(1,c=e.class),"align"in e&&a(2,f=e.align),"inputId"in e&&a(3,d=e.inputId),"label$use"in e&&a(4,h=e.label$use),"$$scope"in e&&a(8,o=e.$$scope)},t=g(t),[u,c,f,d,h,n,r,t,o,s,function(e){H[e?"unshift":"push"](()=>{n=e,a(5,n)})}]}class wi extends Ce{constructor(e){super(),xe(this,e,Ui,Ci,n,{use:0,class:1,align:2,inputId:3,label$use:4})}}function Ei(e,t,i){const a=e.slice();return a[6]=t[i],a}function Bi(e){let t,i;return t=new kt({props:{id:"buttonSurt",style:" top: 4px;",$$slots:{default:[Mi]},$$scope:{ctx:e}}}),t.$on("click",(function(){r(e[4](e[0]))&&e[4](e[0]).apply(this,arguments)})),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(i,a){e=i;const s={};131072&a&&(s.$$scope={dirty:a,ctx:e}),t.$set(s)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function Pi(e){let t;return{c(){t=w("clear")},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function Mi(e){let t,i;return t=new ht({props:{style:"font-size: smaller;padding-left:-10px;",class:"material-icons iconaSurt ",$$slots:{default:[Pi]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,i){const a={};131072&i&&(a.$$scope={dirty:i,ctx:e}),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function Ti(e){let t,i=e[1],a=[];for(let t=0;t<i.length;t+=1)a[t]=Ai(Ei(e,i,t));return{c(){t=q("div");for(let e=0;e<a.length;e+=1)a[e].c();M(t,"class","selectResults svelte-1vwvkrp")},m(e,i){v(e,t,i);for(let e=0;e<a.length;e+=1)a[e].m(t,null)},p(e,s){if(42&s){let o;for(i=e[1],o=0;o<i.length;o+=1){const r=Ei(e,i,o);a[o]?a[o].p(r,s):(a[o]=Ai(r),a[o].c(),a[o].m(t,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=i.length}},d(e){e&&x(t),C(a,e)}}}function Ai(e){let t,i,a,s,n,l,u=e[6].nom+"";return{c(){t=q("option"),i=w(u),a=E(),M(t,"id","optionLabel"),M(t,"labelfieldname","nom"),M(t,"tabindex","0"),t.__value=s="\n        "+e[6].nom+"\n      ",t.value=t.__value,M(t,"class","svelte-1vwvkrp")},m(s,o){v(s,t,o),b(t,i),b(t,a),n||(l=[P(t,"submit",(function(){r(e[3](e[6]))&&e[3](e[6]).apply(this,arguments)})),P(t,"click",(function(){r(e[3](e[6]))&&e[3](e[6]).apply(this,arguments)})),P(t,"focus",(function(){r(e[5](e[6]))&&e[5](e[6]).apply(this,arguments)}))],n=!0)},p(a,o){e=a,2&o&&u!==(u=e[6].nom+"")&&A(i,u),2&o&&s!==(s="\n        "+e[6].nom+"\n      ")&&(t.__value=s,t.value=t.__value)},d(e){e&&x(t),n=!1,o(l)}}}function Si(e){let t,i,a,s,r,n,l,u,c,g=e[0].length>2&&Bi(e),f=e[0].length>2&&Ti(e);return{c(){t=q("div"),i=q("form"),a=q("div"),s=q("input"),r=E(),g&&g.c(),n=E(),f&&f.c(),M(s,"withtrailingicon",""),M(s,"placeholder","Cerca un municipi"),M(s,"id","searchTerm"),M(s,"class","form-control searchbox svelte-1vwvkrp"),M(s,"type","text"),I(s,"border-top-color","transparent"),I(s,"border-left","transparent"),I(s,"background-color","#f3f3f3"),I(s,"border-right","transparent"),I(s,"border-radius","6px"),M(a,"class","form-group svelte-1vwvkrp"),M(i,"class","form"),M(t,"class","search-text-input  svelte-1vwvkrp")},m(o,d){v(o,t,d),b(t,i),b(i,a),b(a,s),S(s,e[0]),b(a,r),g&&g.m(a,null),b(t,n),f&&f.m(t,null),l=!0,u||(c=[P(s,"input",e[7]),P(s,"keyup",e[8])],u=!0)},p(e,[i]){1&i&&s.value!==e[0]&&S(s,e[0]),e[0].length>2?g?(g.p(e,i),1&i&&ge(g,1)):(g=Bi(e),g.c(),ge(g,1),g.m(a,null)):g&&(ue(),fe(g,1,1,()=>{g=null}),ce()),e[0].length>2?f?f.p(e,i):(f=Ti(e),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},i(e){l||(ge(g),l=!0)},o(e){fe(g),l=!1},d(e){e&&x(t),g&&g.d(),f&&f.d(),u=!1,o(c)}}}function Ii(e,t,i){const a=Z("changePlace");let s="";var o=[];let r,n=[];const l=e=>{clearTimeout(r),r=setTimeout(()=>{i(0,s=e),u()},250)},u=async e=>{const t=await fetch("https://betaserver.icgc.cat/icgc_geocoder/?maxresultats=17&obtenirCoordGeografiques=si&tipus=Municipi&metode=localitzaToponim&ordre=alfabetic&trobaTots=no&nom="+s);i(1,o=await t.json()),o.forEach(e=>{e.nom,e.coordenadesLonLat})};function c(e){n=e.coordenadesLonLat,a({coords:n}),i(0,s=e.nom)}function g(){i(0,s="")}return[s,o,l,c,g,function(e){i(0,s=e.nom),addEventListener("keypress",(function(t){"Enter"===t.key&&c(e),"Escape"===t.key&&g()})),addEventListener("keydown",(function(e){"Escape"===e.key&&g()}))},void 0,function(){s=this.value,i(0,s)},({target:{value:e}})=>l(e)]}class Di extends Ce{constructor(e){super(),xe(this,e,Ii,Si,n,{})}}function zi(e){let t;const i=e[7].default,a=l(i,e,e[8],null);return{c(){a&&a.c()},m(e,i){a&&a.m(e,i),t=!0},p(e,t){a&&a.p&&256&t&&c(a,i,e,e[8],t,null,null)},i(e){t||(ge(a,e),t=!0)},o(e){fe(a,e),t=!1},d(e){a&&a.d(e)}}}function ki(e){let t,a,s;const o=[{use:[e[4],...e[0]]},{class:e[3]+" "+e[1]},ct(e[5],["use","class","component","forwardEvents"])];var r=e[2];function n(e){let t={$$slots:{default:[zi]},$$scope:{ctx:e}};for(let e=0;e<o.length;e+=1)t=i(t,o[e]);return{props:t}}return r&&(t=new r(n(e))),{c(){t&&ye(t.$$.fragment),a=B()},m(e,i){t&&_e(t,e,i),v(e,a,i),s=!0},p(e,[i]){const s=59&i?pe(o,[17&i&&{use:[e[4],...e[0]]},10&i&&{class:e[3]+" "+e[1]},32&i&&(l=ct(e[5],["use","class","component","forwardEvents"]),"object"==typeof l&&null!==l?l:{})]):{};var l;if(256&i&&(s.$$scope={dirty:i,ctx:e}),r!==(r=e[2])){if(t){ue();const e=t;fe(e.$$.fragment,1,0,()=>{be(e,1)}),ce()}r?(t=new r(n(e)),ye(t.$$.fragment),ge(t.$$.fragment,1),_e(t,a.parentNode,a)):t=null}else r&&t.$set(s)},i(e){s||(t&&ge(t.$$.fragment,e),s=!0)},o(e){t&&fe(t.$$.fragment,e),s=!1},d(e){e&&x(a),t&&be(t,e)}}}const Fi={component:null,smuiClass:null,contexts:{}};function Li(e,t,a){let{$$slots:s={},$$scope:o}=t,{use:r=[]}=t,{class:n=""}=t,{component:l=Fi.component}=t,{forwardEvents:u=[]}=t;const c=Fi.class,f=Fi.contexts,d=ut(N(),u);for(let e in f)f.hasOwnProperty(e)&&V(e,f[e]);return e.$$set=e=>{a(5,t=i(i({},t),g(e))),"use"in e&&a(0,r=e.use),"class"in e&&a(1,n=e.class),"component"in e&&a(2,l=e.component),"forwardEvents"in e&&a(6,u=e.forwardEvents),"$$scope"in e&&a(8,o=e.$$scope)},t=g(t),[r,n,l,c,d,t,u,s,o]}class Oi extends Ce{constructor(e){super(),xe(this,e,Li,ki,n,{use:0,class:1,component:2,forwardEvents:6})}}function Ri(e){function t(...t){return Object.assign(Fi,e),new Oi(...t)}return t.prototype=Oi,Oi.$$render&&(t.$$render=(...t)=>Object.assign(Fi,e)&&Oi.$$render(...t)),Oi.render&&(t.render=(...t)=>Object.assign(Fi,e)&&Oi.render(...t)),t}function Ni(e){let t,a,s,n,u,g;const f=e[4].default,h=l(f,e,e[3],null);let p=[ct(e[2],["use"])],m={};for(let e=0;e<p.length;e+=1)m=i(m,p[e]);return{c(){t=q("h2"),h&&h.c(),T(t,m)},m(i,o){v(i,t,o),h&&h.m(t,null),n=!0,u||(g=[d(a=gt.call(null,t,e[0])),d(s=e[1].call(null,t))],u=!0)},p(e,[i]){h&&h.p&&8&i&&c(h,f,e,e[3],i,null,null),T(t,m=pe(p,[4&i&&ct(e[2],["use"])])),a&&r(a.update)&&1&i&&a.update.call(null,e[0])},i(e){n||(ge(h,e),n=!0)},o(e){fe(h,e),n=!1},d(e){e&&x(t),h&&h.d(e),u=!1,o(g)}}}function $i(e,t,a){let{$$slots:s={},$$scope:o}=t;const r=ut(N());let{use:n=[]}=t;return e.$$set=e=>{a(2,t=i(i({},t),g(e))),"use"in e&&a(0,n=e.use),"$$scope"in e&&a(3,o=e.$$scope)},t=g(t),[n,r,t,o,s]}class Gi extends Ce{constructor(e){super(),xe(this,e,$i,Ni,n,{use:0})}}var Vi=Ri({class:"mdc-dialog__title",component:Gi,contexts:{}});function Zi(e){let t,a,s,n,u,g;const f=e[4].default,h=l(f,e,e[3],null);let p=[ct(e[2],["use"])],m={};for(let e=0;e<p.length;e+=1)m=i(m,p[e]);return{c(){t=q("div"),h&&h.c(),T(t,m)},m(i,o){v(i,t,o),h&&h.m(t,null),n=!0,u||(g=[d(a=gt.call(null,t,e[0])),d(s=e[1].call(null,t))],u=!0)},p(e,[i]){h&&h.p&&8&i&&c(h,f,e,e[3],i,null,null),T(t,m=pe(p,[4&i&&ct(e[2],["use"])])),a&&r(a.update)&&1&i&&a.update.call(null,e[0])},i(e){n||(ge(h,e),n=!0)},o(e){fe(h,e),n=!1},d(e){e&&x(t),h&&h.d(e),u=!1,o(g)}}}function Qi(e,t,a){let{$$slots:s={},$$scope:o}=t;const r=ut(N());let{use:n=[]}=t;return e.$$set=e=>{a(2,t=i(i({},t),g(e))),"use"in e&&a(0,n=e.use),"$$scope"in e&&a(3,o=e.$$scope)},t=g(t),[n,r,t,o,s]}class ji extends Ce{constructor(e){super(),xe(this,e,Qi,Zi,n,{use:0})}}var Hi=Ri({class:"mdc-dialog__content",component:ji,contexts:{}});function Xi(e){let t,a,s,n,u,g;const f=e[4].default,h=l(f,e,e[3],null);let p=[ct(e[2],["use"])],m={};for(let e=0;e<p.length;e+=1)m=i(m,p[e]);return{c(){t=q("footer"),h&&h.c(),T(t,m)},m(i,o){v(i,t,o),h&&h.m(t,null),n=!0,u||(g=[d(a=gt.call(null,t,e[0])),d(s=e[1].call(null,t))],u=!0)},p(e,[i]){h&&h.p&&8&i&&c(h,f,e,e[3],i,null,null),T(t,m=pe(p,[4&i&&ct(e[2],["use"])])),a&&r(a.update)&&1&i&&a.update.call(null,e[0])},i(e){n||(ge(h,e),n=!0)},o(e){fe(h,e),n=!1},d(e){e&&x(t),h&&h.d(e),u=!1,o(g)}}}function Wi(e,t,a){let{$$slots:s={},$$scope:o}=t;const r=ut(N());let{use:n=[]}=t;return e.$$set=e=>{a(2,t=i(i({},t),g(e))),"use"in e&&a(0,n=e.use),"$$scope"in e&&a(3,o=e.$$scope)},t=g(t),[n,r,t,o,s]}function Ki(e,{delay:i=0,duration:a=400,easing:s=t}){const o=+getComputedStyle(e).opacity;return{delay:i,duration:a,easing:s,css:e=>"opacity: "+e*o}}function Ji(e){let t,i,a,s,o,r,n,l,u,c,g,f,d,h;return s=new kt({props:{style:"    position: absolute;\r\n      right:-3px;\r\n      \r\n      z-index: 10;",$$slots:{default:[ea]},$$scope:{ctx:e}}}),s.$on("click",e[2]),r=new Vi({props:{id:"dialog-title",$$slots:{default:[ta]},$$scope:{ctx:e}}}),l=new ai({}),c=new Hi({props:{id:"dialog-content",class:"textModal",$$slots:{default:[ia]},$$scope:{ctx:e}}}),{c(){t=q("div"),i=q("div"),a=q("div"),ye(s.$$.fragment),o=E(),ye(r.$$.fragment),n=E(),ye(l.$$.fragment),u=E(),ye(c.$$.fragment),M(a,"class","modal-container text svelte-mj8ima"),M(i,"class","modal-overlay svelte-mj8ima"),M(i,"data-close","")},m(g,p){v(g,t,p),b(t,i),b(i,a),_e(s,a,null),b(a,o),_e(r,a,null),b(a,n),_e(l,a,null),b(a,u),_e(c,a,null),f=!0,d||(h=P(i,"click",e[1]),d=!0)},p(e,t){const i={};8&t&&(i.$$scope={dirty:t,ctx:e}),s.$set(i);const a={};8&t&&(a.$$scope={dirty:t,ctx:e}),r.$set(a);const o={};8&t&&(o.$$scope={dirty:t,ctx:e}),c.$set(o)},i(e){f||(ge(s.$$.fragment,e),ge(r.$$.fragment,e),ge(l.$$.fragment,e),ge(c.$$.fragment,e),Y(()=>{g||(g=he(i,Ki,{duration:150},!0)),g.run(1)}),f=!0)},o(e){fe(s.$$.fragment,e),fe(r.$$.fragment,e),fe(l.$$.fragment,e),fe(c.$$.fragment,e),g||(g=he(i,Ki,{duration:150},!1)),g.run(0),f=!1},d(e){e&&x(t),be(s),be(r),be(l),be(c),e&&g&&g.end(),d=!1,h()}}}function Yi(e){let t;return{c(){t=w("close")},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function ea(e){let t,i;return t=new Ot({props:{style:"              font-size: 22px;\r\n          color: black;\r\n          \r\n          border-radius: 17px;",class:" material-icons  ",$$slots:{default:[Yi]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,i){const a={};8&i&&(a.$$scope={dirty:i,ctx:e}),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function ta(e){let t;return{c(){t=q("h5"),t.innerHTML="<b>Capes d’informació geològica derivades del Mapa Geològic de Catalunya 1:25 000</b>",M(t,"class","svelte-mj8ima")},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function ia(e){let t;return{c(){t=q("h6"),t.innerHTML='El visor <i>Capes d’informació geològica derivades del Mapa Geològic 1:25 000 </i>permet consultar informació estructurada \n          per capes derivada dels fulls publicats de la sèrie Mapa geològic de Catalunya 1:25 000 en el marc dels projectes \n          Geotreball I (GT I) i Geotreball II (GT II). La present versió permet consultar de forma interactiva informació \n          referent a 6 capes d’informació: Terrenys antròpics, Cartografia del Basament, Cartografia del Quaternari, \n          Registre geològic (columnes estratigràfiques i esquemes de relacions estratigràfiques), Talls geològics i Mesures d’estructures. \n          També permet descarregar algun dels continguts que es mostren i documentació complementària associada. \n          El visor està vinculat al Referencial Geològic de Catalunya que l’ICGC està implementant i que és la plataforma \n          encarregada d’elaborar, emmagatzemar, estructurar, mantenir i difondre, a través de diferents canals, informació \n          geològica oficial del conjunt del territori.<br/>\n          La informació geològica que integra el visor és fonamentalment de caràcter qualitatiu. Es tracta d’una informació \n          descriptiva i indicativa, que no pot substituir interpretacions d’especialistes, recomanacions professionals \n          i/o investigacions i recerques específiques detallades. Les interpretacions que s’exposen es basen en el\n           coneixement dels autors dels fulls publicats del MGC25m i de l’equip de geòlegs de l’ICGC responsables de sintetitzar \n           i estructurar el conjunt de la informació que es proporciona. Es preveu que el contingut d’aquestes capes \n           d’informació s’ampliï progressivament a mesura que es disposi de nova informació. Els continguts actuals són \n           susceptibles de canviar a conseqüència de l’existència noves dades i observacions, d’avenços en el coneixement,\n          o millores en els mètodes d’interpretació. En aquests sentit, per evitar confusions es recomana que el present \n          visor se citi o es referenciï com: <br/>\n          ICGC, 2021. Visor de capes d’informació geològica derivades del Mapa geològic de Catalunya 1:25 000. Versió 1 de 15/09/2021. \n            <a target="_blank" href="https://visors.icgc.cat/informaciogeologica/">https://visors.icgc.cat/informaciogeologica/</a> (data de consulta)\n             <br/><br/>\n            Per més informació o comentaris sobre el visor adreceu-vos a  \n            <a href="mailto:icgc@icgc.cat">icgc@icgc.cat</a>',M(t,"class","svelte-mj8ima")},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function aa(e){let t,i,a=e[0]&&Ji(e);return{c(){a&&a.c(),t=B()},m(e,s){a&&a.m(e,s),v(e,t,s),i=!0},p(e,[i]){e[0]?a?(a.p(e,i),1&i&&ge(a,1)):(a=Ji(e),a.c(),ge(a,1),a.m(t.parentNode,t)):a&&(ue(),fe(a,1,1,()=>{a=null}),ce())},i(e){i||(ge(a),i=!0)},o(e){fe(a),i=!1},d(e){a&&a.d(e),e&&x(t)}}}function sa(e,t,i){let{show:a=!1}=t;return e.$$set=e=>{"show"in e&&i(0,a=e.show)},[a,function(e){"close"in e.target.dataset&&i(0,a=!1)},function(){i(0,a=!1)}]}Ri({class:"mdc-dialog__actions",component:class extends Ce{constructor(e){super(),xe(this,e,Wi,Xi,n,{use:0})}},contexts:{"SMUI:button:context":"dialog:action"}});class oa extends Ce{constructor(e){super(),xe(this,e,sa,aa,n,{show:0})}}function ra(t){let i,a;return{c(){i=q("div"),a=q("h1"),a.textContent=""+na,M(a,"id","titulo"),M(a,"tabindex","0"),M(a,"class","svelte-fx8gfq"),M(i,"class","headerLogo"),I(i,"width","-webkit-fill-available")},m(e,t){v(e,i,t),b(i,a)},p:e,i:e,o:e,d(e){e&&x(i)}}}let na="ICGC Geoíndex - Capes d’informació geològica derivades del Mapa Geològic de Catalunya 1:25.000";class la extends Ce{constructor(e){super(),xe(this,e,null,ra,n,{})}}
=======
   */var Xt={ROOT:"mdc-form-field"},Qt={LABEL_SELECTOR:".mdc-form-field > label"},Wt=function(e){function t(i){var o=e.call(this,Ne({},t.defaultAdapter,i))||this;return o.clickHandler_=function(){return o.handleClick_()},o}return Oe(t,e),Object.defineProperty(t,"cssClasses",{get:function(){return Xt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"strings",{get:function(){return Qt},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{activateInputRipple:function(){},deactivateInputRipple:function(){},deregisterInteractionHandler:function(){},registerInteractionHandler:function(){}}},enumerable:!0,configurable:!0}),t.prototype.init=function(){this.adapter_.registerInteractionHandler("click",this.clickHandler_)},t.prototype.destroy=function(){this.adapter_.deregisterInteractionHandler("click",this.clickHandler_)},t.prototype.handleClick_=function(){var e=this;this.adapter_.activateInputRipple(),requestAnimationFrame((function(){return e.adapter_.deactivateInputRipple()}))},t}(je),Kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.attachTo=function(e){return new t(e)},Object.defineProperty(t.prototype,"input",{get:function(){return this.input_},set:function(e){this.input_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"label_",{get:function(){var e=Wt.strings.LABEL_SELECTOR;return this.root_.querySelector(e)},enumerable:!0,configurable:!0}),t.prototype.getDefaultFoundation=function(){var e=this;return new Wt({activateInputRipple:function(){e.input_&&e.input_.ripple&&e.input_.ripple.activate()},deactivateInputRipple:function(){e.input_&&e.input_.ripple&&e.input_.ripple.deactivate()},deregisterInteractionHandler:function(t,i){e.label_&&e.label_.removeEventListener(t,i)},registerInteractionHandler:function(t,i){e.label_&&e.label_.addEventListener(t,i)}})},t}(Ze);const Jt=e=>({}),Yt=e=>({});function ei(e){let t,o,s,n,c,h,m,d,f,y;const g=e[9].default,x=l(g,e,e[8],null),I=e[9].label,q=l(I,e,e[8],Yt);let F=[{for:e[3]},Ye(Pt(e[7],"label$"),["use"])],E={};for(let e=0;e<F.length;e+=1)E=i(E,F[e]);let C=[{class:c="\n    mdc-form-field\n    "+e[1]+"\n    "+("end"===e[2]?"mdc-form-field--align-end":"")+"\n  "},Ye(e[7],["use","class","alignEnd","inputId","label$"])],z={};for(let e=0;e<C.length;e+=1)z=i(z,C[e]);return{c(){t=L("div"),x&&x.c(),o=w(),s=L("label"),q&&q.c(),T(s,E),T(t,z)},m(i,a){b(i,t,a),x&&x.m(t,null),_(t,o),_(t,s),q&&q.m(s,null),e[10](t),d=!0,f||(y=[p(n=et.call(null,s,e[4])),p(h=et.call(null,t,e[0])),p(m=e[6].call(null,t))],f=!0)},p(e,[i]){x&&x.p&&256&i&&u(x,g,e,e[8],i,null,null),q&&q.p&&256&i&&u(q,I,e,e[8],i,Jt,Yt),T(s,E=me(F,[(!d||8&i)&&{for:e[3]},128&i&&Ye(Pt(e[7],"label$"),["use"])])),n&&r(n.update)&&16&i&&n.update.call(null,e[4]),T(t,z=me(C,[(!d||6&i&&c!==(c="\n    mdc-form-field\n    "+e[1]+"\n    "+("end"===e[2]?"mdc-form-field--align-end":"")+"\n  "))&&{class:c},128&i&&Ye(e[7],["use","class","alignEnd","inputId","label$"])])),h&&r(h.update)&&1&i&&h.update.call(null,e[0])},i(e){d||(ce(x,e),ce(q,e),d=!0)},o(e){ue(x,e),ue(q,e),d=!1},d(i){i&&v(t),x&&x.d(i),q&&q.d(i),e[10](null),f=!1,a(y)}}}let ti=0;function ii(e,t,o){let{$$slots:s={},$$scope:a}=t;const r=Je(R());let n,l,{use:c=[]}=t,{class:u=""}=t,{align:p="start"}=t,{inputId:m="SMUI-form-field-"+ti++}=t,{label$use:d=[]}=t;return $("SMUI:form-field",()=>l),$("SMUI:generic:input:props",{id:m}),O(()=>{l=new Kt(n)}),N(()=>{l&&l.destroy()}),e.$$set=e=>{o(7,t=i(i({},t),h(e))),"use"in e&&o(0,c=e.use),"class"in e&&o(1,u=e.class),"align"in e&&o(2,p=e.align),"inputId"in e&&o(3,m=e.inputId),"label$use"in e&&o(4,d=e.label$use),"$$scope"in e&&o(8,a=e.$$scope)},t=h(t),[c,u,p,m,d,n,r,t,a,s,function(e){Z[e?"unshift":"push"](()=>{n=e,o(5,n)})}]}class oi extends ve{constructor(e){super(),be(this,e,ii,ei,n,{use:0,class:1,align:2,inputId:3,label$use:4})}}function si(e,t,i){const o=e.slice();return o[6]=t[i],o}function ai(e){let t,i;return t=new qt({props:{id:"buttonSurt",style:" top: 4px;",$$slots:{default:[ni]},$$scope:{ctx:e}}}),t.$on("click",(function(){r(e[4](e[0]))&&e[4](e[0]).apply(this,arguments)})),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},p(i,o){e=i;const s={};131072&o&&(s.$$scope={dirty:o,ctx:e}),t.$set(s)},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}function ri(e){let t;return{c(){t=I("clear")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function ni(e){let t,i;return t=new ot({props:{style:"font-size: smaller;padding-left:-10px;",class:"material-icons iconaSurt ",$$slots:{default:[ri]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},p(e,i){const o={};131072&i&&(o.$$scope={dirty:i,ctx:e}),t.$set(o)},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}function li(e){let t,i=e[1],o=[];for(let t=0;t<i.length;t+=1)o[t]=ci(si(e,i,t));return{c(){t=L("div");for(let e=0;e<o.length;e+=1)o[e].c();E(t,"class","selectResults svelte-1vwvkrp")},m(e,i){b(e,t,i);for(let e=0;e<o.length;e+=1)o[e].m(t,null)},p(e,s){if(42&s){let a;for(i=e[1],a=0;a<i.length;a+=1){const r=si(e,i,a);o[a]?o[a].p(r,s):(o[a]=ci(r),o[a].c(),o[a].m(t,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=i.length}},d(e){e&&v(t),x(o,e)}}}function ci(e){let t,i,o,s,n,l,c=e[6].nom+"";return{c(){t=L("option"),i=I(c),o=w(),E(t,"id","optionLabel"),E(t,"labelfieldname","nom"),E(t,"tabindex","0"),t.__value=s="\n        "+e[6].nom+"\n      ",t.value=t.__value,E(t,"class","svelte-1vwvkrp")},m(s,a){b(s,t,a),_(t,i),_(t,o),n||(l=[F(t,"submit",(function(){r(e[3](e[6]))&&e[3](e[6]).apply(this,arguments)})),F(t,"click",(function(){r(e[3](e[6]))&&e[3](e[6]).apply(this,arguments)})),F(t,"focus",(function(){r(e[5](e[6]))&&e[5](e[6]).apply(this,arguments)}))],n=!0)},p(o,a){e=o,2&a&&c!==(c=e[6].nom+"")&&C(i,c),2&a&&s!==(s="\n        "+e[6].nom+"\n      ")&&(t.__value=s,t.value=t.__value)},d(e){e&&v(t),n=!1,a(l)}}}function ui(e){let t,i,o,s,r,n,l,c,u,h=e[0].length>2&&ai(e),p=e[0].length>2&&li(e);return{c(){t=L("div"),i=L("form"),o=L("div"),s=L("input"),r=w(),h&&h.c(),n=w(),p&&p.c(),E(s,"withtrailingicon",""),E(s,"placeholder","Cerca un municipi"),E(s,"id","searchTerm"),E(s,"class","form-control searchbox svelte-1vwvkrp"),E(s,"type","text"),A(s,"border-top-color","transparent"),A(s,"border-left","transparent"),A(s,"background-color","#f3f3f3"),A(s,"border-right","transparent"),A(s,"border-radius","6px"),E(o,"class","form-group svelte-1vwvkrp"),E(i,"class","form"),E(t,"class","search-text-input  svelte-1vwvkrp")},m(a,m){b(a,t,m),_(t,i),_(i,o),_(o,s),z(s,e[0]),_(o,r),h&&h.m(o,null),_(t,n),p&&p.m(t,null),l=!0,c||(u=[F(s,"input",e[7]),F(s,"keyup",e[8])],c=!0)},p(e,[i]){1&i&&s.value!==e[0]&&z(s,e[0]),e[0].length>2?h?(h.p(e,i),1&i&&ce(h,1)):(h=ai(e),h.c(),ce(h,1),h.m(o,null)):h&&(ne(),ue(h,1,1,()=>{h=null}),le()),e[0].length>2?p?p.p(e,i):(p=li(e),p.c(),p.m(t,null)):p&&(p.d(1),p=null)},i(e){l||(ce(h),l=!0)},o(e){ue(h),l=!1},d(e){e&&v(t),h&&h.d(),p&&p.d(),c=!1,a(u)}}}function hi(e,t,i){const o=V("changePlace");let s="";var a=[];let r,n=[];const l=e=>{clearTimeout(r),r=setTimeout(()=>{i(0,s=e),c()},250)},c=async e=>{const t=await fetch("https://betaserver.icgc.cat/icgc_geocoder/?maxresultats=17&obtenirCoordGeografiques=si&tipus=Municipi&metode=localitzaToponim&ordre=alfabetic&trobaTots=no&nom="+s);i(1,a=await t.json()),a.forEach(e=>{e.nom,e.coordenadesLonLat})};function u(e){n=e.coordenadesLonLat,o({coords:n}),i(0,s=e.nom)}function h(){i(0,s="")}return[s,a,l,u,h,function(e){i(0,s=e.nom),addEventListener("keypress",(function(t){"Enter"===t.key&&u(e),"Escape"===t.key&&h()})),addEventListener("keydown",(function(e){"Escape"===e.key&&h()}))},void 0,function(){s=this.value,i(0,s)},({target:{value:e}})=>l(e)]}class pi extends ve{constructor(e){super(),be(this,e,hi,ui,n,{})}}function mi(e){let t;const i=e[7].default,o=l(i,e,e[8],null);return{c(){o&&o.c()},m(e,i){o&&o.m(e,i),t=!0},p(e,t){o&&o.p&&256&t&&u(o,i,e,e[8],t,null,null)},i(e){t||(ce(o,e),t=!0)},o(e){ue(o,e),t=!1},d(e){o&&o.d(e)}}}function di(e){let t,o,s;const a=[{use:[e[4],...e[0]]},{class:e[3]+" "+e[1]},Ye(e[5],["use","class","component","forwardEvents"])];var r=e[2];function n(e){let t={$$slots:{default:[mi]},$$scope:{ctx:e}};for(let e=0;e<a.length;e+=1)t=i(t,a[e]);return{props:t}}return r&&(t=new r(n(e))),{c(){t&&fe(t.$$.fragment),o=q()},m(e,i){t&&ye(t,e,i),b(e,o,i),s=!0},p(e,[i]){const s=59&i?me(a,[17&i&&{use:[e[4],...e[0]]},10&i&&{class:e[3]+" "+e[1]},32&i&&(l=Ye(e[5],["use","class","component","forwardEvents"]),"object"==typeof l&&null!==l?l:{})]):{};var l;if(256&i&&(s.$$scope={dirty:i,ctx:e}),r!==(r=e[2])){if(t){ne();const e=t;ue(e.$$.fragment,1,0,()=>{ge(e,1)}),le()}r?(t=new r(n(e)),fe(t.$$.fragment),ce(t.$$.fragment,1),ye(t,o.parentNode,o)):t=null}else r&&t.$set(s)},i(e){s||(t&&ce(t.$$.fragment,e),s=!0)},o(e){t&&ue(t.$$.fragment,e),s=!1},d(e){e&&v(o),t&&ge(t,e)}}}const fi={component:null,smuiClass:null,contexts:{}};function yi(e,t,o){let{$$slots:s={},$$scope:a}=t,{use:r=[]}=t,{class:n=""}=t,{component:l=fi.component}=t,{forwardEvents:c=[]}=t;const u=fi.class,p=fi.contexts,m=Je(R(),c);for(let e in p)p.hasOwnProperty(e)&&$(e,p[e]);return e.$$set=e=>{o(5,t=i(i({},t),h(e))),"use"in e&&o(0,r=e.use),"class"in e&&o(1,n=e.class),"component"in e&&o(2,l=e.component),"forwardEvents"in e&&o(6,c=e.forwardEvents),"$$scope"in e&&o(8,a=e.$$scope)},t=h(t),[r,n,l,u,m,t,c,s,a]}class gi extends ve{constructor(e){super(),be(this,e,yi,di,n,{use:0,class:1,component:2,forwardEvents:6})}}function _i(e){function t(...t){return Object.assign(fi,e),new gi(...t)}return t.prototype=gi,gi.$$render&&(t.$$render=(...t)=>Object.assign(fi,e)&&gi.$$render(...t)),gi.render&&(t.render=(...t)=>Object.assign(fi,e)&&gi.render(...t)),t}function bi(e){let t,o,s,n,c,h;const m=e[4].default,d=l(m,e,e[3],null);let f=[Ye(e[2],["use"])],y={};for(let e=0;e<f.length;e+=1)y=i(y,f[e]);return{c(){t=L("h2"),d&&d.c(),T(t,y)},m(i,a){b(i,t,a),d&&d.m(t,null),n=!0,c||(h=[p(o=et.call(null,t,e[0])),p(s=e[1].call(null,t))],c=!0)},p(e,[i]){d&&d.p&&8&i&&u(d,m,e,e[3],i,null,null),T(t,y=me(f,[4&i&&Ye(e[2],["use"])])),o&&r(o.update)&&1&i&&o.update.call(null,e[0])},i(e){n||(ce(d,e),n=!0)},o(e){ue(d,e),n=!1},d(e){e&&v(t),d&&d.d(e),c=!1,a(h)}}}function vi(e,t,o){let{$$slots:s={},$$scope:a}=t;const r=Je(R());let{use:n=[]}=t;return e.$$set=e=>{o(2,t=i(i({},t),h(e))),"use"in e&&o(0,n=e.use),"$$scope"in e&&o(3,a=e.$$scope)},t=h(t),[n,r,t,a,s]}class xi extends ve{constructor(e){super(),be(this,e,vi,bi,n,{use:0})}}var Li=_i({class:"mdc-dialog__title",component:xi,contexts:{}});function Ii(e){let t,o,s,n,c,h;const m=e[4].default,d=l(m,e,e[3],null);let f=[Ye(e[2],["use"])],y={};for(let e=0;e<f.length;e+=1)y=i(y,f[e]);return{c(){t=L("div"),d&&d.c(),T(t,y)},m(i,a){b(i,t,a),d&&d.m(t,null),n=!0,c||(h=[p(o=et.call(null,t,e[0])),p(s=e[1].call(null,t))],c=!0)},p(e,[i]){d&&d.p&&8&i&&u(d,m,e,e[3],i,null,null),T(t,y=me(f,[4&i&&Ye(e[2],["use"])])),o&&r(o.update)&&1&i&&o.update.call(null,e[0])},i(e){n||(ce(d,e),n=!0)},o(e){ue(d,e),n=!1},d(e){e&&v(t),d&&d.d(e),c=!1,a(h)}}}function wi(e,t,o){let{$$slots:s={},$$scope:a}=t;const r=Je(R());let{use:n=[]}=t;return e.$$set=e=>{o(2,t=i(i({},t),h(e))),"use"in e&&o(0,n=e.use),"$$scope"in e&&o(3,a=e.$$scope)},t=h(t),[n,r,t,a,s]}class qi extends ve{constructor(e){super(),be(this,e,wi,Ii,n,{use:0})}}var Fi=_i({class:"mdc-dialog__content",component:qi,contexts:{}});function Ei(e){let t,o,s,n,c,h;const m=e[4].default,d=l(m,e,e[3],null);let f=[Ye(e[2],["use"])],y={};for(let e=0;e<f.length;e+=1)y=i(y,f[e]);return{c(){t=L("footer"),d&&d.c(),T(t,y)},m(i,a){b(i,t,a),d&&d.m(t,null),n=!0,c||(h=[p(o=et.call(null,t,e[0])),p(s=e[1].call(null,t))],c=!0)},p(e,[i]){d&&d.p&&8&i&&u(d,m,e,e[3],i,null,null),T(t,y=me(f,[4&i&&Ye(e[2],["use"])])),o&&r(o.update)&&1&i&&o.update.call(null,e[0])},i(e){n||(ce(d,e),n=!0)},o(e){ue(d,e),n=!1},d(e){e&&v(t),d&&d.d(e),c=!1,a(h)}}}function Ti(e,t,o){let{$$slots:s={},$$scope:a}=t;const r=Je(R());let{use:n=[]}=t;return e.$$set=e=>{o(2,t=i(i({},t),h(e))),"use"in e&&o(0,n=e.use),"$$scope"in e&&o(3,a=e.$$scope)},t=h(t),[n,r,t,a,s]}function Ci(e,{delay:i=0,duration:o=400,easing:s=t}){const a=+getComputedStyle(e).opacity;return{delay:i,duration:o,easing:s,css:e=>"opacity: "+e*a}}function zi(e){let t,i,o,s,a,r,n,l,c,u,h,p,m,d;return s=new qt({props:{style:"    position: absolute;\n      right:-3px;\n      \n      z-index: 10;",$$slots:{default:[Pi]},$$scope:{ctx:e}}}),s.$on("click",e[2]),r=new Li({props:{id:"dialog-title",$$slots:{default:[Bi]},$$scope:{ctx:e}}}),l=new Dt({}),u=new Fi({props:{id:"dialog-content",class:"textModal",$$slots:{default:[Mi]},$$scope:{ctx:e}}}),{c(){t=L("div"),i=L("div"),o=L("div"),fe(s.$$.fragment),a=w(),fe(r.$$.fragment),n=w(),fe(l.$$.fragment),c=w(),fe(u.$$.fragment),E(o,"class","modal-container text svelte-qsw5ad"),E(i,"class","modal-overlay svelte-qsw5ad"),E(i,"data-close","")},m(h,f){b(h,t,f),_(t,i),_(i,o),ye(s,o,null),_(o,a),ye(r,o,null),_(o,n),ye(l,o,null),_(o,c),ye(u,o,null),p=!0,m||(d=F(i,"click",e[1]),m=!0)},p(e,t){const i={};8&t&&(i.$$scope={dirty:t,ctx:e}),s.$set(i);const o={};8&t&&(o.$$scope={dirty:t,ctx:e}),r.$set(o);const a={};8&t&&(a.$$scope={dirty:t,ctx:e}),u.$set(a)},i(e){p||(ce(s.$$.fragment,e),ce(r.$$.fragment,e),ce(l.$$.fragment,e),ce(u.$$.fragment,e),K(()=>{h||(h=pe(i,Ci,{duration:150},!0)),h.run(1)}),p=!0)},o(e){ue(s.$$.fragment,e),ue(r.$$.fragment,e),ue(l.$$.fragment,e),ue(u.$$.fragment,e),h||(h=pe(i,Ci,{duration:150},!1)),h.run(0),p=!1},d(e){e&&v(t),ge(s),ge(r),ge(l),ge(u),e&&h&&h.end(),m=!1,d()}}}function Ai(e){let t;return{c(){t=I("close")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function Pi(e){let t,i;return t=new Tt({props:{style:"              font-size: 22px;\n          color: black;\n          \n          border-radius: 17px;",class:" material-icons  ",$$slots:{default:[Ai]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},p(e,i){const o={};8&i&&(o.$$scope={dirty:i,ctx:e}),t.$set(o)},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}function Bi(e){let t;return{c(){t=L("h5"),t.innerHTML="<b>Capes d’informació del Mapa Geològic de Catalunya 1:25.000</b>",E(t,"class","svelte-qsw5ad")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function Mi(e){let t;return{c(){t=L("h6"),t.innerHTML='El visor <i>Capes d’informació del Mapa Geològic de Catalunya 1:25.000 (MGC25m) </i>permet consultar informació estructurada per \n          capes derivades dels fulls publicats de la sèrie Mapa Geològic de Catalunya 1:25.000 en el marc del Geotreball I (GT I) \n          i Geotreball II (GT II). <br/>\n          La present versió permet consultar de forma interactiva informació referent a 6 capes d’informació: Dipòsits quaternaris, \n          Basament prequaternari, Terrenys antropitzats, Mesures d’estructures, Talls geològics i Registre geològic \n          (Columnes estratigràfiques i Esquemes de relacions estratigràfiques). També permet descarregar alguns dels \n          continguts que es mostren i documentació complementària associada.<br/>\n          El visor està vinculat al sistema de capes d’informació geològica que l’ICGC està implementant i que està orientat \n          a emmagatzemar, actualitzar i difondre, a través de diferents canals, informació geològica del conjunt del territori. \n          La informació geològica que integra el visor és fonamentalment de caràcter qualitatiu. Es tracta d’una informació \n          descriptiva i indicativa, que no pot substituir interpretacions d’especialistes, recomanacions professionals i/o \n          investigacions i recerques específiques detallades. Les interpretacions que s’exposen es basen en el coneixement \n          dels autors dels fulls publicats del MGC25m i de l’equip de geòlegs de l’ICGC. Es preveu que el contingut d’aquestes \n          capes d’informació s’ampliï progressivament a mesura que es disposi de nova informació. Els continguts actuals són \n          susceptibles de canviar a conseqüència de l’existència noves dades i observacions, d’avenços en el coneixement, o \n          millores en els mètodes d’interpretació. <br/>\n          Es recomana que el present visor es referenciï com: <br/>\n          ICGC, 2021. Visor de Capes d’informació del Mapa Geològic de Catalunya 1:25.000. Versió 1 de 30/11/2021. \n            <a target="_blank" href="https://visors.icgc.cat/infogeo25">https://visors.icgc.cat/infogeo25/</a> (data de consulta).\n             <br/><br/>\n            Per més informació o comentaris sobre el visor adreceu-vos a  \n            <a href="mailto:info@icgc.cat">info@icgc.cat</a>',E(t,"class","svelte-qsw5ad")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function Di(e){let t,i,o=e[0]&&zi(e);return{c(){o&&o.c(),t=q()},m(e,s){o&&o.m(e,s),b(e,t,s),i=!0},p(e,[i]){e[0]?o?(o.p(e,i),1&i&&ce(o,1)):(o=zi(e),o.c(),ce(o,1),o.m(t.parentNode,t)):o&&(ne(),ue(o,1,1,()=>{o=null}),le())},i(e){i||(ce(o),i=!0)},o(e){ue(o),i=!1},d(e){o&&o.d(e),e&&v(t)}}}function Si(e,t,i){let{show:o=!1}=t;return e.$$set=e=>{"show"in e&&i(0,o=e.show)},[o,function(e){"close"in e.target.dataset&&i(0,o=!1)},function(){i(0,o=!1)}]}_i({class:"mdc-dialog__actions",component:class extends ve{constructor(e){super(),be(this,e,Ti,Ei,n,{use:0})}},contexts:{"SMUI:button:context":"dialog:action"}});class ki extends ve{constructor(e){super(),be(this,e,Si,Di,n,{show:0})}}function Ui(e){let t,i,o,s,a,r,n,l,c,u,h,p,m,d;return s=new qt({props:{style:"    position: absolute;\n      right:-3px;\n      \n      z-index: 10;",$$slots:{default:[Oi]},$$scope:{ctx:e}}}),s.$on("click",e[2]),r=new Li({props:{id:"dialog-title",$$slots:{default:[Ni]},$$scope:{ctx:e}}}),l=new Dt({}),u=new Fi({props:{id:"dialog-content",class:"textModal",$$slots:{default:[$i]},$$scope:{ctx:e}}}),{c(){t=L("div"),i=L("div"),o=L("div"),fe(s.$$.fragment),a=w(),fe(r.$$.fragment),n=w(),fe(l.$$.fragment),c=w(),fe(u.$$.fragment),E(o,"class","modal-container text svelte-nwfhme"),E(i,"class","modal-overlay svelte-nwfhme"),E(i,"data-close","")},m(h,f){b(h,t,f),_(t,i),_(i,o),ye(s,o,null),_(o,a),ye(r,o,null),_(o,n),ye(l,o,null),_(o,c),ye(u,o,null),p=!0,m||(d=F(i,"click",e[1]),m=!0)},p(e,t){const i={};8&t&&(i.$$scope={dirty:t,ctx:e}),s.$set(i);const o={};8&t&&(o.$$scope={dirty:t,ctx:e}),r.$set(o);const a={};8&t&&(a.$$scope={dirty:t,ctx:e}),u.$set(a)},i(e){p||(ce(s.$$.fragment,e),ce(r.$$.fragment,e),ce(l.$$.fragment,e),ce(u.$$.fragment,e),K(()=>{h||(h=pe(i,Ci,{duration:150},!0)),h.run(1)}),p=!0)},o(e){ue(s.$$.fragment,e),ue(r.$$.fragment,e),ue(l.$$.fragment,e),ue(u.$$.fragment,e),h||(h=pe(i,Ci,{duration:150},!1)),h.run(0),p=!1},d(e){e&&v(t),ge(s),ge(r),ge(l),ge(u),e&&h&&h.end(),m=!1,d()}}}function Ri(e){let t;return{c(){t=I("close")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function Oi(e){let t,i;return t=new Tt({props:{style:"              font-size: 22px;\n          color: black;\n          \n          border-radius: 17px;",class:" material-icons  ",$$slots:{default:[Ri]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},p(e,i){const o={};8&i&&(o.$$scope={dirty:i,ctx:e}),t.$set(o)},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}function Ni(e){let t;return{c(){t=L("h5"),t.innerHTML="<b>Funcionalitats</b>",E(t,"class","svelte-nwfhme")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function $i(e){let t;return{c(){t=L("h6"),t.innerHTML='<p><b>Visualització de les capes:</b></p> \n          <p>Les capes activades en iniciar el visor són, per defecte, Basament\n            prequaternari i Dipòsits quaternaris. Inicialment, la resta de capes estan\n            desactivades. Per visualitzar o amagar una capa cal clicar el botó\n            check situat a l’esquerra d’aquesta.</p> \n          <p>Es pot ajustar, amb una barra lliscant, la transparència de les unitats geològiques en les capes Basament\n            prequaternari i Dipòsits quaternaris, respectivament.</p> \n          <p>Recomanacions de visualitzacions de les capes:</p> \n          <p class="indent svelte-nwfhme">· Es recomana visualitzar les capes Mesures d’estructures, Talls geològics\n            i Esquemes de relacions estratigràfiques (Registre Geològic) juntament amb\n            la capa Basament prequaternari.</p> \n          <p class="indent svelte-nwfhme">· Es recomana visualitzar la capa Columnes estratigràfiques (Registre geològic) desactivant la resta de\n            capes.</p> \n          <p>En clicar el botó 3D es pot veure en continu la cartografia en relleu. Amb aquest mode activat, \n            es controla la navegació 3D amb el botó dret del ratolí.</p> \n          <p><b>Informació de les capes:</b> \n            <b></b></p> \n          <p>En clicar sobre qualsevol punt del mapa, el visor retornarà informació de\n            les capes visibles segons aquest ordre de prioritat:</p> \n          <p class="indent svelte-nwfhme">1. Mesures d’estructures</p> \n          <p class="indent svelte-nwfhme">2. Talls geològics</p> \n          <p class="indent svelte-nwfhme">3. Terrenys antropitzats</p> \n          <p class="indent svelte-nwfhme">4. Registre geològic</p> \n          <p class="indent svelte-nwfhme">5. Dipòsits quaternaris</p> \n          <p class="indent svelte-nwfhme">6. Basament prequaternari</p> \n          <p><b>Informació Mesures d’estructures:</b>\n            tipus de mesura, orientació i, si s’escau, inclinació.</p> \n          <p><b>Informació Talls geològics:</b>\n            identificador/s del full 1:25.000 i el número de tall geològic del mapa\n            publicat GTI. Clicant sobre una traça de tall s’il·lumina la traça\n            corresponent i es pot visualitzar i descarregar el tall geològic. La\n            descàrrega inclou el tall en format jpg i una taula en format xlsx,\n            amb informació litostratigràfica de les unitats que el composen.</p> \n          <p><b>Informació Terrenys antropitzats:</b>\n            epígraf, descripció, tipus de terreny i edat. Clicant sobre un terreny\n            antropitzat s’il·luminen tots els del mateix epígraf distribuïts en el\n            conjunt del territori cartografiat.</p> \n          <p><b>Informació Registre geològic:</b></p> \n          <p class="indent svelte-nwfhme"><b>Informació Columnes estratigràfiques:</b>\n            identificador/s del full 1:25.000 del mapa publicat GTI i la seva\n            descripció. Clicant en un grup cronoestratigràfic, s’il·lumina aquest grup\n            en tot territori cartografiat, ressaltant el del mapa corresponent. Es pot\n            visualitzar i descarregar les columnes estratigràfiques. La descàrrega\n            inclou la columna<b></b>en format jpg i una taula en format xlsx, amb\n            informació litostratigràfica de les unitats que la composen.</p> \n          <p class="indent svelte-nwfhme"><b>Informació Esquemes de relacions estratigràfiques:</b>\n            identificador/s del full 1:25.000 del mapa publicat GTI i la seva\n            descripció. Clicant en un mapa, aquest s’il•lumina i es pot visualitzar i\n            descarregar l’esquema de relacions estratigràfiques. La descàrrega inclou\n            l’esquema en format jpg i una taula en format xlsx, amb informació\n            litostratigràfica de les unitats que el composen.</p> \n          <p><i></i></p> \n          <p><b>Informació Dipòsits quaternaris i Basament prequaternari:</b></p> \n          \n          <p class="indent svelte-nwfhme"><b>Informació Unitats geològiques:</b>\n            unitat, descripció, edats geològiques, l’identificador del full 1:25.000 i,\n            si s’escau, el tipus de metamorfisme i la seva edat. Clicant una unitat\n            geològica, s’il•luminen totes les del mateix epígraf distribuïdes en el\n            conjunt del territori cartografiat, ressaltant en un altre color les del\n            full corresponent.</p> \n          <p class="indent svelte-nwfhme"><b>Informació Contactes, Falles i plecs i Elements geomorfològics:</b>\n            descripció de l&#39;element. Clicant sobre un element s’il·luminen tots els del mateix tipus\n            distribuïts en el conjunt del territori cartografiat.</p>',E(t,"class","svelte-nwfhme")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function Vi(e){let t,i,o=e[0]&&Ui(e);return{c(){o&&o.c(),t=q()},m(e,s){o&&o.m(e,s),b(e,t,s),i=!0},p(e,[i]){e[0]?o?(o.p(e,i),1&i&&ce(o,1)):(o=Ui(e),o.c(),ce(o,1),o.m(t.parentNode,t)):o&&(ne(),ue(o,1,1,()=>{o=null}),le())},i(e){i||(ce(o),i=!0)},o(e){ue(o),i=!1},d(e){o&&o.d(e),e&&v(t)}}}function Gi(e,t,i){let{show:o=!1}=t;return e.$$set=e=>{"show"in e&&i(0,o=e.show)},[o,function(e){"close"in e.target.dataset&&i(0,o=!1)},function(){i(0,o=!1)}]}class ji extends ve{constructor(e){super(),be(this,e,Gi,Vi,n,{show:0})}}function Zi(t){let i,o;return{c(){i=L("div"),o=L("h1"),o.textContent=""+Hi,E(o,"id","titulo"),E(o,"tabindex","0"),E(o,"class","svelte-u2clox"),E(i,"class","headerLogo"),A(i,"width","-webkit-fill-available")},m(e,t){b(e,i,t),_(i,o)},p:e,i:e,o:e,d(e){e&&v(i)}}}let Hi="Capes d’informació del Mapa Geològic de Catalunya 1:25.000";class Xi extends ve{constructor(e){super(),be(this,e,null,Zi,n,{})}}
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
/**
   * @license
   * Copyright 2018 Google Inc.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
<<<<<<< HEAD
   */var ua={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},ca={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},ga={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"},fa=function(e){function t(i){return e.call(this,Je({},t.defaultAdapter,i))||this}return Ke(t,e),Object.defineProperty(t,"strings",{get:function(){return ga},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return ua},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return ca},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!0,configurable:!0}),t.prototype.handleTargetScroll=function(){},t.prototype.handleWindowResize=function(){},t.prototype.handleNavigationClick=function(){this.adapter_.notifyNavigationIconClicked()},t}(it),da=function(e){function t(t){var i=e.call(this,t)||this;return i.wasDocked_=!0,i.isDockedShowing_=!0,i.currentAppBarOffsetTop_=0,i.isCurrentlyBeingResized_=!1,i.resizeThrottleId_=0,i.resizeDebounceId_=0,i.lastScrollPosition_=i.adapter_.getViewportScrollY(),i.topAppBarHeight_=i.adapter_.getTopAppBarHeight(),i}return Ke(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.adapter_.setStyle("top","")},t.prototype.handleTargetScroll=function(){var e=Math.max(this.adapter_.getViewportScrollY(),0),t=e-this.lastScrollPosition_;this.lastScrollPosition_=e,this.isCurrentlyBeingResized_||(this.currentAppBarOffsetTop_-=t,this.currentAppBarOffsetTop_>0?this.currentAppBarOffsetTop_=0:Math.abs(this.currentAppBarOffsetTop_)>this.topAppBarHeight_&&(this.currentAppBarOffsetTop_=-this.topAppBarHeight_),this.moveTopAppBar_())},t.prototype.handleWindowResize=function(){var e=this;this.resizeThrottleId_||(this.resizeThrottleId_=setTimeout((function(){e.resizeThrottleId_=0,e.throttledResizeHandler_()}),ca.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized_=!0,this.resizeDebounceId_&&clearTimeout(this.resizeDebounceId_),this.resizeDebounceId_=setTimeout((function(){e.handleTargetScroll(),e.isCurrentlyBeingResized_=!1,e.resizeDebounceId_=0}),ca.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},t.prototype.checkForUpdate_=function(){var e=-this.topAppBarHeight_,t=this.currentAppBarOffsetTop_<0,i=this.currentAppBarOffsetTop_>e,a=t&&i;if(a)this.wasDocked_=!1;else{if(!this.wasDocked_)return this.wasDocked_=!0,!0;if(this.isDockedShowing_!==i)return this.isDockedShowing_=i,!0}return a},t.prototype.moveTopAppBar_=function(){if(this.checkForUpdate_()){var e=this.currentAppBarOffsetTop_;Math.abs(e)>=this.topAppBarHeight_&&(e=-ca.MAX_TOP_APP_BAR_HEIGHT),this.adapter_.setStyle("top",e+"px")}},t.prototype.throttledResizeHandler_=function(){var e=this.adapter_.getTopAppBarHeight();this.topAppBarHeight_!==e&&(this.wasDocked_=!1,this.currentAppBarOffsetTop_-=this.topAppBarHeight_-e,this.topAppBarHeight_=e),this.handleTargetScroll()},t}(fa),ha=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wasScrolled_=!1,t}return Ke(t,e),t.prototype.handleTargetScroll=function(){this.adapter_.getViewportScrollY()<=0?this.wasScrolled_&&(this.adapter_.removeClass(ua.FIXED_SCROLLED_CLASS),this.wasScrolled_=!1):this.wasScrolled_||(this.adapter_.addClass(ua.FIXED_SCROLLED_CLASS),this.wasScrolled_=!0)},t}(da),pa=function(e){function t(t){var i=e.call(this,t)||this;return i.isCollapsed_=!1,i.isAlwaysCollapsed_=!1,i}return Ke(t,e),Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return this.isCollapsed_},enumerable:!0,configurable:!0}),t.prototype.init=function(){e.prototype.init.call(this),this.adapter_.getTotalActionItems()>0&&this.adapter_.addClass(ua.SHORT_HAS_ACTION_ITEM_CLASS),this.setAlwaysCollapsed(this.adapter_.hasClass(ua.SHORT_COLLAPSED_CLASS))},t.prototype.setAlwaysCollapsed=function(e){this.isAlwaysCollapsed_=!!e,this.isAlwaysCollapsed_?this.collapse_():this.maybeCollapseBar_()},t.prototype.getAlwaysCollapsed=function(){return this.isAlwaysCollapsed_},t.prototype.handleTargetScroll=function(){this.maybeCollapseBar_()},t.prototype.maybeCollapseBar_=function(){this.isAlwaysCollapsed_||(this.adapter_.getViewportScrollY()<=0?this.isCollapsed_&&this.uncollapse_():this.isCollapsed_||this.collapse_())},t.prototype.uncollapse_=function(){this.adapter_.removeClass(ua.SHORT_COLLAPSED_CLASS),this.isCollapsed_=!1},t.prototype.collapse_=function(){this.adapter_.addClass(ua.SHORT_COLLAPSED_CLASS),this.isCollapsed_=!0},t}(fa),ma=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ke(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e){void 0===e&&(e=function(e){return wt.attachTo(e)}),this.navIcon_=this.root_.querySelector(ga.NAVIGATION_ICON_SELECTOR);var t=[].slice.call(this.root_.querySelectorAll(ga.ACTION_ITEM_SELECTOR));this.navIcon_&&t.push(this.navIcon_),this.iconRipples_=t.map((function(t){var i=e(t);return i.unbounded=!0,i})),this.scrollTarget_=window},t.prototype.initialSyncWithDOM=function(){this.handleNavigationClick_=this.foundation_.handleNavigationClick.bind(this.foundation_),this.handleWindowResize_=this.foundation_.handleWindowResize.bind(this.foundation_),this.handleTargetScroll_=this.foundation_.handleTargetScroll.bind(this.foundation_),this.scrollTarget_.addEventListener("scroll",this.handleTargetScroll_),this.navIcon_&&this.navIcon_.addEventListener("click",this.handleNavigationClick_);var e=this.root_.classList.contains(ua.FIXED_CLASS);this.root_.classList.contains(ua.SHORT_CLASS)||e||window.addEventListener("resize",this.handleWindowResize_)},t.prototype.destroy=function(){this.iconRipples_.forEach((function(e){return e.destroy()})),this.scrollTarget_.removeEventListener("scroll",this.handleTargetScroll_),this.navIcon_&&this.navIcon_.removeEventListener("click",this.handleNavigationClick_);var t=this.root_.classList.contains(ua.FIXED_CLASS);this.root_.classList.contains(ua.SHORT_CLASS)||t||window.removeEventListener("resize",this.handleWindowResize_),e.prototype.destroy.call(this)},t.prototype.setScrollTarget=function(e){this.scrollTarget_.removeEventListener("scroll",this.handleTargetScroll_),this.scrollTarget_=e,this.handleTargetScroll_=this.foundation_.handleTargetScroll.bind(this.foundation_),this.scrollTarget_.addEventListener("scroll",this.handleTargetScroll_)},t.prototype.getDefaultFoundation=function(){var e=this,t={hasClass:function(t){return e.root_.classList.contains(t)},addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},setStyle:function(t,i){return e.root_.style.setProperty(t,i)},getTopAppBarHeight:function(){return e.root_.clientHeight},notifyNavigationIconClicked:function(){return e.emit(ga.NAVIGATION_EVENT,{})},getViewportScrollY:function(){var t=e.scrollTarget_,i=e.scrollTarget_;return void 0!==t.pageYOffset?t.pageYOffset:i.scrollTop},getTotalActionItems:function(){return e.root_.querySelectorAll(ga.ACTION_ITEM_SELECTOR).length}};return this.root_.classList.contains(ua.SHORT_CLASS)?new pa(t):this.root_.classList.contains(ua.FIXED_CLASS)?new ha(t):new da(t)},t}(at);function ya(e){let t,a,s,n,u,g,f;const h=e[11].default,p=l(h,e,e[10],null);let m=[{class:a="\n    mdc-top-app-bar\n    "+e[1]+"\n    "+("short"===e[2]?"mdc-top-app-bar--short":"")+"\n    "+(e[4]?"mdc-top-app-bar--short-collapsed":"")+"\n    "+("fixed"===e[2]?"mdc-top-app-bar--fixed":"")+"\n    "+("static"===e[2]?"smui-top-app-bar--static":"")+"\n    "+("secondary"===e[3]?"smui-top-app-bar--color-secondary":"")+"\n    "+(e[5]?"mdc-top-app-bar--prominent":"")+"\n    "+(e[6]?"mdc-top-app-bar--dense":"")+"\n  "},ct(e[9],["use","class","variant","color","collapsed","prominent","dense"])],y={};for(let e=0;e<m.length;e+=1)y=i(y,m[e]);return{c(){t=q("header"),p&&p.c(),T(t,y)},m(i,a){v(i,t,a),p&&p.m(t,null),e[12](t),u=!0,g||(f=[d(s=gt.call(null,t,e[0])),d(n=e[8].call(null,t))],g=!0)},p(e,[i]){p&&p.p&&1024&i&&c(p,h,e,e[10],i,null,null),T(t,y=pe(m,[(!u||126&i&&a!==(a="\n    mdc-top-app-bar\n    "+e[1]+"\n    "+("short"===e[2]?"mdc-top-app-bar--short":"")+"\n    "+(e[4]?"mdc-top-app-bar--short-collapsed":"")+"\n    "+("fixed"===e[2]?"mdc-top-app-bar--fixed":"")+"\n    "+("static"===e[2]?"smui-top-app-bar--static":"")+"\n    "+("secondary"===e[3]?"smui-top-app-bar--color-secondary":"")+"\n    "+(e[5]?"mdc-top-app-bar--prominent":"")+"\n    "+(e[6]?"mdc-top-app-bar--dense":"")+"\n  "))&&{class:a},512&i&&ct(e[9],["use","class","variant","color","collapsed","prominent","dense"])])),s&&r(s.update)&&1&i&&s.update.call(null,e[0])},i(e){u||(ge(p,e),u=!0)},o(e){fe(p,e),u=!1},d(i){i&&x(t),p&&p.d(i),e[12](null),g=!1,o(f)}}}function _a(e,t,a){let{$$slots:s={},$$scope:o}=t;const r=ut(N(),["MDCList:action"]);let n,l,{use:u=[]}=t,{class:c=""}=t,{variant:f="standard"}=t,{color:d="primary"}=t,{collapsed:h=!1}=t,{prominent:p=!1}=t,{dense:m=!1}=t;return $(()=>{l=new ma(n)}),G(()=>{l&&l.destroy()}),e.$$set=e=>{a(9,t=i(i({},t),g(e))),"use"in e&&a(0,u=e.use),"class"in e&&a(1,c=e.class),"variant"in e&&a(2,f=e.variant),"color"in e&&a(3,d=e.color),"collapsed"in e&&a(4,h=e.collapsed),"prominent"in e&&a(5,p=e.prominent),"dense"in e&&a(6,m=e.dense),"$$scope"in e&&a(10,o=e.$$scope)},t=g(t),[u,c,f,d,h,p,m,n,r,t,o,s,function(e){H[e?"unshift":"push"](()=>{n=e,a(7,n)})}]}class ba extends Ce{constructor(e){super(),xe(this,e,_a,ya,n,{use:0,class:1,variant:2,color:3,collapsed:4,prominent:5,dense:6})}}var va=Ri({class:"mdc-top-app-bar__row",component:ji,contexts:{}});function xa(e){let t,a,s,n,u,g,f;const h=e[7].default,p=l(h,e,e[6],null);let m=[{class:a="\n    mdc-top-app-bar__section\n    "+e[1]+"\n    "+("start"===e[2]?"mdc-top-app-bar__section--align-start":"")+"\n    "+("end"===e[2]?"mdc-top-app-bar__section--align-end":"")+"\n  "},e[3]?{role:"toolbar"}:{},ct(e[5],["use","class","align","toolbar"])],y={};for(let e=0;e<m.length;e+=1)y=i(y,m[e]);return{c(){t=q("section"),p&&p.c(),T(t,y)},m(i,a){v(i,t,a),p&&p.m(t,null),u=!0,g||(f=[d(s=gt.call(null,t,e[0])),d(n=e[4].call(null,t))],g=!0)},p(e,[i]){p&&p.p&&64&i&&c(p,h,e,e[6],i,null,null),T(t,y=pe(m,[(!u||6&i&&a!==(a="\n    mdc-top-app-bar__section\n    "+e[1]+"\n    "+("start"===e[2]?"mdc-top-app-bar__section--align-start":"")+"\n    "+("end"===e[2]?"mdc-top-app-bar__section--align-end":"")+"\n  "))&&{class:a},8&i&&(e[3]?{role:"toolbar"}:{}),32&i&&ct(e[5],["use","class","align","toolbar"])])),s&&r(s.update)&&1&i&&s.update.call(null,e[0])},i(e){u||(ge(p,e),u=!0)},o(e){fe(p,e),u=!1},d(e){e&&x(t),p&&p.d(e),g=!1,o(f)}}}function Ca(e,t,a){let{$$slots:s={},$$scope:o}=t;const r=ut(N(),["MDCList:action"]);let{use:n=[]}=t,{class:l=""}=t,{align:u="start"}=t,{toolbar:c=!1}=t;return V("SMUI:icon-button:context",c?"top-app-bar:action":"top-app-bar:navigation"),V("SMUI:button:context",c?"top-app-bar:action":"top-app-bar:navigation"),e.$$set=e=>{a(5,t=i(i({},t),g(e))),"use"in e&&a(0,n=e.use),"class"in e&&a(1,l=e.class),"align"in e&&a(2,u=e.align),"toolbar"in e&&a(3,c=e.toolbar),"$$scope"in e&&a(6,o=e.$$scope)},t=g(t),[n,l,u,c,r,t,o,s]}class qa extends Ce{constructor(e){super(),xe(this,e,Ca,xa,n,{use:0,class:1,align:2,toolbar:3})}}function Ua(e){let t,a,s,n,u,g;const f=e[4].default,h=l(f,e,e[3],null);let p=[ct(e[2],["use"])],m={};for(let e=0;e<p.length;e+=1)m=i(m,p[e]);return{c(){t=q("span"),h&&h.c(),T(t,m)},m(i,o){v(i,t,o),h&&h.m(t,null),n=!0,u||(g=[d(a=gt.call(null,t,e[0])),d(s=e[1].call(null,t))],u=!0)},p(e,[i]){h&&h.p&&8&i&&c(h,f,e,e[3],i,null,null),T(t,m=pe(p,[4&i&&ct(e[2],["use"])])),a&&r(a.update)&&1&i&&a.update.call(null,e[0])},i(e){n||(ge(h,e),n=!0)},o(e){fe(h,e),n=!1},d(e){e&&x(t),h&&h.d(e),u=!1,o(g)}}}function wa(e,t,a){let{$$slots:s={},$$scope:o}=t;const r=ut(N());let{use:n=[]}=t;return e.$$set=e=>{a(2,t=i(i({},t),g(e))),"use"in e&&a(0,n=e.use),"$$scope"in e&&a(3,o=e.$$scope)},t=g(t),[n,r,t,o,s]}class Ea extends Ce{constructor(e){super(),xe(this,e,wa,Ua,n,{use:0})}}function Ba(e){return e.classList.add("mdc-top-app-bar--short-fixed-adjust"),{destroy(){e.classList.remove("mdc-top-app-bar--short-fixed-adjust")}}}function Pa(e){let t;return{c(){t=w("info")},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function Ma(e){let t,i,a,s;return t=new la({}),a=new kt({props:{id:"topbarInfo",style:"color:black",class:"btinfo material-icons","aria-label":"Informació",$$slots:{default:[Pa]},$$scope:{ctx:e}}}),a.$on("click",e[5]),{c(){ye(t.$$.fragment),i=E(),ye(a.$$.fragment)},m(e,o){_e(t,e,o),v(e,i,o),_e(a,e,o),s=!0},p(e,t){const i={};256&t&&(i.$$scope={dirty:t,ctx:e}),a.$set(i)},i(e){s||(ge(t.$$.fragment,e),ge(a.$$.fragment,e),s=!0)},o(e){fe(t.$$.fragment,e),fe(a.$$.fragment,e),s=!1},d(e){be(t,e),e&&x(i),be(a,e)}}}function Ta(e){let t,i;return t=new qa({props:{id:"titulo",style:"padding-left: 55px;",$$slots:{default:[Ma]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,i){const a={};261&i&&(a.$$scope={dirty:i,ctx:e}),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function Aa(e){let t,i;return t=new va({props:{$$slots:{default:[Ta]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,i){const a={};261&i&&(a.$$scope={dirty:i,ctx:e}),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function Sa(e){let t,i,a,s,o,r,n,l,u,c,g,f;function h(t){e[4].call(null,t)}let p={};function m(t){e[6].call(null,t)}void 0!==e[2]&&(p.show=e[2]),t=new oa({props:p}),H.push(()=>me(t,"show",h));let y={class:"topAppBar",variant:"short",dense:Ia,prominent:Da,$$slots:{default:[Aa]},$$scope:{ctx:e}};return void 0!==e[1]&&(y.collapsed=e[1]),o=new ba({props:y}),H.push(()=>me(o,"collapsed",m)),{c(){ye(t.$$.fragment),a=E(),s=q("div"),ye(o.$$.fragment),n=E(),l=q("div"),M(s,"class","top-app-bar-container flexor")},m(i,r){_e(t,i,r),v(i,a,r),v(i,s,r),_e(o,s,null),b(s,n),b(s,l),c=!0,g||(f=d(u=e[3].call(null,l)),g=!0)},p(e,[a]){const s={};!i&&4&a&&(i=!0,s.show=e[2],ee(()=>i=!1)),t.$set(s);const n={};261&a&&(n.$$scope={dirty:a,ctx:e}),!r&&2&a&&(r=!0,n.collapsed=e[1],ee(()=>r=!1)),o.$set(n)},i(e){c||(ge(t.$$.fragment,e),ge(o.$$.fragment,e),c=!0)},o(e){fe(t.$$.fragment,e),fe(o.$$.fragment,e),c=!1},d(e){be(t,e),e&&x(a),e&&x(s),be(o),g=!1,f()}}}Ri({class:"mdc-top-app-bar__title",component:Ea,contexts:{}});let Ia=!1,Da=!1;function za(e,t,i){let a=!1,s=Ba,{show:o=!1}=t,r=!1;return e.$$set=e=>{"show"in e&&i(0,o=e.show)},[o,a,r,s,function(e){r=e,i(2,r)},()=>{i(2,r=!0),i(0,o=!1)},function(e){a=e,i(1,a)}]}class ka extends Ce{constructor(e){super(),xe(this,e,za,Sa,n,{show:0})}}function Fa(t){let i,a,s,o,r;return{c(){i=q("div"),a=q("div"),s=q("input"),M(s,"type","range"),M(s,"min","0"),M(s,"max","100"),M(s,"step","0"),s.value="50",M(s,"class","svelte-1oyglgn"),M(a,"class","map-overlay-inner svelte-1oyglgn"),M(i,"class","map-overlay top svelte-1oyglgn")},m(e,n){v(e,i,n),b(i,a),b(a,s),o||(r=P(s,"change",t[0]),o=!0)},p:e,i:e,o:e,d(e){e&&x(i),o=!1,r()}}}function La(e,t,i){let{item:a}=t;Z("overLayers");const s=Z("changePaintProperty");return e.$$set=e=>{"item"in e&&i(1,a=e.item)},[function(e){s(a,event.target.value)},a]}class Oa extends Ce{constructor(e){super(),xe(this,e,La,Fa,n,{item:1})}}var Ra={version:8,center:[1.537786,41.837539],zoom:12,bearing:0,pitch:0,sources:{infogeo:{type:"vector",tiles:["https://tilemaps.icgc.cat/tileserver/tileserver.php/infogeo_v7/{z}/{x}/{y}.pbf"]}},sprite:"https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/style/sprites/sprite",glyphs:"https://tilemaps.icgc.cat/tileserver/glyphs/{fontstack}/{range}.pbf",layers:[{id:"Cartografia del Basament/Unitats geològiques:2/CACe",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",0],layout:{visibility:"visible"},paint:{"fill-color":"#00855B"}},{id:"Cartografia del Basament/Unitats geològiques:2/CACe1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",1],layout:{visibility:"visible"},paint:{"fill-color":"#009D5B"}},{id:"Cartografia del Basament/Unitats geològiques:2/CACe2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",2],layout:{visibility:"visible"},paint:{"fill-color":"#64BC4A"}},{id:"Cartografia del Basament/Unitats geològiques:2/CACeca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",3],layout:{visibility:"visible"},paint:{"fill-color":"#AACDA9"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIA",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",4],layout:{visibility:"visible"},paint:{"fill-color":"#35B45A"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAbca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",5],layout:{visibility:"visible"},paint:{"fill-color":"#D0D08C"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAbca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",5],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CIAbca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",6],layout:{visibility:"visible"},paint:{"fill-color":"#7CC372"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAcm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",7],layout:{visibility:"visible"},paint:{"fill-color":"#99D4C0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAcmc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",8],layout:{visibility:"visible"},paint:{"fill-color":"#22B78E"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAcml/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",9],layout:{visibility:"visible"},paint:{"fill-color":"#E2E324"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAcml/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",9],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CIAcml/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAcmr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",10],layout:{visibility:"visible"},paint:{"fill-color":"#7BBC89"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",11],layout:{visibility:"visible"},paint:{"fill-color":"#A0AB9B"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",12],layout:{visibility:"visible"},paint:{"fill-color":"#C2A494"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAlg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",13],layout:{visibility:"visible"},paint:{"fill-color":"#E9E084"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAmcb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",14],layout:{visibility:"visible"},paint:{"fill-color":"#D4E05E"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAmcl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",15],layout:{visibility:"visible"},paint:{"fill-color":"#E8EDAE"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAmfl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",16],layout:{visibility:"visible"},paint:{"fill-color":"#B0DEDB"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAmg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",17],layout:{visibility:"visible"},paint:{"fill-color":"#B7C29A"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAml",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",18],layout:{visibility:"visible"},paint:{"fill-color":"#C6DD81"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",19],layout:{visibility:"visible"},paint:{"fill-color":"#2E9441"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAp1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",20],layout:{visibility:"visible"},paint:{"fill-color":"#34A448"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIAp2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",21],layout:{visibility:"visible"},paint:{"fill-color":"#80A635"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIApAbx",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",22],layout:{visibility:"visible"},paint:{"fill-color":"#A65074"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIApAm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",23],layout:{visibility:"visible"},paint:{"fill-color":"#C7DC6C"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIApc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",24],layout:{visibility:"visible"},paint:{"fill-color":"#76A639"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIApcab",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",25],layout:{visibility:"visible"},paint:{"fill-color":"#B8D098"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIApcam",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",26],layout:{visibility:"visible"},paint:{"fill-color":"#94B79B"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIApcamc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",27],layout:{visibility:"visible"},paint:{"fill-color":"#94B693"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIApcm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",28],layout:{visibility:"visible"},paint:{"fill-color":"#4CA84C"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIApm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",29],layout:{visibility:"visible"},paint:{"fill-color":"#E2E324"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIApmc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",30],layout:{visibility:"visible"},paint:{"fill-color":"#8BB94C"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIBca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",31],layout:{visibility:"visible"},paint:{"fill-color":"#A8B045"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIBcab",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",32],layout:{visibility:"visible"},paint:{"fill-color":"#4EA14B"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIBeB",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",33],layout:{visibility:"visible"},paint:{"fill-color":"#009C6B"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIBeVcl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",34],layout:{visibility:"visible"},paint:{"fill-color":"#5FBC6B"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIBeb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",35],layout:{visibility:"visible"},paint:{}},{id:"Cartografia del Basament/Unitats geològiques:2/CIBeb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",35],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CIBeb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIHB",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",36],layout:{visibility:"visible"},paint:{"fill-color":"#00844D"}},{id:"Cartografia del Basament/Unitats geològiques:2/CIVHca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",37],layout:{visibility:"visible"},paint:{"fill-color":"#A6CE3D"}},{id:"Cartografia del Basament/Unitats geològiques:2/CId",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",38],layout:{visibility:"visible"},paint:{"fill-color":"#3A9F4D"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCM",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",39],layout:{visibility:"visible"},paint:{"fill-color":"#B2DDC9"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCM_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",40],layout:{visibility:"visible"},paint:{"fill-color":"#B2DDC9"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCM_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",40],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSCM_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCM_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",41],layout:{visibility:"visible"},paint:{"fill-color":"#B2DDC9"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCM_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",41],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSCM_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCMcb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",42],layout:{visibility:"visible"},paint:{"fill-color":"#9CD2AE"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCMcm1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",43],layout:{visibility:"visible"},paint:{"fill-color":"#82BCB7"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCMgc1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",44],layout:{visibility:"visible"},paint:{"fill-color":"#8EC6B2"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCMms",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",45],layout:{visibility:"visible"},paint:{"fill-color":"#AFDFE4"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCcb1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",46],layout:{visibility:"visible"},paint:{"fill-color":"#8FCEA5"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCcb2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",47],layout:{visibility:"visible"},paint:{"fill-color":"#A7D7B7"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCe",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",48],layout:{visibility:"visible"},paint:{"fill-color":"#9CCC68"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCeTcf",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",49],layout:{visibility:"visible"},paint:{"fill-color":"#56BE95"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCeca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",50],layout:{visibility:"visible"},paint:{"fill-color":"#89B986"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCecad",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",51],layout:{visibility:"visible"},paint:{"fill-color":"#8AC768"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCecm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",52],layout:{visibility:"visible"},paint:{"fill-color":"#C8DB54"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCem",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",53],layout:{visibility:"visible"},paint:{"fill-color":"#C3C59A"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",54],layout:{visibility:"visible"},paint:{"fill-color":"#CAE7DC"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCmc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",55],layout:{visibility:"visible"},paint:{"fill-color":"#0CADA1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCms",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",56],layout:{visibility:"visible"},paint:{"fill-color":"#75CEE1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCoS1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",57],layout:{visibility:"visible"},paint:{"fill-color":"#00AD8F"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCoS2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",58],layout:{visibility:"visible"},paint:{"fill-color":"#71C6A8"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCoS3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",59],layout:{visibility:"visible"},paint:{"fill-color":"#66C29B"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCoScc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",60],layout:{visibility:"visible"},paint:{"fill-color":"#75C6A5"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCoScm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",61],layout:{visibility:"visible"},paint:{"fill-color":"#75C6A5"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCoScm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",61],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSCoScm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCoSm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",62],layout:{visibility:"visible"},paint:{"fill-color":"#8CCFB7"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCoSm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",62],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSCoSm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCoSm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",62],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSCoSm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCom",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",63],layout:{visibility:"visible"},paint:{"fill-color":"#66C29B"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSComc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",64],layout:{visibility:"visible"},paint:{"fill-color":"#E6EFCB"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",65],layout:{visibility:"visible"},paint:{"fill-color":"#63BCBA"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop10",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",66],layout:{visibility:"visible"},paint:{"fill-color":"#CDD3B8"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop11",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",67],layout:{visibility:"visible"},paint:{"fill-color":"#9BCABB"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",68],layout:{visibility:"visible"},paint:{"fill-color":"#00ADB5"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",69],layout:{visibility:"visible"},paint:{"fill-color":"#55C6D8"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop3_m/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",70],layout:{visibility:"visible"},paint:{"fill-color":"#55C6D8"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop3_m/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",70],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSCop3_m/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop3_m/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",70],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSCop3_m/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",71],layout:{visibility:"visible"},paint:{"fill-color":"#14B276"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop5/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",72],layout:{visibility:"visible"},paint:{"fill-color":"#DEE688"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop5/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",72],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSCop5/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop5/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",72],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSCop5/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop6",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",73],layout:{visibility:"visible"},paint:{"fill-color":"#7FC25F"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop7",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",74],layout:{visibility:"visible"},paint:{"fill-color":"#C4DE92"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop8",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",75],layout:{visibility:"visible"},paint:{"fill-color":"#96CB71"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSCop9",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",76],layout:{visibility:"visible"},paint:{"fill-color":"#C0E1C0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMag",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",77],layout:{visibility:"visible"},paint:{"fill-color":"#E09BA2"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMag_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",78],layout:{visibility:"visible"},paint:{"fill-color":"#E09BA2"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMag_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",78],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMag_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMag_g/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",79],layout:{visibility:"visible"},paint:{"fill-color":"#E09BA2"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMag_g/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",79],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMag_g/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",80],layout:{visibility:"visible"},paint:{"fill-color":"#64C2A5"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMc3/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",81],layout:{visibility:"visible"},paint:{"fill-color":"#97D4C9"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMc3/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",81],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMc3/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMcg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",82],layout:{visibility:"visible"},paint:{"fill-color":"#B0C6D2"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMcm2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",83],layout:{visibility:"visible"},paint:{"fill-color":"#BFE2CA"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMcm3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",84],layout:{visibility:"visible"},paint:{"fill-color":"#86D1D9"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMcp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",85],layout:{visibility:"visible"},paint:{"fill-color":"#A6D8C0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMg4/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",86],layout:{visibility:"visible"},paint:{"fill-color":"#BDE3DC"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMg4/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",86],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMg4/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMgc2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",87],layout:{visibility:"visible"},paint:{"fill-color":"#C0CFC0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMgt",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",88],layout:{visibility:"visible"},paint:{"fill-color":"#80CBB7"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMlg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",89],layout:{visibility:"visible"},paint:{"fill-color":"#F48688"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMlg_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",90],layout:{visibility:"visible"},paint:{"fill-color":"#F48688"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMlg_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",90],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMlg_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMlg_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",91],layout:{visibility:"visible"},paint:{"fill-color":"#F48688"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMlg_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",91],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMlg_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMlg_g/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",92],layout:{visibility:"visible"},paint:{"fill-color":"#F48688"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMlg_g/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",92],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMlg_g/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMllg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",93],layout:{visibility:"visible"},paint:{"fill-color":"#E1B9CC"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMm2/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",94],layout:{visibility:"visible"},paint:{"fill-color":"#BFE2CA"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMm2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",94],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMm2/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMm2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",94],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMm2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMm2_g/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",95],layout:{visibility:"visible"},paint:{"fill-color":"#BFE2CA"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMm2_g/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",95],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMm2_g/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMm3/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",96],layout:{visibility:"visible"},paint:{"fill-color":"#97D4C9"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMm3/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",96],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMm3/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMm3/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",96],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMm3/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMmc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",97],layout:{visibility:"visible"},paint:{"fill-color":"#B3DDC0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMmg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",98],layout:{visibility:"visible"},paint:{"fill-color":"#45C1C7"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMmlc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",99],layout:{visibility:"visible"},paint:{"fill-color":"#68C295"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMq2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",100],layout:{visibility:"visible"},paint:{"fill-color":"#BFE2CA"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMq2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",100],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMq2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMq3/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",101],layout:{visibility:"visible"},paint:{"fill-color":"#D7ECDD"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMq3/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",101],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMq3/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMq3/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",101],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSMq3/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSMqc2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",102],layout:{visibility:"visible"},paint:{"fill-color":"#A2CBC1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSPPag",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",103],layout:{visibility:"visible"},paint:{"fill-color":"#F27E7F"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSPPg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",104],layout:{visibility:"visible"},paint:{"fill-color":"#F2756F"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSPPlcg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",105],layout:{visibility:"visible"},paint:{"fill-color":"#F5989E"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSPPlcg_g/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",106],layout:{visibility:"visible"},paint:{"fill-color":"#F5989E"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSPPlcg_g/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",106],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSPPlcg_g/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSS",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",107],layout:{visibility:"visible"},paint:{"fill-color":"#91D1C0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSCcl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",108],layout:{visibility:"visible"},paint:{"fill-color":"#86BA9E"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSCd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",109],layout:{visibility:"visible"},paint:{"fill-color":"#9FD5B9"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSCd_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",110],layout:{visibility:"visible"},paint:{"fill-color":"#9FD5B9"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSCd_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",110],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSSCd_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSCg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",111],layout:{visibility:"visible"},paint:{"fill-color":"#B8B997"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSCga/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",112],layout:{visibility:"visible"},paint:{"fill-color":"#A5D9C9"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSCga/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",112],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSSCga/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSClg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",113],layout:{visibility:"visible"},paint:{"fill-color":"#D8CEB4"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSClgc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",114],layout:{visibility:"visible"},paint:{"fill-color":"#A9D6AE"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSCm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",115],layout:{visibility:"visible"},paint:{"fill-color":"#CCE6CA"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",116],layout:{visibility:"visible"},paint:{"fill-color":"#BBD86D"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSScc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",117],layout:{visibility:"visible"},paint:{"fill-color":"#C2CDA6"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSgm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",118],layout:{visibility:"visible"},paint:{"fill-color":"#DBE9AE"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSgm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",118],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSSgm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSgm_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",119],layout:{visibility:"visible"},paint:{"fill-color":"#DAD6A6"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSgm_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",119],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSSgm_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",120],layout:{visibility:"visible"},paint:{"fill-color":"#DAD6A6"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSmb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",121],layout:{visibility:"visible"},paint:{"fill-color":"#9FC19E"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSmb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",121],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSSmb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSmb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",121],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSSmb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSmb_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",122],layout:{visibility:"visible"},paint:{"fill-color":"#9FC19E"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSmb_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",122],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSSmb_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSmb_g/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",123],layout:{visibility:"visible"},paint:{"fill-color":"#9FC19E"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSmb_g/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",123],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSSmb_g/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSmc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",124],layout:{visibility:"visible"},paint:{"fill-color":"#9EC2A6"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSmc_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",125],layout:{visibility:"visible"},paint:{"fill-color":"#9EC2A6"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSSmc_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",125],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSSmc_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CST",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",126],layout:{visibility:"visible"},paint:{"fill-color":"#00B09C"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSTCo",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",127],layout:{visibility:"visible"},paint:{"fill-color":"#5FC4B8"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSTCobrf",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",128],layout:{visibility:"visible"},paint:{"fill-color":"#E8E1A0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSTCoce",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",129],layout:{visibility:"visible"},paint:{"fill-color":"#A6CEC3"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSTColo",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",130],layout:{visibility:"visible"},paint:{"fill-color":"#DAC38E"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSTComg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",131],layout:{visibility:"visible"},paint:{"fill-color":"#A9D6A5"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSTComr/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",132],layout:{visibility:"visible"},paint:{"fill-color":"#D9EACA"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSTComr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",132],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSTComr/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSTComr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",132],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CSTComr/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CSlc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",133],layout:{visibility:"visible"},paint:{"fill-color":"#247A67"}},{id:"Cartografia del Basament/Unitats geològiques:2/CaMca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",134],layout:{visibility:"visible"},paint:{"fill-color":"#25ACAE"}},{id:"Cartografia del Basament/Unitats geològiques:2/CaMcg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",135],layout:{visibility:"visible"},paint:{"fill-color":"#A2A38A"}},{id:"Cartografia del Basament/Unitats geològiques:2/CaMcg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",135],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CaMcg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CaMcg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",135],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/CaMcg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/CaMli",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",136],layout:{visibility:"visible"},paint:{"fill-color":"#008BB3"}},{id:"Cartografia del Basament/Unitats geològiques:2/CaMp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",137],layout:{visibility:"visible"},paint:{"fill-color":"#E8D782"}},{id:"Cartografia del Basament/Unitats geològiques:2/CaMpg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",138],layout:{visibility:"visible"},paint:{"fill-color":"#B9B07E"}},{id:"Cartografia del Basament/Unitats geològiques:2/CaMpgca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",139],layout:{visibility:"visible"},paint:{"fill-color":"#3DB5B1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CaMr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",140],layout:{visibility:"visible"},paint:{"fill-color":"#A4D9D1"}},{id:"Cartografia del Basament/Unitats geològiques:2/CaP3rb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",141],layout:{visibility:"visible"},paint:{"fill-color":"#D0D88F"}},{id:"Cartografia del Basament/Unitats geològiques:2/CaP3rlg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",142],layout:{visibility:"visible"},paint:{"fill-color":"#A1B98B"}},{id:"Cartografia del Basament/Unitats geològiques:2/CaPelag",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",143],layout:{visibility:"visible"},paint:{"fill-color":"#E77B6D"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ddgb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",144],layout:{visibility:"visible"},paint:{"fill-color":"#B293C4"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ddgb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",144],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ddgb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ddgb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",144],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ddgb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ddh/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",145],layout:{visibility:"visible"},paint:{"fill-color":"#784599"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ddh/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",145],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ddh/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ddh/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",145],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ddh/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/DeEEcam",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",146],layout:{visibility:"visible"},paint:{"fill-color":"#D5806A"}},{id:"Cartografia del Basament/Unitats geològiques:2/DeEEl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",147],layout:{visibility:"visible"},paint:{"fill-color":"#A57F6F"}},{id:"Cartografia del Basament/Unitats geològiques:2/DeEElca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",148],layout:{visibility:"visible"},paint:{"fill-color":"#C39B76"}},{id:"Cartografia del Basament/Unitats geològiques:2/Decap",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",149],layout:{visibility:"visible"},paint:{"fill-color":"#DF8A80"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dgbto/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",150],layout:{visibility:"visible"},paint:{"fill-color":"#6469AF"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dgbto/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",150],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Dgbto/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dgbto/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",150],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Dgbto/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dmghp/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",151],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Dmghp/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dmghp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",151],layout:{visibility:"visible"},paint:{"fill-color":"#713C95"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dmghp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",151],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Dmghp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dpmd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",152],layout:{visibility:"visible"},paint:{"fill-color":"#934589"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dpqd/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",153],layout:{visibility:"visible"},paint:{"fill-color":"#A36993"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dpqd/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",153],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Dpqd/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dpqd/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",153],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Dpqd/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dpqdh/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",154],layout:{visibility:"visible"},paint:{"fill-color":"#A36993"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dpqdh/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",154],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Dpqdh/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dpqdh/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",154],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Dpqdh/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dpqmd/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",155],layout:{visibility:"visible"},paint:{"fill-color":"#A35795"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dpqmd/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",155],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Dpqmd/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dpqmd/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",155],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Dpqmd/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dqd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",156],layout:{visibility:"visible"},paint:{"fill-color":"#713C95"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dqdh/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",157],layout:{visibility:"visible"},paint:{"fill-color":"#713C95"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dqdh/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",157],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Dqdh/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Dqdh/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",157],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Dqdh/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gap/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",158],layout:{visibility:"visible"},paint:{"fill-color":"#F6E256"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gap/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",158],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gap/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gap/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",158],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gap/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gapg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",159],layout:{visibility:"visible"},paint:{"fill-color":"#F4DC81"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gapp/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",160],layout:{visibility:"visible"},paint:{"fill-color":"#F6E256"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gapp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",160],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gapp/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gapp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",160],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gapp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gbh/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",161],layout:{visibility:"visible"},paint:{"fill-color":"#5881C1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gbh/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",161],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gbh/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gbh/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",161],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gbh/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gd/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",162],layout:{visibility:"visible"},paint:{"fill-color":"#EF522B"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gd/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",162],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gd/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gd/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",162],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gd/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/GdDd/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",163],layout:{visibility:"visible"},paint:{"fill-color":"#D966A6"}},{id:"Cartografia del Basament/Unitats geològiques:2/GdDd/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",163],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/GdDd/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/GdDd/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",163],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/GdDd/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gfe/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",164],layout:{visibility:"visible"},paint:{"fill-color":"#FEECA0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gfe/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",164],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gfe/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gfe/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",164],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gfe/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggbi/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",165],layout:{visibility:"visible"},paint:{"fill-color":"#EE462C"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggbi/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",165],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggbi/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggbi/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",165],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggbi/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggd/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",166],layout:{visibility:"visible"},paint:{"fill-color":"#EC187E"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggd/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",166],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggd/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggd/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",166],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggd/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggd2/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",167],layout:{visibility:"visible"},paint:{"fill-color":"#ED3081"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggd2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",167],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggd2/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggd2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",167],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggd2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdb1/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",168],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdb1/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdb1/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",168],layout:{visibility:"visible"},paint:{"fill-color":"#F27E9D"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdb1/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",168],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdb1/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdb2/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",169],layout:{visibility:"visible"},paint:{"fill-color":"#F27E9D"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdb2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",169],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdb2/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdb2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",169],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdb2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdbi/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",170],layout:{visibility:"visible"},paint:{"fill-color":"#F05E74"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdbi/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",170],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdbi/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdbi/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",170],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdbi/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdbl2/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",171],layout:{visibility:"visible"},paint:{"fill-color":"#F074A4"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdbl2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",171],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdbl2/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdbl2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",171],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdbl2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdbm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",172],layout:{visibility:"visible"},paint:{"fill-color":"#E99FAF"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdbm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",172],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdbm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdbm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",172],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdbm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdf/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",173],layout:{visibility:"visible"},paint:{"fill-color":"#EC187E"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdf/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",173],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdf/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdf/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",173],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdf/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdfk/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",174],layout:{visibility:"visible"},paint:{"fill-color":"#F387A1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdfk/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",174],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdfk/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdfk/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",174],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdfk/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdh",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",175],layout:{visibility:"visible"},paint:{"fill-color":"#ED3081"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdh2/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",176],layout:{visibility:"visible"},paint:{"fill-color":"#ED3081"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdh2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",176],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdh2/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdh2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",176],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdh2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdi/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",177],layout:{visibility:"visible"},paint:{"fill-color":"#EF5D8F"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdi/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",177],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdi/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdi/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",177],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdi/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdmg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",178],layout:{visibility:"visible"},paint:{"fill-color":"#F27376"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdto/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",179],layout:{visibility:"visible"},paint:{"fill-color":"#AA7AAD"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdto/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",179],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdto/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggdto/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",179],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggdto/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggl/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",180],layout:{visibility:"visible"},paint:{"fill-color":"#F79427"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggl/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",180],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggl/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggl/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",180],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggl/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",181],layout:{visibility:"visible"},paint:{"fill-color":"#F15D52"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",181],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",181],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggmc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",182],layout:{visibility:"visible"},paint:{"fill-color":"#EE462C"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggmc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",182],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggmc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggmc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",182],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggmc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggr/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",183],layout:{visibility:"visible"},paint:{"fill-color":"#F16861"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",183],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggr/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",183],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggr/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggr1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",184],layout:{visibility:"visible"},paint:{"fill-color":"#EE462C"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggrf",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",185],layout:{visibility:"visible"},paint:{"fill-color":"#DA2A30"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggri",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",186],layout:{visibility:"visible"},paint:{"fill-color":"#EF5266"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggsr/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",187],layout:{visibility:"visible"},paint:{"fill-color":"#EE462C"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggsr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",187],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggsr/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ggsr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",187],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ggsr/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",188],layout:{visibility:"visible"},paint:{"fill-color":"#FED413"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",188],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",188],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glg1/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",189],layout:{visibility:"visible"},paint:{"fill-color":"#FECB19"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glg1/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",189],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glg1/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glg1/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",189],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glg1/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glga/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",190],layout:{visibility:"visible"},paint:{"fill-color":"#F48576"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glga/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",190],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glga/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glga/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",190],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glga/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glgg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",191],layout:{visibility:"visible"},paint:{"fill-color":"#F79427"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glgm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",192],layout:{visibility:"visible"},paint:{"fill-color":"#FED413"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glgm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",192],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glgm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glgm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",192],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glgm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glgmb1/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",193],layout:{visibility:"visible"},paint:{"fill-color":"#FBAF23"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glgmb1/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",193],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glgmb1/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glgmb1/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",193],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glgmb1/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glm1/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",194],layout:{visibility:"visible"},paint:{"fill-color":"#EBDE58"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glm1/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",194],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glm1/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glm1/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",194],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glm1/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glmg2/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",195],layout:{visibility:"visible"},paint:{"fill-color":"#F3D155"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glmg2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",195],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glmg2/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Glmg2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",195],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Glmg2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",196],layout:{visibility:"visible"},paint:{"fill-color":"#7B65AB"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgb1/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",197],layout:{visibility:"visible"},paint:{"fill-color":"#F58D4B"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgb1/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",197],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgb1/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgb1/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",197],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgb1/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgb2/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",198],layout:{visibility:"visible"},paint:{"fill-color":"#F58D4B"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgb2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",198],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgb2/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgb2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",198],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgb2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgb2-3/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",199],layout:{visibility:"visible"},paint:{"fill-color":"#F58D4B"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgb2-3/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",199],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgb2-3/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgb2-3/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",199],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgb2-3/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgb3/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",200],layout:{visibility:"visible"},paint:{"fill-color":"#F58D4B"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgb3/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",200],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgb3/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgb3/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",200],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgb3/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgd/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",201],layout:{visibility:"visible"},paint:{"fill-color":"#7B65AB"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgd/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",201],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgd/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgd/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",201],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgd/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgfk",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",202],layout:{visibility:"visible"},paint:{"fill-color":"#F58D4B"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgl2/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",203],layout:{visibility:"visible"},paint:{"fill-color":"#F27363"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgl2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",203],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgl2/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgl2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",203],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgl2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgl3/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",204],layout:{visibility:"visible"},paint:{"fill-color":"#F27363"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgl3/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",204],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgl3/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgl3/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",204],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgl3/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgp/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",205],layout:{visibility:"visible"},paint:{"fill-color":"#F58D4B"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",205],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgp/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmgp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",205],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmgp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmlg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",206],layout:{visibility:"visible"},paint:{"fill-color":"#FCB93A"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmlg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",206],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmlg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gmlg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",206],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gmlg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpe/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",207],layout:{visibility:"visible"},paint:{"fill-color":"#DBDA58"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpe/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",207],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpe/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpe/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",207],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpe/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",208],layout:{visibility:"visible"},paint:{"fill-color":"#F2722A"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",208],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",208],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgd/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",209],layout:{visibility:"visible"},paint:{"fill-color":"#F6A6A7"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgd/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",209],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpgd/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgd/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",209],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpgd/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgdf/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",210],layout:{visibility:"visible"},paint:{"fill-color":"#F6A6A7"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgdf/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",210],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpgdf/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgdf/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",210],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpgdf/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgdh/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",211],layout:{visibility:"visible"},paint:{"fill-color":"#EE5195"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgdh/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",211],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpgdh/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgdh/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",211],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpgdh/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",212],layout:{visibility:"visible"},paint:{"fill-color":"#C8CCDD"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",212],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpgg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",212],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpgg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgr/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",213],layout:{visibility:"visible"},paint:{"fill-color":"#F48684"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",213],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpgr/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",213],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpgr/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpgri",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",214],layout:{visibility:"visible"},paint:{"fill-color":"#F05E74"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gplf/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",215],layout:{visibility:"visible"},paint:{"fill-color":"#FEF7A3"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gplf/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",215],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gplf/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gplf/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",215],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gplf/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gplm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",216],layout:{visibility:"visible"},paint:{"fill-color":"#F0CB96"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gplm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",216],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gplm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gplm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",216],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gplm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpmd/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",217],layout:{visibility:"visible"},paint:{"fill-color":"#934589"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpmd/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",217],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpmd/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpmd/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",217],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpmd/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpmg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",218],layout:{visibility:"visible"},paint:{"fill-color":"#F69888"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpmg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",218],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpmg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpmg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",218],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpmg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpqd/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",219],layout:{visibility:"visible"},paint:{"fill-color":"#A36993"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpqd/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",219],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpqd/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpqd/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",219],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpqd/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpr/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",220],layout:{visibility:"visible"},paint:{"fill-color":"#F2C11A"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",220],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpr/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",220],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpr/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpto/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",221],layout:{visibility:"visible"},paint:{"fill-color":"#DC7AA2"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpto/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",221],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpto/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gpto/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",221],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gpto/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gqd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",222],layout:{visibility:"visible"},paint:{"fill-color":"#6B3D95"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gqdt/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",223],layout:{visibility:"visible"},paint:{"fill-color":"#523692"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gqdt/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",223],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gqdt/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gqdt/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",223],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gqdt/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gqm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",224],layout:{visibility:"visible"},paint:{"fill-color":"#814599"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gqm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",224],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gqm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gqm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",224],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gqm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gt/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",225],layout:{visibility:"visible"},paint:{"fill-color":"#D15B94"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gt/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",225],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gt/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gt/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",225],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gt/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gto2/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",226],layout:{visibility:"visible"},paint:{"fill-color":"#D279A2"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gto2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",226],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gto2/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gto2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",226],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gto2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gto3/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",227],layout:{visibility:"visible"},paint:{"fill-color":"#D279A2"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gto3/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",227],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gto3/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gto3/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",227],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gto3/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gtoi",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",228],layout:{visibility:"visible"},paint:{"fill-color":"#D279A2"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gtol",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",229],layout:{visibility:"visible"},paint:{"fill-color":"#D279A2"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gtom/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",230],layout:{visibility:"visible"},paint:{"fill-color":"#C72482"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gtom/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",230],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gtom/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Gtom/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",230],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Gtom/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Hbo/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",231],layout:{visibility:"visible"},paint:{"fill-color":"#798B8B"}},{id:"Cartografia del Basament/Unitats geològiques:2/Hbo/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",231],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Hbo/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Hbo/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",231],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Hbo/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/JCKBeca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",232],layout:{visibility:"visible"},paint:{"fill-color":"#CEE5B7"}},{id:"Cartografia del Basament/Unitats geològiques:2/JCcb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",233],layout:{visibility:"visible"},paint:{"fill-color":"#81CAAE"}},{id:"Cartografia del Basament/Unitats geològiques:2/JI",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",234],layout:{visibility:"visible"},paint:{"fill-color":"#10A1DB"}},{id:"Cartografia del Basament/Unitats geològiques:2/JIH",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",235],layout:{visibility:"visible"},paint:{"fill-color":"#3A99D4"}},{id:"Cartografia del Basament/Unitats geològiques:2/JIHS",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",236],layout:{visibility:"visible"},paint:{"fill-color":"#48ADE2"}},{id:"Cartografia del Basament/Unitats geològiques:2/JIHgx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",237],layout:{visibility:"visible"},paint:{"fill-color":"#EDE2E4"}},{id:"Cartografia del Basament/Unitats geològiques:2/JIHgx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",237],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/JIHgx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/JIHgx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",237],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/JIHgx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/JIPT",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",238],layout:{visibility:"visible"},paint:{"fill-color":"#017EC3"}},{id:"Cartografia del Basament/Unitats geològiques:2/JIS",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",239],layout:{visibility:"visible"},paint:{"fill-color":"#00A3E5"}},{id:"Cartografia del Basament/Unitats geològiques:2/JIT",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",240],layout:{visibility:"visible"},paint:{"fill-color":"#017EC3"}},{id:"Cartografia del Basament/Unitats geològiques:2/JIbd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",241],layout:{visibility:"visible"},paint:{"fill-color":"#5F795C"}},{id:"Cartografia del Basament/Unitats geològiques:2/JMA",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",242],layout:{visibility:"visible"},paint:{"fill-color":"#5ECCF5"}},{id:"Cartografia del Basament/Unitats geològiques:2/JMABjm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",243],layout:{visibility:"visible"},paint:{"fill-color":"#1691C8"}},{id:"Cartografia del Basament/Unitats geològiques:2/JMBm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",244],layout:{visibility:"visible"},paint:{"fill-color":"#00A8E5"}},{id:"Cartografia del Basament/Unitats geològiques:2/JMd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",245],layout:{visibility:"visible"},paint:{"fill-color":"#5191CD"}},{id:"Cartografia del Basament/Unitats geològiques:2/JMd_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",246],layout:{visibility:"visible"},paint:{"fill-color":"#5191CD"}},{id:"Cartografia del Basament/Unitats geològiques:2/JMd_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",246],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/JMd_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/JSKd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",247],layout:{visibility:"visible"},paint:{"fill-color":"#0094B1"}},{id:"Cartografia del Basament/Unitats geològiques:2/JSc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",248],layout:{visibility:"visible"},paint:{"fill-color":"#77BEE9"}},{id:"Cartografia del Basament/Unitats geològiques:2/Lli/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",249],layout:{visibility:"visible"},paint:{"fill-color":"#0069B4"}},{id:"Cartografia del Basament/Unitats geològiques:2/Lli/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",249],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Lli/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Lli/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",249],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Lli/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NM1/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",250],layout:{visibility:"visible"},paint:{"fill-color":"#FEF356"}},{id:"Cartografia del Basament/Unitats geològiques:2/NM1/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",250],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NM1/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NM2/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",251],layout:{visibility:"visible"},paint:{"fill-color":"#FEF356"}},{id:"Cartografia del Basament/Unitats geològiques:2/NM2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",251],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NM2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMBca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",252],layout:{visibility:"visible"},paint:{"fill-color":"#F9EC22"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMBcam",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",253],layout:{visibility:"visible"},paint:{"fill-color":"#EFAC32"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMBcg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",254],layout:{visibility:"visible"},paint:{"fill-color":"#FCBA51"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMBcg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",254],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMBcg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMBcgl/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",255],layout:{visibility:"visible"},paint:{"fill-color":"#FEE077"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMBcgl/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",255],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMBcgl/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMBgx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",256],layout:{visibility:"visible"},paint:{"fill-color":"#FEF343"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMBgx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",256],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMBgx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMBgx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",256],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMBgx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMBl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",257],layout:{visibility:"visible"},paint:{"fill-color":"#FEE753"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMBlg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",258],layout:{visibility:"visible"},paint:{"fill-color":"#FCD1B0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMLc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",259],layout:{visibility:"visible"},paint:{"fill-color":"#F2DD9D"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMLca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",260],layout:{visibility:"visible"},paint:{"fill-color":"#FECB28"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMLgl/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",261],layout:{visibility:"visible"},paint:{"fill-color":"#F1D5A2"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMLgl/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",261],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMLgl/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMLgl/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",261],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMLgl/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMLgl/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",261],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMLgl/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMLlg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",262],layout:{visibility:"visible"},paint:{"fill-color":"#F9BEB0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMLm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",263],layout:{visibility:"visible"},paint:{"fill-color":"#FEECB3"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSTca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",264],layout:{visibility:"visible"},paint:{"fill-color":"#E9CC31"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSTg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",265],layout:{visibility:"visible"},paint:{"fill-color":"#F4DB79"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSTgb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",266],layout:{visibility:"visible"},paint:{"fill-color":"#EFC17B"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSTlc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",267],layout:{visibility:"visible"},paint:{"fill-color":"#E9E084"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSTlcg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",268],layout:{visibility:"visible"},paint:{"fill-color":"#FEDE53"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSTlg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",269],layout:{visibility:"visible"},paint:{"fill-color":"#F6EF86"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSTm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",270],layout:{visibility:"visible"},paint:{"fill-color":"#F0DFB8"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSTmg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",271],layout:{visibility:"visible"},paint:{"fill-color":"#FEE081"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSTmgca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",272],layout:{visibility:"visible"},paint:{"fill-color":"#F3E6A0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSbr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",273],layout:{visibility:"visible"},paint:{"fill-color":"#FECC45"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSbr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",273],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMSbr/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",274],layout:{visibility:"visible"},paint:{"fill-color":"#F6D82A"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMScg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",275],layout:{visibility:"visible"},paint:{"fill-color":"#FECC45"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMScg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",275],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMScg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",276],layout:{visibility:"visible"},paint:{"fill-color":"#FEEA82"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",276],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMSg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSgb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",277],layout:{visibility:"visible"},paint:{"fill-color":"#FECD73"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMSm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",278],layout:{visibility:"visible"},paint:{"fill-color":"#FEE4B8"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMag/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",279],layout:{visibility:"visible"},paint:{"fill-color":"#FEE61A"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMag/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",279],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMag/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",280],layout:{visibility:"visible"},paint:{"fill-color":"#F6EC36"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMbd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",281],layout:{visibility:"visible"},paint:{"fill-color":"#4E7E99"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMbm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",282],layout:{visibility:"visible"},paint:{"fill-color":"#FEF100"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMbm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",282],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMbm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMbt/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",283],layout:{visibility:"visible"},paint:{"fill-color":"#FED04A"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMbt/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",283],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMbt/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMbvv/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",284],layout:{visibility:"visible"},paint:{"fill-color":"#FED775"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMbvv/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",284],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMbvv/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMcc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",285],layout:{visibility:"visible"},paint:{"fill-color":"#FEDD0A"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMcc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",285],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMcc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMcg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",286],layout:{visibility:"visible"},paint:{"fill-color":"#FEE3A6"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMcg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",286],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMcg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMch/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",287],layout:{visibility:"visible"},paint:{"fill-color":"#FEE18A"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMch/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",287],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMch/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMco/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",288],layout:{visibility:"visible"},paint:{"fill-color":"#FEEB96"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMco/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",288],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMco/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMcr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",289],layout:{visibility:"visible"},paint:{"fill-color":"#E8D77A"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMf",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",290],layout:{visibility:"visible"},paint:{"fill-color":"#FEEAA3"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",291],layout:{visibility:"visible"},paint:{"fill-color":"#FEF8AE"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",291],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMgba/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",292],layout:{visibility:"visible"},paint:{"fill-color":"#E8D77A"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMgba/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",292],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMgba/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMgm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",293],layout:{visibility:"visible"},paint:{"fill-color":"#F3DC8B"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMgm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",293],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMgm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMgm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",293],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMgm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMgo/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",294],layout:{visibility:"visible"},paint:{"fill-color":"#FEE993"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMgo/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",294],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMgo/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMgo/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",294],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMgo/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMgo_l/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",295],layout:{visibility:"visible"},paint:{"fill-color":"#FEE993"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMgo_l/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",295],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMgo_l/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMgo_l/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",295],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMgo_l/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMlc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",296],layout:{visibility:"visible"},paint:{"fill-color":"#FEDD0A"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMlh",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",297],layout:{visibility:"visible"},paint:{"fill-color":"#FEE18A"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMlm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",298],layout:{visibility:"visible"},paint:{"fill-color":"#FEF100"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMlt",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",299],layout:{visibility:"visible"},paint:{"fill-color":"#FED04A"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",300],layout:{visibility:"visible"},paint:{"fill-color":"#FEF362"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",300],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",300],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMsa/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",301],layout:{visibility:"visible"},paint:{"fill-color":"#FEDF6C"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMsa/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",301],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NMsa/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NMtd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",302],layout:{visibility:"visible"},paint:{"fill-color":"#7099AD"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPaa",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",303],layout:{visibility:"visible"},paint:{"fill-color":"#FEE370"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPac",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",304],layout:{visibility:"visible"},paint:{"fill-color":"#F2F1A8"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPaf",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",305],layout:{visibility:"visible"},paint:{"fill-color":"#FEF697"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPaf_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",306],layout:{visibility:"visible"},paint:{"fill-color":"#FEF697"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPaf_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",306],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPaf_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPap",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",307],layout:{visibility:"visible"},paint:{"fill-color":"#FEE88A"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPar",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",308],layout:{visibility:"visible"},paint:{"fill-color":"#D2D01E"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",309],layout:{visibility:"visible"},paint:{"fill-color":"#FEF8B7"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",309],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPcf",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",310],layout:{visibility:"visible"},paint:{"fill-color":"#F5ED62"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPcg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",311],layout:{visibility:"visible"},paint:{"fill-color":"#F7EE71"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPcg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",311],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPcg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPcgl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",312],layout:{visibility:"visible"},paint:{"fill-color":"#F7EE71"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPclg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",313],layout:{visibility:"visible"},paint:{"fill-color":"#FEF585"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPclg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",313],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPclg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPga/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",314],layout:{visibility:"visible"},paint:{}},{id:"Cartografia del Basament/Unitats geològiques:2/NPga/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",314],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPga/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",315],layout:{visibility:"visible"},paint:{"fill-color":"#F2F1A8"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",315],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPgc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",315],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPgc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",316],layout:{visibility:"visible"},paint:{"fill-color":"#FEF356"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",317],layout:{visibility:"visible"},paint:{"fill-color":"#FEE993"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",317],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPgm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",317],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPgm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",318],layout:{visibility:"visible"},paint:{"fill-color":"#FEE88A"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",318],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPgp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgr/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",319],layout:{visibility:"visible"},paint:{"fill-color":"#EFED86"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",319],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPgr/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",319],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPgr/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgs",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",320],layout:{visibility:"visible"},paint:{"fill-color":"#F4DA6E"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgv/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",321],layout:{visibility:"visible"},paint:{"fill-color":"#FEE478"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPgv/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",321],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPgv/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",322],layout:{visibility:"visible"},paint:{"fill-color":"#FEF585"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPlc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",323],layout:{visibility:"visible"},paint:{"fill-color":"#FEF8B7"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPlc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",323],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPlc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",324],layout:{visibility:"visible"},paint:{"fill-color":"#FEF472"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPmf/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",325],layout:{visibility:"visible"},paint:{"fill-color":"#F5ED62"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPmf/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",325],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPmf/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPmf/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",325],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPmf/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPml/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",326],layout:{visibility:"visible"},paint:{"fill-color":"#FEF356"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPml/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",326],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPml/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPsa",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",327],layout:{visibility:"visible"},paint:{"fill-color":"#F5DD69"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPsao",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",328],layout:{visibility:"visible"},paint:{"fill-color":"#F5DD69"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPsf",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",329],layout:{visibility:"visible"},paint:{"fill-color":"#F2F098"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPsf_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",330],layout:{visibility:"visible"},paint:{"fill-color":"#F2F098"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPsf_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",330],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPsf_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPsm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",331],layout:{visibility:"visible"},paint:{"fill-color":"#FEE770"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPsr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",332],layout:{visibility:"visible"},paint:{"fill-color":"#F5ED62"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPsr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",332],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NPsr/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPss",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",333],layout:{visibility:"visible"},paint:{"fill-color":"#FEF472"}},{id:"Cartografia del Basament/Unitats geològiques:2/NPsv",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",334],layout:{visibility:"visible"},paint:{"fill-color":"#FEE478"}},{id:"Cartografia del Basament/Unitats geològiques:2/NQPPm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",335],layout:{visibility:"visible"},paint:{"fill-color":"#D3E3F4"}},{id:"Cartografia del Basament/Unitats geològiques:2/NQPPm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",335],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/NQPPm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Nbc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",336],layout:{visibility:"visible"},paint:{"fill-color":"#447B99"}},{id:"Cartografia del Basament/Unitats geològiques:2/Nbn",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",337],layout:{visibility:"visible"},paint:{"fill-color":"#00578F"}},{id:"Cartografia del Basament/Unitats geològiques:2/Nim",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",338],layout:{visibility:"visible"},paint:{"fill-color":"#FEE88A"}},{id:"Cartografia del Basament/Unitats geològiques:2/Nvcl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",339],layout:{visibility:"visible"},paint:{"fill-color":"#7A8FC8"}},{id:"Cartografia del Basament/Unitats geològiques:2/Nvp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",340],layout:{visibility:"visible"},paint:{"fill-color":"#817BB9"}},{id:"Cartografia del Basament/Unitats geològiques:2/OM",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",341],layout:{visibility:"visible"},paint:{"fill-color":"#FEE256"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orcap",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",342],layout:{visibility:"visible"},paint:{"fill-color":"#CCD4C9"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orcg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",343],layout:{visibility:"visible"},paint:{"fill-color":"#B98ABE"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orcg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",343],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Orcg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orcg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",343],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Orcg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ord",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",344],layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ord_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",345],layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ord_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",345],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ord_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ordv",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",346],layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ordv_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",347],layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Ordv_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",347],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Ordv_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Org/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",348],layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Cartografia del Basament/Unitats geològiques:2/Org/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",348],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Org/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orgq",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",349],layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orlc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",350],layout:{visibility:"visible"},paint:{"fill-color":"#C1949B"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orln",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",351],layout:{visibility:"visible"},paint:{"fill-color":"#B3ACC4"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orpca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",352],layout:{visibility:"visible"},paint:{"fill-color":"#D8EBD3"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orpg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",353],layout:{visibility:"visible"},paint:{"fill-color":"#E2C0BB"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orpn",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",354],layout:{visibility:"visible"},paint:{"fill-color":"#BF859F"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orpq",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",355],layout:{visibility:"visible"},paint:{"fill-color":"#E2CAC8"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orq",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",356],layout:{visibility:"visible"},paint:{"fill-color":"#CAC3D0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orrd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",357],layout:{visibility:"visible"},paint:{"fill-color":"#FBB04F"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orva/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",358],layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orva/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",358],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Orva/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Orva/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",358],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Orva/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBPc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",359],layout:{visibility:"visible"},paint:{"fill-color":"#FDD09E"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBPc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",359],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBPc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBPcg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",360],layout:{visibility:"visible"},paint:{"fill-color":"#FCC696"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBPcg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",360],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBPcg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBPgx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",361],layout:{visibility:"visible"},paint:{"fill-color":"#DB90B8"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBPgx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",361],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBPgx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBPgx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",361],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBPgx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",362],layout:{visibility:"visible"},paint:{"fill-color":"#FCC179"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",362],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",362],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBbh/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",363],layout:{visibility:"visible"},paint:{"fill-color":"#EDAF8C"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBbh/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",363],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBbh/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBbmp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",364],layout:{visibility:"visible"},paint:{"fill-color":"#E1A382"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBbmp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",364],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBbmp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBbp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",365],layout:{visibility:"visible"},paint:{"fill-color":"#FABD98"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBbp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",365],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBbp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBc/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",366],layout:{visibility:"visible"},paint:{"fill-color":"#CB968C"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",366],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBc/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",366],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",366],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBc1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",367],layout:{visibility:"visible"},paint:{"fill-color":"#FEC75C"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBc1g/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",368],layout:{visibility:"visible"},paint:{"fill-color":"#FDC35D"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBc1g/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",368],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBc1g/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBc2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",369],layout:{visibility:"visible"},paint:{"fill-color":"#FEE8C0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBc2a",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",370],layout:{visibility:"visible"},paint:{"fill-color":"#FDE6D3"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBc2b",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",371],layout:{visibility:"visible"},paint:{"fill-color":"#E5C79F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBc2c",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",372],layout:{visibility:"visible"},paint:{"fill-color":"#EECEC1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBc3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",373],layout:{visibility:"visible"},paint:{"fill-color":"#FDBF5A"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBca1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",374],layout:{visibility:"visible"},paint:{"fill-color":"#FEE293"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBcam",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",375],layout:{visibility:"visible"},paint:{"fill-color":"#E5C79F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBcc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",376],layout:{visibility:"visible"},paint:{"fill-color":"#CA5B56"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBcg2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",377],layout:{visibility:"visible"},paint:{"fill-color":"#F0D6B4"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBcg2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",377],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBcg2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBcgl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",378],layout:{visibility:"visible"},paint:{"fill-color":"#CEC99A"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBcl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",379],layout:{visibility:"visible"},paint:{"fill-color":"#E3A02C"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBcm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",380],layout:{visibility:"visible"},paint:{"fill-color":"#EFC182"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBcm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",380],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBcm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBcm2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",381],layout:{visibility:"visible"},paint:{"fill-color":"#F2CC70"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBct",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",382],layout:{visibility:"visible"},paint:{"fill-color":"#CD9D75"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBgca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",383],layout:{visibility:"visible"},paint:{"fill-color":"#FCD1B9"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBgcg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",384],layout:{visibility:"visible"},paint:{"fill-color":"#D8B390"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBglc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",385],layout:{visibility:"visible"},paint:{"fill-color":"#D9C49F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBgm1/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",386],layout:{visibility:"visible"},paint:{"fill-color":"#FDCF96"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBgm1/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",386],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBgm1/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBgm1/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",386],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBgm1/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBgm1/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",386],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBgm1/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBgm2/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",387],layout:{visibility:"visible"},paint:{"fill-color":"#FEDBB4"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBgm2/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",387],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBgm2/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBgm2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",387],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBgm2/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBgm2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",387],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBgm2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlg/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",388],layout:{visibility:"visible"},paint:{"fill-color":"#F1CA85"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",388],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBlg/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",388],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBlg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",388],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBlg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlg2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",389],layout:{visibility:"visible"},paint:{"fill-color":"#F9B4A3"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlg_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",390],layout:{visibility:"visible"},paint:{"fill-color":"#F1CA85"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlg_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",390],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBlg_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlgc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",391],layout:{visibility:"visible"},paint:{"fill-color":"#F9A97A"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlm1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",392],layout:{visibility:"visible"},paint:{"fill-color":"#FDCF96"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlm1a",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",393],layout:{visibility:"visible"},paint:{"fill-color":"#F5F2A4"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlm1b",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",394],layout:{visibility:"visible"},paint:{"fill-color":"#FABC8F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlm2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",395],layout:{visibility:"visible"},paint:{"fill-color":"#EEB273"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlm2_t/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",396],layout:{visibility:"visible"},paint:{"fill-color":"#EEB273"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBlm2_t/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",396],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBlm2_t/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBm0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",397],layout:{visibility:"visible"},paint:{"fill-color":"#FEEFCF"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBm1/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",398],layout:{visibility:"visible"},paint:{"fill-color":"#FECE7C"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBm1/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",398],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBm1/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBm1/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",398],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBm1/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBm2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",399],layout:{visibility:"visible"},paint:{"fill-color":"#FECE7C"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBm3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",400],layout:{visibility:"visible"},paint:{"fill-color":"#CD9E82"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBp0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",401],layout:{visibility:"visible"},paint:{"fill-color":"#EA9D85"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBp1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",402],layout:{visibility:"visible"},paint:{"fill-color":"#FED28D"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBp2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",403],layout:{visibility:"visible"},paint:{"fill-color":"#FAB583"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBp3/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",404],layout:{visibility:"visible"},paint:{"fill-color":"#FED28D"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBp3/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",404],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBp3/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBp3/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",404],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBp3/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBv1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",405],layout:{visibility:"visible"},paint:{"fill-color":"#FDBF54"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBv2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",406],layout:{visibility:"visible"},paint:{"fill-color":"#FEE098"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBv3/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",407],layout:{visibility:"visible"},paint:{"fill-color":"#FEE1A9"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBv3/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",407],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBv3/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBv3/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",407],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBv3/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBv3/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",407],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBv3/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBv4/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",408],layout:{visibility:"visible"},paint:{"fill-color":"#FDC881"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBv4/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",408],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBv4/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEBv4/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",408],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEBv4/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEILbmp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",409],layout:{visibility:"visible"},paint:{"fill-color":"#FBC7A4"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEILbr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",410],layout:{visibility:"visible"},paint:{"fill-color":"#D4B5C6"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEILbr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",410],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEILbr/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEILgb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",411],layout:{visibility:"visible"},paint:{"fill-color":"#F9B394"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEILgls",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",412],layout:{visibility:"visible"},paint:{"fill-color":"#F9B284"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEILgls_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",413],layout:{visibility:"visible"},paint:{"fill-color":"#F9B284"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEILgls_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",413],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEILgls_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEILma",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",414],layout:{visibility:"visible"},paint:{"fill-color":"#E1CBD0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEILoa",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",415],layout:{visibility:"visible"},paint:{"fill-color":"#EABCCB"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",416],layout:{visibility:"visible"},paint:{"fill-color":"#F9AD86"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",416],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",416],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIbc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",417],layout:{visibility:"visible"},paint:{"fill-color":"#EDB98F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIbc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",417],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIbc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIbrca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",418],layout:{visibility:"visible"},paint:{"fill-color":"#D0BF7F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIbrca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",418],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIbrca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",419],layout:{visibility:"visible"},paint:{"fill-color":"#FDC468"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIca_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",420],layout:{visibility:"visible"},paint:{"fill-color":"#FDC468"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIca_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",420],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIca_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIcab",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",421],layout:{visibility:"visible"},paint:{"fill-color":"#FCB945"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIcai/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",422],layout:{visibility:"visible"},paint:{"fill-color":"#CE8441"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIcai/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",422],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIcai/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIcam",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",423],layout:{visibility:"visible"},paint:{"fill-color":"#FAAB57"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIcas/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",424],layout:{visibility:"visible"},paint:{"fill-color":"#FCB94A"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIcas/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",424],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIcas/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIcc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",425],layout:{visibility:"visible"},paint:{"fill-color":"#EEB41F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIccs",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",426],layout:{visibility:"visible"},paint:{"fill-color":"#F58332"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIce",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",427],layout:{visibility:"visible"},paint:{"fill-color":"#EDB98F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIcg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",428],layout:{visibility:"visible"},paint:{"fill-color":"#F0CC9F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIco",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",429],layout:{visibility:"visible"},paint:{"fill-color":"#F58329"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIct",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",430],layout:{visibility:"visible"},paint:{"fill-color":"#F9A140"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIdc/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",431],layout:{visibility:"visible"},paint:{"fill-color":"#FCB930"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIdc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",431],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIdc/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIdc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",431],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIdc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIdc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",431],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIdc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIga/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",432],layout:{visibility:"visible"},paint:{"fill-color":"#FBBA66"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIga/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",432],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIga/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIga/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",432],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIga/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIga_li/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",433],layout:{visibility:"visible"},paint:{"fill-color":"#FBBA66"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIga_li/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",433],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIga_li/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIga_li/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",433],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIga_li/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgac",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",434],layout:{visibility:"visible"},paint:{"fill-color":"#E0895E"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgac_l/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",435],layout:{visibility:"visible"},paint:{"fill-color":"#E0895E"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgac_l/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",435],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIgac_l/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgac_l/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",435],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIgac_l/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",436],layout:{visibility:"visible"},paint:{"fill-color":"#F7976D"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",436],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIgc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",436],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIgc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgcm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",437],layout:{visibility:"visible"},paint:{"fill-color":"#F27248"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",438],layout:{visibility:"visible"},paint:{"fill-color":"#FBBA66"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",438],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIgg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",438],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIgg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIglc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",439],layout:{visibility:"visible"},paint:{"fill-color":"#CC9F90"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIglt",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",440],layout:{visibility:"visible"},paint:{"fill-color":"#FBB238"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIglt_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",441],layout:{visibility:"visible"},paint:{"fill-color":"#FBB238"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIglt_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",441],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIglt_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",442],layout:{visibility:"visible"},paint:{"fill-color":"#F9B284"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",442],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIgm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",442],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIgm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgma/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",443],layout:{visibility:"visible"},paint:{"fill-color":"#FCB945"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgma/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",443],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIgma/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgma/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",443],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIgma/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIgmc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",444],layout:{visibility:"visible"},paint:{"fill-color":"#F7976D"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIla",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",445],layout:{visibility:"visible"},paint:{"fill-color":"#F9AD86"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIla_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",446],layout:{visibility:"visible"},paint:{"fill-color":"#F9AD86"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIla_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",446],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIla_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",447],layout:{visibility:"visible"},paint:{"fill-color":"#F8AA88"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlg_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",448],layout:{visibility:"visible"},paint:{"fill-color":"#F8AA88"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlg_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",448],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIlg_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlg_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",449],layout:{visibility:"visible"},paint:{"fill-color":"#F8AA88"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlg_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",449],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIlg_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlg_g/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",450],layout:{visibility:"visible"},paint:{"fill-color":"#F8AA88"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlg_g/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",450],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIlg_g/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlg_gx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",451],layout:{visibility:"visible"},paint:{"fill-color":"#F8AA88"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlg_gx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",451],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIlg_gx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlg_gx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",451],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIlg_gx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlgc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",452],layout:{visibility:"visible"},paint:{"fill-color":"#FDC471"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",453],layout:{visibility:"visible"},paint:{"fill-color":"#FDC471"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",453],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c1/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",454],layout:{visibility:"visible"},paint:{"fill-color":"#FDC471"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c1/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",454],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c1/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",455],layout:{visibility:"visible"},paint:{"fill-color":"#FDC471"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",455],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c3/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",456],layout:{visibility:"visible"},paint:{"fill-color":"#FDC471"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c3/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",456],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c3/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c4/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",457],layout:{visibility:"visible"},paint:{"fill-color":"#FDC471"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c4/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",457],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIlgc_c4/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlgcc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",458],layout:{visibility:"visible"},paint:{"fill-color":"#F48F85"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIlgce",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",459],layout:{visibility:"visible"},paint:{"fill-color":"#C39265"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",460],layout:{visibility:"visible"},paint:{"fill-color":"#FECE7C"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",460],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",460],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIm_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",461],layout:{visibility:"visible"},paint:{"fill-color":"#FECE7C"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIm_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",461],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEIm_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIma",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",462],layout:{visibility:"visible"},paint:{"fill-color":"#FABD9B"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEImc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",463],layout:{visibility:"visible"},paint:{"fill-color":"#FCB930"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEImcm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",464],layout:{visibility:"visible"},paint:{"fill-color":"#F37B29"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEImg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",465],layout:{visibility:"visible"},paint:{"fill-color":"#FBBA66"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEImp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",466],layout:{visibility:"visible"},paint:{"fill-color":"#E8CC4B"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEImss",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",467],layout:{visibility:"visible"},paint:{"fill-color":"#FEE993"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIs",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",468],layout:{visibility:"visible"},paint:{"fill-color":"#FEE6A2"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEIv",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",469],layout:{visibility:"visible"},paint:{"fill-color":"#F9AD86"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELBbr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",470],layout:{visibility:"visible"},paint:{"fill-color":"#FED49B"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELBc1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",471],layout:{visibility:"visible"},paint:{"fill-color":"#AE9E80"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELBc2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",472],layout:{visibility:"visible"},paint:{"fill-color":"#E2AD94"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELBgl2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",473],layout:{visibility:"visible"},paint:{"fill-color":"#E2C0B3"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELBlg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",474],layout:{visibility:"visible"},paint:{"fill-color":"#C0B6B3"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",475],layout:{visibility:"visible"},paint:{"fill-color":"#FAAB57"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb1_g/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",476],layout:{visibility:"visible"},paint:{"fill-color":"#FAAB57"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb1_g/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",476],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELb1_g/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",477],layout:{visibility:"visible"},paint:{"fill-color":"#FCBA53"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb2_og/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",478],layout:{visibility:"visible"},paint:{"fill-color":"#FCBA53"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb2_og/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",478],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELb2_og/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb2_og/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",478],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELb2_og/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",479],layout:{visibility:"visible"},paint:{"fill-color":"#FED284"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb3_m/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",480],layout:{visibility:"visible"},paint:{"fill-color":"#FED284"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb3_m/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",480],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELb3_m/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb3_m/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",480],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELb3_m/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",481],layout:{visibility:"visible"},paint:{"fill-color":"#FEDAA2"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb5",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",482],layout:{visibility:"visible"},paint:{"fill-color":"#FBD3C9"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb5_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",483],layout:{visibility:"visible"},paint:{"fill-color":"#FBD3C9"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELb5_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",483],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELb5_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELbc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",484],layout:{visibility:"visible"},paint:{"fill-color":"#FED890"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELbrj",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",485],layout:{visibility:"visible"},paint:{"fill-color":"#E09B9B"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELc1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",486],layout:{visibility:"visible"},paint:{"fill-color":"#F89D39"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELc2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",487],layout:{visibility:"visible"},paint:{"fill-color":"#F7B7C9"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELc3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",488],layout:{visibility:"visible"},paint:{"fill-color":"#D6823B"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELc4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",489],layout:{visibility:"visible"},paint:{"fill-color":"#F9B38C"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcab",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",490],layout:{visibility:"visible"},paint:{"fill-color":"#FDCF8E"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcab1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",491],layout:{visibility:"visible"},paint:{"fill-color":"#FDC47A"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcab2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",492],layout:{visibility:"visible"},paint:{"fill-color":"#E5E3BC"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcaj",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",493],layout:{visibility:"visible"},paint:{"fill-color":"#A6C0CB"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",494],layout:{visibility:"visible"},paint:{"fill-color":"#FED284"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",494],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELcb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",494],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELcb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcg1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",495],layout:{visibility:"visible"},paint:{"fill-color":"#E3AB6E"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcg2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",496],layout:{visibility:"visible"},paint:{"fill-color":"#F0C473"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcg2_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",497],layout:{visibility:"visible"},paint:{"fill-color":"#F0C473"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcg2_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",497],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELcg2_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcg3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",498],layout:{visibility:"visible"},paint:{"fill-color":"#D6B4AF"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcgb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",499],layout:{visibility:"visible"},paint:{"fill-color":"#FED49B"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcgb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",499],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELcgb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcgb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",499],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELcgb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcgc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",500],layout:{visibility:"visible"},paint:{"fill-color":"#E5B354"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcggm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",501],layout:{visibility:"visible"},paint:{"fill-color":"#D8C5B0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcgl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",502],layout:{visibility:"visible"},paint:{"fill-color":"#F79539"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcna",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",503],layout:{visibility:"visible"},paint:{"fill-color":"#F0C480"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcp1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",504],layout:{visibility:"visible"},paint:{"fill-color":"#FED49B"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELcp2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",505],layout:{visibility:"visible"},paint:{"fill-color":"#F8A25D"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",506],layout:{visibility:"visible"},paint:{"fill-color":"#FECB19"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",507],layout:{visibility:"visible"},paint:{"fill-color":"#F0607C"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",507],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",507],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgbe/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",508],layout:{visibility:"visible"},paint:{"fill-color":"#EE4347"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgbe/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",508],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgbe/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgbe/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",508],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgbe/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgcb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",509],layout:{visibility:"visible"},paint:{"fill-color":"#FBBA68"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgcb_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",510],layout:{visibility:"visible"},paint:{"fill-color":"#FBBA68"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgcb_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",510],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgcb_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgci/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",511],layout:{visibility:"visible"},paint:{"fill-color":"#FCCA94"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgci/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",511],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgci/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgci/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",511],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgci/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgcs/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",512],layout:{visibility:"visible"},paint:{"fill-color":"#FED28D"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgcs/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",512],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgcs/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgcs/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",512],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgcs/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgcs_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",513],layout:{visibility:"visible"},paint:{"fill-color":"#FCBA53"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgcs_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",513],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgcs_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",514],layout:{visibility:"visible"},paint:{"fill-color":"#F9A624"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgs/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",515],layout:{visibility:"visible"},paint:{"fill-color":"#F2722A"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgs/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",515],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgs/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgs/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",515],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgs/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgv/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",516],layout:{visibility:"visible"},paint:{"fill-color":"#F17096"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgv/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",516],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgv/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELgv/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",516],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELgv/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELlc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",517],layout:{visibility:"visible"},paint:{"fill-color":"#FECC52"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELma",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",518],layout:{visibility:"visible"},paint:{"fill-color":"#FED394"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELmg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",519],layout:{visibility:"visible"},paint:{"fill-color":"#FED284"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELmgl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",520],layout:{visibility:"visible"},paint:{"fill-color":"#DAC386"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELmgl_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",521],layout:{visibility:"visible"},paint:{"fill-color":"#DAC386"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELmgl_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",521],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELmgl_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELmgt/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",522],layout:{visibility:"visible"},paint:{"fill-color":"#E9D558"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELmgt/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",522],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELmgt/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELmgt/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",522],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELmgt/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELmj",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",523],layout:{visibility:"visible"},paint:{"fill-color":"#B5CBB8"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELmv",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",524],layout:{visibility:"visible"},paint:{"fill-color":"#FCCA94"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELmv_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",525],layout:{visibility:"visible"},paint:{"fill-color":"#FCCA94"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELmv_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",525],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELmv_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",526],layout:{visibility:"visible"},paint:{"fill-color":"#FED77F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELp_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",527],layout:{visibility:"visible"},paint:{"fill-color":"#FED77F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELp_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",527],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELp_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELtc/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",528],layout:{visibility:"visible"},paint:{"fill-color":"#FCCBA0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELtc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",528],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELtc/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELtc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",528],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELtc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELtc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",528],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELtc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELtc_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",529],layout:{visibility:"visible"},paint:{"fill-color":"#FCCBA0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PELtc_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",529],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PELtc_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEOcgg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",530],layout:{visibility:"visible"},paint:{"fill-color":"#F9B284"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEOcgg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",530],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEOcgg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEOlg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",531],layout:{visibility:"visible"},paint:{"fill-color":"#F1CA7D"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPO",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",532],layout:{visibility:"visible"},paint:{"fill-color":"#FED429"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPag",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",533],layout:{visibility:"visible"},paint:{"fill-color":"#F0CC9F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPbb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",534],layout:{visibility:"visible"},paint:{"fill-color":"#E66872"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPbbca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",535],layout:{visibility:"visible"},paint:{"fill-color":"#E66872"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPbr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",536],layout:{visibility:"visible"},paint:{"fill-color":"#F0BF5E"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",537],layout:{visibility:"visible"},paint:{"fill-color":"#F0BF5E"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPc2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",538],layout:{visibility:"visible"},paint:{"fill-color":"#D8B695"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPc2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",538],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPc2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPcbr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",539],layout:{visibility:"visible"},paint:{"fill-color":"#E3C9B0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPcg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",540],layout:{visibility:"visible"},paint:{"fill-color":"#F0CC9F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPcg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",540],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPcg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPcgg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",541],layout:{visibility:"visible"},paint:{"fill-color":"#E98B6C"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPcgg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",541],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPcgg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPcggx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",542],layout:{visibility:"visible"},paint:{"fill-color":"#D96DA4"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPcggx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",542],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPcggx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPcl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",543],layout:{visibility:"visible"},paint:{"fill-color":"#D9B27A"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPcm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",544],layout:{visibility:"visible"},paint:{"fill-color":"#EEB887"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPcm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",544],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPcm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",545],layout:{visibility:"visible"},paint:{"fill-color":"#DCD483"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPga",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",546],layout:{visibility:"visible"},paint:{"fill-color":"#E3C9B0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgac",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",547],layout:{visibility:"visible"},paint:{"fill-color":"#F0BF5E"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgcl/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",548],layout:{visibility:"visible"},paint:{"fill-color":"#E3C9B0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgcl/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",548],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPgcl/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgcl/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",548],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPgcl/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",549],layout:{visibility:"visible"},paint:{"fill-color":"#D2BE5A"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgll",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",550],layout:{visibility:"visible"},paint:{"fill-color":"#FBAF2E"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",551],layout:{visibility:"visible"},paint:{"fill-color":"#D96DA4"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",551],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPgx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",551],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPgx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgxb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",552],layout:{visibility:"visible"},paint:{"fill-color":"#EA9985"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgxb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",552],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPgxb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgxb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",552],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPgxb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgxbl/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",553],layout:{visibility:"visible"},paint:{"fill-color":"#F58E78"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgxbl/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",553],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPgxbl/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgxbl/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",553],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPgxbl/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPgxl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",554],layout:{visibility:"visible"},paint:{"fill-color":"#F6ADC3"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",555],layout:{visibility:"visible"},paint:{"fill-color":"#DABA83"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPlca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",556],layout:{visibility:"visible"},paint:{"fill-color":"#DAC27F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPlg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",557],layout:{visibility:"visible"},paint:{"fill-color":"#E77B67"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPlg_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",558],layout:{visibility:"visible"},paint:{"fill-color":"#ECA673"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPlg_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",558],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPlg_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPlgc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",559],layout:{visibility:"visible"},paint:{"fill-color":"#FABD98"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPlggx",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",560],layout:{visibility:"visible"},paint:{"fill-color":"#F69781"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPlvg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",561],layout:{visibility:"visible"},paint:{"fill-color":"#F2D380"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",562],layout:{visibility:"visible"},paint:{"fill-color":"#D2AC3B"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPmgx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",563],layout:{visibility:"visible"},paint:{"fill-color":"#FEDF6C"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPmgx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",563],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPmgx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEPmgx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",563],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEPmgx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEbb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",564],layout:{visibility:"visible"},paint:{"fill-color":"#FDBE1F"}},{id:"Cartografia del Basament/Unitats geològiques:2/PEbb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",564],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PEbb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCas",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",565],layout:{visibility:"visible"},paint:{"fill-color":"#C8A02B"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCbrc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",566],layout:{visibility:"visible"},paint:{"fill-color":"#FED552"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCbrc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",566],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POCbrc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCcbr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",567],layout:{visibility:"visible"},paint:{"fill-color":"#F3C721"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCcc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",568],layout:{visibility:"visible"},paint:{"fill-color":"#FED552"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCcc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",568],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POCcc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCcg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",569],layout:{visibility:"visible"},paint:{"fill-color":"#DCC158"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCcg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",569],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POCcg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCcg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",569],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POCcg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCcggx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",570],layout:{visibility:"visible"},paint:{"fill-color":"#FEDD0A"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCcggx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",570],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POCcggx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCcgl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",571],layout:{visibility:"visible"},paint:{"fill-color":"#F3C721"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCcgt",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",572],layout:{visibility:"visible"},paint:{"fill-color":"#EEA329"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCch/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",573],layout:{visibility:"visible"},paint:{"fill-color":"#F2C960"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCch/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",573],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POCch/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",574],layout:{visibility:"visible"},paint:{"fill-color":"#FEF7A3"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCgc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",575],layout:{visibility:"visible"},paint:{"fill-color":"#FED552"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCgc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",575],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POCgc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCgc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",575],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POCgc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCglr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",576],layout:{visibility:"visible"},paint:{"fill-color":"#FED552"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCgxl/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",577],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POCgxl/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCgxl/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",577],layout:{visibility:"visible"},paint:{"fill-color":"#E8CD57"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCgxl/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",577],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POCgxl/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POClc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",578],layout:{visibility:"visible"},paint:{"fill-color":"#F2C960"}},{id:"Cartografia del Basament/Unitats geològiques:2/POClc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",578],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POClc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POClg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",579],layout:{visibility:"visible"},paint:{"fill-color":"#F2C960"}},{id:"Cartografia del Basament/Unitats geològiques:2/POClga/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",580],layout:{visibility:"visible"},paint:{"fill-color":"#F2C960"}},{id:"Cartografia del Basament/Unitats geològiques:2/POClga/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",580],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POClga/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/POClga/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",580],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POClga/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/POClga/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",580],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POClga/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POClgc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",581],layout:{visibility:"visible"},paint:{"fill-color":"#FED552"}},{id:"Cartografia del Basament/Unitats geològiques:2/POClgc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",581],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POClgc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POClm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",582],layout:{visibility:"visible"},paint:{"fill-color":"#E7CE78"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCmg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",583],layout:{visibility:"visible"},paint:{"fill-color":"#DCC158"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCmg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",583],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POCmg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/POCmg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",583],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POCmg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1brg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",584],layout:{visibility:"visible"},paint:{"fill-color":"#F4D02D"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1cg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",585],layout:{visibility:"visible"},paint:{"fill-color":"#F4D02D"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1cg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",585],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR1cg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1cga/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",586],layout:{visibility:"visible"},paint:{"fill-color":"#DDB837"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1cga/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",586],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR1cga/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1cgl/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",587],layout:{visibility:"visible"},paint:{"fill-color":"#E3BFA4"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1cgl/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",587],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR1cgl/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1gl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",588],layout:{visibility:"visible"},paint:{"fill-color":"#CBE7D3"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1gtl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",589],layout:{visibility:"visible"},paint:{"fill-color":"#F0CB96"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1gx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",590],layout:{visibility:"visible"},paint:{"fill-color":"#8DA3D4"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1gx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",590],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR1gx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1gx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",590],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR1gx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1l",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",591],layout:{visibility:"visible"},paint:{"fill-color":"#CFE4AE"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1lag",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",592],layout:{visibility:"visible"},paint:{"fill-color":"#F4D02D"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1lg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",593],layout:{visibility:"visible"},paint:{"fill-color":"#F9CAD4"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1lgc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",594],layout:{visibility:"visible"},paint:{"fill-color":"#E2B6A0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1lgx",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",595],layout:{visibility:"visible"},paint:{"fill-color":"#EB9357"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1lu",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",596],layout:{visibility:"visible"},paint:{"fill-color":"#EBB1AB"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR1mlg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",597],layout:{visibility:"visible"},paint:{"fill-color":"#CED2AF"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2agx",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",598],layout:{visibility:"visible"},paint:{"fill-color":"#FEE081"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2agx_gx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",599],layout:{visibility:"visible"},paint:{"fill-color":"#FEE081"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2agx_gx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",599],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR2agx_gx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2agx_gx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",599],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR2agx_gx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2cg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",600],layout:{visibility:"visible"},paint:{"fill-color":"#B98ABE"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2cg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",600],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR2cg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2cg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",600],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR2cg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2cgg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",601],layout:{visibility:"visible"},paint:{"fill-color":"#E6B22A"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2cgg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",601],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR2cgg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2cggb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",602],layout:{visibility:"visible"},paint:{"fill-color":"#EEE71A"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2cggb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",602],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR2cggb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2cgq",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",603],layout:{visibility:"visible"},paint:{"fill-color":"#F2C855"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2cm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",604],layout:{visibility:"visible"},paint:{"fill-color":"#D0B683"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2gl/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",605],layout:{visibility:"visible"},paint:{"fill-color":"#D2B350"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2gl/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",605],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR2gl/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2glv",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",606],layout:{visibility:"visible"},paint:{"fill-color":"#E7C456"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2glv_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",607],layout:{visibility:"visible"},paint:{"fill-color":"#E7C456"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2glv_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",607],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR2glv_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2gm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",608],layout:{visibility:"visible"},paint:{"fill-color":"#F2D391"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2gx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",609],layout:{visibility:"visible"},paint:{"fill-color":"#D4B5CD"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2gx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",609],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR2gx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2gx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",609],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR2gx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2gxl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",610],layout:{visibility:"visible"},paint:{"fill-color":"#FEDF6C"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2gxs/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",611],layout:{visibility:"visible"},paint:{"fill-color":"#FEDF6C"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2gxs/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",611],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR2gxs/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2gxs/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",611],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR2gxs/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2l",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",612],layout:{visibility:"visible"},paint:{"fill-color":"#E3B590"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR2mca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",613],layout:{visibility:"visible"},paint:{"fill-color":"#E5D099"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3alg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",614],layout:{visibility:"visible"},paint:{"fill-color":"#FECB38"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3ca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",615],layout:{visibility:"visible"},paint:{"fill-color":"#DCDD97"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3ca1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",616],layout:{visibility:"visible"},paint:{"fill-color":"#AB98A5"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3ca3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",617],layout:{visibility:"visible"},paint:{"fill-color":"#B5BBB7"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3cb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",618],layout:{visibility:"visible"},paint:{"fill-color":"#FECB38"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3cb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",618],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR3cb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3ccg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",619],layout:{visibility:"visible"},paint:{"fill-color":"#FECB38"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3ccg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",619],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR3ccg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3cgg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",620],layout:{visibility:"visible"},paint:{"fill-color":"#FECB38"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3cgg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",620],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR3cgg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3g",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",621],layout:{visibility:"visible"},paint:{"fill-color":"#F9A744"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3gl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",622],layout:{visibility:"visible"},paint:{"fill-color":"#FEF343"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3glc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",623],layout:{visibility:"visible"},paint:{"fill-color":"#FECB38"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3glc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",623],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR3glc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3glc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",623],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/POR3glc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3glv",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",624],layout:{visibility:"visible"},paint:{"fill-color":"#FEE5C2"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3gtl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",625],layout:{visibility:"visible"},paint:{"fill-color":"#EB9D7F"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3gx",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",626],layout:{visibility:"visible"},paint:{"fill-color":"#D19BC6"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3l",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",627],layout:{visibility:"visible"},paint:{"fill-color":"#F0CA8E"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3lgx",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",628],layout:{visibility:"visible"},paint:{"fill-color":"#DFD5E9"}},{id:"Cartografia del Basament/Unitats geològiques:2/POR3ll",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",629],layout:{visibility:"visible"},paint:{"fill-color":"#DA9E38"}},{id:"Cartografia del Basament/Unitats geològiques:2/PORgac/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",630],layout:{visibility:"visible"},paint:{"fill-color":"#E8C332"}},{id:"Cartografia del Basament/Unitats geològiques:2/PORgac/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",630],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PORgac/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/POc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",631],layout:{visibility:"visible"},paint:{"fill-color":"#F2DEA6"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPDcg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",632],layout:{visibility:"visible"},paint:{"fill-color":"#9FBCD8"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPEp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",633],layout:{visibility:"visible"},paint:{"fill-color":"#F79B54"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPRgxb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",634],layout:{visibility:"visible"},paint:{"fill-color":"#F7A085"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPRgxb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",634],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PPRgxb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPRgxb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",634],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PPRgxb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPTm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",635],layout:{visibility:"visible"},paint:{"fill-color":"#FBBC8C"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPTmb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",636],layout:{visibility:"visible"},paint:{"fill-color":"#F58E78"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPag",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",637],layout:{visibility:"visible"},paint:{"fill-color":"#F69781"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPag_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",638],layout:{visibility:"visible"},paint:{"fill-color":"#F69781"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPag_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",638],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PPag_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPag_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",639],layout:{visibility:"visible"},paint:{"fill-color":"#F69781"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPag_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",639],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PPag_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPag_gx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",640],layout:{visibility:"visible"},paint:{"fill-color":"#F69781"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPag_gx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",640],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PPag_gx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPag_gx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",640],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/PPag_gx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPcg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",641],layout:{visibility:"visible"},paint:{"fill-color":"#CBD6EC"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPdg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",642],layout:{visibility:"visible"},paint:{"fill-color":"#F69D86"}},{id:"Cartografia del Basament/Unitats geològiques:2/PPlgg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",643],layout:{visibility:"visible"},paint:{"fill-color":"#F9BEB7"}},{id:"Cartografia del Basament/Unitats geològiques:2/PeClg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",644],layout:{visibility:"visible"},paint:{"fill-color":"#D69076"}},{id:"Cartografia del Basament/Unitats geològiques:2/PeTg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",645],layout:{visibility:"visible"},paint:{"fill-color":"#E66878"}},{id:"Cartografia del Basament/Unitats geològiques:2/Prls",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",646],layout:{visibility:"visible"},paint:{"fill-color":"#004B83"}},{id:"Cartografia del Basament/Unitats geològiques:2/SDcl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",647],layout:{visibility:"visible"},paint:{"fill-color":"#C78E88"}},{id:"Cartografia del Basament/Unitats geològiques:2/SDcr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",648],layout:{visibility:"visible"},paint:{"fill-color":"#B89585"}},{id:"Cartografia del Basament/Unitats geològiques:2/Sido",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",649],layout:{visibility:"visible"},paint:{"fill-color":"#689BD2"}},{id:"Cartografia del Basament/Unitats geològiques:2/Sili",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",650],layout:{visibility:"visible"},paint:{"fill-color":"#5488C7"}},{id:"Cartografia del Basament/Unitats geològiques:2/Sipca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",651],layout:{visibility:"visible"},paint:{"fill-color":"#8BABD9"}},{id:"Cartografia del Basament/Unitats geològiques:2/Sipg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",652],layout:{visibility:"visible"},paint:{"fill-color":"#B0B4DA"}},{id:"Cartografia del Basament/Unitats geològiques:2/Sipg_g/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",653],layout:{visibility:"visible"},paint:{"fill-color":"#B0B4DA"}},{id:"Cartografia del Basament/Unitats geològiques:2/Sipg_g/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",653],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Sipg_g/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Sipn",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",654],layout:{visibility:"visible"},paint:{"fill-color":"#926FB0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Siva",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",655],layout:{visibility:"visible"},paint:{"fill-color":"#ACB697"}},{id:"Cartografia del Basament/Unitats geològiques:2/Smm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",656],layout:{visibility:"visible"},paint:{"fill-color":"#DCE8A4"}},{id:"Cartografia del Basament/Unitats geològiques:2/Smm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",656],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Smm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Smm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",656],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Smm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Smqm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",657],layout:{visibility:"visible"},paint:{"fill-color":"#C3DFA5"}},{id:"Cartografia del Basament/Unitats geològiques:2/Smqm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",657],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Smqm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Smqm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",657],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Smqm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/TLCcd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",658],layout:{visibility:"visible"},paint:{"fill-color":"#E8AACD"}},{id:"Cartografia del Basament/Unitats geològiques:2/TMLcd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",659],layout:{visibility:"visible"},paint:{"fill-color":"#EAC6DE"}},{id:"Cartografia del Basament/Unitats geològiques:2/TNCmdk",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",660],layout:{visibility:"visible"},paint:{"fill-color":"#C8C4D8"}},{id:"Cartografia del Basament/Unitats geològiques:2/TRc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",661],layout:{visibility:"visible"},paint:{"fill-color":"#C7A1CB"}},{id:"Cartografia del Basament/Unitats geològiques:2/TSCNmdk",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",662],layout:{visibility:"visible"},paint:{"fill-color":"#C8C4D8"}},{id:"Cartografia del Basament/Unitats geològiques:2/TSNgxk/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",663],layout:{visibility:"visible"},paint:{"fill-color":"#FAD5E5"}},{id:"Cartografia del Basament/Unitats geològiques:2/TSNgxk/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",663],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/TSNgxk/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/TSNgxk/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",663],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/TSNgxk/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/TSNlk",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",664],layout:{visibility:"visible"},paint:{"fill-color":"#C9A9C7"}},{id:"Cartografia del Basament/Unitats geològiques:2/TSRc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",665],layout:{visibility:"visible"},paint:{"fill-color":"#C7A1CB"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",666],layout:{visibility:"visible"},paint:{"fill-color":"#D71B62"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tbb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",667],layout:{visibility:"visible"},paint:{"fill-color":"#D36579"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tcb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",668],layout:{visibility:"visible"},paint:{"fill-color":"#D36579"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tcb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",668],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Tcb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tgb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",669],layout:{visibility:"visible"},paint:{"fill-color":"#D36579"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tk",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",670],layout:{visibility:"visible"},paint:{"fill-color":"#F288B7"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tkd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",671],layout:{visibility:"visible"},paint:{"fill-color":"#DDA6CC"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tkl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",672],layout:{visibility:"visible"},paint:{"fill-color":"#F390AC"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tkl_gx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",673],layout:{visibility:"visible"},paint:{"fill-color":"#F390AC"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tkl_gx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",673],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Tkl_gx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tkl_gx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",673],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Tkl_gx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tkld",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",674],layout:{visibility:"visible"},paint:{"fill-color":"#D189BA"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tkld_gx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",675],layout:{visibility:"visible"},paint:{"fill-color":"#D189BA"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tkld_gx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",675],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Tkld_gx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tkld_gx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",675],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Tkld_gx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tklg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",676],layout:{visibility:"visible"},paint:{"fill-color":"#D4B5C6"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tklg_gx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",677],layout:{visibility:"visible"},paint:{"fill-color":"#D4B5C6"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tklg_gx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",677],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Tklg_gx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tklg_gx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",677],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Tklg_gx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tlb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",678],layout:{visibility:"visible"},paint:{"fill-color":"#D6A290"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",679],layout:{visibility:"visible"},paint:{"fill-color":"#F6ACBC"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tm1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",680],layout:{visibility:"visible"},paint:{"fill-color":"#F7C1D9"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tm2/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",681],layout:{visibility:"visible"},paint:{"fill-color":"#E896AB"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tm2/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",681],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Tm2/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tm2_gx/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",682],layout:{visibility:"visible"},paint:{"fill-color":"#E896AB"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tm2_gx/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",682],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Tm2_gx/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tm2_gx/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",682],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Tm2_gx/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tm3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",683],layout:{visibility:"visible"},paint:{"fill-color":"#F4A4C7"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tmk",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",684],layout:{visibility:"visible"},paint:{"fill-color":"#E7A0C7"}},{id:"Cartografia del Basament/Unitats geològiques:2/Tok",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",685],layout:{visibility:"visible"},paint:{"fill-color":"#5F795C"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",686],layout:{visibility:"visible"},paint:{"fill-color":"#7D80BC"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOcg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",687],layout:{visibility:"visible"},paint:{"fill-color":"#B693B9"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOcg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",687],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/ZOcg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOcg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",687],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/ZOcg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOcn",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",688],layout:{visibility:"visible"},paint:{"fill-color":"#85ADDB"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOcs",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",689],layout:{visibility:"visible"},paint:{"fill-color":"#8ECCD0"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOdc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",690],layout:{visibility:"visible"},paint:{"fill-color":"#C7C4E2"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOgg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",691],layout:{visibility:"visible"},paint:{"fill-color":"#B693B9"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOgp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",692],layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOgq/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",693],layout:{visibility:"visible"},paint:{"fill-color":"#C7C4E2"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOgq/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",693],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/ZOgq/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOpn",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",694],layout:{visibility:"visible"},paint:{"fill-color":"#939ECF"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOsb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",695],layout:{visibility:"visible"},paint:{"fill-color":"#1592CA"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOtr/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",696],layout:{visibility:"visible"},paint:{"fill-color":"#DEA6BB"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOtr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",696],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/ZOtr/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOtr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",696],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/ZOtr/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOva/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",697],layout:{visibility:"visible"},paint:{"fill-color":"#BBAFD6"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOva/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",697],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/ZOva/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOva/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",697],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/ZOva/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOvb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",698],layout:{visibility:"visible"},paint:{"fill-color":"#659282"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOvb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",698],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/ZOvb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/ZOvb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",698],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/ZOvb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Zcb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",699],layout:{visibility:"visible"},paint:{"fill-color":"#918CC3"}},{id:"Cartografia del Basament/Unitats geològiques:2/Zcb_d/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",700],layout:{visibility:"visible"},paint:{"fill-color":"#918CC3"}},{id:"Cartografia del Basament/Unitats geològiques:2/Zcb_d/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",700],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/Zcb_d/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/Zdc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",701],layout:{visibility:"visible"},paint:{"fill-color":"#B7AED6"}},{id:"Cartografia del Basament/Unitats geològiques:2/Zglc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",702],layout:{visibility:"visible"},paint:{"fill-color":"#B19BC9"}},{id:"Cartografia del Basament/Unitats geològiques:2/ah",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",703],layout:{visibility:"visible"},paint:{"fill-color":"#E8E4C4"}},{id:"Cartografia del Basament/Unitats geològiques:2/cf/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",704],layout:{visibility:"visible"},paint:{"fill-color":"#00A490"}},{id:"Cartografia del Basament/Unitats geològiques:2/cf/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",704],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/cf/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/es/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",705],layout:{visibility:"visible"},paint:{"fill-color":"#C6BB6F"}},{id:"Cartografia del Basament/Unitats geològiques:2/es/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",705],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/es/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/es/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",705],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/es/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/ff",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",706],layout:{visibility:"visible"},paint:{"fill-color":"#A7988E"}},{id:"Cartografia del Basament/Unitats geològiques:2/fhm/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",707],layout:{visibility:"visible"},paint:{"fill-color":"#FEF100"}},{id:"Cartografia del Basament/Unitats geològiques:2/fhm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",707],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/fhm/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/fhm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",707],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/fhm/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/fq",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",708],layout:{visibility:"visible"},paint:{"fill-color":"#FEF100"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMca/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",709],layout:{visibility:"visible"},paint:{"fill-color":"#25ACAE"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",709],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_CaMca/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",709],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_CaMca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMcg/5",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",710],layout:{visibility:"visible"},paint:{"fill-color":"#A2A38A"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMcg/4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",710],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_CaMcg/4"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMcg/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",710],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_CaMcg/3"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMcg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",710],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_CaMcg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMcg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",710],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_CaMcg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMli/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",711],layout:{visibility:"visible"},paint:{"fill-color":"#008BB3"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMli/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",711],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_CaMli/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMli/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",711],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_CaMli/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMp/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",712],layout:{visibility:"visible"},paint:{"fill-color":"#E8D782"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",712],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_CaMp/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",712],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_CaMp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMpg/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",713],layout:{visibility:"visible"},paint:{"fill-color":"#B9B07E"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMpg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",713],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_CaMpg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_CaMpg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",713],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_CaMpg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Cacgg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",714],layout:{visibility:"visible"},paint:{"fill-color":"#A1B290"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Cacgg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",714],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Cacgg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Cacgg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",714],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Cacgg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Decap/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",715],layout:{visibility:"visible"},paint:{"fill-color":"#DF8A80"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Decap/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",715],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Decap/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Decap/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",715],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Decap/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Gnlg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",716],layout:{visibility:"visible"},paint:{"fill-color":"#FABEA8"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Gnlg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",716],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Gnlg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Gnlg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",716],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Gnlg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_OrSlnc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",717],layout:{visibility:"visible"},paint:{"fill-color":"#9EA5B5"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_OrSlnc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",717],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_OrSlnc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_OrSlnc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",717],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_OrSlnc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orcg/4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",718],layout:{visibility:"visible"},paint:{"fill-color":"#B98ABE"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orcg/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",718],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orcg/3"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orcg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",718],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orcg/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orcg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",718],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orcg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orcg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",718],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orcg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Ord/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",719],layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Ord/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",719],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Ord/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Ord/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",719],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Ord/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Ord_c/4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",720],layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Ord_c/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",720],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Ord_c/3"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Ord_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",720],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Ord_c/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Ord_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",720],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Ord_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Ordv/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",721],layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Ordv/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",721],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Ordv/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Ordv/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",721],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Ordv/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orgn/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",722],layout:{visibility:"visible"},paint:{"fill-color":"#FAD5E5"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orgn/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",722],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orgn/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orgn/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",722],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orgn/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orlc/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",723],layout:{visibility:"visible"},paint:{"fill-color":"#C1949B"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orlc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",723],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orlc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orlc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",723],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orlc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orln/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",724],layout:{visibility:"visible"},paint:{"fill-color":"#B3ACC4"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orln/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",724],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orln/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orln/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",724],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orln/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orpca/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",725],layout:{visibility:"visible"},paint:{"fill-color":"#D8EBD3"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orpca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",725],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orpca/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orpca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",725],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orpca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orpg/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",726],layout:{visibility:"visible"},paint:{"fill-color":"#E2C0BB"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orpg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",726],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orpg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orpg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",726],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orpg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orpn/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",727],layout:{visibility:"visible"},paint:{"fill-color":"#BF859F"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orpn/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",727],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orpn/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orpn/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",727],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orpn/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Ort/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",728],layout:{visibility:"visible"},paint:{"fill-color":"#A9B7AF"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Ort/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",728],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Ort/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Ort/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",728],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Ort/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orva/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",729],layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orva/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",729],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orva/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orva/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",729],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orva/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orvi/4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",730],layout:{visibility:"visible"},paint:{"fill-color":"#A9B7AF"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orvi/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",730],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orvi/3"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orvi/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",730],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orvi/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orvi/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",730],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orvi/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Orvi/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",730],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Orvi/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_SDCagp/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",731],layout:{visibility:"visible"},paint:{"fill-color":"#B9B184"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_SDCagp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",731],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_SDCagp/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_SDCagp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",731],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_SDCagp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_SDCagp_ca/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",732],layout:{visibility:"visible"},paint:{"fill-color":"#B9B184"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_SDCagp_ca/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",732],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_SDCagp_ca/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_SDCagp_ca/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",732],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_SDCagp_ca/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_SDCagp_ca/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",732],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_SDCagp_ca/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_SDcl/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",733],layout:{visibility:"visible"},paint:{"fill-color":"#C29386"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_SDcl/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",733],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_SDcl/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_SDcl/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",733],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_SDcl/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Sili/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",734],layout:{visibility:"visible"},paint:{"fill-color":"#5488C7"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Sili/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",734],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Sili/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Sili/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",734],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Sili/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Sipn/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",735],layout:{visibility:"visible"},paint:{"fill-color":"#926FB0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Sipn/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",735],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Sipn/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Siva/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",736],layout:{visibility:"visible"},paint:{"fill-color":"#ACB697"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Siva/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",736],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Siva/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Siva/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",736],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Siva/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZObv/4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",737],layout:{visibility:"visible"},paint:{"fill-color":"#E9B6CD"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZObv/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",737],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZObv/3"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZObv/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",737],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZObv/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZObv/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",737],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZObv/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZObv/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",737],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZObv/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",738],layout:{visibility:"visible"},paint:{"fill-color":"#7D80BC"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",738],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",738],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOcn/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",739],layout:{visibility:"visible"},paint:{"fill-color":"#85ADDB"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOcn/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",739],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOcn/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOcn/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",739],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOcn/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOcs/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",740],layout:{visibility:"visible"},paint:{"fill-color":"#8ECCD0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOcs/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",740],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOcs/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOcs/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",740],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOcs/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOdc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",741],layout:{visibility:"visible"},paint:{"fill-color":"#C7C4E2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOdc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",741],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOdc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOdc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",741],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOdc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOgg/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",742],layout:{visibility:"visible"},paint:{"fill-color":"#B693B9"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOgg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",742],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOgg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOgg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",742],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOgg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOgp/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",743],layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOgp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",743],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOgp/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOgp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",743],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOgp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOgq/4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",744],layout:{visibility:"visible"},paint:{"fill-color":"#C7C4E2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOgq/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",744],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOgq/3"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOgq/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",744],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOgq/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOgq/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",744],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOgq/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOpn/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",745],layout:{visibility:"visible"},paint:{"fill-color":"#939ECF"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOpn/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",745],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOpn/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOpn/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",745],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOpn/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOsb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",746],layout:{visibility:"visible"},paint:{"fill-color":"#1592CA"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOsb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",746],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOsb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOsb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",746],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOsb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOva/4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",747],layout:{visibility:"visible"},paint:{"fill-color":"#BBAFD6"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOva/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",747],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOva/3"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOva/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",747],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOva/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOva/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",747],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOva/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_ZOva/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",747],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_ZOva/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Zcb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",748],layout:{visibility:"visible"},paint:{"fill-color":"#918CC3"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Zcb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",748],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Zcb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Zcb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",748],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Zcb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Zcb_d/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",749],layout:{visibility:"visible"},paint:{"fill-color":"#918CC3"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Zcb_d/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",749],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Zcb_d/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Zcb_d/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",749],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Zcb_d/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Zcb_d/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",749],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Zcb_d/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Zglc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",750],layout:{visibility:"visible"},paint:{"fill-color":"#B19BC9"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Zglc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",750],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Zglc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mc_Zglc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",750],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mc_Zglc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcg_Ordv/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",751],layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcg_Ordv/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",751],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcg_Ordv/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcg_Orlc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",752],layout:{visibility:"visible"},paint:{"fill-color":"#C1949B"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcg_Orlc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",752],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcg_Orlc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcg_Orln/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",753],layout:{visibility:"visible"},paint:{"fill-color":"#B3ACC4"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcg_Orln/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",753],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcg_Orln/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcg_Orva/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",754],layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcg_Orva/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",754],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcg_Orva/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcg_Orva/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",754],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcg_Orva/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcg_Orva/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",754],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcg_Orva/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcg_ZOgp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",755],layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcg_ZOgp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",755],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcg_ZOgp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcr_Gnlg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",756],layout:{visibility:"visible"},paint:{"fill-color":"#F7BAD4"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcr_Gnlg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",756],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcr_Gnlg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcr_Gnlg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",756],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcr_Gnlg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcr_ZOc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",757],layout:{visibility:"visible"},paint:{"fill-color":"#7D80BC"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcr_ZOc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",757],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcr_ZOc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcr_ZOc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",757],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcr_ZOc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcr_ZOgq/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",758],layout:{visibility:"visible"},paint:{"fill-color":"#C7C4E2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcr_ZOgq/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",758],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcr_ZOgq/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcr_ZOgq/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",758],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcr_ZOgq/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcr_ZOgq/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",758],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcr_ZOgq/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcrac_ZOgp/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",759],layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcrac_ZOgp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",759],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcrac_ZOgp/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcrac_ZOgp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",759],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcrac_ZOgp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcrb_Ordv/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",760],layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcrb_Ordv/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",760],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcrb_Ordv/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcrb_Ordv/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",760],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcrb_Ordv/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcrs_ZOgp/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",761],layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcrs_ZOgp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",761],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcrs_ZOgp/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mcrs_ZOgp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",761],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mcrs_ZOgp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/min/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",762],layout:{visibility:"visible"},paint:{"fill-color":"#A96AAB"}},{id:"Cartografia del Basament/Unitats geològiques:2/min/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",762],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/min/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mr_Gnlg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",763],layout:{visibility:"visible"},paint:{"fill-color":"#F7BAD4"}},{id:"Cartografia del Basament/Unitats geològiques:2/mr_Gnlg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",763],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mr_Gnlg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mr_Orgq/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",764],layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Cartografia del Basament/Unitats geològiques:2/mr_Orgq/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",764],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mr_Orgq/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mr_ZOc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",765],layout:{visibility:"visible"},paint:{"fill-color":"#7D80BC"}},{id:"Cartografia del Basament/Unitats geològiques:2/mr_ZOc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",765],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mr_ZOc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mr_ZOgq/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",766],layout:{visibility:"visible"},paint:{"fill-color":"#C7C4E2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mr_ZOgq/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",766],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mr_ZOgq/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mr_ZOgq/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",766],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mr_ZOgq/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mr_ZOvb/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",767],layout:{visibility:"visible"},paint:{"fill-color":"#659282"}},{id:"Cartografia del Basament/Unitats geològiques:2/mr_ZOvb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",767],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mr_ZOvb/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mr_ZOvb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",767],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mr_ZOvb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mr_ZOvb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",767],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mr_ZOvb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Gnlp/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",768],layout:{visibility:"visible"},paint:{"fill-color":"#F4A4C7"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Gnlp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",768],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_Gnlp/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Gnlp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",768],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_Gnlp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Ord/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",769],layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Ord/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",769],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_Ord/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Ord/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",769],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_Ord/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Ordv/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",770],layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Ordv/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",770],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_Ordv/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Ordv/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",770],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_Ordv/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Orva/4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",771],layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Orva/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",771],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_Orva/3"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Orva/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",771],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_Orva/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Orva/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",771],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_Orva/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_Orva/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",771],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_Orva/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOcs/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",772],layout:{visibility:"visible"},paint:{"fill-color":"#8ECCD0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOcs/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",772],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOcs/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOcs/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",772],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOcs/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOgg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",773],layout:{visibility:"visible"},paint:{"fill-color":"#B693B9"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOgg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",773],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOgg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOgg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",773],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOgg/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOgp/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",774],layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOgp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",774],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOgp/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOgp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",774],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOgp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOpn/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",775],layout:{visibility:"visible"},paint:{"fill-color":"#939ECF"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOpn/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",775],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOpn/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOpn/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",775],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOpn/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOqr/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",776],layout:{visibility:"visible"},paint:{"fill-color":"#7F79B8"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOqr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",776],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOqr/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOqr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",776],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOqr/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOsb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",777],layout:{visibility:"visible"},paint:{"fill-color":"#159DD8"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOsb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",777],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOsb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOsb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",777],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOsb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOvb/4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",778],layout:{visibility:"visible"},paint:{"fill-color":"#659282"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOvb/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",778],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOvb/3"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOvb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",778],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOvb/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOvb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",778],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOvb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrac_ZOvb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",778],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrac_ZOvb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_Ord/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",779],layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_Ord/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",779],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrb_Ord/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_Ordv/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",780],layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_Ordv/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",780],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrb_Ordv/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_Ordv_c/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",781],layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_Ordv_c/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",781],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrb_Ordv_c/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_Ordv_c/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",781],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrb_Ordv_c/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_Orva/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",782],layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_Orva/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",782],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrb_Orva/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",783],layout:{visibility:"visible"},paint:{"fill-color":"#7D80BC"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",783],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrb_ZOc/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOgp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",784],layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOgp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",784],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrb_ZOgp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOpn/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",785],layout:{visibility:"visible"},paint:{"fill-color":"#9A72B1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOpn/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",785],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrb_ZOpn/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOqr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",786],layout:{visibility:"visible"},paint:{"fill-color":"#7F79B8"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOqr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",786],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrb_ZOqr/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOsb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",787],layout:{visibility:"visible"},paint:{"fill-color":"#1592CA"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOsb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",787],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrb_ZOsb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOvb/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",788],layout:{visibility:"visible"},paint:{"fill-color":"#659282"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOvb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",788],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrb_ZOvb/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOvb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",788],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrb_ZOvb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrb_ZOvb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",788],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrb_ZOvb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Ggd/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",789],layout:{visibility:"visible"},paint:{"fill-color":"#EC187E"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Ggd/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",789],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_Ggd/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Ggd/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",789],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_Ggd/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Ggd/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",789],layout:{visibility:"visible"},paint:{"fill-color":"#009150"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Ggdbi/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",790],layout:{visibility:"visible"},paint:{"fill-color":"#F05E74"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Ggdbi/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",790],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_Ggdbi/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Ggdbi/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",790],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_Ggdbi/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Ggdbi/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",790],layout:{visibility:"visible"},paint:{"fill-color":"#009150"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Ggmc/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",791],layout:{visibility:"visible"},paint:{"fill-color":"#EE462C"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Ggmc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",791],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_Ggmc/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Ggmc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",791],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_Ggmc/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Ggmc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",791],layout:{visibility:"visible"},paint:{"fill-color":"#009150"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Glg/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",792],layout:{visibility:"visible"},paint:{"fill-color":"#FED413"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Glg/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",792],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_Glg/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Glg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",792],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_Glg/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Glg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",792],layout:{visibility:"visible"},paint:{"fill-color":"#009150"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Gpgr/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",793],layout:{visibility:"visible"},paint:{"fill-color":"#F48684"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Gpgr/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",793],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_Gpgr/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Gpgr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",793],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_Gpgr/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Gpgr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",793],layout:{visibility:"visible"},paint:{"fill-color":"#009150"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Gt/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",794],layout:{visibility:"visible"},paint:{"fill-color":"#D15B94"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Gt/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",794],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_Gt/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Gt/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",794],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_Gt/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_Gt/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",794],layout:{visibility:"visible"},paint:{"fill-color":"#009150"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_ZOgp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",795],layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_ZOgp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",795],layout:{visibility:"visible"},paint:{"fill-color":"#009150"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_mc_Ord/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",796],layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_mc_Ord/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",796],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_mc_Ord/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_mc_Ord/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",796],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_mc_Ord/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_mc_Ord/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",796],layout:{visibility:"visible"},paint:{"fill-color":"#009150"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_mc_ZOgp/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",797],layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_mc_ZOgp/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",797],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_mc_ZOgp/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_mc_ZOgp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",797],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_mc_ZOgp/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_mc_ZOgp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",797],layout:{visibility:"visible"},paint:{"fill-color":"#009150"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_mc_ZOpn/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",798],layout:{visibility:"visible"},paint:{"fill-color":"#939ECF"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_mc_ZOpn/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",798],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_mc_ZOpn/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_mc_ZOpn/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",798],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mre_mc_ZOpn/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mre_mc_ZOpn/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",798],layout:{visibility:"visible"},paint:{"fill-color":"#009150"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrmg_ZOgp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",799],layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrmg_ZOgp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",799],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrmg_ZOgp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrs_Ordv/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",800],layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrs_Ordv/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",800],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrs_Ordv/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrs_ZOgp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",801],layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrs_ZOgp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",801],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrs_ZOgp/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrs_ZOqr/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",802],layout:{visibility:"visible"},paint:{"fill-color":"#7F79B8"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrs_ZOqr/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",802],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrs_ZOqr/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrs_ZOsb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",803],layout:{visibility:"visible"},paint:{"fill-color":"#1592CA"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrs_ZOsb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",803],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrs_ZOsb/0"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrs_ZOvb/3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",804],layout:{visibility:"visible"},paint:{"fill-color":"#659282"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrs_ZOvb/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",804],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrs_ZOvb/2"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrs_ZOvb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",804],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrs_ZOvb/1"}},{id:"Cartografia del Basament/Unitats geològiques:2/mrs_ZOvb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",filter:["==","_symbol",804],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Basament/Unitats geològiques:2/mrs_ZOvb/0"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4101",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",0],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4102",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",1],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4105/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",2],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4105/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",2],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4105/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4106/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",3],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4106/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",3],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4106/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4108/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",4],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#ED262D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4108/0",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",4],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#797B7D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4201/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",5],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4201/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",5],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4201/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4202/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",6],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4202/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",6],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4202/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4204/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",7],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#ED262D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4204/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",7],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#797B7D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4204/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",7],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4204/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#797B7D"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4301/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",8],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4301/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",8],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4301/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4302/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",9],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4302/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",9],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4302/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4304/3",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",10],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#ED262D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4304/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",10],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#797B7D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4304/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",10],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4304/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#797B7D"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4401/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",11],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4401/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",11],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4401/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4402/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",12],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4402/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",12],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4402/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4404/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",13],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#ED262D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4404/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",13],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#797B7D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4404/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",13],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4404/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#797B7D"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4501/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",14],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4501/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",14],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4501/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4502/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",15],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4502/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",15],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4502/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4504/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",16],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4504/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",16],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4504/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4505/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",17],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4505/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",17],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4505/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4601/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",18],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4601/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",18],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4601/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4601/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",18],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4601/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4602/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",19],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4602/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",19],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4602/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4602/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",19],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4602/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4604/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",20],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4604/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",20],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4604/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4604/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",20],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4604/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4605/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",21],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4605/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",21],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4605/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4605/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",21],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4605/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4607/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",22],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4607/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",22],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4607/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4607/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",22],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4607/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4608/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",23],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4608/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",23],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4608/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4608/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",23],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4608/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4617/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",24],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4617/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",24],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4617/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4617/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",24],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4617/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/4701",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",25],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#009150","line-width":1.06667}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5403",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",26],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5403","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5501/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",27],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5501/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",27],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5501/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5502/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",28],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#5C5D5E","line-dasharray":[31.8375,14.15],"line-width":1.06667}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5502/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",28],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5502/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5504/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",29],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5504/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",29],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5504/0","symbol-spacing":49.0533,"icon-offset":[0,1.33333],"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5505/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",30],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[31.8375,14.15],"line-width":1.06667}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5505/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",30],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5505/0","symbol-spacing":49.0533,"icon-offset":[0,1.33333],"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5507/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",31],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5507/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",31],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5507/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5508/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",32],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[31.8375,14.15],"line-width":1.06667}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5508/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",32],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5508/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5510/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",33],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5510/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",33],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5510/0","symbol-spacing":49.0533,"icon-offset":[0,1.33333],"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5511/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",34],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[31.8375,14.15],"line-width":1.06667}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5511/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",34],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5511/0","symbol-spacing":49.0533,"icon-offset":[0,1.33333],"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5513/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",35],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-width":1.32283}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5513/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",35],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5513/0","icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5515/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",36],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5515/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",36],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5515/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5516/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",37],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[31.8375,14.15],"line-width":1.06667}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5516/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",37],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5516/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5518/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",38],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5518/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",38],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101/5518/0","symbol-spacing":49.0533,"icon-offset":[0,10.6667],"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101_5513",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101_5513",minzoom:12.53,layout:{visibility:"visible","icon-image":"Cartografia del Basament/Falles i plecs/gt125mv10sh0ffl1r010_202101_5513","icon-rotate":{property:"NorthAzimu",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0},paint:{}},{id:"Cartografia del Basament/Contactes del basament/3101",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3102",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",1],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[2.79986,2.79986],"line-width":.94488}},{id:"Cartografia del Basament/Contactes del basament/3103",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",2],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3104",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",3],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3105",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",4],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3106",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",5],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3110",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",6],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#797B7D","line-width":1.13386}},{id:"Cartografia del Basament/Contactes del basament/3201",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",7],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#0357A0","line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3202",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",8],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#0357A0","line-dasharray":[13.97,6.98501],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3203",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",9],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#0357A0","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3204",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",10],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#0357A0","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3206",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",11],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#0357A0","line-dasharray":[3.49251,3.49251],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3301",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",12],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#009F81","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3303",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",13],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#DF252B","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3310",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",14],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#009F81","line-dasharray":[6.98501,1.74625],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3401",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",15],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[3.49251,3.49251],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3402",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",16],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#772274","line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3403",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",17],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#772274","line-dasharray":[3.49251,3.49251],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3404",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",18],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#772274","line-dasharray":[6.98501,6.98501],"line-width":.755904}},{id:"Cartografia del Basament/Contactes del basament/3602",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",19],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Cartografia del Basament/Contactes del basament/3603",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",20],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[31.8375,14.15],"line-width":1.06667}},{id:"Cartografia del Basament/Contactes del basament/4801/1",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",21],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.33333}},{id:"Cartografia del Basament/Contactes del basament/4801/0",type:"symbol",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",21],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Contactes del basament/4801/0","symbol-spacing":49.0533,"icon-offset":[0,-.333333],"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#2C292A"}},{id:"Cartografia del Basament/Contactes del basament/4805/1",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",22],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":.666667}},{id:"Cartografia del Basament/Contactes del basament/4805/0",type:"symbol",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",22],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Basament/Contactes del basament/4805/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Basament/Contactes del basament/5101",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",23],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[113.2,14.15],"line-width":.266667}},{id:"Cartografia del Basament/Contactes del basament/5106",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",24],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[59.4,9.9],"line-width":.266667}},{id:"Cartografia del Basament/Contactes del basament/5450",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",25],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#6FCFF5","line-width":.266667}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHac",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",0],layout:{visibility:"visible"},paint:{"fill-color":"#DBD0CB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHac1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",1],layout:{visibility:"visible"},paint:{"fill-color":"#E3D7D2"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHap/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",2],layout:{visibility:"visible"},paint:{"fill-color":"#FEF697"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHap/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",2],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHap/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",3],layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHca",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",4],layout:{visibility:"visible"},paint:{"fill-color":"#BDD9DE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHcd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",5],layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHcd0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",6],layout:{visibility:"visible"},paint:{"fill-color":"#BCD1E2"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHcd1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",7],layout:{visibility:"visible"},paint:{"fill-color":"#BCC0D7"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHcl0'-1/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",8],layout:{visibility:"visible"},paint:{"fill-color":"#E0D2CE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHcl0'-1/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",8],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHcl0'-1/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHcl1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",9],layout:{visibility:"visible"},paint:{"fill-color":"#D6D8D2"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHcld",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",10],layout:{visibility:"visible"},paint:{"fill-color":"#F0EAD7"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHcs",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",11],layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHd/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",12],layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHd/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",12],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHd/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHde",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",13],layout:{visibility:"visible"},paint:{"fill-color":"#E2D3CE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHdes",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",14],layout:{visibility:"visible"},paint:{"fill-color":"#E2D3CE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHdh/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",15],layout:{visibility:"visible"},paint:{"fill-color":"#E6C8A6"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHdh/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",15],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHdh/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHdla/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",16],layout:{visibility:"visible"},paint:{"fill-color":"#FEE2B7"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHdla/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",16],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHdla/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHdlh/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",17],layout:{visibility:"visible"},paint:{"fill-color":"#FEEDD2"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHdlh/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",17],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHdlh/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHdmh/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",18],layout:{visibility:"visible"},paint:{"fill-color":"#F0DAC1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHdmh/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",18],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHdmh/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHea",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",19],layout:{visibility:"visible"},paint:{"fill-color":"#EFEFF0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHec",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",20],layout:{visibility:"visible"},paint:{"fill-color":"#E4DCC1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHeg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",21],layout:{visibility:"visible"},paint:{"fill-color":"#D5D7D8"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHes",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",22],layout:{visibility:"visible"},paint:{"fill-color":"#D6CFCD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHes1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",23],layout:{visibility:"visible"},paint:{"fill-color":"#FEEFD8"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHfv",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",24],layout:{visibility:"visible"},paint:{"fill-color":"#EFEBE0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHfv1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",25],layout:{visibility:"visible"},paint:{"fill-color":"#E3DCD2"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",26],layout:{visibility:"visible"},paint:{"fill-color":"#D5CAC3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHg1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",27],layout:{visibility:"visible"},paint:{"fill-color":"#C2C4C6"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHle",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",28],layout:{visibility:"visible"},paint:{"fill-color":"#E2D3CE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHles",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",29],layout:{visibility:"visible"},paint:{"fill-color":"#E2D3CE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHllf",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",30],layout:{visibility:"visible"},paint:{"fill-color":"#FEE3CD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHlr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",31],layout:{visibility:"visible"},paint:{"fill-color":"#EFEBE0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHm/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",32],layout:{visibility:"visible"},paint:{"fill-color":"#E0D2CE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHm/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",32],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHm/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHmd/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",33],layout:{visibility:"visible"},paint:{"fill-color":"#E0D2CE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHmd/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",33],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHmd/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",34],layout:{visibility:"visible"},paint:{"fill-color":"#ECE4E1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",34],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHp/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpa",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",35],layout:{visibility:"visible"},paint:{"fill-color":"#FEFBDF"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpa1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",36],layout:{visibility:"visible"},paint:{"fill-color":"#FEEEC6"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpd/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",37],layout:{visibility:"visible"},paint:{"fill-color":"#B5D5E5"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpd/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",37],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHpd/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpd0'",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",38],layout:{visibility:"visible"},paint:{"fill-color":"#FEE29D"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpd0'-1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",39],layout:{visibility:"visible"},paint:{"fill-color":"#FEE3AF"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpdo/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",40],layout:{visibility:"visible"},paint:{"fill-color":"#B5D5E5"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpdo/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",40],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHpdo/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpe/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",41],layout:{visibility:"visible"},paint:{"fill-color":"#C9E3EF"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpe/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",41],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHpe/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpef/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",42],layout:{visibility:"visible"},paint:{"fill-color":"#B5D5E5"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpef/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",42],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHpef/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",43],layout:{visibility:"visible"},paint:{"fill-color":"#FEF9C1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHpg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",43],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHpg/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHps/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",44],layout:{visibility:"visible"},paint:{"fill-color":"#FEF9C1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHps/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",44],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHps/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHt",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",45],layout:{visibility:"visible"},paint:{"fill-color":"#FEE1C9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHt0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",46],layout:{visibility:"visible"},paint:{"fill-color":"#FEFCE8"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHt0'",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",47],layout:{visibility:"visible"},paint:{"fill-color":"#FEFBD5"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHt1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",48],layout:{visibility:"visible"},paint:{"fill-color":"#F2F3C1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHtg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",49],layout:{visibility:"visible"},paint:{"fill-color":"#FEE8C7"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHtg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",49],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QHtg/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHtls",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",50],layout:{visibility:"visible"},paint:{"fill-color":"#EED7CE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHtr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",51],layout:{visibility:"visible"},paint:{"fill-color":"#E1F3FC"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHtr1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",52],layout:{visibility:"visible"},paint:{"fill-color":"#CCDDE6"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHts",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",53],layout:{visibility:"visible"},paint:{"fill-color":"#D5DDE4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHtsr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",54],layout:{visibility:"visible"},paint:{"fill-color":"#E2D3CE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHv0'",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",55],layout:{visibility:"visible"},paint:{"fill-color":"#FDE7DC"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QHv1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",56],layout:{visibility:"visible"},paint:{"fill-color":"#F2F3C1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHac",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",57],layout:{visibility:"visible"},paint:{"fill-color":"#DBC9C1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHacb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",58],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",59],layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHcd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",60],layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHcs",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",61],layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHdo",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",62],layout:{visibility:"visible"},paint:{"fill-color":"#FCE5E2"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHdt",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",63],layout:{visibility:"visible"},paint:{"fill-color":"#FBD3D2"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHe/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",64],layout:{visibility:"visible"},paint:{"fill-color":"#CBDEF2"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHe/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",64],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPHe/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHea",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",65],layout:{visibility:"visible"},paint:{"fill-color":"#E4DFCC"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHeg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",66],layout:{visibility:"visible"},paint:{"fill-color":"#BEC8CD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHes",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",67],layout:{visibility:"visible"},paint:{"fill-color":"#D6CFCD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHfv",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",68],layout:{visibility:"visible"},paint:{"fill-color":"#E3E6E0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",69],layout:{visibility:"visible"},paint:{"fill-color":"#D5CAC3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHgd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",70],layout:{visibility:"visible"},paint:{"fill-color":"#B4B6B8"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHlb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",71],layout:{visibility:"visible"},paint:{"fill-color":"#BDDEEF"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHlb-bn",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",72],layout:{visibility:"visible"},paint:{"fill-color":"#BDDEEF"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHlb-o",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",73],layout:{visibility:"visible"},paint:{"fill-color":"#BDDEEF"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHlld",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",74],layout:{visibility:"visible"},paint:{"fill-color":"#ECE4E1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHls",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",75],layout:{visibility:"visible"},paint:{"fill-color":"#FEF8B7"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHt",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",76],layout:{visibility:"visible"},paint:{"fill-color":"#FEE1C9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHta/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",77],layout:{visibility:"visible"},paint:{"fill-color":"#C1CADB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHta/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",77],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPHta/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHtc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",78],layout:{visibility:"visible"},paint:{"fill-color":"#FDDBBD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHtcm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",79],layout:{visibility:"visible"},paint:{"fill-color":"#B5D6F1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHtg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",80],layout:{visibility:"visible"},paint:{"fill-color":"#FEE8C7"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHtg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",80],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPHtg/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHtl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",81],layout:{visibility:"visible"},paint:{"fill-color":"#B5D6F1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHtls",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",82],layout:{visibility:"visible"},paint:{"fill-color":"#EED7CE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHts",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",83],layout:{visibility:"visible"},paint:{"fill-color":"#D5DDE4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHtv",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",84],layout:{visibility:"visible"},paint:{"fill-color":"#98CAED"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHtvc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",85],layout:{visibility:"visible"},paint:{"fill-color":"#96C4DA"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHtvs",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",86],layout:{visibility:"visible"},paint:{"fill-color":"#D2E3E1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPHval",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",87],layout:{visibility:"visible"},paint:{"fill-color":"#F0E0CA"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPac2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",88],layout:{visibility:"visible"},paint:{"fill-color":"#BDBDB3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPac3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",89],layout:{visibility:"visible"},paint:{"fill-color":"#D6D9DA"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPac4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",90],layout:{visibility:"visible"},paint:{"fill-color":"#B4B3BA"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPac5",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",91],layout:{visibility:"visible"},paint:{"fill-color":"#BBAEB6"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-bb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",92],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-cr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",93],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-f",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",94],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-f1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",95],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-f1+t1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",96],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-gr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",97],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-lt",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",98],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-o",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",99],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-pa",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",100],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-pm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",101],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-po",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",102],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-rn",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",103],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-s",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",104],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-sp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",105],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-su",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",106],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPacb-t1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",107],layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",108],layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbc-bb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",109],layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbc-cd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",110],layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbc-lt",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",111],layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbc-m",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",112],layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbc-pb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",113],layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbc-r",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",114],layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbc-rd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",115],layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbc-sp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",116],layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbn",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",117],layout:{visibility:"visible"},paint:{"fill-color":"#156080"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",118],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-bb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",119],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-bi",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",120],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-bo",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",121],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-co",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",122],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-cr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",123],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-cs",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",124],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-f1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",125],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-f2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",126],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-ga",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",127],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-gr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",128],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-ma",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",129],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-mf",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",130],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-mo",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",131],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-ms",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",132],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-o",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",133],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-p",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",134],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-pa",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",135],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-ra",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",136],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-s",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",137],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-t1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",138],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsc-t2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",139],layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbsn",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",140],layout:{visibility:"visible"},paint:{"fill-color":"#778C9F"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",141],layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtc-cf",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",142],layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtc-es",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",143],layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtc-f",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",144],layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtc-pb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",145],layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtc-pj",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",146],layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtc-pm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",147],layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtc-po",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",148],layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtc-ri",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",149],layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtc-rn",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",150],layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtc-sm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",151],layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtc-sp1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",152],layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtc-sp2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",153],layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPbtn",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",154],layout:{visibility:"visible"},paint:{"fill-color":"#415281"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",155],layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPc2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",156],layout:{visibility:"visible"},paint:{"fill-color":"#DCC8B2"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPcd",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",157],layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPcd2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",158],layout:{visibility:"visible"},paint:{"fill-color":"#EDECF5"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPcdb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",159],layout:{visibility:"visible"},paint:{"fill-color":"#C8D0C9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPcdb-t1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",160],layout:{visibility:"visible"},paint:{"fill-color":"#C8D0C9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPcli",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",161],layout:{visibility:"visible"},paint:{"fill-color":"#B5D3EF"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPclo",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",162],layout:{visibility:"visible"},paint:{"fill-color":"#AAD6EC"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPclu",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",163],layout:{visibility:"visible"},paint:{"fill-color":"#C0DEED"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPes2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",164],layout:{visibility:"visible"},paint:{"fill-color":"#E3DCD2"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPes3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",165],layout:{visibility:"visible"},paint:{"fill-color":"#CACCCD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPfg/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",166],layout:{visibility:"visible"},paint:{"fill-color":"#D5C7D0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPfg/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",166],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPfg/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPfv",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",167],layout:{visibility:"visible"},paint:{"fill-color":"#E1D4D6"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPfv2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",168],layout:{visibility:"visible"},paint:{"fill-color":"#E5F0D4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPfv3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",169],layout:{visibility:"visible"},paint:{"fill-color":"#D5D9E3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPfv4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",170],layout:{visibility:"visible"},paint:{"fill-color":"#E1D5DE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",171],layout:{visibility:"visible"},paint:{"fill-color":"#EEE1DB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPg10",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",172],layout:{visibility:"visible"},paint:{"fill-color":"#AC9E94"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPg11",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",173],layout:{visibility:"visible"},paint:{"fill-color":"#A29591"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPg2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",174],layout:{visibility:"visible"},paint:{"fill-color":"#EFF6E7"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPg3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",175],layout:{visibility:"visible"},paint:{"fill-color":"#E2E6E9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPg4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",176],layout:{visibility:"visible"},paint:{"fill-color":"#E2DDDB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPg5",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",177],layout:{visibility:"visible"},paint:{"fill-color":"#D6CFCD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPg6",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",178],layout:{visibility:"visible"},paint:{"fill-color":"#CBC3C0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPg7",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",179],layout:{visibility:"visible"},paint:{"fill-color":"#C1B6AB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPg8",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",180],layout:{visibility:"visible"},paint:{"fill-color":"#ABAFA3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPg9",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",181],layout:{visibility:"visible"},paint:{"fill-color":"#B7AA98"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPlb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",182],layout:{visibility:"visible"},paint:{"fill-color":"#D5E3E9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPlb3/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",183],layout:{visibility:"visible"},paint:{"fill-color":"#C8D5E3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPlb3/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",183],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPlb3/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPllf",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",184],layout:{visibility:"visible"},paint:{"fill-color":"#FEE3CD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPllf3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",185],layout:{visibility:"visible"},paint:{"fill-color":"#CEE5B7"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPllp/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",186],layout:{visibility:"visible"},paint:{"fill-color":"#C6D6EE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPllp/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",186],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPllp/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPls",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",187],layout:{visibility:"visible"},paint:{"fill-color":"#FEF8B7"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPpa3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",188],layout:{visibility:"visible"},paint:{"fill-color":"#FEFACB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPt",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",189],layout:{visibility:"visible"},paint:{"fill-color":"#FEE1C9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPt2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",190],layout:{visibility:"visible"},paint:{"fill-color":"#EFF6E7"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPt3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",191],layout:{visibility:"visible"},paint:{"fill-color":"#E2E6E9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPt4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",192],layout:{visibility:"visible"},paint:{"fill-color":"#E2DDDB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPt5",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",193],layout:{visibility:"visible"},paint:{"fill-color":"#D6CFCD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPt6",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",194],layout:{visibility:"visible"},paint:{"fill-color":"#CBC3C0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPt7",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",195],layout:{visibility:"visible"},paint:{"fill-color":"#C1B6AB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPt9",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",196],layout:{visibility:"visible"},paint:{"fill-color":"#B7AA98"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPta/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",197],layout:{visibility:"visible"},paint:{"fill-color":"#C1CADB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPta/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",197],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPta/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtam",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",198],layout:{visibility:"visible"},paint:{"fill-color":"#CBDEF2"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtas",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",199],layout:{visibility:"visible"},paint:{"fill-color":"#AEDFEB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",200],layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtb-f",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",201],layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtb-f1+t1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",202],layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtb-gr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",203],layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtb-lt",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",204],layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtb-pa",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",205],layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtb-s",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",206],layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtb-sp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",207],layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtb-t1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",208],layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPte/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",209],layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPte/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",209],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPte/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtf3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",210],layout:{visibility:"visible"},paint:{"fill-color":"#BFD0C8"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtl",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",211],layout:{visibility:"visible"},paint:{"fill-color":"#B5D6F1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtl3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",212],layout:{visibility:"visible"},paint:{"fill-color":"#B5CEEB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtle",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",213],layout:{visibility:"visible"},paint:{"fill-color":"#CBDEF2"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtlm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",214],layout:{visibility:"visible"},paint:{"fill-color":"#A0DCF8"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtlp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",215],layout:{visibility:"visible"},paint:{"fill-color":"#B1C8E1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtls",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",216],layout:{visibility:"visible"},paint:{"fill-color":"#EED7CE"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtr",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",217],layout:{visibility:"visible"},paint:{"fill-color":"#BCCDD6"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtr2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",218],layout:{visibility:"visible"},paint:{"fill-color":"#BACAD3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtr3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",219],layout:{visibility:"visible"},paint:{"fill-color":"#B5CEEB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtr4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",220],layout:{visibility:"visible"},paint:{"fill-color":"#B4BBBF"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtv3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",221],layout:{visibility:"visible"},paint:{"fill-color":"#B9E5F9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtvb",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",222],layout:{visibility:"visible"},paint:{"fill-color":"#D5DED9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtve",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",223],layout:{visibility:"visible"},paint:{"fill-color":"#8ED8F7"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtvp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",224],layout:{visibility:"visible"},paint:{"fill-color":"#B5D5E5"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPtvs",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",225],layout:{visibility:"visible"},paint:{"fill-color":"#D2E3E1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPv",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",226],layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPv10",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",227],layout:{visibility:"visible"},paint:{"fill-color":"#AC9E94"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPv2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",228],layout:{visibility:"visible"},paint:{"fill-color":"#EFF6E7"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPv2-3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",229],layout:{visibility:"visible"},paint:{"fill-color":"#EFD7C5"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPv3",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",230],layout:{visibility:"visible"},paint:{"fill-color":"#E2E6E9"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPv4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",231],layout:{visibility:"visible"},paint:{"fill-color":"#E2DDDB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPv5",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",232],layout:{visibility:"visible"},paint:{"fill-color":"#D8CEB4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPv6",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",233],layout:{visibility:"visible"},paint:{"fill-color":"#CBC3C0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPv7",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",234],layout:{visibility:"visible"},paint:{"fill-color":"#C1B6AB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPv8",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",235],layout:{visibility:"visible"},paint:{"fill-color":"#A9B0B3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPv9",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",236],layout:{visibility:"visible"},paint:{"fill-color":"#B7AA98"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPva",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",237],layout:{visibility:"visible"},paint:{"fill-color":"#EECFAB"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPval",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",238],layout:{visibility:"visible"},paint:{"fill-color":"#F0E0CA"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvb/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",239],layout:{visibility:"visible"},paint:{"fill-color":"#9C5EA5"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvb/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",239],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPvb/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvbc",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",240],layout:{visibility:"visible"},paint:{"fill-color":"#6756A3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvbc-a",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",241],layout:{visibility:"visible"},paint:{"fill-color":"#6756A3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvbc-ct",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",242],layout:{visibility:"visible"},paint:{"fill-color":"#6756A3"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvbl/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",243],layout:{visibility:"visible"},paint:{"fill-color":"#9C5EA5"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvbl/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",243],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPvbl/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvc/2",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",244],layout:{visibility:"visible"},paint:{"fill-color":"#A092C6"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvc/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",244],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPvc/1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvc/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",244],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPvc/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvcl/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",245],layout:{visibility:"visible"},paint:{"fill-color":"#A092C6"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvcl/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",245],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPvcl/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",246],layout:{visibility:"visible"},paint:{"fill-color":"#E3C9B8"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvgl/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",247],layout:{visibility:"visible"},paint:{"fill-color":"#A092C6"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvgl/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",247],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPvgl/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvi",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",248],layout:{visibility:"visible"},paint:{"fill-color":"#E5C9B5"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",249],layout:{visibility:"visible"},paint:{"fill-color":"#8073B4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvmg",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",250],layout:{visibility:"visible"},paint:{"fill-color":"#95BEC1"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvml/1",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",251],layout:{visibility:"visible"},paint:{"fill-color":"#8073B4"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvml/0",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",251],layout:{visibility:"visible"},paint:{"fill-pattern":"Cartografia del Quaternari/Unitats geològiques:1/QPvml/0"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvp",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",252],layout:{visibility:"visible"},paint:{"fill-color":"#EDB498"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvsm",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",253],layout:{visibility:"visible"},paint:{"fill-color":"#EDB998"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/QPvt",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",254],layout:{visibility:"visible"},paint:{"fill-color":"#D7B9AA"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/Qcc4",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",filter:["==","_symbol",255],layout:{visibility:"visible"},paint:{"fill-color":"#D7BDB3"}},{id:"Cartografia del Quaternari/Contactes del quaternari/3101",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":.755904}},{id:"Cartografia del Quaternari/Contactes del quaternari/3102",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",1],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[2.79986,2.79986],"line-width":.94488}},{id:"Cartografia del Quaternari/Contactes del quaternari/3103",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",2],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Cartografia del Quaternari/Contactes del quaternari/3104",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",3],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Cartografia del Quaternari/Contactes del quaternari/3105",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",4],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Cartografia del Quaternari/Contactes del quaternari/3106",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",5],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Cartografia del Quaternari/Contactes del quaternari/3107/1",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",6],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[16.764,2.79401],"line-width":.94488}},{id:"Cartografia del Quaternari/Contactes del quaternari/3107/0",type:"symbol",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",6],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Quaternari/Contactes del quaternari/3107/0","symbol-spacing":23.76,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Quaternari/Contactes del quaternari/3108/1",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",7],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Cartografia del Quaternari/Contactes del quaternari/3108/0",type:"symbol",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",7],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Quaternari/Contactes del quaternari/3108/0","symbol-spacing":23.76,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#2C292A"}},{id:"Cartografia del Quaternari/Contactes del quaternari/3110",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",8],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#797B7D","line-width":1.13386}},{id:"Cartografia del Quaternari/Contactes del quaternari/3204",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",9],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#0357A0","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Cartografia del Quaternari/Contactes del quaternari/5110",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",10],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[113.2,14.15],"line-width":.266667}},{id:"Cartografia del Quaternari/Elements geomorfològics/5104/1",type:"line",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-width":.666667}},{id:"Cartografia del Quaternari/Elements geomorfològics/5104/0",type:"symbol",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Quaternari/Elements geomorfològics/5104/0","symbol-spacing":15.84,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Quaternari/Elements geomorfològics/5105/1",type:"line",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",1],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#797B7D","line-width":.666667}},{id:"Cartografia del Quaternari/Elements geomorfològics/5105/0",type:"symbol",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",1],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Quaternari/Elements geomorfològics/5105/0","symbol-spacing":11.3333,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#797B7D"}},{id:"Cartografia del Quaternari/Elements geomorfològics/5109/1",type:"line",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",2],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[14,4],"line-width":.666667}},{id:"Cartografia del Quaternari/Elements geomorfològics/5109/0",type:"symbol",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",2],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Quaternari/Elements geomorfològics/5109/0","symbol-spacing":12,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Quaternari/Elements geomorfològics/5111/1",type:"symbol",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",3],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Quaternari/Elements geomorfològics/5111/1","symbol-spacing":23.76,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Quaternari/Elements geomorfològics/5111/0",type:"line",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",3],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":.94488}},{id:"Cartografia del Quaternari/Elements geomorfològics/5112/1",type:"line",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",4],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[16.764,2.79401],"line-width":.94488}},{id:"Cartografia del Quaternari/Elements geomorfològics/5112/0",type:"symbol",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",4],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Quaternari/Elements geomorfològics/5112/0","symbol-spacing":23.76,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Cartografia del Quaternari/Elements geomorfològics/5301/1",type:"line",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",5],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#797B7D","line-dasharray":[15.84,7.92],"line-width":.666667}},{id:"Cartografia del Quaternari/Elements geomorfològics/5301/0",type:"symbol",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",5],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Cartografia del Quaternari/Elements geomorfològics/5301/0","symbol-spacing":15.84,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#797B7D"}},{id:"Registre Geològic/Columnes estratigràfiques/Columnes del Paleozoic/Paleozoic LINK/Paleozoic",type:"fill",source:"infogeo","source-layer":"Paleozoic LINK",filter:["==","_symbol",0],layout:{visibility:"visible"},paint:{"fill-color":"#B0C5A9","fill-opacity":.6}},{id:"Registre Geològic/Columnes estratigràfiques/Columnes del Paleozoic/Paleozoic NO LINK/Paleozoic",type:"fill",source:"infogeo","source-layer":"Paleozoic NO LINK",filter:["==","_symbol",0],layout:{visibility:"visible"},paint:{"fill-color":"#B0C5A9","fill-opacity":.6}},{id:"Registre Geològic/Columnes estratigràfiques/Columnes del Mesozoic/Mesozoic LINK/Mesozoic",type:"fill",source:"infogeo","source-layer":"Mesozoic LINK",filter:["==","_symbol",0],layout:{visibility:"visible"},paint:{"fill-color":"#8EC4E6","fill-opacity":.6}},{id:"Registre Geològic/Columnes estratigràfiques/Columnes del Mesozoic/Mesozoic NO LINK/Mesozoic",type:"fill",source:"infogeo","source-layer":"Mesozoic NO LINK",filter:["==","_symbol",0],layout:{visibility:"visible"},paint:{"fill-color":"#8EC4E6","fill-opacity":.6}},{id:"Registre Geològic/Columnes estratigràfiques/Columnes del Paleogen/Paleogen LINK/Cenozoic, Paleogen",type:"fill",source:"infogeo","source-layer":"Paleogen LINK",filter:["==","_symbol",0],layout:{visibility:"visible"},paint:{"fill-color":"#E2AE74","fill-opacity":.6}},{id:"Registre Geològic/Columnes estratigràfiques/Columnes del Paleogen/Paleogen NO LINK/Cenozoic, Paleogen",type:"fill",source:"infogeo","source-layer":"Paleogen NO LINK",filter:["==","_symbol",0],layout:{visibility:"visible"},paint:{"fill-color":"#E2AE74","fill-opacity":.6}},{id:"Registre Geològic/Columnes estratigràfiques/Columnes del Neogen/Neogen LINK/Cenozoic, Neogen",type:"fill",source:"infogeo","source-layer":"Neogen LINK",filter:["==","_symbol",0],layout:{visibility:"visible"},paint:{"fill-color":"#F8E243","fill-opacity":.6}},{id:"Registre Geològic/Columnes estratigràfiques/Columnes del Neogen/Neogen NO LINK/Cenozoic, Neogen",type:"fill",source:"infogeo","source-layer":"Neogen NO LINK",filter:["==","_symbol",0],layout:{visibility:"visible"},paint:{"fill-color":"#F8E243","fill-opacity":.6}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/6420",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",0],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/6421",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",1],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/6422",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",2],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/6423",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",3],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/6522",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",4],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/6526",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",5],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/6527",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",6],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/6622",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",7],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/6824",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",8],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/6834",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",9],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/6929",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",10],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/6932",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",11],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/6934",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",12],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7029",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",13],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7032",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",14],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7033",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",15],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7122",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",16],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7123",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",17],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7128",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",18],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7132",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",19],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7133",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",20],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7222",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",21],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7223",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",22],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7225",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",23],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7227",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",24],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7229",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",25],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7322",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",26],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7323",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",27],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7324",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",28],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7328",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",29],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7422",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",30],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7423",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",31],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7424",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",32],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7425",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",33],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7426",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",34],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7429",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",35],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7430",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",36],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7525",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",37],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7528",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",38],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7529",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",39],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7628",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",40],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Registre Geològic/Esquemes de relacions estratigràfiques/7629",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",41],layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#666666","line-width":.533333}},{id:"Terrenys antròpics/Explanacions en obres viàries/1",type:"fill",source:"infogeo","source-layer":"Explanacions en obres viàries",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-color":"#FFFFFF"}},{id:"Terrenys antròpics/Explanacions en obres viàries/0",type:"line",source:"infogeo","source-layer":"Explanacions en obres viàries",minzoom:8.21,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#000000","line-width":.755904}},{id:"Terrenys antròpics/Desmunts en obres viàries/2",type:"fill",source:"infogeo","source-layer":"Desmunts en obres viàries",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-color":"#FFFFFF"}},{id:"Terrenys antròpics/Desmunts en obres viàries/1",type:"fill",source:"infogeo","source-layer":"Desmunts en obres viàries",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-color":"#FFFFFF"}},{id:"Terrenys antròpics/Desmunts en obres viàries/0",type:"line",source:"infogeo","source-layer":"Desmunts en obres viàries",minzoom:8.21,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#000000","line-width":.755904}},{id:"Terrenys antròpics/Zones extractives a cel obert/2",type:"fill",source:"infogeo","source-layer":"Zones extractives a cel obert",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-color":"#FFFFFF"}},{id:"Terrenys antròpics/Zones extractives a cel obert/1",type:"fill",source:"infogeo","source-layer":"Zones extractives a cel obert",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-color":"#FFFFFF"}},{id:"Terrenys antròpics/Zones extractives a cel obert/0",type:"line",source:"infogeo","source-layer":"Zones extractives a cel obert",minzoom:8.21,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#000000","line-width":.755904}},{id:"Terrenys antròpics/Rebliments indiferenciats",type:"fill",source:"infogeo","source-layer":"Rebliments indiferenciats",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-color":"#FAD5E5","fill-outline-color":"#000000"}},{id:"Terrenys antròpics/Valls i zones deprimides reblertes",type:"fill",source:"infogeo","source-layer":"Valls i zones deprimides reblertes",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-color":"#FAD5E5","fill-outline-color":"#000000"}},{id:"Terrenys antròpics/Dipòsits d'abocadors de residus",type:"fill",source:"infogeo","source-layer":"Dipòsits d'abocadors de residus",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-color":"#FAD5E5","fill-outline-color":"#000000"}},{id:"Terrenys antròpics/Terraplens d'infraestructures costaneres",type:"fill",source:"infogeo","source-layer":"Terraplens d'infraestructures costaneres",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-color":"#FAD5E5","fill-outline-color":"#000000"}},{id:"Terrenys antròpics/Terraplens en obres viàries",type:"fill",source:"infogeo","source-layer":"Terraplens en obres viàries",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-color":"#FAD5E5","fill-outline-color":"#000000"}},{id:"Talls geològics/5704",type:"line",source:"infogeo","source-layer":"Talls geològics",filter:["==","_symbol",0],layout:{visibility:"visible"},paint:{"line-color":"#000000","line-width":1.33333}},{id:"Terrenys antròpics/Terraplens en obres viàries/label/Default",type:"symbol",source:"infogeo","source-layer":"Terraplens en obres viàries/label",minzoom:12.53,layout:{visibility:"visible","text-font":["Arial Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#DA2A30","text-halo-color":"#FFFFFF","text-halo-width":.377952}},{id:"Terrenys antròpics/Desmunts en obres viàries/label/Default",type:"symbol",source:"infogeo","source-layer":"Desmunts en obres viàries/label",minzoom:12.53,layout:{visibility:"visible","text-font":["Arial Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#DA2A30","text-halo-color":"#FFFFFF","text-halo-width":.377952}},{id:"Terrenys antròpics/Dipòsits d'abocadors de residus/label/Default",type:"symbol",source:"infogeo","source-layer":"Dipòsits d'abocadors de residus/label",minzoom:12.53,layout:{visibility:"visible","text-font":["Arial Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#DA2A30","text-halo-color":"#FFFFFF","text-halo-width":.377952}},{id:"Terrenys antròpics/Valls i zones deprimides reblertes/label/Default",type:"symbol",source:"infogeo","source-layer":"Valls i zones deprimides reblertes/label",minzoom:12.53,layout:{visibility:"visible","text-font":["Arial Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#DA2A30","text-halo-color":"#FFFFFF","text-halo-width":.377952}},{id:"Terrenys antròpics/Rebliments indiferenciats/label/Default",type:"symbol",source:"infogeo","source-layer":"Rebliments indiferenciats/label",minzoom:12.53,layout:{visibility:"visible","text-font":["Arial Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#DA2A30","text-halo-color":"#FFFFFF","text-halo-width":.377952}},{id:"Mesures d'estructures/Estratificació/Cabussament de l'estratificació",type:"symbol",source:"infogeo","source-layer":"Estratificació",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Estratificació/Cabussament de l'estratificació","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["Arial Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":{property:"_symbol",type:"categorical",default:[0,.3],stops:[[0,[1.77825,-.313271]],[1,[1.24,-1.03554]],[2,[1.41015,-.278583]],[3,[1.77825,-.623396]],[4,[1.75415,-.556542]]]},"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Mesures d'estructures/Estratificació/Estratificació horitzontal",type:"symbol",source:"infogeo","source-layer":"Estratificació",filter:["==","_symbol",1],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Estratificació/Estratificació horitzontal","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["Arial Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":{property:"_symbol",type:"categorical",default:[0,.3],stops:[[0,[1.77825,-.313271]],[1,[1.24,-1.03554]],[2,[1.41015,-.278583]],[3,[1.77825,-.623396]],[4,[1.75415,-.556542]]]},"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Mesures d'estructures/Estratificació/Estratificació vertical",type:"symbol",source:"infogeo","source-layer":"Estratificació",filter:["==","_symbol",2],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Estratificació/Estratificació vertical","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["Arial Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":{property:"_symbol",type:"categorical",default:[0,.3],stops:[[0,[1.77825,-.313271]],[1,[1.24,-1.03554]],[2,[1.41015,-.278583]],[3,[1.77825,-.623396]],[4,[1.75415,-.556542]]]},"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Mesures d'estructures/Estratificació/Cabussament de l'estratificació invertit",type:"symbol",source:"infogeo","source-layer":"Estratificació",filter:["==","_symbol",3],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Estratificació/Cabussament de l'estratificació invertit","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["Arial Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":{property:"_symbol",type:"categorical",default:[0,.3],stops:[[0,[1.77825,-.313271]],[1,[1.24,-1.03554]],[2,[1.41015,-.278583]],[3,[1.77825,-.623396]],[4,[1.75415,-.556542]]]},"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Mesures d'estructures/Estratificació/Cabussament de l'estratificació de polaritat desconeguda",type:"symbol",source:"infogeo","source-layer":"Estratificació",filter:["==","_symbol",4],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Estratificació/Cabussament de l'estratificació de polaritat desconeguda","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["Arial Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":{property:"_symbol",type:"categorical",default:[0,.3],stops:[[0,[1.77825,-.313271]],[1,[1.24,-1.03554]],[2,[1.41015,-.278583]],[3,[1.77825,-.623396]],[4,[1.75415,-.556542]]]},"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Cartografia del Quaternari/Unitats geològiques:1/label/Default",type:"symbol",source:"infogeo","source-layer":"Unitats geològiques:1/label",minzoom:12.53,layout:{visibility:"visible","text-font":["Arial Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Terrenys antròpics/Terraplens d'infraestructures costaneres/label/Default",type:"symbol",source:"infogeo","source-layer":"Terraplens d'infraestructures costaneres/label",minzoom:12.53,layout:{visibility:"visible","text-font":["Arial Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#DA2A30","text-halo-color":"#FFFFFF","text-halo-width":.377952}},{id:"Mesures d'estructures/Foliació regional varisca/Foliació regional varisca",type:"symbol",source:"infogeo","source-layer":"Foliació regional varisca",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Foliació regional varisca/Foliació regional varisca","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["Arial Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":[1.56869,-.293125],"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Cartografia del Basament/Unitats geològiques:2/label/Default",type:"symbol",source:"infogeo","source-layer":"Unitats geològiques:2/label",minzoom:12.53,layout:{visibility:"visible","text-font":["Arial Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Terrenys antròpics/Explanacions en obres viàries/label/Default",type:"symbol",source:"infogeo","source-layer":"Explanacions en obres viàries/label",minzoom:12.53,layout:{visibility:"visible","text-font":["Arial Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#DA2A30","text-halo-color":"#FFFFFF","text-halo-width":.377952}},{id:"Mesures d'estructures/Lineació d'intersecció entre l'estratificació i la foliació regional varisca/Lineació d'intersecció entre l'estratificació i la foliació regional varisca",type:"symbol",source:"infogeo","source-layer":"Lineació d'intersecció entre l'estratificació i la foliació regional varisca",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Lineació d'intersecció entre l'estratificació i la foliació regional varisca/Lineació d'intersecció entre l'estratificació i la foliació regional varisca","icon-rotate":{property:"DIR",default:0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["Arial Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":[.510167,-1.20381],"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Terrenys antròpics/Zones extractives a cel obert/label/Default",type:"symbol",source:"infogeo","source-layer":"Zones extractives a cel obert/label",minzoom:12.53,layout:{visibility:"visible","text-font":["Arial Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#DA2A30","text-halo-color":"#FFFFFF","text-halo-width":.377952}},{id:"Mesures d'estructures/Sentit de paleocorrent/Sentit de paleocorrent",type:"symbol",source:"infogeo","source-layer":"Sentit de paleocorrent",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Sentit de paleocorrent/Sentit de paleocorrent","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["Arial Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":[.405833,-1.10456],"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}}]};function Na(e){let t,i,a,s,o,r=e[1].label+"",n="Unitats geològiques"===e[1].label&&e[0]&&"Unitats geològiques:1,Unitats geològiques:1/label"===e[1].value&&Ga(e),l="Unitats geològiques"===e[1].label&&e[0]&&"Unitats geològiques:2,Unitats geològiques:2/label"===e[1].value&&Va(e);return{c(){t=q("span"),i=w(r),a=E(),n&&n.c(),s=E(),l&&l.c(),M(t,"class","labels svelte-1w26dry")},m(e,r){v(e,t,r),b(t,i),b(t,a),n&&n.m(t,null),b(t,s),l&&l.m(t,null),o=!0},p(e,a){(!o||2&a)&&r!==(r=e[1].label+"")&&A(i,r),"Unitats geològiques"===e[1].label&&e[0]&&"Unitats geològiques:1,Unitats geològiques:1/label"===e[1].value?n?(n.p(e,a),3&a&&ge(n,1)):(n=Ga(e),n.c(),ge(n,1),n.m(t,s)):n&&(ue(),fe(n,1,1,()=>{n=null}),ce()),"Unitats geològiques"===e[1].label&&e[0]&&"Unitats geològiques:2,Unitats geològiques:2/label"===e[1].value?l?(l.p(e,a),3&a&&ge(l,1)):(l=Va(e),l.c(),ge(l,1),l.m(t,null)):l&&(ue(),fe(l,1,1,()=>{l=null}),ce())},i(e){o||(ge(n),ge(l),o=!0)},o(e){fe(n),fe(l),o=!1},d(e){e&&x(t),n&&n.d(),l&&l.d()}}}function $a(t){let i,a,s=t[1].label+"";return{c(){i=q("span"),a=w(s),M(i,"class","labels svelte-1w26dry"),I(i,"color","grey"),I(i,"font-weight","600")},m(e,t){v(e,i,t),b(i,a)},p(e,t){2&t&&s!==(s=e[1].label+"")&&A(a,s)},i:e,o:e,d(e){e&&x(i)}}}function Ga(e){let t,i;return t=new Oa({props:{item:e[1]}}),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,i){const a={};2&i&&(a.item=e[1]),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function Va(e){let t,i;return t=new Oa({props:{item:e[1]}}),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,i){const a={};2&i&&(a.item=e[1]),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function Za(e){let t,i,a,s,o,r,n,l;function u(t){e[3].call(null,t)}let c={};void 0!==e[0]&&(c.checked=e[0]),t=new pi({props:c}),H.push(()=>me(t,"checked",u)),t.$on("change",e[4]);const g=[$a,Na],f=[];function d(e,t){return 2&t&&(s=!!e[1].label.includes("Columnes")),s?0:1}return o=d(e,-1),r=f[o]=g[o](e),{c(){ye(t.$$.fragment),a=E(),r.c(),n=B()},m(e,i){_e(t,e,i),v(e,a,i),f[o].m(e,i),v(e,n,i),l=!0},p(e,a){const s={};!i&&1&a&&(i=!0,s.checked=e[0],ee(()=>i=!1)),t.$set(s);let l=o;o=d(e,a),o===l?f[o].p(e,a):(ue(),fe(f[l],1,1,()=>{f[l]=null}),ce(),r=f[o],r||(r=f[o]=g[o](e),r.c()),ge(r,1),r.m(n.parentNode,n))},i(e){l||(ge(t.$$.fragment,e),ge(r),l=!0)},o(e){fe(t.$$.fragment,e),fe(r),l=!1},d(e){be(t,e),e&&x(a),f[o].d(e),e&&x(n)}}}function Qa(e){let t,i;return t=new wi({props:{class:"field",style:"padding-left: 10px;",$$slots:{default:[Za]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,[i]){const a={};131&i&&(a.$$scope={dirty:i,ctx:e}),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function ja(e,t,i){let a={...Ra},{activated:s=!0}=t,{item:o}=t;const r=Z("activateLayer");o.value.split(",").forEach(e=>{a.layers.forEach(t=>{t.layout&&t.layout.visibility&&t["source-layer"]===e&&("visible"===t.layout.visibility?i(0,s=!0):i(0,s=!1))})});return e.$$set=e=>{"activated"in e&&i(0,s=e.activated),"item"in e&&i(1,o=e.item)},[s,o,r,function(e){s=e,i(0,s)},()=>r(o,s)]}class Ha extends Ce{constructor(e){super(),xe(this,e,ja,Qa,n,{activated:0,item:1})}}function Xa(e){let t,i,a,s,o,r,n,l="Basament pre-Quaternari"===e[1]&&Wa(),u="Dipòsits Quaternaris"===e[1]&&Ka(),c="Talls Geològics"===e[1]&&Ja(),g="Registre Geològic"===e[1]&&Ya(),f="Terrenys Antròpics"===e[1]&&es(),d="Mesures d'estructures"===e[1]&&ts();return{c(){t=q("div"),i=q("div"),l&&l.c(),a=E(),u&&u.c(),s=E(),c&&c.c(),o=E(),g&&g.c(),r=E(),f&&f.c(),n=E(),d&&d.c(),M(i,"class","infoboxBs svelte-7gy6c0")},m(e,h){v(e,t,h),b(t,i),l&&l.m(i,null),b(i,a),u&&u.m(i,null),b(i,s),c&&c.m(i,null),b(i,o),g&&g.m(i,null),b(i,r),f&&f.m(i,null),b(i,n),d&&d.m(i,null)},p(e,t){"Basament pre-Quaternari"===e[1]?l||(l=Wa(),l.c(),l.m(i,a)):l&&(l.d(1),l=null),"Dipòsits Quaternaris"===e[1]?u||(u=Ka(),u.c(),u.m(i,s)):u&&(u.d(1),u=null),"Talls Geològics"===e[1]?c||(c=Ja(),c.c(),c.m(i,o)):c&&(c.d(1),c=null),"Registre Geològic"===e[1]?g||(g=Ya(),g.c(),g.m(i,r)):g&&(g.d(1),g=null),"Terrenys Antròpics"===e[1]?f||(f=es(),f.c(),f.m(i,n)):f&&(f.d(1),f=null),"Mesures d'estructures"===e[1]?d||(d=ts(),d.c(),d.m(i,null)):d&&(d.d(1),d=null)},d(e){e&&x(t),l&&l.d(),u&&u.d(),c&&c.d(),g&&g.d(),f&&f.d(),d&&d.d()}}}function Wa(e){let t;return{c(){t=q("p"),t.innerHTML='Cartografia harmonitzada del Basament prequaternari derivada dels fulls publicats del Mapa geològic de Catalunya 1:25 000 (MGC25m) \n    en el marc del Geotreball I (GT I). La cartografia és contínua i s’interpreta la distribució de les unitats de basament que es \n    troben cobertes per dipòsits quaternaris o antròpics, segons un model d’unitats geològiques. Els elements que conformen la capa\n     s’estructuren en 3 conjunts d’informació: les unitats geològiques; els contactes (sedimentaris, metamòrfics i magmàtics); i \n     les falles i els plecs. Cada unitat cartogràfica, s’identifica amb un epígraf, i en el mapa es caracteritza per un color, i \n     en algun cas també per una trama. Per cada unitat de basament es pot consultar la informació relativa a les característiques \n     litològiques i cronoestratigràfiques vinculades al full del MG25m que correspon. En futures versions s’adjuntarà l’equivalència \n     entre els epígrafs publicats als fulls MGC25m i els epígrafs harmonitzats que conformen la cartografia contínua que aquí s’exposa. \n     Podeu accedir a la llegenda signes convencionals de la cartografia del Basament a través d’aquest \n     <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/BAS_LLEG">enllaç</a>.'},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function Ka(e){let t;return{c(){t=q("p"),t.innerHTML='Cartografia harmonitzada dels dipòsits quaternaris dels fulls del Mapa geològic de Catalunya 1:25 000 (MGC25m) en el marc del \n    Geotreball I (GT I). La capa és contínua, s’interpreta la distribució de les unitats quaternàries que es troben cobertes per dipòsits antròpics, \n    segons un model d’unitats geològiques. No inclou els materials d’alteració superficial de les unitats prequaternàries. Els elements que \n    inclou la capa s’estructuren en 3 conjunts d’informació: les unitats geològiques; els contactes i els elements geomorfològics. Cada unitat \n    cartogràfica, s’identifica amb un epígraf, i en el mapa es caracteritza per un color, i en algun cas també per una trama. Per cada unitat \n    quaternària es pot consultar la informació relativa a la seva fàcies i les característiques litològiques i cronoestratigràfiques vinculades \n    al full del MGC25m que correspon. En futures versions s’adjuntarà l’equivalència entre els epígrafs publicats als fulls MGC25m i els epígrafs \n    harmonitzats que conformen la cartografia contínua que aquí s’exposa. Podeu accedir a la llegenda signes convencionals de la cartografia del \n    Quaternari a través d’aquest      <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/QUAT_LLEG">enllaç</a>.'},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function Ja(e){let t;return{c(){t=q("p"),t.innerHTML='Representació gràfica de la intersecció dels cossos geològics en el subsòl amb un pla vertical d&#39;una orientació determinada. De la \n    intersecció d’aquest pla amb la superfície topogràfica en resulta la línia de la traça del tall. Aquests talls geològics són derivats dels \n    fulls publicats del Mapa Geològic de Catalunya 1:25 000. Cada tall representa una aproximació de la distribució dels materials geològics en fondària, \n    seguint un model d’unitats, coherent amb la informació de superfície i de subsòl disponible. En el mapa es mostren les traces dels talls disponibles. \n    Clicant a cada traça es pot visualitzar o descarregar el tall geològic corresponent. \n    La descàrrega inclou el tall en format jpg i una taula en format xlsx, amb informació litostratigràfica de les unitats que el composen. \n    Podeu accedir a la llegenda signes convencionals dels talls geològics a través d’aquest <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/TALLS_LLEG">enllaç</a>.'},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function Ya(e){let t;return{c(){t=q("p"),t.innerHTML='La capa Registre Geològic inclou esquemes representatius de les successions litostratigràfiques d’àmbits geogràfics específics. \n    La present versió de la capa Registre Geològic permet visualitzar o descarregar columnes estratigràfiques sintètiques i esquemes \n    de relacions estratigràfiques dels fulls publicats del Mapa Geològic de Catalunya 1:25 000.<br/>\n    Les columnes estratigràfiques són representatives de les successions de roques sedimentàries i volcàniques presents a l’àmbit d’un full. \n    S’inclouen columnes representatives del registre neogen, paleogen, mesozoic i paleozoic. Per facilitar l’accés i l’anàlisi a les columnes \n    es mostra un mapa de la distribució d’aquests quatre grups cronoestratigràfics. Clicant a l’àmbit d’interès l’usuari pot visualitzar o \n    descarregar la columna corresponent. La descàrrega inclou la columna estratigràfica en format jpg i una taula en format xlsx, amb \n    informació litostratigràfica de les unitats que la composen.<br/>\n    Els esquemes de relacions estratigràfiques són una representació gràfica sintètica de la posició cronoestratigràfica i estructural de les \n    diferents unitats geològiques presents a l’àmbit d’un full 1.25 000. Clicant a un punt determinat l’usuari pot visualitzar o descarregar \n    l’esquema de relacions estratigràfiques representatiu del full on se situa el punt. La descàrrega inclou l’esquema de relacions estratigràfiques \n    en format jpg i una taula en format xlsx, amb informació litostratigràfica de les unitats que el composen. Podeu accedir a la llegenda \n    general dels esquemes de relacions estratigràfiques a través d’aquest <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/REL_LLEG">enllaç</a>.  <br/>\n    Es recomana carregar de fons la cartografia geològica de Basament. Podeu accedir a la llegenda general de les columnes estratigràfiques \n    sintètiques i a la llegenda de signes convencionals per a les columnes i els esquemes de relacions estratigràfiques a través \n    d’aquest      <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/COLS_LLEG">enllaç</a>.'},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function es(e){let t;return{c(){t=q("p"),t.innerHTML='Cartografia harmonitzada de terrenys antròpics derivada dels fulls publicats del Mapa Geològic de Catalunya 1:25 000 en el marc del \n    projecte Geotreballs I (GT I) i Geotreball II (GT II). El concepte terreny antròpic es refereix a aquelles àrees on l’activitat \n    humana ha modificat la configuració natural del terreny significativament. A la present versió la capa diferencia 8 tipologies de \n    terrenys antròpics: els terraplens, desmunts i explanacions d’obres viàries, les zones extractives a cel obert, els terraplens \n    d’infraestructures costaneres, els dipòsits d’abocadors de residus, les valls i zones deprimides reblertes i els rebliments en \n    general. Cada tipologia s’identifica mitjançant un epígraf. Es pot consultar la descripció dels terrenys antròpics clicant al \n    damunt d’ells. Podeu accedir a la llegenda dels terrenys antròpics a través d’aquest      <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/ANT_LLEG">enllaç</a>.'},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function ts(e){let t;return{c(){t=q("p"),t.innerHTML='Mesures de l’orientació de diferents tipus d’estructures de caràcter puntual derivades dels fulls publicats del Mapa Geològic de Catalunya 1:25 000.<br/>\n    A la present versió s’inclou mesures de quatre tipologies d’estructures: l’estratificació, la foliació regional varisca, la lineació d’intersecció \n    entre l’estratificació i la foliació regional varisca, i el sentit dels paleocorrents. Cada tipologia d’estructura té un símbol específic que \n    s’orienta en funció de la direcció de màxim pendent en el cas de les estructures planars (estratificació i foliació) i la direcció en el cas \n    de les estructures linears. L’orientació de les estructures planars es proporciona a partir de la mesura de l’azimut (de 0 a 360º en sentit horari) \n    i la inclinació respecte el pla horitzontal (cabussament) de la direcció de màxim pendent del pla. Les inclinacions negatives indiquen plans invertits. \n    En el cas de la lineació d’intersecció es proporciona l’azimut i la inclinació respecte el pla horitzontal. En les mesures del sentit del paleocorrent \n    només es proporciona l’azimut.<br/>\n    La majoria d’orientacions s’han mesurat al camp, en afloraments específics amb la brúixola. També s’inclouen mesures de caràcter més regional \n    obtingudes a partir de la intersecció de les traces cartogràfiques amb la superfície del terreny. Clicant a les mesures es proporciona \n    informació sobre l’orientació i la unitat geològica a la que està associada. Podeu accedir a la llegenda general de signes convencionals \n    de les mesures d’estructures a través d’aquest      <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/MESU_LLEG">enllaç</a>.'},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function is(t){let i,a=t[0]&&Xa(t);return{c(){a&&a.c(),i=B()},m(e,t){a&&a.m(e,t),v(e,i,t)},p(e,[t]){e[0]?a?a.p(e,t):(a=Xa(e),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i:e,o:e,d(e){a&&a.d(e),e&&x(i)}}}function as(e,t,i){let{groupLabel:a}=t,{showinfo:s}=t,{labelArray:o}=t;return $(async()=>{}),e.$$set=e=>{"groupLabel"in e&&i(1,a=e.groupLabel),"showinfo"in e&&i(0,s=e.showinfo),"labelArray"in e&&i(2,o=e.labelArray)},[s,a,o]}class ss extends Ce{constructor(e){super(),xe(this,e,as,is,n,{groupLabel:1,showinfo:0,labelArray:2})}}function os(e,t,i){const a=e.slice();return a[9]=t[i],a[11]=i,a}function rs(e,t,i){const a=e.slice();return a[12]=t[i],a[11]=i,a}function ns(e,t,i){const a=e.slice();return a[9]=t[i],a[11]=i,a}function ls(e){let t;return{c(){t=w("info_outlined")},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function us(e){let t,i;return t=new Ot({props:{style:"font-size: 25px ",class:" material-icons  ",$$slots:{default:[ls]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,i){const a={};32768&i&&(a.$$scope={dirty:i,ctx:e}),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function cs(e){let t,i,a,s,o,r=e[1].items,n=[];for(let t=0;t<r.length;t+=1)n[t]=ms(ns(e,r,t));const l=e=>fe(n[e],1,1,()=>{n[e]=null});return{c(){t=q("div"),i=q("div"),a=E();for(let e=0;e<n.length;e+=1)n[e].c();M(t,"id",s=e[1].groupId),M(t,"class","checkboxes svelte-1uekiio")},m(e,s){v(e,t,s),b(t,i),b(t,a);for(let e=0;e<n.length;e+=1)n[e].m(t,null);o=!0},p(e,i){if(82&i){let a;for(r=e[1].items,a=0;a<r.length;a+=1){const s=ns(e,r,a);n[a]?(n[a].p(s,i),ge(n[a],1)):(n[a]=ms(s),n[a].c(),ge(n[a],1),n[a].m(t,null))}for(ue(),a=r.length;a<n.length;a+=1)l(a);ce()}(!o||2&i&&s!==(s=e[1].groupId))&&M(t,"id",s)},i(e){if(!o){for(let e=0;e<r.length;e+=1)ge(n[e]);o=!0}},o(e){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)fe(n[e]);o=!1},d(e){e&&x(t),C(n,e)}}}function gs(e){let t,i;return t=new Ha({props:{item:e[9],activated:_s}}),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,i){const a={};2&i&&(a.item=e[9]),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function fs(e){let t,i,a=ke,s=[];for(let t=0;t<a.length;t+=1)s[t]=ps(rs(e,a,t));const o=e=>fe(s[e],1,1,()=>{s[e]=null});return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=B()},m(e,a){for(let t=0;t<s.length;t+=1)s[t].m(e,a);v(e,t,a),i=!0},p(e,i){if(80&i){let r;for(a=ke,r=0;r<a.length;r+=1){const o=rs(e,a,r);s[r]?(s[r].p(o,i),ge(s[r],1)):(s[r]=ps(o),s[r].c(),ge(s[r],1),s[r].m(t.parentNode,t))}for(ue(),r=a.length;r<s.length;r+=1)o(r);ce()}},i(e){if(!i){for(let e=0;e<a.length;e+=1)ge(s[e]);i=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)fe(s[e]);i=!1},d(e){C(s,e),e&&x(t)}}}function ds(e){let t,i,a,s,o,r=e[12].items,n=[];for(let t=0;t<r.length;t+=1)n[t]=hs(os(e,r,t));const l=e=>fe(n[e],1,1,()=>{n[e]=null});return{c(){t=q("div"),i=q("div"),a=E();for(let e=0;e<n.length;e+=1)n[e].c();M(t,"id",s=e[12].groupId),M(t,"class","checkboxes svelte-1uekiio")},m(e,s){v(e,t,s),b(t,i),b(t,a);for(let e=0;e<n.length;e+=1)n[e].m(t,null);o=!0},p(e,i){if(0&i){let a;for(r=e[12].items,a=0;a<r.length;a+=1){const s=os(e,r,a);n[a]?(n[a].p(s,i),ge(n[a],1)):(n[a]=hs(s),n[a].c(),ge(n[a],1),n[a].m(t,null))}for(ue(),a=r.length;a<n.length;a+=1)l(a);ce()}},i(e){if(!o){for(let e=0;e<r.length;e+=1)ge(n[e]);o=!0}},o(e){n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)fe(n[e]);o=!1},d(e){e&&x(t),C(n,e)}}}function hs(t){let i,a;return i=new Ha({props:{item:t[9],activated:_s}}),{c(){ye(i.$$.fragment)},m(e,t){_e(i,e,t),a=!0},p:e,i(e){a||(ge(i.$$.fragment,e),a=!0)},o(e){fe(i.$$.fragment,e),a=!1},d(e){be(i,e)}}}function ps(e){let t,i,a,s,o,r,n,l,u,c,g,f,d,h,p,m=e[12].groupLabel+"",y=e[4]&&ds(e);return{c(){t=q("form"),i=q("div"),a=q("div"),s=q("div"),o=q("select"),r=q("option"),n=w(m),u=E(),c=q("div"),g=E(),y&&y.c(),f=E(),r.__value=l=e[12].groupLabel,r.value=r.__value,M(o,"class","select svelte-1uekiio"),I(o,"border-style","none"),M(c,"class","overSelect svelte-1uekiio"),I(s,"width","100%"),M(s,"class","selectBox svelte-1uekiio"),I(a,"display","flex"),I(a,"height","32px"),M(i,"class","multiselect svelte-1uekiio"),I(i,"margin-left","18px"),I(i,"margin-top","8px"),I(i,"width","98%")},m(l,m){v(l,t,m),b(t,i),b(i,a),b(a,s),b(s,o),b(o,r),b(r,n),b(s,u),b(s,c),b(i,g),y&&y.m(i,null),b(t,f),d=!0,h||(p=P(s,"click",e[6]),h=!0)},p(e,t){e[4]?y?(y.p(e,t),16&t&&ge(y,1)):(y=ds(e),y.c(),ge(y,1),y.m(i,null)):y&&(ue(),fe(y,1,1,()=>{y=null}),ce())},i(e){d||(ge(y),d=!0)},o(e){fe(y),d=!1},d(e){e&&x(t),y&&y.d(),h=!1,p()}}}function ms(e){let t,i,a,s;const o=[fs,gs],r=[];function n(e,t){return"Columnes estratigràfiques"===e[9].label?0:1}return t=n(e),i=r[t]=o[t](e),{c(){i.c(),a=B()},m(e,i){r[t].m(e,i),v(e,a,i),s=!0},p(e,s){let l=t;t=n(e),t===l?r[t].p(e,s):(ue(),fe(r[l],1,1,()=>{r[l]=null}),ce(),i=r[t],i||(i=r[t]=o[t](e),i.c()),ge(i,1),i.m(a.parentNode,a))},i(e){s||(ge(i),s=!0)},o(e){fe(i),s=!1},d(e){r[t].d(e),e&&x(a)}}}function ys(e){let t,i,a,s,o,r,n,l,u,c,g,f,d,h,p,m,y,_,C,U=e[1].groupLabel+"";d=new kt({props:{style:"position:relative;right:-3px;top:-10px",$$slots:{default:[us]},$$scope:{ctx:e}}}),d.$on("click",e[7]);let B=e[3]&&cs(e);return m=new ss({props:{groupLabel:e[1].groupLabel,showinfo:e[2],labelArray:e[0]}}),{c(){t=q("form"),i=q("div"),a=q("div"),s=q("div"),o=q("select"),r=q("option"),n=w(U),u=E(),c=q("div"),g=E(),f=q("div"),ye(d.$$.fragment),h=E(),B&&B.c(),p=E(),ye(m.$$.fragment),r.__value=l=e[1].groupLabel,r.value=r.__value,M(o,"class","select svelte-1uekiio"),I(o,"border-radius","11px"),I(o,"border-color","transparent"),I(o,"background-color","#f5f5dc8f"),M(c,"class","overSelect svelte-1uekiio"),I(s,"width","100%"),M(s,"class","selectBox svelte-1uekiio"),I(a,"display","flex"),I(a,"height","32px"),M(i,"class","multiselect svelte-1uekiio")},m(l,x){v(l,t,x),b(t,i),b(i,a),b(a,s),b(s,o),b(o,r),b(r,n),b(s,u),b(s,c),b(a,g),b(a,f),_e(d,f,null),b(i,h),B&&B.m(i,null),b(t,p),_e(m,t,null),y=!0,_||(C=P(s,"click",e[5]),_=!0)},p(e,[t]){(!y||2&t)&&U!==(U=e[1].groupLabel+"")&&A(n,U),(!y||2&t&&l!==(l=e[1].groupLabel))&&(r.__value=l,r.value=r.__value);const a={};32768&t&&(a.$$scope={dirty:t,ctx:e}),d.$set(a),e[3]?B?(B.p(e,t),8&t&&ge(B,1)):(B=cs(e),B.c(),ge(B,1),B.m(i,null)):B&&(ue(),fe(B,1,1,()=>{B=null}),ce());const s={};2&t&&(s.groupLabel=e[1].groupLabel),4&t&&(s.showinfo=e[2]),1&t&&(s.labelArray=e[0]),m.$set(s)},i(e){y||(ge(d.$$.fragment,e),ge(B),ge(m.$$.fragment,e),y=!0)},o(e){fe(d.$$.fragment,e),fe(B),fe(m.$$.fragment,e),y=!1},d(e){e&&x(t),be(d),B&&B.d(),be(m),_=!1,C()}}}let _s=!0;function bs(e,t,i){let{layer:a}=t,s=!1,o=!1,r=!1,{labelArray:n}=t;Z("activateLayerGroup");return e.$$set=e=>{"layer"in e&&i(1,a=e.layer),"labelArray"in e&&i(0,n=e.labelArray)},[n,a,s,o,r,function(){i(3,o=!o)},function(){i(4,r=!r)},function(){i(2,s=!1);let e=a.groupLabel;n===e?i(0,n=""):(i(0,n=e),i(2,s=!0))}]}class vs extends Ce{constructor(e){super(),xe(this,e,bs,ys,n,{layer:1,labelArray:0})}}function xs(e,t,i){const a=e.slice();return a[11]=t[i],a}function Cs(e){let t,i,a,s,r,n,l,u,c,g,f=e[11].label+"";return{c(){t=q("div"),i=q("label"),a=q("input"),n=E(),l=w(f),u=E(),M(a,"type","radio"),a.checked=s=e[11].label===e[0].label,a.__value=r=e[11],a.value=a.__value,e[6][0].push(a),M(i,"class","svelte-heo4pg")},m(s,o){v(s,t,o),b(t,i),b(i,a),a.checked=a.__value===e[0],b(i,n),b(i,l),b(t,u),c||(g=[P(a,"change",e[5]),P(a,"change",e[7]),P(a,"click",e[4])],c=!0)},p(e,t){1&t&&s!==(s=e[11].label===e[0].label)&&(a.checked=s),1&t&&(a.checked=a.__value===e[0])},d(i){i&&x(t),e[6][0].splice(e[6][0].indexOf(a),1),c=!1,o(g)}}}function qs(e){let t,i,a,s,o,r,n,l,u,c=e[11].label+"";return{c(){t=q("div"),i=q("label"),a=q("input"),o=E(),r=w(c),n=E(),M(a,"id","wmsid"),M(a,"type","checkbox"),a.checked=e[1],a.value=s=e[11],M(i,"class","svelte-heo4pg")},m(s,c){v(s,t,c),b(t,i),b(i,a),b(i,o),b(i,r),b(t,n),l||(u=P(a,"click",e[3]),l=!0)},p(e,t){2&t&&(a.checked=e[1])},d(e){e&&x(t),l=!1,u()}}}function Us(e){let t;let i=function(e,t){return"estructuralwms"===e[11].url?qs:Cs}(e)(e);return{c(){i.c(),t=B()},m(e,a){i.m(e,a),v(e,t,a)},p(e,t){i.p(e,t)},d(e){i.d(e),e&&x(t)}}}function ws(t){let i,a,s=ze,o=[];for(let e=0;e<s.length;e+=1)o[e]=Us(xs(t,s,e));return{c(){i=q("div"),a=q("div");for(let e=0;e<o.length;e+=1)o[e].c();M(a,"id","menu"),M(a,"class","wrapper svelte-heo4pg"),M(i,"class","container svelte-heo4pg")},m(e,t){v(e,i,t),b(i,a);for(let e=0;e<o.length;e+=1)o[e].m(a,null)},p(e,[t]){if(31&t){let i;for(s=ze,i=0;i<s.length;i+=1){const r=xs(e,s,i);o[i]?o[i].p(r,t):(o[i]=Us(r),o[i].c(),o[i].m(a,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},i:e,o:e,d(e){e&&x(i),C(o,e)}}}function Es(e,t,i){const a=Z("changeBaseLayer");Z("removeWmsBaseLayer");let s=ze[0],o=ze[2],r=!1;document.getElementById("wmsid");return[s,r,a,function(){!1===document.getElementById("wmsid").checked?(o={url:"removeestructuralwms"},a(o)):(o=ze[2],a(o))},function(){i(1,r=!1),document.getElementById("wmsid").checked=!1},function(){s=this.__value,i(0,s)},[[]],()=>a(s)]}class Bs extends Ce{constructor(e){super(),xe(this,e,Es,ws,n,{})}}function Ps(e,t,i){const a=e.slice();return a[0]=t[i],a[2]=i,a}function Ms(t){let i,a;return i=new vs({props:{layer:t[0],labelArray:As}}),{c(){ye(i.$$.fragment)},m(e,t){_e(i,e,t),a=!0},p:e,i(e){a||(ge(i.$$.fragment,e),a=!0)},o(e){fe(i.$$.fragment,e),a=!1},d(e){be(i,e)}}}function Ts(e){let t,i,a,s,o,r,n,l,u,c,g,f,d,h,p;s=new Di({}),c=new Bs({});let m=Fe,y=[];for(let t=0;t<m.length;t+=1)y[t]=Ms(Ps(e,m,t));const _=e=>fe(y[e],1,1,()=>{y[e]=null});return{c(){t=q("div"),i=q("div"),a=q("div"),ye(s.$$.fragment),o=E(),r=q("div"),n=q("div"),l=q("h2"),l.textContent="Selector de mapa base:",u=E(),ye(c.$$.fragment),g=E(),f=q("h2"),f.textContent="Selector de capes:",d=E(),h=q("div");for(let e=0;e<y.length;e+=1)y[e].c();M(l,"class","svelte-tr7k2k"),M(n,"class","headerImage2 svelte-tr7k2k"),M(f,"class","svelte-tr7k2k"),M(a,"class","headerImage"),M(h,"id","capaselect"),M(h,"class","container list svelte-tr7k2k"),M(t,"class","fitcontent")},m(e,m){v(e,t,m),b(t,i),b(i,a),_e(s,a,null),b(a,o),b(a,r),b(r,n),b(n,l),b(n,u),_e(c,n,null),b(a,g),b(a,f),b(i,d),b(i,h);for(let e=0;e<y.length;e+=1)y[e].m(h,null);p=!0},p(e,[t]){if(0&t){let i;for(m=Fe,i=0;i<m.length;i+=1){const a=Ps(e,m,i);y[i]?(y[i].p(a,t),ge(y[i],1)):(y[i]=Ms(a),y[i].c(),ge(y[i],1),y[i].m(h,null))}for(ue(),i=m.length;i<y.length;i+=1)_(i);ce()}},i(e){if(!p){ge(s.$$.fragment,e),ge(c.$$.fragment,e);for(let e=0;e<m.length;e+=1)ge(y[e]);p=!0}},o(e){fe(s.$$.fragment,e),fe(c.$$.fragment,e),y=y.filter(Boolean);for(let e=0;e<y.length;e+=1)fe(y[e]);p=!1},d(e){e&&x(t),be(s),be(c),C(y,e)}}}let As="";class Ss extends Ce{constructor(e){super(),xe(this,e,null,Ts,n,{})}}function Is(e){let t,a,s,n,u,g;const f=e[4].default,h=l(f,e,e[3],null);let p=[ct(e[2],["use"])],m={};for(let e=0;e<p.length;e+=1)m=i(m,p[e]);return{c(){t=q("h1"),h&&h.c(),T(t,m)},m(i,o){v(i,t,o),h&&h.m(t,null),n=!0,u||(g=[d(a=gt.call(null,t,e[0])),d(s=e[1].call(null,t))],u=!0)},p(e,[i]){h&&h.p&&8&i&&c(h,f,e,e[3],i,null,null),T(t,m=pe(p,[4&i&&ct(e[2],["use"])])),a&&r(a.update)&&1&i&&a.update.call(null,e[0])},i(e){n||(ge(h,e),n=!0)},o(e){fe(h,e),n=!1},d(e){e&&x(t),h&&h.d(e),u=!1,o(g)}}}function Ds(e,t,a){let{$$slots:s={},$$scope:o}=t;const r=ut(N());let{use:n=[]}=t;return e.$$set=e=>{a(2,t=i(i({},t),g(e))),"use"in e&&a(0,n=e.use),"$$scope"in e&&a(3,o=e.$$scope)},t=g(t),[n,r,t,o,s]}Ri({class:"mdc-drawer-app-content",component:ji,contexts:{}}),Ri({class:"mdc-drawer__content",component:ji,contexts:{}}),Ri({class:"mdc-drawer__header",component:ji,contexts:{}});function zs(e){let t,a,s,n,u,g;const f=e[4].default,h=l(f,e,e[3],null);let p=[ct(e[2],["use"])],m={};for(let e=0;e<p.length;e+=1)m=i(m,p[e]);return{c(){t=q("h3"),h&&h.c(),T(t,m)},m(i,o){v(i,t,o),h&&h.m(t,null),n=!0,u||(g=[d(a=gt.call(null,t,e[0])),d(s=e[1].call(null,t))],u=!0)},p(e,[i]){h&&h.p&&8&i&&c(h,f,e,e[3],i,null,null),T(t,m=pe(p,[4&i&&ct(e[2],["use"])])),a&&r(a.update)&&1&i&&a.update.call(null,e[0])},i(e){n||(ge(h,e),n=!0)},o(e){fe(h,e),n=!1},d(e){e&&x(t),h&&h.d(e),u=!1,o(g)}}}function ks(e,t,a){let{$$slots:s={},$$scope:o}=t;const r=ut(N());let{use:n=[]}=t;return e.$$set=e=>{a(2,t=i(i({},t),g(e))),"use"in e&&a(0,n=e.use),"$$scope"in e&&a(3,o=e.$$scope)},t=g(t),[n,r,t,o,s]}Ri({class:"mdc-drawer__title",component:class extends Ce{constructor(e){super(),xe(this,e,Ds,Is,n,{use:0})}},contexts:{}}),Ri({class:"mdc-drawer__subtitle",component:Gi,contexts:{}}),Ri({class:"mdc-drawer-scrim",component:ji,contexts:{}}),Ri({class:"mdc-list-item__text",component:Ea,contexts:{}}),Ri({class:"mdc-list-item__primary-text",component:Ea,contexts:{}}),Ri({class:"mdc-list-item__secondary-text",component:Ea,contexts:{}}),Ri({class:"mdc-list-item__graphic",component:Ea,contexts:{}}),Ri({class:"mdc-list-item__meta",component:Ea,contexts:{}}),Ri({class:"mdc-list-group",component:ji,contexts:{}});function Fs(t){let i,a,s,o;return s=new Ss({}),{c(){i=q("div"),a=q("div"),ye(s.$$.fragment),M(a,"id","container"),M(a,"class","svelte-1vb7g6z"),M(i,"id","container_ppal"),M(i,"class","svelte-1vb7g6z")},m(e,t){v(e,i,t),b(i,a),_e(s,a,null),o=!0},p:e,i(e){o||(ge(s.$$.fragment,e),o=!0)},o(e){fe(s.$$.fragment,e),o=!1},d(e){e&&x(i),be(s)}}}function Ls(e,t,i){!function(){const e=N()}();let{myDrawer2Open:a=!1}=t;return e.$$set=e=>{"myDrawer2Open"in e&&i(0,a=e.myDrawer2Open)},[a]}Ri({class:"mdc-list-group__subheader",component:class extends Ce{constructor(e){super(),xe(this,e,ks,zs,n,{use:0})}},contexts:{}});class Os extends Ce{constructor(e){super(),xe(this,e,Ls,Fs,n,{myDrawer2Open:0})}}function Rs(e){let t;return{c(){t=q("i"),M(t,"class","fa fa-bars")},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function Ns(e){let t,i;return t=new Os({}),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function $s(e){let t,i,a,s,o;i=new kt({props:{$$slots:{default:[Rs]},$$scope:{ctx:e}}}),i.$on("click",e[1]);let r=e[0]&&Ns();return{c(){t=q("div"),ye(i.$$.fragment),a=E(),r&&r.c(),s=B(),M(t,"class","iconmenu svelte-1xnb387")},m(e,n){v(e,t,n),_e(i,t,null),v(e,a,n),r&&r.m(e,n),v(e,s,n),o=!0},p(e,[t]){const a={};1024&t&&(a.$$scope={dirty:t,ctx:e}),i.$set(a),e[0]?r?1&t&&ge(r,1):(r=Ns(),r.c(),ge(r,1),r.m(s.parentNode,s)):r&&(ue(),fe(r,1,1,()=>{r=null}),ce())},i(e){o||(ge(i.$$.fragment,e),ge(r),o=!0)},o(e){fe(i.$$.fragment,e),fe(r),o=!1},d(e){e&&x(t),be(i),e&&x(a),r&&r.d(e),e&&x(s)}}}function Gs(e,t,i){let a=!1;return[a,function e(){e&&i(0,a=!a)}]}class Vs extends Ce{constructor(e){super(),xe(this,e,Gs,$s,n,{})}}function Zs(t){let i;return{c(){i=q("div"),i.innerHTML='<a title="Institut Catogràfic i Geològic de Catalunya" href="https://www.icgc.cat" target="_blank"><img width="125" alt="Logi ICGCG" src="assets/icgc_blanc.png" class="ui image logo"/></a>',M(i,"class","headerLogo svelte-1nwypgj")},m(e,t){v(e,i,t)},p:e,i:e,o:e,d(e){e&&x(i)}}}class Qs extends Ce{constructor(e){super(),xe(this,e,null,Zs,n,{})}}function js(e){let t,i,a;const s=e[10].default,o=l(s,e,e[9],null);return i=new Qs({}),{c(){o&&o.c(),t=E(),ye(i.$$.fragment)},m(e,s){o&&o.m(e,s),v(e,t,s),_e(i,e,s),a=!0},p(e,t){o&&o.p&&512&t&&c(o,s,e,e[9],t,null,null)},i(e){a||(ge(o,e),ge(i.$$.fragment,e),a=!0)},o(e){fe(o,e),fe(i.$$.fragment,e),a=!1},d(e){o&&o.d(e),e&&x(t),be(i,e)}}}function Hs(e){let t,i,a=e[0]&&js(e);return{c(){t=q("div"),a&&a.c(),M(t,"id","map"),M(t,"class","svelte-qwqeoq")},m(s,o){v(s,t,o),a&&a.m(t,null),e[11](t),i=!0},p(e,[i]){e[0]?a?(a.p(e,i),1&i&&ge(a,1)):(a=js(e),a.c(),ge(a,1),a.m(t,null)):a&&(ue(),fe(a,1,1,()=>{a=null}),ce())},i(e){i||(ge(a),i=!0)},o(e){fe(a),i=!1},d(i){i&&x(t),a&&a.d(),e[11](null)}}}function Xs(e,t,i){let{$$slots:a={},$$scope:s}=t;V(De,{getMap:()=>f});let{lat:o}=t,{lon:r}=t,{zoom:n}=t,{maxZoom:l}=t,{style:u}=t,{pitch:c}=t,{bearing:g}=t,{map:f}=t;Z("overLayers");const d=Z("changePaintProperty");let h;function p(){f.getSource("mapbox-dem")||f.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14}),f.getSource("icgc-dem")||f.addSource("icgc-dem",{type:"raster-dem",tiles:["http://172.30.22.159:8080/data/terreny_icgc_5m_rgb/{z}/{x}/{y}.png"],tileSize:512,maxzoom:14}),f.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,50],"sky-atmosphere-sun-intensity":5}}),m()}function m(){var{longitude:e,latitude:t}=f.getCenter();var i,a;(i=e,a=t,!(f.getZoom()<10)&&i>=0&&i<=6&&a>=38.5&&a<=62.33)?f.setTerrain({source:"icgc-dem",exaggeration:1.2}):f.setTerrain({source:"mapbox-dem",exaggeration:1.5})}$(async()=>{mapboxgl.accessToken="pk.eyJ1IjoibHN0aXoiLCJhIjoiY2s5dGtnNTZ2MWVybzNobjEyam0yd2E3MyJ9.6dCvGbS93SKGMbOqZA4Qag",i(0,f=new Re.Map({container:h,style:u,hash:!0,center:[r,o],zoom:n,maxZoom:l,bearing:g,pitch:c,logoPosition:"top-right",attributionControl:!1})),f.once("load",e=>{p(),m(),f.resize()})}),Fe.forEach(e=>{e.items.forEach(e=>{d(e,50)})});G(Be.subscribe(e=>{f&&e&&f.setLayoutProperty(e.ly,"visibility",e.vis)}));G(Pe.subscribe(e=>{if(f&&e)if("removeestructuralwms"===e&&(f.removeLayer("wmss"),f.removeSource("wmss")),"estructuralwms"===e){let e="https://geoserveis.icgc.cat/arcgis/services/geotermia/estructural/MapServer/WMSServer?REQUEST=GetMap&SERVICE=WMS&VERSION=1.3.0&LAYERS=0&STYLES=&FORMAT=image/png&BGCOLOR=0xFFFFFF&TRANSPARENT=FALSE&CRS=EPSG:3857&BBOX={bbox-epsg-3857}&WIDTH=817&HEIGHT=836";f.addSource("wmss",{type:"raster",tiles:[e],minzoom:6,maxzoom:16}),f.addLayer({id:"wmss",type:"raster",source:"wmss",paint:{"raster-opacity":.6}})}else{let t="https://geoserveis.icgc.cat/arcgis/services/geotermia/estructural/MapServer/WMSServer?REQUEST=GetMap&SERVICE=WMS&VERSION=1.3.0&LAYERS=0&STYLES=&FORMAT=image/png&BGCOLOR=0xFFFFFF&TRANSPARENT=FALSE&CRS=EPSG:3857&BBOX={bbox-epsg-3857}&WIDTH=817&HEIGHT=836";f.addSource("wmsos",{type:"raster",tiles:[t],minzoom:6,maxzoom:16}),f.addLayer({id:"wmsos",type:"raster",source:"wmsos",paint:{"raster-opacity":0}}),f.setStyle(e),setTimeout(()=>{f.setTerrain(),f.removeLayer("sky"),p(),f.removeLayer("wmsos"),f.removeSource("wmsos")},1e3)}}));G(Me.subscribe(e=>{f&&e&&f.setPaintProperty(e.ly,"fill-opacity",e.op)}));let y="";G(Ie.subscribe(e=>{if(f&&e){if(""!==y&&f.removeLayer(y),"talls"===e.id){let o=e.item.layer.id;for(var t=["all",["in","_symbol",e.item.layer.filter[2]],["in","NOM_TALL",e.nom]],i=f.getStyle().layers,a=0;a<i.length;a++)if("Talls geològics/5704"===i[a].id){s=i[a].id;break}f.addLayer({id:o+"_highlight",type:"line",source:"infogeo","source-layer":"Talls geològics",layout:{visibility:"visible"},paint:{"line-opacity":1,"line-color":"#ADE5FF","line-width":5.033333},filter:["in","NOM_TALL",e.item.properties.NOM_TALL]},s),y=o+"_highlight",f.setFilter(o+"_highlight",t)}if("polygonEsquemes"===e.id){let o=e.item.layer.id;for(t=["all",["in","_symbol",e.item.layer.filter[2]],["in","IDABS",e.idabs]],i=f.getStyle().layers,a=0;a<i.length;a++)if("Registre geològic/Esquemes de relacions estratigràfiques"===i[a].id){s=i[a].id;break}f.addLayer({id:o+"_highlight",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",layout:{visibility:"visible"},paint:{"line-opacity":1,"line-color":"#ADE5FF","line-width":5.033333},filter:["in","IDABS",e.item.properties.IDABS]},s),y=o+"_highlight",f.setFilter(o+"_highlight",t)}if("polygonColumnes"===e.id){let o=e.item.layer.id,r=e.item.layer.filter,n=e.item.layer["source-layer"];for(t=["all",["in","_symbol",r[2]],["in","IDABS",e.idabs]],i=f.getStyle().layers,a=0;a<i.length;a++)if("Registre geològic/Columnes estratigràfiques/Columnes del Paleozoic/Paleozoic LINK/Paleozoic"===i[a].id){s=i[a].id;break}f.addLayer({id:o+"_highlight",type:"fill",source:"infogeo","source-layer":n,layout:{visibility:"visible"},paint:{"fill-outline-color":"#000000","fill-color":"#ADE5FF","fill-opacity":.75},filter:["in","_symbol",r[2]]},s),y=o+"_highlight",f.setFilter(o+"_highlight",t)}if("polygonsQt"===e.id){let o=e.item.layer.id,r=e.item.layer.filter;for(t=["all",["in","_symbol",r[2]],["in","IDABS",e.idabs]],i=f.getStyle().layers,a=0;a<i.length;a++)if("QUATERNARI/Unitats geològiques:1/QHac"===i[a].id){s=i[a].id;break}f.addLayer({id:o+"_highlight",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:1",layout:{visibility:"visible"},paint:{"fill-outline-color":"#000000","fill-color":"#ADE5FF","fill-opacity":.75},filter:["in","_symbol",r[2]]},s),y=o+"_highlight",f.setFilter(o+"_highlight",t)}if("polygonsBs"===e.id){let o=e.item.layer.id,r=e.item.layer.filter;var s;for(t=["all",["in","_symbol",r[2]],["in","IDABS",e.idabs]],i=f.getStyle().layers,a=0;a<i.length;a++)if("BASAMENT PREQUATERNARI/Unitats geològiques:2/CACe"===i[a].id){s=i[a].id;break}f.addLayer({id:o+"_highlight",type:"fill",source:"infogeo","source-layer":"Unitats geològiques:2",layout:{visibility:"visible"},paint:{"fill-outline-color":"#000000","fill-color":"#ADE5FF","fill-opacity":.75},filter:["in","_symbol",r[2]]},s),y=o+"_highlight",f.setFilter(o+"_highlight",t)}}}));var _=[];G(Ae.subscribe(e=>{if(_=[],f&&e){let t="#00fff2";"fill"===e.ty&&(void 0!==e.op["fill-color"]&&f.setPaintProperty(e.ly,"fill-color",t),void 0!==e.op["fill-pattern"]&&(f.setPaintProperty(e.ly,"fill-pattern",void 0),f.setPaintProperty(e.ly,"fill-color",t))),"line"===e.ty&&(f.setPaintProperty(e.ly,"line-color",t),f.setPaintProperty(e.ly,"line-width",4)),"symbol"===e.ty&&f.setPaintProperty(e.ly,"icon-color",t)}_.push(e)}));G(Se.subscribe(e=>{f&&e&&(""!==y&&f.removeLayer(y),"fill"===e.ty&&(void 0!==e.op["fill-color"]&&f.setPaintProperty(e.ly,"fill-color",e.op["fill-color"]),void 0!==e.op["fill-pattern"]&&(f.setPaintProperty(e.ly,"fill-pattern",e.op["fill-pattern"]),f.setPaintProperty(e.ly,"fill-color",e.op[void 0]))),"line"===e.ty&&(f.setPaintProperty(e.ly,"line-color",e.op["line-color"]),f.setPaintProperty(e.ly,"line-width",e.op["line-width"])),"symbol"===e.ty&&f.setPaintProperty(e.ly,"icon-color",e.op["icon-color"]))}));return G(Te.subscribe(e=>{if(f&&e){const t=e.coords.x,i=e.coords.y;f.jumpTo({center:[t,i],zoom:14})}})),e.$$set=e=>{"lat"in e&&i(2,o=e.lat),"lon"in e&&i(3,r=e.lon),"zoom"in e&&i(4,n=e.zoom),"maxZoom"in e&&i(5,l=e.maxZoom),"style"in e&&i(6,u=e.style),"pitch"in e&&i(7,c=e.pitch),"bearing"in e&&i(8,g=e.bearing),"map"in e&&i(0,f=e.map),"$$scope"in e&&i(9,s=e.$$scope)},[f,h,o,r,n,l,u,c,g,s,a,function(e){H[e?"unshift":"push"](()=>{h=e,i(1,h)})}]}class Ws extends Ce{constructor(e){super(),xe(this,e,Xs,Hs,n,{lat:2,lon:3,zoom:4,maxZoom:5,style:6,pitch:7,bearing:8,map:0})}}function Ks(e){const{getMap:t}=Z(De);return t().addControl(new Re.AttributionControl({compact:!0}),"bottom-right"),[]}class Js extends Ce{constructor(e){super(),xe(this,e,Ks,null,n,{})}}function Ys(e){const{getMap:t}=Z(De),i=t();return $(async()=>{i.addControl(new Re.GeolocateControl({positionOptions:{enableHighAccuracy:!0,watchPosition:!0},accessibleLabelProperty:"name"}),"bottom-right")}),[]}class eo extends Ce{constructor(e){super(),xe(this,e,Ys,null,n,{})}}var to=Oe((function(e,t){function i(e,t,i){void 0===i&&(i={});var a={type:"Feature"};return(0===i.id||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties=t||{},a.geometry=e,a}function a(e,t,a){return void 0===a&&(a={}),i({type:"Point",coordinates:e},t,a)}function s(e,t,a){void 0===a&&(a={});for(var s=0,o=e;s<o.length;s++){var r=o[s];if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var n=0;n<r[r.length-1].length;n++)if(r[r.length-1][n]!==r[0][n])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:e},t,a)}function o(e,t,a){if(void 0===a&&(a={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:e},t,a)}function r(e,t){void 0===t&&(t={});var i={type:"FeatureCollection"};return t.id&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.features=e,i}function n(e,t,a){return void 0===a&&(a={}),i({type:"MultiLineString",coordinates:e},t,a)}function l(e,t,a){return void 0===a&&(a={}),i({type:"MultiPoint",coordinates:e},t,a)}function u(e,t,a){return void 0===a&&(a={}),i({type:"MultiPolygon",coordinates:e},t,a)}function c(e,i){void 0===i&&(i="kilometers");var a=t.factors[i];if(!a)throw new Error(i+" units is invalid");return e*a}function g(e,i){void 0===i&&(i="kilometers");var a=t.factors[i];if(!a)throw new Error(i+" units is invalid");return e/a}function f(e){return 180*(e%(2*Math.PI))/Math.PI}function d(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=i,t.geometry=function(e,t,i){switch(e){case"Point":return a(t).geometry;case"LineString":return o(t).geometry;case"Polygon":return s(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return n(t).geometry;case"MultiPolygon":return u(t).geometry;default:throw new Error(e+" is invalid")}},t.point=a,t.points=function(e,t,i){return void 0===i&&(i={}),r(e.map((function(e){return a(e,t)})),i)},t.polygon=s,t.polygons=function(e,t,i){return void 0===i&&(i={}),r(e.map((function(e){return s(e,t)})),i)},t.lineString=o,t.lineStrings=function(e,t,i){return void 0===i&&(i={}),r(e.map((function(e){return o(e,t)})),i)},t.featureCollection=r,t.multiLineString=n,t.multiPoint=l,t.multiPolygon=u,t.geometryCollection=function(e,t,a){return void 0===a&&(a={}),i({type:"GeometryCollection",geometries:e},t,a)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,t||0);return Math.round(e*i)/i},t.radiansToLength=c,t.lengthToRadians=g,t.lengthToDegrees=function(e,t){return f(g(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=f,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,i){if(void 0===t&&(t="kilometers"),void 0===i&&(i="kilometers"),!(e>=0))throw new Error("length must be a positive number");return c(g(e,t),i)},t.convertArea=function(e,i,a){if(void 0===i&&(i="meters"),void 0===a&&(a="kilometers"),!(e>=0))throw new Error("area must be a positive number");var s=t.areaFactors[i];if(!s)throw new Error("invalid original units");var o=t.areaFactors[a];if(!o)throw new Error("invalid final units");return e/s*o},t.isNumber=d,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!d(e))throw new Error("bbox must only contain numbers")}))},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}}));Le(to);to.earthRadius,to.factors,to.unitsFactors,to.areaFactors,to.feature,to.geometry,to.point,to.points,to.polygon,to.polygons,to.lineString,to.lineStrings,to.featureCollection,to.multiLineString,to.multiPoint,to.multiPolygon,to.geometryCollection,to.round,to.radiansToLength,to.lengthToRadians,to.lengthToDegrees,to.bearingToAzimuth,to.radiansToDegrees,to.degreesToRadians,to.convertLength,to.convertArea,to.isNumber,to.isObject,to.validateBBox,to.validateId,to.radians2degrees,to.degrees2radians,to.distanceToDegrees,to.distanceToRadians,to.radiansToDistance,to.bearingToAngle,to.convertDistance;var io=Oe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCoord=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")},t.getCoords=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},t.containsNumber=function e(t){if(t.length>1&&to.isNumber(t[0])&&to.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return e(t[0]);throw new Error("coordinates must only contain numbers")},t.geojsonType=function(e,t,i){if(!t||!i)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+e.type)},t.featureOf=function(e,t,i){if(!e)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+e.geometry.type)},t.collectionOf=function(e,t,i){if(!e)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+i+", FeatureCollection required");for(var a=0,s=e.features;a<s.length;a++){var o=s[a];if(!o||"Feature"!==o.type||!o.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!o.geometry||o.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+o.geometry.type)}},t.getGeom=function(e){return"Feature"===e.type?e.geometry:e},t.getType=function(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}}));Le(io);io.getCoord,io.getCoords,io.containsNumber,io.geojsonType,io.featureOf,io.collectionOf,io.getGeom,io.getType;var ao=Le(Oe((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){void 0===i&&(i={});var a=io.getCoord(e),s=io.getCoord(t),o=to.degreesToRadians(s[1]-a[1]),r=to.degreesToRadians(s[0]-a[0]),n=to.degreesToRadians(a[1]),l=to.degreesToRadians(s[1]),u=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(r/2),2)*Math.cos(n)*Math.cos(l);return to.radiansToLength(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)),i.units)}})));function so(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oo(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ro="controls-source-line",no="controls-source-symbol";function lo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e}}}function uo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:"FeatureCollection",features:e.map((function(e,i){return{type:"Feature",properties:{text:t[i]},geometry:{type:"Point",coordinates:e}}}))}}function co(e){return e<1?"".concat((1e3*e).toFixed()," m"):"".concat(e.toFixed(2)," km")}var go=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};so(this,e),this.isMeasuring=!1,this.markers=[],this.coordinates=[],this.labels=[],this.units=t.units||"kilometers",this.font=t.font||["Roboto Medium"],this.fontSize=t.fontSize||12,this.fontHalo=t.fontHalo||1,this.labelFormat=t.labelFormat||co,this.mainColor=t.mainColor||"#263238",this.secondaryColor=t.secondaryColor||"#fff",this.mapClickListener=this.mapClickListener.bind(this),this.styleLoadListener=this.styleLoadListener.bind(this)}var t,i,a;return t=e,(i=[{key:"insertControls",value:function(){this.container=document.createElement("div"),this.container.classList.add("mapboxgl-ctrl"),this.container.classList.add("mapboxgl-ctrl-group"),this.container.classList.add("mapboxgl-ctrl-ruler"),this.button=document.createElement("button"),this.button.setAttribute("type","button"),this.button.appendChild((new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="22" height="12" viewBox="0 0 22 12" fill="#505050">\n    <path fill-rule="evenodd" fill="none" d="M-1-6h24v24H-1z"/>\n    <path d="M20 0H2C.9 0 0 .9 0 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zm0 10H2V2h2v4h2V2h2v4h2V2h2v4h2V2h2v4h2V2h2v8z"/>\n</svg>',"image/svg+xml").firstChild),this.container.appendChild(this.button)}},{key:"draw",value:function(){this.map.addSource(ro,{type:"geojson",data:lo(this.coordinates)}),this.map.addSource(no,{type:"geojson",data:uo(this.coordinates,this.labels)}),this.map.addLayer({id:"controls-layer-line",type:"line",source:ro,paint:{"line-color":this.mainColor,"line-width":2}}),this.map.addLayer({id:"controls-layer-symbol",type:"symbol",source:no,layout:{"text-field":"{text}","text-font":this.font,"text-anchor":"top","text-size":this.fontSize,"text-offset":[0,.8]},paint:{"text-color":this.mainColor,"text-halo-color":this.secondaryColor,"text-halo-width":this.fontHalo}})}},{key:"measuringOn",value:function(){this.isMeasuring=!0,this.markers=[],this.coordinates=[],this.labels=[],this.map.getCanvas().style.cursor="crosshair",this.button.classList.add("-active"),this.draw(),this.map.on("click",this.mapClickListener),this.map.on("style.load",this.styleLoadListener),this.map.fire("ruler.on")}},{key:"measuringOff",value:function(){this.isMeasuring=!1,this.map.getCanvas().style.cursor="",this.button.classList.remove("-active"),this.map.removeLayer("controls-layer-line"),this.map.removeLayer("controls-layer-symbol"),this.map.removeSource(ro),this.map.removeSource(no),this.markers.forEach((function(e){return e.remove()})),this.map.off("click",this.mapClickListener),this.map.off("style.load",this.styleLoadListener),this.map.fire("ruler.off")}},{key:"mapClickListener",value:function(e){var t=this,i=document.createElement("div");i.style.width="12px",i.style.height="12px",i.style.borderRadius="50%",i.style.background=this.secondaryColor,i.style.boxSizing="border-box",i.style.border="2px solid ".concat(this.mainColor);var a=new Re.Marker({element:i,draggable:!0}).setLngLat(e.lngLat).addTo(this.map);this.coordinates.push([e.lngLat.lng,e.lngLat.lat]),this.labels=this.coordinatesToLabels(),this.map.getSource(ro).setData(lo(this.coordinates)),this.map.getSource(no).setData(uo(this.coordinates,this.labels)),this.markers.push(a),a.on("drag",(function(){var e=t.markers.indexOf(a),i=a.getLngLat();t.coordinates[e]=[i.lng,i.lat],t.labels=t.coordinatesToLabels(),t.map.getSource(ro).setData(lo(t.coordinates)),t.map.getSource(no).setData(uo(t.coordinates,t.labels))}))}},{key:"coordinatesToLabels",value:function(){var e=this.coordinates,t=this.units,i=this.labelFormat,a=0;return e.map((function(s,o){return 0===o?i(0):(a+=ao(e[o-1],e[o],{units:t}),i(a))}))}},{key:"styleLoadListener",value:function(){this.draw()}},{key:"onAdd",value:function(e){var t=this;return this.map=e,this.insertControls(),this.button.addEventListener("click",(function(){t.isMeasuring?t.measuringOff():t.measuringOn()})),this.container}},{key:"onRemove",value:function(){this.isMeasuring&&this.measuringOff(),this.map.off("click",this.mapClickListener),this.container.parentNode.removeChild(this.container),this.map=void 0}}])&&oo(t.prototype,i),a&&oo(t,a),e}();function fo(e){const{getMap:t}=Z(De),i=t();return $(async()=>{i.addControl(new go({font:["FiraSans-Italic"],units:"meters",mainColor:"#263238",labelFormat:e=>e.toFixed(2)+" m"}),"bottom-right"),i.on("ruler.on",()=>console.log("ruler: on")),i.on("ruler.off",()=>console.log("ruler: off")),document.querySelector(".mapboxgl-ctrl-ruler").setAttribute("title","Mesura distàncies")}),[]}class ho extends Ce{constructor(e){super(),xe(this,e,fo,null,n,{})}}function po(e){const{getMap:t}=Z(De);return t().addControl(new Re.ScaleControl({maxWidth:100,unit:"metric"}),"bottom-right"),document.querySelector(".mapboxgl-ctrl-scale").setAttribute("title","Escala gràfica"),[]}class mo extends Ce{constructor(e){super(),xe(this,e,po,null,n,{})}}function yo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _o(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var bo=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};yo(this,e),this.instant="boolean"!=typeof t.instant||t.instant,this.onRotate=this.onRotate.bind(this)}var t,i,a;return t=e,(i=[{key:"insertControls",value:function(){this.container=document.createElement("div"),this.button=document.createElement("button"),this.button.setAttribute("type","button"),this.container.classList.add("mapboxgl-ctrl"),this.container.classList.add("mapboxgl-ctrl-group"),this.container.classList.add("mapboxgl-ctrl-compass"),this.pointer=(new DOMParser).parseFromString('<svg viewBox="0 0 24 24" width="22" height="22" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#f44336" d="M12 3l4 8H8z"/>\n        <path fill="#9E9E9E" d="M12 21l-4-8h8z"/>\n    </g>\n</svg>',"image/svg+xml").firstChild,this.instant&&this.container.classList.add("-active"),this.container.appendChild(this.button),this.button.appendChild(this.pointer)}},{key:"onAdd",value:function(e){var t=this;return this.map=e,this.insertControls(),this.button.addEventListener("click",(function(){t.map.easeTo({bearing:0,pitch:0})})),this.map.on("rotate",this.onRotate),this.onRotate(),this.container}},{key:"onRemove",value:function(){this.container.parentNode.removeChild(this.container),this.map=void 0}},{key:"onRotate",value:function(){var e=-1*this.map.getBearing();this.instant||(0===e?this.container.classList.remove("-active"):this.container.classList.add("-active")),this.pointer.style.transform="rotate(".concat(e,"deg)")}}])&&_o(t.prototype,i),a&&_o(t,a),e}();function vo(e){const{getMap:t}=Z(De);return t().addControl(new bo,"bottom-right"),document.querySelector(".mapboxgl-ctrl-compass").setAttribute("title","Torna al Nord"),[]}class xo extends Ce{constructor(e){super(),xe(this,e,vo,null,n,{})}}var Co=484813681109536e-20,qo=Math.PI/2,Uo=.017453292519943295,wo=57.29577951308232,Eo=Math.PI/4,Bo=2*Math.PI,Po=3.14159265359,Mo={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},To={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Ao=/[\s_\-\/\(\)]/g;function So(e,t){if(e[t])return e[t];for(var i,a=Object.keys(e),s=t.toLowerCase().replace(Ao,""),o=-1;++o<a.length;)if((i=a[o]).toLowerCase().replace(Ao,"")===s)return e[i]}function Io(e){var t,i,a,s={},o=e.split("+").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var i=t.split("=");return i.push(!0),e[i[0].toLowerCase()]=i[1],e}),{}),r={proj:"projName",datum:"datumCode",rf:function(e){s.rf=parseFloat(e)},lat_0:function(e){s.lat0=e*Uo},lat_1:function(e){s.lat1=e*Uo},lat_2:function(e){s.lat2=e*Uo},lat_ts:function(e){s.lat_ts=e*Uo},lon_0:function(e){s.long0=e*Uo},lon_1:function(e){s.long1=e*Uo},lon_2:function(e){s.long2=e*Uo},alpha:function(e){s.alpha=parseFloat(e)*Uo},lonc:function(e){s.longc=e*Uo},x_0:function(e){s.x0=parseFloat(e)},y_0:function(e){s.y0=parseFloat(e)},k_0:function(e){s.k0=parseFloat(e)},k:function(e){s.k0=parseFloat(e)},a:function(e){s.a=parseFloat(e)},b:function(e){s.b=parseFloat(e)},r_a:function(){s.R_A=!0},zone:function(e){s.zone=parseInt(e,10)},south:function(){s.utmSouth=!0},towgs84:function(e){s.datum_params=e.split(",").map((function(e){return parseFloat(e)}))},to_meter:function(e){s.to_meter=parseFloat(e)},units:function(e){s.units=e;var t=So(To,e);t&&(s.to_meter=t.to_meter)},from_greenwich:function(e){s.from_greenwich=e*Uo},pm:function(e){var t=So(Mo,e);s.from_greenwich=(t||parseFloat(e))*Uo},nadgrids:function(e){"@null"===e?s.datumCode="none":s.nadgrids=e},axis:function(e){3===e.length&&-1!=="ewnsud".indexOf(e.substr(0,1))&&-1!=="ewnsud".indexOf(e.substr(1,1))&&-1!=="ewnsud".indexOf(e.substr(2,1))&&(s.axis=e)}};for(t in o)i=o[t],t in r?"function"==typeof(a=r[t])?a(i):s[a]=i:s[t]=i;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s}var Do=/\s/,zo=/[A-Za-z]/,ko=/[A-Za-z84]/,Fo=/[,\]]/,Lo=/[\d\.E\-\+]/;function Oo(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function Ro(e,t,i){Array.isArray(t)&&(i.unshift(t),t=null);var a=t?{}:e,s=i.reduce((function(e,t){return No(t,e),e}),a);t&&(e[t]=s)}function No(e,t){if(Array.isArray(e)){var i=e.shift();if("PARAMETER"===i&&(i=e.shift()),1===e.length)return Array.isArray(e[0])?(t[i]={},void No(e[0],t[i])):void(t[i]=e[0]);if(e.length)if("TOWGS84"!==i){if("AXIS"===i)return i in t||(t[i]=[]),void t[i].push(e);var a;switch(Array.isArray(i)||(t[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[i]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&No(e[2],t[i]));case"SPHEROID":case"ELLIPSOID":return t[i]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&No(e[3],t[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void Ro(t,i,e);default:for(a=-1;++a<e.length;)if(!Array.isArray(e[a]))return No(e,t[i]);return Ro(t,i,e)}}else t[i]=e;else t[i]=!0}else t[e]=!0}Oo.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;Do.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case 1:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},Oo.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(Fo.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},Oo.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Oo.prototype.number=function(e){if(!Lo.test(e)){if(Fo.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},Oo.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},Oo.prototype.keyword=function(e){if(ko.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=1)}if(!Fo.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},Oo.prototype.neutral=function(e){if(zo.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(Lo.test(e))return this.word=e,void(this.state=3);if(!Fo.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},Oo.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function $o(e){return.017453292519943295*e}function Go(e){var t=new Oo(e).output(),i=t.shift(),a=t.shift();t.unshift(["name",a]),t.unshift(["type",i]);var s={};return No(t,s),function(e){if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"==typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",i=0,a=e.AXIS.length;i<a;++i){var s=e.AXIS[i][0].toLowerCase();-1!==s.indexOf("north")?t+="n":-1!==s.indexOf("south")?t+="s":-1!==s.indexOf("east")?t+="e":-1!==s.indexOf("west")&&(t+="w")}2===t.length&&(t+="u"),3===t.length&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var o=e.GEOGCS;function r(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(o=e),o&&(o.DATUM?e.datumCode=o.DATUM.name.toLowerCase():e.datumCode=o.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(e.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=o.DATUM.SPHEROID.a,e.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(e.datum_params=o.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",$o],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",$o],["x0","false_easting",r],["y0","false_northing",r],["long0","central_meridian",$o],["lat0","latitude_of_origin",$o],["lat0","standard_parallel_1",$o],["lat1","standard_parallel_1",$o],["lat2","standard_parallel_2",$o],["azimuth","Azimuth"],["alpha","azimuth",$o],["srsCode","name"]].forEach((function(t){return i=e,s=(a=t)[0],o=a[1],void(!(s in i)&&o in i&&(i[s]=i[o],3===a.length&&(i[s]=a[2](i[s]))));var i,a,s,o})),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=$o(e.lat1>0?90:-90),e.lat_ts=e.lat1)}(s),s}function Vo(e){var t=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?Vo[e]=Io(arguments[1]):Vo[e]=Go(arguments[1]):Vo[e]=i}else if(1===arguments.length){if(Array.isArray(e))return e.map((function(e){Array.isArray(e)?Vo.apply(t,e):Vo(e)}));if("string"==typeof e){if(e in Vo)return Vo[e]}else"EPSG"in e?Vo["EPSG:"+e.EPSG]=e:"ESRI"in e?Vo["ESRI:"+e.ESRI]=e:"IAU2000"in e?Vo["IAU2000:"+e.IAU2000]=e:console.log(e);return}}!function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}(Vo);var Zo=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var Qo=["3857","900913","3785","102113"];function jo(e){if(!function(e){return"string"==typeof e}(e))return e;if(function(e){return e in Vo}(e))return Vo[e];if(function(e){return Zo.some((function(t){return e.indexOf(t)>-1}))}(e)){var t=Go(e);if(function(e){var t=So(e,"authority");if(t){var i=So(t,"epsg");return i&&Qo.indexOf(i)>-1}}(t))return Vo["EPSG:3857"];var i=function(e){var t=So(e,"extension");if(t)return So(t,"proj4")}(t);return i?Io(i):t}return function(e){return"+"===e[0]}(e)?Io(e):void 0}function Ho(e,t){var i,a;if(e=e||{},!t)return e;for(a in t)void 0!==(i=t[a])&&(e[a]=i);return e}function Xo(e,t,i){var a=e*t;return i/Math.sqrt(1-a*a)}function Wo(e){return e<0?-1:1}function Ko(e){return Math.abs(e)<=Po?e:e-Wo(e)*Bo}function Jo(e,t,i){var a=e*i,s=.5*e;return a=Math.pow((1-a)/(1+a),s),Math.tan(.5*(qo-t))/a}function Yo(e,t){for(var i,a,s=.5*e,o=qo-2*Math.atan(t),r=0;r<=15;r++)if(i=e*Math.sin(o),o+=a=qo-2*Math.atan(t*Math.pow((1-i)/(1+i),s))-o,Math.abs(a)<=1e-10)return o;return-9999}function er(e){return e}var tr=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Xo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,i,a=e.x,s=e.y;if(s*wo>90&&s*wo<-90&&a*wo>180&&a*wo<-180)return null;if(Math.abs(Math.abs(s)-qo)<=1e-10)return null;if(this.sphere)t=this.x0+this.a*this.k0*Ko(a-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(Eo+.5*s));else{var o=Math.sin(s),r=Jo(this.e,s,o);t=this.x0+this.a*this.k0*Ko(a-this.long0),i=this.y0-this.a*this.k0*Math.log(r)}return e.x=t,e.y=i,e},inverse:function(e){var t,i,a=e.x-this.x0,s=e.y-this.y0;if(this.sphere)i=qo-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var o=Math.exp(-s/(this.a*this.k0));if(-9999===(i=Yo(this.e,o)))return null}return t=Ko(this.long0+a/(this.a*this.k0)),e.x=t,e.y=i,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:er,inverse:er,names:["longlat","identity"]}],ir={},ar=[];function sr(e,t){var i=ar.length;return e.names?(ar[i]=e,e.names.forEach((function(e){ir[e.toLowerCase()]=i})),this):(console.log(t),!0)}var or={start:function(){tr.forEach(sr)},add:sr,get:function(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==ir[t]&&ar[ir[t]]?ar[ir[t]]:void 0}},rr={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},nr=rr.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};rr.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var lr={};function ur(e,t){if(!(this instanceof ur))return new ur(e);t=t||function(e){if(e)throw e};var i=jo(e);if("object"==typeof i){var a=ur.projections.get(i.projName);if(a){if(i.datumCode&&"none"!==i.datumCode){var s=So(lr,i.datumCode);s&&(i.datum_params=s.towgs84?s.towgs84.split(","):null,i.ellps=s.ellipse,i.datumName=s.datumName?s.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84";var o,r,n,l,u,c,g,f=function(e,t,i,a,s){if(!e){var o=So(rr,a);o||(o=nr),e=o.a,t=o.b,i=o.rf}return i&&!t&&(t=(1-1/i)*e),(0===i||Math.abs(e-t)<1e-10)&&(s=!0,t=e),{a:e,b:t,rf:i,sphere:s}}(i.a,i.b,i.rf,i.ellps,i.sphere),d=(o=f.a,r=f.b,f.rf,n=i.R_A,c=((l=o*o)-(u=r*r))/l,g=0,n?(l=(o*=1-c*(.16666666666666666+c*(.04722222222222222+.022156084656084655*c)))*o,c=0):g=Math.sqrt(c),{es:c,e:g,ep2:(l-u)/u}),h=i.datum||function(e,t,i,a,s,o){var r={};return r.datum_type=void 0===e||"none"===e?5:4,t&&(r.datum_params=t.map(parseFloat),0===r.datum_params[0]&&0===r.datum_params[1]&&0===r.datum_params[2]||(r.datum_type=1),r.datum_params.length>3&&(0===r.datum_params[3]&&0===r.datum_params[4]&&0===r.datum_params[5]&&0===r.datum_params[6]||(r.datum_type=2,r.datum_params[3]*=Co,r.datum_params[4]*=Co,r.datum_params[5]*=Co,r.datum_params[6]=r.datum_params[6]/1e6+1))),r.a=i,r.b=a,r.es=s,r.ep2=o,r}(i.datumCode,i.datum_params,f.a,f.b,d.es,d.ep2);Ho(this,i),Ho(this,a),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=d.es,this.e=d.e,this.ep2=d.ep2,this.datum=h,this.init(),t(null,this)}else t(e)}else t(e)}function cr(e,t,i){var a,s,o,r,n=e.x,l=e.y,u=e.z?e.z:0;if(l<-qo&&l>-1.001*qo)l=-qo;else if(l>qo&&l<1.001*qo)l=qo;else{if(l<-qo)return{x:-1/0,y:-1/0,z:e.z};if(l>qo)return{x:1/0,y:1/0,z:e.z}}return n>Math.PI&&(n-=2*Math.PI),s=Math.sin(l),r=Math.cos(l),o=s*s,{x:((a=i/Math.sqrt(1-t*o))+u)*r*Math.cos(n),y:(a+u)*r*Math.sin(n),z:(a*(1-t)+u)*s}}function gr(e,t,i,a){var s,o,r,n,l,u,c,g,f,d,h,p,m,y,_,b=e.x,v=e.y,x=e.z?e.z:0;if(s=Math.sqrt(b*b+v*v),o=Math.sqrt(b*b+v*v+x*x),s/i<1e-12){if(y=0,o/i<1e-12)return qo,_=-a,{x:e.x,y:e.y,z:e.z}}else y=Math.atan2(v,b);r=x/o,g=(n=s/o)*(1-t)*(l=1/Math.sqrt(1-t*(2-t)*n*n)),f=r*l,m=0;do{m++,u=t*(c=i/Math.sqrt(1-t*f*f))/(c+(_=s*g+x*f-c*(1-t*f*f))),p=(h=r*(l=1/Math.sqrt(1-u*(2-u)*n*n)))*g-(d=n*(1-u)*l)*f,g=d,f=h}while(p*p>1e-24&&m<30);return{x:y,y:Math.atan(h/Math.abs(d)),z:_}}function fr(e){return 1===e||2===e}function dr(e,t,i){return function(e,t){return e.datum_type===t.datum_type&&(!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(1===e.datum_type?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:2!==e.datum_type||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]))}(e,t)||5===e.datum_type||5===t.datum_type?i:e.es!==t.es||e.a!==t.a||fr(e.datum_type)||fr(t.datum_type)?(i=cr(i,e.es,e.a),fr(e.datum_type)&&(i=function(e,t,i){if(1===t)return{x:e.x+i[0],y:e.y+i[1],z:e.z+i[2]};if(2===t){var a=i[0],s=i[1],o=i[2],r=i[3],n=i[4],l=i[5],u=i[6];return{x:u*(e.x-l*e.y+n*e.z)+a,y:u*(l*e.x+e.y-r*e.z)+s,z:u*(-n*e.x+r*e.y+e.z)+o}}}(i,e.datum_type,e.datum_params)),fr(t.datum_type)&&(i=function(e,t,i){if(1===t)return{x:e.x-i[0],y:e.y-i[1],z:e.z-i[2]};if(2===t){var a=i[0],s=i[1],o=i[2],r=i[3],n=i[4],l=i[5],u=i[6],c=(e.x-a)/u,g=(e.y-s)/u,f=(e.z-o)/u;return{x:c+l*g-n*f,y:-l*c+g+r*f,z:n*c-r*g+f}}}(i,t.datum_type,t.datum_params)),gr(i,t.es,t.a,t.b)):i}function hr(e,t,i){var a,s,o,r=i.x,n=i.y,l=i.z||0,u={};for(o=0;o<3;o++)if(!t||2!==o||void 0!==i.z)switch(0===o?(a=r,s=-1!=="ew".indexOf(e.axis[o])?"x":"y"):1===o?(a=n,s=-1!=="ns".indexOf(e.axis[o])?"y":"x"):(a=l,s="z"),e.axis[o]){case"e":case"w":case"n":case"s":u[s]=a;break;case"u":void 0!==i[s]&&(u.z=a);break;case"d":void 0!==i[s]&&(u.z=-a);break;default:return null}return u}function pr(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function mr(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function yr(e,t,i){var a;if(Array.isArray(i)&&(i=pr(i)),function(e){mr(e.x),mr(e.y)}(i),e.datum&&t.datum&&function(e,t){return(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode||(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode}(e,t)&&(i=yr(e,a=new ur("WGS84"),i),e=a),"enu"!==e.axis&&(i=hr(e,!1,i)),"longlat"===e.projName)i={x:i.x*Uo,y:i.y*Uo,z:i.z||0};else if(e.to_meter&&(i={x:i.x*e.to_meter,y:i.y*e.to_meter,z:i.z||0}),!(i=e.inverse(i)))return;return e.from_greenwich&&(i.x+=e.from_greenwich),i=dr(e.datum,t.datum,i),t.from_greenwich&&(i={x:i.x-t.from_greenwich,y:i.y,z:i.z||0}),"longlat"===t.projName?i={x:i.x*wo,y:i.y*wo,z:i.z||0}:(i=t.forward(i),t.to_meter&&(i={x:i.x/t.to_meter,y:i.y/t.to_meter,z:i.z||0})),"enu"!==t.axis?hr(t,!0,i):i}lr.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},lr.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},lr.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},lr.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},lr.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},lr.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},lr.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},lr.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},lr.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},lr.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},lr.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},lr.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},lr.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},lr.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},lr.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},lr.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},lr.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},ur.projections=or,ur.projections.start();var _r=ur("WGS84");function br(e,t,i){var a,s,o;return Array.isArray(i)?(a=yr(e,t,i)||{x:NaN,y:NaN},i.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name?"number"==typeof a.z?[a.x,a.y,a.z].concat(i.splice(3)):[a.x,a.y,i[2]].concat(i.splice(3)):[a.x,a.y].concat(i.splice(2)):[a.x,a.y]):(s=yr(e,t,i),2===(o=Object.keys(i)).length||o.forEach((function(a){if(void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name){if("x"===a||"y"===a||"z"===a)return}else if("x"===a||"y"===a)return;s[a]=i[a]})),s)}function vr(e){return e instanceof ur?e:e.oProj?e.oProj:ur(e)}function xr(e,t,i){e=vr(e);var a,s=!1;return void 0===t?(t=e,e=_r,s=!0):(void 0!==t.x||Array.isArray(t))&&(i=t,t=e,e=_r,s=!0),t=vr(t),i?br(e,t,i):(a={forward:function(i){return br(e,t,i)},inverse:function(i){return br(t,e,i)}},s&&(a.oProj=t),a)}var Cr=65,qr=73,Ur=79,wr={forward:Er,inverse:function(e){var t=Tr(Ir(e.toUpperCase()));if(t.lat&&t.lon)return[t.lon,t.lat,t.lon,t.lat];return[t.left,t.bottom,t.right,t.top]},toPoint:Br};function Er(e,t){return t=t||5,function(e,t){var i="00000"+e.easting,a="00000"+e.northing;return e.zoneNumber+e.zoneLetter+(d=e.easting,h=e.northing,p=e.zoneNumber,m=Sr(p),y=Math.floor(d/1e5),_=Math.floor(h/1e5)%20,s=y,o=_,r=m,n=r-1,l="AJSAJS".charCodeAt(n),u="AFAFAF".charCodeAt(n),c=l+s-1,g=u+o,f=!1,c>90&&(c=c-90+Cr-1,f=!0),(c===qr||l<qr&&c>qr||(c>qr||l<qr)&&f)&&c++,(c===Ur||l<Ur&&c>Ur||(c>Ur||l<Ur)&&f)&&++c===qr&&c++,c>90&&(c=c-90+Cr-1),g>86?(g=g-86+Cr-1,f=!0):f=!1,(g===qr||u<qr&&g>qr||(g>qr||u<qr)&&f)&&g++,(g===Ur||u<Ur&&g>Ur||(g>Ur||u<Ur)&&f)&&++g===qr&&g++,g>86&&(g=g-86+Cr-1),String.fromCharCode(c)+String.fromCharCode(g))+i.substr(i.length-5,t)+a.substr(a.length-5,t);var s,o,r,n,l,u,c,g,f;var d,h,p,m,y,_}(function(e){var t,i,a,s,o,r,n,l=e.lat,u=e.lon,c=6378137,g=Pr(l),f=Pr(u);n=Math.floor((u+180)/6)+1,180===u&&(n=60);l>=56&&l<64&&u>=3&&u<12&&(n=32);l>=72&&l<84&&(u>=0&&u<9?n=31:u>=9&&u<21?n=33:u>=21&&u<33?n=35:u>=33&&u<42&&(n=37));r=Pr(6*(n-1)-180+3),.006739496752268451,t=c/Math.sqrt(1-.00669438*Math.sin(g)*Math.sin(g)),i=Math.tan(g)*Math.tan(g),a=.006739496752268451*Math.cos(g)*Math.cos(g),s=Math.cos(g)*(f-r),o=c*(.9983242984503243*g-.002514607064228144*Math.sin(2*g)+2639046602129982e-21*Math.sin(4*g)-3.418046101696858e-9*Math.sin(6*g));var d=.9996*t*(s+(1-i+a)*s*s*s/6+(5-18*i+i*i+72*a-.39089081163157013)*s*s*s*s*s/120)+5e5,h=.9996*(o+t*Math.tan(g)*(s*s/2+(5-i+9*a+4*a*a)*s*s*s*s/24+(61-58*i+i*i+600*a-2.2240339282485886)*s*s*s*s*s*s/720));l<0&&(h+=1e7);return{northing:Math.round(h),easting:Math.round(d),zoneNumber:n,zoneLetter:Ar(l)}}({lat:e[1],lon:e[0]}),t)}function Br(e){var t=Tr(Ir(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Pr(e){return e*(Math.PI/180)}function Mr(e){return e/Math.PI*180}function Tr(e){var t=e.northing,i=e.easting,a=e.zoneLetter,s=e.zoneNumber;if(s<0||s>60)return null;var o,r,n,l,u,c,g,f,d=6378137,h=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),p=i-5e5,m=t;a<"N"&&(m-=1e7),c=6*(s-1)-180+3,f=(g=m/.9996/6367449.145945056)+(3*h/2-27*h*h*h/32)*Math.sin(2*g)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*g)+151*h*h*h/96*Math.sin(6*g),o=d/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),n=.006739496752268451*Math.cos(f)*Math.cos(f),l=.99330562*d/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),u=p/(.9996*o);var y=f-o*Math.tan(f)/l*(u*u/2-(5+3*r+10*n-4*n*n-.06065547077041606)*u*u*u*u/24+(61+90*r+298*n+45*r*r-1.6983531815716497-3*n*n)*u*u*u*u*u*u/720);y=Mr(y);var _,b=(u-(1+2*r+n)*u*u*u/6+(5-2*n+28*r-3*n*n+.05391597401814761+24*r*r)*u*u*u*u*u/120)/Math.cos(f);if(b=c+Mr(b),e.accuracy){var v=Tr({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});_={top:v.lat,right:v.lon,bottom:y,left:b}}else _={lat:y,lon:b};return _}function Ar(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function Sr(e){var t=e%6;return 0===t&&(t=6),t}function Ir(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,i=e.length,a=null,s="",o=0;!/[A-Z]/.test(t=e.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+e;s+=t,o++}var r=parseInt(s,10);if(0===o||o+3>i)throw"MGRSPoint bad conversion from: "+e;var n=e.charAt(o++);if(n<="A"||"B"===n||"Y"===n||n>="Z"||"I"===n||"O"===n)throw"MGRSPoint zone letter "+n+" not handled: "+e;a=e.substring(o,o+=2);for(var l=Sr(r),u=function(e,t){var i="AJSAJS".charCodeAt(t-1),a=1e5,s=!1;for(;i!==e.charCodeAt(0);){if(++i===qr&&i++,i===Ur&&i++,i>90){if(s)throw"Bad character: "+e;i=Cr,s=!0}a+=1e5}return a}(a.charAt(0),l),c=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;var i="AFAFAF".charCodeAt(t-1),a=0,s=!1;for(;i!==e.charCodeAt(0);){if(++i===qr&&i++,i===Ur&&i++,i>86){if(s)throw"Bad character: "+e;i=Cr,s=!0}a+=1e5}return a}(a.charAt(1),l);c<Dr(n);)c+=2e6;var g=i-o;if(g%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var f,d,h,p=g/2,m=0,y=0;return p>0&&(f=1e5/Math.pow(10,p),d=e.substring(o,o+p),m=parseFloat(d)*f,h=e.substring(o+p),y=parseFloat(h)*f),{easting:m+u,northing:y+c,zoneLetter:n,zoneNumber:r,accuracy:f}}function Dr(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function zr(e,t,i){if(!(this instanceof zr))return new zr(e,t,i);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var a=e.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=e,this.y=t,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}zr.fromMGRS=function(e){return new zr(Br(e))},zr.prototype.toMGRS=function(e){return Er([this.x,this.y],e)};var kr=.01068115234375;function Fr(e){var t=[];t[0]=1-e*(.25+e*(.046875+e*(.01953125+e*kr))),t[1]=e*(.75-e*(.046875+e*(.01953125+e*kr)));var i=e*e;return t[2]=i*(.46875-e*(.013020833333333334+.007120768229166667*e)),i*=e,t[3]=i*(.3645833333333333-.005696614583333333*e),t[4]=i*e*.3076171875,t}function Lr(e,t,i,a){return i*=t,t*=t,a[0]*e-i*(a[1]+t*(a[2]+t*(a[3]+t*a[4])))}function Or(e,t,i){for(var a=1/(1-t),s=e,o=20;o;--o){var r=Math.sin(s),n=1-t*r*r;if(s-=n=(Lr(s,r,Math.cos(s),i)-e)*(n*Math.sqrt(n))*a,Math.abs(n)<1e-10)return s}return s}var Rr={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Fr(this.es),this.ml0=Lr(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,i,a,s=e.x,o=e.y,r=Ko(s-this.long0),n=Math.sin(o),l=Math.cos(o);if(this.es){var u=l*r,c=Math.pow(u,2),g=this.ep2*Math.pow(l,2),f=Math.pow(g,2),d=Math.abs(l)>1e-10?Math.tan(o):0,h=Math.pow(d,2),p=Math.pow(h,2);t=1-this.es*Math.pow(n,2),u/=Math.sqrt(t);var m=Lr(o,n,l,this.en);i=this.a*(this.k0*u*(1+c/6*(1-h+g+c/20*(5-18*h+p+14*g-58*h*g+c/42*(61+179*p-p*h-479*h)))))+this.x0,a=this.a*(this.k0*(m-this.ml0+n*r*u/2*(1+c/12*(5-h+9*g+4*f+c/30*(61+p-58*h+270*g-330*h*g+c/56*(1385+543*p-p*h-3111*h))))))+this.y0}else{var y=l*Math.sin(r);if(Math.abs(Math.abs(y)-1)<1e-10)return 93;if(i=.5*this.a*this.k0*Math.log((1+y)/(1-y))+this.x0,a=l*Math.cos(r)/Math.sqrt(1-Math.pow(y,2)),(y=Math.abs(a))>=1){if(y-1>1e-10)return 93;a=0}else a=Math.acos(a);o<0&&(a=-a),a=this.a*this.k0*(a-this.lat0)+this.y0}return e.x=i,e.y=a,e},inverse:function(e){var t,i,a,s,o=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);if(this.es)if(i=Or(t=this.ml0+r/this.k0,this.es,this.en),Math.abs(i)<qo){var n=Math.sin(i),l=Math.cos(i),u=Math.abs(l)>1e-10?Math.tan(i):0,c=this.ep2*Math.pow(l,2),g=Math.pow(c,2),f=Math.pow(u,2),d=Math.pow(f,2);t=1-this.es*Math.pow(n,2);var h=o*Math.sqrt(t)/this.k0,p=Math.pow(h,2);a=i-(t*=u)*p/(1-this.es)*.5*(1-p/12*(5+3*f-9*c*f+c-4*g-p/30*(61+90*f-252*c*f+45*d+46*c-p/56*(1385+3633*f+4095*d+1574*d*f)))),s=Ko(this.long0+h*(1-p/6*(1+2*f+c-p/20*(5+28*f+24*d+8*c*f+6*c-p/42*(61+662*f+1320*d+720*d*f))))/l)}else a=qo*Wo(r),s=0;else{var m=Math.exp(o/this.k0),y=.5*(m-1/m),_=this.lat0+r/this.k0,b=Math.cos(_);t=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(y,2))),a=Math.asin(t),r<0&&(a=-a),s=0===y&&0===b?0:Ko(Math.atan2(y,b)+this.long0)}return e.x=s,e.y=a,e},names:["Transverse_Mercator","Transverse Mercator","tmerc"]};function Nr(e){var t=Math.exp(e);return t=(t-1/t)/2}function $r(e,t){e=Math.abs(e),t=Math.abs(t);var i=Math.max(e,t),a=Math.min(e,t)/(i||1);return i*Math.sqrt(1+Math.pow(a,2))}function Gr(e){var t=Math.abs(e);return t=function(e){var t=1+e,i=t-1;return 0===i?e:e*Math.log(t)/i}(t*(1+t/($r(1,t)+1))),e<0?-t:t}function Vr(e,t){for(var i,a=2*Math.cos(2*t),s=e.length-1,o=e[s],r=0;--s>=0;)i=a*o-r+e[s],r=o,o=i;return t+i*Math.sin(2*t)}function Zr(e,t,i){for(var a,s,o=Math.sin(t),r=Math.cos(t),n=Nr(i),l=function(e){var t=Math.exp(e);return t=(t+1/t)/2}(i),u=2*r*l,c=-2*o*n,g=e.length-1,f=e[g],d=0,h=0,p=0;--g>=0;)a=h,s=d,f=u*(h=f)-a-c*(d=p)+e[g],p=c*h-s+u*d;return[(u=o*l)*f-(c=r*n)*p,u*p+c*f]}var Qr={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),i=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),i*=t,this.cgb[1]=i*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),i*=t,this.cgb[2]=i*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=i*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),i*=t,this.cgb[3]=i*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=i*(1237/630+t*(t*(-24832/14175)-2.4)),i*=t,this.cgb[4]=i*(4174/315+t*(-144838/6237)),this.cbg[4]=i*(-734/315+t*(109598/31185)),i*=t,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=i*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=i*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),i*=t,this.utg[2]=i*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=i*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),i*=t,this.utg[3]=i*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=i*(49561/161280+t*(-179/168+t*(6601661/7257600))),i*=t,this.utg[4]=i*(-4583/161280+t*(108847/3991680)),this.gtu[4]=i*(34729/80640+t*(-3418889/1995840)),i*=t,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var a=Vr(this.cbg,this.lat0);this.Zb=-this.Qn*(a+function(e,t){for(var i,a=2*Math.cos(t),s=e.length-1,o=e[s],r=0;--s>=0;)i=a*o-r+e[s],r=o,o=i;return Math.sin(t)*i}(this.gtu,2*a))},forward:function(e){var t=Ko(e.x-this.long0),i=e.y;i=Vr(this.cbg,i);var a=Math.sin(i),s=Math.cos(i),o=Math.sin(t),r=Math.cos(t);i=Math.atan2(a,r*s),t=Math.atan2(o*s,$r(a,s*r)),t=Gr(Math.tan(t));var n,l,u=Zr(this.gtu,2*i,2*t);return i+=u[0],t+=u[1],Math.abs(t)<=2.623395162778?(n=this.a*(this.Qn*t)+this.x0,l=this.a*(this.Qn*i+this.Zb)+this.y0):(n=1/0,l=1/0),e.x=n,e.y=l,e},inverse:function(e){var t,i,a=(e.x-this.x0)*(1/this.a),s=(e.y-this.y0)*(1/this.a);if(s=(s-this.Zb)/this.Qn,a/=this.Qn,Math.abs(a)<=2.623395162778){var o=Zr(this.utg,2*s,2*a);s+=o[0],a+=o[1],a=Math.atan(Nr(a));var r=Math.sin(s),n=Math.cos(s),l=Math.sin(a),u=Math.cos(a);s=Math.atan2(r*u,$r(l,u*n)),t=Ko((a=Math.atan2(l,u*n))+this.long0),i=Vr(this.cgb,s)}else t=1/0,i=1/0;return e.x=t,e.y=i,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]};var jr={init:function(){var e=function(e,t){if(void 0===e){if((e=Math.floor(30*(Ko(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Uo,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Qr.init.apply(this),this.forward=Qr.forward,this.inverse=Qr.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function Hr(e,t){return Math.pow((1-e)/(1+e),t)}var Xr={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Eo)/(Math.pow(Math.tan(.5*this.lat0+Eo),this.C)*Hr(this.e*e,this.ratexp))},forward:function(e){var t=e.x,i=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Eo),this.C)*Hr(this.e*Math.sin(i),this.ratexp))-qo,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,i=e.y,a=Math.pow(Math.tan(.5*i+Eo)/this.K,1/this.C),s=20;s>0&&(i=2*Math.atan(a*Hr(this.e*Math.sin(e.y),-.5*this.e))-qo,!(Math.abs(i-e.y)<1e-14));--s)e.y=i;return s?(e.x=t,e.y=i,e):null},names:["gauss"]};var Wr={init:function(){Xr.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,i,a,s;return e.x=Ko(e.x-this.long0),Xr.forward.apply(this,[e]),t=Math.sin(e.y),i=Math.cos(e.y),a=Math.cos(e.x),s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*i*a),e.x=s*i*Math.sin(e.x),e.y=s*(this.cosc0*t-this.sinc0*i*a),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,i,a,s,o;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,o=Math.sqrt(e.x*e.x+e.y*e.y)){var r=2*Math.atan2(o,this.R2);t=Math.sin(r),i=Math.cos(r),s=Math.asin(i*this.sinc0+e.y*t*this.cosc0/o),a=Math.atan2(e.x*t,o*this.cosc0*i-e.y*this.sinc0*t)}else s=this.phic0,a=0;return e.x=a,e.y=s,Xr.inverse.apply(this,[e]),e.x=Ko(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var Kr={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+Wo(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*Xo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Jo(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Xo(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-qo,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,i,a,s,o,r,n=e.x,l=e.y,u=Math.sin(l),c=Math.cos(l),g=Ko(n-this.long0);return Math.abs(Math.abs(n-this.long0)-Math.PI)<=1e-10&&Math.abs(l+this.lat0)<=1e-10?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(g)),e.x=this.a*t*c*Math.sin(g)+this.x0,e.y=this.a*t*(this.coslat0*u-this.sinlat0*c*Math.cos(g))+this.y0,e):(i=2*Math.atan(this.ssfn_(l,u,this.e))-qo,s=Math.cos(i),a=Math.sin(i),Math.abs(this.coslat0)<=1e-10?(o=Jo(this.e,l*this.con,this.con*u),r=2*this.a*this.k0*o/this.cons,e.x=this.x0+r*Math.sin(n-this.long0),e.y=this.y0-this.con*r*Math.cos(n-this.long0),e):(Math.abs(this.sinlat0)<1e-10?(t=2*this.a*this.k0/(1+s*Math.cos(g)),e.y=t*a):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*s*Math.cos(g))),e.y=t*(this.cosX0*a-this.sinX0*s*Math.cos(g))+this.y0),e.x=t*s*Math.sin(g)+this.x0,e))},inverse:function(e){var t,i,a,s,o;e.x-=this.x0,e.y-=this.y0;var r=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var n=2*Math.atan(r/(2*this.a*this.k0));return t=this.long0,i=this.lat0,r<=1e-10?(e.x=t,e.y=i,e):(i=Math.asin(Math.cos(n)*this.sinlat0+e.y*Math.sin(n)*this.coslat0/r),t=Math.abs(this.coslat0)<1e-10?this.lat0>0?Ko(this.long0+Math.atan2(e.x,-1*e.y)):Ko(this.long0+Math.atan2(e.x,e.y)):Ko(this.long0+Math.atan2(e.x*Math.sin(n),r*this.coslat0*Math.cos(n)-e.y*this.sinlat0*Math.sin(n))),e.x=t,e.y=i,e)}if(Math.abs(this.coslat0)<=1e-10){if(r<=1e-10)return i=this.lat0,t=this.long0,e.x=t,e.y=i,e;e.x*=this.con,e.y*=this.con,a=r*this.cons/(2*this.a*this.k0),i=this.con*Yo(this.e,a),t=this.con*Ko(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else s=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,r<=1e-10?o=this.X0:(o=Math.asin(Math.cos(s)*this.sinX0+e.y*Math.sin(s)*this.cosX0/r),t=Ko(this.long0+Math.atan2(e.x*Math.sin(s),r*this.cosX0*Math.cos(s)-e.y*this.sinX0*Math.sin(s)))),i=-1*Yo(this.e,Math.tan(.5*(qo+o)));return e.x=t,e.y=i,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(e,t,i){return t*=i,Math.tan(.5*(qo+e))*Math.pow((1-t)/(1+t),.5*i)}};var Jr={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),i=this.a,a=1/this.rf,s=2*a-Math.pow(a,2),o=this.e=Math.sqrt(s);this.R=this.k0*i*Math.sqrt(1-s)/(1-s*Math.pow(t,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var r=Math.log(Math.tan(Math.PI/4+this.b0/2)),n=Math.log(Math.tan(Math.PI/4+e/2)),l=Math.log((1+o*t)/(1-o*t));this.K=r-this.alpha*n+this.alpha*o/2*l},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),a=-this.alpha*(t+i)+this.K,s=2*(Math.atan(Math.exp(a))-Math.PI/4),o=this.alpha*(e.x-this.lambda0),r=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(o))),n=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(o));return e.y=this.R/2*Math.log((1+Math.sin(n))/(1-Math.sin(n)))+this.y0,e.x=this.R*r+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,i=e.y-this.y0,a=t/this.R,s=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(a)),r=Math.atan(Math.sin(a)/(Math.cos(this.b0)*Math.cos(a)-Math.sin(this.b0)*Math.tan(s))),n=this.lambda0+r/this.alpha,l=0,u=o,c=-1e3,g=0;Math.abs(u-c)>1e-7;){if(++g>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=n,e.y=u,e},names:["somerc"]};var Yr={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=Math.sin(this.lat0),t=Math.cos(this.lat0),i=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var a,s,o=Jo(this.e,this.lat0,e),r=this.bl/t*Math.sqrt((1-this.es)/(1-i*i));if(r*r<1&&(r=1),isNaN(this.longc)){var n=Jo(this.e,this.lat1,Math.sin(this.lat1)),l=Jo(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(r+Math.sqrt(r*r-1))*Math.pow(o,this.bl):this.el=(r-Math.sqrt(r*r-1))*Math.pow(o,this.bl);var u=Math.pow(n,this.bl),c=Math.pow(l,this.bl);s=.5*((a=this.el/u)-1/a);var g=(this.el*this.el-c*u)/(this.el*this.el+c*u),f=(c-u)/(c+u),d=Ko(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(g*Math.tan(.5*this.bl*d)/f)/this.bl,this.long0=Ko(this.long0);var h=Ko(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*h)/s),this.alpha=Math.asin(r*Math.sin(this.gamma0))}else a=this.lat0>=0?r+Math.sqrt(r*r-1):r-Math.sqrt(r*r-1),this.el=a*Math.pow(o,this.bl),s=.5*(a-1/a),this.gamma0=Math.asin(Math.sin(this.alpha)/r),this.long0=this.longc-Math.asin(s*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha))},forward:function(e){var t,i,a,s=e.x,o=e.y,r=Ko(s-this.long0);if(Math.abs(Math.abs(o)-qo)<=1e-10)a=o>0?-1:1,i=this.al/this.bl*Math.log(Math.tan(Eo+a*this.gamma0*.5)),t=-1*a*qo*this.al/this.bl;else{var n=Jo(this.e,o,Math.sin(o)),l=this.el/Math.pow(n,this.bl),u=.5*(l-1/l),c=.5*(l+1/l),g=Math.sin(this.bl*r),f=(u*Math.sin(this.gamma0)-g*Math.cos(this.gamma0))/c;i=Math.abs(Math.abs(f)-1)<=1e-10?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-f)/(1+f))/this.bl,t=Math.abs(Math.cos(this.bl*r))<=1e-10?this.al*this.bl*r:this.al*Math.atan2(u*Math.cos(this.gamma0)+g*Math.sin(this.gamma0),Math.cos(this.bl*r))/this.bl}return this.no_rot?(e.x=this.x0+t,e.y=this.y0+i):(t-=this.uc,e.x=this.x0+i*Math.cos(this.alpha)+t*Math.sin(this.alpha),e.y=this.y0+t*Math.cos(this.alpha)-i*Math.sin(this.alpha)),e},inverse:function(e){var t,i;this.no_rot?(i=e.y-this.y0,t=e.x-this.x0):(i=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha),t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha),t+=this.uc);var a=Math.exp(-1*this.bl*i/this.al),s=.5*(a-1/a),o=.5*(a+1/a),r=Math.sin(this.bl*t/this.al),n=(r*Math.cos(this.gamma0)+s*Math.sin(this.gamma0))/o,l=Math.pow(this.el/Math.sqrt((1+n)/(1-n)),1/this.bl);return Math.abs(n-1)<1e-10?(e.x=this.long0,e.y=qo):Math.abs(n+1)<1e-10?(e.x=this.long0,e.y=-1*qo):(e.y=Yo(this.e,l),e.x=Ko(this.long0-Math.atan2(s*Math.cos(this.gamma0)-r*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),e},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var en={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),i=Math.cos(this.lat1),a=Xo(this.e,t,i),s=Jo(this.e,this.lat1,t),o=Math.sin(this.lat2),r=Math.cos(this.lat2),n=Xo(this.e,o,r),l=Jo(this.e,this.lat2,o),u=Jo(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(a/n)/Math.log(s/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=a/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,i=e.y;Math.abs(2*Math.abs(i)-Math.PI)<=1e-10&&(i=Wo(i)*(qo-2e-10));var a,s,o=Math.abs(Math.abs(i)-qo);if(o>1e-10)a=Jo(this.e,i,Math.sin(i)),s=this.a*this.f0*Math.pow(a,this.ns);else{if((o=i*this.ns)<=0)return null;s=0}var r=this.ns*Ko(t-this.long0);return e.x=this.k0*(s*Math.sin(r))+this.x0,e.y=this.k0*(this.rh-s*Math.cos(r))+this.y0,e},inverse:function(e){var t,i,a,s,o,r=(e.x-this.x0)/this.k0,n=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(r*r+n*n),i=1):(t=-Math.sqrt(r*r+n*n),i=-1);var l=0;if(0!==t&&(l=Math.atan2(i*r,i*n)),0!==t||this.ns>0){if(i=1/this.ns,a=Math.pow(t/(this.a*this.f0),i),-9999===(s=Yo(this.e,a)))return null}else s=-qo;return o=Ko(l/this.ns+this.long0),e.x=o,e.y=s,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var tn={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,i,a,s,o,r,n,l=e.x,u=e.y,c=Ko(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),a=-c*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),o=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(s)),r=this.n*o,n=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),e.y=n*Math.cos(r)/1,e.x=n*Math.sin(r)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,i,a,s,o,r,n,l=e.x;e.x=e.y,e.y=l,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),s=Math.atan2(e.y,e.x)/Math.sin(this.s0),a=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(a)-Math.sin(this.ad)*Math.cos(a)*Math.cos(s)),i=Math.asin(Math.cos(a)*Math.sin(s)/Math.cos(t)),e.x=this.long0-i/this.alfa,r=t,n=0;var u=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(r))/(1-this.e*Math.sin(r)),this.e/2))-this.s45),Math.abs(r-e.y)<1e-10&&(n=1),r=e.y,u+=1}while(0===n&&u<15);return u>=15?null:e},names:["Krovak","krovak"]};function an(e,t,i,a,s){return e*s-t*Math.sin(2*s)+i*Math.sin(4*s)-a*Math.sin(6*s)}function sn(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function on(e){return.375*e*(1+.25*e*(1+.46875*e))}function rn(e){return.05859375*e*e*(1+.75*e)}function nn(e){return e*e*e*(35/3072)}function ln(e,t,i){var a=t*i;return e/Math.sqrt(1-a*a)}function un(e){return Math.abs(e)<qo?e:e-Wo(e)*Math.PI}function cn(e,t,i,a,s){var o,r;o=e/t;for(var n=0;n<15;n++)if(o+=r=(e-(t*o-i*Math.sin(2*o)+a*Math.sin(4*o)-s*Math.sin(6*o)))/(t-2*i*Math.cos(2*o)+4*a*Math.cos(4*o)-6*s*Math.cos(6*o)),Math.abs(r)<=1e-10)return o;return NaN}var gn={init:function(){this.sphere||(this.e0=sn(this.es),this.e1=on(this.es),this.e2=rn(this.es),this.e3=nn(this.es),this.ml0=this.a*an(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,i,a=e.x,s=e.y;if(a=Ko(a-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(s)*Math.sin(a)),i=this.a*(Math.atan2(Math.tan(s),Math.cos(a))-this.lat0);else{var o=Math.sin(s),r=Math.cos(s),n=ln(this.a,this.e,o),l=Math.tan(s)*Math.tan(s),u=a*Math.cos(s),c=u*u,g=this.es*r*r/(1-this.es);t=n*u*(1-c*l*(1/6-(8-l+8*g)*c/120)),i=this.a*an(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+n*o/r*c*(.5+(5-l+6*g)*c/24)}return e.x=t+this.x0,e.y=i+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,i,a=e.x/this.a,s=e.y/this.a;if(this.sphere){var o=s+this.lat0;t=Math.asin(Math.sin(o)*Math.cos(a)),i=Math.atan2(Math.tan(a),Math.cos(o))}else{var r=cn(this.ml0/this.a+s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(r)-qo)<=1e-10)return e.x=this.long0,e.y=qo,s<0&&(e.y*=-1),e;var n=ln(this.a,this.e,Math.sin(r)),l=n*n*n/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(r),2),c=a*this.a/n,g=c*c;t=r-n*Math.tan(r)/l*c*c*(.5-(1+3*u)*c*c/24),i=c*(1-g*(u/3+(1+3*u)*u*g/15))/Math.cos(r)}return e.x=Ko(i+this.long0),e.y=un(t),e},names:["Cassini","Cassini_Soldner","cass"]};function fn(e,t){var i;return e>1e-7?(1-e*e)*(t/(1-(i=e*t)*i)-.5/e*Math.log((1-i)/(1+i))):2*t}var dn={init:function(){var e,t=Math.abs(this.lat0);if(Math.abs(t-qo)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=fn(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(e){var t,i=[];return i[0]=.3333333333333333*e,t=e*e,i[0]+=.17222222222222222*t,i[1]=.06388888888888888*t,t*=e,i[0]+=.10257936507936508*t,i[1]+=.0664021164021164*t,i[2]=.016415012942191543*t,i}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=fn(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,i,a,s,o,r,n,l,u,c,g=e.x,f=e.y;if(g=Ko(g-this.long0),this.sphere){if(o=Math.sin(f),c=Math.cos(f),a=Math.cos(g),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+c*a:1+this.sinph0*o+this.cosph0*c*a)<=1e-10)return null;t=(i=Math.sqrt(2/i))*c*Math.sin(g),i*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*a}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(a=-a),Math.abs(f+this.lat0)<1e-10)return null;i=Eo-.5*f,t=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(g),i*=a}}else{switch(n=0,l=0,u=0,a=Math.cos(g),s=Math.sin(g),o=Math.sin(f),r=fn(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(n=r/this.qp,l=Math.sqrt(1-n*n)),this.mode){case this.OBLIQ:u=1+this.sinb1*n+this.cosb1*l*a;break;case this.EQUIT:u=1+l*a;break;case this.N_POLE:u=qo+f,r=this.qp-r;break;case this.S_POLE:u=f-qo,r=this.qp+r}if(Math.abs(u)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),i=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*n-this.sinb1*l*a):(u=Math.sqrt(2/(1+l*a)))*n*this.ymf,t=this.xmf*u*l*s;break;case this.N_POLE:case this.S_POLE:r>=0?(t=(u=Math.sqrt(r))*s,i=a*(this.mode===this.S_POLE?u:-u)):t=i=0}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,i,a,s,o,r,n,l,u,c,g=e.x/this.a,f=e.y/this.a;if(this.sphere){var d,h=0,p=0;if((i=.5*(d=Math.sqrt(g*g+f*f)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(p=Math.sin(i),h=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(d)<=1e-10?0:Math.asin(f*p/d),g*=p,f=h*d;break;case this.OBLIQ:i=Math.abs(d)<=1e-10?this.lat0:Math.asin(h*this.sinph0+f*p*this.cosph0/d),g*=p*this.cosph0,f=(h-Math.sin(i)*this.sinph0)*d;break;case this.N_POLE:f=-f,i=qo-i;break;case this.S_POLE:i-=qo}t=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(g,f):0}else{if(n=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(g/=this.dd,f*=this.dd,(r=Math.sqrt(g*g+f*f))<1e-10)return e.x=this.long0,e.y=this.lat0,e;s=2*Math.asin(.5*r/this.rq),a=Math.cos(s),g*=s=Math.sin(s),this.mode===this.OBLIQ?(n=a*this.sinb1+f*s*this.cosb1/r,o=this.qp*n,f=r*this.cosb1*a-f*this.sinb1*s):(n=f*s/r,o=this.qp*n,f=r*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(o=g*g+f*f))return e.x=this.long0,e.y=this.lat0,e;n=1-o/this.qp,this.mode===this.S_POLE&&(n=-n)}t=Math.atan2(g,f),l=Math.asin(n),u=this.apa,c=l+l,i=l+u[0]*Math.sin(c)+u[1]*Math.sin(c+c)+u[2]*Math.sin(c+c+c)}return e.x=Ko(this.long0+t),e.y=i,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function hn(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}var pn={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Xo(this.e3,this.sin_po,this.cos_po),this.qs1=fn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Xo(this.e3,this.sin_po,this.cos_po),this.qs2=fn(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=fn(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,i=e.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var a=fn(this.e3,this.sin_phi,this.cos_phi),s=this.a*Math.sqrt(this.c-this.ns0*a)/this.ns0,o=this.ns0*Ko(t-this.long0),r=s*Math.sin(o)+this.x0,n=this.rh-s*Math.cos(o)+this.y0;return e.x=r,e.y=n,e},inverse:function(e){var t,i,a,s,o,r;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),a=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),a=-1),s=0,0!==t&&(s=Math.atan2(a*e.x,a*e.y)),a=t*this.ns0/this.a,this.sphere?r=Math.asin((this.c-a*a)/(2*this.ns0)):(i=(this.c-a*a)/this.ns0,r=this.phi1z(this.e3,i)),o=Ko(s/this.ns0+this.long0),e.x=o,e.y=r,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var i,a,s,o,r=hn(.5*t);if(e<1e-10)return r;for(var n=e*e,l=1;l<=25;l++)if(r+=o=.5*(s=1-(a=e*(i=Math.sin(r)))*a)*s/Math.cos(r)*(t/(1-n)-i/s+.5/e*Math.log((1-a)/(1+a))),Math.abs(o)<=1e-7)return r;return null}};var mn={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,i,a,s,o,r,n,l=e.x,u=e.y;return a=Ko(l-this.long0),t=Math.sin(u),i=Math.cos(u),s=Math.cos(a),1,(o=this.sin_p14*t+this.cos_p14*i*s)>0||Math.abs(o)<=1e-10?(r=this.x0+1*this.a*i*Math.sin(a)/o,n=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*i*s)/o):(r=this.x0+this.infinity_dist*i*Math.sin(a),n=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*i*s)),e.x=r,e.y=n,e},inverse:function(e){var t,i,a,s,o,r;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(s=Math.atan2(t,this.rc),i=Math.sin(s),r=hn((a=Math.cos(s))*this.sin_p14+e.y*i*this.cos_p14/t),o=Math.atan2(e.x*i,t*this.cos_p14*a-e.y*this.sin_p14*i),o=Ko(this.long0+o)):(r=this.phic0,o=0),e.x=o,e.y=r,e},names:["gnom"]};var yn={init:function(){this.sphere||(this.k0=Xo(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,i,a=e.x,s=e.y,o=Ko(a-this.long0);if(this.sphere)t=this.x0+this.a*o*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var r=fn(this.e,Math.sin(s));t=this.x0+this.a*this.k0*o,i=this.y0+this.a*r*.5/this.k0}return e.x=t,e.y=i,e},inverse:function(e){var t,i;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=Ko(this.long0+e.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(i=function(e,t){var i=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-i)<1e-6)return t<0?-1*qo:qo;for(var a,s,o,r,n=Math.asin(.5*t),l=0;l<30;l++)if(s=Math.sin(n),o=Math.cos(n),r=e*s,n+=a=Math.pow(1-r*r,2)/(2*o)*(t/(1-e*e)-s/(1-r*r)+.5/e*Math.log((1-r)/(1+r))),Math.abs(a)<=1e-10)return n;return NaN}(this.e,2*e.y*this.k0/this.a),t=Ko(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=i,e},names:["cea"]};var _n={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,i=e.y,a=Ko(t-this.long0),s=un(i-this.lat0);return e.x=this.x0+this.a*a*this.rc,e.y=this.y0+this.a*s,e},inverse:function(e){var t=e.x,i=e.y;return e.x=Ko(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=un(this.lat0+(i-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var bn={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=sn(this.es),this.e1=on(this.es),this.e2=rn(this.es),this.e3=nn(this.es),this.ml0=this.a*an(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,i,a,s=e.x,o=e.y,r=Ko(s-this.long0);if(a=r*Math.sin(o),this.sphere)Math.abs(o)<=1e-10?(t=this.a*r,i=-1*this.a*this.lat0):(t=this.a*Math.sin(a)/Math.tan(o),i=this.a*(un(o-this.lat0)+(1-Math.cos(a))/Math.tan(o)));else if(Math.abs(o)<=1e-10)t=this.a*r,i=-1*this.ml0;else{var n=ln(this.a,this.e,Math.sin(o))/Math.tan(o);t=n*Math.sin(a),i=this.a*an(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+n*(1-Math.cos(a))}return e.x=t+this.x0,e.y=i+this.y0,e},inverse:function(e){var t,i,a,s,o,r,n,l,u;if(a=e.x-this.x0,s=e.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=1e-10)t=Ko(a/this.a+this.long0),i=0;else{var c;for(r=this.lat0+s/this.a,n=a*a/this.a/this.a+r*r,l=r,o=20;o;--o)if(l+=u=-1*(r*(l*(c=Math.tan(l))+1)-l-.5*(l*l+n)*c)/((l-r)/c-1),Math.abs(u)<=1e-10){i=l;break}t=Ko(this.long0+Math.asin(a*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(s+this.ml0)<=1e-10)i=0,t=Ko(this.long0+a/this.a);else{var g,f,d,h,p;for(r=(this.ml0+s)/this.a,n=a*a/this.a/this.a+r*r,l=r,o=20;o;--o)if(p=this.e*Math.sin(l),g=Math.sqrt(1-p*p)*Math.tan(l),f=this.a*an(this.e0,this.e1,this.e2,this.e3,l),d=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(r*(g*(h=f/this.a)+1)-h-.5*g*(h*h+n))/(this.es*Math.sin(2*l)*(h*h+n-2*r*h)/(4*g)+(r-h)*(g*d-2/Math.sin(2*l))-d),Math.abs(u)<=1e-10){i=l;break}g=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),t=Ko(this.long0+Math.asin(a*g/this.a)/Math.sin(i))}return e.x=t,e.y=i,e},names:["Polyconic","poly"]};var vn={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,i=e.x,a=e.y-this.lat0,s=i-this.long0,o=a/Co*1e-5,r=s,n=1,l=0;for(t=1;t<=10;t++)n*=o,l+=this.A[t]*n;var u,c=l,g=r,f=1,d=0,h=0,p=0;for(t=1;t<=6;t++)u=d*c+f*g,f=f*c-d*g,d=u,h=h+this.B_re[t]*f-this.B_im[t]*d,p=p+this.B_im[t]*f+this.B_re[t]*d;return e.x=p*this.a+this.x0,e.y=h*this.a+this.y0,e},inverse:function(e){var t,i,a=e.x,s=e.y,o=a-this.x0,r=(s-this.y0)/this.a,n=o/this.a,l=1,u=0,c=0,g=0;for(t=1;t<=6;t++)i=u*r+l*n,l=l*r-u*n,u=i,c=c+this.C_re[t]*l-this.C_im[t]*u,g=g+this.C_im[t]*l+this.C_re[t]*u;for(var f=0;f<this.iterations;f++){var d,h=c,p=g,m=r,y=n;for(t=2;t<=6;t++)d=p*c+h*g,h=h*c-p*g,p=d,m+=(t-1)*(this.B_re[t]*h-this.B_im[t]*p),y+=(t-1)*(this.B_im[t]*h+this.B_re[t]*p);h=1,p=0;var _=this.B_re[1],b=this.B_im[1];for(t=2;t<=6;t++)d=p*c+h*g,h=h*c-p*g,p=d,_+=t*(this.B_re[t]*h-this.B_im[t]*p),b+=t*(this.B_im[t]*h+this.B_re[t]*p);var v=_*_+b*b;c=(m*_+y*b)/v,g=(y*_-m*b)/v}var x=c,C=g,q=1,U=0;for(t=1;t<=9;t++)q*=x,U+=this.D[t]*q;var w=this.lat0+U*Co*1e5,E=this.long0+C;return e.x=E,e.y=w,e},names:["New_Zealand_Map_Grid","nzmg"]};var xn={init:function(){},forward:function(e){var t=e.x,i=e.y,a=Ko(t-this.long0),s=this.x0+this.a*a,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return e.x=s,e.y=o,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=Ko(this.long0+e.x/this.a),i=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=i,e},names:["Miller_Cylindrical","mill"]};var Cn={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Fr(this.es)},forward:function(e){var t,i,a=e.x,s=e.y;if(a=Ko(a-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(s),r=20;r;--r){var n=(this.m*s+Math.sin(s)-o)/(this.m+Math.cos(s));if(s-=n,Math.abs(n)<1e-10)break}else s=1!==this.n?Math.asin(this.n*Math.sin(s)):s;t=this.a*this.C_x*a*(this.m+Math.cos(s)),i=this.a*this.C_y*s}else{var l=Math.sin(s),u=Math.cos(s);i=this.a*Lr(s,l,u,this.en),t=this.a*a*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=i,e},inverse:function(e){var t,i,a;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i/=this.C_x*(this.m+Math.cos(t)),this.m?t=hn((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=hn(Math.sin(t)/this.n)),i=Ko(i+this.long0),t=un(t)):(t=Or(e.y/this.a,this.es,this.en),(a=Math.abs(t))<qo?(a=Math.sin(t),i=Ko(this.long0+e.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(t)))):a-1e-10<qo&&(i=this.long0)),e.x=i,e.y=t,e},names:["Sinusoidal","sinu"]};var qn={init:function(){},forward:function(e){for(var t=e.x,i=e.y,a=Ko(t-this.long0),s=i,o=Math.PI*Math.sin(i);;){var r=-(s+Math.sin(s)-o)/(1+Math.cos(s));if(s+=r,Math.abs(r)<1e-10)break}s/=2,Math.PI/2-Math.abs(i)<1e-10&&(a=0);var n=.900316316158*this.a*a*Math.cos(s)+this.x0,l=1.4142135623731*this.a*Math.sin(s)+this.y0;return e.x=n,e.y=l,e},inverse:function(e){var t,i;e.x-=this.x0,e.y-=this.y0,i=e.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var a=Ko(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var s=Math.asin(i);return e.x=a,e.y=s,e},names:["Mollweide","moll"]};var Un={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=sn(this.es),this.e1=on(this.es),this.e2=rn(this.es),this.e3=nn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Xo(this.e,this.sinphi,this.cosphi),this.ml1=an(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Xo(this.e,this.sinphi,this.cosphi),this.ml2=an(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=an(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,i=e.x,a=e.y;if(this.sphere)t=this.a*(this.g-a);else{var s=an(this.e0,this.e1,this.e2,this.e3,a);t=this.a*(this.g-s)}var o=this.ns*Ko(i-this.long0),r=this.x0+t*Math.sin(o),n=this.y0+this.rh-t*Math.cos(o);return e.x=r,e.y=n,e},inverse:function(e){var t,i,a,s;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var o=0;return 0!==i&&(o=Math.atan2(t*e.x,t*e.y)),this.sphere?(s=Ko(this.long0+o/this.ns),a=un(this.g-i/this.a),e.x=s,e.y=a,e):(a=cn(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),s=Ko(this.long0+o/this.ns),e.x=s,e.y=a,e)},names:["Equidistant_Conic","eqdc"]};var wn={init:function(){this.R=this.a},forward:function(e){var t,i,a=e.x,s=e.y,o=Ko(a-this.long0);Math.abs(s)<=1e-10&&(t=this.x0+this.R*o,i=this.y0);var r=hn(2*Math.abs(s/Math.PI));(Math.abs(o)<=1e-10||Math.abs(Math.abs(s)-qo)<=1e-10)&&(t=this.x0,i=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*r):this.y0+Math.PI*this.R*-Math.tan(.5*r));var n=.5*Math.abs(Math.PI/o-o/Math.PI),l=n*n,u=Math.sin(r),c=Math.cos(r),g=c/(u+c-1),f=g*g,d=g*(2/u-1),h=d*d,p=Math.PI*this.R*(n*(g-h)+Math.sqrt(l*(g-h)*(g-h)-(h+l)*(f-h)))/(h+l);o<0&&(p=-p),t=this.x0+p;var m=l+g;return p=Math.PI*this.R*(d*m-n*Math.sqrt((h+l)*(l+1)-m*m))/(h+l),i=s>=0?this.y0+p:this.y0-p,e.x=t,e.y=i,e},inverse:function(e){var t,i,a,s,o,r,n,l,u,c,g,f;return e.x-=this.x0,e.y-=this.y0,g=Math.PI*this.R,o=(a=e.x/g)*a+(s=e.y/g)*s,g=3*(s*s/(l=-2*(r=-Math.abs(s)*(1+o))+1+2*s*s+o*o)+(2*(n=r-2*s*s+a*a)*n*n/l/l/l-9*r*n/l/l)/27)/(u=(r-n*n/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(g)>1&&(g=g>=0?1:-1),f=Math.acos(g)/3,i=e.y>=0?(-c*Math.cos(f+Math.PI/3)-n/3/l)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-n/3/l)*Math.PI,t=Math.abs(a)<1e-10?this.long0:Ko(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(a*a-s*s)+o*o))/2/a),e.x=t,e.y=i,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var En={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var t,i,a,s,o,r,n,l,u,c,g,f,d,h,p,m,y,_,b,v,x,C,q=e.x,U=e.y,w=Math.sin(e.y),E=Math.cos(e.y),B=Ko(q-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(e.x=this.x0+this.a*(qo-U)*Math.sin(B),e.y=this.y0-this.a*(qo-U)*Math.cos(B),e):Math.abs(this.sin_p12+1)<=1e-10?(e.x=this.x0+this.a*(qo+U)*Math.sin(B),e.y=this.y0+this.a*(qo+U)*Math.cos(B),e):(_=this.sin_p12*w+this.cos_p12*E*Math.cos(B),y=(m=Math.acos(_))?m/Math.sin(m):1,e.x=this.x0+this.a*y*E*Math.sin(B),e.y=this.y0+this.a*y*(this.cos_p12*w-this.sin_p12*E*Math.cos(B)),e):(t=sn(this.es),i=on(this.es),a=rn(this.es),s=nn(this.es),Math.abs(this.sin_p12-1)<=1e-10?(o=this.a*an(t,i,a,s,qo),r=this.a*an(t,i,a,s,U),e.x=this.x0+(o-r)*Math.sin(B),e.y=this.y0-(o-r)*Math.cos(B),e):Math.abs(this.sin_p12+1)<=1e-10?(o=this.a*an(t,i,a,s,qo),r=this.a*an(t,i,a,s,U),e.x=this.x0+(o+r)*Math.sin(B),e.y=this.y0+(o+r)*Math.cos(B),e):(n=w/E,l=ln(this.a,this.e,this.sin_p12),u=ln(this.a,this.e,w),c=Math.atan((1-this.es)*n+this.es*l*this.sin_p12/(u*E)),b=0===(g=Math.atan2(Math.sin(B),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(B)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(g)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(B)*Math.cos(c)/Math.sin(g)),f=this.e*this.sin_p12/Math.sqrt(1-this.es),m=l*b*(1-(v=b*b)*(p=(d=this.e*this.cos_p12*Math.cos(g)/Math.sqrt(1-this.es))*d)*(1-p)/6+(x=v*b)/8*(h=f*d)*(1-2*p)+(C=x*b)/120*(p*(4-7*p)-3*f*f*(1-7*p))-C*b/48*h),e.x=this.x0+m*Math.sin(g),e.y=this.y0+m*Math.cos(g),e))},inverse:function(e){var t,i,a,s,o,r,n,l,u,c,g,f,d,h,p,m,y,_,b,v,x,C,q;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*qo*this.a)return;return i=t/this.a,a=Math.sin(i),s=Math.cos(i),o=this.long0,Math.abs(t)<=1e-10?r=this.lat0:(r=hn(s*this.sin_p12+e.y*a*this.cos_p12/t),n=Math.abs(this.lat0)-qo,o=Math.abs(n)<=1e-10?this.lat0>=0?Ko(this.long0+Math.atan2(e.x,-e.y)):Ko(this.long0-Math.atan2(-e.x,e.y)):Ko(this.long0+Math.atan2(e.x*a,t*this.cos_p12*s-e.y*this.sin_p12*a))),e.x=o,e.y=r,e}return l=sn(this.es),u=on(this.es),c=rn(this.es),g=nn(this.es),Math.abs(this.sin_p12-1)<=1e-10?(r=cn(((f=this.a*an(l,u,c,g,qo))-(t=Math.sqrt(e.x*e.x+e.y*e.y)))/this.a,l,u,c,g),o=Ko(this.long0+Math.atan2(e.x,-1*e.y)),e.x=o,e.y=r,e):Math.abs(this.sin_p12+1)<=1e-10?(f=this.a*an(l,u,c,g,qo),r=cn(((t=Math.sqrt(e.x*e.x+e.y*e.y))-f)/this.a,l,u,c,g),o=Ko(this.long0+Math.atan2(e.x,e.y)),e.x=o,e.y=r,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),p=Math.atan2(e.x,e.y),d=ln(this.a,this.e,this.sin_p12),m=Math.cos(p),_=-(y=this.e*this.cos_p12*m)*y/(1-this.es),b=3*this.es*(1-_)*this.sin_p12*this.cos_p12*m/(1-this.es),C=1-_*(x=(v=t/d)-_*(1+_)*Math.pow(v,3)/6-b*(1+3*_)*Math.pow(v,4)/24)*x/2-v*x*x*x/6,h=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*m),o=Ko(this.long0+Math.asin(Math.sin(p)*Math.sin(x)/Math.cos(h))),q=Math.sin(h),r=Math.atan2((q-this.es*C*this.sin_p12)*Math.tan(h),q*(1-this.es)),e.x=o,e.y=r,e)},names:["Azimuthal_Equidistant","aeqd"]};var Bn={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,i,a,s,o,r,n,l=e.x,u=e.y;return a=Ko(l-this.long0),t=Math.sin(u),i=Math.cos(u),s=Math.cos(a),1,((o=this.sin_p14*t+this.cos_p14*i*s)>0||Math.abs(o)<=1e-10)&&(r=1*this.a*i*Math.sin(a),n=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*i*s)),e.x=r,e.y=n,e},inverse:function(e){var t,i,a,s,o,r,n;return e.x-=this.x0,e.y-=this.y0,i=hn((t=Math.sqrt(e.x*e.x+e.y*e.y))/this.a),a=Math.sin(i),s=Math.cos(i),r=this.long0,Math.abs(t)<=1e-10?(n=this.lat0,e.x=r,e.y=n,e):(n=hn(s*this.sin_p14+e.y*a*this.cos_p14/t),o=Math.abs(this.lat0)-qo,Math.abs(o)<=1e-10?(r=this.lat0>=0?Ko(this.long0+Math.atan2(e.x,-e.y)):Ko(this.long0-Math.atan2(-e.x,e.y)),e.x=r,e.y=n,e):(r=Ko(this.long0+Math.atan2(e.x*a,t*this.cos_p14*s-e.y*this.sin_p14*a)),e.x=r,e.y=n,e))},names:["ortho"]},Pn=1,Mn=2,Tn=3,An=4,Sn=5,In=6,Dn=1,zn=2,kn=3,Fn=4;function Ln(e,t,i,a){var s;return e<1e-10?(a.value=Dn,s=0):(s=Math.atan2(t,i),Math.abs(s)<=Eo?a.value=Dn:s>Eo&&s<=qo+Eo?(a.value=zn,s-=qo):s>qo+Eo||s<=-(qo+Eo)?(a.value=kn,s=s>=0?s-Po:s+Po):(a.value=Fn,s+=qo)),s}function On(e,t){var i=e+t;return i<-Po?i+=Bo:i>+Po&&(i-=Bo),i}var Rn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=qo-Eo/2?this.face=Sn:this.lat0<=-(qo-Eo/2)?this.face=In:Math.abs(this.long0)<=Eo?this.face=Pn:Math.abs(this.long0)<=qo+Eo?this.face=this.long0>0?Mn:An:this.face=Tn,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,i,a,s,o,r,n={x:0,y:0},l={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,i=e.x,this.face===Sn)s=qo-t,i>=Eo&&i<=qo+Eo?(l.value=Dn,a=i-qo):i>qo+Eo||i<=-(qo+Eo)?(l.value=zn,a=i>0?i-Po:i+Po):i>-(qo+Eo)&&i<=-Eo?(l.value=kn,a=i+qo):(l.value=Fn,a=i);else if(this.face===In)s=qo+t,i>=Eo&&i<=qo+Eo?(l.value=Dn,a=-i+qo):i<Eo&&i>=-Eo?(l.value=zn,a=-i):i<-Eo&&i>=-(qo+Eo)?(l.value=kn,a=-i-qo):(l.value=Fn,a=i>0?-i+Po:-i-Po);else{var u,c,g,f,d,h;this.face===Mn?i=On(i,+qo):this.face===Tn?i=On(i,+Po):this.face===An&&(i=On(i,-qo)),f=Math.sin(t),d=Math.cos(t),h=Math.sin(i),u=d*Math.cos(i),c=d*h,g=f,this.face===Pn?a=Ln(s=Math.acos(u),g,c,l):this.face===Mn?a=Ln(s=Math.acos(c),g,-u,l):this.face===Tn?a=Ln(s=Math.acos(-u),g,-c,l):this.face===An?a=Ln(s=Math.acos(-c),g,u,l):(s=a=0,l.value=Dn)}return r=Math.atan(12/Po*(a+Math.acos(Math.sin(a)*Math.cos(Eo))-qo)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(r)*Math.cos(r))/(1-Math.cos(Math.atan(1/Math.cos(a))))),l.value===zn?r+=qo:l.value===kn?r+=Po:l.value===Fn&&(r+=1.5*Po),n.x=o*Math.cos(r),n.y=o*Math.sin(r),n.x=n.x*this.a+this.x0,n.y=n.y*this.a+this.y0,e.x=n.x,e.y=n.y,e},inverse:function(e){var t,i,a,s,o,r,n,l,u,c,g,f,d={lam:0,phi:0},h={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?h.value=Dn:e.y>=0&&e.y>=Math.abs(e.x)?(h.value=zn,t-=qo):e.x<0&&-e.x>=Math.abs(e.y)?(h.value=kn,t=t<0?t+Po:t-Po):(h.value=Fn,t+=qo),u=Po/12*Math.tan(t),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),r=Math.atan(o),(n=1-(a=Math.cos(t))*a*(s=Math.tan(i))*s*(1-Math.cos(Math.atan(1/Math.cos(r)))))<-1?n=-1:n>1&&(n=1),this.face===Sn)l=Math.acos(n),d.phi=qo-l,h.value===Dn?d.lam=r+qo:h.value===zn?d.lam=r<0?r+Po:r-Po:h.value===kn?d.lam=r-qo:d.lam=r;else if(this.face===In)l=Math.acos(n),d.phi=l-qo,h.value===Dn?d.lam=-r+qo:h.value===zn?d.lam=-r:h.value===kn?d.lam=-r-qo:d.lam=r<0?-r-Po:-r+Po;else{var p,m,y;u=(p=n)*p,m=(u+=(y=u>=1?0:Math.sqrt(1-u)*Math.sin(r))*y)>=1?0:Math.sqrt(1-u),h.value===zn?(u=m,m=-y,y=u):h.value===kn?(m=-m,y=-y):h.value===Fn&&(u=m,m=y,y=-u),this.face===Mn?(u=p,p=-m,m=u):this.face===Tn?(p=-p,m=-m):this.face===An&&(u=p,p=m,m=-u),d.phi=Math.acos(-y)-qo,d.lam=Math.atan2(m,p),this.face===Mn?d.lam=On(d.lam,-qo):this.face===Tn?d.lam=On(d.lam,-Po):this.face===An&&(d.lam=On(d.lam,+qo))}return 0!==this.es&&(c=d.phi<0?1:0,g=Math.tan(d.phi),f=this.b/Math.sqrt(g*g+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-f*f)/(this.one_minus_f*f)),c&&(d.phi=-d.phi)),d.lam+=this.long0,e.x=d.lam,e.y=d.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Nn=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],$n=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Gn=wo/5,Vn=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))};var Zn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=Ko(e.x-this.long0),i=Math.abs(e.y),a=Math.floor(i*Gn);a<0?a=0:a>=18&&(a=17);var s={x:Vn(Nn[a],i=wo*(i-.08726646259971647*a))*t,y:Vn($n[a],i)};return e.y<0&&(s.y=-s.y),s.x=s.x*this.a*.8487+this.x0,s.y=s.y*this.a*1.3523+this.y0,s},inverse:function(e){var t={x:(e.x-this.x0)/(.8487*this.a),y:Math.abs(e.y-this.y0)/(1.3523*this.a)};if(t.y>=1)t.x/=Nn[18][0],t.y=e.y<0?-qo:qo;else{var i=Math.floor(18*t.y);for(i<0?i=0:i>=18&&(i=17);;)if($n[i][0]>t.y)--i;else{if(!($n[i+1][0]<=t.y))break;++i}var a=$n[i],s=5*(t.y-a[0])/($n[i+1][0]-a[0]);s=function(e,t,i,a){for(var s=t;a;--a){var o=e(s);if(s-=o,Math.abs(o)<i)break}return s}((function(e){return(Vn(a,e)-t.y)/function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])}(a,e)}),s,1e-10,100),t.x/=Vn(Nn[i],s),t.y=(5*i+s)*Uo,e.y<0&&(t.y=-t.y)}return t.x=Ko(t.x+this.long0),t},names:["Robinson","robin"]};var Qn={init:function(){this.name="geocent"},forward:function(e){return cr(e,this.es,this.a)},inverse:function(e){return gr(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};function jn(t){let i;return{c(){i=q("div"),M(i,"id","info"),M(i,"class","svelte-1ore1sx")},m(e,t){v(e,i,t)},p:e,i:e,o:e,d(e){e&&x(i)}}}function Hn(e){const{getMap:t}=Z(De),i=t();return $(async()=>{i.on("mousemove",(function(e){const t=e.lngLat.lat,i=e.lngLat.lng;xr.defs([["EPSG:25831","+title=ETRS89_utm (m) +proj=utm +zone=31 +ellps=GRS80 +datum=WGS84 +units=m +no_defs"],["EPSG:4258","+title=ETRS89_lonlat (long/lat) +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs"],["UTM","+proj=utm +ellps=GRS80 +datum=nad83 +units=m +no_defs +zone=31U"]]);var a=xr("EPSG:4258","UTM",[i,t]),s=a[0],o=a[1];document.getElementById("info").innerHTML="UTM-31N (ETRS89)     X:"+s.toFixed(1)+"   Y:"+o.toFixed(1)}))}),[]}xr.defaultDatum="WGS84",xr.Proj=ur,xr.WGS84=new xr.Proj("WGS84"),xr.Point=zr,xr.toPoint=pr,xr.defs=Vo,xr.transform=yr,xr.mgrs=wr,xr.version="__VERSION__",function(e){e.Proj.projections.add(Rr),e.Proj.projections.add(Qr),e.Proj.projections.add(jr),e.Proj.projections.add(Wr),e.Proj.projections.add(Kr),e.Proj.projections.add(Jr),e.Proj.projections.add(Yr),e.Proj.projections.add(en),e.Proj.projections.add(tn),e.Proj.projections.add(gn),e.Proj.projections.add(dn),e.Proj.projections.add(pn),e.Proj.projections.add(mn),e.Proj.projections.add(yn),e.Proj.projections.add(_n),e.Proj.projections.add(bn),e.Proj.projections.add(vn),e.Proj.projections.add(xn),e.Proj.projections.add(Cn),e.Proj.projections.add(qn),e.Proj.projections.add(Un),e.Proj.projections.add(wn),e.Proj.projections.add(En),e.Proj.projections.add(Bn),e.Proj.projections.add(Rn),e.Proj.projections.add(Zn),e.Proj.projections.add(Qn)}(xr);class Xn extends Ce{constructor(e){super(),xe(this,e,Hn,jn,n,{})}}function Wn(t){let i,a,s,o,r,n,l,u,c,g,f;i=new mo({}),s=new Js({});let d=window.innerWidth>500&&function(e){let t,i;return t=new Xn({}),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}();return n=new xo({}),u=new eo({}),g=new ho({}),{c(){ye(i.$$.fragment),a=E(),ye(s.$$.fragment),o=E(),d&&d.c(),r=E(),ye(n.$$.fragment),l=E(),ye(u.$$.fragment),c=E(),ye(g.$$.fragment)},m(e,t){_e(i,e,t),v(e,a,t),_e(s,e,t),v(e,o,t),d&&d.m(e,t),v(e,r,t),_e(n,e,t),v(e,l,t),_e(u,e,t),v(e,c,t),_e(g,e,t),f=!0},p:e,i(e){f||(ge(i.$$.fragment,e),ge(s.$$.fragment,e),ge(d),ge(n.$$.fragment,e),ge(u.$$.fragment,e),ge(g.$$.fragment,e),f=!0)},o(e){fe(i.$$.fragment,e),fe(s.$$.fragment,e),fe(d),fe(n.$$.fragment,e),fe(u.$$.fragment,e),fe(g.$$.fragment,e),f=!1},d(e){be(i,e),e&&x(a),be(s,e),e&&x(o),d&&d.d(e),e&&x(r),be(n,e),e&&x(l),be(u,e),e&&x(c),be(g,e)}}}function Kn(e){return[]}class Jn extends Ce{constructor(e){super(),xe(this,e,Kn,Wn,n,{})}}function Yn(e){const{getMap:t}=Z(De),i=t();let a=Z("overLayers");function s(){a&&(Object.keys(a.sources).forEach((function(e,t){i.getSource(e)||i.addSource(e,a.sources[e])})),a.layers.forEach(e=>{i.getLayer(e.id)||i.addLayer(e,"water-name-lakeline-platja")}))}return i.on("styledata",()=>{setTimeout(()=>{i.isStyleLoaded()&&s()},2e3)}),i.on("load",()=>{s()}),[]}class el extends Ce{constructor(e){super(),xe(this,e,Yn,null,n,{})}}function tl(e,t,i){const a=e.slice();return a[1]=t[i],a}function il(e){let t,i,a=e[1]+"";return{c(){t=q("p"),i=w(a)},m(e,a){v(e,t,a),b(t,i)},p(e,t){1&t&&a!==(a=e[1]+"")&&A(i,a)},d(e){e&&x(t)}}}function al(t){let i,a,s,o=t[0],r=[];for(let e=0;e<o.length;e+=1)r[e]=il(tl(t,o,e));return{c(){i=q("h4"),i.textContent="Informació",a=E(),s=q("div");for(let e=0;e<r.length;e+=1)r[e].c();M(s,"id","text")},m(e,t){v(e,i,t),v(e,a,t),v(e,s,t);for(let e=0;e<r.length;e+=1)r[e].m(s,null)},p(e,[t]){if(1&t){let i;for(o=e[0],i=0;i<o.length;i+=1){const a=tl(e,o,i);r[i]?r[i].p(a,t):(r[i]=il(a),r[i].c(),r[i].m(s,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=o.length}},i:e,o:e,d(e){e&&x(i),e&&x(a),e&&x(s),C(r,e)}}}function sl(e,t,i){let{exportartextok:a}=t;return e.$$set=e=>{"exportartextok"in e&&i(0,a=e.exportartextok)},[a]}class ol extends Ce{constructor(e){super(),xe(this,e,sl,al,n,{exportartextok:0})}}function rl(e){let t,i,a;return{c(){t=q("div"),i=q("img"),i.src!==(a=e[1])&&M(i,"src",a),M(i,"alt","imatgeCol"),M(i,"class","col svelte-1xaij7x"),M(t,"id","containercols"),M(t,"class","svelte-1xaij7x")},m(e,a){v(e,t,a),b(t,i)},p(e,t){2&t&&i.src!==(a=e[1])&&M(i,"src",a)},d(e){e&&x(t)}}}function nl(e){let t,i,a;return{c(){t=q("div"),i=q("img"),i.src!==(a=e[1])&&M(i,"src",a),M(i,"alt","imatgeTall"),M(i,"class","tall svelte-1xaij7x"),M(t,"id","containertalls"),M(t,"class","svelte-1xaij7x")},m(e,a){v(e,t,a),b(t,i)},p(e,t){2&t&&i.src!==(a=e[1])&&M(i,"src",a)},d(e){e&&x(t)}}}function ll(t){let i,a,s=("cols"===t[0]||"relacions"===t[0])&&rl(t),o="talls"===t[0]&&nl(t);return{c(){s&&s.c(),i=E(),o&&o.c(),a=B()},m(e,t){s&&s.m(e,t),v(e,i,t),o&&o.m(e,t),v(e,a,t)},p(e,[t]){"cols"===e[0]||"relacions"===e[0]?s?s.p(e,t):(s=rl(e),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null),"talls"===e[0]?o?o.p(e,t):(o=nl(e),o.c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},i:e,o:e,d(e){s&&s.d(e),e&&x(i),o&&o.d(e),e&&x(a)}}}function ul(e,t,i){let a,{linkjpg:s}=t,{selected:o}=t,{typedata:r}=t;return"cols"!==r&&"relacions"!==r||(a=s),"talls"===r&&(a=`https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/talls/${o}.jpg`),e.$$set=e=>{"linkjpg"in e&&i(2,s=e.linkjpg),"selected"in e&&i(3,o=e.selected),"typedata"in e&&i(0,r=e.typedata)},[r,a,s,o]}class cl extends Ce{constructor(e){super(),xe(this,e,ul,ll,n,{linkjpg:2,selected:3,typedata:0})}}function gl(e){let t,i,a;return i=new cl({props:{selected:e[0],linkjpg:e[2],typedata:e[1]}}),{c(){t=q("div"),ye(i.$$.fragment),M(t,"id","container"),M(t,"class","svelte-1fjc00n")},m(e,s){v(e,t,s),_e(i,t,null),a=!0},p(e,[t]){const a={};1&t&&(a.selected=e[0]),4&t&&(a.linkjpg=e[2]),2&t&&(a.typedata=e[1]),i.$set(a)},i(e){a||(ge(i.$$.fragment,e),a=!0)},o(e){fe(i.$$.fragment,e),a=!1},d(e){e&&x(t),be(i)}}}function fl(e,t,i){let{selected:a}=t,{typedata:s}=t,{linkjpg:o}=t;return e.$$set=e=>{"selected"in e&&i(0,a=e.selected),"typedata"in e&&i(1,s=e.typedata),"linkjpg"in e&&i(2,o=e.linkjpg)},[a,s,o]}class dl extends Ce{constructor(e){super(),xe(this,e,fl,gl,n,{selected:0,typedata:1,linkjpg:2})}}function hl(e){let t,i,a,s,o,r,n;i=new Ot({props:{style:"        cursor: pointer;font-size: 28px; float: right;    color: black;    top: 0.23em;    position: relative;",class:" material-icons iconoConsulta",$$slots:{default:[pl]},$$scope:{ctx:e}}}),i.$on("click",e[10]),s=new ol({props:{exportartextok:e[9]}});let l=e[0]&&ml(e),u=e[1]&&yl(e);return{c(){t=q("div"),ye(i.$$.fragment),a=E(),ye(s.$$.fragment),o=E(),l&&l.c(),r=E(),u&&u.c(),M(t,"class","hola svelte-1te0o3f")},m(e,c){v(e,t,c),_e(i,t,null),b(t,a),_e(s,t,null),b(t,o),l&&l.m(t,null),b(t,r),u&&u.m(t,null),n=!0},p(e,a){const o={};4194304&a&&(o.$$scope={dirty:a,ctx:e}),i.$set(o);const n={};512&a&&(n.exportartextok=e[9]),s.$set(n),e[0]?l?l.p(e,a):(l=ml(e),l.c(),l.m(t,r)):l&&(l.d(1),l=null),e[1]?u?u.p(e,a):(u=yl(e),u.c(),u.m(t,null)):u&&(u.d(1),u=null)},i(e){n||(ge(i.$$.fragment,e),ge(s.$$.fragment,e),n=!0)},o(e){fe(i.$$.fragment,e),fe(s.$$.fragment,e),n=!1},d(e){e&&x(t),be(i),be(s),l&&l.d(),u&&u.d()}}}function pl(e){let t;return{c(){t=w("close")},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function ml(e){let t,i,a,s,o,r,n;return{c(){t=q("button"),t.textContent="Visualitza",i=E(),a=q("a"),s=w("Descarrega"),M(t,"id","view-full"),I(t,"color","#1a4971"),M(a,"href",o="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/talls_llegendes_zip/"+e[2]+".zip"),I(a,"color","#1a4971")},m(o,l){v(o,t,l),v(o,i,l),v(o,a,l),b(a,s),r||(n=P(t,"click",e[11]),r=!0)},p(e,t){4&t&&o!==(o="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/talls_llegendes_zip/"+e[2]+".zip")&&M(a,"href",o)},d(e){e&&x(t),e&&x(i),e&&x(a),r=!1,n()}}}function yl(e){let t,i,a,s,o,r;return{c(){t=q("button"),t.textContent="Visualitza",i=E(),a=q("a"),s=w("Descarrega"),M(t,"id","view-full"),I(t,"color","#1a4971"),M(a,"href",e[4]),I(a,"color","#1a4971")},m(n,l){v(n,t,l),v(n,i,l),v(n,a,l),b(a,s),o||(r=P(t,"click",e[11]),o=!0)},p(e,t){16&t&&M(a,"href",e[4])},d(e){e&&x(t),e&&x(i),e&&x(a),o=!1,r()}}}function _l(e){let t,i,a,s,o;return i=new dl({props:{selected:e[6],linkjpg:e[3],typedata:e[7]}}),s=new kt({props:{style:"    position: absolute;\r\nright:50%;\r\nbottom: -14px;\r\nz-index: 10;",$$slots:{default:[vl]},$$scope:{ctx:e}}}),s.$on("click",e[11]),{c(){t=q("div"),ye(i.$$.fragment),a=E(),ye(s.$$.fragment),M(t,"class","containerDiv svelte-1te0o3f")},m(e,r){v(e,t,r),_e(i,t,null),b(t,a),_e(s,t,null),o=!0},p(e,t){const a={};64&t&&(a.selected=e[6]),8&t&&(a.linkjpg=e[3]),128&t&&(a.typedata=e[7]),i.$set(a);const o={};4194304&t&&(o.$$scope={dirty:t,ctx:e}),s.$set(o)},i(e){o||(ge(i.$$.fragment,e),ge(s.$$.fragment,e),o=!0)},o(e){fe(i.$$.fragment,e),fe(s.$$.fragment,e),o=!1},d(e){e&&x(t),be(i),be(s)}}}function bl(e){let t;return{c(){t=w("close")},m(e,i){v(e,t,i)},d(e){e&&x(t)}}}function vl(e){let t,i;return t=new Ot({props:{style:"        font-size: 30px;\r\ncolor: white;\r\nborder-style: solid;\r\nborder-radius: 17px;\r\nborder-width: 1px;\r\nbackground-color: black;",class:" material-icons  ",$$slots:{default:[bl]},$$scope:{ctx:e}}}),{c(){ye(t.$$.fragment)},m(e,a){_e(t,e,a),i=!0},p(e,i){const a={};4194304&i&&(a.$$scope={dirty:i,ctx:e}),t.$set(a)},i(e){i||(ge(t.$$.fragment,e),i=!0)},o(e){fe(t.$$.fragment,e),i=!1},d(e){be(t,e)}}}function xl(e){let t,i,a,s=e[8]&&hl(e),o=e[5]&&_l(e);return{c(){s&&s.c(),t=E(),o&&o.c(),i=B()},m(e,r){s&&s.m(e,r),v(e,t,r),o&&o.m(e,r),v(e,i,r),a=!0},p(e,[a]){e[8]?s?(s.p(e,a),256&a&&ge(s,1)):(s=hl(e),s.c(),ge(s,1),s.m(t.parentNode,t)):s&&(ue(),fe(s,1,1,()=>{s=null}),ce()),e[5]?o?(o.p(e,a),32&a&&ge(o,1)):(o=_l(e),o.c(),ge(o,1),o.m(i.parentNode,i)):o&&(ue(),fe(o,1,1,()=>{o=null}),ce())},i(e){a||(ge(s),ge(o),a=!0)},o(e){fe(s),fe(o),a=!1},d(e){s&&s.d(e),e&&x(t),o&&o.d(e),e&&x(i)}}}function Cl(e,t,i){Z("changePaintProperty");const a=Z("changeColorProperty"),s=Z("changeInitialColorProperty"),{getMap:o}=(Z("overLayers"),Z(De)),r=o();var n=!1,l=!1,u=[],c="",g="",f=!1,d=[],h=[],p="";let m=!1;let y="";return $(async()=>{var e=new Re.Popup({offset:[0,-15],closeOnClick:!1,closeButton:!0});r.on("click",(function(t){e.addTo(r).on("close",(function(e){s(h[0])}));var o=[[t.point.x-1,t.point.y-1],[t.point.x+1,t.point.y+1]],f=r.queryRenderedFeatures(o);f=[f[0]];let _="",b="";var v=[],x=[],C=[],q=[],U=[],w=[],E=[],B=[],P=[],M=[],T=[],A=[],S=[],I=[],D=[],z=[],k=[];if(x.push(f),void 0!==h[0]&&s(h[0]),x.forEach(e=>{"infogeo"===e[0].source&&(h=[],a(e[0]),h.push(e[0]))}),f.forEach(e=>{if("infogeo"===e.source&&e.properties.DESCRIPCIO){let t=e.properties.DESCRIPCIO;if(v.includes(t)||v.push(t),null!=e.properties.CODI_CAS){let t=e.properties.CODI_CAS;C.includes(t)||C.push(t)}if(null==e.properties.CODI_CAS&&null!=e.properties.ID_MAPA){let t=e.properties.ID_MAPA;C.includes(t)||C.push(t)}if(null==e.properties.CODI_CAS&&null!=e.properties.EPIGRAF){let t=e.properties.EPIGRAF;C.includes(t)||C.push(t)}if("Unitats geològiques:1"===e.sourceLayer||"Unitats geològiques:2"===e.sourceLayer){let t=e.properties.IDABS,i=e.properties.EDAT,a=e.properties.EPOCA,s=e.properties.ERA,o=e.properties.PERIODE,r=e.properties.EDAT_MET,n=e.properties.MET;e.properties.OBS_EDAT;q.includes(t)||q.push(t),U.includes(i)||U.push(i),E.includes(a)||E.push(a),B.includes(s)||B.push(s),M.includes(o)||M.push(o),w.includes(r)||w.push(r),P.includes(n)||P.push(n)}else q.push(null);if("Talls geològics"===e.sourceLayer){let t=e.properties.DESCRIPCIO;e.properties.NOM_TALL;T.includes(t)||(T.push(t),i(6,d=e.properties.NOM_TALL),i(2,u=e.properties.NOM_TALL),i(0,n=!0),i(1,l=!1),i(7,p="talls"))}if("Paleozoic NO LINK"===e.sourceLayer||"Paleozoic LINK"===e.sourceLayer||"Mesozoic NO LINK"===e.sourceLayer||"Mesozoic LINK"===e.sourceLayer||"Paleogen LINK"===e.sourceLayer||"Paleogen NO LINK"===e.sourceLayer||"Neogen LINK"===e.sourceLayer||"Neogen NO LINK"===e.sourceLayer){let t=e.properties.DESCRIPCIO,a=e.properties.IDABS;e.properties.LINK_COL,e.properties.LINK_ZIP;A.includes(t)||(A.push(t),q.push(a),i(6,d=e.properties.NOM_COL),i(3,c=e.properties.LINK_COL),i(4,g=e.properties.LINK_ZIP),i(1,l=!0),i(0,n=!1),i(7,p="cols"))}if("Esquemes de relacions estratigràfiques"===e.sourceLayer){let t=e.properties.DESCRIPCIO,a=e.properties.IDABS;D.includes(t)||(D.push(t),q.push(a),i(6,d=e.properties.IDABS),i(3,c=e.properties.LINK_REL),i(4,g=e.properties.LINK_ZIP),i(1,l=!0),i(0,n=!1),i(7,p="relacions"))}if(e.layer.id.includes("Terrenys antròpics")){let t=e.properties.DESCRIPCIO;z.includes(t)||(z.push(t),i(6,d=e.properties.EPIGRAF),i(1,l=!1),i(0,n=!1),i(7,p="antropics"))}if(e.layer.id.includes("Mesures d'estructures")){let t=e.properties.DESCRIPCIO,a=e.properties.INCLIN,s=e.properties.DIR;k.includes(t)||(k.push(t),S.push(a),I.push(s),i(6,d=e.properties.EPIGRAF),i(1,l=!1),i(0,n=!1),i(7,p="antropics"))}}}),0!==v.length){if(0!==T.length){_=_+'<button id="view-full" style="color: #1a4971">Veure el tall</button>'+`<div>\n                                                          <p style="color: #666">TALL: ${T}</p>\n                                                          \n                                                                                                           \n                                                          \n                                                          </div>`+`<a href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/talls_llegendes_zip/${T}.zip" style="color: #1a4971">Descarrega el tall</a>`,b=_,b=[{ep:T[0]}]}if(" "===U[0]){if(void 0===P[0]||" "==P[0]){if(null!==q[0]&&0==T.length){i(0,n=!1),i(1,l=!1),_+=`<div>\n                                                                          <p style="color: #666"><b>${C[0]}:</b> ${v[0]}</p>\n                                                                          <p style="color: #666">Era: ${B[0]}</p>\n                                                                          <p style="color: #666">Periòde: ${M[0]}</p>\n                                                                          <p style="color: #666">Època: ${E[0]}</p>\n                                                                         \n                                                                          <p style="color: #666">Full25m: ${q[0]}</p>\n                                                                          </div>`,b=[{ep:C[0]+" :  "+v[0]},{Era:B[0]},{"Periòde":M[0]},{"Època":E[0]},{"Full 1:25 000":q[0]}]}}else if(null!==q[0]&&0==T.length){i(0,n=!1),i(1,l=!1),_+=`<div>\n                                                                  <p style="color: #666"><b>${C[0]}:</b> ${v[0]}</p>\n                                                                  <p style="color: #666">Era: ${B[0]}</p>\n                                                                  <p style="color: #666">Període: ${M[0]}</p>\n                                                                  <p style="color: #666">Època: ${E[0]}</p>\n                                                                  <p style="color: #666">Edat: ${U[0]}</p>\n\n                                                                  <p style="color: #666">Edat Met.: ${w[0]}</p>\n                                                                  <p style="color: #666">Metamorfisme: ${P[0]}</p>\n                                                                  <p style="color: #666">Full25m: ${q[0]}</p>\n                                                                  </div>`,b=[{ep:C[0]+" :  "+v[0]},{Era:B[0]},{"Periòde":M[0]},{"Època":E[0]},{Edat:U[0]},{"Edat Met.":w[0]},{Metamorfisme:P[0]},{"Full 1:25 000":q[0]}]}}else if(void 0===P[0]||" "==P[0]){if(null!==q[0]&&0==T.length){i(0,n=!1),i(1,l=!1),_+=`<div>\n                                                                          <p style="color: #666"><b>${C[0]}:</b> ${v[0]}</p>\n                                                                          <p style="color: #666">Era: ${B[0]}</p>\n                                                                          <p style="color: #666">Periòde: ${M[0]}</p>\n                                                                          <p style="color: #666">Època: ${E[0]}</p>\n                                                                          <p style="color: #666">Edat: ${U[0]}</p>\n                                                                          <p style="color: #666">Full25m: ${q[0]}</p>\n                                                                          </div>`,b=[{ep:C[0]+" :  "+v[0]},{Era:B[0]},{"Periòde":M[0]},{"Època":E[0]},{Edat:U[0]},{"Full 1:25 000":q[0]}]}}else if(null!==q[0]&&0==T.length){i(0,n=!1),i(1,l=!1),_+=`<div>\n                                                                  <p style="color: #666"><b>${C[0]}:</b> ${v[0]}</p>\n                                                                  <p style="color: #666">Era: ${B[0]}</p>\n                                                                  <p style="color: #666">Període: ${M[0]}</p>\n                                                                  <p style="color: #666">Època: ${E[0]}</p>\n                                                                  <p style="color: #666">Edat: ${U[0]}</p>\n\n                                                                  <p style="color: #666">Edat Met.: ${w[0]}</p>\n                                                                  <p style="color: #666">Metamorfisme: ${P[0]}</p>\n                                                                  <p style="color: #666">Full25m: ${q[0]}</p>\n                                                                  </div>`,b=[{ep:C[0]+" :  "+v[0]},{Era:B[0]},{"Periòde":M[0]},{"Època":E[0]},{Edat:U[0]},{"Edat Met.":w[0]},{Metamorfisme:P[0]},{"Full 1:25 000":q[0]}]}if(null===q[0]&&0==T.length&&0==S.length&&null!==A[0]&&0==S.length){_=q[1]+v[0],b=[{ep:q[1]+" :  "+v[0]}]}if(null!==q[0]&&0!==T.length&&0==S.length){_=C[0]+v[0],b=[{ep:C[0]+" :  "+v[0]}]}0==A.length&&0!==S.length&&(_+=`<div>\n                                                                          \n                                                                          <p style="color: #666">Descripció: ${v[0]}</p>\n                                                                          <p style="color: #666">Inclinació: ${S[0]}</p>\n                                                                          <p style="color: #666">Direcció: ${I[0]}</p>\n                                                                         \n                                                                          \n                                                                          </div>`,b=[{"Descripció":v[0]},{"Inclinació":S[0]},{"Direcció":I[0]}]);let e=[];b.forEach(t=>{let i=JSON.stringify(t);i=i.replace('"'," ").replace("{","").replace("}","").replace('":"',": ").replace('"',"").replace("ep:",""),e.push(i)}),i(9,y=e),i(8,m=!0)}}))}),[n,l,u,c,g,f,d,p,m,y,function(){s(h[0]),i(8,m=!1)},function(){i(5,f=!f)}]}class ql extends Ce{constructor(e){super(),xe(this,e,Cl,xl,n,{})}}function Ul(e){let t,i,a,s,o,r,n,l;return t=new Jn({}),a=new el({}),o=new ql({}),n=new Wt({}),{c(){ye(t.$$.fragment),i=E(),ye(a.$$.fragment),s=E(),ye(o.$$.fragment),r=E(),ye(n.$$.fragment)},m(e,u){_e(t,e,u),v(e,i,u),_e(a,e,u),v(e,s,u),_e(o,e,u),v(e,r,u),_e(n,e,u),l=!0},i(e){l||(ge(t.$$.fragment,e),ge(a.$$.fragment,e),ge(o.$$.fragment,e),ge(n.$$.fragment,e),l=!0)},o(e){fe(t.$$.fragment,e),fe(a.$$.fragment,e),fe(o.$$.fragment,e),fe(n.$$.fragment,e),l=!1},d(e){be(t,e),e&&x(i),be(a,e),e&&x(s),be(o,e),e&&x(r),be(n,e)}}}function wl(e){let t,i,a,s,o,r,n,l;function u(t){e[2].call(null,t)}let c={};return void 0!==e[0]&&(c.openModalInfo=e[0]),i=new ka({props:c}),H.push(()=>me(i,"openModalInfo",u)),o=new Vs({}),n=new Ws({props:{lat:41.763,lon:1.443,zoom:7.58,maxZoom:16,pitch:0,bearing:0,style:e[1],$$slots:{default:[Ul]},$$scope:{ctx:e}}}),{c(){t=q("div"),ye(i.$$.fragment),s=E(),ye(o.$$.fragment),r=E(),ye(n.$$.fragment),M(t,"class","container svelte-15shk6w")},m(e,a){v(e,t,a),_e(i,t,null),b(t,s),_e(o,t,null),b(t,r),_e(n,t,null),l=!0},p(e,[t]){const s={};!a&&1&t&&(a=!0,s.openModalInfo=e[0],ee(()=>a=!1)),i.$set(s);const o={};16384&t&&(o.$$scope={dirty:t,ctx:e}),n.$set(o)},i(e){l||(ge(i.$$.fragment,e),ge(o.$$.fragment,e),ge(n.$$.fragment,e),l=!0)},o(e){fe(i.$$.fragment,e),fe(o.$$.fragment,e),fe(n.$$.fragment,e),l=!1},d(e){e&&x(t),be(i),be(o),be(n)}}}function El(e,t,i){let a,s={...Ra};const o=ze[0].url;we.subscribe(e=>{});function r(e,t){const i=t?"visible":"none";let a;e.value.split(",").forEach(e=>{s.layers.forEach(t=>{t.layout&&t.layout.visibility&&t["source-layer"]===e&&(a=t.id,t.layout.visibility=i,Be.set({ly:a,vis:i}))})})}return V("overLayers",s),V("activateLayer",r),V("activateLayerGroup",(function(e,t){e.items.forEach(e=>{r(e,t)})})),V("changeBaseLayer",(function(e){Pe.set(e.url)})),V("estilTopo",o),V("changePaintProperty",(function(e,t){let i,a;"Unitats geològiques:1,Unitats geològiques:1/label"===e.value&&s.layers.forEach(e=>{e.layout&&e.layout.visibility&&"Unitats geològiques:1"===e["source-layer"]&&(i=e.id,a=parseFloat(t/100),e.paint["fill-opacity"]=a,Me.set({ly:i,op:a}))}),"Unitats geològiques:2,Unitats geològiques:2/label"===e.value&&s.layers.forEach(e=>{e.layout&&e.layout.visibility&&"Unitats geològiques:2"===e["source-layer"]&&(i=e.id,a=parseFloat(t/100),e.paint["fill-opacity"]=a,Me.set({ly:i,op:a}))}),"Columnes del Paleozoic,Columnes del Mesozoic,Paleogen LINK,Paleogen NO LINK,Neogen LINK,Neogen NO LINK"===e.value&&s.layers.forEach(e=>{e.layout&&e.layout.visibility&&("Columnes del Paleozoic"!==e["source-layer"]&&"Columnes del Mesozoic"!==e["source-layer"]&&"Paleogen LINK"!==e["source-layer"]&&"Paleogen NO LINK"!==e["source-layer"]&&"Neogen LINK"!==e["source-layer"]&&"Neogen NO LINK"!==e["source-layer"]||(i=e.id,a=parseFloat(t/100),e.paint["fill-opacity"]=a,Me.set({ly:i,op:a})))})})),V("changeColorProperty",(function(e){let t,i,a,o;s.layers.forEach(s=>{s.layout&&s.layout.visibility&&s.id===e.layer.id&&(t=s.id,i=s.paint,o=e.properties.IDABS,a=s.type,"Talls geològics/5704"!==s.id?(Ae.set({ly:t,op:i,ty:a}),Ie.set({item:e,ly:t,op:i,idabs:o,ty:a})):Ie.set({item:e,ly:t,op:i,idabs:o,ty:a}))}),"Talls geològics"===e.layer["source-layer"]&&s.layers.forEach(t=>{if(t.layout&&t.layout.visibility&&t.id===e.layer.id){let t,i;t="talls",i=e.properties.NOM_TALL,Ie.set({item:e,id:t,nom:i})}}),e.layer.id.includes("Columnes")&&s.layers.forEach(t=>{if(t.layout&&t.layout.visibility&&t.id===e.layer.id){let t,i;t="polygonColumnes",i=e.properties.IDABS,Ie.set({item:e,id:t,idabs:i})}}),"Esquemes de relacions estratigràfiques"===e.layer["source-layer"]&&s.layers.forEach(t=>{if(t.layout&&t.layout.visibility&&t.id===e.layer.id){let t,i;t="polygonEsquemes",i=e.properties.IDABS,Ie.set({item:e,id:t,idabs:i})}}),"Unitats geològiques:1"===e.layer["source-layer"]&&s.layers.forEach(t=>{if(t.layout&&t.layout.visibility&&t.id===e.layer.id){let t,i;t="polygonsQt",i=e.properties.IDABS,Ie.set({item:e,id:t,idabs:i})}}),"Unitats geològiques:2"===e.layer["source-layer"]&&s.layers.forEach(t=>{if(t.layout&&t.layout.visibility&&t.id===e.layer.id){let t,i;t="polygonsBs",i=e.properties.IDABS,Ie.set({item:e,id:t,idabs:i})}})})),V("changeInitialColorProperty",(function(e){let t,i,a;s.layers.forEach(s=>{s.layout&&s.layout.visibility&&s.id===e.layer.id&&(t=s.id,i=s.paint,a=s.type,Se.set({ly:t,op:i,ty:a}))})})),V("changePlace",(function(e){Te.set(e)})),V("stateTallDrawer",Ee),[a,o,function(e){a=e,i(0,a)}]}return new class extends Ce{constructor(e){super(),xe(this,e,El,wl,n,{})}}({target:document.body,props:{}})}();
=======
   */var Qi={FIXED_CLASS:"mdc-top-app-bar--fixed",FIXED_SCROLLED_CLASS:"mdc-top-app-bar--fixed-scrolled",SHORT_CLASS:"mdc-top-app-bar--short",SHORT_COLLAPSED_CLASS:"mdc-top-app-bar--short-collapsed",SHORT_HAS_ACTION_ITEM_CLASS:"mdc-top-app-bar--short-has-action-item"},Wi={DEBOUNCE_THROTTLE_RESIZE_TIME_MS:100,MAX_TOP_APP_BAR_HEIGHT:128},Ki={ACTION_ITEM_SELECTOR:".mdc-top-app-bar__action-item",NAVIGATION_EVENT:"MDCTopAppBar:nav",NAVIGATION_ICON_SELECTOR:".mdc-top-app-bar__navigation-icon",ROOT_SELECTOR:".mdc-top-app-bar",TITLE_SELECTOR:".mdc-top-app-bar__title"},Ji=function(e){function t(i){return e.call(this,Ne({},t.defaultAdapter,i))||this}return Oe(t,e),Object.defineProperty(t,"strings",{get:function(){return Ki},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cssClasses",{get:function(){return Qi},enumerable:!0,configurable:!0}),Object.defineProperty(t,"numbers",{get:function(){return Wi},enumerable:!0,configurable:!0}),Object.defineProperty(t,"defaultAdapter",{get:function(){return{addClass:function(){},removeClass:function(){},hasClass:function(){return!1},setStyle:function(){},getTopAppBarHeight:function(){return 0},notifyNavigationIconClicked:function(){},getViewportScrollY:function(){return 0},getTotalActionItems:function(){return 0}}},enumerable:!0,configurable:!0}),t.prototype.handleTargetScroll=function(){},t.prototype.handleWindowResize=function(){},t.prototype.handleNavigationClick=function(){this.adapter_.notifyNavigationIconClicked()},t}(je),Yi=function(e){function t(t){var i=e.call(this,t)||this;return i.wasDocked_=!0,i.isDockedShowing_=!0,i.currentAppBarOffsetTop_=0,i.isCurrentlyBeingResized_=!1,i.resizeThrottleId_=0,i.resizeDebounceId_=0,i.lastScrollPosition_=i.adapter_.getViewportScrollY(),i.topAppBarHeight_=i.adapter_.getTopAppBarHeight(),i}return Oe(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.adapter_.setStyle("top","")},t.prototype.handleTargetScroll=function(){var e=Math.max(this.adapter_.getViewportScrollY(),0),t=e-this.lastScrollPosition_;this.lastScrollPosition_=e,this.isCurrentlyBeingResized_||(this.currentAppBarOffsetTop_-=t,this.currentAppBarOffsetTop_>0?this.currentAppBarOffsetTop_=0:Math.abs(this.currentAppBarOffsetTop_)>this.topAppBarHeight_&&(this.currentAppBarOffsetTop_=-this.topAppBarHeight_),this.moveTopAppBar_())},t.prototype.handleWindowResize=function(){var e=this;this.resizeThrottleId_||(this.resizeThrottleId_=setTimeout((function(){e.resizeThrottleId_=0,e.throttledResizeHandler_()}),Wi.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)),this.isCurrentlyBeingResized_=!0,this.resizeDebounceId_&&clearTimeout(this.resizeDebounceId_),this.resizeDebounceId_=setTimeout((function(){e.handleTargetScroll(),e.isCurrentlyBeingResized_=!1,e.resizeDebounceId_=0}),Wi.DEBOUNCE_THROTTLE_RESIZE_TIME_MS)},t.prototype.checkForUpdate_=function(){var e=-this.topAppBarHeight_,t=this.currentAppBarOffsetTop_<0,i=this.currentAppBarOffsetTop_>e,o=t&&i;if(o)this.wasDocked_=!1;else{if(!this.wasDocked_)return this.wasDocked_=!0,!0;if(this.isDockedShowing_!==i)return this.isDockedShowing_=i,!0}return o},t.prototype.moveTopAppBar_=function(){if(this.checkForUpdate_()){var e=this.currentAppBarOffsetTop_;Math.abs(e)>=this.topAppBarHeight_&&(e=-Wi.MAX_TOP_APP_BAR_HEIGHT),this.adapter_.setStyle("top",e+"px")}},t.prototype.throttledResizeHandler_=function(){var e=this.adapter_.getTopAppBarHeight();this.topAppBarHeight_!==e&&(this.wasDocked_=!1,this.currentAppBarOffsetTop_-=this.topAppBarHeight_-e,this.topAppBarHeight_=e),this.handleTargetScroll()},t}(Ji),eo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wasScrolled_=!1,t}return Oe(t,e),t.prototype.handleTargetScroll=function(){this.adapter_.getViewportScrollY()<=0?this.wasScrolled_&&(this.adapter_.removeClass(Qi.FIXED_SCROLLED_CLASS),this.wasScrolled_=!1):this.wasScrolled_||(this.adapter_.addClass(Qi.FIXED_SCROLLED_CLASS),this.wasScrolled_=!0)},t}(Yi),to=function(e){function t(t){var i=e.call(this,t)||this;return i.isCollapsed_=!1,i.isAlwaysCollapsed_=!1,i}return Oe(t,e),Object.defineProperty(t.prototype,"isCollapsed",{get:function(){return this.isCollapsed_},enumerable:!0,configurable:!0}),t.prototype.init=function(){e.prototype.init.call(this),this.adapter_.getTotalActionItems()>0&&this.adapter_.addClass(Qi.SHORT_HAS_ACTION_ITEM_CLASS),this.setAlwaysCollapsed(this.adapter_.hasClass(Qi.SHORT_COLLAPSED_CLASS))},t.prototype.setAlwaysCollapsed=function(e){this.isAlwaysCollapsed_=!!e,this.isAlwaysCollapsed_?this.collapse_():this.maybeCollapseBar_()},t.prototype.getAlwaysCollapsed=function(){return this.isAlwaysCollapsed_},t.prototype.handleTargetScroll=function(){this.maybeCollapseBar_()},t.prototype.maybeCollapseBar_=function(){this.isAlwaysCollapsed_||(this.adapter_.getViewportScrollY()<=0?this.isCollapsed_&&this.uncollapse_():this.isCollapsed_||this.collapse_())},t.prototype.uncollapse_=function(){this.adapter_.removeClass(Qi.SHORT_COLLAPSED_CLASS),this.isCollapsed_=!1},t.prototype.collapse_=function(){this.adapter_.addClass(Qi.SHORT_COLLAPSED_CLASS),this.isCollapsed_=!0},t}(Ji),io=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Oe(t,e),t.attachTo=function(e){return new t(e)},t.prototype.initialize=function(e){void 0===e&&(e=function(e){return dt.attachTo(e)}),this.navIcon_=this.root_.querySelector(Ki.NAVIGATION_ICON_SELECTOR);var t=[].slice.call(this.root_.querySelectorAll(Ki.ACTION_ITEM_SELECTOR));this.navIcon_&&t.push(this.navIcon_),this.iconRipples_=t.map((function(t){var i=e(t);return i.unbounded=!0,i})),this.scrollTarget_=window},t.prototype.initialSyncWithDOM=function(){this.handleNavigationClick_=this.foundation_.handleNavigationClick.bind(this.foundation_),this.handleWindowResize_=this.foundation_.handleWindowResize.bind(this.foundation_),this.handleTargetScroll_=this.foundation_.handleTargetScroll.bind(this.foundation_),this.scrollTarget_.addEventListener("scroll",this.handleTargetScroll_),this.navIcon_&&this.navIcon_.addEventListener("click",this.handleNavigationClick_);var e=this.root_.classList.contains(Qi.FIXED_CLASS);this.root_.classList.contains(Qi.SHORT_CLASS)||e||window.addEventListener("resize",this.handleWindowResize_)},t.prototype.destroy=function(){this.iconRipples_.forEach((function(e){return e.destroy()})),this.scrollTarget_.removeEventListener("scroll",this.handleTargetScroll_),this.navIcon_&&this.navIcon_.removeEventListener("click",this.handleNavigationClick_);var t=this.root_.classList.contains(Qi.FIXED_CLASS);this.root_.classList.contains(Qi.SHORT_CLASS)||t||window.removeEventListener("resize",this.handleWindowResize_),e.prototype.destroy.call(this)},t.prototype.setScrollTarget=function(e){this.scrollTarget_.removeEventListener("scroll",this.handleTargetScroll_),this.scrollTarget_=e,this.handleTargetScroll_=this.foundation_.handleTargetScroll.bind(this.foundation_),this.scrollTarget_.addEventListener("scroll",this.handleTargetScroll_)},t.prototype.getDefaultFoundation=function(){var e=this,t={hasClass:function(t){return e.root_.classList.contains(t)},addClass:function(t){return e.root_.classList.add(t)},removeClass:function(t){return e.root_.classList.remove(t)},setStyle:function(t,i){return e.root_.style.setProperty(t,i)},getTopAppBarHeight:function(){return e.root_.clientHeight},notifyNavigationIconClicked:function(){return e.emit(Ki.NAVIGATION_EVENT,{})},getViewportScrollY:function(){var t=e.scrollTarget_,i=e.scrollTarget_;return void 0!==t.pageYOffset?t.pageYOffset:i.scrollTop},getTotalActionItems:function(){return e.root_.querySelectorAll(Ki.ACTION_ITEM_SELECTOR).length}};return this.root_.classList.contains(Qi.SHORT_CLASS)?new to(t):this.root_.classList.contains(Qi.FIXED_CLASS)?new eo(t):new Yi(t)},t}(Ze);function oo(e){let t,o,s,n,c,h,m;const d=e[11].default,f=l(d,e,e[10],null);let y=[{class:o="\n    mdc-top-app-bar\n    "+e[1]+"\n    "+("short"===e[2]?"mdc-top-app-bar--short":"")+"\n    "+(e[4]?"mdc-top-app-bar--short-collapsed":"")+"\n    "+("fixed"===e[2]?"mdc-top-app-bar--fixed":"")+"\n    "+("static"===e[2]?"smui-top-app-bar--static":"")+"\n    "+("secondary"===e[3]?"smui-top-app-bar--color-secondary":"")+"\n    "+(e[5]?"mdc-top-app-bar--prominent":"")+"\n    "+(e[6]?"mdc-top-app-bar--dense":"")+"\n  "},Ye(e[9],["use","class","variant","color","collapsed","prominent","dense"])],g={};for(let e=0;e<y.length;e+=1)g=i(g,y[e]);return{c(){t=L("header"),f&&f.c(),T(t,g)},m(i,o){b(i,t,o),f&&f.m(t,null),e[12](t),c=!0,h||(m=[p(s=et.call(null,t,e[0])),p(n=e[8].call(null,t))],h=!0)},p(e,[i]){f&&f.p&&1024&i&&u(f,d,e,e[10],i,null,null),T(t,g=me(y,[(!c||126&i&&o!==(o="\n    mdc-top-app-bar\n    "+e[1]+"\n    "+("short"===e[2]?"mdc-top-app-bar--short":"")+"\n    "+(e[4]?"mdc-top-app-bar--short-collapsed":"")+"\n    "+("fixed"===e[2]?"mdc-top-app-bar--fixed":"")+"\n    "+("static"===e[2]?"smui-top-app-bar--static":"")+"\n    "+("secondary"===e[3]?"smui-top-app-bar--color-secondary":"")+"\n    "+(e[5]?"mdc-top-app-bar--prominent":"")+"\n    "+(e[6]?"mdc-top-app-bar--dense":"")+"\n  "))&&{class:o},512&i&&Ye(e[9],["use","class","variant","color","collapsed","prominent","dense"])])),s&&r(s.update)&&1&i&&s.update.call(null,e[0])},i(e){c||(ce(f,e),c=!0)},o(e){ue(f,e),c=!1},d(i){i&&v(t),f&&f.d(i),e[12](null),h=!1,a(m)}}}function so(e,t,o){let{$$slots:s={},$$scope:a}=t;const r=Je(R(),["MDCList:action"]);let n,l,{use:c=[]}=t,{class:u=""}=t,{variant:p="standard"}=t,{color:m="primary"}=t,{collapsed:d=!1}=t,{prominent:f=!1}=t,{dense:y=!1}=t;return O(()=>{l=new io(n)}),N(()=>{l&&l.destroy()}),e.$$set=e=>{o(9,t=i(i({},t),h(e))),"use"in e&&o(0,c=e.use),"class"in e&&o(1,u=e.class),"variant"in e&&o(2,p=e.variant),"color"in e&&o(3,m=e.color),"collapsed"in e&&o(4,d=e.collapsed),"prominent"in e&&o(5,f=e.prominent),"dense"in e&&o(6,y=e.dense),"$$scope"in e&&o(10,a=e.$$scope)},t=h(t),[c,u,p,m,d,f,y,n,r,t,a,s,function(e){Z[e?"unshift":"push"](()=>{n=e,o(7,n)})}]}class ao extends ve{constructor(e){super(),be(this,e,so,oo,n,{use:0,class:1,variant:2,color:3,collapsed:4,prominent:5,dense:6})}}var ro=_i({class:"mdc-top-app-bar__row",component:qi,contexts:{}});function no(e){let t,o,s,n,c,h,m;const d=e[7].default,f=l(d,e,e[6],null);let y=[{class:o="\n    mdc-top-app-bar__section\n    "+e[1]+"\n    "+("start"===e[2]?"mdc-top-app-bar__section--align-start":"")+"\n    "+("end"===e[2]?"mdc-top-app-bar__section--align-end":"")+"\n  "},e[3]?{role:"toolbar"}:{},Ye(e[5],["use","class","align","toolbar"])],g={};for(let e=0;e<y.length;e+=1)g=i(g,y[e]);return{c(){t=L("section"),f&&f.c(),T(t,g)},m(i,o){b(i,t,o),f&&f.m(t,null),c=!0,h||(m=[p(s=et.call(null,t,e[0])),p(n=e[4].call(null,t))],h=!0)},p(e,[i]){f&&f.p&&64&i&&u(f,d,e,e[6],i,null,null),T(t,g=me(y,[(!c||6&i&&o!==(o="\n    mdc-top-app-bar__section\n    "+e[1]+"\n    "+("start"===e[2]?"mdc-top-app-bar__section--align-start":"")+"\n    "+("end"===e[2]?"mdc-top-app-bar__section--align-end":"")+"\n  "))&&{class:o},8&i&&(e[3]?{role:"toolbar"}:{}),32&i&&Ye(e[5],["use","class","align","toolbar"])])),s&&r(s.update)&&1&i&&s.update.call(null,e[0])},i(e){c||(ce(f,e),c=!0)},o(e){ue(f,e),c=!1},d(e){e&&v(t),f&&f.d(e),h=!1,a(m)}}}function lo(e,t,o){let{$$slots:s={},$$scope:a}=t;const r=Je(R(),["MDCList:action"]);let{use:n=[]}=t,{class:l=""}=t,{align:c="start"}=t,{toolbar:u=!1}=t;return $("SMUI:icon-button:context",u?"top-app-bar:action":"top-app-bar:navigation"),$("SMUI:button:context",u?"top-app-bar:action":"top-app-bar:navigation"),e.$$set=e=>{o(5,t=i(i({},t),h(e))),"use"in e&&o(0,n=e.use),"class"in e&&o(1,l=e.class),"align"in e&&o(2,c=e.align),"toolbar"in e&&o(3,u=e.toolbar),"$$scope"in e&&o(6,a=e.$$scope)},t=h(t),[n,l,c,u,r,t,a,s]}class co extends ve{constructor(e){super(),be(this,e,lo,no,n,{use:0,class:1,align:2,toolbar:3})}}function uo(e){let t,o,s,n,c,h;const m=e[4].default,d=l(m,e,e[3],null);let f=[Ye(e[2],["use"])],y={};for(let e=0;e<f.length;e+=1)y=i(y,f[e]);return{c(){t=L("span"),d&&d.c(),T(t,y)},m(i,a){b(i,t,a),d&&d.m(t,null),n=!0,c||(h=[p(o=et.call(null,t,e[0])),p(s=e[1].call(null,t))],c=!0)},p(e,[i]){d&&d.p&&8&i&&u(d,m,e,e[3],i,null,null),T(t,y=me(f,[4&i&&Ye(e[2],["use"])])),o&&r(o.update)&&1&i&&o.update.call(null,e[0])},i(e){n||(ce(d,e),n=!0)},o(e){ue(d,e),n=!1},d(e){e&&v(t),d&&d.d(e),c=!1,a(h)}}}function ho(e,t,o){let{$$slots:s={},$$scope:a}=t;const r=Je(R());let{use:n=[]}=t;return e.$$set=e=>{o(2,t=i(i({},t),h(e))),"use"in e&&o(0,n=e.use),"$$scope"in e&&o(3,a=e.$$scope)},t=h(t),[n,r,t,a,s]}class po extends ve{constructor(e){super(),be(this,e,ho,uo,n,{use:0})}}function mo(e){return e.classList.add("mdc-top-app-bar--short-fixed-adjust"),{destroy(){e.classList.remove("mdc-top-app-bar--short-fixed-adjust")}}}function fo(e){let t;return{c(){t=I("help")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function yo(e){let t;return{c(){t=I("info")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function go(e){let t,i,o,s,a,r;return t=new Xi({}),o=new qt({props:{id:"topbarInfovisor",style:"color:black",class:"btinfo material-icons","aria-label":"Informació del Visor",$$slots:{default:[fo]},$$scope:{ctx:e}}}),o.$on("click",e[7]),a=new qt({props:{id:"topbarInfo",style:"color:black",class:"btinfo material-icons","aria-label":"Informació",$$slots:{default:[yo]},$$scope:{ctx:e}}}),a.$on("click",e[8]),{c(){fe(t.$$.fragment),i=w(),fe(o.$$.fragment),s=w(),fe(a.$$.fragment)},m(e,n){ye(t,e,n),b(e,i,n),ye(o,e,n),b(e,s,n),ye(a,e,n),r=!0},p(e,t){const i={};2048&t&&(i.$$scope={dirty:t,ctx:e}),o.$set(i);const s={};2048&t&&(s.$$scope={dirty:t,ctx:e}),a.$set(s)},i(e){r||(ce(t.$$.fragment,e),ce(o.$$.fragment,e),ce(a.$$.fragment,e),r=!0)},o(e){ue(t.$$.fragment,e),ue(o.$$.fragment,e),ue(a.$$.fragment,e),r=!1},d(e){ge(t,e),e&&v(i),ge(o,e),e&&v(s),ge(a,e)}}}function _o(e){let t,i;return t=new co({props:{id:"titulo",style:"padding-left: 55px;",$$slots:{default:[go]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},p(e,i){const o={};2061&i&&(o.$$scope={dirty:i,ctx:e}),t.$set(o)},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}function bo(e){let t,i;return t=new ro({props:{$$slots:{default:[_o]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},p(e,i){const o={};2061&i&&(o.$$scope={dirty:i,ctx:e}),t.$set(o)},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}function vo(e){let t,i,o,s,a,r,n,l,c,u,h,m,d,f,y;function g(t){e[5].call(null,t)}let x={};function I(t){e[6].call(null,t)}void 0!==e[2]&&(x.show=e[2]),t=new ki({props:x}),Z.push(()=>de(t,"show",g));let q={};function F(t){e[9].call(null,t)}void 0!==e[3]&&(q.show=e[3]),s=new ji({props:q}),Z.push(()=>de(s,"show",I));let T={class:"topAppBar",variant:"short",dense:xo,prominent:Lo,$$slots:{default:[bo]},$$scope:{ctx:e}};return void 0!==e[1]&&(T.collapsed=e[1]),l=new ao({props:T}),Z.push(()=>de(l,"collapsed",F)),{c(){fe(t.$$.fragment),o=w(),fe(s.$$.fragment),r=w(),n=L("div"),fe(l.$$.fragment),u=w(),h=L("div"),E(n,"class","top-app-bar-container flexor")},m(i,a){ye(t,i,a),b(i,o,a),ye(s,i,a),b(i,r,a),b(i,n,a),ye(l,n,null),_(n,u),_(n,h),d=!0,f||(y=p(m=e[4].call(null,h)),f=!0)},p(e,[o]){const r={};!i&&4&o&&(i=!0,r.show=e[2],J(()=>i=!1)),t.$set(r);const n={};!a&&8&o&&(a=!0,n.show=e[3],J(()=>a=!1)),s.$set(n);const u={};2061&o&&(u.$$scope={dirty:o,ctx:e}),!c&&2&o&&(c=!0,u.collapsed=e[1],J(()=>c=!1)),l.$set(u)},i(e){d||(ce(t.$$.fragment,e),ce(s.$$.fragment,e),ce(l.$$.fragment,e),d=!0)},o(e){ue(t.$$.fragment,e),ue(s.$$.fragment,e),ue(l.$$.fragment,e),d=!1},d(e){ge(t,e),e&&v(o),ge(s,e),e&&v(r),e&&v(n),ge(l),f=!1,y()}}}_i({class:"mdc-top-app-bar__title",component:po,contexts:{}});let xo=!1,Lo=!1;function Io(e,t,i){let o=!1,s=mo,{show:a=!1}=t,r=!1,n=!1;return e.$$set=e=>{"show"in e&&i(0,a=e.show)},[a,o,r,n,s,function(e){r=e,i(2,r)},function(e){n=e,i(3,n)},()=>{i(3,n=!0),i(2,r=!1),i(0,a=!1)},()=>{i(2,r=!0),i(0,a=!1),modalinfo_show=!1},function(e){o=e,i(1,o)}]}class wo extends ve{constructor(e){super(),be(this,e,Io,vo,n,{show:0})}}function qo(t){let i,o,s,a,r;return{c(){i=L("div"),o=L("div"),s=L("input"),E(s,"type","range"),E(s,"min","0"),E(s,"max","100"),E(s,"step","0"),s.value="50",E(s,"class","svelte-1oyglgn"),E(o,"class","map-overlay-inner svelte-1oyglgn"),E(i,"class","map-overlay top svelte-1oyglgn")},m(e,n){b(e,i,n),_(i,o),_(o,s),a||(r=F(s,"change",t[0]),a=!0)},p:e,i:e,o:e,d(e){e&&v(i),a=!1,r()}}}function Fo(e,t,i){let{item:o}=t;V("overLayers");const s=V("changePaintProperty");return e.$$set=e=>{"item"in e&&i(1,o=e.item)},[function(e){s(o,event.target.value)},o]}class Eo extends ve{constructor(e){super(),be(this,e,Fo,qo,n,{item:1})}}var To={version:8,center:[1.537786,41.837539],zoom:12,bearing:0,pitch:0,sources:{infogeo:{type:"vector",tiles:["https://tilemaps.icgc.cat/tileserver/tileserver.php/infogeo_v8/{z}/{x}/{y}.pbf"],minzoom:5}},sprite:"https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/style/sprites/sprite",glyphs:"https://tilemaps.icgc.cat/tileserver/glyphs/{fontstack}/{range}.pbf",layers:[{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CACe",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#00855B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CACe1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",1],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#009D5B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CACe2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",2],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#64BC4A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CACeca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",3],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#AACDA9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIA",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",4],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#35B45A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAbca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",5],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D0D08C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",6],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7CC372"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAcm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",7],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#99D4C0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAcmc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",8],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#22B78E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAcml",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",9],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2E324"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAcmr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",10],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7BBC89"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",11],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A0AB9B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",12],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C2A494"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",13],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E9E084"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAmcb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",14],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D4E05E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAmcl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",15],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E8EDAE"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAmfl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",16],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B0DEDB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAmg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",17],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B7C29A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAml",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",18],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C6DD81"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",19],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#2E9441"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAp1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",20],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#34A448"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIAp2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",21],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#80A635"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIApAbx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",22],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A65074"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIApAm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",23],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C7DC6C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIApc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",24],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#76A639"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIApcab",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",25],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B8D098"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIApcam",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",26],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#94B79B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIApcamc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",27],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#94B693"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIApcm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",28],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#4CA84C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIApm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",29],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2E324"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIApmc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",30],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8BB94C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIBca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",31],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A8B045"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIBcab",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",32],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#4EA14B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIBeB",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",33],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#009C6B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIBeVcl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",34],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#5FBC6B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIBeb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",35],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#AFBB69"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIHB",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",36],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#00844D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CIVHca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",37],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A6CE3D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CId",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",38],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#3A9F4D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCM",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",39],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B2DDC9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCM_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",40],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B2DDC9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCM_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",41],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B2DDC9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCMcb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",42],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9CD2AE"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCMcm1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",43],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#82BCB7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCMgc1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",44],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8EC6B2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCMms",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",45],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#AFDFE4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCcb1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",46],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8FCEA5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCcb2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",47],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A7D7B7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCe",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",48],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9CCC68"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCeTcf",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",49],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#56BE95"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCeca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",50],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#89B986"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCecad",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",51],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8AC768"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCecm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",52],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C8DB54"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCem",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",53],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C3C59A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",54],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CAE7DC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCmc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",55],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#0CADA1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCms",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",56],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#75CEE1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCoS1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",57],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#00AD8F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCoS2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",58],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#71C6A8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCoS3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",59],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#66C29B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCoScc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",60],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#75C6A5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCoScm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",61],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#75C6A5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCoSm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",62],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8CCFB7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCom",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",63],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#66C29B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSComc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",64],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E6EFCB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCop1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",65],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#63BCBA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCop10",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",66],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CDD3B8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCop11",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",67],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9BCABB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCop2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",68],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#00ADB5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCop3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",69],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#55C6D8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCop3_m",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",70],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#55C6D8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCop4",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",71],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#14B276"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCop5",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",72],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DEE688"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCop6",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",73],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7FC25F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCop7",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",74],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C4DE92"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCop8",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",75],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#96CB71"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSCop9",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",76],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C0E1C0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMag",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",77],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E09BA2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMag_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",78],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E09BA2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMag_g",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",79],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E09BA2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",80],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#64C2A5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMc3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",81],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#97D4C9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",82],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B0C6D2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMcm2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",83],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BFE2CA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMcm3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",84],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#86D1D9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMcp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",85],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A6D8C0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMg4",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",86],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BDE3DC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMgc2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",87],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C0CFC0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMgt",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",88],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#80CBB7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",89],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F48688"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMlg_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",90],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F48688"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMlg_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",91],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F48688"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMlg_g",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",92],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F48688"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMllg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",93],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E1B9CC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMm2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",94],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BFE2CA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMm2_g",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",95],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BFE2CA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMm3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",96],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#97D4C9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMmc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",97],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B3DDC0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMmg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",98],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#45C1C7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMmlc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",99],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#68C295"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMq2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",100],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BFE2CA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMq3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",101],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7ECDD"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSMqc2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",102],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A2CBC1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSPPag",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",103],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F27E7F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSPPg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",104],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2756F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSPPlcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",105],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F5989E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSPPlcg_g",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",106],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F5989E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSS",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",107],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#91D1C0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSCcl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",108],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#86BA9E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSCd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",109],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9FD5B9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSCd_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",110],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9FD5B9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSCg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",111],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B8B997"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSCga",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",112],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A5D9C9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSClg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",113],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D8CEB4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSClgc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",114],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A9D6AE"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSCm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",115],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CCE6CA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",116],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BBD86D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSScc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",117],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C2CDA6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSgm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",118],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBE9AE"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSgm_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",119],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DAD6A6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",120],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DAD6A6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSmb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",121],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9FC19E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSmb_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",122],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9FC19E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSmb_g",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",123],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9FC19E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSmc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",124],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9EC2A6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSSmc_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",125],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9EC2A6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CST",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",126],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#00B09C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSTCo",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",127],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#5FC4B8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSTCobrf",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",128],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E8E1A0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSTCoce",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",129],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A6CEC3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSTColo",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",130],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DAC38E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSTComg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",131],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A9D6A5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSTComr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",132],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D9EACA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CSlc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",133],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#247A67"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CaMca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",134],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#25ACAE"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CaMcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",135],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A2A38A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CaMli",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",136],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#008BB3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CaMp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",137],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E8D782"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CaMpg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",138],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B9B07E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CaMpgca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",139],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#3DB5B1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CaMr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",140],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A4D9D1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CaP3rb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",141],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D0D88F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CaP3rlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",142],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A1B98B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/CaPelag",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",143],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E77B6D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ddgb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",144],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B293C4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ddh",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",145],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#784599"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/DeEEcam",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",146],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D5806A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/DeEEl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",147],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A57F6F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/DeEElca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",148],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C39B76"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Decap",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",149],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DF8A80"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Dgbto",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",150],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6469AF"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Dmghp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",151],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#713C95"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Dpmd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",152],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#934589"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Dpqd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",153],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A36993"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Dpqdh",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",154],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A36993"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Dpqmd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",155],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A35795"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Dqd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",156],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#713C95"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Dqdh",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",157],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#713C95"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gap",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",158],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F6E256"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gapg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",159],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F4DC81"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gapp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",160],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F6E256"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gbh",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",161],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#5881C1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",162],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EF522B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/GdDd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",163],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D966A6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gfe",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",164],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEECA0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggbi",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",165],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EE462C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",166],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EC187E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggd2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",167],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#ED3081"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggdb1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",168],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F27E9D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggdb2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",169],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F27E9D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggdbi",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",170],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F05E74"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggdbl2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",171],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F074A4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggdbm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",172],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E99FAF"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggdf",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",173],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EC187E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggdfk",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",174],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F387A1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggdh",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",175],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#ED3081"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggdh2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",176],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#ED3081"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggdi",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",177],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EF5D8F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggdmg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",178],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F27376"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggdto",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",179],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#AA7AAD"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",180],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F79427"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",181],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F15D52"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggmc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",182],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EE462C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",183],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F16861"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggr1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",184],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EE462C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggrf",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",185],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DA2A30"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggri",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",186],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EF5266"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ggsr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",187],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EE462C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Glg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",188],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED413"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Glg1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",189],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECB19"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Glga",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",190],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F48576"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Glgg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",191],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F79427"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Glgm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",192],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED413"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Glgmb1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",193],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBAF23"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Glm1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",194],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EBDE58"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Glmg2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",195],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F3D155"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gmd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",196],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7B65AB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gmgb1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",197],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F58D4B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gmgb2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",198],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F58D4B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gmgb2-3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",199],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F58D4B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gmgb3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",200],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F58D4B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gmgd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",201],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7B65AB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gmgfk",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",202],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F58D4B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gmgl2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",203],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F27363"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gmgl3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",204],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F27363"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gmgp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",205],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F58D4B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gmlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",206],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCB93A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gpe",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",207],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDA58"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gpg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",208],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2722A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gpgd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",209],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F6A6A7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gpgdf",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",210],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F6A6A7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gpgdh",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",211],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EE5195"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gpgg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",212],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C8CCDD"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gpgr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",213],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F48684"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gpgri",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",214],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F05E74"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gplf",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",215],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF7A3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gplm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",216],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0CB96"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gpmd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",217],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#934589"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gpmg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",218],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F69888"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gpqd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",219],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A36993"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gpr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",220],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2C11A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gpto",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",221],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DC7AA2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gqd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",222],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6B3D95"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gqdt",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",223],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#523692"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gqm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",224],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#814599"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gt",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",225],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D15B94"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gto2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",226],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D279A2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gto3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",227],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D279A2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gtoi",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",228],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D279A2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gtol",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",229],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D279A2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Gtom",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",230],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C72482"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Hbo",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",231],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#798B8B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JCKBeca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",232],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CEE5B7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JCcb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",233],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#81CAAE"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JI",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",234],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#10A1DB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JIH",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",235],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#3A99D4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JIHS",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",236],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#48ADE2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JIHgx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",237],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EDE2E4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JIPT",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",238],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#017EC3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JIS",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",239],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#00A3E5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JIT",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",240],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#017EC3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JIbd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",241],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#5F795C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JMA",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",242],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#5ECCF5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JMABjm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",243],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#1691C8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JMBm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",244],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#00A8E5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JMd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",245],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#5191CD"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JMd_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",246],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#5191CD"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JSKd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",247],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#0094B1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/JSc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",248],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#77BEE9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Lli",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",249],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#0069B4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NM1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",250],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF356"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NM2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",251],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF356"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMBca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",252],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9EC22"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMBcam",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",253],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EFAC32"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMBcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",254],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCBA51"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMBcgl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",255],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE077"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMBgx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",256],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF343"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMBl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",257],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE753"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMBlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",258],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCD1B0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMLc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",259],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2DD9D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMLca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",260],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECB28"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMLgl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",261],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F1D5A2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMLlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",262],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9BEB0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMLm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",263],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEECB3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSTca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",264],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E9CC31"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSTg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",265],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F4DB79"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSTgb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",266],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EFC17B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSTlc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",267],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E9E084"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSTlcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",268],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEDE53"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSTlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",269],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F6EF86"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSTm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",270],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0DFB8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSTmg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",271],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE081"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSTmgca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",272],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F3E6A0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSbr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",273],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECC45"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",274],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F6D82A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMScg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",275],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECC45"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",276],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEEA82"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSgb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",277],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECD73"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMSm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",278],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE4B8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMag",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",279],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE61A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",280],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F6EC36"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMbd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",281],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#4E7E99"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMbm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",282],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF100"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMbt",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",283],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED04A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMbvv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",284],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED775"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMcc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",285],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEDD0A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",286],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE3A6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMch",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",287],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE18A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMco",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",288],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEEB96"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMcr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",289],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E8D77A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMf",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",290],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEEAA3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",291],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF8AE"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMgba",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",292],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E8D77A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMgm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",293],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F3DC8B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMgo",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",294],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE993"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMgo_l",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",295],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE993"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMlc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",296],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEDD0A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMlh",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",297],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE18A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMlm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",298],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF100"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMlt",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",299],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED04A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",300],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF362"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMsa",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",301],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEDF6C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NMtd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",302],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7099AD"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPaa",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",303],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE370"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPac",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",304],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2F1A8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPaf",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",305],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF697"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPaf_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",306],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF697"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPap",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",307],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE88A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPar",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",308],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D2D01E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",309],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF8B7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPcf",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",310],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F5ED62"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",311],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F7EE71"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPcgl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",312],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F7EE71"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPclg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",313],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF585"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPga",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",314],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE370"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPgc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",315],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2F1A8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPgl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",316],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF356"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPgm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",317],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE993"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPgp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",318],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE88A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPgr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",319],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EFED86"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPgs",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",320],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F4DA6E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPgv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",321],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE478"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",322],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF585"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPlc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",323],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF8B7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",324],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF472"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPmf",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",325],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F5ED62"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPml",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",326],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF356"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPsa",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",327],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F5DD69"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPsao",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",328],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F5DD69"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPsf",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",329],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2F098"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPsf_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",330],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2F098"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPsm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",331],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE770"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPsr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",332],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F5ED62"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPss",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",333],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF472"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NPsv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",334],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE478"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/NQPPm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",335],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D3E3F4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Nbc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",336],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#447B99"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Nbn",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",337],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#00578F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Nim",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",338],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE88A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Nvcl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",339],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7A8FC8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Nvp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",340],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#817BB9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/OM",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",341],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE256"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Orcap",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",342],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CCD4C9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Orcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",343],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B98ABE"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ord",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",344],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ord_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",345],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ordv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",346],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Ordv_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",347],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Org",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",348],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Orgq",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",349],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Orlc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",350],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C1949B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Orln",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",351],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B3ACC4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Orpca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",352],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D8EBD3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Orpg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",353],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2C0BB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Orpn",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",354],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BF859F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Orpq",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",355],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2CAC8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Orq",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",356],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CAC3D0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Orrd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",357],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBB04F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Orva",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",358],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBPc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",359],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDD09E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBPcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",360],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCC696"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBPgx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",361],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DB90B8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",362],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCC179"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBbh",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",363],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EDAF8C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBbmp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",364],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E1A382"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBbp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",365],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FABD98"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",366],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CB968C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBc1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",367],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEC75C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBc1g",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",368],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDC35D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBc2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",369],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE8C0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBc2a",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",370],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDE6D3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBc2b",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",371],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E5C79F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBc2c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",372],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EECEC1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBc3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",373],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDBF5A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBca1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",374],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE293"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBcam",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",375],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E5C79F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBcc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",376],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CA5B56"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBcg2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",377],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0D6B4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBcgl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",378],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CEC99A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBcl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",379],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E3A02C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBcm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",380],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EFC182"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBcm2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",381],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2CC70"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBct",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",382],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CD9D75"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBgca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",383],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCD1B9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBgcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",384],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D8B390"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBglc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",385],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D9C49F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBgm1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",386],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDCF96"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBgm2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",387],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEDBB4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",388],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F1CA85"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBlg2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",389],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9B4A3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBlg_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",390],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F1CA85"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBlgc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",391],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9A97A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBlm1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",392],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDCF96"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBlm1a",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",393],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F5F2A4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBlm1b",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",394],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FABC8F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBlm2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",395],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEB273"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBlm2_t",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",396],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEB273"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBm0",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",397],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEEFCF"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBm1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",398],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECE7C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBm2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",399],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECE7C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBm3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",400],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CD9E82"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBp0",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",401],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EA9D85"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBp1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",402],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED28D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBp2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",403],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FAB583"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBp3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",404],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED28D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBv1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",405],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDBF54"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBv2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",406],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE098"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBv3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",407],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE1A9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEBv4",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",408],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDC881"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEILbmp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",409],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBC7A4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEILbr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",410],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D4B5C6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEILgb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",411],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9B394"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEILgls",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",412],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9B284"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEILgls_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",413],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9B284"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEILma",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",414],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E1CBD0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEILoa",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",415],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EABCCB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",416],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9AD86"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIbc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",417],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EDB98F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIbrca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",418],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D0BF7F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",419],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDC468"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIca_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",420],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDC468"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIcab",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",421],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCB945"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIcai",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",422],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CE8441"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIcam",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",423],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FAAB57"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIcas",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",424],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCB94A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIcc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",425],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEB41F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIccs",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",426],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F58332"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIce",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",427],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EDB98F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",428],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0CC9F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIco",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",429],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F58329"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIct",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",430],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9A140"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIdc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",431],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCB930"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIga",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",432],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBBA66"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIga_li",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",433],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBBA66"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIgac",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",434],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E0895E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIgac_l",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",435],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E0895E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIgc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",436],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F7976D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIgcm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",437],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F27248"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIgg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",438],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBBA66"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIglc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",439],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CC9F90"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIglt",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",440],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBB238"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIglt_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",441],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBB238"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIgm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",442],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9B284"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIgma",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",443],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCB945"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIgmc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",444],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F7976D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIla",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",445],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9AD86"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIla_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",446],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9AD86"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",447],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F8AA88"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIlg_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",448],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F8AA88"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIlg_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",449],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F8AA88"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIlg_g",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",450],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F8AA88"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIlg_gx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",451],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F8AA88"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIlgc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",452],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDC471"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIlgc_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",453],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDC471"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIlgc_c1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",454],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDC471"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIlgc_c2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",455],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDC471"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIlgc_c3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",456],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDC471"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIlgc_c4",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",457],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDC471"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIlgcc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",458],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F48F85"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIlgce",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",459],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C39265"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",460],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECE7C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIm_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",461],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECE7C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIma",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",462],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FABD9B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEImc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",463],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCB930"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEImcm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",464],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F37B29"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEImg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",465],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBBA66"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEImp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",466],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E8CC4B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEImss",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",467],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE993"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIs",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",468],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE6A2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEIv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",469],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9AD86"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELBbr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",470],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED49B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELBc1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",471],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#AE9E80"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELBc2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",472],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2AD94"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELBgl2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",473],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2C0B3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELBlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",474],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C0B6B3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELb1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",475],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FAAB57"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELb1_g",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",476],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FAAB57"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELb2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",477],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCBA53"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELb2_og",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",478],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCBA53"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELb3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",479],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED284"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELb3_m",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",480],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED284"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELb4",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",481],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEDAA2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELb5",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",482],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBD3C9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELb5_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",483],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBD3C9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELbc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",484],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED890"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELbrj",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",485],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E09B9B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELc1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",486],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F89D39"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELc2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",487],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F7B7C9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELc3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",488],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D6823B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELc4",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",489],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9B38C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcab",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",490],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDCF8E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcab1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",491],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDC47A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcab2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",492],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E5E3BC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcaj",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",493],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A6C0CB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",494],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED284"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcg1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",495],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E3AB6E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcg2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",496],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0C473"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcg2_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",497],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0C473"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcg3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",498],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D6B4AF"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcgb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",499],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED49B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcgc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",500],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E5B354"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcggm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",501],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D8C5B0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcgl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",502],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F79539"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcna",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",503],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0C480"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcp1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",504],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED49B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELcp2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",505],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F8A25D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",506],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECB19"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELgb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",507],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0607C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELgbe",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",508],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EE4347"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELgcb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",509],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBBA68"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELgcb_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",510],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBBA68"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELgci",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",511],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCCA94"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELgcs",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",512],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED28D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELgcs_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",513],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCBA53"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELgr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",514],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9A624"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELgs",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",515],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2722A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELgv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",516],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F17096"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELlc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",517],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECC52"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELma",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",518],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED394"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELmg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",519],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED284"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELmgl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",520],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DAC386"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELmgl_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",521],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DAC386"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELmgt",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",522],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E9D558"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELmj",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",523],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B5CBB8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELmv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",524],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCCA94"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELmv_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",525],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCCA94"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",526],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED77F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELp_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",527],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED77F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELtc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",528],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCCBA0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PELtc_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",529],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCCBA0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEOcgg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",530],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9B284"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEOlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",531],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F1CA7D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPO",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",532],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED429"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPag",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",533],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0CC9F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPbb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",534],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E66872"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPbbca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",535],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E66872"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPbr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",536],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0BF5E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",537],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0BF5E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPc2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",538],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D8B695"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPcbr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",539],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E3C9B0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",540],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0CC9F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPcgg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",541],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E98B6C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPcggx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",542],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D96DA4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPcl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",543],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D9B27A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPcm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",544],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEB887"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",545],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DCD483"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPga",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",546],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E3C9B0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPgac",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",547],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0BF5E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPgcl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",548],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E3C9B0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPgl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",549],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D2BE5A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPgll",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",550],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBAF2E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPgx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",551],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D96DA4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPgxb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",552],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EA9985"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPgxbl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",553],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F58E78"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPgxl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",554],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F6ADC3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",555],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DABA83"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPlca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",556],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DAC27F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",557],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E77B67"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPlg_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",558],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#ECA673"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPlgc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",559],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FABD98"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPlggx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",560],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F69781"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPlvg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",561],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2D380"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",562],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D2AC3B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEPmgx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",563],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEDF6C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PEbb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",564],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDBE1F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCas",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",565],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C8A02B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCbrc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",566],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED552"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCcbr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",567],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F3C721"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCcc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",568],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED552"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",569],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DCC158"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCcggx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",570],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEDD0A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCcgl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",571],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F3C721"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCcgt",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",572],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEA329"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCch",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",573],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2C960"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",574],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF7A3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCgc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",575],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED552"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCglr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",576],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED552"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCgxl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",577],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E8CD57"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POClc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",578],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2C960"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POClg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",579],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2C960"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POClga",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",580],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2C960"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POClgc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",581],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED552"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POClm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",582],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E7CE78"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POCmg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",583],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DCC158"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1brg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",584],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F4D02D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1cg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",585],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F4D02D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1cga",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",586],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DDB837"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1cgl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",587],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E3BFA4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1gl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",588],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CBE7D3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1gtl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",589],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0CB96"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1gx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",590],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8DA3D4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1l",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",591],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CFE4AE"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1lag",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",592],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F4D02D"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1lg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",593],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9CAD4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1lgc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",594],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2B6A0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1lgx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",595],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EB9357"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1lu",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",596],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EBB1AB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR1mlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",597],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CED2AF"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2agx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",598],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE081"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2agx_gx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",599],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE081"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2cg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",600],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B98ABE"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2cgg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",601],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E6B22A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2cggb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",602],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEE71A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2cgq",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",603],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2C855"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2cm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",604],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D0B683"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2gl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",605],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D2B350"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2glv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",606],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E7C456"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2glv_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",607],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E7C456"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2gm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",608],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2D391"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2gx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",609],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D4B5CD"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2gxl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",610],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEDF6C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2gxs",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",611],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEDF6C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2l",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",612],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E3B590"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR2mca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",613],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E5D099"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3alg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",614],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECB38"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",615],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DCDD97"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3ca1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",616],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#AB98A5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3ca3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",617],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B5BBB7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3cb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",618],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECB38"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3ccg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",619],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECB38"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3cgg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",620],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECB38"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3g",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",621],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9A744"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3gl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",622],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF343"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3glc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",623],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FECB38"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3glv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",624],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE5C2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3gtl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",625],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EB9D7F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3gx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",626],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D19BC6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3l",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",627],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0CA8E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3lgx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",628],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DFD5E9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POR3ll",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",629],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DA9E38"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PORgac",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",630],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E8C332"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/POc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",631],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2DEA6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PPDcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",632],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9FBCD8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PPEp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",633],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F79B54"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PPRgxb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",634],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F7A085"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PPTm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",635],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBBC8C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PPTmb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",636],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F58E78"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PPag",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",637],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F69781"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PPag_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",638],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F69781"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PPag_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",639],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F69781"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PPag_gx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",640],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F69781"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PPcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",641],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CBD6EC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PPdg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",642],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F69D86"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PPlgg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",643],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F9BEB7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PeClg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",644],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D69076"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/PeTg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",645],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E66878"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Prls",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",646],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#004B83"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/SDcl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",647],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C78E88"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/SDcr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",648],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B89585"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Sido",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",649],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#689BD2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Sili",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",650],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#5488C7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Sipca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",651],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8BABD9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Sipg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",652],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B0B4DA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Sipg_g",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",653],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B0B4DA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Sipn",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",654],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#926FB0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Siva",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",655],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#ACB697"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Smm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",656],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DCE8A4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Smqm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",657],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C3DFA5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/TLCcd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",658],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E8AACD"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/TMLcd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",659],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EAC6DE"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/TNCmdk",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",660],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C8C4D8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/TRc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",661],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C7A1CB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/TSCNmdk",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",662],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C8C4D8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/TSNgxk",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",663],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FAD5E5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/TSNlk",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",664],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C9A9C7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/TSRc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",665],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C7A1CB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",666],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D71B62"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tbb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",667],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D36579"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tcb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",668],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D36579"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tgb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",669],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D36579"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tk",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",670],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F288B7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tkd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",671],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DDA6CC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tkl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",672],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F390AC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tkl_gx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",673],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F390AC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tkld",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",674],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D189BA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tkld_gx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",675],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D189BA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tklg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",676],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D4B5C6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tklg_gx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",677],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D4B5C6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tlb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",678],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D6A290"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",679],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F6ACBC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tm1",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",680],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F7C1D9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tm2",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",681],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E896AB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tm2_gx",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",682],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E896AB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tm3",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",683],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F4A4C7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tmk",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",684],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E7A0C7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Tok",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",685],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#5F795C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ZOc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",686],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7D80BC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ZOcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",687],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B693B9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ZOcn",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",688],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#85ADDB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ZOcs",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",689],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8ECCD0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ZOdc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",690],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C7C4E2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ZOgg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",691],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B693B9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ZOgp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",692],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ZOgq",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",693],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C7C4E2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ZOpn",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",694],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#939ECF"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ZOsb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",695],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#1592CA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ZOtr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",696],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DEA6BB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ZOva",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",697],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BBAFD6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ZOvb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",698],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#659282"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Zcb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",699],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#918CC3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Zcb_d",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",700],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#918CC3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Zdc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",701],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B7AED6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/Zglc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",702],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B19BC9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ah",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",703],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E8E4C4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/cf",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",704],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#00A490"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/es",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",705],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C6BB6F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/ff",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",706],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A7988E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/fhm",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",707],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF100"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/fq",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",708],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF100"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_CaMca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",709],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#25ACAE"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_CaMcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",710],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A2A38A"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_CaMli",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",711],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#008BB3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_CaMp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",712],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E8D782"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_CaMpg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",713],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B9B07E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Cacgg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",714],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A1B290"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Decap",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",715],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DF8A80"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Gnlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",716],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FABEA8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_OrSlnc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",717],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9EA5B5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Orcg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",718],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B98ABE"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Ord",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",719],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Ord_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",720],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Ordv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",721],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Orgn",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",722],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FAD5E5"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Orlc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",723],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C1949B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Orln",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",724],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B3ACC4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Orpca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",725],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D8EBD3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Orpg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",726],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2C0BB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Orpn",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",727],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BF859F"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Ort",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",728],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A9B7AF"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Orva",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",729],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Orvi",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",730],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A9B7AF"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_SDCagp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",731],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B9B184"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_SDCagp_ca",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",732],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B9B184"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_SDcl",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",733],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C29386"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Sili",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",734],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#5488C7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Sipn",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",735],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#926FB0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Siva",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",736],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#ACB697"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_ZObv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",737],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E9B6CD"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_ZOc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",738],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7D80BC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_ZOcn",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",739],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#85ADDB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_ZOcs",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",740],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8ECCD0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_ZOdc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",741],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C7C4E2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_ZOgg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",742],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B693B9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_ZOgp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",743],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_ZOgq",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",744],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C7C4E2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_ZOpn",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",745],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#939ECF"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_ZOsb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",746],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#1592CA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_ZOva",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",747],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BBAFD6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Zcb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",748],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#918CC3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Zcb_d",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",749],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#918CC3"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mc_Zglc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",750],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B19BC9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mcg_Ordv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",751],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mcg_Orlc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",752],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C1949B"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mcg_Orln",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",753],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B3ACC4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mcg_Orva",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",754],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mcg_ZOgp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",755],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mcr_Gnlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",756],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F7BAD4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mcr_ZOc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",757],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7D80BC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mcr_ZOgq",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",758],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C7C4E2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mcrac_ZOgp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",759],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mcrb_Ordv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",760],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mcrs_ZOgp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",761],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/min",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",762],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A96AAB"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mr_Gnlg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",763],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F7BAD4"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mr_Orgq",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",764],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mr_ZOc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",765],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7D80BC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mr_ZOgq",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",766],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C7C4E2"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mr_ZOvb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",767],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#659282"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrac_Gnlp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",768],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F4A4C7"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrac_Ord",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",769],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrac_Ordv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",770],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrac_Orva",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",771],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrac_ZOcs",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",772],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8ECCD0"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrac_ZOgg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",773],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B693B9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrac_ZOgp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",774],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrac_ZOpn",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",775],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#939ECF"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrac_ZOqr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",776],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7F79B8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrac_ZOsb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",777],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#159DD8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrac_ZOvb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",778],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#659282"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrb_Ord",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",779],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrb_Ordv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",780],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrb_Ordv_c",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",781],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrb_Orva",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",782],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DECED6"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrb_ZOc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",783],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7D80BC"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrb_ZOgp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",784],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrb_ZOpn",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",785],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9A72B1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrb_ZOqr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",786],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7F79B8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrb_ZOsb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",787],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#1592CA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrb_ZOvb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",788],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#659282"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mre_Ggd",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",789],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EC187E"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mre_Ggdbi",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",790],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F05E74"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mre_Ggmc",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",791],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EE462C"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mre_Glg",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",792],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FED413"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mre_Gpgr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",793],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F48684"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mre_Gt",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",794],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D15B94"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mre_ZOgp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",795],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mre_mc_Ord",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",796],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E6DDE1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mre_mc_ZOgp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",797],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mre_mc_ZOpn",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",798],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#939ECF"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrmg_ZOgp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",799],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrs_Ordv",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",800],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C0A5B1"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrs_ZOgp",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",801],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DDD4E9"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrs_ZOqr",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",802],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#7F79B8"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrs_ZOsb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",803],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#1592CA"}},{id:"Basament prequaternari/Unitats geològiques del basament/FILL/mrs_ZOvb",type:"fill",source:"infogeo","source-layer":"FILL",filter:["==","_symbol",804],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#659282"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/150",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/150"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/1601/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",1],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/1601/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/1601/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",1],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/1601/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/1602/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",2],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/1602/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/1602/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",2],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/1602/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/200",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",3],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/200"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/225/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",4],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/225/1","fill-translate":[10.6667,-10.6667]}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/225/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",4],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/225/0","fill-translate":[10.6667,-10.6667]}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/226/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",5],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/226/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/226/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",5],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/226/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/250/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",6],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/250/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/250/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",6],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/250/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/251/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",7],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/251/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/251/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",7],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/251/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/300",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",8],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/300"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/301",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",9],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/301"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/302",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",10],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/302"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/303",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",11],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/303"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/306",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",12],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/306"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/309",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",13],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/309"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/310",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",14],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/310"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/311",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",15],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/311"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/312",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",16],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/312"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/313",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",17],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/313"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/401",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",18],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/401"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/402",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",19],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/402"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/403/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",20],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/403/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/403/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",20],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/403/0","fill-translate":[10.6667,-10.6667]}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/404",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",21],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/404"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/406",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",22],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/406"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/407",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",23],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/407"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/408",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",24],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/408"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/409/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",25],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/409/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/409/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",25],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/409/0","fill-translate":[10.6667,-10.6667]}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/450",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",26],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/450"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/500",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",27],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/500"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/502",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",28],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/502"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/505",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",29],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/505"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/600/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",30],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/600/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/600/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",30],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/600/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/601/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",31],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/601/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/601/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",31],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/601/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/602/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",32],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/602/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/602/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",32],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/602/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/603",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",33],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/603"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/604/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",34],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/604/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/604/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",34],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/604/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/605",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",35],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/605"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/606",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",36],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/606"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/608/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",37],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/608/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/608/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",37],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/608/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/609/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",38],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/609/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/609/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",38],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/609/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/610/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",39],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/610/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/610/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",39],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/610/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/612/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",40],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/612/1","fill-translate":[32,-32]}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/612/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",40],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/612/0","fill-translate":[32,-32]}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/614/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",41],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/614/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/614/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",41],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/614/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/650/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",42],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/650/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/650/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",42],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/650/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/803",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",43],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/803"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/930",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",44],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/930"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/951/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",45],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/951/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/951/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",45],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/951/0","fill-translate":[10.6667,-10.6667]}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/960",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",46],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/960"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/974/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",47],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/974/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/974/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",47],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/974/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/976",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",48],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/976"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/304",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",49],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/304"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/305",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",50],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/305"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/501",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",51],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/501"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/503",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",52],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/503"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/504",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",53],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/504"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/901",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",54],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/901"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/950",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",55],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/950"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/956/1",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",56],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/956/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT1/956/0",type:"fill",source:"infogeo","source-layer":"PATT1",filter:["==","_symbol",56],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT1/956/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT2/1700/1",type:"fill",source:"infogeo","source-layer":"PATT2",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT2/1700/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT2/1700/0",type:"fill",source:"infogeo","source-layer":"PATT2",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT2/1700/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT2/705",type:"fill",source:"infogeo","source-layer":"PATT2",filter:["==","_symbol",1],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT2/705"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT3/1701",type:"fill",source:"infogeo","source-layer":"PATT3",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT3/1701"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT3/1702/1",type:"fill",source:"infogeo","source-layer":"PATT3",filter:["==","_symbol",1],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT3/1702/1"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT3/1702/0",type:"fill",source:"infogeo","source-layer":"PATT3",filter:["==","_symbol",1],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT3/1702/0"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT3/1703",type:"fill",source:"infogeo","source-layer":"PATT3",filter:["==","_symbol",2],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT3/1703"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT3/1706",type:"fill",source:"infogeo","source-layer":"PATT3",filter:["==","_symbol",3],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT3/1706"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT3/704",type:"fill",source:"infogeo","source-layer":"PATT3",filter:["==","_symbol",4],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Basament prequaternari/Unitats geològiques del basament/PATT3/704"}},{id:"Basament prequaternari/Unitats geològiques del basament/PATT4",type:"fill",source:"infogeo","source-layer":"PATT4",minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#009150"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4101",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",0],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4102",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",1],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4105/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",2],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4105/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",2],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4105/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4106/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",3],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4106/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",3],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4106/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4108/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",4],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#ED262D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4108/0",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",4],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#797B7D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4201/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",5],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4201/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",5],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4201/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4202/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",6],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4202/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",6],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4202/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4204/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",7],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#ED262D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4204/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",7],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#797B7D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4204/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",7],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4204/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#797B7D"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4301/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",8],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4301/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",8],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4301/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4302/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",9],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4302/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",9],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4302/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4304/3",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",10],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#ED262D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4304/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",10],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#797B7D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4304/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",10],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4304/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#797B7D"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4401/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",11],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4401/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",11],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4401/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4402/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",12],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4402/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",12],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4402/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4404/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",13],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#ED262D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4404/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",13],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#797B7D","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4404/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",13],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4404/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#797B7D"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4501/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",14],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4501/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",14],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4501/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4502/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",15],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4502/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",15],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4502/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4504/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",16],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4504/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",16],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4504/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4505/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",17],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4505/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",17],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4505/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4601/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",18],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4601/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",18],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4601/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4601/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",18],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4601/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4602/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",19],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4602/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",19],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4602/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4602/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",19],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4602/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4604/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",20],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4604/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",20],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4604/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4604/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",20],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4604/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4605/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",21],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4605/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",21],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4605/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4605/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",21],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4605/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4607/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",22],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4607/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",22],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4607/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4607/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",22],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4607/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4608/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",23],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[25.47,11.32],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4608/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",23],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4608/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4608/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",23],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4608/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4617/2",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",24],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[2.83,0],"line-width":1.33333}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4617/1",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",24],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4617/1","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4617/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",24],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4617/0","symbol-spacing":98.1067,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/4701",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",25],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#009150","line-width":1.06667}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5403",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",26],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5403","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5501/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",27],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5501/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",27],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5501/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5502/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",28],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#5C5D5E","line-dasharray":[31.8375,14.15],"line-width":1.06667}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5502/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",28],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5502/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5504/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",29],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5504/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",29],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5504/0","symbol-spacing":49.0533,"icon-offset":[0,1.33333],"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5505/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",30],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[31.8375,14.15],"line-width":1.06667}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5505/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",30],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5505/0","symbol-spacing":49.0533,"icon-offset":[0,1.33333],"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5507/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",31],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5507/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",31],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5507/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5508/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",32],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[31.8375,14.15],"line-width":1.06667}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5508/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",32],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5508/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5510/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",33],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5510/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",33],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5510/0","symbol-spacing":49.0533,"icon-offset":[0,1.33333],"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5511/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",34],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[31.8375,14.15],"line-width":1.06667}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5511/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",34],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5511/0","symbol-spacing":49.0533,"icon-offset":[0,1.33333],"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5513",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",35],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-width":1.32283}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5515/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",36],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5515/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",36],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5515/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5516/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",37],minzoom:10.95,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[31.8375,14.15],"line-width":1.06667}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5516/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",37],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5516/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5518/1",type:"line",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",38],minzoom:10.95,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5518/0",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101",filter:["==","_symbol",38],minzoom:10.95,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101/5518/0","symbol-spacing":49.0533,"icon-offset":[0,10.6667],"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101_5513",type:"symbol",source:"infogeo","source-layer":"gt125mv10sh0ffl1r010_202101_5513",minzoom:12.53,layout:{visibility:"visible","icon-image":"Basament prequaternari/Falles i plecs/gt125mv10sh0ffl1r010_202101_5513","icon-rotate":{property:"NorthAzimu",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0},paint:{}},{id:"Basament prequaternari/Contactes del basament/3101",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3102",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",1],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[2.79986,2.79986],"line-width":.94488}},{id:"Basament prequaternari/Contactes del basament/3103",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",2],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3104",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",3],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3105",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",4],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3106",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",5],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3110",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",6],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#797B7D","line-width":1.13386}},{id:"Basament prequaternari/Contactes del basament/3201",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",7],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#0357A0","line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3202",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",8],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#0357A0","line-dasharray":[13.97,6.98501],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3203",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",9],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#0357A0","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3204",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",10],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#0357A0","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3206",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",11],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#0357A0","line-dasharray":[3.49251,3.49251],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3301",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",12],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#009F81","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3303",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",13],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#DF252B","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3310",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",14],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#009F81","line-dasharray":[6.98501,1.74625],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3401",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",15],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[3.49251,3.49251],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3402",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",16],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#772274","line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3403",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",17],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#772274","line-dasharray":[3.49251,3.49251],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3404",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",18],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#772274","line-dasharray":[6.98501,6.98501],"line-width":.755904}},{id:"Basament prequaternari/Contactes del basament/3602",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",19],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.06667}},{id:"Basament prequaternari/Contactes del basament/3603",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",20],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[31.8375,14.15],"line-width":1.06667}},{id:"Basament prequaternari/Contactes del basament/4801/1",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",21],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":1.33333}},{id:"Basament prequaternari/Contactes del basament/4801/0",type:"symbol",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",21],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Contactes del basament/4801/0","symbol-spacing":49.0533,"icon-offset":[0,-.333333],"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#2C292A"}},{id:"Basament prequaternari/Contactes del basament/4805/1",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",22],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":.666667}},{id:"Basament prequaternari/Contactes del basament/4805/0",type:"symbol",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",22],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Basament prequaternari/Contactes del basament/4805/0","symbol-spacing":49.0533,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Basament prequaternari/Contactes del basament/5101",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",23],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[113.2,14.15],"line-width":.266667}},{id:"Basament prequaternari/Contactes del basament/5106",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",24],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[59.4,9.9],"line-width":.266667}},{id:"Basament prequaternari/Contactes del basament/5450",type:"line",source:"infogeo","source-layer":"Contactes del basament",filter:["==","_symbol",25],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#6FCFF5","line-width":.266667}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHac",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBD0CB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHac1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",1],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E3D7D2"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHap",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",2],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF697"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHc",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",3],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHca",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",4],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BDD9DE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHcd",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",5],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHcd0",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",6],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BCD1E2"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHcd1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",7],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BCC0D7"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHcl0'-1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",8],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E0D2CE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHcl1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",9],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D6D8D2"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHcld",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",10],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0EAD7"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHcs",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",11],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHd",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",12],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHde",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",13],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2D3CE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHdes",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",14],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2D3CE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHdh",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",15],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E6C8A6"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHdla",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",16],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE2B7"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHdlh",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",17],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEEDD2"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHdmh",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",18],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0DAC1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHea",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",19],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EFEFF0"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHec",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",20],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E4DCC1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHeg",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",21],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D5D7D8"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHes",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",22],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D6CFCD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHes1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",23],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEEFD8"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHfv",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",24],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EFEBE0"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHfv1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",25],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E3DCD2"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHg",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",26],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D5CAC3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHg1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",27],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C2C4C6"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHle",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",28],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2D3CE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHles",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",29],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2D3CE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHllf",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",30],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE3CD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHlr",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",31],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EFEBE0"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHm",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",32],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E0D2CE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHmd",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",33],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E0D2CE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHp",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",34],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#ECE4E1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHpa",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",35],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEFBDF"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHpa1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",36],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEEEC6"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHpd",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",37],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B5D5E5"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHpd0'",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",38],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE29D"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHpd0'-1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",39],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE3AF"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHpdo",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",40],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B5D5E5"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHpe",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",41],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C9E3EF"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHpef",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",42],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B5D5E5"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHpg",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",43],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF9C1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHps",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",44],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF9C1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHt",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",45],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE1C9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHt0",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",46],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEFCE8"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHt0'",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",47],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEFBD5"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHt1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",48],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2F3C1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHtg",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",49],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE8C7"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHtls",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",50],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EED7CE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHtr",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",51],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E1F3FC"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHtr1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",52],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CCDDE6"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHts",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",53],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D5DDE4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHtsr",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",54],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2D3CE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHv0'",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",55],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDE7DC"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHv1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",56],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F2F3C1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHac",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",57],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBC9C1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHacb",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",58],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHc",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",59],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHcd",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",60],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHcs",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",61],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHdo",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",62],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FCE5E2"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHdt",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",63],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FBD3D2"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHe",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",64],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CBDEF2"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHea",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",65],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E4DFCC"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHeg",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",66],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BEC8CD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHes",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",67],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D6CFCD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHfv",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",68],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E3E6E0"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHg",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",69],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D5CAC3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHgd",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",70],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B4B6B8"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHlb",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",71],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BDDEEF"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHlb-bn",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",72],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BDDEEF"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHlb-o",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",73],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BDDEEF"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHlld",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",74],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#ECE4E1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHls",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",75],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF8B7"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHt",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",76],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE1C9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHta",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",77],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C1CADB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHtc",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",78],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FDDBBD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHtcm",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",79],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B5D6F1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHtg",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",80],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE8C7"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHtl",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",81],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B5D6F1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHtls",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",82],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EED7CE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHts",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",83],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D5DDE4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHtv",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",84],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#98CAED"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHtvc",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",85],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#96C4DA"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHtvs",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",86],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D2E3E1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPHval",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",87],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0E0CA"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPac2",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",88],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BDBDB3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPac3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",89],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D6D9DA"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPac4",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",90],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B4B3BA"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPac5",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",91],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BBAEB6"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-bb",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",92],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-cr",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",93],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-f",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",94],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-f1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",95],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-f1+t1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",96],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-gr",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",97],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-lt",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",98],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-o",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",99],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-pa",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",100],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-pm",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",101],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-po",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",102],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-rn",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",103],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-s",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",104],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-sp",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",105],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-su",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",106],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPacb-t1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",107],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7D6C4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbc",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",108],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbc-bb",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",109],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbc-cd",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",110],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbc-lt",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",111],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbc-m",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",112],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbc-pb",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",113],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbc-r",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",114],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbc-rd",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",115],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbc-sp",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",116],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbn",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",117],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#156080"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",118],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-bb",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",119],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-bi",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",120],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-bo",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",121],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-co",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",122],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-cr",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",123],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-cs",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",124],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-f1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",125],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-f2",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",126],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-ga",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",127],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-gr",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",128],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-ma",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",129],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-mf",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",130],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-mo",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",131],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-ms",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",132],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-o",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",133],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-p",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",134],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-pa",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",135],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-ra",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",136],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-s",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",137],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-t1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",138],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsc-t2",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",139],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#39889A"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbsn",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",140],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#778C9F"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtc",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",141],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtc-cf",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",142],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtc-es",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",143],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtc-f",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",144],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtc-pb",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",145],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtc-pj",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",146],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtc-pm",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",147],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtc-po",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",148],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtc-ri",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",149],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtc-rn",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",150],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtc-sm",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",151],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtc-sp1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",152],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtc-sp2",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",153],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6E7DA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPbtn",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",154],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#415281"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPc",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",155],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPc2",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",156],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DCC8B2"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPcd",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",157],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPcd2",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",158],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EDECF5"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPcdb",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",159],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C8D0C9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPcdb-t1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",160],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C8D0C9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPcli",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",161],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B5D3EF"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPclo",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",162],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#AAD6EC"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPclu",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",163],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C0DEED"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPes2",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",164],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E3DCD2"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPes3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",165],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CACCCD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPfg",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",166],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D5C7D0"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPfv",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",167],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E1D4D6"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPfv2",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",168],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E5F0D4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPfv3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",169],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D5D9E3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPfv4",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",170],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E1D5DE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPg",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",171],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEE1DB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPg10",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",172],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#AC9E94"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPg11",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",173],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A29591"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPg2",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",174],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EFF6E7"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPg3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",175],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2E6E9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPg4",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",176],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2DDDB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPg5",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",177],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D6CFCD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPg6",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",178],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CBC3C0"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPg7",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",179],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C1B6AB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPg8",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",180],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#ABAFA3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPg9",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",181],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B7AA98"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPlb",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",182],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D5E3E9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPlb3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",183],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C8D5E3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPllf",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",184],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE3CD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPllf3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",185],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CEE5B7"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPllp",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",186],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C6D6EE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPls",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",187],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEF8B7"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPpa3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",188],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEFACB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPt",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",189],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE1C9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPt2",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",190],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EFF6E7"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPt3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",191],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2E6E9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPt4",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",192],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2DDDB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPt5",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",193],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D6CFCD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPt6",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",194],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CBC3C0"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPt7",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",195],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C1B6AB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPt9",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",196],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B7AA98"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPta",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",197],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C1CADB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtam",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",198],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CBDEF2"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtas",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",199],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#AEDFEB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtb",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",200],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtb-f",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",201],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtb-f1+t1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",202],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtb-gr",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",203],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtb-lt",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",204],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtb-pa",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",205],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtb-s",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",206],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtb-sp",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",207],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtb-t1",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",208],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EEE7AD"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPte",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",209],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#FEE5CA"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtf3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",210],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BFD0C8"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtl",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",211],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B5D6F1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtl3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",212],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B5CEEB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtle",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",213],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CBDEF2"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtlm",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",214],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A0DCF8"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtlp",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",215],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B1C8E1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtls",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",216],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EED7CE"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtr",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",217],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BCCDD6"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtr2",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",218],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#BACAD3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtr3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",219],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B5CEEB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtr4",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",220],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B4BBBF"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtv3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",221],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B9E5F9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtvb",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",222],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D5DED9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtve",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",223],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8ED8F7"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtvp",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",224],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B5D5E5"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPtvs",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",225],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D2E3E1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPv",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",226],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#3998B9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPv10",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",227],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#AC9E94"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPv2",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",228],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EFF6E7"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPv2-3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",229],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EFD7C5"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPv3",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",230],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2E6E9"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPv4",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",231],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2DDDB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPv5",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",232],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D8CEB4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPv6",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",233],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#CBC3C0"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPv7",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",234],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#C1B6AB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPv8",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",235],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A9B0B3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPv9",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",236],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B7AA98"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPva",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",237],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EECFAB"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPval",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",238],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F0E0CA"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvb",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",239],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9C5EA5"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvbc",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",240],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6756A3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvbc-a",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",241],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6756A3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvbc-ct",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",242],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#6756A3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvbl",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",243],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#9C5EA5"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvc",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",244],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A092C6"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvcl",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",245],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A092C6"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvg",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",246],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E3C9B8"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvgl",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",247],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#A092C6"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvi",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",248],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E5C9B5"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvm",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",249],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8073B4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvmg",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",250],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#95BEC1"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvml",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",251],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8073B4"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvp",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",252],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EDB498"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvsm",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",253],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#EDB998"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QPvt",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",254],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7B9AA"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/Qcc4",type:"fill",source:"infogeo","source-layer":"FILLq",filter:["==","_symbol",255],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#D7BDB3"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/100",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/100"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/101",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",1],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/101"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/102",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",2],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/102"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/103",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",3],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/103"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/150",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",4],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/150"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/151",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",5],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/151"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/152",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",6],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/152"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/153",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",7],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/153"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/154",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",8],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/154"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/308",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",9],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/308"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/321",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",10],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/321"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/401",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",11],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/401"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/403",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",12],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/403"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/407",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",13],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/407"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/501",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",14],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/501"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/502",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",15],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/502"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/503",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",16],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/503"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/504",type:"fill",source:"infogeo","source-layer":"PATT1q",filter:["==","_symbol",17],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-pattern":"Dipòsits quaternaris/Unitats geològiques del quaternari/PATT1q/504"}},{id:"Dipòsits quaternaris/Contactes del quaternari/3101",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":.755904}},{id:"Dipòsits quaternaris/Contactes del quaternari/3102",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",1],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[2.79986,2.79986],"line-width":.94488}},{id:"Dipòsits quaternaris/Contactes del quaternari/3103",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",2],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Dipòsits quaternaris/Contactes del quaternari/3104",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",3],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[1.74625,1.74625],"line-width":.755904}},{id:"Dipòsits quaternaris/Contactes del quaternari/3105",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",4],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Dipòsits quaternaris/Contactes del quaternari/3106",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",5],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Dipòsits quaternaris/Contactes del quaternari/3107/1",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",6],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[16.764,2.79401],"line-width":.94488}},{id:"Dipòsits quaternaris/Contactes del quaternari/3107/0",type:"symbol",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",6],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Dipòsits quaternaris/Contactes del quaternari/3107/0","symbol-spacing":23.76,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Dipòsits quaternaris/Contactes del quaternari/3108/1",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",7],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Dipòsits quaternaris/Contactes del quaternari/3108/0",type:"symbol",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",7],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Dipòsits quaternaris/Contactes del quaternari/3108/0","symbol-spacing":23.76,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#2C292A"}},{id:"Dipòsits quaternaris/Contactes del quaternari/3110",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",8],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#797B7D","line-width":1.13386}},{id:"Dipòsits quaternaris/Contactes del quaternari/3204",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",9],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#0357A0","line-dasharray":[20.955,3.49251],"line-width":.755904}},{id:"Dipòsits quaternaris/Contactes del quaternari/5110",type:"line",source:"infogeo","source-layer":"Contactes del quaternari",filter:["==","_symbol",10],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[113.2,14.15],"line-width":.266667}},{id:"Dipòsits quaternaris/Elements geomorfològics/5104/1",type:"line",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-width":.666667}},{id:"Dipòsits quaternaris/Elements geomorfològics/5104/0",type:"symbol",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Dipòsits quaternaris/Elements geomorfològics/5104/0","symbol-spacing":15.84,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Dipòsits quaternaris/Elements geomorfològics/5105/1",type:"line",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",1],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#797B7D","line-width":.666667}},{id:"Dipòsits quaternaris/Elements geomorfològics/5105/0",type:"symbol",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",1],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Dipòsits quaternaris/Elements geomorfològics/5105/0","symbol-spacing":11.3333,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#797B7D"}},{id:"Dipòsits quaternaris/Elements geomorfològics/5109/1",type:"line",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",2],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#2C292A","line-dasharray":[14,4],"line-width":.666667}},{id:"Dipòsits quaternaris/Elements geomorfològics/5109/0",type:"symbol",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",2],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Dipòsits quaternaris/Elements geomorfològics/5109/0","symbol-spacing":12,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Dipòsits quaternaris/Elements geomorfològics/5111/1",type:"symbol",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",3],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Dipòsits quaternaris/Elements geomorfològics/5111/1","symbol-spacing":23.76,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Dipòsits quaternaris/Elements geomorfològics/5111/0",type:"line",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",3],minzoom:11.53,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#2C292A","line-width":.94488}},{id:"Dipòsits quaternaris/Elements geomorfològics/5112/1",type:"line",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",4],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-dasharray":[16.764,2.79401],"line-width":.94488}},{id:"Dipòsits quaternaris/Elements geomorfològics/5112/0",type:"symbol",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",4],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Dipòsits quaternaris/Elements geomorfològics/5112/0","symbol-spacing":23.76,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#000000"}},{id:"Dipòsits quaternaris/Elements geomorfològics/5301/1",type:"line",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",5],minzoom:11.53,layout:{visibility:"visible"},paint:{"line-color":"#797B7D","line-dasharray":[15.84,7.92],"line-width":.666667}},{id:"Dipòsits quaternaris/Elements geomorfològics/5301/0",type:"symbol",source:"infogeo","source-layer":"Elements geomorfològics",filter:["==","_symbol",5],minzoom:11.53,layout:{visibility:"visible","symbol-placement":"line","icon-image":"Dipòsits quaternaris/Elements geomorfològics/5301/0","symbol-spacing":15.84,"icon-rotation-alignment":"map","icon-allow-overlap":!0},paint:{"icon-color":"#797B7D"}},{id:"Registre geològic/Columnes estratigràfiques/Paleozoic/Paleozoic LINK/Paleozoic",type:"fill",source:"infogeo","source-layer":"Paleozoic LINK",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B0C5A9","fill-opacity":.6}},{id:"Registre geològic/Columnes estratigràfiques/Paleozoic/Paleozoic NO LINK/Paleozoic",type:"fill",source:"infogeo","source-layer":"Paleozoic NO LINK",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#B0C5A9","fill-opacity":.6}},{id:"Registre geològic/Columnes estratigràfiques/Mesozoic/Mesozoic LINK/Mesozoic",type:"fill",source:"infogeo","source-layer":"Mesozoic LINK",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8EC4E6","fill-opacity":.6}},{id:"Registre geològic/Columnes estratigràfiques/Mesozoic/Mesozoic NO LINK/Mesozoic",type:"fill",source:"infogeo","source-layer":"Mesozoic NO LINK",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#8EC4E6","fill-opacity":.6}},{id:"Registre geològic/Columnes estratigràfiques/Paleogen/Paleogen LINK/Cenozoic, Paleogen",type:"fill",source:"infogeo","source-layer":"Paleogen LINK",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2AE74","fill-opacity":.6}},{id:"Registre geològic/Columnes estratigràfiques/Paleogen/Paleogen NO LINK/Cenozoic, Paleogen",type:"fill",source:"infogeo","source-layer":"Paleogen NO LINK",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E2AE74","fill-opacity":.6}},{id:"Registre geològic/Columnes estratigràfiques/Neogen/Neogen LINK/Cenozoic, Neogen",type:"fill",source:"infogeo","source-layer":"Neogen LINK",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F8E243","fill-opacity":.6}},{id:"Registre geològic/Columnes estratigràfiques/Neogen/Neogen NO LINK/Cenozoic, Neogen",type:"fill",source:"infogeo","source-layer":"Neogen NO LINK",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#F8E243","fill-opacity":.6}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/63-23, 64-23",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#E6E7E8","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/64-20",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",1],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/64-21",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",2],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/64-22",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",3],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/65-22",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",4],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/65-26",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",5],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/65-27",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",6],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/66-22",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",7],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/68-24",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",8],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/68-34, 68-35",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",9],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/69-29",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",10],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/69-32",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",11],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/69-34",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",12],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/70-29",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",13],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/70-32",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",14],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/70-33, 70-34",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",15],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/71-22",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",16],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/71-23",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",17],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/71-28",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",18],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/71-32",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",19],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/71-33, 71-34",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",20],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/72-22",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",21],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/72-23",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",22],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/72-25",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",23],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/72-27",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",24],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/72-29",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",25],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/73-22",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",26],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/73-23",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",27],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/73-24",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",28],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/73-28",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",29],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/74-22",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",30],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/74-23",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",31],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/74-24",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",32],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/74-25",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",33],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/74-26",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",34],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/74-29",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",35],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/74-30, 74-31",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",36],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/75-25",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",37],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/75-28",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",38],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/75-29, 75-30",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",39],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/76-28",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",40],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/76-29",type:"fill",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",filter:["==","_symbol",41],minzoom:2.78,layout:{visibility:"visible"},paint:{"fill-color":"#DBDDDE","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Terrenys antropitzats/Terrenys modificats/3",type:"fill",source:"infogeo","source-layer":"Terrenys modificats",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-color":"#FFFFFF","fill-opacity":.5}},{id:"Terrenys antropitzats/Terrenys modificats/2",type:"fill",source:"infogeo","source-layer":"Terrenys modificats",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-pattern":"Terrenys antropitzats/Terrenys modificats/2","fill-opacity":.5}},{id:"Terrenys antropitzats/Terrenys modificats/1",type:"fill",source:"infogeo","source-layer":"Terrenys modificats",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-pattern":"Terrenys antropitzats/Terrenys modificats/1","fill-opacity":.5}},{id:"Terrenys antropitzats/Terrenys modificats/0",type:"line",source:"infogeo","source-layer":"Terrenys modificats",minzoom:8.21,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#000000","line-width":.76,"line-opacity":.5}},{id:"Terrenys antropitzats/Terrenys rebaixats/3",type:"fill",source:"infogeo","source-layer":"Terrenys rebaixats",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-color":"#FFFFFF","fill-opacity":.5}},{id:"Terrenys antropitzats/Terrenys rebaixats/2",type:"fill",source:"infogeo","source-layer":"Terrenys rebaixats",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-pattern":"Terrenys antropitzats/Terrenys rebaixats/2","fill-opacity":.5}},{id:"Terrenys antropitzats/Terrenys rebaixats/1",type:"fill",source:"infogeo","source-layer":"Terrenys rebaixats",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-pattern":"Terrenys antropitzats/Terrenys rebaixats/1","fill-opacity":.5}},{id:"Terrenys antropitzats/Terrenys rebaixats/0",type:"line",source:"infogeo","source-layer":"Terrenys rebaixats",minzoom:8.21,layout:{visibility:"visible","line-cap":"round","line-join":"round"},paint:{"line-color":"#000000","line-width":.76,"line-opacity":.5}},{id:"Terrenys antropitzats/Terrenys terraplenats",type:"fill",source:"infogeo","source-layer":"Terrenys terraplenats",minzoom:8.21,layout:{visibility:"visible"},paint:{"fill-color":"#FAD5E5","fill-opacity":.5,"fill-outline-color":"#000000"}},{id:"Talls geològics/Traces de talls geològics/5704",type:"line",source:"infogeo","source-layer":"Traces de talls geològics",filter:["==","_symbol",0],minzoom:2.78,layout:{visibility:"visible"},paint:{"line-color":"#000000","line-width":1.33333}},{id:"Mesures d'estructures/Estratificació/Cabussament de l'estratificació",type:"symbol",source:"infogeo","source-layer":"Estratificació",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Estratificació/Cabussament de l'estratificació","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["FiraSans-Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":{property:"_symbol",type:"categorical",default:[0,.3],stops:[[0,[1.77825,-.313271]],[1,[1.24,-1.03554]],[2,[1.41015,-.278583]],[3,[1.77825,-.623396]],[4,[1.75415,-.556542]]]},"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Mesures d'estructures/Estratificació/Estratificació horitzontal",type:"symbol",source:"infogeo","source-layer":"Estratificació",filter:["==","_symbol",1],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Estratificació/Estratificació horitzontal","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["FiraSans-Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":{property:"_symbol",type:"categorical",default:[0,.3],stops:[[0,[1.77825,-.313271]],[1,[1.24,-1.03554]],[2,[1.41015,-.278583]],[3,[1.77825,-.623396]],[4,[1.75415,-.556542]]]},"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Mesures d'estructures/Estratificació/Estratificació vertical",type:"symbol",source:"infogeo","source-layer":"Estratificació",filter:["==","_symbol",2],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Estratificació/Estratificació vertical","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["FiraSans-Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":{property:"_symbol",type:"categorical",default:[0,.3],stops:[[0,[1.77825,-.313271]],[1,[1.24,-1.03554]],[2,[1.41015,-.278583]],[3,[1.77825,-.623396]],[4,[1.75415,-.556542]]]},"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Mesures d'estructures/Estratificació/Cabussament de l'estratificació invertit",type:"symbol",source:"infogeo","source-layer":"Estratificació",filter:["==","_symbol",3],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Estratificació/Cabussament de l'estratificació invertit","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["FiraSans-Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":{property:"_symbol",type:"categorical",default:[0,.3],stops:[[0,[1.77825,-.313271]],[1,[1.24,-1.03554]],[2,[1.41015,-.278583]],[3,[1.77825,-.623396]],[4,[1.75415,-.556542]]]},"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Mesures d'estructures/Estratificació/Cabussament de l'estratificació de polaritat desconeguda",type:"symbol",source:"infogeo","source-layer":"Estratificació",filter:["==","_symbol",4],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Estratificació/Cabussament de l'estratificació de polaritat desconeguda","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["FiraSans-Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":{property:"_symbol",type:"categorical",default:[0,.3],stops:[[0,[1.77825,-.313271]],[1,[1.24,-1.03554]],[2,[1.41015,-.278583]],[3,[1.77825,-.623396]],[4,[1.75415,-.556542]]]},"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Terrenys antropitzats/Terrenys rebaixats/label/Default",type:"symbol",source:"infogeo","source-layer":"Terrenys rebaixats/label",minzoom:12.53,layout:{visibility:"visible","text-font":["FiraSans-Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#FF0000"}},{id:"Mesures d'estructures/Foliació regional varisca/Foliació regional varisca",type:"symbol",source:"infogeo","source-layer":"Foliació regional varisca",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Foliació regional varisca/Foliació regional varisca","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["FiraSans-Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":[1.56869,-.293125],"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Basament prequaternari/Unitats geològiques del basament/LABEL/label/Default",type:"symbol",source:"infogeo","source-layer":"LABEL/label",minzoom:12.53,layout:{visibility:"visible","text-font":["FiraSans-Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Terrenys antropitzats/Terrenys terraplenats/label/Default",type:"symbol",source:"infogeo","source-layer":"Terrenys terraplenats/label",minzoom:12.53,layout:{visibility:"visible","text-font":["FiraSans-Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#FF0000"}},{id:"Mesures d'estructures/Lineació d'intersecció entre l'estratificació i la foliació regional varisca/Lineació d'intersecció entre l'estratificació i la foliació regional varisca",type:"symbol",source:"infogeo","source-layer":"Lineació d'intersecció entre l'estratificació i la foliació regional varisca",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Lineació d'intersecció entre l'estratificació i la foliació regional varisca/Lineació d'intersecció entre l'estratificació i la foliació regional varisca","icon-rotate":{property:"DIR",default:0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["FiraSans-Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":[.510167,-1.20381],"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Dipòsits quaternaris/Unitats geològiques del quaternari/LABELq/label/Default",type:"symbol",source:"infogeo","source-layer":"LABELq/label",minzoom:12.53,layout:{visibility:"visible","text-font":["FiraSans-Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Registre geològic/Esquemes de relacions estratigràfiques/label/Default",type:"symbol",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques/label",minzoom:2.78,layout:{visibility:"visible","text-font":["FiraSans-Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}},{id:"Terrenys antropitzats/Terrenys modificats/label/Default",type:"symbol",source:"infogeo","source-layer":"Terrenys modificats/label",minzoom:12.53,layout:{visibility:"visible","text-font":["FiraSans-Regular"],"text-size":10.6667,"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#FF0000"}},{id:"Mesures d'estructures/Sentit de paleocorrent/Sentit de paleocorrent",type:"symbol",source:"infogeo","source-layer":"Sentit de paleocorrent",filter:["==","_symbol",0],minzoom:11.53,layout:{visibility:"visible","icon-image":"Mesures d'estructures/Sentit de paleocorrent/Sentit de paleocorrent","icon-rotate":{property:"DIR",default:-0,type:"identity"},"icon-rotation-alignment":"map","icon-keep-upright":!1,"icon-allow-overlap":!0,"text-font":["FiraSans-Regular"],"text-size":8,"text-anchor":"bottom-left","text-justify":"left","text-offset":[.405833,-1.10456],"text-field":"{_name}","text-optional":!0},paint:{"text-color":"#000000"}}]};function Co(e){let t,i,o,s,a,r=e[1].label+"",n="Unitats geològiques"===e[1].label&&e[0]&&"FILLq,PATT1q,LABELq/label"===e[1].value&&Ao(e),l="Unitats geològiques"===e[1].label&&e[0]&&"FILL,PATT1,PATT2,PATT3,PATT4,LABEL/label"===e[1].value&&Po(e);return{c(){t=L("span"),i=I(r),o=w(),n&&n.c(),s=w(),l&&l.c(),E(t,"class","labels svelte-1w26dry")},m(e,r){b(e,t,r),_(t,i),_(t,o),n&&n.m(t,null),_(t,s),l&&l.m(t,null),a=!0},p(e,o){(!a||2&o)&&r!==(r=e[1].label+"")&&C(i,r),"Unitats geològiques"===e[1].label&&e[0]&&"FILLq,PATT1q,LABELq/label"===e[1].value?n?(n.p(e,o),3&o&&ce(n,1)):(n=Ao(e),n.c(),ce(n,1),n.m(t,s)):n&&(ne(),ue(n,1,1,()=>{n=null}),le()),"Unitats geològiques"===e[1].label&&e[0]&&"FILL,PATT1,PATT2,PATT3,PATT4,LABEL/label"===e[1].value?l?(l.p(e,o),3&o&&ce(l,1)):(l=Po(e),l.c(),ce(l,1),l.m(t,null)):l&&(ne(),ue(l,1,1,()=>{l=null}),le())},i(e){a||(ce(n),ce(l),a=!0)},o(e){ue(n),ue(l),a=!1},d(e){e&&v(t),n&&n.d(),l&&l.d()}}}function zo(t){let i,o,s=t[1].label+"";return{c(){i=L("span"),o=I(s),E(i,"class","labels svelte-1w26dry"),A(i,"color","grey"),A(i,"font-weight","600")},m(e,t){b(e,i,t),_(i,o)},p(e,t){2&t&&s!==(s=e[1].label+"")&&C(o,s)},i:e,o:e,d(e){e&&v(i)}}}function Ao(e){let t,i;return t=new Eo({props:{item:e[1]}}),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},p(e,i){const o={};2&i&&(o.item=e[1]),t.$set(o)},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}function Po(e){let t,i;return t=new Eo({props:{item:e[1]}}),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},p(e,i){const o={};2&i&&(o.item=e[1]),t.$set(o)},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}function Bo(e){let t,i,o,s,a,r,n,l;function c(t){e[3].call(null,t)}let u={};void 0!==e[0]&&(u.checked=e[0]),t=new Ht({props:u}),Z.push(()=>de(t,"checked",c)),t.$on("change",e[4]);const h=[zo,Co],p=[];function m(e,t){return 2&t&&(s=!!e[1].label.includes("Columnes")),s?0:1}return a=m(e,-1),r=p[a]=h[a](e),{c(){fe(t.$$.fragment),o=w(),r.c(),n=q()},m(e,i){ye(t,e,i),b(e,o,i),p[a].m(e,i),b(e,n,i),l=!0},p(e,o){const s={};!i&&1&o&&(i=!0,s.checked=e[0],J(()=>i=!1)),t.$set(s);let l=a;a=m(e,o),a===l?p[a].p(e,o):(ne(),ue(p[l],1,1,()=>{p[l]=null}),le(),r=p[a],r||(r=p[a]=h[a](e),r.c()),ce(r,1),r.m(n.parentNode,n))},i(e){l||(ce(t.$$.fragment,e),ce(r),l=!0)},o(e){ue(t.$$.fragment,e),ue(r),l=!1},d(e){ge(t,e),e&&v(o),p[a].d(e),e&&v(n)}}}function Mo(e){let t,i;return t=new oi({props:{class:"field",style:"padding-left: 10px;",$$slots:{default:[Bo]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},p(e,[i]){const o={};131&i&&(o.$$scope={dirty:i,ctx:e}),t.$set(o)},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}function Do(e,t,i){let o={...To},{activated:s=!0}=t,{item:a}=t;const r=V("activateLayer");a.value.split(",").forEach(e=>{o.layers.forEach(t=>{t.layout&&t.layout.visibility&&t["source-layer"]===e&&("visible"===t.layout.visibility?i(0,s=!0):i(0,s=!1))})});return e.$$set=e=>{"activated"in e&&i(0,s=e.activated),"item"in e&&i(1,a=e.item)},[s,a,r,function(e){s=e,i(0,s)},()=>r(a,s)]}class So extends ve{constructor(e){super(),be(this,e,Do,Mo,n,{activated:0,item:1})}}function ko(e){let t,i,o,s,a,r,n,l="Basament prequaternari"===e[1]&&Uo(),c="Dipòsits quaternaris"===e[1]&&Ro(),u="Talls geològics"===e[1]&&Oo(),h="Registre geològic"===e[1]&&No(),p="Terrenys antropitzats"===e[1]&&$o(),m="Mesures d'estructures"===e[1]&&Vo();return{c(){t=L("div"),i=L("div"),l&&l.c(),o=w(),c&&c.c(),s=w(),u&&u.c(),a=w(),h&&h.c(),r=w(),p&&p.c(),n=w(),m&&m.c(),E(i,"class","infoboxBs svelte-nv6u2e")},m(e,d){b(e,t,d),_(t,i),l&&l.m(i,null),_(i,o),c&&c.m(i,null),_(i,s),u&&u.m(i,null),_(i,a),h&&h.m(i,null),_(i,r),p&&p.m(i,null),_(i,n),m&&m.m(i,null)},p(e,t){"Basament prequaternari"===e[1]?l||(l=Uo(),l.c(),l.m(i,o)):l&&(l.d(1),l=null),"Dipòsits quaternaris"===e[1]?c||(c=Ro(),c.c(),c.m(i,s)):c&&(c.d(1),c=null),"Talls geològics"===e[1]?u||(u=Oo(),u.c(),u.m(i,a)):u&&(u.d(1),u=null),"Registre geològic"===e[1]?h||(h=No(),h.c(),h.m(i,r)):h&&(h.d(1),h=null),"Terrenys antropitzats"===e[1]?p||(p=$o(),p.c(),p.m(i,n)):p&&(p.d(1),p=null),"Mesures d'estructures"===e[1]?m||(m=Vo(),m.c(),m.m(i,null)):m&&(m.d(1),m=null)},d(e){e&&v(t),l&&l.d(),c&&c.d(),u&&u.d(),h&&h.d(),p&&p.d(),m&&m.d()}}}function Uo(e){let t;return{c(){t=L("p"),t.innerHTML='Cartografia harmonitzada del basament prequaternari del Geotreball I (GT I). La cartografia és contínua. S’interpreta la \n    distribució de les unitats de basament cobertes per dipòsits quaternaris o antròpics, segons un model d’unitats geològiques. \n    Els elements que conformen la capa s’estructuren en 3 conjunts d’informació: unitats geològiques; contactes (sedimentaris, \n    metamòrfics i magmàtics); i falles i plecs. Cada unitat cartogràfica s’identifica amb un epígraf que es caracteritza per un \n    color i en algun cas també per una trama. En futures versions s’adjuntarà l’equivalència entre els epígrafs publicats als \n    fulls MGC25m i els epígrafs actualitzats. \n     <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/BAS_LLEG">Veure llegenda de signes convencionals</a>.'},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function Ro(e){let t;return{c(){t=L("p"),t.innerHTML='Cartografia harmonitzada dels dipòsits quaternaris del Geotreball I (GT I). La cartografia és contínua. S’interpreta la\n     distribució de les unitats quaternàries cobertes per dipòsits antròpics, segons un model d’unitats geològiques.\n      No inclou els materials d’alteració superficial de les unitats prequaternàries. Els elements que inclou la capa \n      s’estructuren en 3 conjunts d’informació: unitats geològiques; contactes i elements geomorfològics. Cada unitat \n      cartogràfica s’identifica amb un epígraf que es caracteritza per un color i en algun cas també per una trama. En \n      futures versions s’adjuntarà l’equivalència entre els epígrafs publicats als fulls MGC25m i els epígrafs actualitzats. \n      <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/QUAT_LLEG">Veure llegenda de signes convencionals</a>.'},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function Oo(e){let t;return{c(){t=L("p"),t.innerHTML='Representació gràfica de la intersecció dels cossos geològics en el subsòl amb un pla vertical d&#39;una orientació determinada. \n    De la intersecció d’aquest pla amb la superfície topogràfica en resulta la línia de la traça del tall. La present versió \n    permet visualitzar i descarregar talls geològics del Geotreball I (GT I). Cada tall representa una aproximació de la \n    distribució dels materials geològics en fondària, seguint un model d’unitats geològiques, coherent amb la informació de \n    superfície i de subsòl disponible.  <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/TALLS_LLEG">Veure llegenda de signes convencionals.</a>.'},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function No(e){let t;return{c(){t=L("p"),t.innerHTML='La capa Registre Geològic inclou esquemes representatius de les successions litostratigràfiques d’àmbits geogràfics específics. \n    La present versió de la capa Registre Geològic permet visualitzar i descarregar Columnes estratigràfiques sintètiques \n    i Esquemes de relacions estratigràfiques del Geotreball I (GT I).<br/>\n    Les Columnes estratigràfiques són representatives de les successions de roques sedimentàries i volcàniques presents a l’àmbit d’un mapa. \n    S’inclouen columnes representatives del Neogen, Paleogen, Mesozoic i Paleozoic.\n    <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/REL_LLEG">Veure llegenda</a>.  <br/>\n    Els Esquemes de relacions estratigràfiques són una representació gràfica sintètica de la posició cronoestratigràfica i estructural \n    de les diferents unitats geològiques presents a l’àmbit d’un mapa.\n         <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/COLS_LLEG">Veure llegenda de signes convencionals</a>.'},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function $o(e){let t;return{c(){t=L("p"),t.innerHTML='Cartografia harmonitzada de terrenys antropitzats dels Geotreball I (GT I) i Geotreball II (GT II). El concepte terreny \n    antropitzat es refereix a aquelles àrees on l’activitat humana ha modificat la configuració natural del terreny \n    significativament. A la present versió es diferencien 3 tipologies de terrenys antropitzats: terrenys terraplenats, \n    terrenys rebaixats i terrenys modificats. Cada tipologia inclou diferents unitats identificades mitjançant un epígraf. \n    <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/ANT_LLEG">Veure llegenda</a>.'},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function Vo(e){let t;return{c(){t=L("p"),t.innerHTML='Mesures de diferents tipus d’estructures de caràcter puntual del Geotreball I (GT I). Cada tipologia d’estructura té \n    un símbol específic que s’orienta en funció de la direcció de màxim pendent en el cas de les estructures planars \n    (estratificació i foliació), i la direcció en el cas de les estructures lineals. L’orientació de les estructures es \n    proporciona a partir de la mesura de l’azimut (de 0 a 360º en sentit horari) i la inclinació respecte el pla horitzontal \n    de la direcció de màxim pendent. En el cas de la lineació d’intersecció es proporciona l’azimut i la inclinació respecte \n    el pla horitzontal. En les mesures del sentit del paleocorrent només es proporciona l’azimut. La majoria d’orientacions \n    s’han mesurat al camp amb la brúixola, en afloraments específics. \n    <a target="_blank" href="https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/llegendes/MESU_LLEG">Veure llegenda de signes convencionals</a>.'},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function Go(t){let i,o=t[0]&&ko(t);return{c(){o&&o.c(),i=q()},m(e,t){o&&o.m(e,t),b(e,i,t)},p(e,[t]){e[0]?o?o.p(e,t):(o=ko(e),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},i:e,o:e,d(e){o&&o.d(e),e&&v(i)}}}function jo(e,t,i){let{groupLabel:o}=t,{showinfo:s}=t,{labelArray:a}=t;return O(async()=>{}),e.$$set=e=>{"groupLabel"in e&&i(1,o=e.groupLabel),"showinfo"in e&&i(0,s=e.showinfo),"labelArray"in e&&i(2,a=e.labelArray)},[s,o,a]}class Zo extends ve{constructor(e){super(),be(this,e,jo,Go,n,{groupLabel:1,showinfo:0,labelArray:2})}}function Ho(e,t,i){const o=e.slice();return o[12]=t[i],o[14]=i,o}function Xo(e,t,i){const o=e.slice();return o[15]=t[i],o[14]=i,o}function Qo(e,t,i){const o=e.slice();return o[12]=t[i],o[14]=i,o}function Wo(e){let t;return{c(){t=I("info_outlined")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function Ko(e){let t,i,o,s,a="opt_elements"!==e[1].groupId&&Jo(e),r=e[1].items,n=[];for(let t=0;t<r.length;t+=1)n[t]=rs(Qo(e,r,t));const l=e=>ue(n[e],1,1,()=>{n[e]=null});return{c(){t=L("div"),a&&a.c(),i=w();for(let e=0;e<n.length;e+=1)n[e].c();E(t,"id",o=e[1].groupId),E(t,"class","checkboxes svelte-1uekiio")},m(e,o){b(e,t,o),a&&a.m(t,null),_(t,i);for(let e=0;e<n.length;e+=1)n[e].m(t,null);s=!0},p(e,c){if("opt_elements"!==e[1].groupId?a?(a.p(e,c),2&c&&ce(a,1)):(a=Jo(e),a.c(),ce(a,1),a.m(t,i)):a&&(ne(),ue(a,1,1,()=>{a=null}),le()),178&c){let i;for(r=e[1].items,i=0;i<r.length;i+=1){const o=Qo(e,r,i);n[i]?(n[i].p(o,c),ce(n[i],1)):(n[i]=rs(o),n[i].c(),ce(n[i],1),n[i].m(t,null))}for(ne(),i=r.length;i<n.length;i+=1)l(i);le()}(!s||2&c&&o!==(o=e[1].groupId))&&E(t,"id",o)},i(e){if(!s){ce(a);for(let e=0;e<r.length;e+=1)ce(n[e]);s=!0}},o(e){ue(a),n=n.filter(Boolean);for(let e=0;e<n.length;e+=1)ue(n[e]);s=!1},d(e){e&&v(t),a&&a.d(),x(n,e)}}}function Jo(e){let t,i,o;return i=new oi({props:{$$slots:{default:[es],label:[Yo]},$$scope:{ctx:e}}}),{c(){t=L("div"),fe(i.$$.fragment)},m(e,s){b(e,t,s),ye(i,t,null),o=!0},p(e,t){const o={};262162&t&&(o.$$scope={dirty:t,ctx:e}),i.$set(o)},i(e){o||(ce(i.$$.fragment,e),o=!0)},o(e){ue(i.$$.fragment,e),o=!1},d(e){e&&v(t),ge(i)}}}function Yo(e){let t;return{c(){t=L("span"),t.textContent="Visualitza-ho tot",E(t,"class","headCheck svelte-1uekiio"),E(t,"slot","label")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function es(e){let t,i,o,s;function a(t){e[10].call(null,t)}let r={indeterminate:!0,class:"indentedfield"};return void 0!==e[4]&&(r.checked=e[4]),t=new Ht({props:r}),Z.push(()=>de(t,"checked",a)),t.$on("change",e[11]),{c(){fe(t.$$.fragment),o=w()},m(e,i){ye(t,e,i),b(e,o,i),s=!0},p(e,o){const s={};!i&&16&o&&(i=!0,s.checked=e[4],J(()=>i=!1)),t.$set(s)},i(e){s||(ce(t.$$.fragment,e),s=!0)},o(e){ue(t.$$.fragment,e),s=!1},d(e){ge(t,e),e&&v(o)}}}function ts(e){let t,i;return t=new So({props:{item:e[12],activated:e[4]}}),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},p(e,i){const o={};2&i&&(o.item=e[12]),16&i&&(o.activated=e[4]),t.$set(o)},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}function is(e){let t,i,o=Me,s=[];for(let t=0;t<o.length;t+=1)s[t]=as(Xo(e,o,t));const a=e=>ue(s[e],1,1,()=>{s[e]=null});return{c(){for(let e=0;e<s.length;e+=1)s[e].c();t=q()},m(e,o){for(let t=0;t<s.length;t+=1)s[t].m(e,o);b(e,t,o),i=!0},p(e,i){if(176&i){let r;for(o=Me,r=0;r<o.length;r+=1){const a=Xo(e,o,r);s[r]?(s[r].p(a,i),ce(s[r],1)):(s[r]=as(a),s[r].c(),ce(s[r],1),s[r].m(t.parentNode,t))}for(ne(),r=o.length;r<s.length;r+=1)a(r);le()}},i(e){if(!i){for(let e=0;e<o.length;e+=1)ce(s[e]);i=!0}},o(e){s=s.filter(Boolean);for(let e=0;e<s.length;e+=1)ue(s[e]);i=!1},d(e){x(s,e),e&&v(t)}}}function os(e){let t,i,o,s=e[15].items,a=[];for(let t=0;t<s.length;t+=1)a[t]=ss(Ho(e,s,t));const r=e=>ue(a[e],1,1,()=>{a[e]=null});return{c(){t=L("div");for(let e=0;e<a.length;e+=1)a[e].c();E(t,"id",i=e[15].groupId),E(t,"class","checkboxes svelte-1uekiio")},m(e,i){b(e,t,i);for(let e=0;e<a.length;e+=1)a[e].m(t,null);o=!0},p(e,i){if(16&i){let o;for(s=e[15].items,o=0;o<s.length;o+=1){const r=Ho(e,s,o);a[o]?(a[o].p(r,i),ce(a[o],1)):(a[o]=ss(r),a[o].c(),ce(a[o],1),a[o].m(t,null))}for(ne(),o=s.length;o<a.length;o+=1)r(o);le()}},i(e){if(!o){for(let e=0;e<s.length;e+=1)ce(a[e]);o=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)ue(a[e]);o=!1},d(e){e&&v(t),x(a,e)}}}function ss(e){let t,i;return t=new So({props:{item:e[12],activated:e[4]}}),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},p(e,i){const o={};16&i&&(o.activated=e[4]),t.$set(o)},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}function as(e){let t,i,o,s,a,r,n,l,c,u,h,p,m,d,f,y=e[15].groupLabel+"",g=e[5]&&os(e);return{c(){t=L("form"),i=L("div"),o=L("div"),s=L("div"),a=L("select"),r=L("option"),n=I(y),c=w(),u=L("div"),h=w(),g&&g.c(),p=w(),r.__value=l=e[15].groupLabel,r.value=r.__value,E(a,"class","select svelte-1uekiio"),A(a,"border-style","none"),E(u,"class","overSelect svelte-1uekiio"),A(s,"width","100%"),E(s,"class","selectBox svelte-1uekiio"),A(o,"display","flex"),A(o,"height","32px"),E(i,"class","multiselect svelte-1uekiio"),A(i,"margin-left","18px"),A(i,"margin-top","8px"),A(i,"width","98%")},m(l,y){b(l,t,y),_(t,i),_(i,o),_(o,s),_(s,a),_(a,r),_(r,n),_(s,c),_(s,u),_(i,h),g&&g.m(i,null),_(t,p),m=!0,d||(f=F(s,"click",e[7]),d=!0)},p(e,t){e[5]?g?(g.p(e,t),32&t&&ce(g,1)):(g=os(e),g.c(),ce(g,1),g.m(i,null)):g&&(ne(),ue(g,1,1,()=>{g=null}),le())},i(e){m||(ce(g),m=!0)},o(e){ue(g),m=!1},d(e){e&&v(t),g&&g.d(),d=!1,f()}}}function rs(e){let t,i,o,s;const a=[is,ts],r=[];function n(e,t){return"Columnes estratigràfiques"===e[12].label?0:1}return t=n(e),i=r[t]=a[t](e),{c(){i.c(),o=q()},m(e,i){r[t].m(e,i),b(e,o,i),s=!0},p(e,s){let l=t;t=n(e),t===l?r[t].p(e,s):(ne(),ue(r[l],1,1,()=>{r[l]=null}),le(),i=r[t],i||(i=r[t]=a[t](e),i.c()),ce(i,1),i.m(o.parentNode,o))},i(e){s||(ce(i),s=!0)},o(e){ue(i),s=!1},d(e){r[t].d(e),e&&v(o)}}}function ns(e){let t,i,o,s,r,n,l,c,u,h,p,m,d,f,y,g,x,q,T,z=e[1].groupLabel+"";d=new Tt({props:{style:"font-size: 25px ",class:" material-icons  ",$$slots:{default:[Wo]},$$scope:{ctx:e}}});let P=e[3]&&Ko(e);return g=new Zo({props:{groupLabel:e[1].groupLabel,showinfo:e[2],labelArray:e[0]}}),{c(){t=L("form"),i=L("div"),o=L("div"),s=L("div"),r=L("select"),n=L("option"),l=I(z),u=w(),h=L("div"),p=w(),m=L("div"),fe(d.$$.fragment),f=w(),P&&P.c(),y=w(),fe(g.$$.fragment),n.__value=c=e[1].groupLabel,n.value=n.__value,E(r,"class","select svelte-1uekiio"),A(r,"border-radius","11px"),A(r,"border-color","transparent"),A(r,"background-color","#e5e5bf"),E(h,"class","overSelect svelte-1uekiio"),A(s,"width","100%"),E(s,"class","selectBox svelte-1uekiio"),A(m,"position","relative"),A(m,"right","-12px"),A(m,"cursor","pointer"),E(m,"title","Informació de la capa"),A(o,"display","flex"),A(o,"height","32px"),E(i,"class","multiselect svelte-1uekiio")},m(a,c){b(a,t,c),_(t,i),_(i,o),_(o,s),_(s,r),_(r,n),_(n,l),_(s,u),_(s,h),_(o,p),_(o,m),ye(d,m,null),_(i,f),P&&P.m(i,null),_(t,y),ye(g,t,null),x=!0,q||(T=[F(s,"click",e[6]),F(m,"click",e[8])],q=!0)},p(e,[t]){(!x||2&t)&&z!==(z=e[1].groupLabel+"")&&C(l,z),(!x||2&t&&c!==(c=e[1].groupLabel))&&(n.__value=c,n.value=n.__value);const o={};262144&t&&(o.$$scope={dirty:t,ctx:e}),d.$set(o),e[3]?P?(P.p(e,t),8&t&&ce(P,1)):(P=Ko(e),P.c(),ce(P,1),P.m(i,null)):P&&(ne(),ue(P,1,1,()=>{P=null}),le());const s={};2&t&&(s.groupLabel=e[1].groupLabel),4&t&&(s.showinfo=e[2]),1&t&&(s.labelArray=e[0]),g.$set(s)},i(e){x||(ce(d.$$.fragment,e),ce(P),ce(g.$$.fragment,e),x=!0)},o(e){ue(d.$$.fragment,e),ue(P),ue(g.$$.fragment,e),x=!1},d(e){e&&v(t),ge(d),P&&P.d(),ge(g),q=!1,a(T)}}}function ls(e,t,i){let{layer:o}=t,s=!1,a=!1,r=!0,n=!1,{labelArray:l}=t;const c=V("activateLayerGroup");return e.$$set=e=>{"layer"in e&&i(1,o=e.layer),"labelArray"in e&&i(0,l=e.labelArray)},[l,o,s,a,r,n,function(){i(3,a=!a),a||i(2,s=!1)},function(){i(5,n=!n)},function(){i(2,s=!1);let e=o.groupLabel;l===e?i(0,l=""):(i(0,l=e),i(2,s=!0))},c,function(e){r=e,i(4,r)},()=>c(o,r)]}class cs extends ve{constructor(e){super(),be(this,e,ls,ns,n,{layer:1,labelArray:0})}}function us(e,t,i){const o=e.slice();return o[8]=t[i],o}function hs(e){let t,i,o,s,r,n,l,c,u,h,p=e[8].label+"";return{c(){t=L("div"),i=L("label"),o=L("input"),n=w(),l=I(p),c=w(),E(o,"type","radio"),o.checked=s=e[8].label===e[0].label,o.__value=r=e[8],o.value=o.__value,e[3][0].push(o),E(i,"class","svelte-heo4pg")},m(s,a){b(s,t,a),_(t,i),_(i,o),o.checked=o.__value===e[0],_(i,n),_(i,l),_(t,c),u||(h=[F(o,"change",e[2]),F(o,"change",e[4])],u=!0)},p(e,t){1&t&&s!==(s=e[8].label===e[0].label)&&(o.checked=s),1&t&&(o.checked=o.__value===e[0])},d(i){i&&v(t),e[3][0].splice(e[3][0].indexOf(o),1),u=!1,a(h)}}}function ps(t){let i,o,s,a,r,n,l,c,u,h=t[8].label+"";return{c(){i=L("div"),o=L("label"),s=L("input"),r=w(),n=I(h),l=w(),E(s,"id","wmsid"),E(s,"type","checkbox"),s.checked=fs,s.value=a=t[8],E(o,"class","svelte-heo4pg")},m(e,t){b(e,i,t),_(i,o),_(o,s),_(o,r),_(o,n),_(i,l),c||(u=F(s,"click",letwms),c=!0)},p:e,d(e){e&&v(i),c=!1,u()}}}function ms(e){let t;let i=function(e,t){return"estructuralwms"===e[8].url?ps:hs}(e)(e);return{c(){i.c(),t=q()},m(e,o){i.m(e,o),b(e,t,o)},p(e,t){i.p(e,t)},d(e){i.d(e),e&&v(t)}}}function ds(t){let i,o,s=Be,a=[];for(let e=0;e<s.length;e+=1)a[e]=ms(us(t,s,e));return{c(){i=L("div"),o=L("div");for(let e=0;e<a.length;e+=1)a[e].c();E(o,"id","menu"),E(o,"class","wrapper svelte-heo4pg"),E(i,"class","container svelte-heo4pg")},m(e,t){b(e,i,t),_(i,o);for(let e=0;e<a.length;e+=1)a[e].m(o,null)},p(e,[t]){if(3&t){let i;for(s=Be,i=0;i<s.length;i+=1){const r=us(e,s,i);a[i]?a[i].p(r,t):(a[i]=ms(r),a[i].c(),a[i].m(o,null))}for(;i<a.length;i+=1)a[i].d(1);a.length=s.length}},i:e,o:e,d(e){e&&v(i),x(a,e)}}}let fs=!1;function ys(e,t,i){const o=V("changeBaseLayer");V("removeWmsBaseLayer");let s=Be[0];document.getElementById("wmsid");return[s,o,function(){s=this.__value,i(0,s)},[[]],()=>o(s)]}class gs extends ve{constructor(e){super(),be(this,e,ys,ds,n,{})}}function _s(e,t,i){const o=e.slice();return o[0]=t[i],o[2]=i,o}function bs(t){let i,o;return i=new cs({props:{layer:t[0],labelArray:xs}}),{c(){fe(i.$$.fragment)},m(e,t){ye(i,e,t),o=!0},p:e,i(e){o||(ce(i.$$.fragment,e),o=!0)},o(e){ue(i.$$.fragment,e),o=!1},d(e){ge(i,e)}}}function vs(e){let t,i,o,s,a,r,n,l,c,u,h,p,m,d,f;s=new pi({}),u=new gs({});let y=De,g=[];for(let t=0;t<y.length;t+=1)g[t]=bs(_s(e,y,t));const I=e=>ue(g[e],1,1,()=>{g[e]=null});return{c(){t=L("div"),i=L("div"),o=L("div"),fe(s.$$.fragment),a=w(),r=L("div"),n=L("div"),l=L("h2"),l.textContent="Selector de mapa base:",c=w(),fe(u.$$.fragment),h=w(),p=L("h2"),p.textContent="Selector de capes:",m=w(),d=L("div");for(let e=0;e<g.length;e+=1)g[e].c();E(l,"class","svelte-tr7k2k"),E(n,"class","headerImage2 svelte-tr7k2k"),E(p,"class","svelte-tr7k2k"),E(o,"class","headerImage"),E(d,"id","capaselect"),E(d,"class","container list svelte-tr7k2k"),E(t,"class","fitcontent")},m(e,y){b(e,t,y),_(t,i),_(i,o),ye(s,o,null),_(o,a),_(o,r),_(r,n),_(n,l),_(n,c),ye(u,n,null),_(o,h),_(o,p),_(i,m),_(i,d);for(let e=0;e<g.length;e+=1)g[e].m(d,null);f=!0},p(e,[t]){if(0&t){let i;for(y=De,i=0;i<y.length;i+=1){const o=_s(e,y,i);g[i]?(g[i].p(o,t),ce(g[i],1)):(g[i]=bs(o),g[i].c(),ce(g[i],1),g[i].m(d,null))}for(ne(),i=y.length;i<g.length;i+=1)I(i);le()}},i(e){if(!f){ce(s.$$.fragment,e),ce(u.$$.fragment,e);for(let e=0;e<y.length;e+=1)ce(g[e]);f=!0}},o(e){ue(s.$$.fragment,e),ue(u.$$.fragment,e),g=g.filter(Boolean);for(let e=0;e<g.length;e+=1)ue(g[e]);f=!1},d(e){e&&v(t),ge(s),ge(u),x(g,e)}}}let xs="";class Ls extends ve{constructor(e){super(),be(this,e,null,vs,n,{})}}function Is(e){let t,o,s,n,c,h;const m=e[4].default,d=l(m,e,e[3],null);let f=[Ye(e[2],["use"])],y={};for(let e=0;e<f.length;e+=1)y=i(y,f[e]);return{c(){t=L("h1"),d&&d.c(),T(t,y)},m(i,a){b(i,t,a),d&&d.m(t,null),n=!0,c||(h=[p(o=et.call(null,t,e[0])),p(s=e[1].call(null,t))],c=!0)},p(e,[i]){d&&d.p&&8&i&&u(d,m,e,e[3],i,null,null),T(t,y=me(f,[4&i&&Ye(e[2],["use"])])),o&&r(o.update)&&1&i&&o.update.call(null,e[0])},i(e){n||(ce(d,e),n=!0)},o(e){ue(d,e),n=!1},d(e){e&&v(t),d&&d.d(e),c=!1,a(h)}}}function ws(e,t,o){let{$$slots:s={},$$scope:a}=t;const r=Je(R());let{use:n=[]}=t;return e.$$set=e=>{o(2,t=i(i({},t),h(e))),"use"in e&&o(0,n=e.use),"$$scope"in e&&o(3,a=e.$$scope)},t=h(t),[n,r,t,a,s]}_i({class:"mdc-drawer-app-content",component:qi,contexts:{}}),_i({class:"mdc-drawer__content",component:qi,contexts:{}}),_i({class:"mdc-drawer__header",component:qi,contexts:{}});function qs(e){let t,o,s,n,c,h;const m=e[4].default,d=l(m,e,e[3],null);let f=[Ye(e[2],["use"])],y={};for(let e=0;e<f.length;e+=1)y=i(y,f[e]);return{c(){t=L("h3"),d&&d.c(),T(t,y)},m(i,a){b(i,t,a),d&&d.m(t,null),n=!0,c||(h=[p(o=et.call(null,t,e[0])),p(s=e[1].call(null,t))],c=!0)},p(e,[i]){d&&d.p&&8&i&&u(d,m,e,e[3],i,null,null),T(t,y=me(f,[4&i&&Ye(e[2],["use"])])),o&&r(o.update)&&1&i&&o.update.call(null,e[0])},i(e){n||(ce(d,e),n=!0)},o(e){ue(d,e),n=!1},d(e){e&&v(t),d&&d.d(e),c=!1,a(h)}}}function Fs(e,t,o){let{$$slots:s={},$$scope:a}=t;const r=Je(R());let{use:n=[]}=t;return e.$$set=e=>{o(2,t=i(i({},t),h(e))),"use"in e&&o(0,n=e.use),"$$scope"in e&&o(3,a=e.$$scope)},t=h(t),[n,r,t,a,s]}_i({class:"mdc-drawer__title",component:class extends ve{constructor(e){super(),be(this,e,ws,Is,n,{use:0})}},contexts:{}}),_i({class:"mdc-drawer__subtitle",component:xi,contexts:{}}),_i({class:"mdc-drawer-scrim",component:qi,contexts:{}}),_i({class:"mdc-list-item__text",component:po,contexts:{}}),_i({class:"mdc-list-item__primary-text",component:po,contexts:{}}),_i({class:"mdc-list-item__secondary-text",component:po,contexts:{}}),_i({class:"mdc-list-item__graphic",component:po,contexts:{}}),_i({class:"mdc-list-item__meta",component:po,contexts:{}}),_i({class:"mdc-list-group",component:qi,contexts:{}});function Es(t){let i,o,s,a;return s=new Ls({}),{c(){i=L("div"),o=L("div"),fe(s.$$.fragment),E(o,"id","container"),E(o,"class","svelte-1vb7g6z"),E(i,"id","container_ppal"),E(i,"class","svelte-1vb7g6z")},m(e,t){b(e,i,t),_(i,o),ye(s,o,null),a=!0},p:e,i(e){a||(ce(s.$$.fragment,e),a=!0)},o(e){ue(s.$$.fragment,e),a=!1},d(e){e&&v(i),ge(s)}}}function Ts(e,t,i){!function(){const e=R()}();let{myDrawer2Open:o=!1}=t;return e.$$set=e=>{"myDrawer2Open"in e&&i(0,o=e.myDrawer2Open)},[o]}_i({class:"mdc-list-group__subheader",component:class extends ve{constructor(e){super(),be(this,e,Fs,qs,n,{use:0})}},contexts:{}});class Cs extends ve{constructor(e){super(),be(this,e,Ts,Es,n,{myDrawer2Open:0})}}function zs(e){let t;return{c(){t=L("i"),E(t,"class","fa fa-bars")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function As(e){let t,i;return t=new Cs({}),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}function Ps(e){let t,i,o,s,a;i=new qt({props:{$$slots:{default:[zs]},$$scope:{ctx:e}}}),i.$on("click",e[1]);let r=e[0]&&As();return{c(){t=L("div"),fe(i.$$.fragment),o=w(),r&&r.c(),s=q(),E(t,"class","iconmenu svelte-1xnb387")},m(e,n){b(e,t,n),ye(i,t,null),b(e,o,n),r&&r.m(e,n),b(e,s,n),a=!0},p(e,[t]){const o={};1024&t&&(o.$$scope={dirty:t,ctx:e}),i.$set(o),e[0]?r?1&t&&ce(r,1):(r=As(),r.c(),ce(r,1),r.m(s.parentNode,s)):r&&(ne(),ue(r,1,1,()=>{r=null}),le())},i(e){a||(ce(i.$$.fragment,e),ce(r),a=!0)},o(e){ue(i.$$.fragment,e),ue(r),a=!1},d(e){e&&v(t),ge(i),e&&v(o),r&&r.d(e),e&&v(s)}}}function Bs(e,t,i){let o=!1;return setTimeout(()=>{i(0,o=!0)},4e3),[o,function e(){e&&i(0,o=!o)}]}class Ms extends ve{constructor(e){super(),be(this,e,Bs,Ps,n,{})}}function Ds(t){let i;return{c(){i=L("div"),i.innerHTML='<a title="Institut Catogràfic i Geològic de Catalunya" href="https://www.icgc.cat" target="_blank"><img width="125" alt="Logi ICGCG" src="assets/icgc_blanc.png" class="ui image logo"/></a>',E(i,"class","headerLogo svelte-130ujm9")},m(e,t){b(e,i,t)},p:e,i:e,o:e,d(e){e&&v(i)}}}class Ss extends ve{constructor(e){super(),be(this,e,null,Ds,n,{})}}function ks(e){let t,i,o;const s=e[10].default,a=l(s,e,e[9],null);return i=new Ss({}),{c(){a&&a.c(),t=w(),fe(i.$$.fragment)},m(e,s){a&&a.m(e,s),b(e,t,s),ye(i,e,s),o=!0},p(e,t){a&&a.p&&512&t[0]&&u(a,s,e,e[9],t,null,null)},i(e){o||(ce(a,e),ce(i.$$.fragment,e),o=!0)},o(e){ue(a,e),ue(i.$$.fragment,e),o=!1},d(e){a&&a.d(e),e&&v(t),ge(i,e)}}}function Us(e){let t,i,o=e[0]&&ks(e);return{c(){t=L("div"),o&&o.c(),E(t,"id","map"),E(t,"class","svelte-1412wnd")},m(s,a){b(s,t,a),o&&o.m(t,null),e[11](t),i=!0},p(e,i){e[0]?o?(o.p(e,i),1&i[0]&&ce(o,1)):(o=ks(e),o.c(),ce(o,1),o.m(t,null)):o&&(ne(),ue(o,1,1,()=>{o=null}),le())},i(e){i||(ce(o),i=!0)},o(e){ue(o),i=!1},d(i){i&&v(t),o&&o.d(),e[11](null)}}}function Rs(e,t,i){let{$$slots:o={},$$scope:s}=t;$(Pe,{getMap:()=>p});let{lat:a}=t,{lon:r}=t,{zoom:n}=t,{maxZoom:l}=t,{style:c}=t,{pitch:u}=t,{bearing:h}=t,{map:p}=t,m=V("overLayers");const d=V("activateLayerGroup"),f=V("changePaintProperty");let y;async function g(){if(console.log(p.getSource("mapbox-dem")),!p.getSource("mapbox-dem"))try{p.addSource("mapbox-dem",{type:"raster-dem",url:"mapbox://mapbox.mapbox-terrain-dem-v1",tileSize:512,maxzoom:14})}catch{}if(!p.getSource("icgc-dem")){try{p.addSource("icgc-dem",{type:"raster-dem",tiles:["https://geoserveis.icgc.cat/vector-tiles/terreny_icgc_5m_rgb/{z}/{x}/{y}.png"],tileSize:512,maxzoom:14})}catch{}p.addLayer({id:"sky",type:"sky",paint:{"sky-type":"atmosphere","sky-atmosphere-sun":[0,50],"sky-atmosphere-sun-intensity":5}})}!async function(){m&&(Object.keys(m.sources).forEach((function(e,t){p.getSource(e)||p.addSource(e,m.sources[e])})),m.layers.forEach(e=>{p.getLayer(e.id)||p.addLayer(e,"water-name-lakeline-platja")}))}()}function _(){if(-1!==window.document.getElementById("bt3D").className.indexOf("2d")){console.log("");try{console.log("");var{longitude:e,latitude:t}=p.getCenter();(i=e,o=t,!(p.getZoom()<10)&&i>=0&&i<=6&&o>=38.5&&o<=62.33)?p.setTerrain({source:"icgc-dem",exaggeration:1.2}):p.setTerrain({source:"mapbox-dem",exaggeration:1.5})}catch(e){}}var i,o}O(async()=>{Ue.accessToken="pk.eyJ1IjoibHN0aXoiLCJhIjoiY2s5dGtnNTZ2MWVybzNobjEyam0yd2E3MyJ9.6dCvGbS93SKGMbOqZA4Qag",i(0,p=new Ue.Map({container:y,style:c,hash:!0,center:[r,a],zoom:n,maxZoom:l,bearing:h,pitch:u,logoPosition:"top-right",attributionControl:!1})),p.once("load",e=>{g().then((function(){_()})),console.log(""),p.resize();De.forEach(e=>{"opt_basament"===e.groupId||"opt_quaternari"===e.groupId||d(e,!1)}),De.forEach(e=>{e.items.forEach(e=>{f(e,50)})}),console.log("")})}),window.addEventListener("resize",(function(){var e=.5*window.innerWidth,t=.5*window.innerHeight;p.setSize(e,t),camera.aspect=e/t,camera.updateProjectionMatrix()}));N(qe.subscribe(e=>{p&&e&&p.setLayoutProperty(e.ly,"visibility",e.vis)}));N(Fe.subscribe(e=>{p&&e&&(p.setStyle(e),p.on("styledata",(function(){g().then((function(){_()}))})),p.resize())}));N(Ee.subscribe(e=>{p&&e&&p.setPaintProperty(e.ly,"fill-opacity",e.op)}));let b="";N(Ae.subscribe(e=>{if(p&&e){if("modificats"===e.id){let a=e.item.layer.id;e.item.layer.filter;for(var t=["all",["in","CODI_CAS",e.nom]],i=p.getStyle().layers,o=0;o<i.length;o++)if("Terrenys antropitzats/Terrenys modificats/3"===i[o].id){s=i[o].id;break}p.addLayer({id:a+"_highlight",type:"line",source:"infogeo","source-layer":"Terrenys modificats",layout:{visibility:"visible"},paint:{"line-opacity":1,"line-color":"#ADE5FF","line-width":5.033333},filter:["in","CODI_CAS",e.item.properties.CODI_CAS]},s),b=a+"_highlight",p.setFilter(a+"_highlight",t)}if("antropics"===e.id){let a=e.item.layer.id,r=e.item.layer["source-layer"];e.item.layer.filter;for(t=["all",["in","CODI_CAS",e.nom]],i=p.getStyle().layers,o=0;o<i.length;o++)if("Terrenys antropitzats/Terrenys rebaixats/3"===i[o].id){s=i[o].id;break}p.addLayer({id:a+"_highlight",type:"fill",source:"infogeo","source-layer":r,layout:{visibility:"visible"},paint:{"fill-outline-color":"#000000","fill-color":"#ADE5FF","fill-opacity":.75},filter:["in","CODI_CAS",e.item.properties.CODI_CAS]},s),b=a+"_highlight",p.setFilter(a+"_highlight",t)}if("terraplenats"===e.id){let a=e.item.layer.id;e.item.layer.filter;for(t=["all",["in","CODI_CAS",e.nom]],i=p.getStyle().layers,o=0;o<i.length;o++)if("Terrenys antropitzats/Terrenys terraplenats"===i[o].id){s=i[o].id;break}p.addLayer({id:a+"_highlight",type:"line",source:"infogeo","source-layer":"Terrenys terraplenats",layout:{visibility:"visible"},paint:{"line-opacity":1,"line-color":"#ADE5FF","line-width":5.033333},filter:["in","CODI_CAS",e.item.properties.CODI_CAS]},s),b=a+"_highlight",p.setFilter(a+"_highlight",t)}if("talls"===e.id){let a=e.item.layer.id;for(t=["all",["in","_symbol",e.item.layer.filter[2]],["in","NOM_TALL",e.nom]],i=p.getStyle().layers,o=0;o<i.length;o++)if("Talls geològics/Traces de talls geològics/5704"===i[o].id){s=i[o].id;break}p.addLayer({id:a+"_highlight",type:"line",source:"infogeo","source-layer":"Traces de talls geològics",layout:{visibility:"visible"},paint:{"line-opacity":1,"line-color":"#ADE5FF","line-width":5.033333},filter:["in","NOM_TALL",e.item.properties.NOM_TALL]},s),b=a+"_highlight",p.setFilter(a+"_highlight",t)}if("polygonEsquemes"===e.id){let a=e.item.layer.id;for(t=["all",["in","_symbol",e.item.layer.filter[2]],["in","IDABS",e.idabs]],i=p.getStyle().layers,o=0;o<i.length;o++)if("Registre geològic/Esquemes de relacions estratigràfiques"===i[o].id){s=i[o].id;break}p.addLayer({id:a+"_highlight",type:"line",source:"infogeo","source-layer":"Esquemes de relacions estratigràfiques",layout:{visibility:"visible"},paint:{"line-opacity":1,"line-color":"#ADE5FF","line-width":5.033333},filter:["in","IDABS",e.item.properties.IDABS]},s),b=a+"_highlight",p.setFilter(a+"_highlight",t)}if("polygonColumnes"===e.id){let a=e.item.layer.id,r=e.item.layer.filter,n=e.item.layer["source-layer"];for(t=["all",["in","_symbol",r[2]],["in","IDABS",e.idabs]],i=p.getStyle().layers,o=0;o<i.length;o++)if("Registre geològic/Columnes estratigràfiques/Columnes del Paleozoic/Paleozoic LINK/Paleozoic"===i[o].id){s=i[o].id;break}p.addLayer({id:a+"_highlight",type:"fill",source:"infogeo","source-layer":n,layout:{visibility:"visible"},paint:{"fill-outline-color":"#000000","fill-color":"#ADE5FF","fill-opacity":.75},filter:["in","_symbol",r[2]]},s),b=a+"_highlight",p.setFilter(a+"_highlight",t)}if("polygonsQt"===e.id){let a=e.item.layer.id,r=e.item.layer.filter;for(t=["all",["in","_symbol",r[2]],["in","IDABS",e.idabs]],i=p.getStyle().layers,o=0;o<i.length;o++)if("Dipòsits quaternaris/Unitats geològiques del quaternari/FILLq/QHac"===i[o].id){s=i[o].id;break}p.addLayer({id:a+"_highlight",type:"fill",source:"infogeo","source-layer":"FILLq",layout:{visibility:"visible"},paint:{"fill-outline-color":"#000000","fill-color":"#ADE5FF","fill-opacity":.75},filter:["in","_symbol",r[2]]},s),b=a+"_highlight",p.setFilter(a+"_highlight",t)}if("polygonsBs"===e.id){let a=e.item.layer.id,r=e.item.layer.filter;var s;for(t=["all",["in","_symbol",r[2]],["in","IDABS",e.idabs]],i=p.getStyle().layers,o=0;o<i.length;o++)if("Basament prequaternari/Unitats geològiques del basament/FILL/CACe"===i[o].id){s=i[o].id;break}p.addLayer({id:a+"_highlight",type:"fill",source:"infogeo","source-layer":"FILL",layout:{visibility:"visible"},paint:{"fill-outline-color":"#000000","fill-color":"#ADE5FF","fill-opacity":.75},filter:["in","_symbol",r[2]]},s),b=a+"_highlight",p.setFilter(a+"_highlight",t)}}}));var v=[];N(Ce.subscribe(e=>{if(v=[],p&&e){let t="#00fff2";"fill"===e.ty&&(void 0!==e.op["fill-color"]&&p.setPaintProperty(e.ly,"fill-color",t),void 0!==e.op["fill-pattern"]&&(p.setPaintProperty(e.ly,"fill-pattern",void 0),p.setPaintProperty(e.ly,"fill-color",t))),"line"===e.ty&&(p.setPaintProperty(e.ly,"line-color",t),p.setPaintProperty(e.ly,"line-width",4)),"symbol"===e.ty&&p.setPaintProperty(e.ly,"icon-color",t)}v.push(e)}));N(ze.subscribe(e=>{p&&e&&(""!==b&&p.removeLayer(b),"fill"===e.ty&&(void 0!==e.op["fill-color"]&&p.setPaintProperty(e.ly,"fill-color",e.op["fill-color"]),void 0!==e.op["fill-pattern"]&&(p.setPaintProperty(e.ly,"fill-pattern",e.op["fill-pattern"]),p.setPaintProperty(e.ly,"fill-color",e.op[void 0]))),"line"===e.ty&&(p.setPaintProperty(e.ly,"line-color",e.op["line-color"]),p.setPaintProperty(e.ly,"line-width",e.op["line-width"])),"symbol"===e.ty&&p.setPaintProperty(e.ly,"icon-color",e.op["icon-color"]))}));return N(Te.subscribe(e=>{if(p&&e){const t=e.coords.x,i=e.coords.y;p.jumpTo({center:[t,i],zoom:14})}})),e.$$set=e=>{"lat"in e&&i(2,a=e.lat),"lon"in e&&i(3,r=e.lon),"zoom"in e&&i(4,n=e.zoom),"maxZoom"in e&&i(5,l=e.maxZoom),"style"in e&&i(6,c=e.style),"pitch"in e&&i(7,u=e.pitch),"bearing"in e&&i(8,h=e.bearing),"map"in e&&i(0,p=e.map),"$$scope"in e&&i(9,s=e.$$scope)},[p,y,a,r,n,l,c,u,h,s,o,function(e){Z[e?"unshift":"push"](()=>{y=e,i(1,y)})}]}class Os extends ve{constructor(e){super(),be(this,e,Rs,Us,n,{lat:2,lon:3,zoom:4,maxZoom:5,style:6,pitch:7,bearing:8,map:0},[-1,-1])}}function Ns(e){const{getMap:t}=V(Pe);return t().addControl(new Ue.AttributionControl({compact:!0}),"bottom-right"),[]}class $s extends ve{constructor(e){super(),be(this,e,Ns,null,n,{})}}function Vs(e){const{getMap:t}=V(Pe),i=t();return O(async()=>{i.addControl(new Ue.GeolocateControl({positionOptions:{enableHighAccuracy:!0,watchPosition:!0},accessibleLabelProperty:"name"}),"bottom-right")}),[]}class Gs extends ve{constructor(e){super(),be(this,e,Vs,null,n,{})}}var js=ke((function(e,t){function i(e,t,i){void 0===i&&(i={});var o={type:"Feature"};return(0===i.id||i.id)&&(o.id=i.id),i.bbox&&(o.bbox=i.bbox),o.properties=t||{},o.geometry=e,o}function o(e,t,o){return void 0===o&&(o={}),i({type:"Point",coordinates:e},t,o)}function s(e,t,o){void 0===o&&(o={});for(var s=0,a=e;s<a.length;s++){var r=a[s];if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var n=0;n<r[r.length-1].length;n++)if(r[r.length-1][n]!==r[0][n])throw new Error("First and last Position are not equivalent.")}return i({type:"Polygon",coordinates:e},t,o)}function a(e,t,o){if(void 0===o&&(o={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return i({type:"LineString",coordinates:e},t,o)}function r(e,t){void 0===t&&(t={});var i={type:"FeatureCollection"};return t.id&&(i.id=t.id),t.bbox&&(i.bbox=t.bbox),i.features=e,i}function n(e,t,o){return void 0===o&&(o={}),i({type:"MultiLineString",coordinates:e},t,o)}function l(e,t,o){return void 0===o&&(o={}),i({type:"MultiPoint",coordinates:e},t,o)}function c(e,t,o){return void 0===o&&(o={}),i({type:"MultiPolygon",coordinates:e},t,o)}function u(e,i){void 0===i&&(i="kilometers");var o=t.factors[i];if(!o)throw new Error(i+" units is invalid");return e*o}function h(e,i){void 0===i&&(i="kilometers");var o=t.factors[i];if(!o)throw new Error(i+" units is invalid");return e/o}function p(e){return 180*(e%(2*Math.PI))/Math.PI}function m(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=i,t.geometry=function(e,t,i){switch(e){case"Point":return o(t).geometry;case"LineString":return a(t).geometry;case"Polygon":return s(t).geometry;case"MultiPoint":return l(t).geometry;case"MultiLineString":return n(t).geometry;case"MultiPolygon":return c(t).geometry;default:throw new Error(e+" is invalid")}},t.point=o,t.points=function(e,t,i){return void 0===i&&(i={}),r(e.map((function(e){return o(e,t)})),i)},t.polygon=s,t.polygons=function(e,t,i){return void 0===i&&(i={}),r(e.map((function(e){return s(e,t)})),i)},t.lineString=a,t.lineStrings=function(e,t,i){return void 0===i&&(i={}),r(e.map((function(e){return a(e,t)})),i)},t.featureCollection=r,t.multiLineString=n,t.multiPoint=l,t.multiPolygon=c,t.geometryCollection=function(e,t,o){return void 0===o&&(o={}),i({type:"GeometryCollection",geometries:e},t,o)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var i=Math.pow(10,t||0);return Math.round(e*i)/i},t.radiansToLength=u,t.lengthToRadians=h,t.lengthToDegrees=function(e,t){return p(h(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=p,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,i){if(void 0===t&&(t="kilometers"),void 0===i&&(i="kilometers"),!(e>=0))throw new Error("length must be a positive number");return u(h(e,t),i)},t.convertArea=function(e,i,o){if(void 0===i&&(i="meters"),void 0===o&&(o="kilometers"),!(e>=0))throw new Error("area must be a positive number");var s=t.areaFactors[i];if(!s)throw new Error("invalid original units");var a=t.areaFactors[o];if(!a)throw new Error("invalid final units");return e/s*a},t.isNumber=m,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach((function(e){if(!m(e))throw new Error("bbox must only contain numbers")}))},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}}));Se(js);js.earthRadius,js.factors,js.unitsFactors,js.areaFactors,js.feature,js.geometry,js.point,js.points,js.polygon,js.polygons,js.lineString,js.lineStrings,js.featureCollection,js.multiLineString,js.multiPoint,js.multiPolygon,js.geometryCollection,js.round,js.radiansToLength,js.lengthToRadians,js.lengthToDegrees,js.bearingToAzimuth,js.radiansToDegrees,js.degreesToRadians,js.convertLength,js.convertArea,js.isNumber,js.isObject,js.validateBBox,js.validateId,js.radians2degrees,js.degrees2radians,js.distanceToDegrees,js.distanceToRadians,js.radiansToDistance,js.bearingToAngle,js.convertDistance;var Zs=ke((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getCoord=function(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if("Feature"===e.type&&null!==e.geometry&&"Point"===e.geometry.type)return e.geometry.coordinates;if("Point"===e.type)return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")},t.getCoords=function(e){if(Array.isArray(e))return e;if("Feature"===e.type){if(null!==e.geometry)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")},t.containsNumber=function e(t){if(t.length>1&&js.isNumber(t[0])&&js.isNumber(t[1]))return!0;if(Array.isArray(t[0])&&t[0].length)return e(t[0]);throw new Error("coordinates must only contain numbers")},t.geojsonType=function(e,t,i){if(!t||!i)throw new Error("type and name required");if(!e||e.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+e.type)},t.featureOf=function(e,t,i){if(!e)throw new Error("No feature passed");if(!i)throw new Error(".featureOf() requires a name");if(!e||"Feature"!==e.type||!e.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!e.geometry||e.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+e.geometry.type)},t.collectionOf=function(e,t,i){if(!e)throw new Error("No featureCollection passed");if(!i)throw new Error(".collectionOf() requires a name");if(!e||"FeatureCollection"!==e.type)throw new Error("Invalid input to "+i+", FeatureCollection required");for(var o=0,s=e.features;o<s.length;o++){var a=s[o];if(!a||"Feature"!==a.type||!a.geometry)throw new Error("Invalid input to "+i+", Feature with geometry required");if(!a.geometry||a.geometry.type!==t)throw new Error("Invalid input to "+i+": must be a "+t+", given "+a.geometry.type)}},t.getGeom=function(e){return"Feature"===e.type?e.geometry:e},t.getType=function(e,t){return"FeatureCollection"===e.type?"FeatureCollection":"GeometryCollection"===e.type?"GeometryCollection":"Feature"===e.type&&null!==e.geometry?e.geometry.type:e.type}}));Se(Zs);Zs.getCoord,Zs.getCoords,Zs.containsNumber,Zs.geojsonType,Zs.featureOf,Zs.collectionOf,Zs.getGeom,Zs.getType;var Hs=Se(ke((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){void 0===i&&(i={});var o=Zs.getCoord(e),s=Zs.getCoord(t),a=js.degreesToRadians(s[1]-o[1]),r=js.degreesToRadians(s[0]-o[0]),n=js.degreesToRadians(o[1]),l=js.degreesToRadians(s[1]),c=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(r/2),2)*Math.cos(n)*Math.cos(l);return js.radiansToLength(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),i.units)}})));function Xs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qs(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ws="controls-source-line",Ks="controls-source-symbol";function Js(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:e}}}function Ys(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{type:"FeatureCollection",features:e.map((function(e,i){return{type:"Feature",properties:{text:t[i]},geometry:{type:"Point",coordinates:e}}}))}}function ea(e){return e<1?"".concat((1e3*e).toFixed()," m"):"".concat(e.toFixed(2)," km")}var ta=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Xs(this,e),this.isMeasuring=!1,this.markers=[],this.coordinates=[],this.labels=[],this.units=t.units||"kilometers",this.font=t.font||["Roboto Medium"],this.fontSize=t.fontSize||12,this.fontHalo=t.fontHalo||1,this.labelFormat=t.labelFormat||ea,this.mainColor=t.mainColor||"#263238",this.secondaryColor=t.secondaryColor||"#fff",this.mapClickListener=this.mapClickListener.bind(this),this.styleLoadListener=this.styleLoadListener.bind(this)}var t,i,o;return t=e,(i=[{key:"insertControls",value:function(){this.container=document.createElement("div"),this.container.classList.add("mapboxgl-ctrl"),this.container.classList.add("mapboxgl-ctrl-group"),this.container.classList.add("mapboxgl-ctrl-ruler"),this.button=document.createElement("button"),this.button.setAttribute("type","button"),this.button.appendChild((new DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg" width="22" height="12" viewBox="0 0 22 12" fill="#505050">\n    <path fill-rule="evenodd" fill="none" d="M-1-6h24v24H-1z"/>\n    <path d="M20 0H2C.9 0 0 .9 0 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zm0 10H2V2h2v4h2V2h2v4h2V2h2v4h2V2h2v4h2V2h2v8z"/>\n</svg>',"image/svg+xml").firstChild),this.container.appendChild(this.button)}},{key:"draw",value:function(){this.map.addSource(Ws,{type:"geojson",data:Js(this.coordinates)}),this.map.addSource(Ks,{type:"geojson",data:Ys(this.coordinates,this.labels)}),this.map.addLayer({id:"controls-layer-line",type:"line",source:Ws,paint:{"line-color":this.mainColor,"line-width":2}}),this.map.addLayer({id:"controls-layer-symbol",type:"symbol",source:Ks,layout:{"text-field":"{text}","text-font":this.font,"text-anchor":"top","text-size":this.fontSize,"text-offset":[0,.8]},paint:{"text-color":this.mainColor,"text-halo-color":this.secondaryColor,"text-halo-width":this.fontHalo}})}},{key:"measuringOn",value:function(){this.isMeasuring=!0,this.markers=[],this.coordinates=[],this.labels=[],this.map.getCanvas().style.cursor="crosshair",this.button.classList.add("-active"),this.draw(),this.map.on("click",this.mapClickListener),this.map.on("style.load",this.styleLoadListener),this.map.fire("ruler.on")}},{key:"measuringOff",value:function(){this.isMeasuring=!1,this.map.getCanvas().style.cursor="",this.button.classList.remove("-active"),this.map.removeLayer("controls-layer-line"),this.map.removeLayer("controls-layer-symbol"),this.map.removeSource(Ws),this.map.removeSource(Ks),this.markers.forEach((function(e){return e.remove()})),this.map.off("click",this.mapClickListener),this.map.off("style.load",this.styleLoadListener),this.map.fire("ruler.off")}},{key:"mapClickListener",value:function(e){var t=this,i=document.createElement("div");i.style.width="12px",i.style.height="12px",i.style.borderRadius="50%",i.style.background=this.secondaryColor,i.style.boxSizing="border-box",i.style.border="2px solid ".concat(this.mainColor);var o=new Ue.Marker({element:i,draggable:!0}).setLngLat(e.lngLat).addTo(this.map);this.coordinates.push([e.lngLat.lng,e.lngLat.lat]),this.labels=this.coordinatesToLabels(),this.map.getSource(Ws).setData(Js(this.coordinates)),this.map.getSource(Ks).setData(Ys(this.coordinates,this.labels)),this.markers.push(o),o.on("drag",(function(){var e=t.markers.indexOf(o),i=o.getLngLat();t.coordinates[e]=[i.lng,i.lat],t.labels=t.coordinatesToLabels(),t.map.getSource(Ws).setData(Js(t.coordinates)),t.map.getSource(Ks).setData(Ys(t.coordinates,t.labels))}))}},{key:"coordinatesToLabels",value:function(){var e=this.coordinates,t=this.units,i=this.labelFormat,o=0;return e.map((function(s,a){return 0===a?i(0):(o+=Hs(e[a-1],e[a],{units:t}),i(o))}))}},{key:"styleLoadListener",value:function(){this.draw()}},{key:"onAdd",value:function(e){var t=this;return this.map=e,this.insertControls(),this.button.addEventListener("click",(function(){t.isMeasuring?t.measuringOff():t.measuringOn()})),this.container}},{key:"onRemove",value:function(){this.isMeasuring&&this.measuringOff(),this.map.off("click",this.mapClickListener),this.container.parentNode.removeChild(this.container),this.map=void 0}}])&&Qs(t.prototype,i),o&&Qs(t,o),e}();function ia(e){const{getMap:t}=V(Pe),i=t();return O(async()=>{i.addControl(new ta({font:["FiraSans-Italic"],units:"meters",mainColor:"#263238",labelFormat:e=>e.toFixed(2)+" m"}),"bottom-right"),i.on("ruler.on",()=>console.log("ruler: on")),i.on("ruler.off",()=>console.log("ruler: off")),document.querySelector(".mapboxgl-ctrl-ruler").setAttribute("title","Mesura distàncies")}),[]}class oa extends ve{constructor(e){super(),be(this,e,ia,null,n,{})}}function sa(e){const{getMap:t}=V(Pe);return t().addControl(new Ue.ScaleControl({maxWidth:100,unit:"metric"}),"bottom-right"),document.querySelector(".mapboxgl-ctrl-scale").setAttribute("title","Escala gràfica"),[]}class aa extends ve{constructor(e){super(),be(this,e,sa,null,n,{})}}function ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function na(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var la=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ra(this,e),this.instant="boolean"!=typeof t.instant||t.instant,this.onRotate=this.onRotate.bind(this)}var t,i,o;return t=e,(i=[{key:"insertControls",value:function(){this.container=document.createElement("div"),this.button=document.createElement("button"),this.button.setAttribute("type","button"),this.container.classList.add("mapboxgl-ctrl"),this.container.classList.add("mapboxgl-ctrl-group"),this.container.classList.add("mapboxgl-ctrl-compass"),this.pointer=(new DOMParser).parseFromString('<svg viewBox="0 0 24 24" width="22" height="22" xmlns="http://www.w3.org/2000/svg">\n    <g fill="none" fill-rule="evenodd">\n        <path d="M0 0h24v24H0z"/>\n        <path fill="#f44336" d="M12 3l4 8H8z"/>\n        <path fill="#9E9E9E" d="M12 21l-4-8h8z"/>\n    </g>\n</svg>',"image/svg+xml").firstChild,this.instant&&this.container.classList.add("-active"),this.container.appendChild(this.button),this.button.appendChild(this.pointer)}},{key:"onAdd",value:function(e){var t=this;return this.map=e,this.insertControls(),this.button.addEventListener("click",(function(){t.map.easeTo({bearing:0,pitch:0})})),this.map.on("rotate",this.onRotate),this.onRotate(),this.container}},{key:"onRemove",value:function(){this.container.parentNode.removeChild(this.container),this.map=void 0}},{key:"onRotate",value:function(){var e=-1*this.map.getBearing();this.instant||(0===e?this.container.classList.remove("-active"):this.container.classList.add("-active")),this.pointer.style.transform="rotate(".concat(e,"deg)")}}])&&na(t.prototype,i),o&&na(t,o),e}();function ca(e){const{getMap:t}=V(Pe);return t().addControl(new la,"bottom-right"),document.querySelector(".mapboxgl-ctrl-compass").setAttribute("title","Torna al Nord"),[]}class ua extends ve{constructor(e){super(),be(this,e,ca,null,n,{})}}var ha=484813681109536e-20,pa=Math.PI/2,ma=.017453292519943295,da=57.29577951308232,fa=Math.PI/4,ya=2*Math.PI,ga=3.14159265359,_a={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},ba={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},va=/[\s_\-\/\(\)]/g;function xa(e,t){if(e[t])return e[t];for(var i,o=Object.keys(e),s=t.toLowerCase().replace(va,""),a=-1;++a<o.length;)if((i=o[a]).toLowerCase().replace(va,"")===s)return e[i]}function La(e){var t,i,o,s={},a=e.split("+").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var i=t.split("=");return i.push(!0),e[i[0].toLowerCase()]=i[1],e}),{}),r={proj:"projName",datum:"datumCode",rf:function(e){s.rf=parseFloat(e)},lat_0:function(e){s.lat0=e*ma},lat_1:function(e){s.lat1=e*ma},lat_2:function(e){s.lat2=e*ma},lat_ts:function(e){s.lat_ts=e*ma},lon_0:function(e){s.long0=e*ma},lon_1:function(e){s.long1=e*ma},lon_2:function(e){s.long2=e*ma},alpha:function(e){s.alpha=parseFloat(e)*ma},lonc:function(e){s.longc=e*ma},x_0:function(e){s.x0=parseFloat(e)},y_0:function(e){s.y0=parseFloat(e)},k_0:function(e){s.k0=parseFloat(e)},k:function(e){s.k0=parseFloat(e)},a:function(e){s.a=parseFloat(e)},b:function(e){s.b=parseFloat(e)},r_a:function(){s.R_A=!0},zone:function(e){s.zone=parseInt(e,10)},south:function(){s.utmSouth=!0},towgs84:function(e){s.datum_params=e.split(",").map((function(e){return parseFloat(e)}))},to_meter:function(e){s.to_meter=parseFloat(e)},units:function(e){s.units=e;var t=xa(ba,e);t&&(s.to_meter=t.to_meter)},from_greenwich:function(e){s.from_greenwich=e*ma},pm:function(e){var t=xa(_a,e);s.from_greenwich=(t||parseFloat(e))*ma},nadgrids:function(e){"@null"===e?s.datumCode="none":s.nadgrids=e},axis:function(e){3===e.length&&-1!=="ewnsud".indexOf(e.substr(0,1))&&-1!=="ewnsud".indexOf(e.substr(1,1))&&-1!=="ewnsud".indexOf(e.substr(2,1))&&(s.axis=e)}};for(t in a)i=a[t],t in r?"function"==typeof(o=r[t])?o(i):s[o]=i:s[t]=i;return"string"==typeof s.datumCode&&"WGS84"!==s.datumCode&&(s.datumCode=s.datumCode.toLowerCase()),s}var Ia=/\s/,wa=/[A-Za-z]/,qa=/[A-Za-z84]/,Fa=/[,\]]/,Ea=/[\d\.E\-\+]/;function Ta(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}function Ca(e,t,i){Array.isArray(t)&&(i.unshift(t),t=null);var o=t?{}:e,s=i.reduce((function(e,t){return za(t,e),e}),o);t&&(e[t]=s)}function za(e,t){if(Array.isArray(e)){var i=e.shift();if("PARAMETER"===i&&(i=e.shift()),1===e.length)return Array.isArray(e[0])?(t[i]={},void za(e[0],t[i])):void(t[i]=e[0]);if(e.length)if("TOWGS84"!==i){if("AXIS"===i)return i in t||(t[i]=[]),void t[i].push(e);var o;switch(Array.isArray(i)||(t[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[i]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&za(e[2],t[i]));case"SPHEROID":case"ELLIPSOID":return t[i]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&za(e[3],t[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void Ca(t,i,e);default:for(o=-1;++o<e.length;)if(!Array.isArray(e[o]))return za(e,t[i]);return Ca(t,i,e)}}else t[i]=e;else t[i]=!0}else t[e]=!0}Ta.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;Ia.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case 1:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},Ta.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(Fa.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},Ta.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=1)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},Ta.prototype.number=function(e){if(!Ea.test(e)){if(Fa.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},Ta.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},Ta.prototype.keyword=function(e){if(qa.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=1)}if(!Fa.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},Ta.prototype.neutral=function(e){if(wa.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(Ea.test(e))return this.word=e,void(this.state=3);if(!Fa.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},Ta.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Aa(e){return.017453292519943295*e}function Pa(e){var t=new Ta(e).output(),i=t.shift(),o=t.shift();t.unshift(["name",o]),t.unshift(["type",i]);var s={};return za(t,s),function(e){if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"==typeof e.PROJECTION?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",i=0,o=e.AXIS.length;i<o;++i){var s=e.AXIS[i][0].toLowerCase();-1!==s.indexOf("north")?t+="n":-1!==s.indexOf("south")?t+="s":-1!==s.indexOf("east")?t+="e":-1!==s.indexOf("west")&&(t+="w")}2===t.length&&(t+="u"),3===t.length&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var a=e.GEOGCS;function r(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(a=e),a&&(a.DATUM?e.datumCode=a.DATUM.name.toLowerCase():e.datumCode=a.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"!==e.datumCode&&"world_geodetic_system_1984"!==e.datumCode||("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(e.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=a.DATUM.SPHEROID.a,e.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(e.datum_params=a.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Aa],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Aa],["x0","false_easting",r],["y0","false_northing",r],["long0","central_meridian",Aa],["lat0","latitude_of_origin",Aa],["lat0","standard_parallel_1",Aa],["lat1","standard_parallel_1",Aa],["lat2","standard_parallel_2",Aa],["azimuth","Azimuth"],["alpha","azimuth",Aa],["srsCode","name"]].forEach((function(t){return i=e,s=(o=t)[0],a=o[1],void(!(s in i)&&a in i&&(i[s]=i[a],3===o.length&&(i[s]=o[2](i[s]))));var i,o,s,a})),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=Aa(e.lat1>0?90:-90),e.lat_ts=e.lat1)}(s),s}function Ba(e){var t=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?Ba[e]=La(arguments[1]):Ba[e]=Pa(arguments[1]):Ba[e]=i}else if(1===arguments.length){if(Array.isArray(e))return e.map((function(e){Array.isArray(e)?Ba.apply(t,e):Ba(e)}));if("string"==typeof e){if(e in Ba)return Ba[e]}else"EPSG"in e?Ba["EPSG:"+e.EPSG]=e:"ESRI"in e?Ba["ESRI:"+e.ESRI]=e:"IAU2000"in e?Ba["IAU2000:"+e.IAU2000]=e:console.log(e);return}}!function(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}(Ba);var Ma=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var Da=["3857","900913","3785","102113"];function Sa(e){if(!function(e){return"string"==typeof e}(e))return e;if(function(e){return e in Ba}(e))return Ba[e];if(function(e){return Ma.some((function(t){return e.indexOf(t)>-1}))}(e)){var t=Pa(e);if(function(e){var t=xa(e,"authority");if(t){var i=xa(t,"epsg");return i&&Da.indexOf(i)>-1}}(t))return Ba["EPSG:3857"];var i=function(e){var t=xa(e,"extension");if(t)return xa(t,"proj4")}(t);return i?La(i):t}return function(e){return"+"===e[0]}(e)?La(e):void 0}function ka(e,t){var i,o;if(e=e||{},!t)return e;for(o in t)void 0!==(i=t[o])&&(e[o]=i);return e}function Ua(e,t,i){var o=e*t;return i/Math.sqrt(1-o*o)}function Ra(e){return e<0?-1:1}function Oa(e){return Math.abs(e)<=ga?e:e-Ra(e)*ya}function Na(e,t,i){var o=e*i,s=.5*e;return o=Math.pow((1-o)/(1+o),s),Math.tan(.5*(pa-t))/o}function $a(e,t){for(var i,o,s=.5*e,a=pa-2*Math.atan(t),r=0;r<=15;r++)if(i=e*Math.sin(a),a+=o=pa-2*Math.atan(t*Math.pow((1-i)/(1+i),s))-a,Math.abs(o)<=1e-10)return a;return-9999}function Va(e){return e}var Ga=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ua(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,i,o=e.x,s=e.y;if(s*da>90&&s*da<-90&&o*da>180&&o*da<-180)return null;if(Math.abs(Math.abs(s)-pa)<=1e-10)return null;if(this.sphere)t=this.x0+this.a*this.k0*Oa(o-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(fa+.5*s));else{var a=Math.sin(s),r=Na(this.e,s,a);t=this.x0+this.a*this.k0*Oa(o-this.long0),i=this.y0-this.a*this.k0*Math.log(r)}return e.x=t,e.y=i,e},inverse:function(e){var t,i,o=e.x-this.x0,s=e.y-this.y0;if(this.sphere)i=pa-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var a=Math.exp(-s/(this.a*this.k0));if(-9999===(i=$a(this.e,a)))return null}return t=Oa(this.long0+o/(this.a*this.k0)),e.x=t,e.y=i,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:Va,inverse:Va,names:["longlat","identity"]}],ja={},Za=[];function Ha(e,t){var i=Za.length;return e.names?(Za[i]=e,e.names.forEach((function(e){ja[e.toLowerCase()]=i})),this):(console.log(t),!0)}var Xa={start:function(){Ga.forEach(Ha)},add:Ha,get:function(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==ja[t]&&Za[ja[t]]?Za[ja[t]]:void 0}},Qa={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},Wa=Qa.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Qa.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var Ka={};function Ja(e,t){if(!(this instanceof Ja))return new Ja(e);t=t||function(e){if(e)throw e};var i=Sa(e);if("object"==typeof i){var o=Ja.projections.get(i.projName);if(o){if(i.datumCode&&"none"!==i.datumCode){var s=xa(Ka,i.datumCode);s&&(i.datum_params=s.towgs84?s.towgs84.split(","):null,i.ellps=s.ellipse,i.datumName=s.datumName?s.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84";var a,r,n,l,c,u,h,p=function(e,t,i,o,s){if(!e){var a=xa(Qa,o);a||(a=Wa),e=a.a,t=a.b,i=a.rf}return i&&!t&&(t=(1-1/i)*e),(0===i||Math.abs(e-t)<1e-10)&&(s=!0,t=e),{a:e,b:t,rf:i,sphere:s}}(i.a,i.b,i.rf,i.ellps,i.sphere),m=(a=p.a,r=p.b,p.rf,n=i.R_A,u=((l=a*a)-(c=r*r))/l,h=0,n?(l=(a*=1-u*(.16666666666666666+u*(.04722222222222222+.022156084656084655*u)))*a,u=0):h=Math.sqrt(u),{es:u,e:h,ep2:(l-c)/c}),d=i.datum||function(e,t,i,o,s,a){var r={};return r.datum_type=void 0===e||"none"===e?5:4,t&&(r.datum_params=t.map(parseFloat),0===r.datum_params[0]&&0===r.datum_params[1]&&0===r.datum_params[2]||(r.datum_type=1),r.datum_params.length>3&&(0===r.datum_params[3]&&0===r.datum_params[4]&&0===r.datum_params[5]&&0===r.datum_params[6]||(r.datum_type=2,r.datum_params[3]*=ha,r.datum_params[4]*=ha,r.datum_params[5]*=ha,r.datum_params[6]=r.datum_params[6]/1e6+1))),r.a=i,r.b=o,r.es=s,r.ep2=a,r}(i.datumCode,i.datum_params,p.a,p.b,m.es,m.ep2);ka(this,i),ka(this,o),this.a=p.a,this.b=p.b,this.rf=p.rf,this.sphere=p.sphere,this.es=m.es,this.e=m.e,this.ep2=m.ep2,this.datum=d,this.init(),t(null,this)}else t(e)}else t(e)}function Ya(e,t,i){var o,s,a,r,n=e.x,l=e.y,c=e.z?e.z:0;if(l<-pa&&l>-1.001*pa)l=-pa;else if(l>pa&&l<1.001*pa)l=pa;else{if(l<-pa)return{x:-1/0,y:-1/0,z:e.z};if(l>pa)return{x:1/0,y:1/0,z:e.z}}return n>Math.PI&&(n-=2*Math.PI),s=Math.sin(l),r=Math.cos(l),a=s*s,{x:((o=i/Math.sqrt(1-t*a))+c)*r*Math.cos(n),y:(o+c)*r*Math.sin(n),z:(o*(1-t)+c)*s}}function er(e,t,i,o){var s,a,r,n,l,c,u,h,p,m,d,f,y,g,_,b=e.x,v=e.y,x=e.z?e.z:0;if(s=Math.sqrt(b*b+v*v),a=Math.sqrt(b*b+v*v+x*x),s/i<1e-12){if(g=0,a/i<1e-12)return pa,_=-o,{x:e.x,y:e.y,z:e.z}}else g=Math.atan2(v,b);r=x/a,h=(n=s/a)*(1-t)*(l=1/Math.sqrt(1-t*(2-t)*n*n)),p=r*l,y=0;do{y++,c=t*(u=i/Math.sqrt(1-t*p*p))/(u+(_=s*h+x*p-u*(1-t*p*p))),f=(d=r*(l=1/Math.sqrt(1-c*(2-c)*n*n)))*h-(m=n*(1-c)*l)*p,h=m,p=d}while(f*f>1e-24&&y<30);return{x:g,y:Math.atan(d/Math.abs(m)),z:_}}function tr(e){return 1===e||2===e}function ir(e,t,i){return function(e,t){return e.datum_type===t.datum_type&&(!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(1===e.datum_type?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:2!==e.datum_type||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]))}(e,t)||5===e.datum_type||5===t.datum_type?i:e.es!==t.es||e.a!==t.a||tr(e.datum_type)||tr(t.datum_type)?(i=Ya(i,e.es,e.a),tr(e.datum_type)&&(i=function(e,t,i){if(1===t)return{x:e.x+i[0],y:e.y+i[1],z:e.z+i[2]};if(2===t){var o=i[0],s=i[1],a=i[2],r=i[3],n=i[4],l=i[5],c=i[6];return{x:c*(e.x-l*e.y+n*e.z)+o,y:c*(l*e.x+e.y-r*e.z)+s,z:c*(-n*e.x+r*e.y+e.z)+a}}}(i,e.datum_type,e.datum_params)),tr(t.datum_type)&&(i=function(e,t,i){if(1===t)return{x:e.x-i[0],y:e.y-i[1],z:e.z-i[2]};if(2===t){var o=i[0],s=i[1],a=i[2],r=i[3],n=i[4],l=i[5],c=i[6],u=(e.x-o)/c,h=(e.y-s)/c,p=(e.z-a)/c;return{x:u+l*h-n*p,y:-l*u+h+r*p,z:n*u-r*h+p}}}(i,t.datum_type,t.datum_params)),er(i,t.es,t.a,t.b)):i}function or(e,t,i){var o,s,a,r=i.x,n=i.y,l=i.z||0,c={};for(a=0;a<3;a++)if(!t||2!==a||void 0!==i.z)switch(0===a?(o=r,s=-1!=="ew".indexOf(e.axis[a])?"x":"y"):1===a?(o=n,s=-1!=="ns".indexOf(e.axis[a])?"y":"x"):(o=l,s="z"),e.axis[a]){case"e":case"w":case"n":case"s":c[s]=o;break;case"u":void 0!==i[s]&&(c.z=o);break;case"d":void 0!==i[s]&&(c.z=-o);break;default:return null}return c}function sr(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function ar(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function rr(e,t,i){var o;if(Array.isArray(i)&&(i=sr(i)),function(e){ar(e.x),ar(e.y)}(i),e.datum&&t.datum&&function(e,t){return(1===e.datum.datum_type||2===e.datum.datum_type)&&"WGS84"!==t.datumCode||(1===t.datum.datum_type||2===t.datum.datum_type)&&"WGS84"!==e.datumCode}(e,t)&&(i=rr(e,o=new Ja("WGS84"),i),e=o),"enu"!==e.axis&&(i=or(e,!1,i)),"longlat"===e.projName)i={x:i.x*ma,y:i.y*ma,z:i.z||0};else if(e.to_meter&&(i={x:i.x*e.to_meter,y:i.y*e.to_meter,z:i.z||0}),!(i=e.inverse(i)))return;return e.from_greenwich&&(i.x+=e.from_greenwich),i=ir(e.datum,t.datum,i),t.from_greenwich&&(i={x:i.x-t.from_greenwich,y:i.y,z:i.z||0}),"longlat"===t.projName?i={x:i.x*da,y:i.y*da,z:i.z||0}:(i=t.forward(i),t.to_meter&&(i={x:i.x/t.to_meter,y:i.y/t.to_meter,z:i.z||0})),"enu"!==t.axis?or(t,!0,i):i}Ka.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},Ka.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},Ka.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},Ka.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},Ka.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},Ka.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},Ka.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},Ka.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},Ka.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},Ka.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},Ka.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},Ka.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},Ka.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},Ka.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},Ka.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},Ka.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},Ka.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},Ja.projections=Xa,Ja.projections.start();var nr=Ja("WGS84");function lr(e,t,i){var o,s,a;return Array.isArray(i)?(o=rr(e,t,i)||{x:NaN,y:NaN},i.length>2?void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name?"number"==typeof o.z?[o.x,o.y,o.z].concat(i.splice(3)):[o.x,o.y,i[2]].concat(i.splice(3)):[o.x,o.y].concat(i.splice(2)):[o.x,o.y]):(s=rr(e,t,i),2===(a=Object.keys(i)).length||a.forEach((function(o){if(void 0!==e.name&&"geocent"===e.name||void 0!==t.name&&"geocent"===t.name){if("x"===o||"y"===o||"z"===o)return}else if("x"===o||"y"===o)return;s[o]=i[o]})),s)}function cr(e){return e instanceof Ja?e:e.oProj?e.oProj:Ja(e)}function ur(e,t,i){e=cr(e);var o,s=!1;return void 0===t?(t=e,e=nr,s=!0):(void 0!==t.x||Array.isArray(t))&&(i=t,t=e,e=nr,s=!0),t=cr(t),i?lr(e,t,i):(o={forward:function(i){return lr(e,t,i)},inverse:function(i){return lr(t,e,i)}},s&&(o.oProj=t),o)}var hr=65,pr=73,mr=79,dr={forward:fr,inverse:function(e){var t=br(Lr(e.toUpperCase()));if(t.lat&&t.lon)return[t.lon,t.lat,t.lon,t.lat];return[t.left,t.bottom,t.right,t.top]},toPoint:yr};function fr(e,t){return t=t||5,function(e,t){var i="00000"+e.easting,o="00000"+e.northing;return e.zoneNumber+e.zoneLetter+(m=e.easting,d=e.northing,f=e.zoneNumber,y=xr(f),g=Math.floor(m/1e5),_=Math.floor(d/1e5)%20,s=g,a=_,r=y,n=r-1,l="AJSAJS".charCodeAt(n),c="AFAFAF".charCodeAt(n),u=l+s-1,h=c+a,p=!1,u>90&&(u=u-90+hr-1,p=!0),(u===pr||l<pr&&u>pr||(u>pr||l<pr)&&p)&&u++,(u===mr||l<mr&&u>mr||(u>mr||l<mr)&&p)&&++u===pr&&u++,u>90&&(u=u-90+hr-1),h>86?(h=h-86+hr-1,p=!0):p=!1,(h===pr||c<pr&&h>pr||(h>pr||c<pr)&&p)&&h++,(h===mr||c<mr&&h>mr||(h>mr||c<mr)&&p)&&++h===pr&&h++,h>86&&(h=h-86+hr-1),String.fromCharCode(u)+String.fromCharCode(h))+i.substr(i.length-5,t)+o.substr(o.length-5,t);var s,a,r,n,l,c,u,h,p;var m,d,f,y,g,_}(function(e){var t,i,o,s,a,r,n,l=e.lat,c=e.lon,u=6378137,h=gr(l),p=gr(c);n=Math.floor((c+180)/6)+1,180===c&&(n=60);l>=56&&l<64&&c>=3&&c<12&&(n=32);l>=72&&l<84&&(c>=0&&c<9?n=31:c>=9&&c<21?n=33:c>=21&&c<33?n=35:c>=33&&c<42&&(n=37));r=gr(6*(n-1)-180+3),.006739496752268451,t=u/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),i=Math.tan(h)*Math.tan(h),o=.006739496752268451*Math.cos(h)*Math.cos(h),s=Math.cos(h)*(p-r),a=u*(.9983242984503243*h-.002514607064228144*Math.sin(2*h)+2639046602129982e-21*Math.sin(4*h)-3.418046101696858e-9*Math.sin(6*h));var m=.9996*t*(s+(1-i+o)*s*s*s/6+(5-18*i+i*i+72*o-.39089081163157013)*s*s*s*s*s/120)+5e5,d=.9996*(a+t*Math.tan(h)*(s*s/2+(5-i+9*o+4*o*o)*s*s*s*s/24+(61-58*i+i*i+600*o-2.2240339282485886)*s*s*s*s*s*s/720));l<0&&(d+=1e7);return{northing:Math.round(d),easting:Math.round(m),zoneNumber:n,zoneLetter:vr(l)}}({lat:e[1],lon:e[0]}),t)}function yr(e){var t=br(Lr(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function gr(e){return e*(Math.PI/180)}function _r(e){return e/Math.PI*180}function br(e){var t=e.northing,i=e.easting,o=e.zoneLetter,s=e.zoneNumber;if(s<0||s>60)return null;var a,r,n,l,c,u,h,p,m=6378137,d=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),f=i-5e5,y=t;o<"N"&&(y-=1e7),u=6*(s-1)-180+3,p=(h=y/.9996/6367449.145945056)+(3*d/2-27*d*d*d/32)*Math.sin(2*h)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*h)+151*d*d*d/96*Math.sin(6*h),a=m/Math.sqrt(1-.00669438*Math.sin(p)*Math.sin(p)),r=Math.tan(p)*Math.tan(p),n=.006739496752268451*Math.cos(p)*Math.cos(p),l=.99330562*m/Math.pow(1-.00669438*Math.sin(p)*Math.sin(p),1.5),c=f/(.9996*a);var g=p-a*Math.tan(p)/l*(c*c/2-(5+3*r+10*n-4*n*n-.06065547077041606)*c*c*c*c/24+(61+90*r+298*n+45*r*r-1.6983531815716497-3*n*n)*c*c*c*c*c*c/720);g=_r(g);var _,b=(c-(1+2*r+n)*c*c*c/6+(5-2*n+28*r-3*n*n+.05391597401814761+24*r*r)*c*c*c*c*c/120)/Math.cos(p);if(b=u+_r(b),e.accuracy){var v=br({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});_={top:v.lat,right:v.lon,bottom:g,left:b}}else _={lat:g,lon:b};return _}function vr(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function xr(e){var t=e%6;return 0===t&&(t=6),t}function Lr(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,i=e.length,o=null,s="",a=0;!/[A-Z]/.test(t=e.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+e;s+=t,a++}var r=parseInt(s,10);if(0===a||a+3>i)throw"MGRSPoint bad conversion from: "+e;var n=e.charAt(a++);if(n<="A"||"B"===n||"Y"===n||n>="Z"||"I"===n||"O"===n)throw"MGRSPoint zone letter "+n+" not handled: "+e;o=e.substring(a,a+=2);for(var l=xr(r),c=function(e,t){var i="AJSAJS".charCodeAt(t-1),o=1e5,s=!1;for(;i!==e.charCodeAt(0);){if(++i===pr&&i++,i===mr&&i++,i>90){if(s)throw"Bad character: "+e;i=hr,s=!0}o+=1e5}return o}(o.charAt(0),l),u=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;var i="AFAFAF".charCodeAt(t-1),o=0,s=!1;for(;i!==e.charCodeAt(0);){if(++i===pr&&i++,i===mr&&i++,i>86){if(s)throw"Bad character: "+e;i=hr,s=!0}o+=1e5}return o}(o.charAt(1),l);u<Ir(n);)u+=2e6;var h=i-a;if(h%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var p,m,d,f=h/2,y=0,g=0;return f>0&&(p=1e5/Math.pow(10,f),m=e.substring(a,a+f),y=parseFloat(m)*p,d=e.substring(a+f),g=parseFloat(d)*p),{easting:y+c,northing:g+u,zoneLetter:n,zoneNumber:r,accuracy:p}}function Ir(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function wr(e,t,i){if(!(this instanceof wr))return new wr(e,t,i);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var o=e.split(",");this.x=parseFloat(o[0],10),this.y=parseFloat(o[1],10),this.z=parseFloat(o[2],10)||0}else this.x=e,this.y=t,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}wr.fromMGRS=function(e){return new wr(yr(e))},wr.prototype.toMGRS=function(e){return fr([this.x,this.y],e)};var qr=.01068115234375;function Fr(e){var t=[];t[0]=1-e*(.25+e*(.046875+e*(.01953125+e*qr))),t[1]=e*(.75-e*(.046875+e*(.01953125+e*qr)));var i=e*e;return t[2]=i*(.46875-e*(.013020833333333334+.007120768229166667*e)),i*=e,t[3]=i*(.3645833333333333-.005696614583333333*e),t[4]=i*e*.3076171875,t}function Er(e,t,i,o){return i*=t,t*=t,o[0]*e-i*(o[1]+t*(o[2]+t*(o[3]+t*o[4])))}function Tr(e,t,i){for(var o=1/(1-t),s=e,a=20;a;--a){var r=Math.sin(s),n=1-t*r*r;if(s-=n=(Er(s,r,Math.cos(s),i)-e)*(n*Math.sqrt(n))*o,Math.abs(n)<1e-10)return s}return s}var Cr={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Fr(this.es),this.ml0=Er(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,i,o,s=e.x,a=e.y,r=Oa(s-this.long0),n=Math.sin(a),l=Math.cos(a);if(this.es){var c=l*r,u=Math.pow(c,2),h=this.ep2*Math.pow(l,2),p=Math.pow(h,2),m=Math.abs(l)>1e-10?Math.tan(a):0,d=Math.pow(m,2),f=Math.pow(d,2);t=1-this.es*Math.pow(n,2),c/=Math.sqrt(t);var y=Er(a,n,l,this.en);i=this.a*(this.k0*c*(1+u/6*(1-d+h+u/20*(5-18*d+f+14*h-58*d*h+u/42*(61+179*f-f*d-479*d)))))+this.x0,o=this.a*(this.k0*(y-this.ml0+n*r*c/2*(1+u/12*(5-d+9*h+4*p+u/30*(61+f-58*d+270*h-330*d*h+u/56*(1385+543*f-f*d-3111*d))))))+this.y0}else{var g=l*Math.sin(r);if(Math.abs(Math.abs(g)-1)<1e-10)return 93;if(i=.5*this.a*this.k0*Math.log((1+g)/(1-g))+this.x0,o=l*Math.cos(r)/Math.sqrt(1-Math.pow(g,2)),(g=Math.abs(o))>=1){if(g-1>1e-10)return 93;o=0}else o=Math.acos(o);a<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return e.x=i,e.y=o,e},inverse:function(e){var t,i,o,s,a=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);if(this.es)if(i=Tr(t=this.ml0+r/this.k0,this.es,this.en),Math.abs(i)<pa){var n=Math.sin(i),l=Math.cos(i),c=Math.abs(l)>1e-10?Math.tan(i):0,u=this.ep2*Math.pow(l,2),h=Math.pow(u,2),p=Math.pow(c,2),m=Math.pow(p,2);t=1-this.es*Math.pow(n,2);var d=a*Math.sqrt(t)/this.k0,f=Math.pow(d,2);o=i-(t*=c)*f/(1-this.es)*.5*(1-f/12*(5+3*p-9*u*p+u-4*h-f/30*(61+90*p-252*u*p+45*m+46*u-f/56*(1385+3633*p+4095*m+1574*m*p)))),s=Oa(this.long0+d*(1-f/6*(1+2*p+u-f/20*(5+28*p+24*m+8*u*p+6*u-f/42*(61+662*p+1320*m+720*m*p))))/l)}else o=pa*Ra(r),s=0;else{var y=Math.exp(a/this.k0),g=.5*(y-1/y),_=this.lat0+r/this.k0,b=Math.cos(_);t=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(g,2))),o=Math.asin(t),r<0&&(o=-o),s=0===g&&0===b?0:Oa(Math.atan2(g,b)+this.long0)}return e.x=s,e.y=o,e},names:["Transverse_Mercator","Transverse Mercator","tmerc"]};function zr(e){var t=Math.exp(e);return t=(t-1/t)/2}function Ar(e,t){e=Math.abs(e),t=Math.abs(t);var i=Math.max(e,t),o=Math.min(e,t)/(i||1);return i*Math.sqrt(1+Math.pow(o,2))}function Pr(e){var t=Math.abs(e);return t=function(e){var t=1+e,i=t-1;return 0===i?e:e*Math.log(t)/i}(t*(1+t/(Ar(1,t)+1))),e<0?-t:t}function Br(e,t){for(var i,o=2*Math.cos(2*t),s=e.length-1,a=e[s],r=0;--s>=0;)i=o*a-r+e[s],r=a,a=i;return t+i*Math.sin(2*t)}function Mr(e,t,i){for(var o,s,a=Math.sin(t),r=Math.cos(t),n=zr(i),l=function(e){var t=Math.exp(e);return t=(t+1/t)/2}(i),c=2*r*l,u=-2*a*n,h=e.length-1,p=e[h],m=0,d=0,f=0;--h>=0;)o=d,s=m,p=c*(d=p)-o-u*(m=f)+e[h],f=u*d-s+c*m;return[(c=a*l)*p-(u=r*n)*f,c*f+u*p]}var Dr={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),i=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),i*=t,this.cgb[1]=i*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),i*=t,this.cgb[2]=i*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=i*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),i*=t,this.cgb[3]=i*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=i*(1237/630+t*(t*(-24832/14175)-2.4)),i*=t,this.cgb[4]=i*(4174/315+t*(-144838/6237)),this.cbg[4]=i*(-734/315+t*(109598/31185)),i*=t,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=i*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=i*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),i*=t,this.utg[2]=i*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=i*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),i*=t,this.utg[3]=i*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=i*(49561/161280+t*(-179/168+t*(6601661/7257600))),i*=t,this.utg[4]=i*(-4583/161280+t*(108847/3991680)),this.gtu[4]=i*(34729/80640+t*(-3418889/1995840)),i*=t,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var o=Br(this.cbg,this.lat0);this.Zb=-this.Qn*(o+function(e,t){for(var i,o=2*Math.cos(t),s=e.length-1,a=e[s],r=0;--s>=0;)i=o*a-r+e[s],r=a,a=i;return Math.sin(t)*i}(this.gtu,2*o))},forward:function(e){var t=Oa(e.x-this.long0),i=e.y;i=Br(this.cbg,i);var o=Math.sin(i),s=Math.cos(i),a=Math.sin(t),r=Math.cos(t);i=Math.atan2(o,r*s),t=Math.atan2(a*s,Ar(o,s*r)),t=Pr(Math.tan(t));var n,l,c=Mr(this.gtu,2*i,2*t);return i+=c[0],t+=c[1],Math.abs(t)<=2.623395162778?(n=this.a*(this.Qn*t)+this.x0,l=this.a*(this.Qn*i+this.Zb)+this.y0):(n=1/0,l=1/0),e.x=n,e.y=l,e},inverse:function(e){var t,i,o=(e.x-this.x0)*(1/this.a),s=(e.y-this.y0)*(1/this.a);if(s=(s-this.Zb)/this.Qn,o/=this.Qn,Math.abs(o)<=2.623395162778){var a=Mr(this.utg,2*s,2*o);s+=a[0],o+=a[1],o=Math.atan(zr(o));var r=Math.sin(s),n=Math.cos(s),l=Math.sin(o),c=Math.cos(o);s=Math.atan2(r*c,Ar(l,c*n)),t=Oa((o=Math.atan2(l,c*n))+this.long0),i=Br(this.cgb,s)}else t=1/0,i=1/0;return e.x=t,e.y=i,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]};var Sr={init:function(){var e=function(e,t){if(void 0===e){if((e=Math.floor(30*(Oa(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*ma,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Dr.init.apply(this),this.forward=Dr.forward,this.inverse=Dr.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function kr(e,t){return Math.pow((1-e)/(1+e),t)}var Ur={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+fa)/(Math.pow(Math.tan(.5*this.lat0+fa),this.C)*kr(this.e*e,this.ratexp))},forward:function(e){var t=e.x,i=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+fa),this.C)*kr(this.e*Math.sin(i),this.ratexp))-pa,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,i=e.y,o=Math.pow(Math.tan(.5*i+fa)/this.K,1/this.C),s=20;s>0&&(i=2*Math.atan(o*kr(this.e*Math.sin(e.y),-.5*this.e))-pa,!(Math.abs(i-e.y)<1e-14));--s)e.y=i;return s?(e.x=t,e.y=i,e):null},names:["gauss"]};var Rr={init:function(){Ur.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,i,o,s;return e.x=Oa(e.x-this.long0),Ur.forward.apply(this,[e]),t=Math.sin(e.y),i=Math.cos(e.y),o=Math.cos(e.x),s=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*i*o),e.x=s*i*Math.sin(e.x),e.y=s*(this.cosc0*t-this.sinc0*i*o),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,i,o,s,a;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,a=Math.sqrt(e.x*e.x+e.y*e.y)){var r=2*Math.atan2(a,this.R2);t=Math.sin(r),i=Math.cos(r),s=Math.asin(i*this.sinc0+e.y*t*this.cosc0/a),o=Math.atan2(e.x*t,a*this.cosc0*i-e.y*this.sinc0*t)}else s=this.phic0,o=0;return e.x=o,e.y=s,Ur.inverse.apply(this,[e]),e.x=Oa(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var Or={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*(1+Ra(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=1e-10&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=1e-10&&(this.k0=.5*this.cons*Ua(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Na(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ua(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-pa,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,i,o,s,a,r,n=e.x,l=e.y,c=Math.sin(l),u=Math.cos(l),h=Oa(n-this.long0);return Math.abs(Math.abs(n-this.long0)-Math.PI)<=1e-10&&Math.abs(l+this.lat0)<=1e-10?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*c+this.coslat0*u*Math.cos(h)),e.x=this.a*t*u*Math.sin(h)+this.x0,e.y=this.a*t*(this.coslat0*c-this.sinlat0*u*Math.cos(h))+this.y0,e):(i=2*Math.atan(this.ssfn_(l,c,this.e))-pa,s=Math.cos(i),o=Math.sin(i),Math.abs(this.coslat0)<=1e-10?(a=Na(this.e,l*this.con,this.con*c),r=2*this.a*this.k0*a/this.cons,e.x=this.x0+r*Math.sin(n-this.long0),e.y=this.y0-this.con*r*Math.cos(n-this.long0),e):(Math.abs(this.sinlat0)<1e-10?(t=2*this.a*this.k0/(1+s*Math.cos(h)),e.y=t*o):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*s*Math.cos(h))),e.y=t*(this.cosX0*o-this.sinX0*s*Math.cos(h))+this.y0),e.x=t*s*Math.sin(h)+this.x0,e))},inverse:function(e){var t,i,o,s,a;e.x-=this.x0,e.y-=this.y0;var r=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var n=2*Math.atan(r/(2*this.a*this.k0));return t=this.long0,i=this.lat0,r<=1e-10?(e.x=t,e.y=i,e):(i=Math.asin(Math.cos(n)*this.sinlat0+e.y*Math.sin(n)*this.coslat0/r),t=Math.abs(this.coslat0)<1e-10?this.lat0>0?Oa(this.long0+Math.atan2(e.x,-1*e.y)):Oa(this.long0+Math.atan2(e.x,e.y)):Oa(this.long0+Math.atan2(e.x*Math.sin(n),r*this.coslat0*Math.cos(n)-e.y*this.sinlat0*Math.sin(n))),e.x=t,e.y=i,e)}if(Math.abs(this.coslat0)<=1e-10){if(r<=1e-10)return i=this.lat0,t=this.long0,e.x=t,e.y=i,e;e.x*=this.con,e.y*=this.con,o=r*this.cons/(2*this.a*this.k0),i=this.con*$a(this.e,o),t=this.con*Oa(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else s=2*Math.atan(r*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,r<=1e-10?a=this.X0:(a=Math.asin(Math.cos(s)*this.sinX0+e.y*Math.sin(s)*this.cosX0/r),t=Oa(this.long0+Math.atan2(e.x*Math.sin(s),r*this.cosX0*Math.cos(s)-e.y*this.sinX0*Math.sin(s)))),i=-1*$a(this.e,Math.tan(.5*(pa+a)));return e.x=t,e.y=i,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(e,t,i){return t*=i,Math.tan(.5*(pa+e))*Math.pow((1-t)/(1+t),.5*i)}};var Nr={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),i=this.a,o=1/this.rf,s=2*o-Math.pow(o,2),a=this.e=Math.sqrt(s);this.R=this.k0*i*Math.sqrt(1-s)/(1-s*Math.pow(t,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var r=Math.log(Math.tan(Math.PI/4+this.b0/2)),n=Math.log(Math.tan(Math.PI/4+e/2)),l=Math.log((1+a*t)/(1-a*t));this.K=r-this.alpha*n+this.alpha*a/2*l},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),o=-this.alpha*(t+i)+this.K,s=2*(Math.atan(Math.exp(o))-Math.PI/4),a=this.alpha*(e.x-this.lambda0),r=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(a))),n=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(a));return e.y=this.R/2*Math.log((1+Math.sin(n))/(1-Math.sin(n)))+this.y0,e.x=this.R*r+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,i=e.y-this.y0,o=t/this.R,s=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(o)),r=Math.atan(Math.sin(o)/(Math.cos(this.b0)*Math.cos(o)-Math.sin(this.b0)*Math.tan(s))),n=this.lambda0+r/this.alpha,l=0,c=a,u=-1e3,h=0;Math.abs(c-u)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=n,e.y=c,e},names:["somerc"]};var $r={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=Math.sin(this.lat0),t=Math.cos(this.lat0),i=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var o,s,a=Na(this.e,this.lat0,e),r=this.bl/t*Math.sqrt((1-this.es)/(1-i*i));if(r*r<1&&(r=1),isNaN(this.longc)){var n=Na(this.e,this.lat1,Math.sin(this.lat1)),l=Na(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(r+Math.sqrt(r*r-1))*Math.pow(a,this.bl):this.el=(r-Math.sqrt(r*r-1))*Math.pow(a,this.bl);var c=Math.pow(n,this.bl),u=Math.pow(l,this.bl);s=.5*((o=this.el/c)-1/o);var h=(this.el*this.el-u*c)/(this.el*this.el+u*c),p=(u-c)/(u+c),m=Oa(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(h*Math.tan(.5*this.bl*m)/p)/this.bl,this.long0=Oa(this.long0);var d=Oa(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*d)/s),this.alpha=Math.asin(r*Math.sin(this.gamma0))}else o=this.lat0>=0?r+Math.sqrt(r*r-1):r-Math.sqrt(r*r-1),this.el=o*Math.pow(a,this.bl),s=.5*(o-1/o),this.gamma0=Math.asin(Math.sin(this.alpha)/r),this.long0=this.longc-Math.asin(s*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(r*r-1),Math.cos(this.alpha))},forward:function(e){var t,i,o,s=e.x,a=e.y,r=Oa(s-this.long0);if(Math.abs(Math.abs(a)-pa)<=1e-10)o=a>0?-1:1,i=this.al/this.bl*Math.log(Math.tan(fa+o*this.gamma0*.5)),t=-1*o*pa*this.al/this.bl;else{var n=Na(this.e,a,Math.sin(a)),l=this.el/Math.pow(n,this.bl),c=.5*(l-1/l),u=.5*(l+1/l),h=Math.sin(this.bl*r),p=(c*Math.sin(this.gamma0)-h*Math.cos(this.gamma0))/u;i=Math.abs(Math.abs(p)-1)<=1e-10?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-p)/(1+p))/this.bl,t=Math.abs(Math.cos(this.bl*r))<=1e-10?this.al*this.bl*r:this.al*Math.atan2(c*Math.cos(this.gamma0)+h*Math.sin(this.gamma0),Math.cos(this.bl*r))/this.bl}return this.no_rot?(e.x=this.x0+t,e.y=this.y0+i):(t-=this.uc,e.x=this.x0+i*Math.cos(this.alpha)+t*Math.sin(this.alpha),e.y=this.y0+t*Math.cos(this.alpha)-i*Math.sin(this.alpha)),e},inverse:function(e){var t,i;this.no_rot?(i=e.y-this.y0,t=e.x-this.x0):(i=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha),t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha),t+=this.uc);var o=Math.exp(-1*this.bl*i/this.al),s=.5*(o-1/o),a=.5*(o+1/o),r=Math.sin(this.bl*t/this.al),n=(r*Math.cos(this.gamma0)+s*Math.sin(this.gamma0))/a,l=Math.pow(this.el/Math.sqrt((1+n)/(1-n)),1/this.bl);return Math.abs(n-1)<1e-10?(e.x=this.long0,e.y=pa):Math.abs(n+1)<1e-10?(e.x=this.long0,e.y=-1*pa):(e.y=$a(this.e,l),e.x=Oa(this.long0-Math.atan2(s*Math.cos(this.gamma0)-r*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),e},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var Vr={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<1e-10)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),i=Math.cos(this.lat1),o=Ua(this.e,t,i),s=Na(this.e,this.lat1,t),a=Math.sin(this.lat2),r=Math.cos(this.lat2),n=Ua(this.e,a,r),l=Na(this.e,this.lat2,a),c=Na(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>1e-10?this.ns=Math.log(o/n)/Math.log(s/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=o/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,i=e.y;Math.abs(2*Math.abs(i)-Math.PI)<=1e-10&&(i=Ra(i)*(pa-2e-10));var o,s,a=Math.abs(Math.abs(i)-pa);if(a>1e-10)o=Na(this.e,i,Math.sin(i)),s=this.a*this.f0*Math.pow(o,this.ns);else{if((a=i*this.ns)<=0)return null;s=0}var r=this.ns*Oa(t-this.long0);return e.x=this.k0*(s*Math.sin(r))+this.x0,e.y=this.k0*(this.rh-s*Math.cos(r))+this.y0,e},inverse:function(e){var t,i,o,s,a,r=(e.x-this.x0)/this.k0,n=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(r*r+n*n),i=1):(t=-Math.sqrt(r*r+n*n),i=-1);var l=0;if(0!==t&&(l=Math.atan2(i*r,i*n)),0!==t||this.ns>0){if(i=1/this.ns,o=Math.pow(t/(this.a*this.f0),i),-9999===(s=$a(this.e,o)))return null}else s=-pa;return a=Oa(l/this.ns+this.long0),e.x=a,e.y=s,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var Gr={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,i,o,s,a,r,n,l=e.x,c=e.y,u=Oa(l-this.long0);return t=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/t)-this.s45),o=-u*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(o)),a=Math.asin(Math.cos(i)*Math.sin(o)/Math.cos(s)),r=this.n*a,n=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),e.y=n*Math.cos(r)/1,e.x=n*Math.sin(r)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,i,o,s,a,r,n,l=e.x;e.x=e.y,e.y=l,this.czech||(e.y*=-1,e.x*=-1),a=Math.sqrt(e.x*e.x+e.y*e.y),s=Math.atan2(e.y,e.x)/Math.sin(this.s0),o=2*(Math.atan(Math.pow(this.ro0/a,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(o)-Math.sin(this.ad)*Math.cos(o)*Math.cos(s)),i=Math.asin(Math.cos(o)*Math.sin(s)/Math.cos(t)),e.x=this.long0-i/this.alfa,r=t,n=0;var c=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(r))/(1-this.e*Math.sin(r)),this.e/2))-this.s45),Math.abs(r-e.y)<1e-10&&(n=1),r=e.y,c+=1}while(0===n&&c<15);return c>=15?null:e},names:["Krovak","krovak"]};function jr(e,t,i,o,s){return e*s-t*Math.sin(2*s)+i*Math.sin(4*s)-o*Math.sin(6*s)}function Zr(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function Hr(e){return.375*e*(1+.25*e*(1+.46875*e))}function Xr(e){return.05859375*e*e*(1+.75*e)}function Qr(e){return e*e*e*(35/3072)}function Wr(e,t,i){var o=t*i;return e/Math.sqrt(1-o*o)}function Kr(e){return Math.abs(e)<pa?e:e-Ra(e)*Math.PI}function Jr(e,t,i,o,s){var a,r;a=e/t;for(var n=0;n<15;n++)if(a+=r=(e-(t*a-i*Math.sin(2*a)+o*Math.sin(4*a)-s*Math.sin(6*a)))/(t-2*i*Math.cos(2*a)+4*o*Math.cos(4*a)-6*s*Math.cos(6*a)),Math.abs(r)<=1e-10)return a;return NaN}var Yr={init:function(){this.sphere||(this.e0=Zr(this.es),this.e1=Hr(this.es),this.e2=Xr(this.es),this.e3=Qr(this.es),this.ml0=this.a*jr(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,i,o=e.x,s=e.y;if(o=Oa(o-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(s)*Math.sin(o)),i=this.a*(Math.atan2(Math.tan(s),Math.cos(o))-this.lat0);else{var a=Math.sin(s),r=Math.cos(s),n=Wr(this.a,this.e,a),l=Math.tan(s)*Math.tan(s),c=o*Math.cos(s),u=c*c,h=this.es*r*r/(1-this.es);t=n*c*(1-u*l*(1/6-(8-l+8*h)*u/120)),i=this.a*jr(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+n*a/r*u*(.5+(5-l+6*h)*u/24)}return e.x=t+this.x0,e.y=i+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,i,o=e.x/this.a,s=e.y/this.a;if(this.sphere){var a=s+this.lat0;t=Math.asin(Math.sin(a)*Math.cos(o)),i=Math.atan2(Math.tan(o),Math.cos(a))}else{var r=Jr(this.ml0/this.a+s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(r)-pa)<=1e-10)return e.x=this.long0,e.y=pa,s<0&&(e.y*=-1),e;var n=Wr(this.a,this.e,Math.sin(r)),l=n*n*n/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(r),2),u=o*this.a/n,h=u*u;t=r-n*Math.tan(r)/l*u*u*(.5-(1+3*c)*u*u/24),i=u*(1-h*(c/3+(1+3*c)*c*h/15))/Math.cos(r)}return e.x=Oa(i+this.long0),e.y=Kr(t),e},names:["Cassini","Cassini_Soldner","cass"]};function en(e,t){var i;return e>1e-7?(1-e*e)*(t/(1-(i=e*t)*i)-.5/e*Math.log((1-i)/(1+i))):2*t}var tn={init:function(){var e,t=Math.abs(this.lat0);if(Math.abs(t-pa)<1e-10?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<1e-10?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=en(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(e){var t,i=[];return i[0]=.3333333333333333*e,t=e*e,i[0]+=.17222222222222222*t,i[1]=.06388888888888888*t,t*=e,i[0]+=.10257936507936508*t,i[1]+=.0664021164021164*t,i[2]=.016415012942191543*t,i}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=en(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,i,o,s,a,r,n,l,c,u,h=e.x,p=e.y;if(h=Oa(h-this.long0),this.sphere){if(a=Math.sin(p),u=Math.cos(p),o=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+u*o:1+this.sinph0*a+this.cosph0*u*o)<=1e-10)return null;t=(i=Math.sqrt(2/i))*u*Math.sin(h),i*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*u*o}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(o=-o),Math.abs(p+this.lat0)<1e-10)return null;i=fa-.5*p,t=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(h),i*=o}}else{switch(n=0,l=0,c=0,o=Math.cos(h),s=Math.sin(h),a=Math.sin(p),r=en(this.e,a),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(n=r/this.qp,l=Math.sqrt(1-n*n)),this.mode){case this.OBLIQ:c=1+this.sinb1*n+this.cosb1*l*o;break;case this.EQUIT:c=1+l*o;break;case this.N_POLE:c=pa+p,r=this.qp-r;break;case this.S_POLE:c=p-pa,r=this.qp+r}if(Math.abs(c)<1e-10)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),i=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*n-this.sinb1*l*o):(c=Math.sqrt(2/(1+l*o)))*n*this.ymf,t=this.xmf*c*l*s;break;case this.N_POLE:case this.S_POLE:r>=0?(t=(c=Math.sqrt(r))*s,i=o*(this.mode===this.S_POLE?c:-c)):t=i=0}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,i,o,s,a,r,n,l,c,u,h=e.x/this.a,p=e.y/this.a;if(this.sphere){var m,d=0,f=0;if((i=.5*(m=Math.sqrt(h*h+p*p)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=Math.sin(i),d=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(m)<=1e-10?0:Math.asin(p*f/m),h*=f,p=d*m;break;case this.OBLIQ:i=Math.abs(m)<=1e-10?this.lat0:Math.asin(d*this.sinph0+p*f*this.cosph0/m),h*=f*this.cosph0,p=(d-Math.sin(i)*this.sinph0)*m;break;case this.N_POLE:p=-p,i=pa-i;break;case this.S_POLE:i-=pa}t=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(h,p):0}else{if(n=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(h/=this.dd,p*=this.dd,(r=Math.sqrt(h*h+p*p))<1e-10)return e.x=this.long0,e.y=this.lat0,e;s=2*Math.asin(.5*r/this.rq),o=Math.cos(s),h*=s=Math.sin(s),this.mode===this.OBLIQ?(n=o*this.sinb1+p*s*this.cosb1/r,a=this.qp*n,p=r*this.cosb1*o-p*this.sinb1*s):(n=p*s/r,a=this.qp*n,p=r*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(a=h*h+p*p))return e.x=this.long0,e.y=this.lat0,e;n=1-a/this.qp,this.mode===this.S_POLE&&(n=-n)}t=Math.atan2(h,p),l=Math.asin(n),c=this.apa,u=l+l,i=l+c[0]*Math.sin(u)+c[1]*Math.sin(u+u)+c[2]*Math.sin(u+u+u)}return e.x=Oa(this.long0+t),e.y=i,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function on(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}var sn={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ua(this.e3,this.sin_po,this.cos_po),this.qs1=en(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ua(this.e3,this.sin_po,this.cos_po),this.qs2=en(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=en(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>1e-10?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,i=e.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var o=en(this.e3,this.sin_phi,this.cos_phi),s=this.a*Math.sqrt(this.c-this.ns0*o)/this.ns0,a=this.ns0*Oa(t-this.long0),r=s*Math.sin(a)+this.x0,n=this.rh-s*Math.cos(a)+this.y0;return e.x=r,e.y=n,e},inverse:function(e){var t,i,o,s,a,r;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),o=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),o=-1),s=0,0!==t&&(s=Math.atan2(o*e.x,o*e.y)),o=t*this.ns0/this.a,this.sphere?r=Math.asin((this.c-o*o)/(2*this.ns0)):(i=(this.c-o*o)/this.ns0,r=this.phi1z(this.e3,i)),a=Oa(s/this.ns0+this.long0),e.x=a,e.y=r,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var i,o,s,a,r=on(.5*t);if(e<1e-10)return r;for(var n=e*e,l=1;l<=25;l++)if(r+=a=.5*(s=1-(o=e*(i=Math.sin(r)))*o)*s/Math.cos(r)*(t/(1-n)-i/s+.5/e*Math.log((1-o)/(1+o))),Math.abs(a)<=1e-7)return r;return null}};var an={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,i,o,s,a,r,n,l=e.x,c=e.y;return o=Oa(l-this.long0),t=Math.sin(c),i=Math.cos(c),s=Math.cos(o),1,(a=this.sin_p14*t+this.cos_p14*i*s)>0||Math.abs(a)<=1e-10?(r=this.x0+1*this.a*i*Math.sin(o)/a,n=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*i*s)/a):(r=this.x0+this.infinity_dist*i*Math.sin(o),n=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*i*s)),e.x=r,e.y=n,e},inverse:function(e){var t,i,o,s,a,r;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(s=Math.atan2(t,this.rc),i=Math.sin(s),r=on((o=Math.cos(s))*this.sin_p14+e.y*i*this.cos_p14/t),a=Math.atan2(e.x*i,t*this.cos_p14*o-e.y*this.sin_p14*i),a=Oa(this.long0+a)):(r=this.phic0,a=0),e.x=a,e.y=r,e},names:["gnom"]};var rn={init:function(){this.sphere||(this.k0=Ua(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,i,o=e.x,s=e.y,a=Oa(o-this.long0);if(this.sphere)t=this.x0+this.a*a*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(s)/Math.cos(this.lat_ts);else{var r=en(this.e,Math.sin(s));t=this.x0+this.a*this.k0*a,i=this.y0+this.a*r*.5/this.k0}return e.x=t,e.y=i,e},inverse:function(e){var t,i;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=Oa(this.long0+e.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(i=function(e,t){var i=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-i)<1e-6)return t<0?-1*pa:pa;for(var o,s,a,r,n=Math.asin(.5*t),l=0;l<30;l++)if(s=Math.sin(n),a=Math.cos(n),r=e*s,n+=o=Math.pow(1-r*r,2)/(2*a)*(t/(1-e*e)-s/(1-r*r)+.5/e*Math.log((1-r)/(1+r))),Math.abs(o)<=1e-10)return n;return NaN}(this.e,2*e.y*this.k0/this.a),t=Oa(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=i,e},names:["cea"]};var nn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,i=e.y,o=Oa(t-this.long0),s=Kr(i-this.lat0);return e.x=this.x0+this.a*o*this.rc,e.y=this.y0+this.a*s,e},inverse:function(e){var t=e.x,i=e.y;return e.x=Oa(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Kr(this.lat0+(i-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var ln={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Zr(this.es),this.e1=Hr(this.es),this.e2=Xr(this.es),this.e3=Qr(this.es),this.ml0=this.a*jr(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,i,o,s=e.x,a=e.y,r=Oa(s-this.long0);if(o=r*Math.sin(a),this.sphere)Math.abs(a)<=1e-10?(t=this.a*r,i=-1*this.a*this.lat0):(t=this.a*Math.sin(o)/Math.tan(a),i=this.a*(Kr(a-this.lat0)+(1-Math.cos(o))/Math.tan(a)));else if(Math.abs(a)<=1e-10)t=this.a*r,i=-1*this.ml0;else{var n=Wr(this.a,this.e,Math.sin(a))/Math.tan(a);t=n*Math.sin(o),i=this.a*jr(this.e0,this.e1,this.e2,this.e3,a)-this.ml0+n*(1-Math.cos(o))}return e.x=t+this.x0,e.y=i+this.y0,e},inverse:function(e){var t,i,o,s,a,r,n,l,c;if(o=e.x-this.x0,s=e.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=1e-10)t=Oa(o/this.a+this.long0),i=0;else{var u;for(r=this.lat0+s/this.a,n=o*o/this.a/this.a+r*r,l=r,a=20;a;--a)if(l+=c=-1*(r*(l*(u=Math.tan(l))+1)-l-.5*(l*l+n)*u)/((l-r)/u-1),Math.abs(c)<=1e-10){i=l;break}t=Oa(this.long0+Math.asin(o*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(s+this.ml0)<=1e-10)i=0,t=Oa(this.long0+o/this.a);else{var h,p,m,d,f;for(r=(this.ml0+s)/this.a,n=o*o/this.a/this.a+r*r,l=r,a=20;a;--a)if(f=this.e*Math.sin(l),h=Math.sqrt(1-f*f)*Math.tan(l),p=this.a*jr(this.e0,this.e1,this.e2,this.e3,l),m=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=c=(r*(h*(d=p/this.a)+1)-d-.5*h*(d*d+n))/(this.es*Math.sin(2*l)*(d*d+n-2*r*d)/(4*h)+(r-d)*(h*m-2/Math.sin(2*l))-m),Math.abs(c)<=1e-10){i=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),t=Oa(this.long0+Math.asin(o*h/this.a)/Math.sin(i))}return e.x=t,e.y=i,e},names:["Polyconic","poly"]};var cn={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,i=e.x,o=e.y-this.lat0,s=i-this.long0,a=o/ha*1e-5,r=s,n=1,l=0;for(t=1;t<=10;t++)n*=a,l+=this.A[t]*n;var c,u=l,h=r,p=1,m=0,d=0,f=0;for(t=1;t<=6;t++)c=m*u+p*h,p=p*u-m*h,m=c,d=d+this.B_re[t]*p-this.B_im[t]*m,f=f+this.B_im[t]*p+this.B_re[t]*m;return e.x=f*this.a+this.x0,e.y=d*this.a+this.y0,e},inverse:function(e){var t,i,o=e.x,s=e.y,a=o-this.x0,r=(s-this.y0)/this.a,n=a/this.a,l=1,c=0,u=0,h=0;for(t=1;t<=6;t++)i=c*r+l*n,l=l*r-c*n,c=i,u=u+this.C_re[t]*l-this.C_im[t]*c,h=h+this.C_im[t]*l+this.C_re[t]*c;for(var p=0;p<this.iterations;p++){var m,d=u,f=h,y=r,g=n;for(t=2;t<=6;t++)m=f*u+d*h,d=d*u-f*h,f=m,y+=(t-1)*(this.B_re[t]*d-this.B_im[t]*f),g+=(t-1)*(this.B_im[t]*d+this.B_re[t]*f);d=1,f=0;var _=this.B_re[1],b=this.B_im[1];for(t=2;t<=6;t++)m=f*u+d*h,d=d*u-f*h,f=m,_+=t*(this.B_re[t]*d-this.B_im[t]*f),b+=t*(this.B_im[t]*d+this.B_re[t]*f);var v=_*_+b*b;u=(y*_+g*b)/v,h=(g*_-y*b)/v}var x=u,L=h,I=1,w=0;for(t=1;t<=9;t++)I*=x,w+=this.D[t]*I;var q=this.lat0+w*ha*1e5,F=this.long0+L;return e.x=F,e.y=q,e},names:["New_Zealand_Map_Grid","nzmg"]};var un={init:function(){},forward:function(e){var t=e.x,i=e.y,o=Oa(t-this.long0),s=this.x0+this.a*o,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return e.x=s,e.y=a,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=Oa(this.long0+e.x/this.a),i=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=i,e},names:["Miller_Cylindrical","mill"]};var hn={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Fr(this.es)},forward:function(e){var t,i,o=e.x,s=e.y;if(o=Oa(o-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(s),r=20;r;--r){var n=(this.m*s+Math.sin(s)-a)/(this.m+Math.cos(s));if(s-=n,Math.abs(n)<1e-10)break}else s=1!==this.n?Math.asin(this.n*Math.sin(s)):s;t=this.a*this.C_x*o*(this.m+Math.cos(s)),i=this.a*this.C_y*s}else{var l=Math.sin(s),c=Math.cos(s);i=this.a*Er(s,l,c,this.en),t=this.a*o*c/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=i,e},inverse:function(e){var t,i,o;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i/=this.C_x*(this.m+Math.cos(t)),this.m?t=on((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=on(Math.sin(t)/this.n)),i=Oa(i+this.long0),t=Kr(t)):(t=Tr(e.y/this.a,this.es,this.en),(o=Math.abs(t))<pa?(o=Math.sin(t),i=Oa(this.long0+e.x*Math.sqrt(1-this.es*o*o)/(this.a*Math.cos(t)))):o-1e-10<pa&&(i=this.long0)),e.x=i,e.y=t,e},names:["Sinusoidal","sinu"]};var pn={init:function(){},forward:function(e){for(var t=e.x,i=e.y,o=Oa(t-this.long0),s=i,a=Math.PI*Math.sin(i);;){var r=-(s+Math.sin(s)-a)/(1+Math.cos(s));if(s+=r,Math.abs(r)<1e-10)break}s/=2,Math.PI/2-Math.abs(i)<1e-10&&(o=0);var n=.900316316158*this.a*o*Math.cos(s)+this.x0,l=1.4142135623731*this.a*Math.sin(s)+this.y0;return e.x=n,e.y=l,e},inverse:function(e){var t,i;e.x-=this.x0,e.y-=this.y0,i=e.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var o=Oa(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));o<-Math.PI&&(o=-Math.PI),o>Math.PI&&(o=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var s=Math.asin(i);return e.x=o,e.y=s,e},names:["Mollweide","moll"]};var mn={init:function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Zr(this.es),this.e1=Hr(this.es),this.e2=Xr(this.es),this.e3=Qr(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ua(this.e,this.sinphi,this.cosphi),this.ml1=jr(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ua(this.e,this.sinphi,this.cosphi),this.ml2=jr(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=jr(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,i=e.x,o=e.y;if(this.sphere)t=this.a*(this.g-o);else{var s=jr(this.e0,this.e1,this.e2,this.e3,o);t=this.a*(this.g-s)}var a=this.ns*Oa(i-this.long0),r=this.x0+t*Math.sin(a),n=this.y0+this.rh-t*Math.cos(a);return e.x=r,e.y=n,e},inverse:function(e){var t,i,o,s;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var a=0;return 0!==i&&(a=Math.atan2(t*e.x,t*e.y)),this.sphere?(s=Oa(this.long0+a/this.ns),o=Kr(this.g-i/this.a),e.x=s,e.y=o,e):(o=Jr(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),s=Oa(this.long0+a/this.ns),e.x=s,e.y=o,e)},names:["Equidistant_Conic","eqdc"]};var dn={init:function(){this.R=this.a},forward:function(e){var t,i,o=e.x,s=e.y,a=Oa(o-this.long0);Math.abs(s)<=1e-10&&(t=this.x0+this.R*a,i=this.y0);var r=on(2*Math.abs(s/Math.PI));(Math.abs(a)<=1e-10||Math.abs(Math.abs(s)-pa)<=1e-10)&&(t=this.x0,i=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*r):this.y0+Math.PI*this.R*-Math.tan(.5*r));var n=.5*Math.abs(Math.PI/a-a/Math.PI),l=n*n,c=Math.sin(r),u=Math.cos(r),h=u/(c+u-1),p=h*h,m=h*(2/c-1),d=m*m,f=Math.PI*this.R*(n*(h-d)+Math.sqrt(l*(h-d)*(h-d)-(d+l)*(p-d)))/(d+l);a<0&&(f=-f),t=this.x0+f;var y=l+h;return f=Math.PI*this.R*(m*y-n*Math.sqrt((d+l)*(l+1)-y*y))/(d+l),i=s>=0?this.y0+f:this.y0-f,e.x=t,e.y=i,e},inverse:function(e){var t,i,o,s,a,r,n,l,c,u,h,p;return e.x-=this.x0,e.y-=this.y0,h=Math.PI*this.R,a=(o=e.x/h)*o+(s=e.y/h)*s,h=3*(s*s/(l=-2*(r=-Math.abs(s)*(1+a))+1+2*s*s+a*a)+(2*(n=r-2*s*s+o*o)*n*n/l/l/l-9*r*n/l/l)/27)/(c=(r-n*n/3/l)/l)/(u=2*Math.sqrt(-c/3)),Math.abs(h)>1&&(h=h>=0?1:-1),p=Math.acos(h)/3,i=e.y>=0?(-u*Math.cos(p+Math.PI/3)-n/3/l)*Math.PI:-(-u*Math.cos(p+Math.PI/3)-n/3/l)*Math.PI,t=Math.abs(o)<1e-10?this.long0:Oa(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(o*o-s*s)+a*a))/2/o),e.x=t,e.y=i,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var fn={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var t,i,o,s,a,r,n,l,c,u,h,p,m,d,f,y,g,_,b,v,x,L,I=e.x,w=e.y,q=Math.sin(e.y),F=Math.cos(e.y),E=Oa(I-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=1e-10?(e.x=this.x0+this.a*(pa-w)*Math.sin(E),e.y=this.y0-this.a*(pa-w)*Math.cos(E),e):Math.abs(this.sin_p12+1)<=1e-10?(e.x=this.x0+this.a*(pa+w)*Math.sin(E),e.y=this.y0+this.a*(pa+w)*Math.cos(E),e):(_=this.sin_p12*q+this.cos_p12*F*Math.cos(E),g=(y=Math.acos(_))?y/Math.sin(y):1,e.x=this.x0+this.a*g*F*Math.sin(E),e.y=this.y0+this.a*g*(this.cos_p12*q-this.sin_p12*F*Math.cos(E)),e):(t=Zr(this.es),i=Hr(this.es),o=Xr(this.es),s=Qr(this.es),Math.abs(this.sin_p12-1)<=1e-10?(a=this.a*jr(t,i,o,s,pa),r=this.a*jr(t,i,o,s,w),e.x=this.x0+(a-r)*Math.sin(E),e.y=this.y0-(a-r)*Math.cos(E),e):Math.abs(this.sin_p12+1)<=1e-10?(a=this.a*jr(t,i,o,s,pa),r=this.a*jr(t,i,o,s,w),e.x=this.x0+(a+r)*Math.sin(E),e.y=this.y0+(a+r)*Math.cos(E),e):(n=q/F,l=Wr(this.a,this.e,this.sin_p12),c=Wr(this.a,this.e,q),u=Math.atan((1-this.es)*n+this.es*l*this.sin_p12/(c*F)),b=0===(h=Math.atan2(Math.sin(E),this.cos_p12*Math.tan(u)-this.sin_p12*Math.cos(E)))?Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.abs(Math.abs(h)-Math.PI)<=1e-10?-Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.asin(Math.sin(E)*Math.cos(u)/Math.sin(h)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),y=l*b*(1-(v=b*b)*(f=(m=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es))*m)*(1-f)/6+(x=v*b)/8*(d=p*m)*(1-2*f)+(L=x*b)/120*(f*(4-7*f)-3*p*p*(1-7*f))-L*b/48*d),e.x=this.x0+y*Math.sin(h),e.y=this.y0+y*Math.cos(h),e))},inverse:function(e){var t,i,o,s,a,r,n,l,c,u,h,p,m,d,f,y,g,_,b,v,x,L,I;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*pa*this.a)return;return i=t/this.a,o=Math.sin(i),s=Math.cos(i),a=this.long0,Math.abs(t)<=1e-10?r=this.lat0:(r=on(s*this.sin_p12+e.y*o*this.cos_p12/t),n=Math.abs(this.lat0)-pa,a=Math.abs(n)<=1e-10?this.lat0>=0?Oa(this.long0+Math.atan2(e.x,-e.y)):Oa(this.long0-Math.atan2(-e.x,e.y)):Oa(this.long0+Math.atan2(e.x*o,t*this.cos_p12*s-e.y*this.sin_p12*o))),e.x=a,e.y=r,e}return l=Zr(this.es),c=Hr(this.es),u=Xr(this.es),h=Qr(this.es),Math.abs(this.sin_p12-1)<=1e-10?(r=Jr(((p=this.a*jr(l,c,u,h,pa))-(t=Math.sqrt(e.x*e.x+e.y*e.y)))/this.a,l,c,u,h),a=Oa(this.long0+Math.atan2(e.x,-1*e.y)),e.x=a,e.y=r,e):Math.abs(this.sin_p12+1)<=1e-10?(p=this.a*jr(l,c,u,h,pa),r=Jr(((t=Math.sqrt(e.x*e.x+e.y*e.y))-p)/this.a,l,c,u,h),a=Oa(this.long0+Math.atan2(e.x,e.y)),e.x=a,e.y=r,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),f=Math.atan2(e.x,e.y),m=Wr(this.a,this.e,this.sin_p12),y=Math.cos(f),_=-(g=this.e*this.cos_p12*y)*g/(1-this.es),b=3*this.es*(1-_)*this.sin_p12*this.cos_p12*y/(1-this.es),L=1-_*(x=(v=t/m)-_*(1+_)*Math.pow(v,3)/6-b*(1+3*_)*Math.pow(v,4)/24)*x/2-v*x*x*x/6,d=Math.asin(this.sin_p12*Math.cos(x)+this.cos_p12*Math.sin(x)*y),a=Oa(this.long0+Math.asin(Math.sin(f)*Math.sin(x)/Math.cos(d))),I=Math.sin(d),r=Math.atan2((I-this.es*L*this.sin_p12)*Math.tan(d),I*(1-this.es)),e.x=a,e.y=r,e)},names:["Azimuthal_Equidistant","aeqd"]};var yn={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,i,o,s,a,r,n,l=e.x,c=e.y;return o=Oa(l-this.long0),t=Math.sin(c),i=Math.cos(c),s=Math.cos(o),1,((a=this.sin_p14*t+this.cos_p14*i*s)>0||Math.abs(a)<=1e-10)&&(r=1*this.a*i*Math.sin(o),n=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*i*s)),e.x=r,e.y=n,e},inverse:function(e){var t,i,o,s,a,r,n;return e.x-=this.x0,e.y-=this.y0,i=on((t=Math.sqrt(e.x*e.x+e.y*e.y))/this.a),o=Math.sin(i),s=Math.cos(i),r=this.long0,Math.abs(t)<=1e-10?(n=this.lat0,e.x=r,e.y=n,e):(n=on(s*this.sin_p14+e.y*o*this.cos_p14/t),a=Math.abs(this.lat0)-pa,Math.abs(a)<=1e-10?(r=this.lat0>=0?Oa(this.long0+Math.atan2(e.x,-e.y)):Oa(this.long0-Math.atan2(-e.x,e.y)),e.x=r,e.y=n,e):(r=Oa(this.long0+Math.atan2(e.x*o,t*this.cos_p14*s-e.y*this.sin_p14*o)),e.x=r,e.y=n,e))},names:["ortho"]},gn=1,_n=2,bn=3,vn=4,xn=5,Ln=6,In=1,wn=2,qn=3,Fn=4;function En(e,t,i,o){var s;return e<1e-10?(o.value=In,s=0):(s=Math.atan2(t,i),Math.abs(s)<=fa?o.value=In:s>fa&&s<=pa+fa?(o.value=wn,s-=pa):s>pa+fa||s<=-(pa+fa)?(o.value=qn,s=s>=0?s-ga:s+ga):(o.value=Fn,s+=pa)),s}function Tn(e,t){var i=e+t;return i<-ga?i+=ya:i>+ga&&(i-=ya),i}var Cn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=pa-fa/2?this.face=xn:this.lat0<=-(pa-fa/2)?this.face=Ln:Math.abs(this.long0)<=fa?this.face=gn:Math.abs(this.long0)<=pa+fa?this.face=this.long0>0?_n:vn:this.face=bn,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,i,o,s,a,r,n={x:0,y:0},l={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,i=e.x,this.face===xn)s=pa-t,i>=fa&&i<=pa+fa?(l.value=In,o=i-pa):i>pa+fa||i<=-(pa+fa)?(l.value=wn,o=i>0?i-ga:i+ga):i>-(pa+fa)&&i<=-fa?(l.value=qn,o=i+pa):(l.value=Fn,o=i);else if(this.face===Ln)s=pa+t,i>=fa&&i<=pa+fa?(l.value=In,o=-i+pa):i<fa&&i>=-fa?(l.value=wn,o=-i):i<-fa&&i>=-(pa+fa)?(l.value=qn,o=-i-pa):(l.value=Fn,o=i>0?-i+ga:-i-ga);else{var c,u,h,p,m,d;this.face===_n?i=Tn(i,+pa):this.face===bn?i=Tn(i,+ga):this.face===vn&&(i=Tn(i,-pa)),p=Math.sin(t),m=Math.cos(t),d=Math.sin(i),c=m*Math.cos(i),u=m*d,h=p,this.face===gn?o=En(s=Math.acos(c),h,u,l):this.face===_n?o=En(s=Math.acos(u),h,-c,l):this.face===bn?o=En(s=Math.acos(-c),h,-u,l):this.face===vn?o=En(s=Math.acos(-u),h,c,l):(s=o=0,l.value=In)}return r=Math.atan(12/ga*(o+Math.acos(Math.sin(o)*Math.cos(fa))-pa)),a=Math.sqrt((1-Math.cos(s))/(Math.cos(r)*Math.cos(r))/(1-Math.cos(Math.atan(1/Math.cos(o))))),l.value===wn?r+=pa:l.value===qn?r+=ga:l.value===Fn&&(r+=1.5*ga),n.x=a*Math.cos(r),n.y=a*Math.sin(r),n.x=n.x*this.a+this.x0,n.y=n.y*this.a+this.y0,e.x=n.x,e.y=n.y,e},inverse:function(e){var t,i,o,s,a,r,n,l,c,u,h,p,m={lam:0,phi:0},d={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?d.value=In:e.y>=0&&e.y>=Math.abs(e.x)?(d.value=wn,t-=pa):e.x<0&&-e.x>=Math.abs(e.y)?(d.value=qn,t=t<0?t+ga:t-ga):(d.value=Fn,t+=pa),c=ga/12*Math.tan(t),a=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),r=Math.atan(a),(n=1-(o=Math.cos(t))*o*(s=Math.tan(i))*s*(1-Math.cos(Math.atan(1/Math.cos(r)))))<-1?n=-1:n>1&&(n=1),this.face===xn)l=Math.acos(n),m.phi=pa-l,d.value===In?m.lam=r+pa:d.value===wn?m.lam=r<0?r+ga:r-ga:d.value===qn?m.lam=r-pa:m.lam=r;else if(this.face===Ln)l=Math.acos(n),m.phi=l-pa,d.value===In?m.lam=-r+pa:d.value===wn?m.lam=-r:d.value===qn?m.lam=-r-pa:m.lam=r<0?-r-ga:-r+ga;else{var f,y,g;c=(f=n)*f,y=(c+=(g=c>=1?0:Math.sqrt(1-c)*Math.sin(r))*g)>=1?0:Math.sqrt(1-c),d.value===wn?(c=y,y=-g,g=c):d.value===qn?(y=-y,g=-g):d.value===Fn&&(c=y,y=g,g=-c),this.face===_n?(c=f,f=-y,y=c):this.face===bn?(f=-f,y=-y):this.face===vn&&(c=f,f=y,y=-c),m.phi=Math.acos(-g)-pa,m.lam=Math.atan2(y,f),this.face===_n?m.lam=Tn(m.lam,-pa):this.face===bn?m.lam=Tn(m.lam,-ga):this.face===vn&&(m.lam=Tn(m.lam,+pa))}return 0!==this.es&&(u=m.phi<0?1:0,h=Math.tan(m.phi),p=this.b/Math.sqrt(h*h+this.one_minus_f_squared),m.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),u&&(m.phi=-m.phi)),m.lam+=this.long0,e.x=m.lam,e.y=m.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},zn=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],An=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Pn=da/5,Bn=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))};var Mn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=Oa(e.x-this.long0),i=Math.abs(e.y),o=Math.floor(i*Pn);o<0?o=0:o>=18&&(o=17);var s={x:Bn(zn[o],i=da*(i-.08726646259971647*o))*t,y:Bn(An[o],i)};return e.y<0&&(s.y=-s.y),s.x=s.x*this.a*.8487+this.x0,s.y=s.y*this.a*1.3523+this.y0,s},inverse:function(e){var t={x:(e.x-this.x0)/(.8487*this.a),y:Math.abs(e.y-this.y0)/(1.3523*this.a)};if(t.y>=1)t.x/=zn[18][0],t.y=e.y<0?-pa:pa;else{var i=Math.floor(18*t.y);for(i<0?i=0:i>=18&&(i=17);;)if(An[i][0]>t.y)--i;else{if(!(An[i+1][0]<=t.y))break;++i}var o=An[i],s=5*(t.y-o[0])/(An[i+1][0]-o[0]);s=function(e,t,i,o){for(var s=t;o;--o){var a=e(s);if(s-=a,Math.abs(a)<i)break}return s}((function(e){return(Bn(o,e)-t.y)/function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])}(o,e)}),s,1e-10,100),t.x/=Bn(zn[i],s),t.y=(5*i+s)*ma,e.y<0&&(t.y=-t.y)}return t.x=Oa(t.x+this.long0),t},names:["Robinson","robin"]};var Dn={init:function(){this.name="geocent"},forward:function(e){return Ya(e,this.es,this.a)},inverse:function(e){return er(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};function Sn(t){let i;return{c(){i=L("div"),E(i,"id","info"),E(i,"class","svelte-1ore1sx")},m(e,t){b(e,i,t)},p:e,i:e,o:e,d(e){e&&v(i)}}}function kn(e){const{getMap:t}=V(Pe),i=t();return O(async()=>{i.on("mousemove",(function(e){const t=e.lngLat.lat,i=e.lngLat.lng;ur.defs([["EPSG:25831","+title=ETRS89_utm (m) +proj=utm +zone=31 +ellps=GRS80 +datum=WGS84 +units=m +no_defs"],["EPSG:4258","+title=ETRS89_lonlat (long/lat) +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs"],["UTM","+proj=utm +ellps=GRS80 +datum=nad83 +units=m +no_defs +zone=31U"]]);var o=ur("EPSG:4258","UTM",[i,t]),s=o[0],a=o[1];document.getElementById("info").innerHTML="UTM-31N (ETRS89)     X:"+s.toFixed(1)+"   Y:"+a.toFixed(1)}))}),[]}ur.defaultDatum="WGS84",ur.Proj=Ja,ur.WGS84=new ur.Proj("WGS84"),ur.Point=wr,ur.toPoint=sr,ur.defs=Ba,ur.transform=rr,ur.mgrs=dr,ur.version="__VERSION__",function(e){e.Proj.projections.add(Cr),e.Proj.projections.add(Dr),e.Proj.projections.add(Sr),e.Proj.projections.add(Rr),e.Proj.projections.add(Or),e.Proj.projections.add(Nr),e.Proj.projections.add($r),e.Proj.projections.add(Vr),e.Proj.projections.add(Gr),e.Proj.projections.add(Yr),e.Proj.projections.add(tn),e.Proj.projections.add(sn),e.Proj.projections.add(an),e.Proj.projections.add(rn),e.Proj.projections.add(nn),e.Proj.projections.add(ln),e.Proj.projections.add(cn),e.Proj.projections.add(un),e.Proj.projections.add(hn),e.Proj.projections.add(pn),e.Proj.projections.add(mn),e.Proj.projections.add(dn),e.Proj.projections.add(fn),e.Proj.projections.add(yn),e.Proj.projections.add(Cn),e.Proj.projections.add(Mn),e.Proj.projections.add(Dn)}(ur);class Un extends ve{constructor(e){super(),be(this,e,kn,Sn,n,{})}}class Rn{constructor(){this._bearing=0,this._pitch=60,this._minpitchzoom=null}onAdd(e){this._map=e;let t=this;return this._btn=document.createElement("button"),this._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-3d",this._btn.id="bt3D",e.getPitch()>=50&&(t._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-2d",e.on("load",(function(){e.getSource("icgc-dem")?e.setTerrain({source:"icgc-dem",exaggeration:1.2}):e.getSource("mapbox-dem")&&e.setTerrain({source:"mapbox-dem",exaggeration:1.5})}))),this._btn.type="button",this._btn["aria-label"]="Vista 3D",this._btn.onclick=function(){if(0===e.getPitch()){let s={pitch:t._pitch,bearing:t._bearing};t._minpitchzoom&&e.getZoom()>t._minpitchzoom&&(s.zoom=t._minpitchzoom);var{longitude:i,latitude:o}=e.getCenter();e.getZoom()<10?e.setTerrain({source:"mapbox-dem",exaggeration:1.5}):i>=0&&i<=6&&o>=38.5&&o<=62.33?e.setTerrain({source:"icgc-dem",exaggeration:1.2}):e.setTerrain({source:"mapbox-dem",exaggeration:1.5}),e.easeTo(s),t._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-2d"}else e.setTerrain(null),e.easeTo({pitch:0,bearing:0}),t._btn.className="mapboxgl-ctrl-icon mapboxgl-ctrl-pitchtoggle-3d"},this._container=document.createElement("div"),this._container.className="mapboxgl-ctrl mapboxgl-ctrl-group",this._container.appendChild(this._btn),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}}function On(e){const{getMap:t}=V(Pe);return t().addControl(new Rn,"bottom-right"),[]}class Nn extends ve{constructor(e){super(),be(this,e,On,null,n,{})}}function $n(t){let i,o,s,a,r,n,l,c,u,h,p,m,d;i=new aa({}),s=new $s({});let f=window.innerWidth>500&&function(e){let t,i;return t=new Un({}),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}();return n=new ua({}),c=new Gs({}),h=new oa({}),m=new Nn({}),{c(){fe(i.$$.fragment),o=w(),fe(s.$$.fragment),a=w(),f&&f.c(),r=w(),fe(n.$$.fragment),l=w(),fe(c.$$.fragment),u=w(),fe(h.$$.fragment),p=w(),fe(m.$$.fragment)},m(e,t){ye(i,e,t),b(e,o,t),ye(s,e,t),b(e,a,t),f&&f.m(e,t),b(e,r,t),ye(n,e,t),b(e,l,t),ye(c,e,t),b(e,u,t),ye(h,e,t),b(e,p,t),ye(m,e,t),d=!0},p:e,i(e){d||(ce(i.$$.fragment,e),ce(s.$$.fragment,e),ce(f),ce(n.$$.fragment,e),ce(c.$$.fragment,e),ce(h.$$.fragment,e),ce(m.$$.fragment,e),d=!0)},o(e){ue(i.$$.fragment,e),ue(s.$$.fragment,e),ue(f),ue(n.$$.fragment,e),ue(c.$$.fragment,e),ue(h.$$.fragment,e),ue(m.$$.fragment,e),d=!1},d(e){ge(i,e),e&&v(o),ge(s,e),e&&v(a),f&&f.d(e),e&&v(r),ge(n,e),e&&v(l),ge(c,e),e&&v(u),ge(h,e),e&&v(p),ge(m,e)}}}function Vn(e){return[]}class Gn extends ve{constructor(e){super(),be(this,e,Vn,$n,n,{})}}function jn(e){const{getMap:t}=V(Pe),i=t();let o=V("overLayers");function s(){o&&(Object.keys(o.sources).forEach((function(e,t){i.getSource(e)||i.addSource(e,o.sources[e])})),o.layers.forEach(e=>{i.getLayer(e.id)||i.addLayer(e,"water-name-lakeline-platja")}))}return i.on("styledata",()=>{setTimeout(()=>{i.isStyleLoaded()&&s()},2e3)}),i.on("load",()=>{s()}),[]}class Zn extends ve{constructor(e){super(),be(this,e,jn,null,n,{})}}function Hn(e,t,i){const o=e.slice();return o[1]=t[i],o}function Xn(e){let t,i,o=e[1]+"";return{c(){t=L("p"),i=I(o),E(t,"class","svelte-15zv344")},m(e,o){b(e,t,o),_(t,i)},p(e,t){1&t&&o!==(o=e[1]+"")&&C(i,o)},d(e){e&&v(t)}}}function Qn(t){let i,o,s,a=t[0],r=[];for(let e=0;e<a.length;e+=1)r[e]=Xn(Hn(t,a,e));return{c(){i=L("h4"),i.textContent="Informació",o=w(),s=L("div");for(let e=0;e<r.length;e+=1)r[e].c();E(i,"class","svelte-15zv344"),E(s,"id","text"),E(s,"class","svelte-15zv344")},m(e,t){b(e,i,t),b(e,o,t),b(e,s,t);for(let e=0;e<r.length;e+=1)r[e].m(s,null)},p(e,[t]){if(1&t){let i;for(a=e[0],i=0;i<a.length;i+=1){const o=Hn(e,a,i);r[i]?r[i].p(o,t):(r[i]=Xn(o),r[i].c(),r[i].m(s,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=a.length}},i:e,o:e,d(e){e&&v(i),e&&v(o),e&&v(s),x(r,e)}}}function Wn(e,t,i){let{exportartextok:o}=t;return e.$$set=e=>{"exportartextok"in e&&i(0,o=e.exportartextok)},[o]}class Kn extends ve{constructor(e){super(),be(this,e,Wn,Qn,n,{exportartextok:0})}}function Jn(e){let t,i,o;return{c(){t=L("div"),i=L("img"),i.src!==(o=e[1])&&E(i,"src",o),E(i,"alt","imatgeCol"),E(i,"class","col svelte-1xaij7x"),E(t,"id","containercols"),E(t,"class","svelte-1xaij7x")},m(e,o){b(e,t,o),_(t,i)},p(e,t){2&t&&i.src!==(o=e[1])&&E(i,"src",o)},d(e){e&&v(t)}}}function Yn(e){let t,i,o;return{c(){t=L("div"),i=L("img"),i.src!==(o=e[1])&&E(i,"src",o),E(i,"alt","imatgeTall"),E(i,"class","tall svelte-1xaij7x"),E(t,"id","containertalls"),E(t,"class","svelte-1xaij7x")},m(e,o){b(e,t,o),_(t,i)},p(e,t){2&t&&i.src!==(o=e[1])&&E(i,"src",o)},d(e){e&&v(t)}}}function el(t){let i,o,s=("cols"===t[0]||"relacions"===t[0])&&Jn(t),a="talls"===t[0]&&Yn(t);return{c(){s&&s.c(),i=w(),a&&a.c(),o=q()},m(e,t){s&&s.m(e,t),b(e,i,t),a&&a.m(e,t),b(e,o,t)},p(e,[t]){"cols"===e[0]||"relacions"===e[0]?s?s.p(e,t):(s=Jn(e),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null),"talls"===e[0]?a?a.p(e,t):(a=Yn(e),a.c(),a.m(o.parentNode,o)):a&&(a.d(1),a=null)},i:e,o:e,d(e){s&&s.d(e),e&&v(i),a&&a.d(e),e&&v(o)}}}function tl(e,t,i){let o,{linkjpg:s}=t,{selected:a}=t,{typedata:r}=t;return"cols"!==r&&"relacions"!==r||(o=s),"talls"===r&&(o=`https://tilemaps.icgc.cat/tileserver/geoindex/infogeo/dades/talls/${a}.jpg`),e.$$set=e=>{"linkjpg"in e&&i(2,s=e.linkjpg),"selected"in e&&i(3,a=e.selected),"typedata"in e&&i(0,r=e.typedata)},[r,o,s,a]}class il extends ve{constructor(e){super(),be(this,e,tl,el,n,{linkjpg:2,selected:3,typedata:0})}}function ol(e){let t,i,o;return i=new il({props:{selected:e[0],linkjpg:e[2],typedata:e[1]}}),{c(){t=L("div"),fe(i.$$.fragment),E(t,"id","container"),E(t,"class","svelte-1fjc00n")},m(e,s){b(e,t,s),ye(i,t,null),o=!0},p(e,[t]){const o={};1&t&&(o.selected=e[0]),4&t&&(o.linkjpg=e[2]),2&t&&(o.typedata=e[1]),i.$set(o)},i(e){o||(ce(i.$$.fragment,e),o=!0)},o(e){ue(i.$$.fragment,e),o=!1},d(e){e&&v(t),ge(i)}}}function sl(e,t,i){let{selected:o}=t,{typedata:s}=t,{linkjpg:a}=t;return e.$$set=e=>{"selected"in e&&i(0,o=e.selected),"typedata"in e&&i(1,s=e.typedata),"linkjpg"in e&&i(2,a=e.linkjpg)},[o,s,a]}class al extends ve{constructor(e){super(),be(this,e,sl,ol,n,{selected:0,typedata:1,linkjpg:2})}}function rl(e){let t,i,o,s,a,r,n;i=new Tt({props:{style:"        cursor: pointer;font-size: 28px; float: right;    color: black;    top: 0.23em;    position: relative;",class:" material-icons iconoConsulta",$$slots:{default:[nl]},$$scope:{ctx:e}}}),i.$on("click",e[9]),s=new Kn({props:{exportartextok:e[8]}});let l=e[0]&&ll(e),c=e[1]&&cl(e);return{c(){t=L("div"),fe(i.$$.fragment),o=w(),fe(s.$$.fragment),a=w(),l&&l.c(),r=w(),c&&c.c(),E(t,"class","hola svelte-43fhj8")},m(e,u){b(e,t,u),ye(i,t,null),_(t,o),ye(s,t,null),_(t,a),l&&l.m(t,null),_(t,r),c&&c.m(t,null),n=!0},p(e,o){const a={};4194304&o&&(a.$$scope={dirty:o,ctx:e}),i.$set(a);const n={};256&o&&(n.exportartextok=e[8]),s.$set(n),e[0]?l?l.p(e,o):(l=ll(e),l.c(),l.m(t,r)):l&&(l.d(1),l=null),e[1]?c?c.p(e,o):(c=cl(e),c.c(),c.m(t,null)):c&&(c.d(1),c=null)},i(e){n||(ce(i.$$.fragment,e),ce(s.$$.fragment,e),n=!0)},o(e){ue(i.$$.fragment,e),ue(s.$$.fragment,e),n=!1},d(e){e&&v(t),ge(i),ge(s),l&&l.d(),c&&c.d()}}}function nl(e){let t;return{c(){t=I("close")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function ll(e){let t,i,o,s,a,r;return{c(){t=L("button"),t.textContent="Visualitza",i=w(),o=L("a"),s=I("Descarrega"),E(t,"id","view-full"),A(t,"color","#1a4971"),E(o,"href",e[3]),A(o,"color","#1a4971")},m(n,l){b(n,t,l),b(n,i,l),b(n,o,l),_(o,s),a||(r=F(t,"click",e[10]),a=!0)},p(e,t){8&t&&E(o,"href",e[3])},d(e){e&&v(t),e&&v(i),e&&v(o),a=!1,r()}}}function cl(e){let t,i,o,s,a,r;return{c(){t=L("button"),t.textContent="Visualitza",i=w(),o=L("a"),s=I("Descarrega"),E(t,"id","view-full"),A(t,"color","#1a4971"),E(o,"href",e[3]),A(o,"color","#1a4971")},m(n,l){b(n,t,l),b(n,i,l),b(n,o,l),_(o,s),a||(r=F(t,"click",e[10]),a=!0)},p(e,t){8&t&&E(o,"href",e[3])},d(e){e&&v(t),e&&v(i),e&&v(o),a=!1,r()}}}function ul(e){let t,i,o,s,a;return i=new al({props:{selected:e[5],linkjpg:e[2],linkzip:e[3],typedata:e[6]}}),s=new qt({props:{style:"    position: absolute;\nright:50%;\nbottom: -14px;\nz-index: 10;",$$slots:{default:[pl]},$$scope:{ctx:e}}}),s.$on("click",e[10]),{c(){t=L("div"),fe(i.$$.fragment),o=w(),fe(s.$$.fragment),E(t,"class","containerDiv svelte-43fhj8")},m(e,r){b(e,t,r),ye(i,t,null),_(t,o),ye(s,t,null),a=!0},p(e,t){const o={};32&t&&(o.selected=e[5]),4&t&&(o.linkjpg=e[2]),8&t&&(o.linkzip=e[3]),64&t&&(o.typedata=e[6]),i.$set(o);const a={};4194304&t&&(a.$$scope={dirty:t,ctx:e}),s.$set(a)},i(e){a||(ce(i.$$.fragment,e),ce(s.$$.fragment,e),a=!0)},o(e){ue(i.$$.fragment,e),ue(s.$$.fragment,e),a=!1},d(e){e&&v(t),ge(i),ge(s)}}}function hl(e){let t;return{c(){t=I("close")},m(e,i){b(e,t,i)},d(e){e&&v(t)}}}function pl(e){let t,i;return t=new Tt({props:{style:"        font-size: 30px;\ncolor: white;\nborder-style: solid;\nborder-radius: 17px;\nborder-width: 1px;\nbackground-color: black;",class:" material-icons  ",$$slots:{default:[hl]},$$scope:{ctx:e}}}),{c(){fe(t.$$.fragment)},m(e,o){ye(t,e,o),i=!0},p(e,i){const o={};4194304&i&&(o.$$scope={dirty:i,ctx:e}),t.$set(o)},i(e){i||(ce(t.$$.fragment,e),i=!0)},o(e){ue(t.$$.fragment,e),i=!1},d(e){ge(t,e)}}}function ml(e){let t,i,o,s=e[7]&&rl(e),a=e[4]&&ul(e);return{c(){s&&s.c(),t=w(),a&&a.c(),i=q()},m(e,r){s&&s.m(e,r),b(e,t,r),a&&a.m(e,r),b(e,i,r),o=!0},p(e,[o]){e[7]?s?(s.p(e,o),128&o&&ce(s,1)):(s=rl(e),s.c(),ce(s,1),s.m(t.parentNode,t)):s&&(ne(),ue(s,1,1,()=>{s=null}),le()),e[4]?a?(a.p(e,o),16&o&&ce(a,1)):(a=ul(e),a.c(),ce(a,1),a.m(i.parentNode,i)):a&&(ne(),ue(a,1,1,()=>{a=null}),le())},i(e){o||(ce(s),ce(a),o=!0)},o(e){ue(s),ue(a),o=!1},d(e){s&&s.d(e),e&&v(t),a&&a.d(e),e&&v(i)}}}function dl(e,t,i){V("changePaintProperty");const o=V("changeColorProperty"),s=V("changeInitialColorProperty"),{getMap:a}=(V("overLayers"),V(Pe)),r=a();var n=!1,l=!1,c="",u="",h=!1,p=[],m=[],d="";let f=!1;let y="";return O(async()=>{var e=new Ue.Popup({offset:[0,-15],closeOnClick:!1,closeButton:!0});r.on("click",(function(t){e.addTo(r).on("close",(function(e){}));var a=[[t.point.x-6,t.point.y-6],[t.point.x+6,t.point.y+6]],h=r.queryRenderedFeatures(a);h[0].layer.id.includes("Basament")||h[0].layer.id.includes("quaternaris")?h.forEach(e=>{h[0].layer.id.includes("PATT")&&e.sourceLayer.includes("FILL")&&(h=[e])}):h=[h[0]];let g="",_="";var b=[],v=[],x=[],L=[],I=[],w=[],q=[],F=[],E=[],T=[],C=[],z=[],A=[],P=[],B=[],M=[],D=[],S=[],k=[];if(v.push(h),void 0!==m[0]&&s(m[0]),v.forEach(e=>{"infogeo"!==e.source&&"infogeo"!==e[0].source||(m=[],e[0].layer.id.includes("FILL"),o(e[0]),m.push(e[0]))}),h.forEach(e=>{if("infogeo"===e.source&&e.properties.DESCRIPCIO){let t=e.properties.DESCRIPCIO;if(b.includes(t)||b.push(t),null!=e.properties.CODI_CAS){let t=e.properties.CODI_CAS;x.includes(t)||x.push(t)}if(null==e.properties.CODI_CAS&&null!=e.properties.ID_MAPA){let t=e.properties.ID_MAPA;x.includes(t)||x.push(t)}if(null==e.properties.CODI_CAS&&null!=e.properties.EPIGRAF){let t=e.properties.EPIGRAF;x.includes(t)||x.push(t)}if("FILLq"===e.sourceLayer||"FILL"===e.sourceLayer){let t=e.properties.IDABS,i=e.properties.EDAT,o=e.properties.EPOCA,s=e.properties.ERA,a=e.properties.PERIODE,r=e.properties.EDAT_MET,n=e.properties.MET;e.properties.OBS_EDAT;L.includes(t)||L.push(t),I.includes(i)||I.push(i),q.includes(o)||q.push(o),F.includes(s)||F.push(s),T.includes(a)||T.push(a),w.includes(r)||w.push(r),E.includes(n)||E.push(n)}else L.push(null);if("Traces de talls geològics"===e.sourceLayer){let t=e.properties.DESCRIPCIO,o=e.properties.ID_MAPA;C.includes(t)||(C.push(t),S.push(o),i(5,p=e.properties.NOM_TALL),e.properties.ID_MAPA,i(3,u=e.properties.LINK_ZIP),i(0,n=!0),i(1,l=!1),i(6,d="talls"))}if("Paleozoic NO LINK"===e.sourceLayer||"Paleozoic LINK"===e.sourceLayer||"Mesozoic NO LINK"===e.sourceLayer||"Mesozoic LINK"===e.sourceLayer||"Paleogen LINK"===e.sourceLayer||"Paleogen NO LINK"===e.sourceLayer||"Neogen LINK"===e.sourceLayer||"Neogen NO LINK"===e.sourceLayer){let t=e.properties.DESCRIPCIO,o=e.properties.ID_MAPA;e.properties.LINK_COL,e.properties.LINK_ZIP;z.includes(t)||(z.push(t),L.push(o),i(5,p=e.properties.NOM_COL),i(2,c=e.properties.LINK_COL),i(3,u=e.properties.LINK_ZIP),i(1,l=!0),i(0,n=!1),i(6,d="cols"))}if("Esquemes de relacions estratigràfiques"===e.sourceLayer){let t=e.properties.DESCRIPCIO,o=e.properties.ID_MAPA;B.includes(t)||(B.push(t),L.push(o),i(5,p=e.properties.IDABS),i(2,c=e.properties.LINK_REL),i(3,u=e.properties.LINK_ZIP),i(1,l=!0),i(0,n=!1),i(6,d="relacions"))}if(e.layer.id.includes("Terrenys antropitzats")){let t=e.properties.DESCRIPCIO,o=e.properties.CODI_CAS,s=e.properties.TIPUS,a=e.properties.EDAT;M.includes(t)||(M.push(t),L.push(o),k.push(s),I.push(a),i(5,p=e.properties.EPIGRAF),i(1,l=!1),i(0,n=!1),i(6,d="antropics"))}if(e.layer.id.includes("Mesures d'estructures")){let t=e.properties.DESCRIPCIO,o=e.properties.INCLIN,s=e.properties.DIR;D.includes(t)||(D.push(t),A.push(o),P.push(s),i(5,p=e.properties.EPIGRAF),i(1,l=!1),i(0,n=!1),i(6,d="estructures"))}}}),0!==b.length){if(0!==C.length){g=g+'<button id="view-full" style="color: #1a4971">Veure el tall</button>'+`<div>\n                                                          <p style="color: #666">TALL: ${C}</p>\n                                                          \n                                                                                                           \n                                                          \n                                                          </div>`+`<a href="${u}" style="color: #1a4971">Descarrega el tall</a>`,_=g,_=[{ep:S[0]+" :  "+C[0]}]}if(" "===I[0]){if((void 0===q[0]||" "==q[0])&&null!==L[0]&&0==q.length){i(0,n=!1),i(1,l=!1),g+=`<div>\n                                                                          <p style="color: #666"><b>${x[0]}:</b> ${b[0]}</p>\n                                                                          <p style="color: #666">Era: ${F[0]}</p>\n                                                                          <p style="color: #666">Període: ${T[0]}</p>\n                                                                          <p style="color: #666">Època: ${q[0]}</p>\n                                                                         \n                                                                          <p style="color: #666">Full25m: ${L[0]}</p>\n                                                                          </div>`,_=[{ep:x[0]+" :  "+b[0]},{Era:F[0]},{"Període":T[0]},{"Època":q[0]},{"Full MGC25m-GTI":L[0]}]}if(void 0===E[0]||" "==E[0]){if(null!==L[0]&&0==C.length&&" "===q[0]){i(0,n=!1),i(1,l=!1),g+=`<div>\n                                                                          <p style="color: #666"><b>${x[0]}:</b> ${b[0]}</p>\n                                                                          <p style="color: #666">Era: ${F[0]}</p>\n                                                                          <p style="color: #666">Període: ${T[0]}</p>\n                                                                       \n                                                                         \n                                                                          <p style="color: #666">Full25m: ${L[0]}</p>\n                                                                          </div>`,_=[{ep:x[0]+" :  "+b[0]},{Era:F[0]},{"Període":T[0]},{"Full MGC25m-GTI":L[0]}]}if(null!==L[0]&&0==C.length&&q[0].length>1){i(0,n=!1),i(1,l=!1),g+=`<div>\n                                                                          <p style="color: #666"><b>${x[0]}:</b> ${b[0]}</p>\n                                                                          <p style="color: #666">Era: ${F[0]}</p>\n                                                                          <p style="color: #666">Període: ${T[0]}</p>\n                                                                          <p style="color: #666">Època: ${q[0]}</p>\n                                                                         \n                                                                          <p style="color: #666">Full25m: ${L[0]}</p>\n                                                                          </div>`,_=[{ep:x[0]+" :  "+b[0]},{Era:F[0]},{"Període":T[0]},{"Època":q[0]},{"Full MGC25m-GTI":L[0]}]}}else if(null!==L[0]&&0==C.length)if(i(0,n=!1),i(1,l=!1)," "===q[0]&&" "===I[0]){g+=`<div>\n                                                                  <p style="color: #666"><b>${x[0]}:</b> ${b[0]}</p>\n                                                                  <p style="color: #666">Era: ${F[0]}</p>\n                                                                  <p style="color: #666">Període: ${T[0]}</p>\n                                                                  <p style="color: #666">Edat del metamorfisme.: ${w[0]}</p>\n                                                                  <p style="color: #666">Metamorfisme: ${E[0]}</p>\n                                                                  <p style="color: #666">Full25m: ${L[0]}</p>\n                                                                  </div>`,_=[{ep:x[0]+" :  "+b[0]},{Era:F[0]},{"Període":T[0]},{"Edat del metamorfisme.":w[0]},{Metamorfisme:E[0]},{"Full MGC25m-GTI":L[0]}]}else{g+=`<div>\n                                                                  <p style="color: #666"><b>${x[0]}:</b> ${b[0]}</p>\n                                                                  <p style="color: #666">Era: ${F[0]}</p>\n                                                                  <p style="color: #666">Període: ${T[0]}</p>\n                                                                  <p style="color: #666">Època: ${q[0]}</p>\n                                                                  <p style="color: #666">Edat: ${I[0]}</p>\n\n                                                                  <p style="color: #666">Edat del metamorfisme.: ${w[0]}</p>\n                                                                  <p style="color: #666">Metamorfisme: ${E[0]}</p>\n                                                                  <p style="color: #666">Full25m: ${L[0]}</p>\n                                                                  </div>`,_=[{ep:x[0]+" :  "+b[0]},{Era:F[0]},{"Període":T[0]},{"Època":q[0]},{Edat:I[0]},{"Edat del metamorfisme.":w[0]},{Metamorfisme:E[0]},{"Full MGC25m-GTI":L[0]}]}}else if(void 0===E[0]||" "==E[0]){if(null!==L[0]&&0==C.length){i(0,n=!1),i(1,l=!1),g+=`<div>\n                                                                          <p style="color: #666"><b>${x[0]}:</b> ${b[0]}</p>\n                                                                          <p style="color: #666">Era: ${F[0]}</p>\n                                                                          <p style="color: #666">Període: ${T[0]}</p>\n                                                                          <p style="color: #666">Època: ${q[0]}</p>\n                                                                          <p style="color: #666">Edat: ${I[0]}</p>\n                                                                          <p style="color: #666">Full25m: ${L[0]}</p>\n                                                                          </div>`,_=[{ep:x[0]+" :  "+b[0]},{Era:F[0]},{"Període":T[0]},{"Època":q[0]},{Edat:I[0]},{"Full MGC25m-GTI":L[0]}]}}else if(null!==L[0]&&0==C.length){i(0,n=!1),i(1,l=!1),g+=`<div>\n                                                                  <p style="color: #666"><b>${x[0]}:</b> ${b[0]}</p>\n                                                                  <p style="color: #666">Era: ${F[0]}</p>\n                                                                  <p style="color: #666">Període: ${T[0]}</p>\n                                                                  <p style="color: #666">Època: ${q[0]}</p>\n                                                                  <p style="color: #666">Edat: ${I[0]}</p>\n\n                                                                  <p style="color: #666">Edat del metamorfisme.: ${w[0]}</p>\n                                                                  <p style="color: #666">Metamorfisme: ${E[0]}</p>\n                                                                  <p style="color: #666">Full25m: ${L[0]}</p>\n                                                                  </div>`,_=[{ep:x[0]+" :  "+b[0]},{Era:F[0]},{"Període":T[0]},{"Època":q[0]},{Edat:I[0]},{"Edat del metamorfisme.":w[0]},{Metamorfisme:E[0]},{"Full MGC25m-GTI":L[0]}]}if(null===L[0]&&0==C.length&&0==A.length){if(null!==z[0]&&0==A.length&&null!==L[0]){g=L[1]+b[0],_=[{ep:L[1]+" :  "+b[0]}]}if(null!==z[0]&&0==A.length&&null!==k[0]){let e;g=L[1]+b[0],void 0!==L[1]&&void 0!==z[0]?e=L[1]+" :  "+b[0]:(void 0!==I[0]&&1!==I[0].length&&b[0].includes("Contacte")&&(e=b[0]),e=(void 0===I[0]||1===I[0].length||b[0].includes("Contacte"))&&b[0].includes("Esquema")?L[1]+" :  "+b[0]:b[0]),_=[{ep:e},{Tipus:k[0]}]}if(null!==z[0]&&0==A.length&&null===k[0]&&null===L[1]&&void 0===L[1]){g=L[1]+b[0],_=[{ep:b[0]}]}if(null!==z[0]&&0==A.length&&null===L[0]&&void 0!==L[1]&&null===k[0]){g=L[1]+b[0],_=[{ep:L[1]+" :  "+b[0]}]}}if(null!==L[0]&&0!==C.length&&0==A.length){g=x[0]+b[0],_=[{ep:x[0]+" :  "+b[0]}]}0==z.length&&0!==A.length&&(g+=`<div>\n                                                                          \n                                                                          <p style="color: #666">${b[0]}</p>\n                                                                          <p style="color: #666">Inclinació: ${A[0]}</p>\n                                                                          <p style="color: #666">Direcció: ${P[0]}</p>\n                                                                         \n                                                                          \n                                                                          </div>`,_=[{"":b[0]},{"Inclinació":A[0]},{"Direcció":P[0]}]);let e=[];_.forEach(t=>{let i=JSON.stringify(t);i=i.replace('"":',"").replace('"'," ").replace("{","").replace("}","").replace('":"',": ").replace('"',"").replace("ep:",""),e.push(i)}),i(8,y=e),i(7,f=!0)}}))}),[n,l,c,u,h,p,d,f,y,function(){s(m[0]),i(7,f=!1)},function(){i(4,h=!h)}]}class fl extends ve{constructor(e){super(),be(this,e,dl,ml,n,{})}}function yl(e){let t,i,o,s,a,r;return t=new Gn({}),o=new Zn({}),a=new fl({}),{c(){fe(t.$$.fragment),i=w(),fe(o.$$.fragment),s=w(),fe(a.$$.fragment)},m(e,n){ye(t,e,n),b(e,i,n),ye(o,e,n),b(e,s,n),ye(a,e,n),r=!0},i(e){r||(ce(t.$$.fragment,e),ce(o.$$.fragment,e),ce(a.$$.fragment,e),r=!0)},o(e){ue(t.$$.fragment,e),ue(o.$$.fragment,e),ue(a.$$.fragment,e),r=!1},d(e){ge(t,e),e&&v(i),ge(o,e),e&&v(s),ge(a,e)}}}function gl(e){let t,i,o,s,a,r,n,l;function c(t){e[2].call(null,t)}let u={};return void 0!==e[0]&&(u.openModalInfo=e[0]),i=new wo({props:u}),Z.push(()=>de(i,"openModalInfo",c)),a=new Ms({}),n=new Os({props:{lat:41.763,lon:1.443,zoom:7.58,maxZoom:15.8,pitch:0,bearing:0,style:e[1],$$slots:{default:[yl]},$$scope:{ctx:e}}}),{c(){t=L("div"),fe(i.$$.fragment),s=w(),fe(a.$$.fragment),r=w(),fe(n.$$.fragment),E(t,"class","container svelte-15shk6w")},m(e,o){b(e,t,o),ye(i,t,null),_(t,s),ye(a,t,null),_(t,r),ye(n,t,null),l=!0},p(e,[t]){const s={};!o&&1&t&&(o=!0,s.openModalInfo=e[0],J(()=>o=!1)),i.$set(s);const a={};16384&t&&(a.$$scope={dirty:t,ctx:e}),n.$set(a)},i(e){l||(ce(i.$$.fragment,e),ce(a.$$.fragment,e),ce(n.$$.fragment,e),l=!0)},o(e){ue(i.$$.fragment,e),ue(a.$$.fragment,e),ue(n.$$.fragment,e),l=!1},d(e){e&&v(t),ge(i),ge(a),ge(n)}}}function _l(e,t,i){let o,s={...To};const a=Be[0].url;Ie.subscribe(e=>{});function r(e,t){const i=t?"visible":"none";let o;e.value.split(",").forEach(e=>{s.layers.forEach(t=>{t.layout&&t.layout.visibility&&t["source-layer"]===e&&(o=t.id,t.layout.visibility=i,qe.set({ly:o,vis:i}))})})}return O(async()=>{}),$("overLayers",s),$("activateLayer",r),$("activateLayerGroup",(function(e,t){e.items.forEach(e=>{r(e,t)})})),$("changeBaseLayer",(function(e){Fe.set(e.url)})),$("estilTopo",a),$("changePaintProperty",(function(e,t){let i,o;"FILLq,PATT1q,LABELq/label"===e.value&&s.layers.forEach(e=>{e.layout&&e.layout.visibility&&("FILLq"===e["source-layer"]&&(i=e.id,o=parseFloat(t/100),e.paint["fill-opacity"]=o,Ee.set({ly:i,op:o})),e["source-layer"].includes("PATTq")&&(i=e.id,o=parseFloat(t/100),e.paint["fill-opacity"]=o,Ee.set({ly:i,op:o})))}),"FILL,PATT1,PATT2,PATT3,PATT4,LABEL/label"===e.value&&s.layers.forEach(e=>{e.layout&&e.layout.visibility&&("FILL"===e["source-layer"]&&(i=e.id,o=parseFloat(t/100),e.paint["fill-opacity"]=o,Ee.set({ly:i,op:o})),e["source-layer"].includes("PATT")&&(i=e.id,o=parseFloat(t/100),e.paint["fill-opacity"]=o,Ee.set({ly:i,op:o})))}),"Columnes del Paleozoic,Columnes del Mesozoic,Paleogen LINK,Paleogen NO LINK,Neogen LINK,Neogen NO LINK"===e.value&&s.layers.forEach(e=>{e.layout&&e.layout.visibility&&("Columnes del Paleozoic"!==e["source-layer"]&&"Columnes del Mesozoic"!==e["source-layer"]&&"Paleogen LINK"!==e["source-layer"]&&"Paleogen NO LINK"!==e["source-layer"]&&"Neogen LINK"!==e["source-layer"]&&"Neogen NO LINK"!==e["source-layer"]||(i=e.id,o=parseFloat(t/100),e.paint["fill-opacity"]=o,Ee.set({ly:i,op:o})))})})),$("changeColorProperty",(function(e){let t,i,o,a;s.layers.forEach(s=>{s.layout&&s.layout.visibility&&s.id===e.layer.id&&(t=s.id,i=s.paint,a=e.properties.ID_MAPA,o=s.type,s.id.includes("Terrenys")&&(a=e.properties.CODI_CAS,Ae.set({item:e,ly:t,op:i,idabs:a,ty:o})),"Talls geològics/Traces de talls geològics/5704"===s.id||s.id.includes("Terrenys")?(a=e.properties.NOM_TALL,Ae.set({item:e,ly:t,op:i,idabs:a,ty:o})):(a=e.properties.CODI_CAS,Ce.set({ly:t,op:i,ty:o}),Ae.set({item:e,ly:t,op:i,idabs:a,ty:o})))}),e.layer["source-layer"].includes("Terrenys")&&s.layers.forEach(t=>{if(t.layout&&t.layout.visibility&&t.id===e.layer.id){let t,i;t="antropics",i=e.properties.CODI_CAS,Ae.set({item:e,id:t,nom:i})}}),"Traces de talls geològics"===e.layer["source-layer"]&&s.layers.forEach(t=>{if(t.layout&&t.layout.visibility&&t.id===e.layer.id){let t,i;t="talls",i=e.properties.NOM_TALL,Ae.set({item:e,id:t,nom:i})}}),e.layer.id.includes("Columnes")&&s.layers.forEach(t=>{if(t.layout&&t.layout.visibility&&t.id===e.layer.id){let t,i;t="polygonColumnes",i=e.properties.IDABS,Ae.set({item:e,id:t,idabs:i})}}),"Esquemes de relacions estratigràfiques"===e.layer["source-layer"]&&s.layers.forEach(t=>{if(t.layout&&t.layout.visibility&&t.id===e.layer.id){let t,i;t="polygonEsquemes",i=e.properties.IDABS,Ae.set({item:e,id:t,idabs:i})}}),"FILLq"===e.layer["source-layer"]&&s.layers.forEach(t=>{if(t.layout&&t.layout.visibility&&t.id===e.layer.id){let t,i;t="polygonsQt",i=e.properties.IDABS,Ae.set({item:e,id:t,idabs:i})}}),"FILL"===e.layer["source-layer"]&&s.layers.forEach(t=>{if(t.layout&&t.layout.visibility&&t.id===e.layer.id){let t,i;t="polygonsBs",i=e.properties.IDABS,Ae.set({item:e,id:t,idabs:i})}})})),$("changeInitialColorProperty",(function(e){let t,i,o;s.layers.forEach(s=>{s.layout&&s.layout.visibility&&s.id===e.layer.id&&(t=s.id,i=s.paint,o=s.type,ze.set({ly:t,op:i,ty:o}))})})),$("changePlace",(function(e){Te.set(e)})),$("stateTallDrawer",we),[o,a,function(e){o=e,i(0,o)}]}return new class extends ve{constructor(e){super(),be(this,e,_l,gl,n,{})}}({target:document.body,props:{}})}();
>>>>>>> 1ed08ea1a226fd9513960ae50faf6e54be727dee
//# sourceMappingURL=bundle.js.map
